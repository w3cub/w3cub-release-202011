
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>computedAsync ​ - VueUse - W3cubDocs</title>
  
  <meta name="description" content=" Computed for async functions ">
  <meta name="keywords" content="computedasync, ​, vueuse">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/vueuse/core/computedasync/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9b6ce6139b8492a0447e9396e58206baee4973e9a8a1d9126d4ab69e244811034e5265efcc9da8b9550a8e365367ee3ea1d2c5757f9a5fc1720dc94cd4df775b.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/vueuse.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/vueuse/" class="_nav-link" title="" style="margin-left:0;">VueUse</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _vueuse">
				
				
<h1 id="computedasync" tabindex="-1">computedAsync </h1>
<table class="grid grid-cols-[100px_auto] gap-2 text-sm mt-4 mb-8 items-start">
<tr>
<th> Category </th>
<td><a href="../../functions#category=Reactivity">Reactivity</a></td>
</tr>
<tr>
<th> Export Size </th>
<td>358 B</td>
</tr>
<tr>
<th> Last Changed </th>
<td>2 months ago</td>
</tr>
<tr>
<th> Alias </th>
<td flex="~ gap-1 wrap"><code class="!py-0">asyncComputed</code></td>
</tr>
</table>
<p>Computed for async functions</p>
<h2 id="usage" tabindex="-1">Usage </h2>
<div class="language-js">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">import { ref } from 'vue'
import { computedAsync } from '@vueuse/core'

const name = ref('jack')

const userInfo = computedAsync(
  async () =&gt; {
    return await mockLookUp(name.value)
  },
  null, // initial state
)</pre>
</div>
<h3 id="evaluation-state" tabindex="-1">Evaluation State </h3>
<p>You will need to pass a ref to track if the async function is evaluating.</p>
<div class="language-js">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">import { ref } from 'vue'
import { computedAsync } from '@vueuse/core'

const evaluating = ref(false)

const userInfo = computedAsync(
  async () =&gt; { /* your logic */ },
  null,
  evaluating,
)</pre>
</div>
<h3 id="oncancel" tabindex="-1">onCancel </h3>
<p>When the computed source changed before the previous async function gets resolved, you may want to cancel the previous one. Here is an example showing how to incorporate with the fetch API.</p>
<div class="language-js">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">const packageName = ref('@vueuse/core')

const downloads = computedAsync(async (onCancel) =&gt; {
  const abortController = new AbortController()

  onCancel(() =&gt; abortController.abort())

  return await fetch(
    `https://api.npmjs.org/downloads/point/last-week/${packageName.value}`,
    { signal: abortController.signal },
  )
    .then(response =&gt; response.ok ? response.json() : { downloads: '—' })
    .then(result =&gt; result.downloads)
}, 0)</pre>
</div>
<h3 id="lazy" tabindex="-1">Lazy </h3>
<p>By default, <code>computedAsync</code> will start resolving immediately on creation, specify <code>lazy: true</code> to make it start resolving on the first accessing.</p>
<div class="language-js">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">import { ref } from 'vue'
import { computedAsync } from '@vueuse/core'

const evaluating = ref(false)

const userInfo = computedAsync(
  async () =&gt; { /* your logic */ },
  null,
  { lazy: true, evaluating },
)</pre>
</div>
<h2 id="caveats" tabindex="-1">Caveats </h2>
<ul>
<li><p>Just like Vue's built-in <code>computed</code> function, <code>computedAsync</code> does dependency tracking and is automatically re-evaluated when dependencies change. Note however that only dependency referenced in the first call stack are considered for this. In other words: <strong>Dependencies that are accessed asynchronously will not trigger re-evaluation of the async computed value.</strong></p></li>
<li><p>As opposed to Vue's built-in <code>computed</code> function, re-evaluation of the async computed value is triggered whenever dependencies are changing, regardless of whether its result is currently being tracked or not.</p></li>
</ul>
<h2 id="type-declarations" tabindex="-1">Type Declarations </h2>
<div>
<summary op50 italic cursor-pointer select-none>Show Type Declarations</summary><div class="language-typescript">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">/**
 * Handle overlapping async evaluations.
 *
 * @param cancelCallback The provided callback is invoked when a re-evaluation of the computed value is triggered before the previous one finished
 */
export type AsyncComputedOnCancel = (cancelCallback: Fn) =&gt; void
export interface AsyncComputedOptions {
  /**
   * Should value be evaluated lazily
   *
   * @default false
   */
  lazy?: boolean
  /**
   * Ref passed to receive the updated of async evaluation
   */
  evaluating?: Ref&lt;boolean&gt;
  /**
   * Use shallowRef
   *
   * @default true
   */
  shallow?: boolean
  /**
   * Callback when error is caught.
   */
  onError?: (e: unknown) =&gt; void
}
/**
 * Create an asynchronous computed dependency.
 *
 * @see https://vueuse.org/computedAsync
 * @param evaluationCallback     The promise-returning callback which generates the computed value
 * @param initialState           The initial state, used until the first evaluation finishes
 * @param optionsOrRef           Additional options or a ref passed to receive the updates of the async evaluation
 */
export declare function computedAsync&lt;T&gt;(
  evaluationCallback: (onCancel: AsyncComputedOnCancel) =&gt; T | Promise&lt;T&gt;,
  initialState?: T,
  optionsOrRef?: Ref&lt;boolean&gt; | AsyncComputedOptions
): Ref&lt;T&gt;
export { computedAsync as asyncComputed }</pre>
</div>
</div>
<h2 id="source" tabindex="-1">Source </h2>
<p><a href="https://github.com/vueuse/vueuse/blob/main/packages/core/computedAsync/index.ts" target="_blank" rel="noreferrer">Source</a> • <a href="https://github.com/vueuse/vueuse/blob/main/packages/core/computedAsync/index.md" target="_blank" rel="noreferrer">Docs</a></p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019-present Anthony Fu<br>Licensed under the MIT License.<br>
    <a href="https://vueuse.org/core/computedAsync/" class="_attribution-link">https://vueuse.org/core/computedAsync/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
