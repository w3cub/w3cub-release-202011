
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>createTemplatePromise ​ - VueUse - W3cubDocs</title>
  
  <meta name="description" content=" Template as Promise. Useful for constructing custom Dialogs, Modals, Toasts, etc. ">
  <meta name="keywords" content="createtemplatepromise, ​, vueuse">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/vueuse/core/createtemplatepromise/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9b6ce6139b8492a0447e9396e58206baee4973e9a8a1d9126d4ab69e244811034e5265efcc9da8b9550a8e365367ee3ea1d2c5757f9a5fc1720dc94cd4df775b.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/vueuse.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/vueuse/" class="_nav-link" title="" style="margin-left:0;">VueUse</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _vueuse">
				
				
<h1 id="createtemplatepromise" tabindex="-1">createTemplatePromise </h1>
<table class="grid grid-cols-[100px_auto] gap-2 text-sm mt-4 mb-8 items-start">
<tr>
<th> Category </th>
<td><a href="../../functions#category=Component">Component</a></td>
</tr>
<tr>
<th> Export Size </th>
<td>497 B</td>
</tr>
<tr>
<th> Last Changed </th>
<td>last week</td>
</tr>
</table>
<p>Template as Promise. Useful for constructing custom Dialogs, Modals, Toasts, etc.</p>
<div class="warning custom-block">
<strong class="custom-block-title">WARNING</strong><p>This function only works for Vue 3</p>
</div>
<h2 id="usage" tabindex="-1">Usage </h2>
<div class="language-html">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">&lt;script setup lang="ts"&gt;
import { createTemplatePromise } from '@vueuse/core'

const TemplatePromise = createTemplatePromise&lt;ReturnType&gt;()

async function open() {
  const result = await TemplatePromise.start()
  // button is clicked, result is 'ok'
}
&lt;/script&gt;

&lt;template&gt;
  &lt;TemplatePromise v-slot="{ promise, resolve, reject, args }"&gt;
    &lt;!-- your UI --&gt;
    &lt;button @click="resolve('ok')"&gt;OK&lt;/button&gt;
  &lt;/TemplatePromise&gt;
&lt;/template&gt;</pre>
</div>
<h2 id="features" tabindex="-1">Features </h2>
<ul>
<li>
<strong>Programmatic</strong> - call your UI as a promise</li>
<li>
<strong>Template</strong> - use Vue template to render, not a new DSL</li>
<li>
<strong>TypeScript</strong> - full type safety via generic type</li>
<li>
<strong>Renderless</strong> - you take full control of the UI</li>
<li>
<strong>Transition</strong> - use support Vue transition</li>
</ul>
<p>This function is migrated from <a href="https://github.com/antfu/vue-template-promise" target="_blank" rel="noreferrer">vue-template-promise</a></p>
<h2 id="usage-1" tabindex="-1">Usage </h2>
<p><a href="index"><code>createTemplatePromise</code></a> returns a <strong>Vue Component</strong> that you can directly use in your template with <code>&lt;script setup&gt;</code></p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">import { createTemplatePromise } from '@vueuse/core'

const TemplatePromise = createTemplatePromise()
const MyPromise = createTemplatePromise&lt;boolean&gt;() // with generic type</pre>
</div>
<p>In template, use <code>v-slot</code> to access the promise and resolve functions.</p>
<div class="language-html">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">&lt;template&gt;
  &lt;TemplatePromise v-slot="{ promise, resolve, reject, args }"&gt;
    &lt;!-- you can have anything --&gt;
    &lt;button @click="resolve('ok')"&gt;OK&lt;/button&gt;
  &lt;/TemplatePromise&gt;
  &lt;MyPromise v-slot="{ promise, resolve, reject, args }"&gt;
    &lt;!-- another one --&gt;
  &lt;/MyPromise&gt;
&lt;/template&gt;</pre>
</div>
<p>The slot will not be rendered initially (similar to <code>v-if="false"</code>), until you call the <code>start</code> method from the component.</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">const result = await TemplatePromise.start()</pre>
</div>
<p>Once <code>resolve</code> or <code>reject</code> is called in the template, the promise will be resolved or rejected, returning the value you passed in. Once resolved, the slot will be removed automatically.</p>
<h3 id="passing-arguments" tabindex="-1">Passing Arguments </h3>
<p>You can pass arguments to the <code>start</code> with arguments.</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">import { createTemplatePromise } from '@vueuse/core'

const TemplatePromise = createTemplatePromise&lt;boolean, [string, number]&gt;()</pre>
</div>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">const result = await TemplatePromise.start('hello', 123) // Pr</pre>
</div>
<p>And in the template slot, you can access the arguments via <code>args</code> property.</p>
<div class="language-html">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">&lt;template&gt;
  &lt;TemplatePromise v-slot="{ args, resolve }"&gt;
    &lt;div&gt;{{ args[0] }}&lt;/div&gt; &lt;!-- hello --&gt;
    &lt;div&gt;{{ args[1] }}&lt;/div&gt; &lt;!-- 123 --&gt;
    &lt;button @click="resolve(true)"&gt;OK&lt;/button&gt;
  &lt;/TemplatePromise&gt;
&lt;/template&gt;</pre>
</div>
<h3 id="transition" tabindex="-1">Transition </h3>
<p>You can use transition to animate the slot.</p>
<div class="language-html">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">&lt;script setup lang="ts"&gt;
const TemplatePromise = createTemplatePromise&lt;ReturnType&gt;({
  transition: {
    name: 'fade',
    appear: true,
  },
})
&lt;/script&gt;

&lt;template&gt;
  &lt;TemplatePromise v-slot="{ resolve }"&gt;
    &lt;!-- your UI --&gt;
    &lt;button @click="resolve('ok')"&gt;OK&lt;/button&gt;
  &lt;/TemplatePromise&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.fade-enter-active, .fade-leave-active {
  transition: opacity .5s;
}
.fade-enter, .fade-leave-to {
  opacity: 0;
}
&lt;/style&gt;</pre>
</div>
<p>Learn more about <a href="https://v3.vuejs.org/guide/transitions-overview.html" target="_blank" rel="noreferrer">Vue Transition</a>.</p>
<h2 id="motivation" tabindex="-1">Motivation </h2>
<p>The common approach to call a dialog or a model programmatically would be like this:</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">const dialog = useDialog()
const result = await dialog.open({
  title: 'Hello',
  content: 'World',
})</pre>
</div>
<p>This would work by sending these information to the top-level component and let it render the dialog. However, it limits the flexibility you could express in the UI. For example, you could want the title to be red, or have extra buttons, etc. You would end up with a lot of options like:</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">const result = await dialog.open({
  title: 'Hello',
  titleClass: 'text-red',
  content: 'World',
  contentClass: 'text-blue text-sm',
  buttons: [
    { text: 'OK', class: 'bg-red', onClick: () =&gt; {} },
    { text: 'Cancel', class: 'bg-blue', onClick: () =&gt; {} },
  ],
  // ...
})</pre>
</div>
<p>Even this is not flexible enough. If you want more, you might end up with manual render function.</p>
<div class="language-ts">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">const result = await dialog.open({
  title: 'Hello',
  contentSlot: () =&gt; h(MyComponent, { content }),
})</pre>
</div>
<p>This is like reinventing a new DSL in the script to express the UI template.</p>
<p>So this function allows <strong>expressing the UI in templates instead of scripts</strong>, where it is supposed to be, while still being able to be manipulated programmatically.</p>
<h2 id="type-declarations" tabindex="-1">Type Declarations </h2>
<div>
<summary op50 italic cursor-pointer select-none>Show Type Declarations</summary><div class="language-typescript">
<pre class="shiki vitesse-light vp-code-light" data-language="javascript">export interface TemplatePromiseProps&lt;Return, Args extends any[] = []&gt; {
  /**
   * The promise instance.
   */
  promise: Promise&lt;Return&gt; | undefined
  /**
   * Resolve the promise.
   */
  resolve: (v: Return | Promise&lt;Return&gt;) =&gt; void
  /**
   * Reject the promise.
   */
  reject: (v: any) =&gt; void
  /**
   * Arguments passed to TemplatePromise.start()
   */
  args: Args
  /**
   * Indicates if the promise is resolving.
   * When passing another promise to `resolve`, this will be set to `true` until the promise is resolved.
   */
  isResolving: boolean
  /**
   * Options passed to createTemplatePromise()
   */
  options: TemplatePromiseOptions
  /**
   * Unique key for list rendering.
   */
  key: number
}
export interface TemplatePromiseOptions {
  /**
   * Determines if the promise can be called only once at a time.
   *
   * @default false
   */
  singleton?: boolean
  /**
   * Transition props for the promise.
   */
  transition?: TransitionGroupProps
}
export type TemplatePromise&lt;
  Return,
  Args extends any[] = []
&gt; = DefineComponent&lt;{}&gt; &amp; {
  new (): {
    $slots: {
      default(_: TemplatePromiseProps&lt;Return, Args&gt;): any
    }
  }
} &amp; {
  start: (...args: Args) =&gt; Promise&lt;Return&gt;
}
/**
 * Creates a template promise component.
 *
 * @see https://vueuse.org/createTemplatePromise
 */
export declare function createTemplatePromise&lt;Return, Args extends any[] = []&gt;(
  options?: TemplatePromiseOptions
): TemplatePromise&lt;Return, Args&gt;</pre>
</div>
</div>
<h2 id="source" tabindex="-1">Source </h2>
<p><a href="https://github.com/vueuse/vueuse/blob/main/packages/core/createTemplatePromise/index.ts" target="_blank" rel="noreferrer">Source</a> • <a href="https://github.com/vueuse/vueuse/blob/main/packages/core/createTemplatePromise/demo.vue" target="_blank" rel="noreferrer">Demo</a> • <a href="https://github.com/vueuse/vueuse/blob/main/packages/core/createTemplatePromise/index.md" target="_blank" rel="noreferrer">Docs</a></p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019-present Anthony Fu<br>Licensed under the MIT License.<br>
    <a href="https://vueuse.org/core/createTemplatePromise/" class="_attribution-link">https://vueuse.org/core/createTemplatePromise/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
