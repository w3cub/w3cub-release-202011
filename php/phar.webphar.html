
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Phar&#58;&#58;webPhar - PHP - W3cubDocs</title>
  
  <meta name="description" content=" (PHP 5 &#62;&#61; 5.3.0, PHP 7, PECL phar &#62;&#61; 2.0.0) ">
  <meta name="keywords" content="phar, webphar, php">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/php/phar.webphar.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/php.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/php/" class="_nav-link" title="" style="margin-left:0;">PHP</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _php">
				
				
<div id="layout"> <div id="layout-content"><div id="phar.webphar" class="refentry"> <div class="refnamediv"> <h1 class="refname">Phar::webPhar</h1> <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PECL phar &gt;= 2.0.0)</p>
<p class="refpurpose"><span class="refname">Phar::webPhar</span> — <span class="dc-title">mapPhar for web-based phars. front controller for web applications</span></p> </div> <div class="refsect1 description" id="refsect1-phar.webphar-description"> <h3 class="title">Description</h3> <pre class="methodsynopsis dc-description" data-language="php">final public static Phar::webPhar ([ string $alias [, string $index = "index.php" [, string $f404 [, array $mimetypes [, callable $rewrites ]]]]] ) : void</pre> <p class="para rdfs-comment"> <span class="function"><a href="phar.mapphar" class="function">Phar::mapPhar()</a></span> for web-based phars. This method parses <var class="varname"><a href="reserved.variables.server" class="classname">$_SERVER['REQUEST_URI']</a></var> and routes a request from a web browser to an internal file within the phar archive. In essence, it simulates a web server, routing requests to the correct file, echoing the correct headers and parsing PHP files as needed. This powerful method is part of what makes it easy to convert an existing PHP application into a phar archive. Combined with <span class="function"><a href="phar.mungserver" class="function">Phar::mungServer()</a></span> and <span class="function"><a href="phar.interceptfilefuncs" class="function">Phar::interceptFileFuncs()</a></span>, any web application can be used unmodified from a phar archive. </p> <p class="para"> <span class="function"><strong>Phar::webPhar()</strong></span> should only be called from the stub of a phar archive (see <a href="https://www.php.net/manual/en/phar.fileformat.stub.php" class="link">here</a> for more information on what a stub is). </p> </div> <div class="refsect1 parameters" id="refsect1-phar.webphar-parameters"> <h3 class="title">Parameters</h3> 
<dl> <dt> <code class="parameter">alias</code>
</dt> <dd> <p class="para"> The alias that can be used in <code class="literal">phar://</code> URLs to refer to this archive, rather than its full path. </p> </dd> <dt> <code class="parameter">index</code>
</dt> <dd> <p class="para"> The location within the phar of the directory index. </p> </dd> <dt> <code class="parameter">f404</code>
</dt> <dd> <p class="para"> The location of the script to run when a file is not found. This script should output the proper HTTP 404 headers. </p> </dd> <dt> <code class="parameter">mimetypes</code>
</dt> <dd> <p class="para"> An array mapping additional file extensions to MIME type. If the default mapping is sufficient, pass an empty array. By default, these extensions are mapped to these MIME types: </p>
<div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
$mimes = array(
    'phps' =&gt; Phar::PHPS, // pass to highlight_file()
    'c' =&gt; 'text/plain',
    'cc' =&gt; 'text/plain',
    'cpp' =&gt; 'text/plain',
    'c++' =&gt; 'text/plain',
    'dtd' =&gt; 'text/plain',
    'h' =&gt; 'text/plain',
    'log' =&gt; 'text/plain',
    'rng' =&gt; 'text/plain',
    'txt' =&gt; 'text/plain',
    'xsd' =&gt; 'text/plain',
    'php' =&gt; Phar::PHP, // parse as PHP
    'inc' =&gt; Phar::PHP, // parse as PHP
    'avi' =&gt; 'video/avi',
    'bmp' =&gt; 'image/bmp',
    'css' =&gt; 'text/css',
    'gif' =&gt; 'image/gif',
    'htm' =&gt; 'text/html',
    'html' =&gt; 'text/html',
    'htmls' =&gt; 'text/html',
    'ico' =&gt; 'image/x-ico',
    'jpe' =&gt; 'image/jpeg',
    'jpg' =&gt; 'image/jpeg',
    'jpeg' =&gt; 'image/jpeg',
    'js' =&gt; 'application/x-javascript',
    'midi' =&gt; 'audio/midi',
    'mid' =&gt; 'audio/midi',
    'mod' =&gt; 'audio/mod',
    'mov' =&gt; 'movie/quicktime',
    'mp3' =&gt; 'audio/mp3',
    'mpg' =&gt; 'video/mpeg',
    'mpeg' =&gt; 'video/mpeg',
    'pdf' =&gt; 'application/pdf',
    'png' =&gt; 'image/png',
    'swf' =&gt; 'application/shockwave-flash',
    'tif' =&gt; 'image/tiff',
    'tiff' =&gt; 'image/tiff',
    'wav' =&gt; 'audio/wav',
    'xbm' =&gt; 'image/xbm',
    'xml' =&gt; 'text/xml',
);
?&gt;</pre> </div> </dd> <dt> <code class="parameter">rewrites</code>
</dt> <dd> <p class="para"> The rewrites function is passed a string as its only parameter and must return a <span class="type">string</span> or <strong><code>false</code></strong>. </p> <p class="para"> If you are using fast-cgi or cgi then the parameter passed to the function is the value of the <var class="varname"><a href="reserved.variables.server" class="classname">$_SERVER['PATH_INFO']</a></var> variable. Otherwise, the parameter passed to the function is the value of the <var class="varname"><a href="reserved.variables.server" class="classname">$_SERVER['REQUEST_URI']</a></var> variable. </p> <p class="para"> If a string is returned it is used as the internal file path. If <strong><code>false</code></strong> is returned then webPhar() will send a HTTP 403 Denied Code. </p> </dd> </dl> </div> <div class="refsect1 returnvalues" id="refsect1-phar.webphar-returnvalues"> <h3 class="title">Return Values</h3> <p class="para"> No value is returned. </p> </div> <div class="refsect1 errors" id="refsect1-phar.webphar-errors"> <h3 class="title">Errors/Exceptions</h3> <p class="para"> Throws <a href="class.pharexception" class="classname">PharException</a> when unable to open the internal file to output, or if called from a non-stub. If an invalid array value is passed into <code class="parameter">mimetypes</code> or an invalid callback is passed into <code class="parameter">rewrites</code>, then <a href="class.unexpectedvalueexception" class="classname">UnexpectedValueException</a> is thrown. </p> </div> <div class="refsect1 examples" id="refsect1-phar.webphar-examples"> <h3 class="title">Examples</h3> 
<div class="example" id="example-742"> <p><strong>Example #1 A <span class="function"><strong>Phar::webPhar()</strong></span> example</strong></p> <div class="example-contents"><p> With the example below, the created phar will display <code class="literal">Hello World</code> if one browses to <code class="literal">/myphar.phar/index.php</code> or to <code class="literal">/myphar.phar</code>, and will display the source of <code class="literal">index.phps</code> if one browses to <code class="literal">/myphar.phar/index.phps</code>. </p></div> <div class="example-contents"> <pre class="phpcode" data-language="php">&lt;?php
// creating the phar archive:
try {
    $phar = new Phar('myphar.phar');
    $phar['index.php'] = '&lt;?php echo "Hello World"; ?&gt;';
    $phar['index.phps'] = '&lt;?php echo "Hello World"; ?&gt;';
    $phar-&gt;setStub('&lt;?php
Phar::webPhar();
__HALT_COMPILER(); ?&gt;');
} catch (Exception $e) {
    // handle error here
}
?&gt;</pre> </div> </div> </div> <div class="refsect1 seealso" id="refsect1-phar.webphar-seealso"> <h3 class="title">See Also</h3> 
<ul class="simplelist"> <li class="member"><span class="function"><a href="phar.mungserver" class="function" rel="rdfs-seeAlso">Phar::mungServer()</a> - Defines a list of up to 4 $_SERVER variables that should be modified for execution</span></li> <li class="member"><span class="function"><a href="phar.interceptfilefuncs" class="function" rel="rdfs-seeAlso">Phar::interceptFileFuncs()</a> - Instructs phar to intercept fopen, file_get_contents, opendir, and all of the stat-related functions</span></li> </ul> </div> </div></div>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © 1997–2020 The PHP Documentation Group<br>Licensed under the Creative Commons Attribution License v3.0 or later.<br>
    <a href="https://www.php.net/manual/en/phar.webphar.php" class="_attribution-link">https://www.php.net/manual/en/phar.webphar.php</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
