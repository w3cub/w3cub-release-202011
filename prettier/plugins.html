
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Plugins - Prettier - W3cubDocs</title>
  
  <meta name="description" content="Plugins are ways of adding new languages or formatting rules to Prettier. Prettier’s own implementations of all languages are expressed using the &hellip;">
  <meta name="keywords" content="plugins, prettier">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/prettier/plugins.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/prettier.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/prettier/" class="_nav-link" title="" style="margin-left:0;">Prettier</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 id="__docusaurus" class="postHeaderTitle">Plugins</h1>
<p>Plugins are ways of adding new languages or formatting rules to Prettier. Prettier’s own implementations of all languages are expressed using the plugin API. The core <code>prettier</code> package contains JavaScript and other web-focused languages built in. For additional languages you’ll need to install a plugin.</p> <h2 id="using-plugins">
Using Plugins</h2> <p>You can load plugins with:</p> <ul> <li>
<p>The <a href="cli">CLI</a>, via <code>--plugin</code>:</p> <pre data-language="jsx">prettier --write main.foo --plugin=prettier-plugin-foo
</pre> <blockquote> <p>Tip: You can set <code>--plugin</code> options multiple times.</p> </blockquote>
</li> <li>
<p>The <a href="api">API</a>, via the <code>plugins</code> options:</p> <pre data-language="jsx"><span class="token keyword">await</span> prettier<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"prettier-plugin-foo"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</li> <li>
<p>The <a href="configuration">Configuration File</a>:</p> <pre data-language="jsx">{
  <span class="hljs-attr">"plugins"</span>: [<span class="hljs-string">"prettier-plugin-foo"</span>]
}
</pre>
</li> </ul> <p>Strings provided to <code>plugins</code> are ultimately passed to <a href="https://nodejs.org/api/esm.html#import-expressions"><code>import()</code> expression</a>, so you can provide a module/package name, a path, or anything else <code>import()</code> takes.</p> <h2 id="official-plugins">
Official Plugins</h2> <ul> <li><a href="https://github.com/prettier/plugin-php"><code>@prettier/plugin-php</code></a></li> <li>
<a href="https://github.com/prettier/plugin-pug"><code>@prettier/plugin-pug</code></a> by <a href="https://github.com/Shinigami92"><strong>@Shinigami92</strong></a>
</li> <li><a href="https://github.com/prettier/plugin-ruby"><code>@prettier/plugin-ruby</code></a></li> <li><a href="https://github.com/prettier/plugin-xml"><code>@prettier/plugin-xml</code></a></li> </ul> <h2 id="community-plugins">
Community Plugins</h2> <ul> <li>
<a href="https://github.com/dangmai/prettier-plugin-apex"><code>prettier-plugin-apex</code></a> by <a href="https://github.com/dangmai"><strong>@dangmai</strong></a>
</li> <li>
<a href="https://github.com/withastro/prettier-plugin-astro"><code>prettier-plugin-astro</code></a> by <a href="https://github.com/withastro/prettier-plugin-astro/graphs/contributors"><strong>@withastro contributors</strong></a>
</li> <li>
<a href="https://github.com/gicentre/prettier-plugin-elm"><code>prettier-plugin-elm</code></a> by <a href="https://github.com/gicentre"><strong>@giCentre</strong></a>
</li> <li>
<a href="https://github.com/adamzapasnik/prettier-plugin-erb"><code>prettier-plugin-erb</code></a> by <a href="https://github.com/adamzapasnik"><strong>@adamzapasnik</strong></a>
</li> <li>
<a href="https://github.com/NaridaL/glsl-language-toolkit/tree/main/packages/prettier-plugin-glsl"><code>prettier-plugin-glsl</code></a> by <a href="https://github.com/NaridaL"><strong>@NaridaL</strong></a>
</li> <li>
<a href="https://github.com/NiklasPor/prettier-plugin-go-template"><code>prettier-plugin-go-template</code></a> by <a href="https://github.com/NiklasPor"><strong>@NiklasPor</strong></a>
</li> <li>
<a href="https://github.com/jhipster/prettier-java"><code>prettier-plugin-java</code></a> by <a href="https://github.com/jhipster"><strong>@JHipster</strong></a>
</li> <li>
<a href="https://github.com/Stedi/prettier-plugin-jsonata"><code>prettier-plugin-jsonata</code></a> by <a href="https://github.com/Stedi"><strong>@Stedi</strong></a>
</li> <li>
<a href="https://github.com/Angry-Potato/prettier-plugin-kotlin"><code>prettier-plugin-kotlin</code></a> by <a href="https://github.com/Angry-Potato"><strong>@Angry-Potato</strong></a>
</li> <li>
<a href="https://github.com/dfinity/prettier-plugin-motoko"><code>prettier-plugin-motoko</code></a> by <a href="https://github.com/dfinity"><strong>@dfinity</strong></a>
</li> <li>
<a href="https://github.com/joedeandev/prettier-plugin-nginx"><code>prettier-plugin-nginx</code></a> by <a href="https://github.com/joedeandev"><strong>@joedeandev</strong></a>
</li> <li>
<a href="https://github.com/umidbekk/prettier-plugin-prisma"><code>prettier-plugin-prisma</code></a> by <a href="https://github.com/umidbekk"><strong>@umidbekk</strong></a>
</li> <li>
<a href="https://github.com/eemeli/prettier-plugin-properties"><code>prettier-plugin-properties</code></a> by <a href="https://github.com/eemeli"><strong>@eemeli</strong></a>
</li> <li>
<a href="https://github.com/jinxdash/prettier-plugin-rust"><code>prettier-plugin-rust</code></a> by <a href="https://github.com/jinxdash"><strong>@jinxdash</strong></a>
</li> <li>
<a href="https://github.com/un-ts/prettier/tree/master/packages/sh"><code>prettier-plugin-sh</code></a> by <a href="https://github.com/JounQin"><strong>@JounQin</strong></a>
</li> <li>
<a href="https://github.com/un-ts/prettier/tree/master/packages/sql"><code>prettier-plugin-sql</code></a> by <a href="https://github.com/JounQin"><strong>@JounQin</strong></a>
</li> <li>
<a href="https://github.com/nene/prettier-plugin-sql-cst"><code>prettier-plugin-sql-cst</code></a> by <a href="https://github.com/nene"><strong>@nene</strong></a>
</li> <li>
<a href="https://github.com/prettier-solidity/prettier-plugin-solidity"><code>prettier-plugin-solidity</code></a> by <a href="https://github.com/mattiaerre"><strong>@mattiaerre</strong></a>
</li> <li>
<a href="https://github.com/sveltejs/prettier-plugin-svelte"><code>prettier-plugin-svelte</code></a> by <a href="https://github.com/sveltejs"><strong>@sveltejs</strong></a>
</li> <li>
<a href="https://github.com/bd82/toml-tools/tree/master/packages/prettier-plugin-toml"><code>prettier-plugin-toml</code></a> by <a href="https://github.com/bd82"><strong>@bd82</strong></a>
</li> </ul> <h2 id="developing-plugins">
Developing Plugins</h2> <p>Prettier plugins are regular JavaScript modules with the following five exports or default export with the following properties:</p> <ul> <li><code>languages</code></li> <li><code>parsers</code></li> <li><code>printers</code></li> <li><code>options</code></li> <li><code>defaultOptions</code></li> </ul> <h3 id="languages">
<code>languages</code>
</h3> <p>Languages is an array of language definitions that your plugin will contribute to Prettier. It can include all of the fields specified in <a href="api#prettiergetsupportinfo"><code>prettier.getSupportInfo()</code></a>.</p> <p>It <strong>must</strong> include <code>name</code> and <code>parsers</code>.</p> <pre data-language="jsx"><span class="token keyword">export</span> <span class="token keyword">const</span> languages <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// The language name</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"InterpretedDanceScript"</span><span class="token punctuation">,</span>
    <span class="token comment">// Parsers that can parse this language.</span>
    <span class="token comment">// This can be built-in parsers, or parsers you have contributed via this plugin.</span>
    <span class="token literal-property property">parsers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"dance-parse"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</pre> <h3 id="parsers">
<code>parsers</code>
</h3> <p>Parsers convert code as a string into an <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">AST</a>.</p> <p>The key must match the name in the <code>parsers</code> array from <code>languages</code>. The value contains a parse function, an AST format name, and two location extraction functions (<code>locStart</code> and <code>locEnd</code>).</p> <pre data-language="jsx"><span class="token keyword">export</span> <span class="token keyword">const</span> parsers <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">"dance-parse"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    parse<span class="token punctuation">,</span>
    <span class="token comment">// The name of the AST that</span>
    <span class="token literal-property property">astFormat</span><span class="token operator">:</span> <span class="token string">"dance-ast"</span><span class="token punctuation">,</span>
    hasPragma<span class="token punctuation">,</span>
    locStart<span class="token punctuation">,</span>
    locEnd<span class="token punctuation">,</span>
    preprocess<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre> <p>The signature of the <code>parse</code> function is:</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">parse</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">:</span> object<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">AST</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token constant">AST</span><span class="token punctuation">;</span>
</pre> <p>The location extraction functions (<code>locStart</code> and <code>locEnd</code>) return the starting and ending locations of a given AST node:</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">locStart</span><span class="token punctuation">(</span>node<span class="token operator">:</span> object<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</pre> <p><em>(Optional)</em> The pragma detection function (<code>hasPragma</code>) should return if the text contains the pragma comment.</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">hasPragma</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
</pre> <p><em>(Optional)</em> The preprocess function can process the input text before passing into <code>parse</code> function.</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">preprocess</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">:</span> object<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</pre> <h3 id="printers">
<code>printers</code>
</h3> <p>Printers convert ASTs into a Prettier intermediate representation, also known as a Doc.</p> <p>The key must match the <code>astFormat</code> that the parser produces. The value contains an object with a <code>print</code> function. All other properties (<code>embed</code>, <code>preprocess</code>, etc.) are optional.</p> <pre data-language="jsx"><span class="token keyword">export</span> <span class="token keyword">const</span> printers <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">"dance-ast"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    print<span class="token punctuation">,</span>
    embed<span class="token punctuation">,</span>
    preprocess<span class="token punctuation">,</span>
    getVisitorKeys<span class="token punctuation">,</span>
    insertPragma<span class="token punctuation">,</span>
    canAttachComment<span class="token punctuation">,</span>
    isBlockComment<span class="token punctuation">,</span>
    printComment<span class="token punctuation">,</span>
    getCommentChildNodes<span class="token punctuation">,</span>
    <span class="token literal-property property">handleComments</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      ownLine<span class="token punctuation">,</span>
      endOfLine<span class="token punctuation">,</span>
      remaining<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre> <h4 id="the-printing-process">
The printing process</h4> <p>Prettier uses an intermediate representation, called a Doc, which Prettier then turns into a string (based on options like <code>printWidth</code>). A <em>printer</em>'s job is to take the AST generated by <code>parsers[&lt;parser name&gt;].parse</code> and return a Doc. A Doc is constructed using <a href="https://github.com/prettier/prettier/blob/main/commands.md">builder commands</a>:</p> <pre data-language="jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> doc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"prettier"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> join<span class="token punctuation">,</span> line<span class="token punctuation">,</span> ifBreak<span class="token punctuation">,</span> group <span class="token punctuation">}</span> <span class="token operator">=</span> doc<span class="token punctuation">.</span>builders<span class="token punctuation">;</span>
</pre> <p>The printing process consists of the following steps:</p> <ol> <li>
<strong>AST preprocessing</strong> (optional). See <a href="#optional-preprocess"><code>preprocess</code></a>.</li> <li>
<strong>Comment attachment</strong> (optional). See <a href="#handling-comments-in-a-printer">Handling comments in a printer</a>.</li> <li>
<strong>Processing embedded languages</strong> (optional). The <a href="#optional-embed"><code>embed</code></a> method, if defined, is called for each node, depth-first. While, for performance reasons, the recursion itself is synchronous, <code>embed</code> may return asynchronous functions that can call other parsers and printers to compose docs for embedded syntaxes like CSS-in-JS. These returned functions are queued up and sequentially executed before the next step.</li> <li>
<strong>Recursive printing</strong>. A doc is recursively constructed from the AST. Starting from the root node: <ul> <li>If, from the step 3, there is an embedded language doc associated with the current node, this doc is used.</li> <li>Otherwise, the <code>print(path, options, print): Doc</code> method is called. It composes a doc for the current node, often by printing child nodes using the <code>print</code> callback.</li> </ul>
</li> </ol> <h4 id="print">
<code>print</code>
</h4> <p>Most of the work of a plugin's printer will take place in its <code>print</code> function, whose signature is:</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">print</span><span class="token punctuation">(</span>
  <span class="token comment">// Path to the AST node to print</span>
  path<span class="token operator">:</span> AstPath<span class="token punctuation">,</span>
  options<span class="token operator">:</span> object<span class="token punctuation">,</span>
  <span class="token comment">// Recursively print a child node</span>
  <span class="token function-variable function">print</span><span class="token operator">:</span> <span class="token punctuation">(</span>selector<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">|</span> AstPath<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Doc<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> Doc<span class="token punctuation">;</span>
</pre> <p>The <code>print</code> function is passed the following parameters:</p> <ul> <li>
<strong><code>path</code></strong>: An object, which can be used to access nodes in the AST. It’s a stack-like data structure that maintains the current state of the recursion. It is called “path” because it represents the path to the current node from the root of the AST. The current node is returned by <code>path.getValue()</code>.</li> <li>
<strong><code>options</code></strong>: A persistent object, which contains global options and which a plugin may mutate to store contextual data.</li> <li>
<strong><code>print</code></strong>: A callback for printing sub-nodes. This function contains the core printing logic that consists of steps whose implementation is provided by plugins. In particular, it calls the printer’s <code>print</code> function and passes itself to it. Thus, the two <code>print</code> functions – the one from the core and the one from the plugin – call each other while descending down the AST recursively.</li> </ul> <p>Here’s a simplified example to give an idea of what a typical implementation of <code>print</code> looks like:</p> <pre data-language="jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> doc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"prettier"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> group<span class="token punctuation">,</span> indent<span class="token punctuation">,</span> join<span class="token punctuation">,</span> line<span class="token punctuation">,</span> softline <span class="token punctuation">}</span> <span class="token operator">=</span> doc<span class="token punctuation">.</span>builders<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> options<span class="token punctuation">,</span> print</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> node <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">switch</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">"list"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string">"("</span><span class="token punctuation">,</span>
        <span class="token function">indent</span><span class="token punctuation">(</span><span class="token punctuation">[</span>softline<span class="token punctuation">,</span> <span class="token function">join</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>print<span class="token punctuation">,</span> <span class="token string">"elements"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        softline<span class="token punctuation">,</span>
        <span class="token string">")"</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">case</span> <span class="token string">"pair"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token string">"("</span><span class="token punctuation">,</span>
        <span class="token function">indent</span><span class="token punctuation">(</span><span class="token punctuation">[</span>softline<span class="token punctuation">,</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> line<span class="token punctuation">,</span> <span class="token string">". "</span><span class="token punctuation">,</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"right"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        softline<span class="token punctuation">,</span>
        <span class="token string">")"</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">case</span> <span class="token string">"symbol"</span><span class="token operator">:</span>
      <span class="token keyword">return</span> node<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Unknown node type: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>node<span class="token punctuation">.</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre> <p>Check out <a href="https://github.com/prettier/prettier-python/blob/034ba8a9551f3fa22cead41b323be0b28d06d13b/src/printer.js#L174">prettier-python's printer</a> for some examples of what is possible.</p> <h4 id="optional-embed">
(optional) <code>embed</code>
</h4> <p>A printer can have the <code>embed</code> method to print one language inside another. Examples of this are printing CSS-in-JS or fenced code blocks in Markdown. The signature is:</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">embed</span><span class="token punctuation">(</span>
  <span class="token comment">// Path to the current AST node</span>
  path<span class="token operator">:</span> AstPath<span class="token punctuation">,</span>
  <span class="token comment">// Current options</span>
  options<span class="token operator">:</span> Options<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span>
  <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>
      <span class="token comment">// Parses and prints the passed text using a different parser.</span>
      <span class="token comment">// You should set `options.parser` to specify which parser to use.</span>
      <span class="token function-variable function">textToDoc</span><span class="token operator">:</span> <span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">:</span> Options<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Doc<span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token comment">// Prints the current node or its descendant node with the current printer</span>
      <span class="token function-variable function">print</span><span class="token operator">:</span> <span class="token punctuation">(</span>
        selector<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">|</span> AstPath<span class="token punctuation">,</span>
      <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Doc<span class="token punctuation">,</span>
      <span class="token comment">// The following two arguments are passed for convenience.</span>
      <span class="token comment">// They're the same `path` and `options` that are passed to `embed`.</span>
      path<span class="token operator">:</span> AstPath<span class="token punctuation">,</span>
      options<span class="token operator">:</span> Options<span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Doc <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span> <span class="token operator">|</span> Doc <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
  <span class="token operator">|</span> Doc
  <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
</pre> <p>The <code>embed</code> method is similar to the <code>print</code> method in that it maps AST nodes to docs, but unlike <code>print</code>, it has power to do async work by returning an async function. That function's first parameter, the <code>textToDoc</code> async function, can be used to render a doc using a different plugin.</p> <p>If a function returned from <code>embed</code> returns a doc or a promise that resolves to a doc, that doc will be used in printing, and the <code>print</code> method won’t be called for this node. It's also possible and, in rare situations, might be convenient to return a doc synchronously directly from <code>embed</code>, however <code>textToDoc</code> and the <code>print</code> callback aren’t available at that case. Return a function to get them.</p> <p>If <code>embed</code> returns <code>undefined</code>, or if a function it returned returns <code>undefined</code> or a promise that resolves to <code>undefined</code>, the node will be printed normally with the <code>print</code> method. Same will happen if a returned function throws an error or returns a promise that rejects (e.g., if a parsing error has happened). Set the <code>PRETTIER_DEBUG</code> environment variable to a non-empty value if you want Prettier to rethrow these errors.</p> <p>For example, a plugin that has nodes with embedded JavaScript might have the following <code>embed</code> method:</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">embed</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> node <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"javascript"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">textToDoc</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token string">"&lt;script&gt;"</span><span class="token punctuation">,</span>
        hardline<span class="token punctuation">,</span>
        <span class="token keyword">await</span> <span class="token function">textToDoc</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>javaScriptCode<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">"babel"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        hardline<span class="token punctuation">,</span>
        <span class="token string">"&lt;/script&gt;"</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre> <p>If the <a href="options#embedded-language-formatting"><code>--embedded-language-formatting</code></a> option is set to <code>off</code>, the embedding step is entirely skipped, <code>embed</code> isn’t called, and all nodes are printed with the <code>print</code> method.</p> <h4 id="optional-preprocess">
(optional) <code>preprocess</code>
</h4> <p>The <code>preprocess</code> method can process the AST from the parser before passing it into the <code>print</code> method.</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">preprocess</span><span class="token punctuation">(</span>ast<span class="token operator">:</span> <span class="token constant">AST</span><span class="token punctuation">,</span> options<span class="token operator">:</span> Options<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">AST</span> <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">AST</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</pre> <h4 id="optional-getvisitorkeys">
(optional) <code>getVisitorKeys</code>
</h4> <p>This property might come in handy if the plugin uses comment attachment or embedded languages. These features traverse the AST iterating through all the own enumerable properties of each node starting from the root. If the AST has <a href="https://en.wikipedia.org/wiki/Cycle_(graph_theory)">cycles</a>, such a traverse ends up in an infinite loop. Also, nodes might contain non-node objects (e.g., location data), iterating through which is a waste of resources. To solve these issues, the printer can define a function to return property names that should be traversed.</p> <p>Its signature is:</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">getVisitorKeys</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> nonTraversableKeys<span class="token operator">:</span> Set<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</pre> <p>The default <code>getVisitorKeys</code>:</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">getVisitorKeys</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> nonTraversableKeys</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>nonTraversableKeys<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre> <p>The second argument <code>nonTraversableKeys</code> is a set of common keys and keys that prettier used internal.</p> <p>If you have full list of visitor keys</p> <pre data-language="jsx"><span class="token keyword">const</span> visitorKeys <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">Program</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"body"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">Identifier</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getVisitorKeys</span><span class="token punctuation">(</span>node <span class="token comment">/* , nonTraversableKeys*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Return `[]` for unknown node to prevent Prettier fallback to use `Object.keys()`</span>
  <span class="token keyword">return</span> visitorKeys<span class="token punctuation">[</span>node<span class="token punctuation">.</span>type<span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre> <p>If you only need exclude a small set of keys</p> <pre data-language="jsx"><span class="token keyword">const</span> ignoredKeys <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"prev"</span><span class="token punctuation">,</span> <span class="token string">"next"</span><span class="token punctuation">,</span> <span class="token string">"range"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getVisitorKeys</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> nonTraversableKeys</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>nonTraversableKeys<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>ignoredKeys<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre> <h4 id="optional-insertpragma">
(optional) <code>insertPragma</code>
</h4> <p>A plugin can implement how a pragma comment is inserted in the resulting code when the <code>--insert-pragma</code> option is used, in the <code>insertPragma</code> function. Its signature is:</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">insertPragma</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</pre> <h4 id="handling-comments-in-a-printer">
Handling comments in a printer</h4> <p>Comments are often not part of a language's AST and present a challenge for pretty printers. A Prettier plugin can either print comments itself in its <code>print</code> function or rely on Prettier's comment algorithm.</p> <p>By default, if the AST has a top-level <code>comments</code> property, Prettier assumes that <code>comments</code> stores an array of comment nodes. Prettier will then use the provided <code>parsers[&lt;plugin&gt;].locStart</code>/<code>locEnd</code> functions to search for the AST node that each comment "belongs" to. Comments are then attached to these nodes <strong>mutating the AST in the process</strong>, and the <code>comments</code> property is deleted from the AST root. The <code>*Comment</code> functions are used to adjust Prettier's algorithm. Once the comments are attached to the AST, Prettier will automatically call the <code>printComment(path, options): Doc</code> function and insert the returned doc into the (hopefully) correct place.</p> <h4 id="optional-getcommentchildnodes">
(optional) <code>getCommentChildNodes</code>
</h4> <p>By default, Prettier searches all object properties (except for a few predefined ones) of each node recursively. This function can be provided to override that behavior. It has the signature:</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">getCommentChildNodes</span><span class="token punctuation">(</span>
  <span class="token comment">// The node whose children should be returned.</span>
  node<span class="token operator">:</span> <span class="token constant">AST</span><span class="token punctuation">,</span>
  <span class="token comment">// Current options</span>
  options<span class="token operator">:</span> object<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">AST</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
</pre> <p>Return <code>[]</code> if the node has no children or <code>undefined</code> to fall back on the default behavior.</p> <h4 id="optional-printcomment">
(optional) <code>printComment</code>
</h4> <p>Called whenever a comment node needs to be printed. It has the signature:</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">printComment</span><span class="token punctuation">(</span>
  <span class="token comment">// Path to the current comment node</span>
  commentPath<span class="token operator">:</span> AstPath<span class="token punctuation">,</span>
  <span class="token comment">// Current options</span>
  options<span class="token operator">:</span> object<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> Doc<span class="token punctuation">;</span>
</pre> <h4 id="optional-canattachcomment">
(optional) <code>canAttachComment</code>
</h4> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">canAttachComment</span><span class="token punctuation">(</span>node<span class="token operator">:</span> <span class="token constant">AST</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
</pre> <p>This function is used for deciding whether a comment can be attached to a particular AST node. By default, <em>all</em> AST properties are traversed searching for nodes that comments can be attached to. This function is used to prevent comments from being attached to a particular node. A typical implementation looks like</p> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">canAttachComment</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> node<span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">"comment"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre> <h4 id="optional-isblockcomment">
(optional) <code>isBlockComment</code>
</h4> <pre data-language="jsx"><span class="token keyword">function</span> <span class="token function">isBlockComment</span><span class="token punctuation">(</span>node<span class="token operator">:</span> <span class="token constant">AST</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
</pre> <p>Returns whether or not the AST node is a block comment.</p> <h4 id="optional-handlecomments">
(optional) <code>handleComments</code>
</h4> <p>The <code>handleComments</code> object contains three optional functions, each with signature</p> <pre data-language="jsx"><span class="token punctuation">(</span>
  <span class="token comment">// The AST node corresponding to the comment</span>
  comment<span class="token operator">:</span> <span class="token constant">AST</span><span class="token punctuation">,</span>
  <span class="token comment">// The full source code text</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  <span class="token comment">// The global options object</span>
  options<span class="token operator">:</span> object<span class="token punctuation">,</span>
  <span class="token comment">// The AST</span>
  ast<span class="token operator">:</span> <span class="token constant">AST</span><span class="token punctuation">,</span>
  <span class="token comment">// Whether this comment is the last comment</span>
  isLastComment<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
</pre> <p>These functions are used to override Prettier's default comment attachment algorithm. <code>ownLine</code>/<code>endOfLine</code>/<code>remaining</code> is expected to either manually attach a comment to a node and return <code>true</code>, or return <code>false</code> and let Prettier attach the comment.</p> <p>Based on the text surrounding a comment node, Prettier dispatches:</p> <ul> <li>
<code>ownLine</code> if a comment has only whitespace preceding it and a newline afterwards,</li> <li>
<code>endOfLine</code> if a comment has a newline afterwards but some non-whitespace preceding it,</li> <li>
<code>remaining</code> in all other cases.</li> </ul> <p>At the time of dispatching, Prettier will have annotated each AST comment node (i.e., created new properties) with at least one of <code>enclosingNode</code>, <code>precedingNode</code>, or <code>followingNode</code>. These can be used to aid a plugin's decision process (of course the entire AST and original text is also passed in for making more complicated decisions).</p> <h4 id="manually-attaching-a-comment">
Manually attaching a comment</h4> <p>The <code>util.addTrailingComment</code>/<code>addLeadingComment</code>/<code>addDanglingComment</code> functions can be used to manually attach a comment to an AST node. An example <code>ownLine</code> function that ensures a comment does not follow a "punctuation" node (made up for demonstration purposes) might look like:</p> <pre data-language="jsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> util <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"prettier"</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">ownLine</span><span class="token punctuation">(</span><span class="token parameter">comment<span class="token punctuation">,</span> text<span class="token punctuation">,</span> options<span class="token punctuation">,</span> ast<span class="token punctuation">,</span> isLastComment</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> precedingNode <span class="token punctuation">}</span> <span class="token operator">=</span> comment<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>precedingNode <span class="token operator">&amp;&amp;</span> precedingNode<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"punctuation"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    util<span class="token punctuation">.</span><span class="token function">addTrailingComment</span><span class="token punctuation">(</span>precedingNode<span class="token punctuation">,</span> comment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre> <p>Nodes with comments are expected to have a <code>comments</code> property containing an array of comments. Each comment is expected to have the following properties: <code>leading</code>, <code>trailing</code>, <code>printed</code>.</p>  <p>The example above uses <code>util.addTrailingComment</code>, which automatically sets <code>comment.leading</code>/<code>trailing</code>/<code>printed</code> to appropriate values and adds the comment to the AST node's <code>comments</code> array.</p> <p>The <code>--debug-print-comments</code> CLI flag can help with debugging comment attachment issues. It prints a detailed list of comments, which includes information on how every comment was classified (<code>ownLine</code>/<code>endOfLine</code>/<code>remaining</code>, <code>leading</code>/<code>trailing</code>/<code>dangling</code>) and to which node it was attached. For Prettier’s built-in languages, this information is also available on the Playground (the 'show comments' checkbox in the Debug section).</p> <h3 id="options">
<code>options</code>
</h3> <p><code>options</code> is an object containing the custom options your plugin supports.</p> <p>Example:</p> <pre data-language="jsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... plugin implementation</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">openingBraceNewLine</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"boolean"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">category</span><span class="token operator">:</span> <span class="token string">"Global"</span><span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">"Move open brace for code blocks onto new line."</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre> <h3 id="defaultoptions">
<code>defaultOptions</code>
</h3> <p>If your plugin requires different default values for some of Prettier’s core options, you can specify them in <code>defaultOptions</code>:</p> <pre data-language="jsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... plugin implementation</span>
  <span class="token literal-property property">defaultOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">tabWidth</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre> <h3 id="utility-functions">
Utility functions</h3> <p>A <code>util</code> module from Prettier core is considered a private API and is not meant to be consumed by plugins. Instead, the <code>util-shared</code> module provides the following limited set of utility functions for plugins:</p> <pre data-language="jsx"><span class="token keyword">type</span> <span class="token class-name">Quote</span> <span class="token operator">=</span> <span class="token string">'"'</span> <span class="token operator">|</span> <span class="token string">"'"</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">SkipOptions</span> <span class="token operator">=</span> <span class="token punctuation">{</span> backwards<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getMaxContinuousCount</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> searchString<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getStringWidth</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getAlignmentSize</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  tabWidth<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getIndentSize</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> tabWidth<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">skip</span><span class="token punctuation">(</span>
  characters<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> RegExp<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> SkipOptions<span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">skipWhitespace</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> SkipOptions<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">skipSpaces</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> SkipOptions<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">skipToLineEnd</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> SkipOptions<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">skipEverythingButNewLine</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> SkipOptions<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">skipInlineComment</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">skipTrailingComment</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">skipNewline</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> SkipOptions<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">hasNewline</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> SkipOptions<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">hasNewlineInRange</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">hasSpaces</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> SkipOptions<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">makeString</span><span class="token punctuation">(</span>
  rawText<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  enclosingQuote<span class="token operator">:</span> Quote<span class="token punctuation">,</span>
  unescapeUnnecessaryEscapes<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getNextNonSpaceNonCommentCharacter</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getNextNonSpaceNonCommentCharacterIndex</span><span class="token punctuation">(</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  startIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">isNextLineEmpty</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> startIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">isPreviousLineEmpty</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> startIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
</pre> <h3 id="tutorials">
Tutorials</h3> <ul> <li>
<a href="https://medium.com/@fvictorio/how-to-write-a-plugin-for-prettier-a0d98c845e70">How to write a plugin for Prettier</a>: Teaches you how to write a very basic Prettier plugin for TOML.</li> </ul> <h2 id="testing-plugins">
Testing Plugins</h2> <p>Since plugins can be resolved using relative paths, when working on one you can do:</p> <pre data-language="jsx"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> prettier <span class="token keyword">from</span> <span class="token string">"prettier"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token string">"(add 1 2)"</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> prettier<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">"lisp"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"."</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre> <p>This will resolve a plugin relative to the current working directory.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © James Long and contributors<br>
    <a href="https://prettier.io/docs/en/plugins.html" class="_attribution-link">https://prettier.io/docs/en/plugins.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
