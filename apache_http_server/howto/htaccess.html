
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>.htaccess Files - Apache HTTP Server - W3cubDocs</title>
  
  <meta name="description" content=" .htaccess files provide a way to make configuration changes on a per-directory basis. ">
  <meta name="keywords" content="apache, http, server, tutorial, htaccess, files, apache_http_server">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/apache_http_server/howto/htaccess.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/apache_http_server.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/apache_http_server/" class="_nav-link" title="" style="margin-left:0;">Apache HTTP Server</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _apache">
				
				
<h1>Apache HTTP Server Tutorial: .htaccess files</h1>  <p><code>.htaccess</code> files provide a way to make configuration changes on a per-directory basis.</p>     <h2 id="related">.htaccess files</h2> <table class="related">
<tr>
<th>Related Modules</th>
<th>Related Directives</th>
</tr>
<tr>
<td><ul>
<li><code class="module"><a href="../mod/core">core</a></code></li>
<li><code class="module"><a href="../mod/mod_authn_file">mod_authn_file</a></code></li>
<li><code class="module"><a href="../mod/mod_authz_groupfile">mod_authz_groupfile</a></code></li>
<li><code class="module"><a href="../mod/mod_cgi">mod_cgi</a></code></li>
<li><code class="module"><a href="../mod/mod_include">mod_include</a></code></li>
<li><code class="module"><a href="../mod/mod_mime">mod_mime</a></code></li>
</ul></td>
<td><ul>
<li><code class="directive"><a href="../mod/core#accessfilename">AccessFileName</a></code></li>
<li><code class="directive"><a href="../mod/core#allowoverride">AllowOverride</a></code></li>
<li><code class="directive"><a href="../mod/core#options">Options</a></code></li>
<li><code class="directive"><a href="../mod/mod_mime#addhandler">AddHandler</a></code></li>
<li><code class="directive"><a href="../mod/core#sethandler">SetHandler</a></code></li>
<li><code class="directive"><a href="../mod/mod_authn_core#authtype">AuthType</a></code></li>
<li><code class="directive"><a href="../mod/mod_authn_core#authname">AuthName</a></code></li>
<li><code class="directive"><a href="../mod/mod_authn_file#authuserfile">AuthUserFile</a></code></li>
<li><code class="directive"><a href="../mod/mod_authz_groupfile#authgroupfile">AuthGroupFile</a></code></li>
<li><code class="directive"><a href="../mod/mod_authz_core#require">Require</a></code></li>
</ul></td>
</tr>
</table> <div class="note">You should avoid using <code>.htaccess</code> files completely if you have access to httpd main server config file. Using <code>.htaccess</code> files slows down your Apache http server. Any directive that you can include in a <code>.htaccess</code> file is better set in a <code class="directive"><a href="../mod/core#directory">Directory</a></code> block, as it will have the same effect with better performance.</div>   <h2 id="what">What they are/How to use them</h2> <p><code>.htaccess</code> files (or "distributed configuration files") provide a way to make configuration changes on a per-directory basis. A file, containing one or more configuration directives, is placed in a particular document directory, and the directives apply to that directory, and all subdirectories thereof.</p> <div class="note">
<p><strong>Note:</strong></p> <p>If you want to call your <code>.htaccess</code> file something else, you can change the name of the file using the <code class="directive"><a href="../mod/core#accessfilename">AccessFileName</a></code> directive. For example, if you would rather call the file <code>.config</code> then you can put the following in your server configuration file:</p> <pre class="prettyprint lang-config">AccessFileName ".config"</pre> </div> <p>In general, <code>.htaccess</code> files use the same syntax as the <a href="../configuring#syntax">main configuration files</a>. What you can put in these files is determined by the <code class="directive"><a href="../mod/core#allowoverride">AllowOverride</a></code> directive. This directive specifies, in categories, what directives will be honored if they are found in a <code>.htaccess</code> file. If a directive is permitted in a <code>.htaccess</code> file, the documentation for that directive will contain an Override section, specifying what value must be in <code class="directive"><a href="../mod/core#allowoverride">AllowOverride</a></code> in order for that directive to be permitted.</p> <p>For example, if you look at the documentation for the <code class="directive"><a href="../mod/core#adddefaultcharset">AddDefaultCharset</a></code> directive, you will find that it is permitted in <code>.htaccess</code> files. (See the Context line in the directive summary.) The Override line reads <code>FileInfo</code>. Thus, you must have at least <code>AllowOverride FileInfo</code> in order for this directive to be honored in <code>.htaccess</code> files.</p> <div class="example">
<h3>Example:</h3>
<table> <tr> <td>Context:</td> <td>server config, virtual host, directory, .htaccess</td> </tr> <tr> <td>Override:</td> <td>FileInfo</td> </tr> </table>
</div> <p>If you are unsure whether a particular directive is permitted in a <code>.htaccess</code> file, look at the documentation for that directive, and check the Context line for ".htaccess".</p>   <h2 id="when">When (not) to use .htaccess files</h2> <p>In general, you should only use <code>.htaccess</code> files when you don't have access to the main server configuration file. There is, for example, a common misconception that user authentication should always be done in <code>.htaccess</code> files, and, in more recent years, another misconception that <code class="module"><a href="../mod/mod_rewrite">mod_rewrite</a></code> directives must go in <code>.htaccess</code> files. This is simply not the case. You can put user authentication configurations in the main server configuration, and this is, in fact, the preferred way to do things. Likewise, <code>mod_rewrite</code> directives work better, in many respects, in the main server configuration.</p> <p><code>.htaccess</code> files should be used in a case where the content providers need to make configuration changes to the server on a per-directory basis, but do not have root access on the server system. In the event that the server administrator is not willing to make frequent configuration changes, it might be desirable to permit individual users to make these changes in <code>.htaccess</code> files for themselves. This is particularly true, for example, in cases where ISPs are hosting multiple user sites on a single machine, and want their users to be able to alter their configuration.</p> <p>However, in general, use of <code>.htaccess</code> files should be avoided when possible. Any configuration that you would consider putting in a <code>.htaccess</code> file, can just as effectively be made in a <code class="directive"><a href="../mod/core#directory">&lt;Directory&gt;</a></code> section in your main server configuration file.</p> <p>There are two main reasons to avoid the use of <code>.htaccess</code> files.</p> <p>The first of these is performance. When <code class="directive"><a href="../mod/core#allowoverride">AllowOverride</a></code> is set to allow the use of <code>.htaccess</code> files, httpd will look in every directory for <code>.htaccess</code> files. Thus, permitting <code>.htaccess</code> files causes a performance hit, whether or not you actually even use them! Also, the <code>.htaccess</code> file is loaded every time a document is requested.</p> <p>Further note that httpd must look for <code>.htaccess</code> files in all higher-level directories, in order to have a full complement of directives that it must apply. (See section on <a href="#how">how directives are applied</a>.) Thus, if a file is requested out of a directory <code>/www/htdocs/example</code>, httpd must look for the following files:</p> <div class="example"><pre>/.htaccess
/www/.htaccess
/www/htdocs/.htaccess
/www/htdocs/example/.htaccess</pre></div> <p>And so, for each file access out of that directory, there are 4 additional file-system accesses, even if none of those files are present. (Note that this would only be the case if <code>.htaccess</code> files were enabled for <code>/</code>, which is not usually the case.)</p> <p>In the case of <code class="directive"><a href="../mod/mod_rewrite#rewriterule">RewriteRule</a></code> directives, in <code>.htaccess</code> context these regular expressions must be re-compiled with every request to the directory, whereas in main server configuration context they are compiled once and cached. Additionally, the rules themselves are more complicated, as one must work around the restrictions that come with per-directory context and <code>mod_rewrite</code>. Consult the <a href="../rewrite/intro#htaccess">Rewrite Guide</a> for more detail on this subject.</p> <p>The second consideration is one of security. You are permitting users to modify server configuration, which may result in changes over which you have no control. Carefully consider whether you want to give your users this privilege. Note also that giving users less privileges than they need will lead to additional technical support requests. Make sure you clearly tell your users what level of privileges you have given them. Specifying exactly what you have set <code class="directive"><a href="../mod/core#allowoverride">AllowOverride</a></code> to, and pointing them to the relevant documentation, will save yourself a lot of confusion later.</p> <p>Note that it is completely equivalent to put a <code>.htaccess</code> file in a directory <code>/www/htdocs/example</code> containing a directive, and to put that same directive in a Directory section <code>&lt;Directory "/www/htdocs/example"&gt;</code> in your main server configuration:</p> <p><code>.htaccess</code> file in <code>/www/htdocs/example</code>:</p> <div class="example">
<h3>Contents of .htaccess file in <code>/www/htdocs/example</code>
</h3>
<pre class="prettyprint lang-config">AddType text/example ".exm"</pre> </div> <div class="example">
<h3>Section from your <code>httpd.conf</code> file</h3>
<pre class="prettyprint lang-config">&lt;Directory "/www/htdocs/example"&gt;
    AddType text/example ".exm"
&lt;/Directory&gt;</pre> </div> <p>However, putting this configuration in your server configuration file will result in less of a performance hit, as the configuration is loaded once when httpd starts, rather than every time a file is requested.</p> <p>The use of <code>.htaccess</code> files can be disabled completely by setting the <code class="directive"><a href="../mod/core#allowoverride">AllowOverride</a></code> directive to <code>none</code>:</p> <pre class="prettyprint lang-config">AllowOverride None</pre>   <h2 id="how">How directives are applied</h2> <p>The configuration directives found in a <code>.htaccess</code> file are applied to the directory in which the <code>.htaccess</code> file is found, and to all subdirectories thereof. However, it is important to also remember that there may have been <code>.htaccess</code> files in directories higher up. Directives are applied in the order that they are found. Therefore, a <code>.htaccess</code> file in a particular directory may override directives found in <code>.htaccess</code> files found higher up in the directory tree. And those, in turn, may have overridden directives found yet higher up, or in the main server configuration file itself.</p> <p>Example:</p> <p>In the directory <code>/www/htdocs/example1</code> we have a <code>.htaccess</code> file containing the following:</p> <pre class="prettyprint lang-config">Options +ExecCGI</pre> <p>(Note: you must have "<code>AllowOverride Options</code>" in effect to permit the use of the "<code class="directive"><a href="../mod/core#options">Options</a></code>" directive in <code>.htaccess</code> files.)</p> <p>In the directory <code>/www/htdocs/example1/example2</code> we have a <code>.htaccess</code> file containing:</p> <pre class="prettyprint lang-config">Options Includes</pre> <p>Because of this second <code>.htaccess</code> file, in the directory <code>/www/htdocs/example1/example2</code>, CGI execution is not permitted, as only <code>Options Includes</code> is in effect, which completely overrides any earlier setting that may have been in place.</p> <h3><a name="merge" id="merge">Merging of .htaccess with the main configuration files</a></h3> <p>As discussed in the documentation on <a href="../sections">Configuration Sections</a>, <code>.htaccess</code> files can override the <code class="directive"><a href="../mod/core#directory">&lt;Directory&gt;</a></code> sections for the corresponding directory, but will be overridden by other types of configuration sections from the main configuration files. This fact can be used to enforce certain configurations, even in the presence of a liberal <code class="directive"><a href="../mod/core#allowoverride">AllowOverride</a></code> setting. For example, to prevent script execution while allowing anything else to be set in <code>.htaccess</code> you can use:</p> <pre class="prettyprint lang-config">&lt;Directory "/www/htdocs"&gt;
    AllowOverride All
&lt;/Directory&gt;

&lt;Location "/"&gt;
    Options +IncludesNoExec -ExecCGI
&lt;/Location&gt;</pre> <div class="note">This example assumes that your <code class="directive"><a href="../mod/core#documentroot">DocumentRoot</a></code> is <code>/www/htdocs</code>.</div>   <h2 id="auth">Authentication example</h2> <p>If you jumped directly to this part of the document to find out how to do authentication, it is important to note one thing. There is a common misconception that you are required to use <code>.htaccess</code> files in order to implement password authentication. This is not the case. Putting authentication directives in a <code class="directive"><a href="../mod/core#directory">&lt;Directory&gt;</a></code> section, in your main server configuration file, is the preferred way to implement this, and <code>.htaccess</code> files should be used only if you don't have access to the main server configuration file. See <a href="#when">above</a> for a discussion of when you should and should not use <code>.htaccess</code> files.</p> <p>Having said that, if you still think you need to use a <code>.htaccess</code> file, you may find that a configuration such as what follows may work for you.</p> <p><code>.htaccess</code> file contents:</p> <pre class="prettyprint lang-config">AuthType Basic
AuthName "Password Required"
AuthUserFile "/www/passwords/password.file"
AuthGroupFile "/www/passwords/group.file"
Require group admins</pre> <p>Note that <code>AllowOverride AuthConfig</code> must be in effect for these directives to have any effect.</p> <p>Please see the <a href="auth">authentication tutorial</a> for a more complete discussion of authentication and authorization.</p>   <h2 id="ssi">Server Side Includes example</h2> <p>Another common use of <code>.htaccess</code> files is to enable Server Side Includes for a particular directory. This may be done with the following configuration directives, placed in a <code>.htaccess</code> file in the desired directory:</p> <pre class="prettyprint lang-config">Options +Includes
AddType text/html shtml
AddHandler server-parsed shtml</pre> <p>Note that <code>AllowOverride Options</code> and <code>AllowOverride FileInfo</code> must both be in effect for these directives to have any effect.</p> <p>Please see the <a href="ssi">SSI tutorial</a> for a more complete discussion of server-side includes.</p>   <h2 id="rewrite">Rewrite Rules in .htaccess files</h2> <p>When using <code class="directive"><a href="../mod/mod_rewrite#rewriterule">RewriteRule</a></code> in <code>.htaccess</code> files, be aware that the per-directory context changes things a bit. In particular, rules are taken to be relative to the current directory, rather than being the original requested URI. Consider the following examples:</p> <pre class="prettyprint lang-config"># In httpd.conf
RewriteRule "^/images/(.+)\.jpg" "/images/$1.png"

# In .htaccess in root dir
RewriteRule "^images/(.+)\.jpg" "images/$1.png"

# In .htaccess in images/
RewriteRule "^(.+)\.jpg" "$1.png"</pre> <p>In a <code>.htaccess</code> in your document directory, the leading slash is removed from the value supplied to <code class="directive"><a href="../mod/mod_rewrite#rewriterule">RewriteRule</a></code>, and in the <code>images</code> subdirectory, <code>/images/</code> is removed from it. Thus, your regular expression needs to omit that portion as well.</p> <p>Consult the <a href="../rewrite/index">mod_rewrite documentation</a> for further details on using <code>mod_rewrite</code>.</p>   <h2 id="cgi">CGI example</h2> <p>Finally, you may wish to use a <code>.htaccess</code> file to permit the execution of CGI programs in a particular directory. This may be implemented with the following configuration:</p> <pre class="prettyprint lang-config">Options +ExecCGI
AddHandler cgi-script cgi pl</pre> <p>Alternately, if you wish to have all files in the given directory be considered to be CGI programs, this may be done with the following configuration:</p> <pre class="prettyprint lang-config">Options +ExecCGI
SetHandler cgi-script</pre> <p>Note that <code>AllowOverride Options</code> and <code>AllowOverride FileInfo</code> must both be in effect for these directives to have any effect.</p> <p>Please see the <a href="cgi">CGI tutorial</a> for a more complete discussion of CGI programming and configuration.</p>   <h2 id="troubleshoot">Troubleshooting</h2> <p>When you put configuration directives in a <code>.htaccess</code> file, and you don't get the desired effect, there are a number of things that may be going wrong.</p> <p>Most commonly, the problem is that <code class="directive"><a href="../mod/core#allowoverride">AllowOverride</a></code> is not set such that your configuration directives are being honored. Make sure that you don't have a <code>AllowOverride None</code> in effect for the file scope in question. A good test for this is to put garbage in your <code>.htaccess</code> file and reload the page. If a server error is not generated, then you almost certainly have <code>AllowOverride None</code> in effect.</p> <p>If, on the other hand, you are getting server errors when trying to access documents, check your httpd error log. It will likely tell you that the directive used in your <code>.htaccess</code> file is not permitted.</p> <div class="example"><pre>[Fri Sep 17 18:43:16 2010] [alert] [client 192.168.200.51] /var/www/html/.htaccess: DirectoryIndex not allowed here</pre></div> <p>This will indicate either that you've used a directive that is never permitted in <code>.htaccess</code> files, or that you simply don't have <code class="directive"><a href="../mod/core#allowoverride">AllowOverride</a></code> set to a level sufficient for the directive you've used. Consult the documentation for that particular directive to determine which is the case.</p> <p>Alternately, it may tell you that you had a syntax error in your usage of the directive itself.</p> <div class="example"><pre>[Sat Aug 09 16:22:34 2008] [alert] [client 192.168.200.51] /var/www/html/.htaccess: RewriteCond: bad flag delimiters</pre></div> <p>In this case, the error message should be specific to the particular syntax error that you have committed.</p>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2018 The Apache Software Foundation<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://httpd.apache.org/docs/2.4/en/howto/htaccess.html" class="_attribution-link">https://httpd.apache.org/docs/2.4/en/howto/htaccess.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
