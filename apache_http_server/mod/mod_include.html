
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Mod_include - Apache HTTP Server - W3cubDocs</title>
  
  <meta name="description" content="This module provides a filter which will process files before they are sent to the client. The processing is controlled by specially formatted SGML &hellip;">
  <meta name="keywords" content="apache, module, mod, include, http, server, apache_http_server">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/apache_http_server/mod/mod_include.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/apache_http_server.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/apache_http_server/" class="_nav-link" title="" style="margin-left:0;">Apache HTTP Server</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _apache">
				
				
<h1>Apache Module mod_include</h1>  <table class="module">
<tr>
<th>Description:</th>
<td>Server-parsed html documents (Server Side Includes)</td>
</tr> <tr>
<th>Status:</th>
<td>Base</td>
</tr> <tr>
<th>ModuleIdentifier:</th>
<td>include_module</td>
</tr> <tr>
<th>SourceFile:</th>
<td>mod_include.c</td>
</tr>
</table> <h3>Summary</h3> <p>This module provides a filter which will process files before they are sent to the client. The processing is controlled by specially formatted SGML comments, referred to as <dfn>elements</dfn>. These elements allow conditional text, the inclusion of other files or programs, as well as the setting and printing of environment variables.</p>     <h2 id="enabling">Enabling Server-Side Includes</h2> <p>Server Side Includes are implemented by the <code>INCLUDES</code> <a href="../filter">filter</a>. If documents containing server-side include directives are given the extension .shtml, the following directives will make Apache parse them and assign the resulting document the mime type of <code>text/html</code>:</p> <pre class="prettyprint lang-config">AddType text/html .shtml
AddOutputFilter INCLUDES .shtml</pre> <p>The following directive must be given for the directories containing the shtml files (typically in a <code class="directive"><a href="core#directory">&lt;Directory&gt;</a></code> section, but this directive is also valid in <code>.htaccess</code> files if <code class="directive"><a href="core#allowoverride">AllowOverride</a></code> <code>Options</code> is set):</p> <pre class="prettyprint lang-config">Options +Includes</pre> <p>For backwards compatibility, the <code>server-parsed</code> <a href="../handler">handler</a> also activates the INCLUDES filter. As well, Apache will activate the INCLUDES filter for any document with mime type <code>text/x-server-parsed-html</code> or <code>text/x-server-parsed-html3</code> (and the resulting output will have the mime type <code>text/html</code>).</p> <p>For more information, see our <a href="../howto/ssi">Tutorial on Server Side Includes</a>.</p>   <h2 id="pathinfo">PATH_INFO with Server Side Includes</h2> <p>Files processed for server-side includes no longer accept requests with <code>PATH_INFO</code> (trailing pathname information) by default. You can use the <code class="directive"><a href="core#acceptpathinfo">AcceptPathInfo</a></code> directive to configure the server to accept requests with <code>PATH_INFO</code>.</p>   <h2 id="elements">Available Elements</h2> <p>The document is parsed as an HTML document, with special commands embedded as SGML comments. A command has the syntax: </p> <div class="example"><pre>&lt;!--#element attribute=value attribute=value ... --&gt;</pre></div> <p>The value will often be enclosed in double quotes, but single quotes (<code>'</code>) and backticks (<code>`</code>) are also possible. Many commands only allow a single attribute-value pair. Note that the comment terminator (<code>--&gt;</code>) should be preceded by whitespace to ensure that it isn't considered part of an SSI token. Note that the leading <code>&lt;!--#</code> is <em>one</em> token and may not contain any whitespaces.</p> <p>The allowed elements are listed in the following table:</p> <table class="bordered"> <tr>
<th>Element</th>
<th>Description</th>
</tr> <tr>
<td><code>comment</code></td> <td>SSI comment</td>
</tr> <tr>
<td><code>config</code></td> <td>configure output formats</td>
</tr> <tr>
<td><code>echo</code></td> <td>print variables</td>
</tr> <tr>
<td><code>exec</code></td> <td>execute external programs</td>
</tr> <tr>
<td><code>fsize</code></td> <td>print size of a file</td>
</tr> <tr>
<td><code>flastmod</code></td> <td>print last modification time of a file</td>
</tr> <tr>
<td><code>include</code></td> <td>include a file</td>
</tr> <tr>
<td><code>printenv</code></td> <td>print all available variables</td>
</tr> <tr>
<td><code>set</code></td> <td>set a value of a variable</td>
</tr> </table> <p>SSI elements may be defined by modules other than <code class="module"><a href="mod_include">mod_include</a></code>. In fact, the <code><a href="#element.exec">exec</a></code> element is provided by <code class="module"><a href="mod_cgi">mod_cgi</a></code>, and will only be available if this module is loaded.</p> <h3><a name="element.comment" id="element.comment">The comment Element</a></h3> <p>This command doesn't output anything. Its only use is to add comments within a file. These comments are not printed.</p> <p>This syntax is available in version 2.4.21 and later.</p> <div class="example"><pre>&lt;!--#comment Blah Blah Blah --&gt;</pre></div> <h3><a name="element.config" id="element.config">The config Element</a></h3> <p>This command controls various aspects of the parsing. The valid attributes are:</p> <dl> <dt>
<code>echomsg</code> (<em>Apache 2.1 and later</em>)</dt> <dd>
<p>The value is a message that is sent back to the client if the <code><a href="#element.echo">echo</a></code> element attempts to echo an undefined variable. This overrides any <code class="directive"><a href="#ssiundefinedecho">SSIUndefinedEcho</a></code> directives.</p> <div class="example"><pre>&lt;!--#config echomsg="[Value Undefined]" --&gt;</pre></div> </dd> <dt><code>errmsg</code></dt> <dd>
<p>The value is a message that is sent back to the client if an error occurs while parsing the document. This overrides any <code class="directive"><a href="#ssierrormsg">SSIErrorMsg</a></code> directives.</p> <div class="example"><pre>&lt;!--#config errmsg="[Oops, something broke.]" --&gt;</pre></div> </dd> <dt><code>sizefmt</code></dt> <dd>
<p>The value sets the format to be used when displaying the size of a file. Valid values are <code>bytes</code> for a count in bytes, or <code>abbrev</code> for a count in Kb or Mb as appropriate, for example a size of 1024 bytes will be printed as "1K".</p> <div class="example"><pre>&lt;!--#config sizefmt="abbrev" --&gt;</pre></div> </dd> <dt><code>timefmt</code></dt> <dd>
<p>The value is a string to be used by the <code>strftime(3)</code> library routine when printing dates.</p> <div class="example"><pre>&lt;!--#config timefmt=""%R, %B %d, %Y"" --&gt;</pre></div> </dd> </dl> <h3><a name="element.echo" id="element.echo">The echo Element</a></h3> <p>This command prints one of the <a href="#includevars">include variables</a> defined below. If the variable is unset, the result is determined by the <code class="directive"><a href="#ssiundefinedecho">SSIUndefinedEcho</a></code> directive. Any dates printed are subject to the currently configured <code>timefmt</code>.</p> <p>Attributes:</p> <dl> <dt><code>var</code></dt> <dd>The value is the name of the variable to print.</dd> <dt><code>decoding</code></dt> <dd>
<p>Specifies whether Apache should strip an encoding from the variable before processing the variable further. The default is <code>none</code>, where no decoding will be done. If set to <code>url</code>, then URL decoding (also known as %-encoding; this is appropriate for use within URLs in links, etc.) will be performed. If set to <code>urlencoded</code>, application/x-www-form-urlencoded compatible encoding (found in query strings) will be stripped. If set to <code>base64</code>, base64 will be decoded, and if set to <code>entity</code>, HTML entity encoding will be stripped. Decoding is done prior to any further encoding on the variable. Multiple encodings can be stripped by specifying more than one comma separated encoding. The decoding setting will remain in effect until the next decoding attribute is encountered, or the element ends.</p> <p>The <code>decoding</code> attribute must <em>precede</em> the corresponding <code>var</code> attribute to be effective.</p> </dd> <dt><code>encoding</code></dt> <dd>
<p>Specifies how Apache should encode special characters contained in the variable before outputting them. If set to <code>none</code>, no encoding will be done. If set to <code>url</code>, then URL encoding (also known as %-encoding; this is appropriate for use within URLs in links, etc.) will be performed. If set to <code>urlencoded</code>, application/x-www-form-urlencoded compatible encoding will be performed instead, and should be used with query strings. If set to <code>base64</code>, base64 encoding will be performed. At the start of an <code>echo</code> element, the default is set to <code>entity</code>, resulting in entity encoding (which is appropriate in the context of a block-level HTML element, <em>e.g.</em> a paragraph of text). This can be changed by adding an <code>encoding</code> attribute, which will remain in effect until the next <code>encoding</code> attribute is encountered or the element ends, whichever comes first.</p> <p>The <code>encoding</code> attribute must <em>precede</em> the corresponding <code>var</code> attribute to be effective.</p> <div class="warning"> In order to avoid cross-site scripting issues, you should <em>always</em> encode user supplied data. </div> <div class="example">
<h3>Example</h3>
<pre>&lt;!--#echo encoding="entity" var="QUERY_STRING" --&gt;</pre>
</div> </dd> </dl> <h3><a name="element.exec" id="element.exec">The exec Element</a></h3> <p>The <code>exec</code> command executes a given shell command or CGI script. It requires <code class="module"><a href="mod_cgi">mod_cgi</a></code> to be present in the server. If <code class="directive"><a href="core#options">Options</a></code> <code>IncludesNOEXEC</code> is set, this command is completely disabled. The valid attributes are:</p> <dl> <dt><code>cgi</code></dt> <dd>
<p>The value specifies a (%-encoded) URL-path to the CGI script. If the path does not begin with a slash (/), then it is taken to be relative to the current document. The document referenced by this path is invoked as a CGI script, even if the server would not normally recognize it as such. However, the directory containing the script must be enabled for CGI scripts (with <code class="directive"><a href="mod_alias#scriptalias">ScriptAlias</a></code> or <code class="directive"><a href="core#options">Options</a></code> <code>ExecCGI</code>).</p> <p>The CGI script is given the <code>PATH_INFO</code> and query string (<code>QUERY_STRING</code>) of the original request from the client; these <em>cannot</em> be specified in the URL path. The include variables will be available to the script in addition to the standard <a href="mod_cgi">CGI</a> environment.</p> <div class="example">
<h3>Example</h3>
<pre>&lt;!--#exec cgi="/cgi-bin/example.cgi" --&gt;</pre>
</div> <p>If the script returns a <code>Location:</code> header instead of output, then this will be translated into an HTML anchor.</p> <p>The <code><a href="#includevirtual">include virtual</a></code> element should be used in preference to <code>exec cgi</code>. In particular, if you need to pass additional arguments to a CGI program, using the query string, this cannot be done with <code>exec cgi</code>, but can be done with <code>include virtual</code>, as shown here:</p> <div class="example"><pre>&lt;!--#include virtual="/cgi-bin/example.cgi?argument=value" --&gt;</pre></div> </dd> <dt><code>cmd</code></dt> <dd>
<p>The server will execute the given string using <code>/bin/sh</code>. The <a href="#includevars">include variables</a> are available to the command, in addition to the usual set of CGI variables.</p> <p>The use of <code><a href="#includevirtual">#include virtual</a></code> is almost always prefered to using either <code>#exec cgi</code> or <code>#exec cmd</code>. The former (<code>#include virtual</code>) uses the standard Apache sub-request mechanism to include files or scripts. It is much better tested and maintained.</p> <p>In addition, on some platforms, like Win32, and on unix when using <a href="../suexec">suexec</a>, you cannot pass arguments to a command in an <code>exec</code> directive, or otherwise include spaces in the command. Thus, while the following will work under a non-suexec configuration on unix, it will not produce the desired result under Win32, or when running suexec:</p> <div class="example"><pre>&lt;!--#exec cmd="perl /path/to/perlscript arg1 arg2" --&gt;</pre></div> </dd> </dl> <h3><a name="element.fsize" id="element.fsize">The fsize Element</a></h3> <p>This command prints the size of the specified file, subject to the <code>sizefmt</code> format specification. Attributes:</p> <dl> <dt><code>file</code></dt> <dd>The value is a path relative to the directory containing the current document being parsed. <div class="example"><pre>This file is &lt;!--#fsize file="mod_include.html" --&gt; bytes.</pre></div> The value of <code>file</code> cannot start with a slash (<code>/</code>), nor can it contain <code>../</code> so as to refer to a file above the current directory or outside of the document root. Attempting to so will result in the error message: <code>The given path was above the root path</code>. </dd> <dt><code>virtual</code></dt> <dd>The value is a (%-encoded) URL-path. If it does not begin with a slash (/) then it is taken to be relative to the current document. Note, that this does <em>not</em> print the size of any CGI output, but the size of the CGI script itself.</dd> </dl> <div class="example"><pre>This file is &lt;!--#fsize virtual="/docs/mod/mod_include.html" --&gt; bytes.</pre></div> <p>Note that in many cases these two are exactly the same thing. However, the <code>file</code> attribute doesn't respect URL-space aliases.</p> <h3><a name="element.flastmod" id="element.flastmod">The flastmod Element</a></h3> <p>This command prints the last modification date of the specified file, subject to the <code>timefmt</code> format specification. The attributes are the same as for the <code><a href="#element.fsize">fsize</a></code> command.</p> <h3><a name="element.include" id="element.include">The include Element</a></h3> <p>This command inserts the text of another document or file into the parsed file. Any included file is subject to the usual access control. If the directory containing the parsed file has <a href="core#options">Options</a> <code>IncludesNOEXEC</code> set, then only documents with a text <a class="glossarylink" href="https://httpd.apache.org/docs/2.4/en/glossary.html#mime-type" title="see glossary">MIME-type</a> (<code>text/plain</code>, <code>text/html</code> etc.) will be included. Otherwise CGI scripts are invoked as normal using the complete URL given in the command, including any query string.</p> <p>An attribute defines the location of the document, and may appear more than once in an include element; an inclusion is done for each attribute given to the include command in turn. The valid attributes are:</p> <dl> <dt><code>file</code></dt> <dd>The value is a path relative to the directory containing the current document being parsed. It cannot contain <code>../</code>, nor can it be an absolute path. Therefore, you cannot include files that are outside of the document root, or above the current document in the directory structure. The <code>virtual</code> attribute should always be used in preference to this one.</dd> <dt><code><a id="includevirtual" name="includevirtual">virtual</a></code></dt> <dd>
<p>The value is a (%-encoded) URL-path. The URL cannot contain a scheme or hostname, only a path and an optional query string. If it does not begin with a slash (/) then it is taken to be relative to the current document.</p> <p>A URL is constructed from the attribute, and the output the server would return if the URL were accessed by the client is included in the parsed output. Thus included files can be nested.</p> <p>If the specified URL is a CGI program, the program will be executed and its output inserted in place of the directive in the parsed file. You may include a query string in a CGI url:</p> <div class="example"><pre>&lt;!--#include virtual="/cgi-bin/example.cgi?argument=value" --&gt;</pre></div> <p><code>include virtual</code> should be used in preference to <code>exec cgi</code> to include the output of CGI programs into an HTML document.</p> <p>If the <code class="directive"><a href="mod_request#keptbodysize">KeptBodySize</a></code> directive is correctly configured and valid for this included file, attempts to POST requests to the enclosing HTML document will be passed through to subrequests as POST requests as well. Without the directive, all subrequests are processed as GET requests.</p> </dd> <dt><code>onerror</code></dt> <dd>
<p>The value is a (%-encoded) URL-path which is shown should a previous attempt to include a file or virtual attribute failed. To be effective, this attribute must be specified after the file or virtual attributes being covered. If the attempt to include the onerror path fails, or if onerror is not specified, the default error message will be included.</p> <div class="example"><pre># Simple example
&lt;!--#include virtual="/not-exist.html" onerror="/error.html" --&gt;</pre></div> <div class="example"><pre># Dedicated onerror paths
&lt;!--#include virtual="/path-a.html" onerror="/error-a.html" virtual="/path-b.html" onerror="/error-b.html" --&gt;</pre></div> </dd> </dl> <h3><a name="element.printenv" id="element.printenv">The printenv Element</a></h3> <p>This prints out a plain text listing of all existing variables and their values. Special characters are entity encoded (see the <code><a href="#element.echo">echo</a></code> element for details) before being output. There are no attributes.</p> <div class="example">
<h3>Example</h3>
<pre>&lt;pre&gt; &lt;!--#printenv --&gt; &lt;/pre&gt;</pre>
</div> <h3><a name="element.set" id="element.set">The set Element</a></h3> <p>This sets the value of a variable. Attributes:</p> <dl> <dt><code>var</code></dt> <dd>The name of the variable to set.</dd> <dt><code>value</code></dt> <dd>The value to give a variable.</dd> <dt><code>decoding</code></dt> <dd>
<p>Specifies whether Apache should strip an encoding from the variable before processing the variable further. The default is <code>none</code>, where no decoding will be done. If set to <code>url</code>, <code>urlencoded</code>, <code>base64</code> or <code>entity</code>, URL decoding, application/x-www-form-urlencoded decoding, base64 decoding or HTML entity decoding will be performed respectively. More than one decoding can be specified by separating with commas. The decoding setting will remain in effect until the next decoding attribute is encountered, or the element ends. The <code>decoding</code> attribute must <em>precede</em> the corresponding <code>var</code> attribute to be effective.</p> </dd> <dt><code>encoding</code></dt> <dd>
<p>Specifies how Apache should encode special characters contained in the variable before setting them. The default is <code>none</code>, where no encoding will be done. If set to <code>url</code>, <code>urlencoding</code>, <code>base64</code> or <code>entity</code>, URL encoding, application/x-www-form-urlencoded encoding, base64 encoding or HTML entity encoding will be performed respectively. More than one encoding can be specified by separating with commas. The encoding setting will remain in effect until the next encoding attribute is encountered, or the element ends. The <code>encoding</code> attribute must <em>precede</em> the corresponding <code>var</code> attribute to be effective. Encodings are applied after all decodings have been stripped.</p> </dd> </dl> <div class="example">
<h3>Example</h3>
<pre>&lt;!--#set var="category" value="help" --&gt;</pre>
</div>   <h2 id="includevars">Include Variables</h2> <p>In addition to the variables in the standard CGI environment, these are available for the <code>echo</code> command, for <code>if</code> and <code>elif</code>, and to any program invoked by the document.</p> <dl> <dt><code>DATE_GMT</code></dt> <dd>The current date in Greenwich Mean Time.</dd> <dt><code>DATE_LOCAL</code></dt> <dd>The current date in the local time zone.</dd> <dt><code>DOCUMENT_ARGS</code></dt> <dd>This variable contains the query string of the active SSI document, or the empty string if a query string is not included. For subrequests invoked through the <code>include</code> SSI directive, <code>QUERY_STRING</code> will represent the query string of the subrequest and <code>DOCUMENT_ARGS</code> will represent the query string of the SSI document. (Available in Apache HTTP Server 2.4.19 and later.)</dd> <dt><code>DOCUMENT_NAME</code></dt> <dd>The filename (excluding directories) of the document requested by the user.</dd> <dt><code>DOCUMENT_PATH_INFO</code></dt> <dd>The trailing pathname information. See directive <code class="directive"><a href="core#acceptpathinfo">AcceptPathInfo</a></code> for more information about <code>PATH_INFO</code>.</dd> <dt><code>DOCUMENT_URI</code></dt> <dd>The (%-decoded) URL path of the document requested by the user. Note that in the case of nested include files, this is <em>not</em> the URL for the current document. Note also that if the URL is modified internally (e.g. by an <code class="directive"><a href="mod_alias#alias">alias</a></code> or <code class="directive"><a href="mod_dir#directoryindex">directoryindex</a></code>), the modified URL is shown.</dd> <dt><code>LAST_MODIFIED</code></dt> <dd>The last modification date of the document requested by the user.</dd> <dt><code>QUERY_STRING_UNESCAPED</code></dt> <dd>If a query string is present in the request for the active SSI document, this variable contains the (%-decoded) query string, which is <em>escaped</em> for shell usage (special characters like <code>&amp;</code> etc. are preceded by backslashes). It is not set if a query string is not present. Use <code>DOCUMENT_ARGS</code> if shell escaping is not desired.</dd> <dt><code>USER_NAME</code></dt> <dd>The user name of the owner of the file.</dd> </dl>   <h2 id="substitution">Variable Substitution</h2> <p>Variable substitution is done within quoted strings in most cases where they may reasonably occur as an argument to an SSI directive. This includes the <code>config</code>, <code>exec</code>, <code>flastmod</code>, <code>fsize</code>, <code>include</code>, <code>echo</code>, and <code>set</code> directives. If <code class="directive"><a href="#ssilegacyexprparser">SSILegacyExprParser</a></code> is set to <code>on</code>, substitution also occurs in the arguments to conditional operators. You can insert a literal dollar sign into the string using backslash quoting:</p> <div class="example"><pre>&lt;!--#set var="cur" value="\$test" --&gt;</pre></div> <p>If a variable reference needs to be substituted in the middle of a character sequence that might otherwise be considered a valid identifier in its own right, it can be disambiguated by enclosing the reference in braces, <em>a la</em> shell substitution:</p> <div class="example"><pre>&lt;!--#set var="Zed" value="${REMOTE_HOST}_${REQUEST_METHOD}" --&gt;</pre></div> <p>This will result in the <code>Zed</code> variable being set to "<code>X_Y</code>" if <code>REMOTE_HOST</code> is "<code>X</code>" and <code>REQUEST_METHOD</code> is "<code>Y</code>".</p>   <h2 id="flowctrl">Flow Control Elements</h2> <p>The basic flow control elements are:</p> <div class="example"><pre>&lt;!--#if expr="test_condition" --&gt;
&lt;!--#elif expr="test_condition" --&gt;
&lt;!--#else --&gt;
&lt;!--#endif --&gt;</pre></div> <p>The <code>if</code> element works like an if statement in a programming language. The test condition is evaluated and if the result is true, then the text until the next <code>elif</code>, <code>else</code> or <code>endif</code> element is included in the output stream.</p> <p>The <code>elif</code> or <code>else</code> statements are used to put text into the output stream if the original <var>test_condition</var> was false. These elements are optional.</p> <p>The <code>endif</code> element ends the <code>if</code> element and is required.</p> <p><var>test_condition</var> is a boolean expression which follows the <a href="../expr">ap_expr</a> syntax. The syntax can be changed to be compatible with Apache HTTPD 2.2.x using <code class="directive"><a href="#ssilegacyexprparser">SSILegacyExprParser</a></code>.</p> <p>The SSI variables set with the <code>var</code> element are exported into the request environment and can be accessed with the <code>reqenv</code> function. As a short-cut, the function name <code>v</code> is also available inside <code class="module"><a href="mod_include">mod_include</a></code>.</p> <p>The below example will print "from local net" if client IP address belongs to the 10.0.0.0/8 subnet.</p> <div class="example"><pre>&lt;!--#if expr='-R "10.0.0.0/8"' --&gt;
 from local net
 &lt;!--#else --&gt;
 from somewhere else
 &lt;!--#endif --&gt;</pre></div> <p>The below example will print "foo is bar" if the variable <code>foo</code> is set to the value "bar".</p> <div class="example"><pre>&lt;!--#if expr='v("foo") = "bar"' --&gt;
 foo is bar
 &lt;!--#endif --&gt;</pre></div> <div class="note">
<p><strong>Reference Documentation</strong></p> <p>See also: <a href="../expr">Expressions in Apache HTTP Server</a>, for a complete reference and examples. The <em>restricted</em> functions are not available inside <code class="module"><a href="mod_include">mod_include</a></code></p> </div>   <h2 id="legacyexpr">Legacy expression syntax</h2> <p>This section describes the syntax of the <code>#if expr</code> element if <code class="directive"><a href="#ssilegacyexprparser">SSILegacyExprParser</a></code> is set to <code>on</code>.</p> <dl> <dt><code>string</code></dt> <dd>true if <var>string</var> is not empty</dd> <dt><code>-A string</code></dt> <dd>
<p>true if the URL represented by the string is accessible by configuration, false otherwise. This is useful where content on a page is to be hidden from users who are not authorized to view the URL, such as a link to that URL. Note that the URL is only tested for whether access would be granted, not whether the URL exists.</p> <div class="example">
<h3>Example</h3>
<pre>&lt;!--#if expr="-A /private" --&gt;
 Click &lt;a href="/private"&gt;here&lt;/a&gt; to access private information.
 &lt;!--#endif --&gt;</pre>
</div> </dd> <dt><code>string1 = string2<br> string1 == string2<br> string1 != string2</code></dt> <dd>
<p>Compare <var>string1</var> with <var>string2</var>. If <var>string2</var> has the form <code>/string2/</code> then it is treated as a regular expression. Regular expressions are implemented by the <a href="http://www.pcre.org">PCRE</a> engine and have the same syntax as those in <a href="http://www.perl.com">perl 5</a>. Note that <code>==</code> is just an alias for <code>=</code> and behaves exactly the same way.</p> <p>If you are matching positive (<code>=</code> or <code>==</code>), you can capture grouped parts of the regular expression. The captured parts are stored in the special variables <code>$1</code> .. <code>$9</code>. The whole string matched by the regular expression is stored in the special variable <code>$0</code></p> <div class="example">
<h3>Example</h3>
<pre>&lt;!--#if expr="$QUERY_STRING = /^sid=([a-zA-Z0-9]+)/" --&gt;
 &lt;!--#set var="session" value="$1" --&gt;
 &lt;!--#endif --&gt;</pre>
</div> </dd> <dt><code>string1 &lt; string2<br> string1 &lt;= string2<br> string1 &gt; string2<br> string1 &gt;= string2</code></dt> <dd>Compare <var>string1</var> with <var>string2</var>. Note, that strings are compared <em>literally</em> (using <code>strcmp(3)</code>). Therefore the string "100" is less than "20".</dd> <dt><code>( test_condition )</code></dt> <dd>true if <var>test_condition</var> is true</dd> <dt><code>! test_condition</code></dt> <dd>true if <var>test_condition</var> is false</dd> <dt><code>test_condition1 &amp;&amp; test_condition2</code></dt> <dd>true if both <var>test_condition1</var> and <var>test_condition2</var> are true</dd> <dt><code>test_condition1 || test_condition2</code></dt> <dd>true if either <var>test_condition1</var> or <var>test_condition2</var> is true</dd> </dl> <p>"<code>=</code>" and "<code>!=</code>" bind more tightly than "<code>&amp;&amp;</code>" and "<code>||</code>". "<code>!</code>" binds most tightly. Thus, the following are equivalent:</p> <div class="example"><pre>&lt;!--#if expr="$a = test1 &amp;&amp; $b = test2" --&gt;
&lt;!--#if expr="($a = test1) &amp;&amp; ($b = test2)" --&gt;</pre></div> <p>The boolean operators <code>&amp;&amp;</code> and <code>||</code> share the same priority. So if you want to bind such an operator more tightly, you should use parentheses.</p> <p>Anything that's not recognized as a variable or an operator is treated as a string. Strings can also be quoted: <code>'string'</code>. Unquoted strings can't contain whitespace (blanks and tabs) because it is used to separate tokens such as variables. If multiple strings are found in a row, they are concatenated using blanks. So,</p> <div class="example"><p><code>string1 string2</code> results in <code>string1 string2</code><br> <br> and<br> <br> <code>'string1 string2'</code> results in <code>string1 string2</code>.</p></div> <div class="note">
<p><strong>Optimization of Boolean Expressions</strong></p> <p>If the expressions become more complex and slow down processing significantly, you can try to optimize them according to the evaluation rules:</p> <ul> <li>Expressions are evaluated from left to right</li> <li>Binary boolean operators (<code>&amp;&amp;</code> and <code>||</code>) are short circuited wherever possible. In conclusion with the rule above that means, <code class="module"><a href="mod_include">mod_include</a></code> evaluates at first the left expression. If the left result is sufficient to determine the end result, processing stops here. Otherwise it evaluates the right side and computes the end result from both left and right results.</li> <li>Short circuit evaluation is turned off as long as there are regular expressions to deal with. These must be evaluated to fill in the backreference variables (<code>$1</code> .. <code>$9</code>).</li> </ul> <p>If you want to look how a particular expression is handled, you can recompile <code class="module"><a href="mod_include">mod_include</a></code> using the <code>-DDEBUG_INCLUDE</code> compiler option. This inserts for every parsed expression tokenizer information, the parse tree and how it is evaluated into the output sent to the client.</p> </div> <div class="note">
<p><strong>Escaping slashes in regex strings</strong></p> <p>All slashes which are not intended to act as delimiters in your regex must be escaped. This is regardless of their meaning to the regex engine.</p> </div>   <div class="directive-section">
<h2 id="ssiendtag">SSIEndTag Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>String that ends an include element</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>SSIEndTag tag</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>SSIEndTag "--&gt;"</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host</td>
</tr> <tr>
<th>Status:</th>
<td>Base</td>
</tr> <tr>
<th>Module:</th>
<td>mod_include</td>
</tr> </table> <p>This directive changes the string that <code class="module"><a href="mod_include">mod_include</a></code> looks for to mark the end of an include element.</p> <pre class="prettyprint lang-config">SSIEndTag "%&gt;"</pre> <h3>See also</h3> <ul> <li><code class="directive"><a href="#ssistarttag">SSIStartTag</a></code></li> </ul> </div>  <div class="directive-section">
<h2 id="ssierrormsg">SSIErrorMsg Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Error message displayed when there is an SSI error</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>SSIErrorMsg message</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>SSIErrorMsg "[an error occurred while processing this directive]"</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>All</td>
</tr> <tr>
<th>Status:</th>
<td>Base</td>
</tr> <tr>
<th>Module:</th>
<td>mod_include</td>
</tr> </table> <p>The <code class="directive">SSIErrorMsg</code> directive changes the error message displayed when <code class="module"><a href="mod_include">mod_include</a></code> encounters an error. For production servers you may consider changing the default error message to <code>"&lt;!-- Error --&gt;"</code> so that the message is not presented to the user.</p> <p>This directive has the same effect as the <code>&lt;!--#config errmsg=message --&gt;</code> element.</p> <pre class="prettyprint lang-config">SSIErrorMsg "&lt;!-- Error --&gt;"</pre> </div>  <div class="directive-section">
<h2 id="ssietag">SSIETag Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Controls whether ETags are generated by the server.</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>SSIETag on|off</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>SSIETag off</pre></td>
</tr> <tr>
<th>Context:</th>
<td>directory, .htaccess</td>
</tr> <tr>
<th>Status:</th>
<td>Base</td>
</tr> <tr>
<th>Module:</th>
<td>mod_include</td>
</tr> <tr>
<th>Compatibility:</th>
<td>Available in version 2.2.15 and later.</td>
</tr> </table> <p>Under normal circumstances, a file filtered by <code class="module"><a href="mod_include">mod_include</a></code> may contain elements that are either dynamically generated, or that may have changed independently of the original file. As a result, by default the server is asked not to generate an <code>ETag</code> header for the response by adding <code>no-etag</code> to the request notes.</p> <p>The <code class="directive">SSIETag</code> directive suppresses this behaviour, and allows the server to generate an <code>ETag</code> header. This can be used to enable caching of the output. Note that a backend server or dynamic content generator may generate an ETag of its own, ignoring <code>no-etag</code>, and this ETag will be passed by <code class="module"><a href="mod_include">mod_include</a></code> regardless of the value of this setting. <code class="directive">SSIETag</code> can take on the following values:</p> <dl> <dt><code>off</code></dt> <dd>
<code>no-etag</code> will be added to the request notes, and the server is asked not to generate an ETag. Where a server ignores the value of <code>no-etag</code> and generates an ETag anyway, the ETag will be respected.</dd> <dt><code>on</code></dt> <dd>Existing ETags will be respected, and ETags generated by the server will be passed on in the response.</dd> </dl> </div>  <div class="directive-section">
<h2 id="ssilastmodified">SSILastModified Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Controls whether <code>Last-Modified</code> headers are generated by the server.</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>SSILastModified on|off</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>SSILastModified off</pre></td>
</tr> <tr>
<th>Context:</th>
<td>directory, .htaccess</td>
</tr> <tr>
<th>Status:</th>
<td>Base</td>
</tr> <tr>
<th>Module:</th>
<td>mod_include</td>
</tr> <tr>
<th>Compatibility:</th>
<td>Available in version 2.2.15 and later.</td>
</tr> </table> <p>Under normal circumstances, a file filtered by <code class="module"><a href="mod_include">mod_include</a></code> may contain elements that are either dynamically generated, or that may have changed independently of the original file. As a result, by default the <code>Last-Modified</code> header is stripped from the response.</p> <p>The <code class="directive">SSILastModified</code> directive overrides this behaviour, and allows the <code>Last-Modified</code> header to be respected if already present, or set if the header is not already present. This can be used to enable caching of the output. <code class="directive">SSILastModified</code> can take on the following values:</p> <dl> <dt><code>off</code></dt> <dd>The <code>Last-Modified</code> header will be stripped from responses, unless the <code class="directive"><a href="#xbithack">XBitHack</a></code> directive is set to <code>full</code> as described below.</dd> <dt><code>on</code></dt> <dd>The <code>Last-Modified</code> header will be respected if already present in a response, and added to the response if the response is a file and the header is missing. The <code class="directive"><a href="#ssilastmodified">SSILastModified</a></code> directive takes precedence over <code class="directive"><a href="#xbithack">XBitHack</a></code>.</dd> </dl> </div>  <div class="directive-section">
<h2 id="ssilegacyexprparser">SSILegacyExprParser Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Enable compatibility mode for conditional expressions.</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>SSILegacyExprParser on|off</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>SSILegacyExprParser off</pre></td>
</tr> <tr>
<th>Context:</th>
<td>directory, .htaccess</td>
</tr> <tr>
<th>Status:</th>
<td>Base</td>
</tr> <tr>
<th>Module:</th>
<td>mod_include</td>
</tr> <tr>
<th>Compatibility:</th>
<td>Available in version 2.3.13 and later.</td>
</tr> </table> <p>As of version 2.3.13, <code class="module"><a href="mod_include">mod_include</a></code> has switched to the new <a href="../expr">ap_expr</a> syntax for conditional expressions in <code>#if</code> flow control elements. This directive allows to switch to the <a href="#legacyexpr">old syntax</a> which is compatible with Apache HTTPD version 2.2.x and earlier. </p> </div>  <div class="directive-section">
<h2 id="ssistarttag">SSIStartTag Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>String that starts an include element</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>SSIStartTag tag</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>SSIStartTag "&lt;!--#"</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host</td>
</tr> <tr>
<th>Status:</th>
<td>Base</td>
</tr> <tr>
<th>Module:</th>
<td>mod_include</td>
</tr> </table> <p>This directive changes the string that <code class="module"><a href="mod_include">mod_include</a></code> looks for to mark an include element to process.</p> <p>You may want to use this option if you have 2 servers parsing the output of a file each processing different commands (possibly at different times).</p> <pre class="prettyprint lang-config">SSIStartTag "&lt;%"
SSIEndTag   "%&gt;"</pre> <p>The example given above, which also specifies a matching <code class="directive"><a href="#ssiendtag">SSIEndTag</a></code>, will allow you to use SSI directives as shown in the example below:</p> <div class="example">
<h3>SSI directives with alternate start and end tags</h3>
<pre>&lt;%printenv %&gt;</pre>
</div> <h3>See also</h3> <ul> <li><code class="directive"><a href="#ssiendtag">SSIEndTag</a></code></li> </ul> </div>  <div class="directive-section">
<h2 id="ssitimeformat">SSITimeFormat Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Configures the format in which date strings are displayed</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>SSITimeFormat formatstring</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>SSITimeFormat "%A, %d-%b-%Y %H:%M:%S %Z"</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>All</td>
</tr> <tr>
<th>Status:</th>
<td>Base</td>
</tr> <tr>
<th>Module:</th>
<td>mod_include</td>
</tr> </table> <p>This directive changes the format in which date strings are displayed when echoing <code>DATE</code> environment variables. The <var>formatstring</var> is as in <code>strftime(3)</code> from the C standard library.</p> <p>This directive has the same effect as the <code>&lt;!--#config timefmt=formatstring --&gt;</code> element.</p> <pre class="prettyprint lang-config">SSITimeFormat "%R, %B %d, %Y"</pre> <p>The above directive would cause times to be displayed in the format "22:26, June 14, 2002".</p> </div>  <div class="directive-section">
<h2 id="ssiundefinedecho">SSIUndefinedEcho Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>String displayed when an unset variable is echoed</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>SSIUndefinedEcho string</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>SSIUndefinedEcho "(none)"</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>All</td>
</tr> <tr>
<th>Status:</th>
<td>Base</td>
</tr> <tr>
<th>Module:</th>
<td>mod_include</td>
</tr> </table> <p>This directive changes the string that <code class="module"><a href="mod_include">mod_include</a></code> displays when a variable is not set and "echoed".</p> <pre class="prettyprint lang-config">SSIUndefinedEcho "&lt;!-- undef --&gt;"</pre> </div>  <div class="directive-section">
<h2 id="xbithack">XBitHack Directive</h2> <table class="directive"> <tr>
<th>Description:</th>
<td>Parse SSI directives in files with the execute bit set</td>
</tr> <tr>
<th>Syntax:</th>
<td><pre>XBitHack on|off|full</pre></td>
</tr> <tr>
<th>Default:</th>
<td><pre>XBitHack off</pre></td>
</tr> <tr>
<th>Context:</th>
<td>server config, virtual host, directory, .htaccess</td>
</tr> <tr>
<th>Override:</th>
<td>Options</td>
</tr> <tr>
<th>Status:</th>
<td>Base</td>
</tr> <tr>
<th>Module:</th>
<td>mod_include</td>
</tr> </table> <p>The <code class="directive">XBitHack</code> directive controls the parsing of ordinary html documents. This directive only affects files associated with the <a class="glossarylink" href="https://httpd.apache.org/docs/2.4/en/glossary.html#mime-type" title="see glossary">MIME-type</a> <code>text/html</code>. <code class="directive">XBitHack</code> can take on the following values:</p> <dl> <dt><code>off</code></dt> <dd>No special treatment of executable files.</dd> <dt><code>on</code></dt> <dd>Any <code>text/html</code> file that has the user-execute bit set will be treated as a server-parsed html document.</dd> <dt><code>full</code></dt> <dd>As for <code>on</code> but also test the group-execute bit. If it is set, then set the <code>Last-modified</code> date of the returned file to be the last modified time of the file. If it is not set, then no last-modified date is sent. Setting this bit allows clients and proxies to cache the result of the request. <div class="note">
<p><strong>Note</strong></p> <p>You would not want to use the full option, unless you assure the group-execute bit is unset for every SSI script which might <code>#include</code> a CGI or otherwise produces different output on each hit (or could potentially change on subsequent requests).</p> <p>The <code class="directive"><a href="#ssilastmodified">SSILastModified</a></code> directive takes precedence over the <code class="directive"><a href="#xbithack">XBitHack</a></code> directive when <code class="directive"><a href="#ssilastmodified">SSILastModified</a></code> is set to <code>on</code>.</p> </div> </dd> </dl> </div>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2018 The Apache Software Foundation<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://httpd.apache.org/docs/2.4/en/mod/mod_include.html" class="_attribution-link">https://httpd.apache.org/docs/2.4/en/mod/mod_include.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
