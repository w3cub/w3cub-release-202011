
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Performance Measurement APIs - Node.js - W3cubDocs</title>
  
  <meta name="description" content=" Source Code&#58; lib&#47;perf_hooks.js ">
  <meta name="keywords" content="performance, measurement, apis, node, js">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/node/perf_hooks.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/node.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/node/" class="_nav-link" title="" style="margin-left:0;">Node.js</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _node">
				
				
<h2 id="performance-measurement-apis">Performance measurement APIs
</h2> 
<div class="api_stability api_stability_2">
<a href="https://nodejs.org/api/documentation.html#stability-index">Stability: 2</a> - Stable</div>
 <p><strong>Source Code:</strong> <a href="https://github.com/nodejs/node/blob/v17.0.1/lib/perf_hooks.js">lib/perf_hooks.js</a></p> <p>This module provides an implementation of a subset of the W3C <a href="https://w3c.github.io/perf-timing-primer/">Web Performance APIs</a> as well as additional APIs for Node.js-specific performance measurements.</p> <p>Node.js supports the following <a href="https://w3c.github.io/perf-timing-primer/">Web Performance APIs</a>:</p> <ul> <li><a href="https://www.w3.org/TR/hr-time-2">High Resolution Time</a></li> <li><a href="https://w3c.github.io/performance-timeline/">Performance Timeline</a></li> <li><a href="https://www.w3.org/TR/user-timing/">User Timing</a></li> </ul> <pre data-language="js">const { PerformanceObserver, performance } = require('perf_hooks');

const obs = new PerformanceObserver((items) =&gt; {
  console.log(items.getEntries()[0].duration);
  performance.clearMarks();
});
obs.observe({ type: 'measure' });
performance.measure('Start to Now');

performance.mark('A');
doSomeLongRunningProcess(() =&gt; {
  performance.measure('A to Now', 'A');

  performance.mark('B');
  performance.measure('A to B', 'A', 'B');
});</pre> <section><h3 id="perf_hooks.performance">
<code>perf_hooks.performance</code>
</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <p>An object that can be used to collect performance metrics from the current Node.js instance. It is similar to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/performance"><code>window.performance</code></a> in browsers.</p> <h4 id="performance.clearMarks()">
<code>performance.clearMarks([name])</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a>
</li> </ul> <p>If <code>name</code> is not provided, removes all <code>PerformanceMark</code> objects from the Performance Timeline. If <code>name</code> is provided, removes only the named mark.</p> <h4 id="performance.eventLoopUtilization()">
<code>performance.eventLoopUtilization([utilization1[, utilization2]])</code>
</h4> <div class="api_metadata"> <span>Added in: v14.10.0, v12.19.0</span> </div> <ul> <li>
<code>utilization1</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> The result of a previous call to <code>eventLoopUtilization()</code>.</li> <li>
<code>utilization2</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> The result of a previous call to <code>eventLoopUtilization()</code> prior to <code>utilization1</code>.</li> <li>Returns <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> <ul> <li>
<code>idle</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a>
</li> <li>
<code>active</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a>
</li> <li>
<code>utilization</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a>
</li> </ul> </li> </ul> <p>The <code>eventLoopUtilization()</code> method returns an object that contains the cumulative duration of time the event loop has been both idle and active as a high resolution milliseconds timer. The <code>utilization</code> value is the calculated Event Loop Utilization (ELU).</p> <p>If bootstrapping has not yet finished on the main thread the properties have the value of <code>0</code>. The ELU is immediately available on <a href="worker_threads#worker-threads">Worker threads</a> since bootstrap happens within the event loop.</p> <p>Both <code>utilization1</code> and <code>utilization2</code> are optional parameters.</p> <p>If <code>utilization1</code> is passed, then the delta between the current call's <code>active</code> and <code>idle</code> times, as well as the corresponding <code>utilization</code> value are calculated and returned (similar to <a href="process#processhrtimetime"><code>process.hrtime()</code></a>).</p> <p>If <code>utilization1</code> and <code>utilization2</code> are both passed, then the delta is calculated between the two arguments. This is a convenience option because, unlike <a href="process#processhrtimetime"><code>process.hrtime()</code></a>, calculating the ELU is more complex than a single subtraction.</p> <p>ELU is similar to CPU utilization, except that it only measures event loop statistics and not CPU usage. It represents the percentage of time the event loop has spent outside the event loop's event provider (e.g. <code>epoll_wait</code>). No other CPU idle time is taken into consideration. The following is an example of how a mostly idle process will have a high ELU.</p> <pre data-language="js">'use strict';
const { eventLoopUtilization } = require('perf_hooks').performance;
const { spawnSync } = require('child_process');

setImmediate(() =&gt; {
  const elu = eventLoopUtilization();
  spawnSync('sleep', ['5']);
  console.log(eventLoopUtilization(elu).utilization);
});</pre> <p>Although the CPU is mostly idle while running this script, the value of <code>utilization</code> is <code>1</code>. This is because the call to <a href="child_process#child_processspawnsynccommand-args-options"><code>child_process.spawnSync()</code></a> blocks the event loop from proceeding.</p> <p>Passing in a user-defined object instead of the result of a previous call to <code>eventLoopUtilization()</code> will lead to undefined behavior. The return values are not guaranteed to reflect any correct state of the event loop.</p> <h4 id="performance.mark()">
<code>performance.mark([name[, options]])</code>
</h4> <div class="api_metadata"> <details class="changelog"><summary>History</summary> <table> <tbody>
<tr>
<th>Version</th>
<th>Changes</th>
</tr> <tr>
<td>v16.0.0</td> <td><p>Updated to conform to the User Timing Level 3 specification.</p></td>
</tr> <tr>
<td>v8.5.0</td> <td><p><span>Added in: v8.5.0</span></p></td>
</tr> </tbody>
</table> </details> </div> <ul> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a>
</li> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> <ul> <li>
<code>detail</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" class="type">&lt;any&gt;</a> Additional optional detail to include with the mark.</li> <li>
<code>startTime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> An optional timestamp to be used as the mark time. <strong>Defaults</strong>: <code>performance.now()</code>.</li> </ul> </li> </ul> <p>Creates a new <code>PerformanceMark</code> entry in the Performance Timeline. A <code>PerformanceMark</code> is a subclass of <code>PerformanceEntry</code> whose <code>performanceEntry.entryType</code> is always <code>'mark'</code>, and whose <code>performanceEntry.duration</code> is always <code>0</code>. Performance marks are used to mark specific significant moments in the Performance Timeline.</p> <h4 id="performance.measure()">
<code>performance.measure(name[, startMarkOrOptions[, endMark]])</code>
</h4> <div class="api_metadata"> <details class="changelog"><summary>History</summary> <table> <tbody>
<tr>
<th>Version</th>
<th>Changes</th>
</tr> <tr>
<td>v16.0.0</td> <td><p>Updated to conform to the User Timing Level 3 specification.</p></td>
</tr> <tr>
<td>v13.13.0, v12.16.3</td> <td><p>Make <code>startMark</code> and <code>endMark</code> parameters optional.</p></td>
</tr> <tr>
<td>v8.5.0</td> <td><p><span>Added in: v8.5.0</span></p></td>
</tr> </tbody>
</table> </details> </div> <ul> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a>
</li> <li>
<code>startMarkOrOptions</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> Optional. <ul> <li>
<code>detail</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" class="type">&lt;any&gt;</a> Additional optional detail to include with the measure.</li> <li>
<code>duration</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> Duration between start and end times.</li> <li>
<code>end</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> Timestamp to be used as the end time, or a string identifying a previously recorded mark.</li> <li>
<code>start</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> Timestamp to be used as the start time, or a string identifying a previously recorded mark.</li> </ul> </li> <li>
<code>endMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> Optional. Must be omitted if <code>startMarkOrOptions</code> is an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a>.</li> </ul> <p>Creates a new <code>PerformanceMeasure</code> entry in the Performance Timeline. A <code>PerformanceMeasure</code> is a subclass of <code>PerformanceEntry</code> whose <code>performanceEntry.entryType</code> is always <code>'measure'</code>, and whose <code>performanceEntry.duration</code> measures the number of milliseconds elapsed since <code>startMark</code> and <code>endMark</code>.</p> <p>The <code>startMark</code> argument may identify any <em>existing</em> <code>PerformanceMark</code> in the Performance Timeline, or <em>may</em> identify any of the timestamp properties provided by the <code>PerformanceNodeTiming</code> class. If the named <code>startMark</code> does not exist, an error is thrown.</p> <p>The optional <code>endMark</code> argument must identify any <em>existing</em> <code>PerformanceMark</code> in the Performance Timeline or any of the timestamp properties provided by the <code>PerformanceNodeTiming</code> class. <code>endMark</code> will be <code>performance.now()</code> if no parameter is passed, otherwise if the named <code>endMark</code> does not exist, an error will be thrown.</p> <h4 id="performance.nodeTiming">
<code>performance.nodeTiming</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="perf_hooks#class-performancenodetiming" class="type">&lt;PerformanceNodeTiming&gt;</a></li> </ul> <p><em>This property is an extension by Node.js. It is not available in Web browsers.</em></p> <p>An instance of the <code>PerformanceNodeTiming</code> class that provides performance metrics for specific Node.js operational milestones.</p> <h4 id="performance.now()">
<code>performance.now()</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a>
</li> </ul> <p>Returns the current high resolution millisecond timestamp, where 0 represents the start of the current <code>node</code> process.</p> <h4 id="performance.timeOrigin">
<code>performance.timeOrigin</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The <a href="https://w3c.github.io/hr-time/#dom-performance-timeorigin"><code>timeOrigin</code></a> specifies the high resolution millisecond timestamp at which the current <code>node</code> process began, measured in Unix time.</p> <h4 id="performance.timerify()">
<code>performance.timerify(fn[, options])</code>
</h4> <div class="api_metadata"> <details class="changelog"><summary>History</summary> <table> <tbody>
<tr>
<th>Version</th>
<th>Changes</th>
</tr> <tr>
<td>v16.0.0</td> <td><p>Added the histogram option.</p></td>
</tr> <tr>
<td>v16.0.0</td> <td><p>Re-implemented to use pure-JavaScript and the ability to time async functions.</p></td>
</tr> <tr>
<td>v8.5.0</td> <td><p><span>Added in: v8.5.0</span></p></td>
</tr> </tbody>
</table> </details> </div> <ul> <li>
<code>fn</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a>
</li> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> <ul> <li>
<code>histogram</code> <a href="perf_hooks#class-recordablehistogram-extends-histogram" class="type">&lt;RecordableHistogram&gt;</a> A histogram object created using <code>perf_hooks.createHistogram()</code> that will record runtime durations in nanoseconds.</li> </ul> </li> </ul> <p><em>This property is an extension by Node.js. It is not available in Web browsers.</em></p> <p>Wraps a function within a new function that measures the running time of the wrapped function. A <code>PerformanceObserver</code> must be subscribed to the <code>'function'</code> event type in order for the timing details to be accessed.</p> <pre data-language="js">const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

function someFunction() {
  console.log('hello world');
}

const wrapped = performance.timerify(someFunction);

const obs = new PerformanceObserver((list) =&gt; {
  console.log(list.getEntries()[0].duration);
  obs.disconnect();
});
obs.observe({ entryTypes: ['function'] });

// A performance timeline entry will be created
wrapped();</pre> <p>If the wrapped function returns a promise, a finally handler will be attached to the promise and the duration will be reported once the finally handler is invoked.</p> <h4 id="performance.toJSON()">
<code>performance.toJSON()</code>
</h4> <div class="api_metadata"> <span>Added in: v16.1.0</span> </div> <p>An object which is JSON representation of the <code>performance</code> object. It is similar to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/toJSON"><code>window.performance.toJSON</code></a> in browsers.</p> </section><section><h3 id="PerformanceEntry">Class: <code>PerformanceEntry</code>
</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <h4 id="performanceEntry.detail">
<code>performanceEntry.detail</code>
</h4> <div class="api_metadata"> <span>Added in: v16.0.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" class="type">&lt;any&gt;</a></li> </ul> <p>Additional detail specific to the <code>entryType</code>.</p> <h4 id="performanceEntry.duration">
<code>performanceEntry.duration</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The total number of milliseconds elapsed for this entry. This value will not be meaningful for all Performance Entry types.</p> <h4 id="performanceEntry.entryType">
<code>performanceEntry.entryType</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a></li> </ul> <p>The type of the performance entry. It may be one of:</p> <ul> <li>
<code>'node'</code> (Node.js only)</li> <li>
<code>'mark'</code> (available on the Web)</li> <li>
<code>'measure'</code> (available on the Web)</li> <li>
<code>'gc'</code> (Node.js only)</li> <li>
<code>'function'</code> (Node.js only)</li> <li>
<code>'http2'</code> (Node.js only)</li> <li>
<code>'http'</code> (Node.js only)</li> </ul> <h4 id="performanceEntry.flags">
<code>performanceEntry.flags</code>
</h4> <div class="api_metadata"> <details class="changelog"><summary>History</summary> <table> <tbody>
<tr>
<th>Version</th>
<th>Changes</th>
</tr> <tr>
<td>v16.0.0</td> <td><p>Runtime deprecated. Now moved to the detail property when entryType is 'gc'.</p></td>
</tr> <tr>
<td>v13.9.0, v12.17.0</td> <td><p><span>Added in: v13.9.0, v12.17.0</span></p></td>
</tr> </tbody>
</table> </details> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p><em>This property is an extension by Node.js. It is not available in Web browsers.</em></p> <p>When <code>performanceEntry.entryType</code> is equal to <code>'gc'</code>, the <code>performance.flags</code> property contains additional information about garbage collection operation. The value may be one of:</p> <ul> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_NO</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_FORCED</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE</code></li> </ul> <h4 id="performanceEntry.name">
<code>performanceEntry.name</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a></li> </ul> <p>The name of the performance entry.</p> <h4 id="performanceEntry.kind">
<code>performanceEntry.kind</code>
</h4> <div class="api_metadata"> <details class="changelog"><summary>History</summary> <table> <tbody>
<tr>
<th>Version</th>
<th>Changes</th>
</tr> <tr>
<td>v16.0.0</td> <td><p>Runtime deprecated. Now moved to the detail property when entryType is 'gc'.</p></td>
</tr> <tr>
<td>v8.5.0</td> <td><p><span>Added in: v8.5.0</span></p></td>
</tr> </tbody>
</table> </details> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p><em>This property is an extension by Node.js. It is not available in Web browsers.</em></p> <p>When <code>performanceEntry.entryType</code> is equal to <code>'gc'</code>, the <code>performance.kind</code> property identifies the type of garbage collection operation that occurred. The value may be one of:</p> <ul> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_MAJOR</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_MINOR</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_INCREMENTAL</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_WEAKCB</code></li> </ul> <h4 id="performanceEntry.startTime">
<code>performanceEntry.startTime</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp marking the starting time of the Performance Entry.</p> <h4 id="garbage-collection-gc-details">Garbage Collection ('gc') Details
</h4> <p>When <code>performanceEntry.type</code> is equal to <code>'gc'</code>, the <code>performanceEntry.detail</code> property will be an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> with two properties:</p> <ul> <li>
<code>kind</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> One of: <ul> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_MAJOR</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_MINOR</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_INCREMENTAL</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_WEAKCB</code></li> </ul> </li> <li>
<code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> One of: <ul> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_NO</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_CONSTRUCT_RETAINED</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_FORCED</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_SYNCHRONOUS_PHANTOM_PROCESSING</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_ALL_AVAILABLE_GARBAGE</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_ALL_EXTERNAL_MEMORY</code></li> <li><code>perf_hooks.constants.NODE_PERFORMANCE_GC_FLAGS_SCHEDULE_IDLE</code></li> </ul> </li> </ul> <h4 id="http2-http2-details">HTTP/2 ('http2') Details
</h4> <p>When <code>performanceEntry.type</code> is equal to <code>'http2'</code>, the <code>performanceEntry.detail</code> property will be an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> containing additional performance information.</p> <p>If <code>performanceEntry.name</code> is equal to <code>Http2Stream</code>, the <code>detail</code> will contain the following properties:</p> <ul> <li>
<code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of <code>DATA</code> frame bytes received for this <code>Http2Stream</code>.</li> <li>
<code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of <code>DATA</code> frame bytes sent for this <code>Http2Stream</code>.</li> <li>
<code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The identifier of the associated <code>Http2Stream</code>
</li> <li>
<code>timeToFirstByte</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of milliseconds elapsed between the <code>PerformanceEntry</code> <code>startTime</code> and the reception of the first <code>DATA</code> frame.</li> <li>
<code>timeToFirstByteSent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of milliseconds elapsed between the <code>PerformanceEntry</code> <code>startTime</code> and sending of the first <code>DATA</code> frame.</li> <li>
<code>timeToFirstHeader</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of milliseconds elapsed between the <code>PerformanceEntry</code> <code>startTime</code> and the reception of the first header.</li> </ul> <p>If <code>performanceEntry.name</code> is equal to <code>Http2Session</code>, the <code>detail</code> will contain the following properties:</p> <ul> <li>
<code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of bytes received for this <code>Http2Session</code>.</li> <li>
<code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of bytes sent for this <code>Http2Session</code>.</li> <li>
<code>framesReceived</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of HTTP/2 frames received by the <code>Http2Session</code>.</li> <li>
<code>framesSent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of HTTP/2 frames sent by the <code>Http2Session</code>.</li> <li>
<code>maxConcurrentStreams</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The maximum number of streams concurrently open during the lifetime of the <code>Http2Session</code>.</li> <li>
<code>pingRTT</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of milliseconds elapsed since the transmission of a <code>PING</code> frame and the reception of its acknowledgment. Only present if a <code>PING</code> frame has been sent on the <code>Http2Session</code>.</li> <li>
<code>streamAverageDuration</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The average duration (in milliseconds) for all <code>Http2Stream</code> instances.</li> <li>
<code>streamCount</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of <code>Http2Stream</code> instances processed by the <code>Http2Session</code>.</li> <li>
<code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> Either <code>'server'</code> or <code>'client'</code> to identify the type of <code>Http2Session</code>.</li> </ul> <h4 id="timerify-function-details">Timerify ('function') Details
</h4> <p>When <code>performanceEntry.type</code> is equal to <code>'function'</code>, the <code>performanceEntry.detail</code> property will be an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" class="type">&lt;Array&gt;</a> listing the input arguments to the timed function.</p> </section><section><h3 id="PerformanceNodeTiming">Class: <code>PerformanceNodeTiming</code>
</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>Extends: <a href="perf_hooks#class-performanceentry" class="type">&lt;PerformanceEntry&gt;</a>
</li> </ul> <p><em>This property is an extension by Node.js. It is not available in Web browsers.</em></p> <p>Provides timing details for Node.js itself. The constructor of this class is not exposed to users.</p> <h4 id="performanceNodeTiming.bootstrapComplete">
<code>performanceNodeTiming.bootstrapComplete</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the Node.js process completed bootstrapping. If bootstrapping has not yet finished, the property has the value of -1.</p> <h4 id="performanceNodeTiming.environment">
<code>performanceNodeTiming.environment</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the Node.js environment was initialized.</p> <h4 id="performanceNodeTiming.idleTime">
<code>performanceNodeTiming.idleTime</code>
</h4> <div class="api_metadata"> <span>Added in: v14.10.0, v12.19.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp of the amount of time the event loop has been idle within the event loop's event provider (e.g. <code>epoll_wait</code>). This does not take CPU usage into consideration. If the event loop has not yet started (e.g., in the first tick of the main script), the property has the value of 0.</p> <h4 id="performanceNodeTiming.loopExit">
<code>performanceNodeTiming.loopExit</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the Node.js event loop exited. If the event loop has not yet exited, the property has the value of -1. It can only have a value of not -1 in a handler of the <a href="process#event-exit"><code>'exit'</code></a> event.</p> <h4 id="performanceNodeTiming.loopStart">
<code>performanceNodeTiming.loopStart</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the Node.js event loop started. If the event loop has not yet started (e.g., in the first tick of the main script), the property has the value of -1.</p> <h4 id="performanceNodeTiming.nodeStart">
<code>performanceNodeTiming.nodeStart</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the Node.js process was initialized.</p> <h4 id="performanceNodeTiming.v8Start">
<code>performanceNodeTiming.v8Start</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The high resolution millisecond timestamp at which the V8 platform was initialized.</p> </section><section><h3 id="perf_hooks.PerformanceObserver">Class: <code>perf_hooks.PerformanceObserver</code>
</h3> <h4 id="new PerformanceObserver()">
<code>new PerformanceObserver(callback)</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>
<code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> <ul> <li>
<code>list</code> <a href="perf_hooks#class-performanceobserverentrylist" class="type">&lt;PerformanceObserverEntryList&gt;</a>
</li> <li>
<code>observer</code> <a href="perf_hooks#class-perf_hooksperformanceobserver" class="type">&lt;PerformanceObserver&gt;</a>
</li> </ul> </li> </ul> <p><code>PerformanceObserver</code> objects provide notifications when new <code>PerformanceEntry</code> instances have been added to the Performance Timeline.</p> <pre data-language="js">const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

const obs = new PerformanceObserver((list, observer) =&gt; {
  console.log(list.getEntries());
  observer.disconnect();
});
obs.observe({ entryTypes: ['mark'], buffered: true });

performance.mark('test');</pre> <p>Because <code>PerformanceObserver</code> instances introduce their own additional performance overhead, instances should not be left subscribed to notifications indefinitely. Users should disconnect observers as soon as they are no longer needed.</p> <p>The <code>callback</code> is invoked when a <code>PerformanceObserver</code> is notified about new <code>PerformanceEntry</code> instances. The callback receives a <code>PerformanceObserverEntryList</code> instance and a reference to the <code>PerformanceObserver</code>.</p> <h4 id="performanceObserver.disconnect()">
<code>performanceObserver.disconnect()</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <p>Disconnects the <code>PerformanceObserver</code> instance from all notifications.</p> <h4 id="performanceObserver.observe()">
<code>performanceObserver.observe(options)</code>
</h4> <div class="api_metadata"> <details class="changelog"><summary>History</summary> <table> <tbody>
<tr>
<th>Version</th>
<th>Changes</th>
</tr> <tr>
<td>v16.7.0</td> <td><p>Updated to conform to Performance Timeline Level 2. The buffered option has been added back.</p></td>
</tr> <tr>
<td>v16.0.0</td> <td><p>Updated to conform to User Timing Level 3. The buffered option has been removed.</p></td>
</tr> <tr>
<td>v8.5.0</td> <td><p><span>Added in: v8.5.0</span></p></td>
</tr> </tbody>
</table> </details> </div> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> <ul> <li>
<code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> A single <a href="perf_hooks#class-performanceentry" class="type">&lt;PerformanceEntry&gt;</a> type. Must not be given if <code>entryTypes</code> is already specified.</li> <li>
<code>entryTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string[]&gt;</a> An array of strings identifying the types of <a href="perf_hooks#class-performanceentry" class="type">&lt;PerformanceEntry&gt;</a> instances the observer is interested in. If not provided an error will be thrown.</li> <li>
<code>buffered</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> If true, the observer callback is called with a list global <code>PerformanceEntry</code> buffered entries. If false, only <code>PerformanceEntry</code>s created after the time point are sent to the observer callback. <strong>Default:</strong> <code>false</code>.</li> </ul> </li> </ul> <p>Subscribes the <a href="perf_hooks#class-perf_hooksperformanceobserver" class="type">&lt;PerformanceObserver&gt;</a> instance to notifications of new <a href="perf_hooks#class-performanceentry" class="type">&lt;PerformanceEntry&gt;</a> instances identified either by <code>options.entryTypes</code> or <code>options.type</code>:</p> <pre data-language="js">const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

const obs = new PerformanceObserver((list, observer) =&gt; {
  // Called three times synchronously. `list` contains one item.
});
obs.observe({ type: 'mark' });

for (let n = 0; n &lt; 3; n++)
  performance.mark(`test${n}`);</pre> </section><section><h3 id="PerformanceObserverEntryList">Class: <code>PerformanceObserverEntryList</code>
</h3> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <p>The <code>PerformanceObserverEntryList</code> class is used to provide access to the <code>PerformanceEntry</code> instances passed to a <code>PerformanceObserver</code>. The constructor of this class is not exposed to users.</p> <h4 id="performanceObserverEntryList.getEntries()">
<code>performanceObserverEntryList.getEntries()</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>Returns: <a href="perf_hooks#class-performanceentry" class="type">&lt;PerformanceEntry[]&gt;</a>
</li> </ul> <p>Returns a list of <code>PerformanceEntry</code> objects in chronological order with respect to <code>performanceEntry.startTime</code>.</p> <pre data-language="js">const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

const obs = new PerformanceObserver((perfObserverList, observer) =&gt; {
  console.log(perfObserverList.getEntries());
  /**
   * [
   *   PerformanceEntry {
   *     name: 'test',
   *     entryType: 'mark',
   *     startTime: 81.465639,
   *     duration: 0
   *   },
   *   PerformanceEntry {
   *     name: 'meow',
   *     entryType: 'mark',
   *     startTime: 81.860064,
   *     duration: 0
   *   }
   * ]
   */
  observer.disconnect();
});
obs.observe({ type: 'mark' });

performance.mark('test');
performance.mark('meow');</pre> <h4 id="performanceObserverEntryList.getEntriesByName()">
<code>performanceObserverEntryList.getEntriesByName(name[, type])</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>
<code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a>
</li> <li>
<code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a>
</li> <li>Returns: <a href="perf_hooks#class-performanceentry" class="type">&lt;PerformanceEntry[]&gt;</a>
</li> </ul> <p>Returns a list of <code>PerformanceEntry</code> objects in chronological order with respect to <code>performanceEntry.startTime</code> whose <code>performanceEntry.name</code> is equal to <code>name</code>, and optionally, whose <code>performanceEntry.entryType</code> is equal to <code>type</code>.</p> <pre data-language="js">const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

const obs = new PerformanceObserver((perfObserverList, observer) =&gt; {
  console.log(perfObserverList.getEntriesByName('meow'));
  /**
   * [
   *   PerformanceEntry {
   *     name: 'meow',
   *     entryType: 'mark',
   *     startTime: 98.545991,
   *     duration: 0
   *   }
   * ]
   */
  console.log(perfObserverList.getEntriesByName('nope')); // []

  console.log(perfObserverList.getEntriesByName('test', 'mark'));
  /**
   * [
   *   PerformanceEntry {
   *     name: 'test',
   *     entryType: 'mark',
   *     startTime: 63.518931,
   *     duration: 0
   *   }
   * ]
   */
  console.log(perfObserverList.getEntriesByName('test', 'measure')); // []
  observer.disconnect();
});
obs.observe({ entryTypes: ['mark', 'measure'] });

performance.mark('test');
performance.mark('meow');</pre> <h4 id="performanceObserverEntryList.getEntriesByType()">
<code>performanceObserverEntryList.getEntriesByType(type)</code>
</h4> <div class="api_metadata"> <span>Added in: v8.5.0</span> </div> <ul> <li>
<code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a>
</li> <li>Returns: <a href="perf_hooks#class-performanceentry" class="type">&lt;PerformanceEntry[]&gt;</a>
</li> </ul> <p>Returns a list of <code>PerformanceEntry</code> objects in chronological order with respect to <code>performanceEntry.startTime</code> whose <code>performanceEntry.entryType</code> is equal to <code>type</code>.</p> <pre data-language="js">const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

const obs = new PerformanceObserver((perfObserverList, observer) =&gt; {
  console.log(perfObserverList.getEntriesByType('mark'));
  /**
   * [
   *   PerformanceEntry {
   *     name: 'test',
   *     entryType: 'mark',
   *     startTime: 55.897834,
   *     duration: 0
   *   },
   *   PerformanceEntry {
   *     name: 'meow',
   *     entryType: 'mark',
   *     startTime: 56.350146,
   *     duration: 0
   *   }
   * ]
   */
  observer.disconnect();
});
obs.observe({ type: 'mark' });

performance.mark('test');
performance.mark('meow');</pre> </section><section><h3 id="perf_hooks.createHistogram()">
<code>perf_hooks.createHistogram([options])</code>
</h3> <div class="api_metadata"> <span>Added in: v15.9.0, v14.18.0</span> </div> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> <ul> <li>
<code>min</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" class="type">&lt;bigint&gt;</a> The minimum recordable value. Must be an integer value greater than 0. <strong>Default:</strong> <code>1</code>.</li> <li>
<code>max</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" class="type">&lt;bigint&gt;</a> The maximum recordable value. Must be an integer value greater than <code>min</code>. <strong>Default:</strong> <code>Number.MAX_SAFE_INTEGER</code>.</li> <li>
<code>figures</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The number of accuracy digits. Must be a number between <code>1</code> and <code>5</code>. <strong>Default:</strong> <code>3</code>.</li> </ul> </li> <li>Returns <a href="perf_hooks#class-recordablehistogram-extends-histogram" class="type">&lt;RecordableHistogram&gt;</a>
</li> </ul> <p>Returns a <a href="perf_hooks#class-recordablehistogram-extends-histogram" class="type">&lt;RecordableHistogram&gt;</a>.</p> </section><section><h3 id="perf_hooks.monitorEventLoopDelay()">
<code>perf_hooks.monitorEventLoopDelay([options])</code>
</h3> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li>
<code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> <ul> <li>
<code>resolution</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> The sampling rate in milliseconds. Must be greater than zero. <strong>Default:</strong> <code>10</code>.</li> </ul> </li> <li>Returns: <a href="perf_hooks#class-intervalhistogram-extends-histogram" class="type">&lt;IntervalHistogram&gt;</a>
</li> </ul> <p><em>This property is an extension by Node.js. It is not available in Web browsers.</em></p> <p>Creates an <code>IntervalHistogram</code> object that samples and reports the event loop delay over time. The delays will be reported in nanoseconds.</p> <p>Using a timer to detect approximate event loop delay works because the execution of timers is tied specifically to the lifecycle of the libuv event loop. That is, a delay in the loop will cause a delay in the execution of the timer, and those delays are specifically what this API is intended to detect.</p> <pre data-language="js">const { monitorEventLoopDelay } = require('perf_hooks');
const h = monitorEventLoopDelay({ resolution: 20 });
h.enable();
// Do something.
h.disable();
console.log(h.min);
console.log(h.max);
console.log(h.mean);
console.log(h.stddev);
console.log(h.percentiles);
console.log(h.percentile(50));
console.log(h.percentile(99));</pre> </section><section><h3 id="Histogram">Class: <code>Histogram</code>
</h3> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <h4 id="histogram.exceeds">
<code>histogram.exceeds</code>
</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The number of times the event loop delay exceeded the maximum 1 hour event loop delay threshold.</p> <h4 id="histogram.max">
<code>histogram.max</code>
</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The maximum recorded event loop delay.</p> <h4 id="histogram.mean">
<code>histogram.mean</code>
</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The mean of the recorded event loop delays.</p> <h4 id="histogram.min">
<code>histogram.min</code>
</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The minimum recorded event loop delay.</p> <h4 id="histogram.percentile()">
<code>histogram.percentile(percentile)</code>
</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li>
<code>percentile</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> A percentile value in the range (0, 100].</li> <li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a>
</li> </ul> <p>Returns the value at the given percentile.</p> <h4 id="histogram.percentiles">
<code>histogram.percentiles</code>
</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" class="type">&lt;Map&gt;</a></li> </ul> <p>Returns a <code>Map</code> object detailing the accumulated percentile distribution.</p> <h4 id="histogram.reset()">
<code>histogram.reset()</code>
</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <p>Resets the collected histogram data.</p> <h4 id="histogram.stddev">
<code>histogram.stddev</code>
</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li> </ul> <p>The standard deviation of the recorded event loop delays.</p> </section><section><h3 id="IntervalHistogram extends Histogram">Class: <code>IntervalHistogram extends Histogram</code>
</h3> <p>A <code>Histogram</code> that is periodically updated on a given interval.</p> <h4 id="histogram.disable()">
<code>histogram.disable()</code>
</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a>
</li> </ul> <p>Disables the update interval timer. Returns <code>true</code> if the timer was stopped, <code>false</code> if it was already stopped.</p> <h4 id="histogram.enable()">
<code>histogram.enable()</code>
</h4> <div class="api_metadata"> <span>Added in: v11.10.0</span> </div> <ul> <li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a>
</li> </ul> <p>Enables the update interval timer. Returns <code>true</code> if the timer was started, <code>false</code> if it was already started.</p> <h4 id="IntervalHistogram">Cloning an <code>IntervalHistogram</code>
</h4> <p><a href="perf_hooks#class-intervalhistogram-extends-histogram" class="type">&lt;IntervalHistogram&gt;</a> instances can be cloned via <a href="worker_threads#class-messageport" class="type">&lt;MessagePort&gt;</a>. On the receiving end, the histogram is cloned as a plain <a href="perf_hooks#class-histogram" class="type">&lt;Histogram&gt;</a> object that does not implement the <code>enable()</code> and <code>disable()</code> methods.</p> </section><section><h3 id="RecordableHistogram extends Histogram">Class: <code>RecordableHistogram extends Histogram</code>
</h3> <div class="api_metadata"> <span>Added in: v15.9.0, v14.18.0</span> </div> <h4 id="histogram.record()">
<code>histogram.record(val)</code>
</h4> <div class="api_metadata"> <span>Added in: v15.9.0, v14.18.0</span> </div> <ul> <li>
<code>val</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" class="type">&lt;bigint&gt;</a> The amount to record in the histogram.</li> </ul> <h4 id="histogram.recordDelta()">
<code>histogram.recordDelta()</code>
</h4> <div class="api_metadata"> <span>Added in: v15.9.0, v14.18.0</span> </div> <p>Calculates the amount of time (in nanoseconds) that has passed since the previous call to <code>recordDelta()</code> and records that amount in the histogram.</p> </section><section><h3 id="examples">Examples
</h3> <h4 id="measuring-the-duration-of-async-operations">Measuring the duration of async operations
</h4> <p>The following example uses the <a href="async_hooks">Async Hooks</a> and Performance APIs to measure the actual duration of a Timeout operation (including the amount of time it took to execute the callback).</p> <pre data-language="js">'use strict';
const async_hooks = require('async_hooks');
const {
  performance,
  PerformanceObserver
} = require('perf_hooks');

const set = new Set();
const hook = async_hooks.createHook({
  init(id, type) {
    if (type === 'Timeout') {
      performance.mark(`Timeout-${id}-Init`);
      set.add(id);
    }
  },
  destroy(id) {
    if (set.has(id)) {
      set.delete(id);
      performance.mark(`Timeout-${id}-Destroy`);
      performance.measure(`Timeout-${id}`,
                          `Timeout-${id}-Init`,
                          `Timeout-${id}-Destroy`);
    }
  }
});
hook.enable();

const obs = new PerformanceObserver((list, observer) =&gt; {
  console.log(list.getEntries()[0]);
  performance.clearMarks();
  observer.disconnect();
});
obs.observe({ entryTypes: ['measure'], buffered: true });

setTimeout(() =&gt; {}, 1000);</pre> <h4 id="measuring-how-long-it-takes-to-load-dependencies">Measuring how long it takes to load dependencies
</h4> <p>The following example measures the duration of <code>require()</code> operations to load dependencies:</p>  <pre data-language="js">'use strict';
const {
  performance,
  PerformanceObserver
} = require('perf_hooks');
const mod = require('module');

// Monkey patch the require function
mod.Module.prototype.require =
  performance.timerify(mod.Module.prototype.require);
require = performance.timerify(require);

// Activate the observer
const obs = new PerformanceObserver((list) =&gt; {
  const entries = list.getEntries();
  entries.forEach((entry) =&gt; {
    console.log(`require('${entry[0]}')`, entry.duration);
  });
  obs.disconnect();
});
obs.observe({ entryTypes: ['function'], buffered: true });

require('some-module');</pre></section><div class="_attribution">
  <p class="_attribution-p">
     Joyent, Inc. and other Node contributors<br>Licensed under the MIT License.<br>Node.js is a trademark of Joyent, Inc. and is used with its permission.<br>We are not endorsed by or affiliated with Joyent.<br>
    <a href="https://nodejs.org/api/perf_hooks.html" class="_attribution-link">https://nodejs.org/api/perf_hooks.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
