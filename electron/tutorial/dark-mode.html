
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Dark Mode - Electron - W3cubDocs</title>
  
  <meta name="description" content="&#34;Native interfaces&#34; include the file picker, window border, dialogs, context menus, and more - anything where the UI comes from your &hellip;">
  <meta name="keywords" content="dark, mode, electron">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/electron/tutorial/dark-mode.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/electron.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/electron/" class="_nav-link" title="" style="margin-left:0;">Electron</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 id="dark-mode">Dark Mode</h1>   <h2 id="overview">Overview</h2>   <h3 id="automatically-update-the-native-interfaces">Automatically update the native interfaces</h3> <p>"Native interfaces" include the file picker, window border, dialogs, context menus, and more - anything where the UI comes from your operating system and not from your app. The default behavior is to opt into this automatic theming from the OS.</p>   <h3 id="automatically-update-your-own-interfaces">Automatically update your own interfaces</h3> <p>If your app has its own dark mode, you should toggle it on and off in sync with the system's dark mode setting. You can do this by using the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme">prefer-color-scheme</a> CSS media query.</p>   <h3 id="manually-update-your-own-interfaces">Manually update your own interfaces</h3> <p>If you want to manually switch between light/dark modes, you can do this by setting the desired mode in the <a href="../api/native-theme#nativethemethemesource">themeSource</a> property of the <code>nativeTheme</code> module. This property's value will be propagated to your Renderer process. Any CSS rules related to <code>prefers-color-scheme</code> will be updated accordingly.</p>   <h2 id="macos-settings">macOS settings</h2> <p>In macOS 10.14 Mojave, Apple introduced a new <a href="https://developer.apple.com/design/human-interface-guidelines/macos/visual-design/dark-mode/">system-wide dark mode</a> for all macOS computers. If your Electron app has a dark mode, you can make it follow the system-wide dark mode setting using <a href="../api/native-theme">the <code>nativeTheme</code> api</a>.</p> <p>In macOS 10.15 Catalina, Apple introduced a new "automatic" dark mode option for all macOS computers. In order for the <code>nativeTheme.shouldUseDarkColors</code> and <code>Tray</code> APIs to work correctly in this mode on Catalina, you need to use Electron <code>&gt;=7.0.0</code>, or set <code>NSRequiresAquaSystemAppearance</code> to <code>false</code> in your <code>Info.plist</code> file for older versions. Both <a href="https://github.com/electron/electron-packager">Electron Packager</a> and <a href="https://www.electronforge.io/">Electron Forge</a> have a <a href="https://electron.github.io/electron-packager/master/interfaces/electronpackager.options.html#darwindarkmodesupport"><code>darwinDarkModeSupport</code> option</a> to automate the <code>Info.plist</code> changes during app build time.</p> <p>If you wish to opt-out while using Electron &gt; 8.0.0, you must set the <code>NSRequiresAquaSystemAppearance</code> key in the <code>Info.plist</code> file to <code>true</code>. Please note that Electron 8.0.0 and above will not let you opt-out of this theming, due to the use of the macOS 10.14 SDK.</p>   <h2 id="example">Example</h2> <p>We'll start with a working application from the <a href="quick-start">Quick Start Guide</a> and add functionality gradually.</p> <p>First, let's edit our interface so users can toggle between light and dark modes. This basic UI contains buttons to change the <code>nativeTheme.themeSource</code> setting and a text element indicating which <code>themeSource</code> value is selected. By default, Electron follows the system's dark mode preference, so we will hardcode the theme source as "System".</p> <p>Add the following lines to the <code>index.html</code> file:</p> <pre data-language="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Hello World!&lt;/title&gt;
    &lt;meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" /&gt;
    &lt;link rel="stylesheet" type="text/css" href="./styles.css"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello World!&lt;/h1&gt;
    &lt;p&gt;Current theme source: &lt;strong id="theme-source"&gt;System&lt;/strong&gt;&lt;/p&gt;

    &lt;button id="toggle-dark-mode"&gt;Toggle Dark Mode&lt;/button&gt;
    &lt;button id="reset-to-system"&gt;Reset to System Theme&lt;/button&gt;

    &lt;script src="renderer.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre> <p>Next, add <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener">event listeners</a> that listen for <code>click</code> events on the toggle buttons. Because the <code>nativeTheme</code> module only exposed in the Main process, you need to set up each listener's callback to use IPC to send messages to and handle responses from the Main process:</p> <ul> <li>when the "Toggle Dark Mode" button is clicked, we send the <code>dark-mode:toggle</code> message (event) to tell the Main process to trigger a theme change, and update the "Current Theme Source" label in the UI based on the response from the Main process.</li> <li>when the "Reset to System Theme" button is clicked, we send the <code>dark-mode:system</code> message (event) to tell the Main process to use the system color scheme, and update the "Current Theme Source" label to <code>System</code>.</li> </ul> <p>To add listeners and handlers, add the following lines to the <code>renderer.js</code> file:</p> <pre data-language="js">const { ipcRenderer } = require('electron')

document.getElementById('toggle-dark-mode').addEventListener('click', async () =&gt; {
  const isDarkMode = await ipcRenderer.invoke('dark-mode:toggle')
  document.getElementById('theme-source').innerHTML = isDarkMode ? 'Dark' : 'Light'
})

document.getElementById('reset-to-system').addEventListener('click', async () =&gt; {
  await ipcRenderer.invoke('dark-mode:system')
  document.getElementById('theme-source').innerHTML = 'System'
})
</pre> <p>If you run your code at this point, you'll see that your buttons don't do anything just yet, and your Main process will output an error like this when you click on your buttons: <code>Error occurred in handler for 'dark-mode:toggle': No handler registered for 'dark-mode:toggle'</code> This is expected — we haven't actually touched any <code>nativeTheme</code> code yet.</p> <p>Now that we're done wiring the IPC from the Renderer's side, the next step is to update the <code>main.js</code> file to handle events from the Renderer process.</p> <p>Depending on the received event, we update the <a href="../api/native-theme#nativethemethemesource"><code>nativeTheme.themeSource</code></a> property to apply the desired theme on the system's native UI elements (e.g. context menus) and propagate the preferred color scheme to the Renderer process:</p> <ul> <li>Upon receiving <code>dark-mode:toggle</code>, we check if the dark theme is currently active using the <code>nativeTheme.shouldUseDarkColors</code> property, and set the <code>themeSource</code> to the opposite theme.</li> <li>Upon receiving <code>dark-mode:system</code>, we reset the <code>themeSource</code> to <code>system</code>.</li> </ul> <pre data-language="js">const { app, BrowserWindow, ipcMain, nativeTheme } = require('electron')

function createWindow () {
  const win = new BrowserWindow({
    width: 800,
    height: 600,
    webPreferences: {
      nodeIntegration: true
    }
  })

  win.loadFile('index.html')

  ipcMain.handle('dark-mode:toggle', () =&gt; {
    if (nativeTheme.shouldUseDarkColors) {
      nativeTheme.themeSource = 'light'
    } else {
      nativeTheme.themeSource = 'dark'
    }
    return nativeTheme.shouldUseDarkColors
  })

  ipcMain.handle('dark-mode:system', () =&gt; {
    nativeTheme.themeSouce = 'system'
  })
}

app.whenReady().then(createWindow)

app.on('window-all-closed', () =&gt; {
  if (process.platform !== 'darwin') {
    app.quit()
  }
})

app.on('activate', () =&gt; {
  if (BrowserWindow.getAllWindows().length === 0) {
    createWindow()
  }
})
</pre> <p>The final step is to add a bit of styling to enable dark mode for the web parts of the UI by leveraging the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme"><code>prefers-color-scheme</code></a> CSS attribute. The value of <code>prefers-color-scheme</code> will follow your <code>nativeTheme.themeSource</code> setting.</p> <p>Create a <code>styles.css</code> file and add the following lines:</p> <pre data-language="css">@media (prefers-color-scheme: dark) {
  body { background:  #333; color: white; }
}

@media (prefers-color-scheme: light) {
  body { background:  #ddd; color: black; }
}
</pre> <p>After launching the Electron application, you can change modes or reset the theme to system default by clicking corresponding buttons:</p> <p><img src="https://cdn.rawgit.com/electron/electron/e1cc78f275054034a063422bbb1f53daf1c552ed//docs/images/dark_mode.gif" alt="Dark Mode"></p>
<div class="_attribution">
  <p class="_attribution-p">
    © GitHub Inc.<br>Licensed under the MIT license.<br>
    <a href="https://www.electronjs.org/docs/tutorial/dark-mode" class="_attribution-link">https://www.electronjs.org/docs/tutorial/dark-mode</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
