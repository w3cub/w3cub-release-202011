
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Cache - Webpack 5 - W3cubDocs</title>
  
  <meta name="description" content=" boolean object ">
  <meta name="keywords" content="cache, webpack, webpack~5">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/webpack~5/configuration/cache.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/webpack~5.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/webpack~5/" class="_nav-link" title="" style="margin-left:0;">webpack 5</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _webpack">
				
				
<h1>Cache</h1>
<div id="md-content">
<h2>
cache
</h2>
<p><code>boolean</code> <code>object</code></p>
<p>Cache the generated webpack modules and chunks to improve build speed. <code>cache</code> is set to <code>type: 'memory'</code> in <a href="mode#mode-development"><code>development</code> mode</a> and disabled in <a href="mode#mode-production"><code>production</code> mode</a>. <code>cache: true</code> is an alias to <code>cache: { type: 'memory' }</code>. To disable caching pass <code>false</code>:</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //...
  cache: false,
};</pre>
<p>While setting <code>cache.type</code> to <code>'filesystem'</code> opens up more options for configuration.</p>
<h3>
cache.allowCollectingMemory
</h3>
<p>Collect unused memory allocated during deserialization, only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>. This requires copying data into smaller buffers and has a performance cost.</p>
<ul>
<li>Type: <code>boolean</code><ul><li>It defaults to <code>false</code> in production mode and <code>true</code> in development mode.</li></ul>
</li>
<li><span class="badge">5.35.0+</span></li>
</ul>
<p><strong>webpack.config.js</strong></p>
<pre data-language="js">module.exports = {
  cache: {
    type: 'filesystem',
    allowCollectingMemory: true,
  },
};</pre>
<h3>
cache.buildDependencies
</h3>
<p><code>object</code></p>
<p><code>cache.buildDependencies</code> is an object of arrays of additional code dependencies for the build. Webpack will use a hash of each of these items and all dependencies to invalidate the filesystem cache.</p>
<p>Defaults to <code>webpack/lib</code> to get all dependencies of webpack.</p>
<aside class="tip"><h6 class="tip__prefix">tip</h6>
<p>It's recommended to set <code>cache.buildDependencies.config: [__filename]</code> in your webpack configuration to get the latest configuration and all dependencies.</p></aside><p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  cache: {
    buildDependencies: {
      // This makes all dependencies of this file - build dependencies
      config: [__filename],
      // By default webpack and loaders are build dependencies
    },
  },
};</pre>
<h3>
cache.cacheDirectory
</h3>
<p><code>string</code></p>
<p>Base directory for the cache. Defaults to <code>node_modules/.cache/webpack</code>.</p>
<p><code>cache.cacheDirectory</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">const path = require('path');

module.exports = {
  //...
  cache: {
    type: 'filesystem',
    cacheDirectory: path.resolve(__dirname, '.temp_cache'),
  },
};</pre>
<aside class="warning"><h6 class="warning__prefix">warning</h6>
<p>The final location of the cache is a combination of <code>cache.cacheDirectory</code> + <code>cache.name</code>.</p></aside><h3>
cache.cacheLocation
</h3>
<p><code>string</code></p>
<p>Locations for the cache. Defaults to <code>path.resolve(cache.cacheDirectory, cache.name)</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">const path = require('path');

module.exports = {
  //...
  cache: {
    type: 'filesystem',
    cacheLocation: path.resolve(__dirname, '.test_cache'),
  },
};</pre>
<h3>
cache.cacheUnaffected
</h3>
<p>Cache computation of modules which are unchanged and reference only unchanged modules. It can only be used along with <a href="#cachetype"><code>cache.type</code></a> of <code>'memory'</code>, besides, <a href="experiments#experimentscacheunaffected"><code>experiments.cacheUnaffected</code></a> must be enabled to use it.</p>
<ul>
<li>Type: <code>boolean</code>
</li>
<li>v5.54.0+</li>
</ul>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //...
  cache: {
    type: 'memory',
    cacheUnaffected: true,
  },
};</pre>
<h3>
cache.compression
</h3>
<p><code>false | 'gzip' | 'brotli'</code></p>
<span class="badge">5.42.0+</span><p>Compression type used for the cache files. By default it is <code>false</code>.</p>
<p><code>cache.compression</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //...
  cache: {
    type: 'filesystem',
    compression: 'gzip',
  },
};</pre>
<h3>
cache.hashAlgorithm
</h3>
<p><code>string</code></p>
<p>Algorithm used the hash generation. See <a href="https://nodejs.org/api/crypto.html">Node.js crypto</a> for more details. Defaults to <code>md4</code>.</p>
<p><code>cache.hashAlgorithm</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //...
  cache: {
    type: 'filesystem',
    hashAlgorithm: 'md4',
  },
};</pre>
<h3>
cache.idleTimeout
</h3>
<p><code>number = 60000</code></p>
<p>Time in milliseconds. <code>cache.idleTimeout</code> denotes the time period after which the cache storing should happen.</p>
<p><code>cache.idleTimeout</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //..
  cache: {
    type: 'filesystem',
    idleTimeout: 60000,
  },
};</pre>
<h3>
cache.idleTimeoutAfterLargeChanges
</h3>
<p><code>number = 1000</code></p>
<span class="badge">5.41.0+</span><p>Time in milliseconds. <code>cache.idleTimeoutAfterLargeChanges</code> is the time period after which the cache storing should happen when larger changes have been detected.</p>
<p><code>cache.idleTimeoutAfterLargeChanges</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //..
  cache: {
    type: 'filesystem',
    idleTimeoutAfterLargeChanges: 1000,
  },
};</pre>
<h3>
cache.idleTimeoutForInitialStore
</h3>
<p><code>number = 5000</code></p>
<p>Time in milliseconds. <code>cache.idleTimeoutForInitialStore</code> is the time period after which the initial cache storing should happen.</p>
<p><code>cache.idleTimeoutForInitialStore</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //..
  cache: {
    type: 'filesystem',
    idleTimeoutForInitialStore: 0,
  },
};</pre>
<h3>
cache.managedPaths
</h3>
<p><code>[string] = ['./node_modules']</code></p>
<aside class="warning"><h6 class="warning__prefix">warning</h6>
<p>Moved to <a href="other-options#managedpaths">snapshot.managedPaths</a></p></aside><p><code>cache.managedPaths</code> is an array of package-manager only managed paths. Webpack will avoid hashing and timestamping them, assume the version is unique and will use it as a snapshot (for both memory and filesystem cache).</p>
<h3>
cache.maxAge
</h3>
<p><code>number = 5184000000</code></p>
<span class="badge">5.30.0+</span><p>The amount of time in milliseconds that unused cache entries are allowed to stay in the filesystem cache; defaults to one month.</p>
<p><code>cache.maxAge</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  // ...
  cache: {
    type: 'filesystem',
    maxAge: 5184000000,
  },
};</pre>
<h3>
cache.maxGenerations
</h3>
<p><code>number</code></p>
<span class="badge">5.30.0+</span><p>Define the lifespan of unused cache entries in the memory cache.</p>
<ul>
<li><p><code>cache.maxGenerations: 1</code>: Cache entries are removed after being unused for a single compilation.</p></li>
<li><p><code>cache.maxGenerations: Infinity</code>: Cache entries are kept forever.</p></li>
</ul>
<p><code>cache.maxGenerations</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'memory'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  // ...
  cache: {
    type: 'memory',
    maxGenerations: Infinity,
  },
};</pre>
<h3>
cache.maxMemoryGenerations
</h3>
<p><code>number</code></p>
<span class="badge">5.30.0+</span><p>Define the lifespan of unused cache entries in the memory cache.</p>
<ul>
<li><p><code>cache.maxMemoryGenerations: 0</code>: Persistent cache will not use an additional memory cache. It will only cache items in memory until they are serialized to disk. Once serialized the next read will deserialize them from the disk again. This mode will minimize memory usage but introduce a performance cost.</p></li>
<li><p><code>cache.maxMemoryGenerations: 1</code>: This will purge items from the memory cache once they are serialized and unused for at least one compilation. When they are used again they will be deserialized from the disk. This mode will minimize memory usage while still keeping active items in the memory cache.</p></li>
<li><p><code>cache.maxMemoryGenerations</code>: small numbers &gt; 0 will have a performance cost for the GC operation. It gets lower as the number increases.</p></li>
<li><p><code>cache.maxMemoryGenerations</code>: defaults to 10 in <code>development</code> mode and to <code>Infinity</code> in <code>production</code> mode.</p></li>
</ul>
<p><code>cache.maxMemoryGenerations</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  // ...
  cache: {
    type: 'filesystem',
    maxMemoryGenerations: Infinity,
  },
};</pre>
<h3>
cache.memoryCacheUnaffected
</h3>
<p>Cache computation of modules which are unchanged and reference only unchanged modules in memory. It can only be used along with <a href="#cachetype"><code>cache.type</code></a> of <code>'filesystem'</code>, besides, <a href="experiments#experimentscacheunaffected"><code>experiments.cacheUnaffected</code></a> must be enabled to use it.</p>
<ul>
<li>Type: <code>boolean</code>
</li>
<li>v5.54.0+</li>
</ul>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //...
  cache: {
    type: 'filesystem',
    memoryCacheUnaffected: true,
  },
};</pre>
<h3>
cache.name
</h3>
<p><code>string</code></p>
<p>Name for the cache. Different names will lead to different coexisting caches. Defaults to <code>${config.name}-${config.mode}</code>. Using <code>cache.name</code> makes sense when you have multiple configurations which should have independent caches.</p>
<p><code>cache.name</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //...
  cache: {
    type: 'filesystem',
    name: 'AppBuildCache',
  },
};</pre>
<h3>
cache.profile
</h3>
<p><code>boolean = false</code></p>
<p>Track and log detailed timing information for individual cache items of type <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //...
  cache: {
    type: 'filesystem',
    profile: true,
  },
};</pre>
<h3>
cache.readonly
</h3>
<p><code>boolean</code> <span class="badge">5.85.0</span></p>
<p>Prevent webpack from storing cache into file system. Only available when <code>cache.type === "filesystem"</code> and <code>cache.store === 'pack'</code>.</p>
<pre data-language="js">module.exports = {
  //...
  cache: {
    type: 'filesystem',
    store: 'pack',
    readonly: true,
  },
};</pre>
<h3>
cache.store
</h3>
<p><code>string = 'pack': 'pack'</code></p>
<p><code>cache.store</code> tells webpack when to store data on the file system.</p>
<ul><li>
<code>'pack'</code>: Store data when compiler is idle in a single file for all cached items</li></ul>
<p><code>cache.store</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<aside class="warning"><h6 class="warning__prefix">warning</h6>
<p><code>pack</code> is the only supported mode since webpack 5.0.x</p></aside><p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //...
  cache: {
    type: 'filesystem',
    store: 'pack',
  },
};</pre>
<h3>
cache.type
</h3>
<p><code>string: 'memory' | 'filesystem'</code></p>
<p>Sets the <code>cache</code> type to either in memory or on the file system. The <code>memory</code> option is straightforward, it tells webpack to store cache in memory and doesn't allow additional configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //...
  cache: {
    type: 'memory',
  },
};</pre>
<h3>
cache.version
</h3>
<p><code>string = ''</code></p>
<p>Version of the cache data. Different versions won't allow to reuse the cache and override existing content. Update the version when configuration changed in a way which doesn't allow to reuse cache. This will invalidate the cache.</p>
<p><code>cache.version</code> option is only available when <a href="#cachetype"><code>cache.type</code></a> is set to <code>'filesystem'</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre data-language="javascript">module.exports = {
  //...
  cache: {
    type: 'filesystem',
    version: 'your_version',
  },
};</pre>
<aside class="warning"><h6 class="warning__prefix">warning</h6>
<p>Don't share the cache between calls with different options.</p></aside><h2>
Setup cache in CI/CD system
</h2>
<p>Filesystem cache allows to share cache between builds in CI. To setup cache:</p>
<ul>
<li>CI should have an option to share cache between builds.</li>
<li>CI should run job in the same absolute path. This is important since webpack cache files store absolute paths.</li>
</ul>
<h3>
GitLab CI/CD
</h3>
<p>Common config could looks like</p>
<pre data-language="yaml">variables:
  # fallback to use "main" branch cache, requires GitLab Runner 13.4
  CACHE_FALLBACK_KEY: main

# this is webpack build job
build-job:
  cache:
    key: '$CI_COMMIT_REF_SLUG' # branch/tag name
    paths:
      # cache directory
      # make sure that you don't run "npm ci" in this job or change default cache directory
      # otherwise "npm ci" will prune cache files
      - node_modules/.cache/webpack/</pre>
<h3>
Github actions
</h3>
<pre data-language="yaml">- uses: actions/cache@v3
  with:
    # cache directory
    path: node_modules/.cache/webpack/
    key: ${{ GITHUB_REF_NAME }}-webpack-build
    # fallback to use "main" branch cache
    restore-keys: |
      main-webpack-build</pre>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    © JS Foundation and other contributors<br>Licensed under the Creative Commons Attribution License 4.0.<br>
    <a href="https://webpack.js.org/configuration/cache" class="_attribution-link">https://webpack.js.org/configuration/cache</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
