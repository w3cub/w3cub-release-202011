
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>GtkIMContext - GTK 4.0 - W3cubDocs</title>
  
  <meta name="description" content=" GtkIMContext — Base class for input method contexts ">
  <meta name="keywords" content="gtkimcontext, gtk, gtk~4.0">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/gtk~4.0/gtkimcontext.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c7076d7cdaddc6969cb97911f9b488459d4bebca88d6f2525f2a12432f0bec8426c751ccfbc34920dda3867e50ab24698396bc4e548e788fc826f69a158d6856.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/gtk~4.0.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/gtk~4.0/" class="_nav-link" title="" style="margin-left:0;">GTK 4.0</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _gtk">
				
				
<h1>GtkIMContext</h1>
<div class="refentry">  <div class="refnamediv"><p>GtkIMContext — Base class for input method contexts</p></div> <div class="refsect1"> <h2 id="GtkIMContext.functions">Functions</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-get-preedit-string">gtk_im_context_get_preedit_string</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">gboolean</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-filter-keypress">gtk_im_context_filter_keypress</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">gboolean</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-filter-key">gtk_im_context_filter_key</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-focus-in">gtk_im_context_focus_in</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-focus-out">gtk_im_context_focus_out</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-reset">gtk_im_context_reset</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-set-client-widget">gtk_im_context_set_client_widget</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-set-cursor-location">gtk_im_context_set_cursor_location</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-set-use-preedit">gtk_im_context_set_use_preedit</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">void</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-set-surrounding">gtk_im_context_set_surrounding</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">gboolean</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-get-surrounding">gtk_im_context_get_surrounding</a> <span class="c_punctuation">()</span> </td> </tr> <tr> <td class="function_type"> <span class="returnvalue">gboolean</span> </td> <td class="function_name"> <a href="gtkimcontext#gtk-im-context-delete-surrounding">gtk_im_context_delete_surrounding</a> <span class="c_punctuation">()</span> </td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkIMContext.properties">Properties</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="property_type"><a href="gtkentry#GtkInputHints"><span class="type">GtkInputHints</span></a></td> <td class="property_name"><a href="gtkimcontext#GtkIMContext--input-hints">input-hints</a></td> <td class="property_flags">Read / Write</td> </tr> <tr> <td class="property_type"><a href="gtkentry#GtkInputPurpose"><span class="type">GtkInputPurpose</span></a></td> <td class="property_name"><a href="gtkimcontext#GtkIMContext--input-purpose">input-purpose</a></td> <td class="property_flags">Read / Write</td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkIMContext.signals">Signals</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="signal_type"><span class="returnvalue">void</span></td> <td class="signal_name"><a href="gtkimcontext#GtkIMContext-commit">commit</a></td> <td class="signal_flags">Run Last</td> </tr> <tr> <td class="signal_type"><span class="returnvalue">gboolean</span></td> <td class="signal_name"><a href="gtkimcontext#GtkIMContext-delete-surrounding">delete-surrounding</a></td> <td class="signal_flags">Run Last</td> </tr> <tr> <td class="signal_type"><span class="returnvalue">void</span></td> <td class="signal_name"><a href="gtkimcontext#GtkIMContext-preedit-changed">preedit-changed</a></td> <td class="signal_flags">Run Last</td> </tr> <tr> <td class="signal_type"><span class="returnvalue">void</span></td> <td class="signal_name"><a href="gtkimcontext#GtkIMContext-preedit-end">preedit-end</a></td> <td class="signal_flags">Run Last</td> </tr> <tr> <td class="signal_type"><span class="returnvalue">void</span></td> <td class="signal_name"><a href="gtkimcontext#GtkIMContext-preedit-start">preedit-start</a></td> <td class="signal_flags">Run Last</td> </tr> <tr> <td class="signal_type"><span class="returnvalue">gboolean</span></td> <td class="signal_name"><a href="gtkimcontext#GtkIMContext-retrieve-surrounding">retrieve-surrounding</a></td> <td class="signal_flags">Run Last</td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkIMContext.other">Types and Values</h2> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="datatype_keyword">struct</td> <td class="function_name"><a href="gtkimcontext#GtkIMContext-struct">GtkIMContext</a></td> </tr> <tr> <td class="datatype_keyword">struct</td> <td class="function_name"><a href="gtkimcontext#GtkIMContextClass">GtkIMContextClass</a></td> </tr> </tbody> </table></div> </div> <div class="refsect1"> <h2 id="GtkIMContext.object-hierarchy">Object Hierarchy</h2> <pre class="screen">    GObject
    <span class="lineart">╰──</span> GtkIMContext
        <span class="lineart">├──</span> <a href="gtkimcontextsimple#GtkIMContextSimple-struct">GtkIMContextSimple</a>
        <span class="lineart">╰──</span> <a href="gtkimmulticontext#GtkIMMulticontext-struct">GtkIMMulticontext</a>
</pre> </div> <div class="refsect1"> <h2 id="GtkIMContext.includes">Includes</h2> <pre class="synopsis" data-language="c">#include &lt;gtk/gtk.h&gt;
#include &lt;gtk/gtkimmodule.h&gt;
</pre> </div> <div class="refsect1"> <h2 id="GtkIMContext.description">Description</h2> <p><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> defines the interface for GTK input methods. An input method is used by GTK text input widgets like <a href="gtkentry#GtkEntry-struct"><span class="type">GtkEntry</span></a> to map from key events to Unicode character strings.</p> <p>The default input method can be set programmatically via the <a href="gtksettings#GtkSettings--gtk-im-module"><span class="type">“gtk-im-module”</span></a> GtkSettings property. Alternatively, you may set the GTK_IM_MODULE environment variable as documented in Running GTK Applications.</p> <p>The <a href="gtkentry#GtkEntry-struct"><span class="type">GtkEntry</span></a> <a href="gtkentry#GtkEntry--im-module"><span class="type">“im-module”</span></a> and <a href="gtktextview#GtkTextView-struct"><span class="type">GtkTextView</span></a> <a href="gtktextview#GtkTextView--im-module"><span class="type">“im-module”</span></a> properties may also be used to set input methods for specific widget instances. For instance, a certain entry widget might be expected to contain certain characters which would be easier to input with a certain input method.</p> <p>An input method may consume multiple key events in sequence and finally output the composed result. This is called preediting, and an input method may provide feedback about this process by displaying the intermediate composition states as preedit text. For instance, the default GTK input method implements the input of arbitrary Unicode code points by holding down the Control and Shift keys and then typing “U” followed by the hexadecimal digits of the code point. When releasing the Control and Shift keys, preediting ends and the character is inserted as text. Ctrl+Shift+u20AC for example results in the € sign.</p> <p>Additional input methods can be made available for use by GTK widgets as loadable modules. An input method module is a small shared library which implements a subclass of <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> or <a href="gtkimcontextsimple#GtkIMContextSimple-struct"><span class="type">GtkIMContextSimple</span></a> and exports these four functions:</p>  <p> This function should register the <span class="type">GType</span> of the <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> subclass which implements the input method by means of <code class="function">g_type_module_register_type()</code>. Note that <code class="function">g_type_register_static()</code> cannot be used as the type needs to be registered dynamically.</p>  <p> Here goes any cleanup code your input method might require on module unload.</p>  <p> This function returns the list of input methods provided by the module. The example implementation above shows a common solution and simply returns a pointer to statically defined array of <span class="type">GtkIMContextInfo</span> items for each provided input method.</p> <div class="informalexample"> <td class="listing_code"><pre class="programlisting" data-language="c">void im_module_init(GTypeModule *module);</pre></td> </div> <p> This function should return a pointer to a newly created instance of the <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> subclass identified by <em class="parameter"><code>context_id</code></em> . The context ID is the same as specified in the <span class="type">GtkIMContextInfo</span> array returned by <code class="function">im_module_list()</code>.</p> <p>After a new loadable input method module has been installed on the system, the configuration file <code class="literal">gtk.immodules</code> needs to be regenerated by gtk-query-immodules-3.0, in order for the new input method to become available to GTK applications.</p> </div> <div class="refsect1"> <h2 id="GtkIMContext.functions_details">Functions</h2> <div class="refsect2"> <h3 id="gtk-im-context-get-preedit-string">gtk_im_context_get_preedit_string ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_im_context_get_preedit_string (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>,
                                   <em class="parameter"><code><span class="type">char</span> **str</code></em>,
                                   <em class="parameter"><code><a href="https://developer.gnome.org/pango/stable/pango-Text-Attributes.html#PangoAttrList-struct"><span class="type">PangoAttrList</span></a> **attrs</code></em>,
                                   <em class="parameter"><code><span class="type">int</span> *cursor_pos</code></em>);</pre> <p>Retrieve the current preedit string for the input context, and a list of attributes to apply to the string. This string should be displayed inserted at the insertion point.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>str</p></td> <td class="parameter_description"><p>location to store the retrieved string. The string retrieved must be freed with <code class="function">g_free()</code>. </p></td> <td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></td> </tr> <tr> <td class="parameter_name"><p>attrs</p></td> <td class="parameter_description"><p>location to store the retrieved attribute list. When you are done with this list, you must unreference it with <a href="https://developer.gnome.org/pango/stable/pango-Text-Attributes.html#pango-attr-list-unref"><code class="function">pango_attr_list_unref()</code></a>. </p></td> <td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></td> </tr> <tr> <td class="parameter_name"><p>cursor_pos</p></td> <td class="parameter_description"><p>location to store position of cursor (in characters) within the preedit string. </p></td> <td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td> </tr> </tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-filter-keypress">gtk_im_context_filter_keypress ()</h3> <pre class="programlisting"><span class="returnvalue">gboolean</span>
gtk_im_context_filter_keypress (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>,
                                <em class="parameter"><code><a href="https://developer.gnome.org/gtk4/html/gdk4-Events.html#GdkEvent-struct"><span class="type">GdkEvent</span></a> *event</code></em>);</pre> <p>Allow an input method to internally handle key press and release events. If this function returns <code class="literal">TRUE</code>, then no further processing should be done for this key event.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>event</p></td> <td class="parameter_description"><p>the key event</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p> <code class="literal">TRUE</code> if the input method handled the key event.</p> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-filter-key">gtk_im_context_filter_key ()</h3> <pre class="programlisting"><span class="returnvalue">gboolean</span>
gtk_im_context_filter_key (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>,
                           <em class="parameter"><code><span class="type">gboolean</span> press</code></em>,
                           <em class="parameter"><code><a href="https://developer.gnome.org/gtk4/html/GdkSurface.html#GdkSurface-struct"><span class="type">GdkSurface</span></a> *surface</code></em>,
                           <em class="parameter"><code><a href="https://developer.gnome.org/gtk4/html/GdkDevice.html#GdkDevice-struct"><span class="type">GdkDevice</span></a> *device</code></em>,
                           <em class="parameter"><code><span class="type">guint32</span> time</code></em>,
                           <em class="parameter"><code><span class="type">guint</span> keycode</code></em>,
                           <em class="parameter"><code><a href="https://developer.gnome.org/gtk4/html/GdkSurface.html#GdkModifierType"><span class="type">GdkModifierType</span></a> state</code></em>,
                           <em class="parameter"><code><span class="type">int</span> group</code></em>);</pre> <p>Allow an input method to forward key press and release events to another input method, without necessarily having a GdkEvent available.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>press</p></td> <td class="parameter_description"><p>whether to forward a key press or release event</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>surface</p></td> <td class="parameter_description"><p>the surface the event is for</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>device</p></td> <td class="parameter_description"><p>the device that the event is for</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>time</p></td> <td class="parameter_description"><p>the timestamp for the event</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>keycode</p></td> <td class="parameter_description"><p>the keycode for the event</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>state</p></td> <td class="parameter_description"><p>modifier state for the event</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>group</p></td> <td class="parameter_description"><p>the active keyboard group for the event</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p> <code class="literal">TRUE</code> if the input method handled the key event.</p> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-focus-in">gtk_im_context_focus_in ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_im_context_focus_in (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>);</pre> <p>Notify the input method that the widget to which this input context corresponds has gained focus. The input method may, for example, change the displayed feedback to reflect this change.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr></tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-focus-out">gtk_im_context_focus_out ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_im_context_focus_out (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>);</pre> <p>Notify the input method that the widget to which this input context corresponds has lost focus. The input method may, for example, change the displayed feedback or reset the contexts state to reflect this change.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr></tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-reset">gtk_im_context_reset ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_im_context_reset (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>);</pre> <p>Notify the input method that a change such as a change in cursor position has been made. This will typically cause the input method to clear the preedit state.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody><tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr></tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-set-client-widget">gtk_im_context_set_client_widget ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_im_context_set_client_widget (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>,
                                  <em class="parameter"><code><a href="gtkwidget#GtkWidget-struct"><span class="type">GtkWidget</span></a> *widget</code></em>);</pre> <p>Set the client window for the input context; this is the <a href="gtkwidget#GtkWidget-struct"><span class="type">GtkWidget</span></a> holding the input focus. This widget is used in order to correctly position status windows, and may also be used for purposes internal to the input method.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>widget</p></td> <td class="parameter_description"><p>the client widget. This may be <code class="literal">NULL</code> to indicate that the previous client widget no longer exists. </p></td> <td class="parameter_annotations"><span class="annotation">[<acronym title="NULL is OK, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span></td> </tr> </tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-set-cursor-location">gtk_im_context_set_cursor_location ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_im_context_set_cursor_location (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>,
                                    <em class="parameter"><code>const <a href="https://developer.gnome.org/gtk4/html/gdk4-Rectangles-and-Regions.html#GdkRectangle-struct"><span class="type">GdkRectangle</span></a> *area</code></em>);</pre> <p>Notify the input method that a change in cursor position has been made. The location is relative to the client window.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>area</p></td> <td class="parameter_description"><p>new location</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-set-use-preedit">gtk_im_context_set_use_preedit ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_im_context_set_use_preedit (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>,
                                <em class="parameter"><code><span class="type">gboolean</span> use_preedit</code></em>);</pre> <p>Sets whether the IM context should use the preedit string to display feedback. If <em class="parameter"><code>use_preedit</code></em> is FALSE (default is TRUE), then the IM context may use some other method to display feedback, such as displaying it in a child of the root window.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>use_preedit</p></td> <td class="parameter_description"><p>whether the IM context should use the preedit string.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-set-surrounding">gtk_im_context_set_surrounding ()</h3> <pre class="programlisting"><span class="returnvalue">void</span>
gtk_im_context_set_surrounding (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>,
                                <em class="parameter"><code>const <span class="type">char</span> *text</code></em>,
                                <em class="parameter"><code><span class="type">int</span> len</code></em>,
                                <em class="parameter"><code><span class="type">int</span> cursor_index</code></em>);</pre> <p>Sets surrounding context around the insertion point and preedit string. This function is expected to be called in response to the GtkIMContext::retrieve_surrounding signal, and will likely have no effect if called at other times.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> </p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>text</p></td> <td class="parameter_description"><p>text surrounding the insertion point, as UTF-8. the preedit string should not be included within <em class="parameter"><code>text</code></em> .</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>len</p></td> <td class="parameter_description"><p>the length of <em class="parameter"><code>text</code></em> , or -1 if <em class="parameter"><code>text</code></em> is nul-terminated</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>cursor_index</p></td> <td class="parameter_description"><p>the byte index of the insertion cursor within <em class="parameter"><code>text</code></em> .</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-get-surrounding">gtk_im_context_get_surrounding ()</h3> <pre class="programlisting"><span class="returnvalue">gboolean</span>
gtk_im_context_get_surrounding (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>,
                                <em class="parameter"><code><span class="type">char</span> **text</code></em>,
                                <em class="parameter"><code><span class="type">int</span> *cursor_index</code></em>);</pre> <p>Retrieves context around the insertion point. Input methods typically want context in order to constrain input text based on existing text; this is important for languages such as Thai where only some sequences of characters are allowed.</p> <p>This function is implemented by emitting the GtkIMContext::retrieve_surrounding signal on the input method; in response to this signal, a widget should provide as much context as is available, up to an entire paragraph, by calling <a href="gtkimcontext#gtk-im-context-set-surrounding"><code class="function">gtk_im_context_set_surrounding()</code></a>. Note that there is no obligation for a widget to respond to the ::retrieve_surrounding signal, so input methods must be prepared to function without context.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>text</p></td> <td class="parameter_description"><p>location to store a UTF-8 encoded string of text holding context around the insertion point. If the function returns <code class="literal">TRUE</code>, then you must free the result stored in this location with <code class="function">g_free()</code>. </p></td> <td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>][<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>]</span></td> </tr> <tr> <td class="parameter_name"><p>cursor_index</p></td> <td class="parameter_description"><p>location to store byte index of the insertion cursor within <em class="parameter"><code>text</code></em> . </p></td> <td class="parameter_annotations"><span class="annotation">[<acronym title="Parameter for returning results. Default is transfer full."><span class="acronym">out</span></acronym>]</span></td> </tr> </tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p> <code class="literal">TRUE</code> if surrounding text was provided; in this case you must free the result stored in *text.</p> </div> </div>  <div class="refsect2"> <h3 id="gtk-im-context-delete-surrounding">gtk_im_context_delete_surrounding ()</h3> <pre class="programlisting"><span class="returnvalue">gboolean</span>
gtk_im_context_delete_surrounding (<em class="parameter"><code><a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context</code></em>,
                                   <em class="parameter"><code><span class="type">int</span> offset</code></em>,
                                   <em class="parameter"><code><span class="type">int</span> n_chars</code></em>);</pre> <p>Asks the widget that the input context is attached to delete characters around the cursor position by emitting the GtkIMContext::delete_surrounding signal. Note that <em class="parameter"><code>offset</code></em> and <em class="parameter"><code>n_chars</code></em> are in characters not in bytes which differs from the usage other places in <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a>.</p> <p>In order to use this function, you should first call <a href="gtkimcontext#gtk-im-context-get-surrounding"><code class="function">gtk_im_context_get_surrounding()</code></a> to get the current context, and call this function immediately afterwards to make sure that you know what you are deleting. You should also account for the fact that even if the signal was handled, the input context might not have deleted all the characters that were requested to be deleted.</p> <p>This function is used by an input method that wants to make subsitutions in the existing text in response to new input. It is not useful for applications.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>a <a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a></p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>offset</p></td> <td class="parameter_description"><p>offset from cursor position in chars; a negative value means start before the cursor.</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>n_chars</p></td> <td class="parameter_description"><p>number of characters to delete.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p> <code class="literal">TRUE</code> if the signal was handled.</p> </div> </div> </div> <div class="refsect1"> <h2 id="GtkIMContext.other_details">Types and Values</h2> <div class="refsect2"> <h3 id="GtkIMContext-struct">struct GtkIMContext</h3> <pre class="programlisting" data-language="c">struct GtkIMContext;</pre> </div>  <div class="refsect2"> <h3 id="GtkIMContextClass">struct GtkIMContextClass</h3> <pre class="programlisting" data-language="c">struct GtkIMContextClass {
  /* Signals */
  void     (*preedit_start)        (GtkIMContext *context);
  void     (*preedit_end)          (GtkIMContext *context);
  void     (*preedit_changed)      (GtkIMContext *context);
  void     (*commit)               (GtkIMContext *context, const char *str);
  gboolean (*retrieve_surrounding) (GtkIMContext *context);
  gboolean (*delete_surrounding)   (GtkIMContext *context,
				    int           offset,
				    int           n_chars);

  /* Virtual functions */
  void     (*set_client_widget)   (GtkIMContext   *context,
				   GtkWidget      *widget);
  void     (*get_preedit_string)  (GtkIMContext   *context,
				   char          **str,
				   PangoAttrList **attrs,
				   int            *cursor_pos);
  gboolean (*filter_keypress)     (GtkIMContext   *context,
			           GdkEvent       *event);
  void     (*focus_in)            (GtkIMContext   *context);
  void     (*focus_out)           (GtkIMContext   *context);
  void     (*reset)               (GtkIMContext   *context);
  void     (*set_cursor_location) (GtkIMContext   *context,
				   GdkRectangle   *area);
  void     (*set_use_preedit)     (GtkIMContext   *context,
				   gboolean        use_preedit);
  void     (*set_surrounding)     (GtkIMContext   *context,
				   const char     *text,
				   int             len,
				   int             cursor_index);
  gboolean (*get_surrounding)     (GtkIMContext   *context,
				   char          **text,
				   int            *cursor_index);
};
</pre> <div class="refsect3"> <h4>Members</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="struct_member_name" id="GtkIMContextClass.preedit-start"><p><em class="structfield"><code>preedit_start</code></em> ()</p></td> <td class="struct_member_description"><p>Default handler of the <a href="gtkimcontext#GtkIMContext-preedit-start"><span class="type">“preedit-start”</span></a> signal.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.preedit-end"><p><em class="structfield"><code>preedit_end</code></em> ()</p></td> <td class="struct_member_description"><p>Default handler of the <a href="gtkimcontext#GtkIMContext-preedit-end"><span class="type">“preedit-end”</span></a> signal.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.preedit-changed"><p><em class="structfield"><code>preedit_changed</code></em> ()</p></td> <td class="struct_member_description"><p>Default handler of the <a href="gtkimcontext#GtkIMContext-preedit-changed"><span class="type">“preedit-changed”</span></a> signal.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.commit"><p><em class="structfield"><code>commit</code></em> ()</p></td> <td class="struct_member_description"><p>Default handler of the <a href="gtkimcontext#GtkIMContext-commit"><span class="type">“commit”</span></a> signal.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.retrieve-surrounding"><p><em class="structfield"><code>retrieve_surrounding</code></em> ()</p></td> <td class="struct_member_description"><p>Default handler of the <a href="gtkimcontext#GtkIMContext-retrieve-surrounding"><span class="type">“retrieve-surrounding”</span></a> signal.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.delete-surrounding"><p><em class="structfield"><code>delete_surrounding</code></em> ()</p></td> <td class="struct_member_description"><p>Default handler of the <a href="gtkimcontext#GtkIMContext-delete-surrounding"><span class="type">“delete-surrounding”</span></a> signal.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.set-client-widget"><p><em class="structfield"><code>set_client_widget</code></em> ()</p></td> <td class="struct_member_description"><p>Called via <a href="gtkimcontext#gtk-im-context-set-client-widget"><code class="function">gtk_im_context_set_client_widget()</code></a> when the input window where the entered text will appear changes. Override this to keep track of the current input window, for instance for the purpose of positioning a status display of your input method.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.get-preedit-string"><p><em class="structfield"><code>get_preedit_string</code></em> ()</p></td> <td class="struct_member_description"><p>Called via <a href="gtkimcontext#gtk-im-context-get-preedit-string"><code class="function">gtk_im_context_get_preedit_string()</code></a> to retrieve the text currently being preedited for display at the cursor position. Any input method which composes complex characters or any other compositions from multiple sequential key presses should override this method to provide feedback.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.filter-keypress"><p><em class="structfield"><code>filter_keypress</code></em> ()</p></td> <td class="struct_member_description"><p>Called via <a href="gtkimcontext#gtk-im-context-filter-keypress"><code class="function">gtk_im_context_filter_keypress()</code></a> on every key press or release event. Every non-trivial input method needs to override this in order to implement the mapping from key events to text. A return value of <code class="literal">TRUE</code> indicates to the caller that the event was consumed by the input method. In that case, the <a href="gtkimcontext#GtkIMContext-commit"><span class="type">“commit”</span></a> signal should be emitted upon completion of a key sequence to pass the resulting text back to the input widget. Alternatively, <code class="literal">FALSE</code> may be returned to indicate that the event wasn’t handled by the input method. If a builtin mapping exists for the key, it is used to produce a character.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.focus-in"><p><em class="structfield"><code>focus_in</code></em> ()</p></td> <td class="struct_member_description"><p>Called via <a href="gtkimcontext#gtk-im-context-focus-in"><code class="function">gtk_im_context_focus_in()</code></a> when the input widget has gained focus. May be overridden to keep track of the current focus.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.focus-out"><p><em class="structfield"><code>focus_out</code></em> ()</p></td> <td class="struct_member_description"><p>Called via <a href="gtkimcontext#gtk-im-context-focus-out"><code class="function">gtk_im_context_focus_out()</code></a> when the input widget has lost focus. May be overridden to keep track of the current focus.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.reset"><p><em class="structfield"><code>reset</code></em> ()</p></td> <td class="struct_member_description"><p>Called via <a href="gtkimcontext#gtk-im-context-reset"><code class="function">gtk_im_context_reset()</code></a> to signal a change such as a change in cursor position. An input method that implements preediting should override this method to clear the preedit state on reset.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.set-cursor-location"><p><em class="structfield"><code>set_cursor_location</code></em> ()</p></td> <td class="struct_member_description"><p>Called via <a href="gtkimcontext#gtk-im-context-set-cursor-location"><code class="function">gtk_im_context_set_cursor_location()</code></a> to inform the input method of the current cursor location relative to the client window. May be overridden to implement the display of popup windows at the cursor position.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.set-use-preedit"><p><em class="structfield"><code>set_use_preedit</code></em> ()</p></td> <td class="struct_member_description"><p>Called via <a href="gtkimcontext#gtk-im-context-set-use-preedit"><code class="function">gtk_im_context_set_use_preedit()</code></a> to control the use of the preedit string. Override this to display feedback by some other means if turned off.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.set-surrounding"><p><em class="structfield"><code>set_surrounding</code></em> ()</p></td> <td class="struct_member_description"><p>Called via <a href="gtkimcontext#gtk-im-context-set-surrounding"><code class="function">gtk_im_context_set_surrounding()</code></a> in response to signal <a href="gtkimcontext#GtkIMContext-retrieve-surrounding"><span class="type">“retrieve-surrounding”</span></a> to update the input method’s idea of the context around the cursor. It is not necessary to override this method even with input methods which implement context-dependent behavior. The base implementation is sufficient for <a href="gtkimcontext#gtk-im-context-get-surrounding"><code class="function">gtk_im_context_get_surrounding()</code></a> to work.</p></td> <td class="struct_member_annotations"> </td> </tr> <tr> <td class="struct_member_name" id="GtkIMContextClass.get-surrounding"><p><em class="structfield"><code>get_surrounding</code></em> ()</p></td> <td class="struct_member_description"><p>Called via <a href="gtkimcontext#gtk-im-context-get-surrounding"><code class="function">gtk_im_context_get_surrounding()</code></a> to update the context around the cursor location. It is not necessary to override this method even with input methods which implement context-dependent behavior. The base implementation emits <a href="gtkimcontext#GtkIMContext-retrieve-surrounding"><span class="type">“retrieve-surrounding”</span></a> and records the context received by the subsequent invocation of <em class="parameter"><code>get_surrounding</code></em> .</p></td> <td class="struct_member_annotations"> </td> </tr> </tbody> </table></div> </div> </div> </div> <div class="refsect1"> <h2 id="GtkIMContext.property-details">Property Details</h2> <div class="refsect2"> <h3 id="GtkIMContext--input-hints">The <code class="literal">“input-hints”</code> property</h3> <pre class="programlisting">  “input-hints”              <a href="gtkentry#GtkInputHints"><span class="type">GtkInputHints</span></a></pre> <p>Hints for the text field behaviour.</p> <p>Owner: GtkIMContext</p> <p>Flags: Read / Write</p> </div>  <div class="refsect2"> <h3 id="GtkIMContext--input-purpose">The <code class="literal">“input-purpose”</code> property</h3> <pre class="programlisting">  “input-purpose”            <a href="gtkentry#GtkInputPurpose"><span class="type">GtkInputPurpose</span></a></pre> <p>Purpose of the text field.</p> <p>Owner: GtkIMContext</p> <p>Flags: Read / Write</p> <p>Default value: GTK_INPUT_PURPOSE_FREE_FORM</p> </div> </div> <div class="refsect1"> <h2 id="GtkIMContext.signal-details">Signal Details</h2> <div class="refsect2"> <h3 id="GtkIMContext-commit">The <code class="literal">“commit”</code> signal</h3> <pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context,
               <span class="type">char</span>         *str,
               <span class="type">gpointer</span>      user_data)</pre> <p>The ::commit signal is emitted when a complete input sequence has been entered by the user. This can be a single character immediately after a key press or the final result of preediting.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>the object on which the signal is emitted</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>str</p></td> <td class="parameter_description"><p>the completed character(s) entered by the user</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>user_data</p></td> <td class="parameter_description"><p>user data set when the signal handler was connected.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <p>Flags: Run Last</p> </div>  <div class="refsect2"> <h3 id="GtkIMContext-delete-surrounding">The <code class="literal">“delete-surrounding”</code> signal</h3> <pre class="programlisting"><span class="returnvalue">gboolean</span>
user_function (<a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context,
               <span class="type">int</span>           offset,
               <span class="type">int</span>           n_chars,
               <span class="type">gpointer</span>      user_data)</pre> <p>The ::delete-surrounding signal is emitted when the input method needs to delete all or part of the context surrounding the cursor.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>the object on which the signal is emitted</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>offset</p></td> <td class="parameter_description"><p>the character offset from the cursor position of the text to be deleted. A negative value indicates a position before the cursor.</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>n_chars</p></td> <td class="parameter_description"><p>the number of characters to be deleted</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>user_data</p></td> <td class="parameter_description"><p>user data set when the signal handler was connected.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p> <code class="literal">TRUE</code> if the signal was handled.</p> </div> <p>Flags: Run Last</p> </div>  <div class="refsect2"> <h3 id="GtkIMContext-preedit-changed">The <code class="literal">“preedit-changed”</code> signal</h3> <pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context,
               <span class="type">gpointer</span>      user_data)</pre> <p>The ::preedit-changed signal is emitted whenever the preedit sequence currently being entered has changed. It is also emitted at the end of a preedit sequence, in which case <a href="gtkimcontext#gtk-im-context-get-preedit-string"><code class="function">gtk_im_context_get_preedit_string()</code></a> returns the empty string.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>the object on which the signal is emitted</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>user_data</p></td> <td class="parameter_description"><p>user data set when the signal handler was connected.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <p>Flags: Run Last</p> </div>  <div class="refsect2"> <h3 id="GtkIMContext-preedit-end">The <code class="literal">“preedit-end”</code> signal</h3> <pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context,
               <span class="type">gpointer</span>      user_data)</pre> <p>The ::preedit-end signal is emitted when a preediting sequence has been completed or canceled.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>the object on which the signal is emitted</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>user_data</p></td> <td class="parameter_description"><p>user data set when the signal handler was connected.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <p>Flags: Run Last</p> </div>  <div class="refsect2"> <h3 id="GtkIMContext-preedit-start">The <code class="literal">“preedit-start”</code> signal</h3> <pre class="programlisting"><span class="returnvalue">void</span>
user_function (<a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context,
               <span class="type">gpointer</span>      user_data)</pre> <p>The ::preedit-start signal is emitted when a new preediting sequence starts.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>the object on which the signal is emitted</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>user_data</p></td> <td class="parameter_description"><p>user data set when the signal handler was connected.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <p>Flags: Run Last</p> </div>  <div class="refsect2"> <h3 id="GtkIMContext-retrieve-surrounding">The <code class="literal">“retrieve-surrounding”</code> signal</h3> <pre class="programlisting"><span class="returnvalue">gboolean</span>
user_function (<a href="gtkimcontext#GtkIMContext-struct"><span class="type">GtkIMContext</span></a> *context,
               <span class="type">gpointer</span>      user_data)</pre> <p>The ::retrieve-surrounding signal is emitted when the input method requires the context surrounding the cursor. The callback should set the input method surrounding context by calling the <a href="gtkimcontext#gtk-im-context-set-surrounding"><code class="function">gtk_im_context_set_surrounding()</code></a> method.</p> <div class="refsect3"> <h4>Parameters</h4> <div class="informaltable"><table class="informaltable">  <tbody> <tr> <td class="parameter_name"><p>context</p></td> <td class="parameter_description"><p>the object on which the signal is emitted</p></td> <td class="parameter_annotations"> </td> </tr> <tr> <td class="parameter_name"><p>user_data</p></td> <td class="parameter_description"><p>user data set when the signal handler was connected.</p></td> <td class="parameter_annotations"> </td> </tr> </tbody> </table></div> </div> <div class="refsect3"> <h4>Returns</h4> <p> <code class="literal">TRUE</code> if the signal was handled.</p> </div> <p>Flags: Run Last</p> </div> </div> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2020 The GNOME Project<br>Licensed under the GNU Lesser General Public License version 2.1 or later.<br>
    <a href="https://developer.gnome.org/gtk4/4.0/GtkIMContext.html" class="_attribution-link">https://developer.gnome.org/gtk4/4.0/GtkIMContext.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
