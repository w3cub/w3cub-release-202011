
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Kubeadm Upgrade - Kubernetes - W3cubDocs</title>
  
  <meta name="description" content="kubeadm upgrade is a user-friendly command that wraps complex upgrading logic behind one command, with support for both planning an upgrade and &hellip;">
  <meta name="keywords" content="kubeadm, upgrade, kubernetes">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/kubernetes/reference/setup-tools/kubeadm/kubeadm-upgrade.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-60a6449bb52e9968d95c133a29f066ffcb8dbe4f077d4022e51c991ce30bf256c8e19c508207a4193c414ffd0414826564317669b0f27f9f85c1cb21b84e097e.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/kubernetes.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/kubernetes/" class="_nav-link" title="" style="margin-left:0;">Kubernetes</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _kubernetes">
				
				
<h1>kubeadm upgrade</h1>  <p><code>kubeadm upgrade</code> is a user-friendly command that wraps complex upgrading logic behind one command, with support for both planning an upgrade and actually performing it.</p>  <h2 id="kubeadm-upgrade-guidance">kubeadm upgrade guidance</h2> <p>The steps for performing an upgrade using kubeadm are outlined in <a href="https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/">this document</a>. For older versions of kubeadm, please refer to older documentation sets of the Kubernetes website.</p> <p>You can use <code>kubeadm upgrade diff</code> to see the changes that would be applied to static pod manifests.</p> <p>In Kubernetes v1.15.0 and later, <code>kubeadm upgrade apply</code> and <code>kubeadm upgrade node</code> will also automatically renew the kubeadm managed certificates on this node, including those stored in kubeconfig files. To opt-out, it is possible to pass the flag <code>--certificate-renewal=false</code>. For more details about certificate renewal see the <a href="https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/kubeadm-certs">certificate management documentation</a>.</p> <div class="alert alert-info note callout" role="alert"> <strong>Note:</strong> The commands <code>kubeadm upgrade apply</code> and <code>kubeadm upgrade plan</code> have a legacy <code>--config</code> flag which makes it possible to reconfigure the cluster, while performing planning or upgrade of that particular control-plane node. Please be aware that the upgrade workflow was not designed for this scenario and there are reports of unexpected results. </div> <h2 id="cmd-upgrade-plan">kubeadm upgrade plan</h2> <p>Check which versions are available to upgrade to and validate whether your current cluster is upgradeable. To skip the internet check, pass in the optional [version] parameter</p> <h3 id="synopsis">Synopsis</h3> <p>Check which versions are available to upgrade to and validate whether your current cluster is upgradeable. To skip the internet check, pass in the optional [version] parameter</p> <pre><code>kubeadm upgrade plan [version] [flags]
</code></pre>
<h3 id="options">Options</h3> <table style="width: 100%; table-layout: fixed;"> <colgroup> <col span="1" style="width: 10px;"> <col span="1"> </colgroup> <tbody> <tr> <td colspan="2">--allow-experimental-upgrades</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Show unstable versions of Kubernetes as an upgrade alternative and allow upgrading to an alpha/beta/release candidate versions of Kubernetes.</p></td> </tr> <tr> <td colspan="2">--allow-release-candidate-upgrades</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Show release candidate versions of Kubernetes as an upgrade alternative and allow upgrading to a release candidate versions of Kubernetes.</p></td> </tr> <tr> <td colspan="2">--config string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Path to a kubeadm configuration file.</p></td> </tr> <tr> <td colspan="2">--feature-gates string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>A set of key=value pairs that describe feature gates for various features. Options are:<br>PublicKeysECDSA=true|false (ALPHA - default=false)<br>RootlessControlPlane=true|false (ALPHA - default=false)<br>UnversionedKubeletConfigMap=true|false (ALPHA - default=false)</p></td> </tr> <tr> <td colspan="2">-h, --help</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>help for plan</p></td> </tr> <tr> <td colspan="2">--ignore-preflight-errors strings</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>A list of checks whose errors will be shown as warnings. Example: 'IsPrivilegedUser,Swap'. Value 'all' ignores errors from all checks.</p></td> </tr> <tr> <td colspan="2">--kubeconfig string Default: "/etc/kubernetes/admin.conf"</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>The kubeconfig file to use when talking to the cluster. If the flag is not set, a set of standard locations can be searched for an existing kubeconfig file.</p></td> </tr> <tr> <td colspan="2">--print-config</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Specifies whether the configuration file that will be used in the upgrade should be printed or not.</p></td> </tr> </tbody> </table> <h3 id="options-inherited-from-parent-commands">Options inherited from parent commands</h3> <table style="width: 100%; table-layout: fixed;"> <colgroup> <col span="1" style="width: 10px;"> <col span="1"> </colgroup> <tbody> <tr> <td colspan="2">--rootfs string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>[EXPERIMENTAL] The path to the 'real' host root filesystem.</p></td> </tr> </tbody> </table> <h2 id="cmd-upgrade-apply">kubeadm upgrade apply </h2> <p>Upgrade your Kubernetes cluster to the specified version</p> <h3 id="synopsis">Synopsis</h3> <p>Upgrade your Kubernetes cluster to the specified version</p> <pre><code>kubeadm upgrade apply [version]
</code></pre>
<h3 id="options">Options</h3> <table style="width: 100%; table-layout: fixed;"> <colgroup> <col span="1" style="width: 10px;"> <col span="1"> </colgroup> <tbody> <tr> <td colspan="2">--allow-experimental-upgrades</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Show unstable versions of Kubernetes as an upgrade alternative and allow upgrading to an alpha/beta/release candidate versions of Kubernetes.</p></td> </tr> <tr> <td colspan="2">--allow-release-candidate-upgrades</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Show release candidate versions of Kubernetes as an upgrade alternative and allow upgrading to a release candidate versions of Kubernetes.</p></td> </tr> <tr> <td colspan="2">--certificate-renewal Default: true</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Perform the renewal of certificates used by component changed during upgrades.</p></td> </tr> <tr> <td colspan="2">--config string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Path to a kubeadm configuration file.</p></td> </tr> <tr> <td colspan="2">--dry-run</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Do not change any state, just output what actions would be performed.</p></td> </tr> <tr> <td colspan="2">--etcd-upgrade Default: true</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Perform the upgrade of etcd.</p></td> </tr> <tr> <td colspan="2">--feature-gates string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>A set of key=value pairs that describe feature gates for various features. Options are:<br>PublicKeysECDSA=true|false (ALPHA - default=false)<br>RootlessControlPlane=true|false (ALPHA - default=false)<br>UnversionedKubeletConfigMap=true|false (ALPHA - default=false)</p></td> </tr> <tr> <td colspan="2">-f, --force</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Force upgrading although some requirements might not be met. This also implies non-interactive mode.</p></td> </tr> <tr> <td colspan="2">-h, --help</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>help for apply</p></td> </tr> <tr> <td colspan="2">--ignore-preflight-errors strings</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>A list of checks whose errors will be shown as warnings. Example: 'IsPrivilegedUser,Swap'. Value 'all' ignores errors from all checks.</p></td> </tr> <tr> <td colspan="2">--kubeconfig string Default: "/etc/kubernetes/admin.conf"</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>The kubeconfig file to use when talking to the cluster. If the flag is not set, a set of standard locations can be searched for an existing kubeconfig file.</p></td> </tr> <tr> <td colspan="2">--patches string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Path to a directory that contains files named "target[suffix][+patchtype].extension". For example, "kube-apiserver0+merge.yaml" or just "etcd.json". "target" can be one of "kube-apiserver", "kube-controller-manager", "kube-scheduler", "etcd". "patchtype" can be one of "strategic", "merge" or "json" and they match the patch formats supported by kubectl. The default "patchtype" is "strategic". "extension" must be either "json" or "yaml". "suffix" is an optional string that can be used to determine which patches are applied first alpha-numerically.</p></td> </tr> <tr> <td colspan="2">--print-config</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Specifies whether the configuration file that will be used in the upgrade should be printed or not.</p></td> </tr> <tr> <td colspan="2">-y, --yes</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Perform the upgrade and do not prompt for confirmation (non-interactive mode).</p></td> </tr> </tbody> </table> <h3 id="options-inherited-from-parent-commands">Options inherited from parent commands</h3> <table style="width: 100%; table-layout: fixed;"> <colgroup> <col span="1" style="width: 10px;"> <col span="1"> </colgroup> <tbody> <tr> <td colspan="2">--rootfs string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>[EXPERIMENTAL] The path to the 'real' host root filesystem.</p></td> </tr> </tbody> </table> <h2 id="cmd-upgrade-diff">kubeadm upgrade diff</h2> <p>Show what differences would be applied to existing static pod manifests. See also: kubeadm upgrade apply --dry-run</p> <h3 id="synopsis">Synopsis</h3> <p>Show what differences would be applied to existing static pod manifests. See also: kubeadm upgrade apply --dry-run</p> <pre><code>kubeadm upgrade diff [version] [flags]
</code></pre>
<h3 id="options">Options</h3> <table style="width: 100%; table-layout: fixed;"> <colgroup> <col span="1" style="width: 10px;"> <col span="1"> </colgroup> <tbody> <tr> <td colspan="2">--api-server-manifest string Default: "/etc/kubernetes/manifests/kube-apiserver.yaml"</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>path to API server manifest</p></td> </tr> <tr> <td colspan="2">--config string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Path to a kubeadm configuration file.</p></td> </tr> <tr> <td colspan="2">-c, --context-lines int Default: 3</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>How many lines of context in the diff</p></td> </tr> <tr> <td colspan="2">--controller-manager-manifest string Default: "/etc/kubernetes/manifests/kube-controller-manager.yaml"</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>path to controller manifest</p></td> </tr> <tr> <td colspan="2">-h, --help</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>help for diff</p></td> </tr> <tr> <td colspan="2">--kubeconfig string Default: "/etc/kubernetes/admin.conf"</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>The kubeconfig file to use when talking to the cluster. If the flag is not set, a set of standard locations can be searched for an existing kubeconfig file.</p></td> </tr> <tr> <td colspan="2">--scheduler-manifest string Default: "/etc/kubernetes/manifests/kube-scheduler.yaml"</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>path to scheduler manifest</p></td> </tr> </tbody> </table> <h3 id="options-inherited-from-parent-commands">Options inherited from parent commands</h3> <table style="width: 100%; table-layout: fixed;"> <colgroup> <col span="1" style="width: 10px;"> <col span="1"> </colgroup> <tbody> <tr> <td colspan="2">--rootfs string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>[EXPERIMENTAL] The path to the 'real' host root filesystem.</p></td> </tr> </tbody> </table> <h2 id="cmd-upgrade-node">kubeadm upgrade node</h2> <p>Upgrade commands for a node in the cluster</p> <h3 id="synopsis">Synopsis</h3> <p>Upgrade commands for a node in the cluster</p> <p>The "node" command executes the following phases:</p> <pre><code>preflight       Run upgrade node pre-flight checks
control-plane   Upgrade the control plane instance deployed on this node, if any
kubelet-config  Upgrade the kubelet configuration for this node
</code></pre>
<pre><code>kubeadm upgrade node [flags]
</code></pre>
<h3 id="options">Options</h3> <table style="width: 100%; table-layout: fixed;"> <colgroup> <col span="1" style="width: 10px;"> <col span="1"> </colgroup> <tbody> <tr> <td colspan="2">--certificate-renewal Default: true</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Perform the renewal of certificates used by component changed during upgrades.</p></td> </tr> <tr> <td colspan="2">--dry-run</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Do not change any state, just output the actions that would be performed.</p></td> </tr> <tr> <td colspan="2">--etcd-upgrade Default: true</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Perform the upgrade of etcd.</p></td> </tr> <tr> <td colspan="2">-h, --help</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>help for node</p></td> </tr> <tr> <td colspan="2">--ignore-preflight-errors strings</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>A list of checks whose errors will be shown as warnings. Example: 'IsPrivilegedUser,Swap'. Value 'all' ignores errors from all checks.</p></td> </tr> <tr> <td colspan="2">--kubeconfig string Default: "/etc/kubernetes/admin.conf"</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>The kubeconfig file to use when talking to the cluster. If the flag is not set, a set of standard locations can be searched for an existing kubeconfig file.</p></td> </tr> <tr> <td colspan="2">--patches string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>Path to a directory that contains files named "target[suffix][+patchtype].extension". For example, "kube-apiserver0+merge.yaml" or just "etcd.json". "target" can be one of "kube-apiserver", "kube-controller-manager", "kube-scheduler", "etcd". "patchtype" can be one of "strategic", "merge" or "json" and they match the patch formats supported by kubectl. The default "patchtype" is "strategic". "extension" must be either "json" or "yaml". "suffix" is an optional string that can be used to determine which patches are applied first alpha-numerically.</p></td> </tr> <tr> <td colspan="2">--skip-phases strings</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>List of phases to be skipped</p></td> </tr> </tbody> </table> <h3 id="options-inherited-from-parent-commands">Options inherited from parent commands</h3> <table style="width: 100%; table-layout: fixed;"> <colgroup> <col span="1" style="width: 10px;"> <col span="1"> </colgroup> <tbody> <tr> <td colspan="2">--rootfs string</td> </tr> <tr> <td></td>
<td style="line-height: 130%; word-wrap: break-word;"><p>[EXPERIMENTAL] The path to the 'real' host root filesystem.</p></td> </tr> </tbody> </table> <h2 id="what-s-next">What's next</h2> <ul> <li>
<a href="kubeadm-config/index">kubeadm config</a> if you initialized your cluster using kubeadm v1.7.x or lower, to configure your cluster for <code>kubeadm upgrade</code>
</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2022 The Kubernetes Authors<br>Documentation Distributed under CC BY 4.0.<br>
    <a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-upgrade" class="_attribution-link">https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-upgrade</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
