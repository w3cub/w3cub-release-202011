
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CollectionView - Marionette.js 4 - W3cubDocs</title>
  
  <meta name="description" content="A CollectionView like View manages a portion of the DOM via a single parent DOM element or el. This view manages an ordered set of child views that &hellip;">
  <meta name="keywords" content="marionette, collectionview, js, marionette~4">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/marionette~4/marionette.collectionview.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/marionette~4.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/marionette~4/" class="_nav-link" title="" style="margin-left:0;">Marionette.js 4</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>
Marionette.CollectionView</h1>
<p>A <code>CollectionView</code> like <code>View</code> manages a portion of the DOM via a single parent DOM element or <code>el</code>. This view manages an ordered set of child views that are shown within the view's <code>el</code>. These children are most often created to match the models of a <code>Backbone.Collection</code> though a <code>CollectionView</code> does not require a <code>collection</code> and can manage any set of views.</p> <p><code>CollectionView</code> includes:</p> <ul> <li><a href="dom.api">The DOM API</a></li> <li><a href="events.class#collectionview-events">Class Events</a></li> <li><a href="dom.interactions">DOM Interactions</a></li> <li><a href="events#event-bubbling">Child Event Bubbling</a></li> <li><a href="events.entity">Entity Events</a></li> <li><a href="view.rendering">View Rendering</a></li> <li><a href="dom.prerendered">Prerendered Content</a></li> <li><a href="view.lifecycle">View Lifecycle</a></li> </ul> <p>A <code>CollectionView</code> can have <a href="marionette.behavior"><code>Behavior</code>s</a>.</p> <h2 id="documentation-index">
Documentation Index</h2>
<ul> <li><a href="#instantiating-a-collectionview">Instantiating a CollectionView</a></li> <li>
<a href="#rendering-a-collectionview">Rendering a CollectionView</a><ul> <li><a href="#rendering-a-template">Rendering a Template</a></li> <li><a href="#defining-the-childviewcontainer">Defining the <code>childViewContainer</code></a></li> <li><a href="#re-rendering-the-collectionview">Re-rendering the CollectionView</a></li> </ul> </li> <li><a href="#view-lifecycle-and-events">View Lifecycle and Events</a></li> <li><a href="#entity-events">Entity Events</a></li> <li><a href="#dom-interactions">DOM Interactions</a></li> <li><a href="#behaviors">Behaviors</a></li> <li>
<a href="#managing-children">Managing Children</a><ul> <li><a href="#attaching-children-within-the-el">Attaching <code>children</code> within the <code>el</code></a></li> <li><a href="#destroying-all-children">Destroying All <code>children</code></a></li> </ul> </li> <li>
<a href="#collectionviews-childview">CollectionView's <code>childView</code></a><ul> <li><a href="#building-the-children">Building the <code>children</code></a></li> <li><a href="#passing-data-to-the-childview">Passing Data to the <code>childView</code></a></li> </ul> </li> <li>
<a href="#collectionviews-emptyview">CollectionView's <code>emptyView</code></a><ul> <li><a href="#collectionviews-getemptyregion">CollectionView's <code>getEmptyRegion</code></a></li> <li><a href="#passing-data-to-the-emptyview">Passing Data to the <code>emptyView</code></a></li> <li><a href="#defining-when-an-emptyview-shows">Defining When an <code>emptyView</code> shows</a></li> </ul> </li> <li>
<a href="#accessing-a-child-view">Accessing a Child View</a><ul> <li><a href="collectionview-children-iterators-and-collection-functions">CollectionView <code>children</code> Iterators And Collection Functions</a></li> </ul> </li> <li><a href="#listening-to-events-on-the-children">Listening to Events on the <code>children</code></a></li> <li>
<a href="#self-managed-children">Self Managed <code>children</code></a><ul> <li><a href="#adding-a-child-view">Adding a Child View</a></li> <li><a href="#removing-a-child-view">Removing a Child View</a></li> <li><a href="#detaching-a-child-view">Detaching a Child View</a></li> <li><a href="#swapping-child-views">Swapping Child Views</a></li> </ul> </li> <li>
<a href="#sorting-the-children">Sorting the <code>children</code></a><ul> <li><a href="#defining-the-viewcomparator">Defining the <code>viewComparator</code></a></li> <li><a href="#maintaining-the-collections-sort">Maintaining the <code>collection</code>'s sort</a></li> </ul> </li> <li>
<a href="#filtering-the-children">Filtering the <code>children</code></a><ul> <li><a href="#defining-the-viewfilter">Defining the <code>viewFilter</code></a></li> </ul> </li> </ul> <h2 id="instantiating-a-collectionview">
Instantiating a CollectionView</h2>
<p>When instantiating a <code>CollectionView</code> there are several properties, if passed, that will be attached directly to the instance: <code>attributes</code>, <code>behaviors</code>, <code>childView</code>, <code>childViewContainer</code>, <code>childViewEventPrefix</code>, <code>childViewEvents</code>, <code>childViewOptions</code>, <code>childViewTriggers</code>, <code>className</code>, <code>collection</code>, <code>collectionEvents</code>, <code>el</code>, <code>emptyView</code>, <code>emptyViewOptions</code>, <code>events</code>, <code>id</code>, <code>model</code>, <code>modelEvents</code>, <code>sortWithCollection</code>, <code>tagName</code>, <code>template</code>, <code>templateContext</code>, <code>triggers</code>, <code>ui</code>, <code>viewComparator</code>, <code>viewFilter</code></p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> myCollectionView = <span class="hljs-keyword">new</span> CollectionView({ ... });
</pre> <p>Some of these properties come from Marionette, but many are inherited from <a href="http://backbonejs.org/#View-constructor"><code>Backbone.View</code></a>.</p> <h2 id="rendering-a-collectionview">
Rendering a CollectionView</h2>
<p>The <code>render</code> method of the <code>CollectionView</code> is primarily responsible for rendering the entire collection. It loops through each of the children in the collection and renders them individually as a <code>childView</code>.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({...});

<span class="hljs-comment">// all of the children views will now be rendered.</span>
<span class="hljs-keyword">new</span> MyCollectionView().render();
</pre> <h3 id="rendering-a-template">
Rendering a Template</h3>
<p>In addition to rendering children, the <code>CollectionView</code> may have a <code>template</code>. The child views can be rendered within a DOM element of this template. The <code>CollectionView</code> will serialize either the <code>model</code> or <code>collection</code> along with context for the <code>template</code> to render.</p> <p>For more detail on how to render templates, see <a href="view.rendering">View Template Rendering</a>.</p> <h3 id="defining-the-childviewcontainer">
Defining the <code>childViewContainer</code>
</h3>
<p>By default the <code>CollectionView</code> will render the children into the <code>el</code> of the <code>CollectionView</code>. If you are rendering a template you will want to set the <code>childViewContainer</code> to be a selector for an element within the template for child view attachment.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  <span class="hljs-attr">childViewContainer</span>: <span class="hljs-string">'.js-widgets'</span>,
  <span class="hljs-attr">template</span>: _.template(<span class="hljs-string">'&lt;h1&gt;Widgets&lt;/h1&gt;&lt;ul class="js-widgets"&gt;&lt;/ul&gt;'</span>)
});
</pre> <p><strong>Errors</strong> An error will throw if the childViewContainer can not be found.</p> <h3 id="re-rendering-the-collectionview">
Re-rendering the CollectionView</h3>
<p>If you need to re-render the entire collection or the template, you can call the <code>collectionView.render</code> method. This method will destroying all of the child views that may have previously been added.</p> <h2 id="view-lifecycle-and-events">
View Lifecycle and Events</h2>
<p>An instantiated <code>CollectionView</code> is aware of its lifecycle state and will throw events related to when that state changes. The view states indicate whether the view is rendered, attached to the DOM, or destroyed.</p> <p>Read More:</p> <ul> <li><a href="view.lifecycle">View Lifecycle</a></li> <li><a href="events.class#dom-change-events">View DOM Change Events</a></li> <li><a href="events.class#destroy-events">View Destroy Events</a></li> </ul> <h2 id="entity-events">
Entity Events</h2>
<p>The <code>CollectionView</code> can bind to events that occur on the attached <code>model</code> and <code>collection</code> - this includes both <a href="http://backbonejs.org/#Events-catalog">standard backbone-events</a> and custom events.</p> <p>Read More:</p> <ul> <li><a href="events.entity">Entity Events</a></li> </ul> <h2 id="dom-interactions">
DOM Interactions</h2>
<p>In addition to what Backbone provides the views, Marionette has additional API for DOM interactions: <code>events</code>, <code>triggers</code>, and <code>ui</code>.</p> <p>By default <code>ui</code> is only bound to the elements within the <a href="#rendering-a-template">template</a>. However as <code>events</code> and <code>triggers</code> are delegated to the view's <code>el</code> they will apply to any children. There may be instances where binding <code>ui</code> is helpful when you want to access elements inside <code>CollectionView</code>s children with <a href="dom.interactions#accessing-ui-elements"><code>getUI()</code></a>. For these cases you will need to bind <code>ui</code> yourself. To do so run <code>bindUIElements</code> on the <code>CollectionView</code>:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  <span class="hljs-comment">// ...</span>

  ui: {
    <span class="hljs-attr">checkbox</span>: <span class="hljs-string">'input[type="checkbox"]'</span>
  }
});

<span class="hljs-keyword">const</span> collectionView = <span class="hljs-keyword">new</span> MyCollectionView();

collectionView.bindUIElements();

<span class="hljs-built_in">console</span>.log(collectionView.getUI(<span class="hljs-string">'checkbox'</span>)); <span class="hljs-comment">// Output all checkboxes.</span>
</pre> <p>Read More:</p> <ul> <li><a href="dom.interactions">DOM Interactions</a></li> </ul> <h2 id="behaviors">
Behaviors</h2>
<p>A <code>Behavior</code> provides a clean separation of concerns to your view logic, allowing you to share common user-facing operations between your views.</p> <p>Read More:</p> <ul> <li><a href="marionette.behavior#using-behaviors">Using <code>Behavior</code>s</a></li> </ul> <h2 id="managing-children">
Managing Children</h2>
<p>Children are automatically managed once the <code>CollectionView</code> is <a href="#rendering-a-collectionview">rendered</a>. For each model within the <code>collection</code> the <code>CollectionView</code> will build and store a <code>childView</code> within its <code>children</code> object. This allows you to easily access the views within the collection view, iterate them, find them by a given indexer such as the view's model or id and more.</p> <p>After the initial <code>render</code> the <code>CollectionView</code> binds to the <code>update</code> and <code>reset</code> events of the <code>collection</code>.</p> <p>When the <code>collection</code> for the view is <code>reset</code>, the view will destroy all children and re-render the entire collection.</p> <p>When a model is added to the <code>collection</code>, the <code>CollectionView</code> will render that one model into the <code>children</code>.</p> <p>When a model is removed from the <code>collection</code> (or destroyed / deleted), the <code>CollectionView</code> will destroy and remove that model's child view.</p> <p>When the <code>collection</code> for the view is sorted, the view by default automatically re-sort its child views unless the <code>sortWithCollection</code> attribute on the <code>CollectionView</code> is set to <code>false</code>, or the <code>viewComparator</code> is <code>false</code>.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Backbone <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { View, CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> collection = <span class="hljs-keyword">new</span> Backbone.Collection();

<span class="hljs-keyword">const</span> MyChildView = View.extend({:
  template: <span class="hljs-literal">false</span>
});

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  <span class="hljs-attr">childView</span>: MyChildView,
  collection,
});

<span class="hljs-keyword">const</span> myCollectionView = <span class="hljs-keyword">new</span> MyCollectionView();

<span class="hljs-comment">// Collection view will not re-render as it has not been rendered</span>
collection.reset([{<span class="hljs-attr">foo</span>: <span class="hljs-string">'foo'</span>}]);

myCollectionView.render();

<span class="hljs-comment">// Collection view will effectively re-render displaying the new model</span>
collection.reset([{<span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>}]);
</pre> <p>When the children are rendered the <a href="events.class#renderchildren-and-beforerenderchildren-events"><code>render:children</code> and <code>before:render:children</code> events</a> will trigger.</p> <p>When a childview is added to the children <a href="events.class#addchild-and-beforeaddchild-events"><code>add:child</code> and <code>before:add:child</code> events</a> will trigger</p> <p>When a childview is removed from the children <a href="events.class#removechild-and-beforeremovechild-events"><code>remove:child</code> and <code>before:remove:child</code> events</a> will trigger.</p> <h3 id="attaching-children-within-the-el">
Attaching <code>children</code> within the <code>el</code>
</h3>
<p>By default the <code>CollectionView</code> will add the HTML of each ChildView into an element buffer array, and then call the DOM API's <a href="dom.api#appendcontentsel-contents">appendContents</a> once at the end to move all of the HTML within the collection view's <code>el</code>.</p> <p>You can override this by specifying an <code>attachHtml</code> method in your view definition. This method takes two parameters and has no return value.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

CollectionView.extend({

  <span class="hljs-comment">// The default implementation:</span>
  attachHtml(els, $container){
    <span class="hljs-comment">// Unless childViewContainer, $container === this.$el</span>
    <span class="hljs-keyword">this</span>.Dom.appendContents(<span class="hljs-keyword">this</span>.el, els);
  }
});
</pre> <p>The first parameter is the HTML buffer, and the second parameter is the expected container for the children which by default equates to the view's <code>el</code> unless a <a href="#defining-the-childViewContainer"><code>childViewContainer</code></a> is set.</p> <h3 id="destroying-all-children">
Destroying All <code>children</code>
</h3>
<p><code>CollectionView</code> implements a <code>destroy</code> method which automatically destroys its children and cleans up listeners.</p> <p>When the children are destroyed the <a href="events.class#destroychildren-and-beforedestroychildren-events"><code>destroy:children</code> and <code>before:destroy:children</code> events</a> will trigger.</p> <p>Read More:</p> <ul> <li><a href="events.class#destroy-events">View Destroy Events</a></li> </ul> <h2 id="collectionviews-childview">
CollectionView's <code>childView</code>
</h2>
<p>When using a <code>collection</code> to manage the children of <code>CollectionView</code>, specify a <code>childView</code> for your <code>CollectionView</code>. This must be a Backbone view class definition, not an instance. It can be any <code>Backbone.View</code> related class including both Marionette's <code>View</code> and <code>CollectionView</code>.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View, CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyChildView = View.extend({});

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  <span class="hljs-attr">childView</span>: MyChildView
});
</pre> <p><strong>Errors</strong> If you do not specify a <code>childView</code>, an exception will be thrown stating that you must specify a <code>childView</code>.</p> <p>You can also define <code>childView</code> as a function. In this form, the value returned by this method is the <code>ChildView</code> class that will be instantiated when a <code>Model</code> needs to be initially rendered. This method also gives you the ability to customize per <code>Model</code> <code>ChildViews</code>.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">'underscore'</span>;
<span class="hljs-keyword">import</span> Backbone <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { View, CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> FooView =View.extend({
  <span class="hljs-attr">template</span>: _.template(<span class="hljs-string">'foo'</span>)
});

<span class="hljs-keyword">const</span> BarView = View.extend({
  bar
});

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  <span class="hljs-attr">collection</span>: <span class="hljs-keyword">new</span> Backbone.Collection(),
  childView(item) {
    <span class="hljs-comment">// Choose which view class to render,</span>
    <span class="hljs-comment">// depending on the properties of the item model</span>
    <span class="hljs-keyword">if</span>  (item.get(<span class="hljs-string">'isFoo'</span>)) {
      <span class="hljs-keyword">return</span> FooView;
    }
    <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> BarView;
    }
  }
});

<span class="hljs-keyword">const</span> collectionView = <span class="hljs-keyword">new</span> MyCollectionView();

<span class="hljs-keyword">const</span> foo = <span class="hljs-keyword">new</span> Backbone.Model({
  <span class="hljs-attr">isFoo</span>: <span class="hljs-literal">true</span>
});

<span class="hljs-keyword">const</span> bar = <span class="hljs-keyword">new</span> Backbone.Model({
  <span class="hljs-attr">isFoo</span>: <span class="hljs-literal">false</span>
});

<span class="hljs-comment">// Renders a FooView</span>
collectionView.collection.add(foo);

<span class="hljs-comment">// Renders a BarView</span>
collectionView.collection.add(bar);
</pre> <p><strong>Errors</strong> If <code>childView</code> is a function that does not return a view class an error will be thrown.</p> <h3 id="building-the-children">
Building the <code>children</code>
</h3>
<p>The <code>buildChildView</code> method is responsible for taking the ChildView class and instantiating it with the appropriate data. This method takes three parameters and returns a view instance to be used as the child view.</p> <pre data-language="javascript">buildChildView(child, ChildViewClass, childViewOptions){
  <span class="hljs-comment">// build the final list of options for the childView class</span>
  <span class="hljs-keyword">const</span> options = _.extend({<span class="hljs-attr">model</span>: child}, childViewOptions);
  <span class="hljs-comment">// create the child view instance</span>
  <span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> ChildViewClass(options);
  <span class="hljs-comment">// return it</span>
  <span class="hljs-keyword">return</span> view;
},
</pre> <p>Override this method when you need a more complicated build, but use <a href="#collectionviews-childview"><code>childView</code></a> if you need to determine <em>which</em> View class to instantiate.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">'underscore'</span>;
<span class="hljs-keyword">import</span> Backbone <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;
<span class="hljs-keyword">import</span> MyListView <span class="hljs-keyword">from</span> <span class="hljs-string">'./my-list-view'</span>;
<span class="hljs-keyword">import</span> MyView <span class="hljs-keyword">from</span> <span class="hljs-string">'./my-view'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  childView(child) {
    <span class="hljs-keyword">if</span> (child.get(<span class="hljs-string">'type'</span>) === <span class="hljs-string">'list'</span>) {
      <span class="hljs-keyword">return</span> MyListView;
    }

    <span class="hljs-keyword">return</span> MyView;
  },
  buildChildView(child, ChildViewClass, childViewOptions) {
    <span class="hljs-keyword">const</span> options = {};

    <span class="hljs-keyword">if</span> (child.get(<span class="hljs-string">'type'</span>) === <span class="hljs-string">'list'</span>) {
      <span class="hljs-keyword">const</span> childList = <span class="hljs-keyword">new</span> Backbone.Collection(child.get(<span class="hljs-string">'list'</span>));
      options = _.extend({<span class="hljs-attr">collection</span>: childList}, childViewOptions);
    } <span class="hljs-keyword">else</span> {
      options = _.extend({<span class="hljs-attr">model</span>: child}, childViewOptions);
    }

    <span class="hljs-comment">// create the child view instance</span>
    <span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> ChildViewClass(options);
    <span class="hljs-comment">// return it</span>
    <span class="hljs-keyword">return</span> view;
  }
});
</pre> <h3 id="passing-data-to-the-childview">
Passing Data to the <code>childView</code>
</h3>
<p>There may be scenarios where you need to pass data from your parent collection view in to each of the childView instances. To do this, provide a <code>childViewOptions</code> definition on your collection view as an object literal. This will be passed to the constructor of your childView as part of the <code>options</code>.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View, CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> ChildView = View.extend({
  initialize(options) {
    <span class="hljs-built_in">console</span>.log(options.foo); <span class="hljs-comment">// =&gt; "bar"</span>
  }
});

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  <span class="hljs-attr">childView</span>: ChildView,

  <span class="hljs-attr">childViewOptions</span>: {
    <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>
  }
});
</pre> <p>You can also specify the <code>childViewOptions</code> as a function, if you need to calculate the values to return at runtime. The model will be passed into the function should you need access to it when calculating <code>childViewOptions</code>. The function must return an object, and the attributes of the object will be copied to the <code>childView</code> instance's options.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  childViewOptions(model) {
    <span class="hljs-comment">// do some calculations based on the model</span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>
    };
  }
});
</pre> <h2 id="collectionviews-emptyview">
CollectionView's <code>emptyView</code>
</h2>
<p>When a collection has no children, and you need to render a view other than the list of childViews, you can specify an <code>emptyView</code> attribute on your collection view. The <code>emptyView</code> just like the <a href="#collectionviews-childview"><code>childView</code></a> can also be passed as an option on instantiation or can be a function that returns the <code>emptyView</code>.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">'underscore'</span>;
<span class="hljs-keyword">import</span> { View, CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyEmptyView = View.extend({
  <span class="hljs-attr">template</span>: _.template(<span class="hljs-string">'Nothing to display.'</span>)
});

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  <span class="hljs-comment">// ...</span>

  emptyView: MyEmptyView
});
</pre> <h3 id="collectionviews-getemptyregion">
CollectionView's <code>getEmptyRegion</code>
</h3>
<p>When a <code>CollectionView</code> is instantiated it creates a region for showing the <a href="#collectionviews-emptyview"><code>emptyView</code></a>. This region can be requested using the <code>getEmptyRegion</code> method. The region will share the <code>el</code> with the <code>CollectionView</code> and is shown with <a href="marionette.region#additional-options"><code>replaceElement: false</code></a>.</p> <p><strong>Note</strong> The <code>CollectionView</code> expects to be the only entity managing the region. Showing things in this region directly is not advised.</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> isEmptyShowing = myCollectionView.getEmptyRegion().hasView();
</pre> <p>This region can be useful for handling the <a href="events.class#collectionview-emptyview-region-events">EmptyView Region Events</a>.</p> <h3 id="passing-data-to-the-emptyview">
Passing Data to the <code>emptyView</code>
</h3>
<p>Similar to <a href="#collectionviews-childview"><code>childView</code></a> and <a href="#padding-data-to-the-childview"><code>childViewOptions</code></a>, there is an <code>emptyViewOptions</code> property that will be passed to the <code>emptyView</code> constructor. It can be provided as an object literal or as a function.</p> <p>If <code>emptyViewOptions</code> aren't provided the <code>CollectionView</code> will default to passing the <code>childViewOptions</code> to the <code>emptyView</code>.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { View, CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> EmptyView = View.extend({
  initialize(options){
    <span class="hljs-built_in">console</span>.log(options.foo); <span class="hljs-comment">// =&gt; "bar"</span>
  }
});

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  <span class="hljs-attr">emptyView</span>: EmptyView,

  <span class="hljs-attr">emptyViewOptions</span>: {
    <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span>
  }
});
</pre> <h3 id="defining-when-an-emptyview-shows">
Defining When an <code>emptyView</code> shows</h3>
<p>If you want to control when the empty view is rendered, you can override <code>isEmpty</code>:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  isEmpty() {
    <span class="hljs-comment">// some logic to calculate if the view should be rendered as empty</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.collection.length &lt; <span class="hljs-number">2</span>;
  }
});
</pre> <p>The default implementation of <code>isEmpty</code> returns <code>!this.children.length</code>.</p> <p>You can also use this method to determine when the empty view was shown:</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  <span class="hljs-comment">// ...</span>
  onRenderChildren() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) { <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Empty View Shown'</span>); }
  }
});
</pre> <h2 id="accessing-a-child-view">
Accessing a Child View</h2>
<p>You can retrieve a view by a number of methods. If the findBy* method cannot find the view, it will return <code>undefined</code>.</p> <p><strong>Note</strong> That children represents the views rendered that are or will be attached within the view's <code>el</code>.</p> <h4>
CollectionView <code>children</code>'s: <code>findByCid</code>
</h4>
<p>Find a view by it's cid.</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> bView = myCollectionView.children.findByCid(buttonView.cid);
</pre> <h4>
CollectionView <code>children</code>'s: <code>findByModel</code>
</h4>
<p>Find a view by model.</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> bView = myCollectionView.children.findByModel(buttonView.model);
</pre> <h4>
CollectionView <code>children</code>'s: <code>findByModelCid</code>
</h4>
<p>Find a view by model cid.</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> bView = myCollectionView.children.findByModelCid(buttonView.model.cid);
</pre> <h4>
CollectionView <code>children</code>'s: <code>findByIndex</code>
</h4>
<p>Find by numeric index (unstable)</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> bView = myCollectionView.children.findByIndex(<span class="hljs-number">0</span>);
</pre> <h4>
CollectionView <code>children</code>'s: <code>findIndexByView</code>
</h4>
<p>Find the index of the view inside the children</p> <pre data-language="javascript"><span class="hljs-keyword">const</span> index = myCollectionView.children.findIndexByView(bView);
</pre> <h3 id="collectionview-children-iterators-and-collection-functions">
CollectionView <code>children</code> Iterators And Collection Functions</h3>
<p>The container object borrows several functions from <a href="http://underscorejs.org/">Underscore.js</a>, to provide iterators and other collection functions, including:</p> <ul> <li><a href="http://underscorejs.org/#each">each</a></li> <li><a href="http://underscorejs.org/#map">map</a></li> <li><a href="http://underscorejs.org/#reduce">reduce</a></li> <li><a href="http://underscorejs.org/#find">find</a></li> <li><a href="http://underscorejs.org/#filter">filter</a></li> <li><a href="http://underscorejs.org/#reject">reject</a></li> <li><a href="http://underscorejs.org/#every">every</a></li> <li><a href="http://underscorejs.org/#some">some</a></li> <li><a href="http://underscorejs.org/#contains">contains</a></li> <li><a href="http://underscorejs.org/#invoke">invoke</a></li> <li><a href="http://underscorejs.org/#toArray">toArray</a></li> <li><a href="http://underscorejs.org/#first">first</a></li> <li><a href="http://underscorejs.org/#initial">initial</a></li> <li><a href="http://underscorejs.org/#rest">rest</a></li> <li><a href="http://underscorejs.org/#last">last</a></li> <li><a href="http://underscorejs.org/#without">without</a></li> <li><a href="http://underscorejs.org/#isEmpty">isEmpty</a></li> <li><a href="http://underscorejs.org/#pluck">pluck</a></li> <li><a href="http://underscorejs.org/#partition">partition</a></li> </ul> <p>These methods can be called directly on the container, to iterate and process the views held by the container.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Backbone <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> collectionView = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-attr">collection</span>: <span class="hljs-keyword">new</span> Backbone.Collection()
});

collectionView.render();

<span class="hljs-comment">// iterate over all of the views and process them</span>
collectionView.children.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">childView</span>) </span>{
  <span class="hljs-comment">// process the `childView` here</span>
});
</pre> <h2 id="listening-to-events-on-the-children">
Listening to Events on the <code>children</code>
</h2>
<p>The <code>CollectionView</code> can take action depending on what events are triggered in its <code>children</code>.</p> <p>Read More:</p> <ul> <li><a href="events#event-bubbling">Child Event Bubbling</a></li> </ul> <h2 id="self-managed-children">
Self Managed <code>children</code>
</h2>
<p>In addition to children added by Marionette matching the model of a <code>collection</code>, the <code>children</code> of the <code>CollectionView</code> can be manually managed.</p> <h3 id="adding-a-child-view">
Adding a Child View</h3>
<p>The <code>addChildView</code> method can be used to add a view that is independent of your <code>Backbone.Collection</code>. This method takes two parameters, the child view instance and optionally the index for where it should be placed within the <a href="#managing-children">CollectionView's <code>children</code></a>. It returns the added view.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;
<span class="hljs-keyword">import</span> ButtonView <span class="hljs-keyword">from</span> <span class="hljs-string">'./button-view'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  onRender() {
    View = <span class="hljs-keyword">new</span> ButtonView();
    <span class="hljs-keyword">this</span>.addChildView(buttonView, <span class="hljs-keyword">this</span>.children.length);
  }
});

<span class="hljs-keyword">const</span> myCollectionView = <span class="hljs-keyword">new</span> MyCollectionView();

myCollectionView.render();
</pre> <p><strong>Note</strong> Unless an index is specified, this added view will be subject to filtering and sorting and may be difficult to manage in complex situations. Use with care.</p> <h3 id="removing-a-child-view">
Removing a Child View</h3>
<p>The <code>removeChildView</code> method is useful if you need to remove and destroy a view from the <code>CollectionView</code> without affecting the view's collection. In most cases it is better to use the data to determine what the <code>CollectionView</code> should display.</p> <p>This method accepts the child view instance to remove as its parameter. It returns the removed view;</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  onChildViewFooEvent(childView, model) {
    <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> we must wait for the server to confirm</span>
    <span class="hljs-comment">// the destroy PRIOR to removing it from the collection</span>
    model.destroy({<span class="hljs-attr">wait</span>: <span class="hljs-literal">true</span>});

    <span class="hljs-comment">// but go ahead and remove it visually</span>
    <span class="hljs-keyword">this</span>.removeChildView(childView);
  }
});
</pre> <h3 id="detaching-a-child-view">
Detaching a Child View</h3>
<p>This method is the same as <a href="#removing-a-child-view"><code>removeChildView</code></a> with the exception that the removed view is not destroyed.</p> <h3 id="swapping-child-views">
Swapping Child Views</h3>
<p>Swap the location of two views in the <code>CollectionView</code> <code>children</code> and in the <code>el</code>. This can be useful when sorting is arbitrary or is not performant.</p> <p><strong>Errors</strong> If either of the two views aren't part of the <code>CollectionView</code> an error will be thrown.</p> <p>If one child is in the <code>el</code> but the other is not, <a href="#filtering-the-children">filter</a> will be called.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Backbone <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;
<span class="hljs-keyword">import</span> MyChildView <span class="hljs-keyword">from</span> <span class="hljs-string">'./my-child-view'</span>;

<span class="hljs-keyword">const</span> collection = <span class="hljs-keyword">new</span> Backbone.Collection([
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'first'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'middle'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'last'</span> }
]);

<span class="hljs-keyword">const</span> myColView = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-attr">collection</span>: collection,
  <span class="hljs-attr">childView</span>: MyChildView
});

myColView.swapChildViews(myColView.children.first(), myColView.children.last());

myColView.children.first().model.get(<span class="hljs-string">'name'</span>); <span class="hljs-comment">// "last"</span>
myColView.children.last().model.get(<span class="hljs-string">'name'</span>); <span class="hljs-comment">// "first"</span>
</pre> <h2 id="sorting-the-children">
Sorting the <code>children</code>
</h2>
<p>The <code>sort</code> method will loop through the <code>CollectionView</code> <code>children</code> prior to filtering and sort them with the <a href="#defining-the-viewcomparator"><code>viewComparator</code></a>. By default, if a <code>viewComparator</code> is not set, the <code>CollectionView</code> will sort the views by the order of the models in the <code>collection</code>. If set to <code>false</code> view sorting will be disabled.</p> <p>This method is called internally when rendering and <a href="events.class#sort-and-beforesort-events"><code>sort</code> and <code>before:sort</code> events</a> will trigger.</p> <p>By default the <code>CollectionView</code> will maintain a sorted collection's order in the DOM. This behavior can be disabled by specifying <code>{sortWithCollection: false}</code> on initialize.</p> <h3 id="defining-the-viewcomparator">
Defining the <code>viewComparator</code>
</h3>
<p><code>CollectionView</code> allows for a custom <code>viewComparator</code> option if you want your <code>CollectionView</code>'s children to be rendered with a different sort order than the underlying Backbone collection uses.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> myCollectionView = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-attr">collection</span>: someCollection,
  <span class="hljs-attr">viewComparator</span>: <span class="hljs-string">'otherFieldToSortOn'</span>
});
</pre> <pre data-language="javascript"><span class="hljs-keyword">import</span> Backbone <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> myCollection = <span class="hljs-keyword">new</span> Backbone.Collection([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span> }
]);

myCollection.comparator = <span class="hljs-string">'id'</span>;

<span class="hljs-keyword">const</span> mySortedColView = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-comment">//...</span>
  collection: myCollection
});

<span class="hljs-keyword">const</span> myUnsortedColView = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-comment">//...</span>
  collection: myCollection,
  <span class="hljs-attr">viewComparator</span>: <span class="hljs-literal">false</span>
});

mySortedColView.render(); <span class="hljs-comment">// 1 4 3 2</span>
myUnsortedColView.render(); <span class="hljs-comment">// 1 4 3 2</span>

myCollection.sort();
<span class="hljs-comment">// mySortedColView auto-renders 1 2 3 4</span>
<span class="hljs-comment">// myUnsortedColView has no change</span>
</pre> <p>The <code>viewComparator</code> can take any of the acceptable <code>Backbone.Collection</code> <a href="http://backbonejs.org/#Collection-comparator">comparator formats</a> -- a sortBy (pass a function that takes a single argument), as a sort (pass a comparator function that expects two arguments), or as a string indicating the attribute to sort by.</p> <h4>
<code>getComparator</code>
</h4>
<p>Override this method to determine which <code>viewComparator</code> to use.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  sortAsc(model) {
    <span class="hljs-keyword">return</span> -model.get(<span class="hljs-string">'order'</span>);
  },
  sortDesc(model) {
    <span class="hljs-keyword">return</span> model.get(<span class="hljs-string">'order'</span>);
  },
  getComparator() {
    <span class="hljs-comment">// The collectionView's model</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.model.get(<span class="hljs-string">'sorted'</span>) === <span class="hljs-string">'ASC'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sortAsc;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sortDesc;
  }
});
</pre> <h4>
<code>setComparator</code>
</h4>
<p>The <code>setComparator</code> method modifies the <code>CollectionView</code>'s <code>viewComparator</code> attribute and re-sorts. Passing <code>{ preventRender: true }</code> in the options argument will prevent the view being rendered.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> cv = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-attr">collection</span>: someCollection
});

cv.render();

<span class="hljs-comment">// Note: the setComparator is preventing the automatic re-render</span>
cv.setComparator(<span class="hljs-string">'orderBy'</span>, { <span class="hljs-attr">preventRender</span>: <span class="hljs-literal">true</span> });

<span class="hljs-comment">// Render the children ordered by the orderBy attribute</span>
cv.render();
</pre> <h4>
<code>removeComparator</code>
</h4>
<p>This function is actually an alias of <code>setComparator(null, options)</code>. It is useful for removing the comparator. <code>removeComparator</code> also accepts <code>preventRender</code> as a option.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> cv = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-attr">collection</span>: someCollection
});

cv.render();

cv.setComparator(<span class="hljs-string">'orderBy'</span>);

<span class="hljs-comment">//Remove the current comparator without rendering again.</span>
cv.removeComparator({ <span class="hljs-attr">preventRender</span>: <span class="hljs-literal">true</span> });
</pre> <h3 id="maintaining-the-collection-s-sort">
Maintaining the <code>collection</code>'s sort</h3>
<p>By default the <code>CollectionView</code> will maintain a sorted collection's order in the DOM. This behavior can be disabled by specifying <code>{sortWithCollection: false}</code> on initialize or on the view definiton.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Backbone <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> myCollection = <span class="hljs-keyword">new</span> Backbone.Collection([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span> }
]);

myCollection.comparator = <span class="hljs-string">'id'</span>;

<span class="hljs-keyword">const</span> mySortedColView = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-comment">//...</span>
  collection: myCollection
});

<span class="hljs-keyword">const</span> myUnsortedColView = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-comment">//...</span>
  collection: myCollection,
  <span class="hljs-attr">sortWithCollection</span>: <span class="hljs-literal">false</span>
});

mySortedColView.render(); <span class="hljs-comment">// 1 4 3 2</span>
myUnsortedColView.render(); <span class="hljs-comment">// 1 4 3 2</span>

myCollection.sort();
<span class="hljs-comment">// mySortedColView auto-renders 1 2 3 4</span>
<span class="hljs-comment">// myUnsortedColView has no change</span>
</pre> <h2 id="filtering-the-children">
Filtering the <code>children</code>
</h2>
<p>The <code>filter</code> method will loop through the <code>CollectionView</code>'s sorted <code>children</code> and test them against the <a href="#defining-the-viewfilter"><code>viewFilter</code></a>. The views that pass the <code>viewFilter</code>are rendered if necessary and attached to the CollectionView and the views that are filtered out will be detached. After filtering the <code>children</code> will only contain the views to be attached.</p> <p>If a <code>viewFilter</code> exists the <a href="events.class#filter-and-beforefilter-events"><code>filter</code> and <code>before:filter</code> events</a> will trigger.</p> <p>By default the CollectionView will refilter when views change or when the CollectionView is sorted.</p> <p><strong>Note</strong> This is a presentation functionality used to easily filter in and out constructed children. All children of a <code>collection</code> will be instantiated once regardless of their filtered status. If you would prefer to manage child view instantiation, you should filter the <code>collection</code> itself.</p> <h3 id="defining-the-viewfilter">
Defining the <code>viewFilter</code>
</h3>
<p><code>CollectionView</code> allows for a custom <code>viewFilter</code> option if you want to prevent some of the underlying <code>children</code> from being attached to the DOM. A <code>viewFilter</code> can be a function, predicate object. or string.</p> <p><strong>Errors</strong> An error will be thrown if the <code>ViewFilter</code> is not one of these options.</p> <h4>
<code>viewFilter</code> as a function</h4>
<p>The <code>viewFilter</code> function takes a view from the <code>children</code> and returns a truthy value if the child should be attached, and a falsey value if it should not.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Backbone <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> cv = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-attr">childView</span>: SomeChildView,
  <span class="hljs-attr">emptyView</span>: SomeEmptyView,
  <span class="hljs-attr">collection</span>: <span class="hljs-keyword">new</span> Bb.Collection([
    { <span class="hljs-attr">value</span>: <span class="hljs-number">1</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-number">2</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-number">3</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-number">4</span> }
  ]),

  <span class="hljs-comment">// Only show views with even values</span>
  viewFilter(view, index, children) {
    <span class="hljs-keyword">return</span> view.model.get(<span class="hljs-string">'value'</span>) % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;
  }
});

<span class="hljs-comment">// renders the views with values '2' and '4'</span>
cv.render();
</pre> <h4>
<code>viewFilter</code> as a predicate object</h4>
<p>The <code>viewFilter</code> predicate object will filter against the view's model attributes.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Backbone <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> cv = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-attr">childView</span>: SomeChildView,
  <span class="hljs-attr">emptyView</span>: SomeEmptyView,
  <span class="hljs-attr">collection</span>: <span class="hljs-keyword">new</span> Bb.Collection([
    { <span class="hljs-attr">value</span>: <span class="hljs-number">1</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-number">2</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-number">3</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-number">4</span> }
  ]),

  <span class="hljs-comment">// Only show views with value 2</span>
  viewFilter: { <span class="hljs-attr">value</span>: <span class="hljs-number">2</span> }
});

<span class="hljs-comment">// renders the view with values '2'</span>
cv.render();
</pre> <h4>
<code>viewFilter</code> as a string</h4>
<p>The <code>viewFilter</code> string represents the view's model attribute and will filter truthy values.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> Backbone <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone'</span>;
<span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> cv = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-attr">childView</span>: SomeChildView,
  <span class="hljs-attr">emptyView</span>: SomeEmptyView,
  <span class="hljs-attr">collection</span>: <span class="hljs-keyword">new</span> Bb.Collection([
    { <span class="hljs-attr">value</span>: <span class="hljs-number">0</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-number">1</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-number">2</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span> },
    { <span class="hljs-attr">value</span>: <span class="hljs-number">4</span> }
  ]),

  <span class="hljs-comment">// Only show views 1,2, and 4</span>
  viewFilter: <span class="hljs-string">'value'</span>
});

<span class="hljs-comment">// renders the view with values '1', '2', and '4'</span>
cv.render();
</pre> <h4>
<code>getFilter</code>
</h4>
<p>Override this function to programatically decide which <code>viewFilter</code> to use when <code>filter</code> is called.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> MyCollectionView = CollectionView.extend({
  summaryFilter(view) {
    <span class="hljs-keyword">return</span> view.model.get(<span class="hljs-string">'type'</span>) === <span class="hljs-string">'summary'</span>;
  },
  getFilter() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection.length &gt; <span class="hljs-number">100</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.summaryFilter;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.viewFilter;
  }
});
</pre> <h4>
<code>setFilter</code>
</h4>
<p>The <code>setFilter</code> method modifies the <code>CollectionView</code>'s <code>viewFilter</code> attribute and filters. Passing <code>{ preventRender: true }</code> in the options argument will prevent the view being rendered.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> cv = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-attr">collection</span>: someCollection
});

cv.render();

<span class="hljs-keyword">const</span> newFilter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">view, index, children</span>) </span>{
  <span class="hljs-keyword">return</span> view.model.get(<span class="hljs-string">'value'</span>) % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;
};

<span class="hljs-comment">// Note: the setFilter is preventing the automatic re-render</span>
cv.setFilter(newFilter, { <span class="hljs-attr">preventRender</span>: <span class="hljs-literal">true</span> });

<span class="hljs-comment">//Render the new state of the ChildViews instead of the whole DOM.</span>
cv.render();
</pre> <h4>
<code>removeFilter</code>
</h4>
<p>This function is actually an alias of <code>setFilter(null, options)</code>. It is useful for removing filters. <code>removeFilter</code> also accepts <code>preventRender</code> as a option.</p> <pre data-language="javascript"><span class="hljs-keyword">import</span> { CollectionView } <span class="hljs-keyword">from</span> <span class="hljs-string">'backbone.marionette'</span>;

<span class="hljs-keyword">const</span> cv = <span class="hljs-keyword">new</span> CollectionView({
  <span class="hljs-attr">collection</span>: someCollection
});

cv.render();

cv.setFilter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">view, index, children</span>) </span>{
  <span class="hljs-keyword">return</span> view.model.get(<span class="hljs-string">'value'</span>) % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>;
});

<span class="hljs-comment">//Remove the current filter without rendering again.</span>
cv.removeFilter({ <span class="hljs-attr">preventRender</span>: <span class="hljs-literal">true</span> });
</pre>
<div class="_attribution">
  <p class="_attribution-p">
     2017 Muted Solutions, LLC<br>Licensed under the MIT License.<br>
    <a href="https://marionettejs.com/docs/v4.0.0/marionette.collectionview.html" class="_attribution-link">https://marionettejs.com/docs/v4.0.0/marionette.collectionview.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
