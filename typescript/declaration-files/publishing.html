
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Publishing - TypeScript - W3cubDocs</title>
  
  <meta name="description" content="Now that you have authored a declaration file following the steps of this guide, it is time to publish it to npm. There are two main ways you can &hellip;">
  <meta name="keywords" content="publishing, typescript">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/typescript/declaration-files/publishing.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-1810d67ab7e57be09d8247710d2feb6954566959eb82322d1fee3a0c9156f56974b78ebaa9928774f00767342bbe58b0799d91fcc336b92b319170b196f9b64b.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/typescript.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/typescript/" class="_nav-link" title="" style="margin-left:0;">TypeScript</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _typescript">
				
				
<h1>Publishing</h1>
<p>Now that you have authored a declaration file following the steps of this guide, it is time to publish it to npm. There are two main ways you can publish your declaration files to npm:</p> <ol> <li>bundling with your npm package</li> <li>publishing to the <a href="https://www.npmjs.com/~types">@types organization</a> on npm.</li> </ol> <p>If your types are generated by your source code, publish the types with your source code. Both TypeScript and JavaScript projects can generate types via <a href="https://www.typescriptlang.org/tsconfig#declaration"><code>declaration</code></a>.</p> <p>Otherwise, we recommend submitting the types to DefinitelyTyped, which will publish them to the <code>@types</code> organization on npm.</p> <h2 id="including-declarations-in-your-npm-package" style="position:relative;">Including declarations in your npm package</h2> <p>If your package has a main <code>.js</code> file, you will need to indicate the main declaration file in your <code>package.json</code> file as well. Set the <code>types</code> property to point to your bundled declaration file. For example:</p> <pre data-language="json">{
  "name": "awesome",
  "author": "Vandelay Industries",
  "version": "1.0.0",
  "main": "./lib/main.js",
  "types": "./lib/main.d.ts"
}</pre> <p>Note that the <code>"typings"</code> field is synonymous with <code>types</code>, and could be used as well.</p> <p>Also note that if your main declaration file is named <code>index.d.ts</code> and lives at the root of the package (next to <code>index.js</code>) you do not need to mark the <code>types</code> property, though it is advisable to do so.</p> <h2 id="dependencies" style="position:relative;">Dependencies</h2> <p>All dependencies are managed by npm. Make sure all the declaration packages you depend on are marked appropriately in the <code>"dependencies"</code> section in your <code>package.json</code>. For example, imagine we authored a package that used Browserify and TypeScript.</p> <pre data-language="json">{
  "name": "browserify-typescript-extension",
  "author": "Vandelay Industries",
  "version": "1.0.0",
  "main": "./lib/main.js",
  "types": "./lib/main.d.ts",
  "dependencies": {
    "browserify": "latest",
    "@types/browserify": "latest",
    "typescript": "next"
  }
}</pre> <p>Here, our package depends on the <code>browserify</code> and <code>typescript</code> packages. <code>browserify</code> does not bundle its declaration files with its npm packages, so we needed to depend on <code>@types/browserify</code> for its declarations. <code>typescript</code>, on the other hand, packages its declaration files, so there was no need for any additional dependencies.</p> <p>Our package exposes declarations from each of those, so any user of our <code>browserify-typescript-extension</code> package needs to have these dependencies as well. For that reason, we used <code>"dependencies"</code> and not <code>"devDependencies"</code>, because otherwise our consumers would have needed to manually install those packages. If we had just written a command line application and not expected our package to be used as a library, we might have used <code>devDependencies</code>.</p> <h2 id="red-flags" style="position:relative;">Red flags</h2> <h3 id="-reference-path-" style="position:relative;"><code>/// &lt;reference path="..." /&gt;</code></h3> <p><em>Don’t</em> use <code>/// &lt;reference path="..." /&gt;</code> in your declaration files.</p> <pre data-language="ts">/// &lt;reference path="../typescript/lib/typescriptServices.d.ts" /&gt;
....</pre> <p><em>Do</em> use <code>/// &lt;reference types="..." /&gt;</code> instead.</p> <pre data-language="ts">/// &lt;reference types="typescript" /&gt;
....</pre> <p>Make sure to revisit the <a href="library-structures#consuming-dependencies">Consuming dependencies</a> section for more information.</p> <h3 id="packaging-dependent-declarations" style="position:relative;">Packaging dependent declarations</h3> <p>If your type definitions depend on another package:</p> <ul> <li>
<em>Don’t</em> combine it with yours, keep each in their own file.</li> <li>
<em>Don’t</em> copy the declarations in your package either.</li> <li>
<em>Do</em> depend on the npm type declaration package if it doesn’t package its declaration files.</li> </ul> <h2 id="version-selection-with-typesversions" style="position:relative;">Version selection with <code>typesVersions</code>
</h2> <p>When TypeScript opens a <code>package.json</code> file to figure out which files it needs to read, it first looks at a field called <code>typesVersions</code>.</p> <h4 id="folder-redirects-using-" style="position:relative;">Folder redirects (using <code>*</code>)</h4> <p>A <code>package.json</code> with a <code>typesVersions</code> field might look like this:</p> <pre data-language="json">{
  "name": "package-name",
  "version": "1.0.0",
  "types": "./index.d.ts",
  "typesVersions": {
    "&gt;=3.1": { "*": ["ts3.1/*"] }
  }
}</pre> <p>This <code>package.json</code> tells TypeScript to first check the current version of TypeScript. If it’s 3.1 or later, TypeScript figures out the path you’ve imported relative to the package, and reads from the package’s <code>ts3.1</code> folder.</p> <p>That’s what that <code>{ "*": ["ts3.1/*"] }</code> means - if you’re familiar with <a href="https://www.typescriptlang.org/tsconfig#paths">path mapping</a>, it works exactly like that.</p> <p>In the above example, if we’re importing from <code>"package-name"</code>, TypeScript will try to resolve from <code>[...]/node_modules/package-name/ts3.1/index.d.ts</code> (and other relevant paths) when running in TypeScript 3.1. If we import from <code>package-name/foo</code>, we’ll try to look for <code>[...]/node_modules/package-name/ts3.1/foo.d.ts</code> and <code>[...]/node_modules/package-name/ts3.1/foo/index.d.ts</code>.</p> <p>What if we’re not running in TypeScript 3.1 in this example? Well, if none of the fields in <code>typesVersions</code> get matched, TypeScript falls back to the <code>types</code> field, so here TypeScript 3.0 and earlier will be redirected to <code>[...]/node_modules/package-name/index.d.ts</code>.</p> <h4 id="file-redirects" style="position:relative;">File redirects</h4> <p>When you want to only change the resolution for a single file at a time, you can tell TypeScript the file to resolve differently by passing in the exact filenames:</p> <pre data-language="json">{
  "name": "package-name",
  "version": "1.0.0",
  "types": "./index.d.ts",
  "typesVersions": {
    "&lt;4.0": { "index.d.ts": ["index.v3.d.ts"] }
  }
}</pre> <p>On TypeScript 4.0 and above, an import for <code>"package-name"</code> would resolve to <code>./index.d.ts</code> and for 3.9 and below <code>"./index.v3.d.ts</code>.</p> <h2 id="matching-behavior" style="position:relative;">Matching behavior</h2> <p>The way that TypeScript decides on whether a version of the compiler &amp; language matches is by using Node’s <a href="https://github.com/npm/node-semver#ranges">semver ranges</a>.</p> <h2 id="multiple-fields" style="position:relative;">Multiple fields</h2> <p><code>typesVersions</code> can support multiple fields where each field name is specified by the range to match on.</p> <pre tsconfig="true" data-language="typescript">{
  "name": "package-name",
  "version": "1.0",
  "types": "./index.d.ts",
  "typesVersions": {
    "&gt;=3.2": { "*": ["ts3.2/*"] },
    "&gt;=3.1": { "*": ["ts3.1/*"] }
  }
}</pre> <p>Since ranges have the potential to overlap, determining which redirect applies is order-specific. That means in the above example, even though both the <code>&gt;=3.2</code> and the <code>&gt;=3.1</code> matchers support TypeScript 3.2 and above, reversing the order could have different behavior, so the above sample would not be equivalent to the following.</p> <pre tsconfig="true" data-language="typescript">{
  "name": "package-name",
  "version": "1.0",
  "types": "./index.d.ts",
  "typesVersions": {
    // NOTE: this doesn't work!
    "&gt;=3.1": { "*": ["ts3.1/*"] },
    "&gt;=3.2": { "*": ["ts3.2/*"] }
  }
}</pre> <h2 id="publish-to-types" style="position:relative;">Publish to </h2> <p>Packages under the <a href="https://www.npmjs.com/~types">@types</a> organization are published automatically from <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> using the <a href="https://github.com/microsoft/DefinitelyTyped-tools/tree/master/packages/publisher">types-publisher tool</a>. To get your declarations published as an @types package, please submit a pull request to <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a>. You can find more details in the <a href="https://definitelytyped.org/guides/contributing.html">contribution guidelines page</a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012-2022 Microsoft<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html" class="_attribution-link">https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
