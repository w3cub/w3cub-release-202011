
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Tsv - Tcl&#47;Tk - W3cubDocs</title>
  
  <meta name="description" content="Thread shared variables are not bound to any thread explicitly . That means that when a thread which created any of thread shared variables exits, &hellip;">
  <meta name="keywords" content="tsv, tcl, tk, tcl_tk">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/tcl_tk/threadcmd/tsv.htm.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/tcl_tk.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tcl_tk/" class="_nav-link" title="" style="margin-left:0;">Tcl/Tk</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _tcl_tk">
				
				
<h1>tsv</h1>  <dl> <dd id="L69">
<a href="tsv.htm#M2" name="L69">NAME</a> <dl><dd>tsv — Part of the Tcl threading extension allowing script level manipulation of data shared between threads .</dd></dl> <dd id="L70">
<a href="tsv.htm#M3" name="L70">SYNOPSIS</a>  <dd id="L71">
<a href="tsv.htm#M4" name="L71">DESCRIPTION</a> <dd id="L72">
<a href="tsv.htm#M5" name="L72">ELEMENT COMMANDS</a> <dl class="element commands"> <dd id="L73">
<a href="tsv.htm#M6" name="L73"><b>tsv::names</b> ?pattern?</a> <dd id="L74">
<a href="tsv.htm#M7" name="L74"><b>tsv::object</b> <i>varname</i> <i>element</i></a> <dd id="L75">
<a href="tsv.htm#M8" name="L75"><b>tsv::set</b> <i>varname</i> <i>element</i> ?value?</a> <dd id="L76">
<a href="tsv.htm#M9" name="L76"><b>tsv::get</b> <i>varname</i> <i>element</i> ?namedvar?</a> <dd id="L77">
<a href="tsv.htm#M10" name="L77"><b>tsv::unset</b> <i>varname</i> ?element?</a> <dd id="L78">
<a href="tsv.htm#M11" name="L78"><b>tsv::exists</b> <i>varname</i> <i>element</i></a> <dd id="L79">
<a href="tsv.htm#M12" name="L79"><b>tsv::pop</b> <i>varname</i> <i>element</i></a> <dd id="L80">
<a href="tsv.htm#M13" name="L80"><b>tsv::move</b> <i>varname</i> <i>oldname</i> <i>newname</i></a> <dd id="L81">
<a href="tsv.htm#M14" name="L81"><b>tsv::incr</b> <i>varname</i> <i>element</i> ?count?</a> <dd id="L82">
<a href="tsv.htm#M15" name="L82"><b>tsv::append</b> <i>varname</i> <i>element</i> <i>value</i> ?value . . .?</a> <dd id="L83">
<a href="tsv.htm#M16" name="L83"><b>tsv::lock</b> <i>varname</i> <i>arg</i> ?arg . . .?</a> <dd id="L84">
<a href="tsv.htm#M17" name="L84"><b>tsv::handlers</b></a> </dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dl> <dd id="L85">
<a href="tsv.htm#M18" name="L85">LIST COMMANDS</a> <dl class="list commands"> <dd id="L86">
<a href="tsv.htm#M19" name="L86"><b>tsv::lappend</b> <i>varname</i> <i>element</i> <i>value</i> ?value . . .?</a> <dd id="L87">
<a href="tsv.htm#M20" name="L87"><b>tsv::linsert</b> <i>varname</i> <i>element</i> <i>index</i> <i>value</i> ?value . . .?</a> <dd id="L88">
<a href="tsv.htm#M21" name="L88"><b>tsv::lreplace</b> <i>varname</i> <i>element</i> <i>first</i> <i>last</i> ?value . . .?</a> <dd id="L89">
<a href="tsv.htm#M22" name="L89"><b>tsv::llength</b> <i>varname</i> <i>element</i></a> <dd id="L90">
<a href="tsv.htm#M23" name="L90"><b>tsv::lindex</b> <i>varname</i> <i>element</i> ?index?</a> <dd id="L91">
<a href="tsv.htm#M24" name="L91"><b>tsv::lrange</b> <i>varname</i> <i>element</i> <i>from</i> <i>to</i></a> <dd id="L92">
<a href="tsv.htm#M25" name="L92"><b>tsv::lsearch</b> <i>varname</i> <i>element</i> ?options? <i>pattern</i></a> <dd id="L93">
<a href="tsv.htm#M26" name="L93"><b>tsv::lset</b> <i>varname</i> <i>element</i> <i>index</i> ?index . . .? <i>value</i></a> <dd id="L94">
<a href="tsv.htm#M27" name="L94"><b>tsv::lpop</b> <i>varname</i> <i>element</i> ?index?</a> <dd id="L95">
<a href="tsv.htm#M28" name="L95"><b>tsv::lpush</b> <i>varname</i> <i>element</i> ?index?</a> </dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dl> <dd id="L96">
<a href="tsv.htm#M29" name="L96">ARRAY COMMANDS</a> <dl class="array commands"> <dd id="L97">
<a href="tsv.htm#M30" name="L97"><b>tsv::array set</b> <i>varname</i> <i>list</i></a> <dd id="L98">
<a href="tsv.htm#M31" name="L98"><b>tsv::array get</b> <i>varname</i> ?pattern?</a> <dd id="L99">
<a href="tsv.htm#M32" name="L99"><b>tsv::array names</b> <i>varname</i> ?pattern?</a> <dd id="L100">
<a href="tsv.htm#M33" name="L100"><b>tsv::array size</b> <i>varname</i></a> <dd id="L101">
<a href="tsv.htm#M34" name="L101"><b>tsv::array reset</b> <i>varname</i> <i>list</i></a> <dd id="L102">
<a href="tsv.htm#M35" name="L102"><b>tsv::array bind</b> <i>varname</i> <i>handle</i></a> <dd id="L103">
<a href="tsv.htm#M36" name="L103"><b>tsv::array unbind</b> <i>varname</i></a> <dd id="L104">
<a href="tsv.htm#M37" name="L104"><b>tsv::array isbound</b> <i>varname</i></a> </dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dl> <dd id="L105">
<a href="tsv.htm#M38" name="L105">KEYED LIST COMMANDS</a> <dl class="keyed list commands"> <dd id="L106">
<a href="tsv.htm#M39" name="L106"><b>tsv::keyldel</b> <i>varname</i> <i>keylist</i> <i>key</i></a> <dd id="L107">
<a href="tsv.htm#M40" name="L107"><b>tsv::keylget</b> <i>varname</i> <i>keylist</i> <i>key</i> ?retvar?</a> <dd id="L108">
<a href="tsv.htm#M41" name="L108"><b>tsv::keylkeys</b> <i>varname</i> <i>keylist</i> ?key?</a> <dd id="L109">
<a href="tsv.htm#M42" name="L109"><b>tsv::keylset</b> <i>varname</i> <i>keylist</i> <i>key</i> <i>value</i> ?key value . .?</a> </dd>
</dd>
</dd>
</dd>
</dl> <dd id="L110">
<a href="tsv.htm#M43" name="L110">DISCUSSION</a> <dd id="L111">
<a href="tsv.htm#M44" name="L111">CREDITS</a> <dd id="L112">
<a href="tsv.htm#M45" name="L112">SEE ALSO</a> <dd id="L113">
<a href="tsv.htm#M46" name="L113">KEYWORDS</a> </dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dd>
</dl> <h2 id="M2">Name</h2> tsv — Part of the Tcl threading extension allowing script level manipulation of data shared between threads . <h2 id="M3">Synopsis</h2> package require <b>Tcl 8 .4</b><br> package require <b>Thread ?2 .8?</b><br> <b>tsv::names</b> ?pattern?<br> <b>tsv::object</b> <i>varname</i> <i>element</i><br> <b>tsv::set</b> <i>varname</i> <i>element</i> ?value?<br> <b>tsv::get</b> <i>varname</i> <i>element</i> ?namedvar?<br> <b>tsv::unset</b> <i>varname</i> ?element?<br> <b>tsv::exists</b> <i>varname</i> <i>element</i><br> <b>tsv::pop</b> <i>varname</i> <i>element</i><br> <b>tsv::move</b> <i>varname</i> <i>oldname</i> <i>newname</i><br> <b>tsv::incr</b> <i>varname</i> <i>element</i> ?count?<br> <b>tsv::append</b> <i>varname</i> <i>element</i> <i>value</i> ?value . . .?<br> <b>tsv::lock</b> <i>varname</i> <i>arg</i> ?arg . . .?<br> <b>tsv::handlers</b><br> <b>tsv::lappend</b> <i>varname</i> <i>element</i> <i>value</i> ?value . . .?<br> <b>tsv::linsert</b> <i>varname</i> <i>element</i> <i>index</i> <i>value</i> ?value . . .?<br> <b>tsv::lreplace</b> <i>varname</i> <i>element</i> <i>first</i> <i>last</i> ?value . . .?<br> <b>tsv::llength</b> <i>varname</i> <i>element</i><br> <b>tsv::lindex</b> <i>varname</i> <i>element</i> ?index?<br> <b>tsv::lrange</b> <i>varname</i> <i>element</i> <i>from</i> <i>to</i><br> <b>tsv::lsearch</b> <i>varname</i> <i>element</i> ?options? <i>pattern</i><br> <b>tsv::lset</b> <i>varname</i> <i>element</i> <i>index</i> ?index . . .? <i>value</i><br> <b>tsv::lpop</b> <i>varname</i> <i>element</i> ?index?<br> <b>tsv::lpush</b> <i>varname</i> <i>element</i> ?index?<br> <b>tsv::array set</b> <i>varname</i> <i>list</i><br> <b>tsv::array get</b> <i>varname</i> ?pattern?<br> <b>tsv::array names</b> <i>varname</i> ?pattern?<br> <b>tsv::array size</b> <i>varname</i><br> <b>tsv::array reset</b> <i>varname</i> <i>list</i><br> <b>tsv::array bind</b> <i>varname</i> <i>handle</i><br> <b>tsv::array unbind</b> <i>varname</i><br> <b>tsv::array isbound</b> <i>varname</i><br> <b>tsv::keyldel</b> <i>varname</i> <i>keylist</i> <i>key</i><br> <b>tsv::keylget</b> <i>varname</i> <i>keylist</i> <i>key</i> ?retvar?<br> <b>tsv::keylkeys</b> <i>varname</i> <i>keylist</i> ?key?<br> <b>tsv::keylset</b> <i>varname</i> <i>keylist</i> <i>key</i> <i>value</i> ?key value . .?<br> <h2 id="M4">Description</h2> This section describes commands implementing thread shared variables . A thread shared variable is very similar to a Tcl array but in contrast to a Tcl array it is created in shared memory and can be accessed from many threads at the same time . Important feature of thread shared variable is that each access to the variable is internaly protected by a mutex so script programmer does not have to take care about locking the variable himself . <p> Thread shared variables are not bound to any thread explicitly . That means that when a thread which created any of thread shared variables exits, the variable and associated memory is not unset/reclaimed . User has to explicitly unset the variable to reclaim the memory consumed by the variable . </p>
<h2 id="M5">Element commands</h2> <dl class="element commands"> <dt id="M6">
<b>tsv::names</b> ?pattern?</dt>
<dd> Returns names of shared variables matching optional ?pattern? or all known variables if pattern is ommited . 
</dd>
<dt id="M7">
<b>tsv::object</b> <i>varname</i> <i>element</i>
</dt>
<dd> Creates object accessor command for the <i>element</i> in the shared variable <i>varname</i> . Using this command, one can apply most of the other shared variable commands as method functions of the element object command . The object command is automatically deleted when the element which this command is pointing to is unset . <pre>% tsv::set foo bar "A shared string"
    % set string [tsv::object foo bar]
    % $string append " appended"
    =&gt; A shared string appended</pre> 
</dd>
<dt id="M8">
<b>tsv::set</b> <i>varname</i> <i>element</i> ?value?</dt>
<dd> Sets the value of the <i>element</i> in the shared variable <i>varname</i> to <i>value</i> and returns the value to caller . The <i>value</i> may be ommited, in which case the command will return the current value of the element . If the element cannot be found, error is triggered . 
</dd>
<dt id="M9">
<b>tsv::get</b> <i>varname</i> <i>element</i> ?namedvar?</dt>
<dd> Retrieves the value of the <i>element</i> from the shared variable <i>varname</i> . If the optional argument <i>namedvar</i> is given, the value is stored in the named variable . Return value of the command depends of the existence of the optional argument <i>namedvar</i> . If the argument is ommited and the requested element cannot be found in the shared array, the command triggers error . If, however, the optional argument is given on the command line, the command returns true (1) if the element is found or false (0) if the element is not found . 
</dd>
<dt id="M10">
<b>tsv::unset</b> <i>varname</i> ?element?</dt>
<dd> Unsets the <i>element</i> from the shared variable <i>varname</i> . If the optional element is not given, it deletes the variable . 
</dd>
<dt id="M11">
<b>tsv::exists</b> <i>varname</i> <i>element</i>
</dt>
<dd> Checks wether the <i>element</i> exists in the shared variable <i>varname</i> and returns true (1) if it does or false (0) if it doesn't . 
</dd>
<dt id="M12">
<b>tsv::pop</b> <i>varname</i> <i>element</i>
</dt>
<dd> Returns value of the <i>element</i> in the shared variable <i>varname</i> and unsets the element, all in one atomic operation . 
</dd>
<dt id="M13">
<b>tsv::move</b> <i>varname</i> <i>oldname</i> <i>newname</i>
</dt>
<dd> Renames the element <i>oldname</i> to the <i>newname</i> in the shared variable <i>varname</i> . This effectively performs an get/unset/set sequence of operations but all in one atomic step . 
</dd>
<dt id="M14">
<b>tsv::incr</b> <i>varname</i> <i>element</i> ?count?</dt>
<dd> Similar to standard Tcl <b><a href="../tclcmd/incr.htm">incr</a></b> command but increments the value of the <i>element</i> in shared variaboe <i>varname</i> instead of the Tcl variable . 
</dd>
<dt id="M15">
<b>tsv::append</b> <i>varname</i> <i>element</i> <i>value</i> ?value . . .?</dt>
<dd> Similar to standard Tcl <b><a href="../tclcmd/append.htm">append</a></b> command but appends one or more values to the <i>element</i> in shared variable <i>varname</i> instead of the Tcl variable . 
</dd>
<dt id="M16">
<b>tsv::lock</b> <i>varname</i> <i>arg</i> ?arg . . .?</dt>
<dd> This command concatenates passed arguments and evaluates the resulting script under the internal mutex protection . During the script evaluation, the entire shared variable is locked . For shared variable commands within the script, internal locking is disabled so no deadlock can occur . It is also allowed to unset the shared variable from within the script . The shared variable is automatically created if it did not exists at the time of the first lock operation . <pre>% tsv::lock foo {
        tsv::lappend foo bar 1
        tsv::lappend foo bar 2
        puts stderr [tsv::set foo bar]
        tsv::unset foo
    }</pre> 
</dd>
<dt id="M17"><b>tsv::handlers</b></dt>
<dd> Returns the names of all persistent storage handlers enabled at compile time . See <b><a href="#M29">ARRAY COMMANDS</a></b> for details . 
</dd>
</dl> 
<h2 id="M18">List commands</h2> Those command are similar to the equivalently named Tcl command . The difference is that they operate on elements of shared arrays . 
<dl class="list commands"> <dt id="M19">
<b>tsv::lappend</b> <i>varname</i> <i>element</i> <i>value</i> ?value . . .?</dt>
<dd> Similar to standard Tcl <b><a href="../tclcmd/lappend.htm">lappend</a></b> command but appends one or more values to the <i>element</i> in shared variable <i>varname</i> instead of the Tcl variable . 
</dd>
<dt id="M20">
<b>tsv::linsert</b> <i>varname</i> <i>element</i> <i>index</i> <i>value</i> ?value . . .?</dt>
<dd> Similar to standard Tcl <b><a href="../tclcmd/linsert.htm">linsert</a></b> command but inserts one or more values at the <i>index</i> list position in the <i>element</i> in the shared variable <i>varname</i> instead of the Tcl variable . 
</dd>
<dt id="M21">
<b>tsv::lreplace</b> <i>varname</i> <i>element</i> <i>first</i> <i>last</i> ?value . . .?</dt>
<dd> Similar to standard Tcl <b><a href="../tclcmd/lreplace.htm">lreplace</a></b> command but replaces one or more values between the <i>first</i> and <i>last</i> position in the <i>element</i> of the shared variable <i>varname</i> instead of the Tcl variable . 
</dd>
<dt id="M22">
<b>tsv::llength</b> <i>varname</i> <i>element</i>
</dt>
<dd> Similar to standard Tcl <b><a href="../tclcmd/llength.htm">llength</a></b> command but returns length of the <i>element</i> in the shared variable <i>varname</i> instead of the Tcl variable . 
</dd>
<dt id="M23">
<b>tsv::lindex</b> <i>varname</i> <i>element</i> ?index?</dt>
<dd> Similar to standard Tcl <b><a href="../tclcmd/lindex.htm">lindex</a></b> command but returns the value at the <i>index</i> list position of the <i>element</i> from the shared variable <i>varname</i> instead of the Tcl variable . 
</dd>
<dt id="M24">
<b>tsv::lrange</b> <i>varname</i> <i>element</i> <i>from</i> <i>to</i>
</dt>
<dd> Similar to standard Tcl <b><a href="../tclcmd/lrange.htm">lrange</a></b> command but returns values between <i>from</i> and <i>to</i> list positions from the <i>element</i> in the shared variable <i>varname</i> instead of the Tcl variable . 
</dd>
<dt id="M25">
<b>tsv::lsearch</b> <i>varname</i> <i>element</i> ?options? <i>pattern</i>
</dt>
<dd> Similar to standard Tcl <b><a href="../tclcmd/lsearch.htm">lsearch</a></b> command but searches the <i>element</i> in the shared variable <i>varname</i> instead of the Tcl variable . 
</dd>
<dt id="M26">
<b>tsv::lset</b> <i>varname</i> <i>element</i> <i>index</i> ?index . . .? <i>value</i>
</dt>
<dd> Similar to standard Tcl <b><a href="../tclcmd/lset.htm">lset</a></b> command but sets the <i>element</i> in the shared variable <i>varname</i> instead of the Tcl variable . 
</dd>
<dt id="M27">
<b>tsv::lpop</b> <i>varname</i> <i>element</i> ?index?</dt>
<dd> Similar to the standard Tcl <b><a href="../tclcmd/lindex.htm">lindex</a></b> command but in addition to returning, it also splices the value out of the <i>element</i> from the shared variable <i>varname</i> in one atomic operation . In contrast to the Tcl <b><a href="../tclcmd/lindex.htm">lindex</a></b> command, this command returns no value to the caller . 
</dd>
<dt id="M28">
<b>tsv::lpush</b> <i>varname</i> <i>element</i> ?index?</dt>
<dd> This command performes the opposite of the <b>tsv::lpop</b> command . As its counterpart, it returns no value to the caller . 
</dd>
</dl> 
<h2 id="M29">Array commands</h2> This command supports most of the options of the standard Tcl <b><a href="../tclcmd/array.htm">array</a></b> command . In addition to those, it allows binding a shared variable to some persisten storage databases . Currently the persistent options supported are the famous GNU Gdbm and LMDB . These options have to be selected during the package compilation time . The implementation provides hooks for defining other persistency layers, if needed . 
<dl class="array commands"> <dt id="M30">
<b>tsv::array set</b> <i>varname</i> <i>list</i>
</dt>
<dd> Does the same as standard Tcl <b><a href="../tclcmd/array.htm">array set</a></b> . 
</dd>
<dt id="M31">
<b>tsv::array get</b> <i>varname</i> ?pattern?</dt>
<dd> Does the same as standard Tcl <b><a href="../tclcmd/array.htm">array get</a></b> . 
</dd>
<dt id="M32">
<b>tsv::array names</b> <i>varname</i> ?pattern?</dt>
<dd> Does the same as standard Tcl <b><a href="../tclcmd/array.htm">array names</a></b> . 
</dd>
<dt id="M33">
<b>tsv::array size</b> <i>varname</i>
</dt>
<dd> Does the same as standard Tcl <b><a href="../tclcmd/array.htm">array size</a></b> . 
</dd>
<dt id="M34">
<b>tsv::array reset</b> <i>varname</i> <i>list</i>
</dt>
<dd> Does the same as standard Tcl <b><a href="../tclcmd/array.htm">array set</a></b> but it clears the <i>varname</i> and sets new values from the list atomically . 
</dd>
<dt id="M35">
<b>tsv::array bind</b> <i>varname</i> <i>handle</i>
</dt>
<dd> Binds the <i>varname</i> to the persistent storage <i>handle</i> . The format of the <i>handle</i> is &lt;handler&gt;:&lt;address&gt;, where &lt;handler&gt; is "gdbm" for GNU Gdbm and "lmdb" for LMDB and &lt;address&gt; is the path to the database file . 
</dd>
<dt id="M36">
<b>tsv::array unbind</b> <i>varname</i>
</dt>
<dd> Unbinds the shared <i>array</i> from its bound persistent storage . 
</dd>
<dt id="M37">
<b>tsv::array isbound</b> <i>varname</i>
</dt>
<dd> Returns true (1) if the shared <i>varname</i> is bound to some persistent storage or zero (0) if not . 
</dd>
</dl> 
<h2 id="M38">Keyed list commands</h2> Keyed list commands are borrowed from the TclX package . Keyed lists provide a structured data type built upon standard Tcl lists . This is a functionality similar to structs in the C programming language . <p> A keyed list is a list in which each element contains a key and value pair . These element pairs are stored as lists themselves, where the key is the first element of the list, and the value is the second . The key-value pairs are referred to as fields . This is an example of a keyed list: </p>
<pre>{{NAME  {Frank  Zappa}} {JOB {musician and composer}}}</pre> Fields may contain subfields; ` .' is the separator character . Subfields are actually fields where the value is another keyed list . Thus the following list has the top level fields ID and NAME, and subfields NAME .FIRST and NAME .LAST: <pre>{ID 106} {NAME {{FIRST Frank} {LAST Zappa}}}</pre> There is no limit to the recursive depth of subfields, allowing one to build complex data structures . Keyed lists are constructed and accessed via a number of commands . All keyed list management commands take the name of the variable containing the keyed list as an argument (i .e . passed by reference), rather than passing the list directly . 
<dl class="keyed list commands"> <dt id="M39">
<b>tsv::keyldel</b> <i>varname</i> <i>keylist</i> <i>key</i>
</dt>
<dd> Delete the field specified by <i>key</i> from the keyed list <i>keylist</i> in the shared variable <i>varname</i> . This removes both the key and the value from the keyed list . 
</dd>
<dt id="M40">
<b>tsv::keylget</b> <i>varname</i> <i>keylist</i> <i>key</i> ?retvar?</dt>
<dd> Return the value associated with <i>key</i> from the keyed list <i>keylist</i> in the shared variable <i>varname</i> . If the optional <i>retvar</i> is not specified, then the value will be returned as the result of the command . In this case, if key is not found in the list, an error will result . <p> If <i>retvar</i> is specified and <i>key</i> is in the list, then the value is returned in the variable <i>retvar</i> and the command returns 1 if the key was present within the list . If <i>key</i> isn't in the list, the command will return 0, and <i>retvar</i> will be left unchanged . If {} is specified for <i>retvar</i>, the value is not returned, allowing the Tcl programmer to determine if a <i>key</i> is present in a keyed list without setting a variable as a side-effect . </p>

</dd>
<dt id="M41">
<b>tsv::keylkeys</b> <i>varname</i> <i>keylist</i> ?key?</dt>
<dd> Return the a list of the keys in the keyed list <i>keylist</i> in the shared variable <i>varname</i> . If <i>key</i> is specified, then it is the name of a key field who's subfield keys are to be retrieved . 
</dd>
<dt id="M42">
<b>tsv::keylset</b> <i>varname</i> <i>keylist</i> <i>key</i> <i>value</i> ?key value . .?</dt>
<dd> Set the value associated with <i>key</i>, in the keyed list <i>keylist</i> to <i>value</i> . If the <i>keylist</i> does not exists, it is created . If <i>key</i> is not currently in the list, it will be added . If it already exists, <i>value</i> replaces the existing value . Multiple keywords and values may be specified, if desired . 
</dd>
</dl> 
<h2 id="M43">Discussion</h2> The current implementation of thread shared variables allows for easy and convenient access to data shared between different threads . Internally, the data is stored in Tcl objects and all package commands operate on internal data representation, thus minimizing shimmering and improving performance . Special care has been taken to assure that all object data is properly locked and deep-copied when moving objects between threads . <p> Due to the internal design of the Tcl core, there is no provision of full integration of shared variables within the Tcl syntax, unfortunately . All access to shared data must be performed with the supplied package commands . Also, variable traces are not supported . But even so, benefits of easy, simple and safe shared data manipulation outweights imposed limitations . </p>
<h2 id="M44">Credits</h2> Thread shared variables are inspired by the nsv interface found in AOLserver, a highly scalable Web server from America Online . <h2 id="M45">See also</h2> <b><a href="thread.htm">thread</a></b>, <b><a href="tpool.htm">tpool</a></b>, <b><a href="ttrace.htm">ttrace</a></b>   <div class="_attribution">
  <p class="_attribution-p">
    Licensed under <a href="http://tcl.tk/software/tcltk/license.html">Tcl/Tk terms</a><br>
    <a href="https://www.tcl.tk/man/tcl/ThreadCmd/tsv.htm" class="_attribution-link">https://www.tcl.tk/man/tcl/ThreadCmd/tsv.htm</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
