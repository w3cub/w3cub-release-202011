
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Go&#47;doc - Go - W3cubDocs</title>
  
  <meta name="description" content=" Package doc extracts source code documentation from a Go AST. ">
  <meta name="keywords" content="package, doc, go">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/go/go/doc/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/go.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/go/" class="_nav-link" title="" style="margin-left:0;">Go</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _go">
				
				
<h1> Package doc  </h1>    <ul id="short-nav">
<li><code>import "go/doc"</code></li>
<li><a href="#pkg-overview" class="overviewLink">Overview</a></li>
<li><a href="#pkg-index" class="indexLink">Index</a></li>
<li><a href="#pkg-examples" class="examplesLink">Examples</a></li>
</ul>     <h2 id="pkg-overview">Overview </h2> <p> Package doc extracts source code documentation from a Go AST. </p>      <h2 id="pkg-index">Index </h2>  <ul id="manual-nav">
<li><a href="#pkg-variables">Variables</a></li>
<li><a href="#IsPredeclared">func IsPredeclared(s string) bool</a></li>
<li><a href="#Synopsis">func Synopsis(s string) string</a></li>
<li><a href="#ToHTML">func ToHTML(w io.Writer, text string, words map[string]string)</a></li>
<li><a href="#ToText">func ToText(w io.Writer, text string, indent, preIndent string, width int)</a></li>
<li><a href="#Example">type Example</a></li>
<li> <a href="#Examples">func Examples(testFiles ...*ast.File) []*Example</a>
</li>
<li><a href="#Filter">type Filter</a></li>
<li><a href="#Func">type Func</a></li>
<li><a href="#Mode">type Mode</a></li>
<li><a href="#Note">type Note</a></li>
<li><a href="#Package">type Package</a></li>
<li> <a href="#New">func New(pkg *ast.Package, importPath string, mode Mode) *Package</a>
</li>
<li> <a href="#NewFromFiles">func NewFromFiles(fset *token.FileSet, files []*ast.File, importPath string, opts ...interface{}) (*Package, error)</a>
</li>
<li> <a href="#Package.Filter">func (p *Package) Filter(f Filter)</a>
</li>
<li><a href="#Type">type Type</a></li>
<li><a href="#Value">type Value</a></li>
</ul> <div id="pkg-examples"> <h3>Examples</h3>  <dl> <dd><a class="exampleLink" href="#example_NewFromFiles">NewFromFiles</a></dd> </dl> </div> <h3>Package files</h3> <p>  <a href="https://golang.org/src/go/doc/comment.go">comment.go</a> <a href="https://golang.org/src/go/doc/doc.go">doc.go</a> <a href="https://golang.org/src/go/doc/example.go">example.go</a> <a href="https://golang.org/src/go/doc/exports.go">exports.go</a> <a href="https://golang.org/src/go/doc/filter.go">filter.go</a> <a href="https://golang.org/src/go/doc/reader.go">reader.go</a> <a href="https://golang.org/src/go/doc/synopsis.go">synopsis.go</a>  </p>   <h2 id="pkg-variables">Variables</h2> <pre data-language="go">var IllegalPrefixes = []string{
    "copyright",
    "all rights",
    "author",
}</pre> <h2 id="IsPredeclared">func IsPredeclared<a href="https://golang.org/src/go/doc/reader.go?s=24453:24486#L857" class="source">Source</a>  <span title="Added in Go 1.8">1.8</span> </h2> <pre data-language="go">func IsPredeclared(s string) bool</pre> <p> IsPredeclared reports whether s is a predeclared identifier. </p> <h2 id="Synopsis">func Synopsis<a href="https://golang.org/src/go/doc/synopsis.go?s=1726:1756#L58" class="source">Source</a>  </h2> <pre data-language="go">func Synopsis(s string) string</pre> <p> Synopsis returns a cleaned version of the first sentence in s. That sentence ends after the first period followed by space and not preceded by exactly one uppercase letter. The result string has no \n, \r, or \t characters and uses only single spaces between words. If s starts with any of the IllegalPrefixes, the result is the empty string. </p> <h2 id="ToHTML">func ToHTML<a href="https://golang.org/src/go/doc/comment.go?s=8403:8465#L299" class="source">Source</a>  </h2> <pre data-language="go">func ToHTML(w io.Writer, text string, words map[string]string)</pre> <p> ToHTML converts comment text to formatted HTML. The comment was prepared by DocReader, so it is known not to have leading, trailing blank lines nor to have trailing spaces at the end of lines. The comment markers have already been removed. </p> <p> Each span of unindented non-blank lines is converted into a single paragraph. There is one exception to the rule: a span that consists of a single line, is followed by another paragraph span, begins with a capital letter, and contains no punctuation other than parentheses and commas is formatted as a heading. </p> <p> A span of indented lines is converted into a &lt;pre&gt; block, with the common indent prefix removed. </p> <p> URLs in the comment text are converted into links; if the URL also appears in the words map, the link is taken from the map (if the corresponding map value is the empty string, the URL is not converted into a link). </p> <p> A pair of (consecutive) backticks (`) is converted to a unicode left quote (“), and a pair of (consecutive) single quotes (') is converted to a unicode right quote (”). </p> <p> Go identifiers that appear in the words map are italicized; if the corresponding map value is not the empty string, it is considered a URL and the word is converted into a link. </p> <h2 id="ToText">func ToText<a href="https://golang.org/src/go/doc/comment.go?s=11010:11084#L416" class="source">Source</a>  </h2> <pre data-language="go">func ToText(w io.Writer, text string, indent, preIndent string, width int)</pre> <p> ToText prepares comment text for presentation in textual output. It wraps paragraphs of text to width or fewer Unicode code points and then prefixes each line with the indent. In preformatted sections (such as program text), it prefixes each non-blank line with preIndent. </p> <p> A pair of (consecutive) backticks (`) is converted to a unicode left quote (“), and a pair of (consecutive) single quotes (') is converted to a unicode right quote (”). </p> <h2 id="Example">type Example<a href="https://golang.org/src/go/doc/example.go?s=415:933#L12" class="source">Source</a>  </h2> <p> An Example represents an example function found in a test source file. </p> <pre data-language="go">type Example struct {
    Name        string // name of the item being exemplified (including optional suffix)
    Suffix      string // example suffix, without leading '_' (only populated by NewFromFiles); added in Go 1.14
    Doc         string // example function doc string
    Code        ast.Node
    Play        *ast.File // a whole program version of the example; added in Go 1.1
    Comments    []*ast.CommentGroup
    Output      string // expected output
    Unordered   bool // Go 1.7
    EmptyOutput bool // expect empty output; added in Go 1.1
    Order       int  // original source code order; added in Go 1.1
}
</pre> <h3 id="Examples">func Examples<a href="https://golang.org/src/go/doc/example.go?s=1877:1925#L40" class="source">Source</a>  </h3> <pre data-language="go">func Examples(testFiles ...*ast.File) []*Example</pre> <p> Examples returns the examples found in testFiles, sorted by Name field. The Order fields record the order in which the examples were encountered. The Suffix field is not populated when Examples is called directly, it is only populated by NewFromFiles for examples it finds in _test.go files. </p> <p> Playable Examples must be in a package whose name ends in "_test". An Example is "playable" (the Play field is non-nil) in either of these circumstances: </p> <pre data-language="go">- The example function is self-contained: the function references only
  identifiers from other packages (or predeclared identifiers, such as
  "int") and the test file does not include a dot import.
- The entire test file is the example: the file contains exactly one
  example function, zero test or benchmark functions, and at least one
  top-level function, type, variable, or constant declaration other
  than the example function.
</pre> <h2 id="Filter">type Filter<a href="https://golang.org/src/go/doc/filter.go?s=190:219#L1" class="source">Source</a>  </h2> <pre data-language="go">type Filter func(string) bool</pre> <h2 id="Func">type Func<a href="https://golang.org/src/go/doc/doc.go?s=1749:2224#L58" class="source">Source</a>  </h2> <p> Func is the documentation for a func declaration. </p> <pre data-language="go">type Func struct {
    Doc  string
    Name string
    Decl *ast.FuncDecl

    // methods
    // (for functions, these fields have the respective zero value)
    Recv  string // actual   receiver "T" or "*T"
    Orig  string // original receiver "T" or "*T"
    Level int    // embedding level; 0 means not embedded

    // Examples is a sorted list of examples associated with this
    // function or method. Examples are extracted from _test.go files
    // provided to NewFromFiles.
    Examples []*Example // Go 1.14
}
</pre> <h2 id="Mode">type Mode<a href="https://golang.org/src/go/doc/doc.go?s=2784:2797#L86" class="source">Source</a>  </h2> <p> Mode values control the operation of New and NewFromFiles. </p> <pre data-language="go">type Mode int</pre> <pre data-language="go">const (
    // AllDecls says to extract documentation for all package-level
    // declarations, not just exported ones.
    AllDecls Mode = 1 &lt;&lt; iota

    // AllMethods says to show all embedded methods, not just the ones of
    // invisible (unexported) anonymous fields.
    AllMethods

    // PreserveAST says to leave the AST unmodified. Originally, pieces of
    // the AST such as function bodies were nil-ed out to save memory in
    // godoc, but not all programs want that behavior.
    PreserveAST
)</pre> <h2 id="Note">type Note<a href="https://golang.org/src/go/doc/doc.go?s=2538:2720#L79" class="source">Source</a>  <span title="Added in Go 1.1">1.1</span> </h2> <p> A Note represents a marked comment starting with "MARKER(uid): note body". Any note with a marker of 2 or more upper case [A-Z] letters and a uid of at least one character is recognized. The ":" following the uid is optional. Notes are collected in the Package.Notes map indexed by the notes marker. </p> <pre data-language="go">type Note struct {
    Pos, End token.Pos // position range of the comment containing the marker
    UID      string    // uid found with the marker
    Body     string    // note body text
}
</pre> <h2 id="Package">type Package<a href="https://golang.org/src/go/doc/doc.go?s=345:883#L6" class="source">Source</a>  </h2> <p> Package is the documentation for an entire package. </p> <pre data-language="go">type Package struct {
    Doc        string
    Name       string
    ImportPath string
    Imports    []string
    Filenames  []string
    Notes      map[string][]*Note // Go 1.1

    // Deprecated: For backward compatibility Bugs is still populated,
    // but all new code should use Notes instead.
    Bugs []string

    // declarations
    Consts []*Value
    Types  []*Type
    Vars   []*Value
    Funcs  []*Func

    // Examples is a sorted list of examples associated with
    // the package. Examples are extracted from _test.go files
    // provided to NewFromFiles.
    Examples []*Example // Go 1.14
}
</pre> <h3 id="New">func New<a href="https://golang.org/src/go/doc/doc.go?s=3525:3590#L108" class="source">Source</a>  </h3> <pre data-language="go">func New(pkg *ast.Package, importPath string, mode Mode) *Package</pre> <p> New computes the package documentation for the given package AST. New takes ownership of the AST pkg and may edit or overwrite it. To have the Examples fields populated, use NewFromFiles and include the package's _test.go files. </p> <h3 id="NewFromFiles">func NewFromFiles<a href="https://golang.org/src/go/doc/doc.go?s=5203:5318#L150" class="source">Source</a>  <span title="Added in Go 1.14">1.14</span> </h3> <pre data-language="go">func NewFromFiles(fset *token.FileSet, files []*ast.File, importPath string, opts ...interface{}) (*Package, error)</pre> <p> NewFromFiles computes documentation for a package. </p> <p> The package is specified by a list of *ast.Files and corresponding file set, which must not be nil. NewFromFiles uses all provided files when computing documentation, so it is the caller's responsibility to provide only the files that match the desired build context. "go/build".Context.MatchFile can be used for determining whether a file matches a build context with the desired GOOS and GOARCH values, and other build constraints. The import path of the package is specified by importPath. </p> <p> Examples found in _test.go files are associated with the corresponding type, function, method, or the package, based on their name. If the example has a suffix in its name, it is set in the Example.Suffix field. Examples with malformed names are skipped. </p> <p> Optionally, a single extra argument of type Mode can be provided to control low-level aspects of the documentation extraction behavior. </p> <p> NewFromFiles takes ownership of the AST files and may edit them, unless the PreserveAST Mode bit is on. </p>    <h4 id="example_NewFromFiles"> <span class="text">Example</span>
</h4> <p>This example illustrates how to use NewFromFiles to compute package documentation with examples. </p> <pre class="play" data-language="go">package main

import (
	"fmt"
	"go/ast"
	"go/doc"
	"go/parser"
	"go/token"
)

func main() {
	// src and test are two source files that make up
	// a package whose documentation will be computed.
	const src = `
// This is the package comment.
package p

import "fmt"

// This comment is associated with the Greet function.
func Greet(who string) {
	fmt.Printf("Hello, %s!\n", who)
}
`
	const test = `
package p_test

// This comment is associated with the ExampleGreet_world example.
func ExampleGreet_world() {
	Greet("world")
}
`

	// Create the AST by parsing src and test.
	fset := token.NewFileSet()
	files := []*ast.File{
		mustParse(fset, "src.go", src),
		mustParse(fset, "src_test.go", test),
	}

	// Compute package documentation with examples.
	p, err := doc.NewFromFiles(fset, files, "example.com/p")
	if err != nil {
		panic(err)
	}

	fmt.Printf("package %s - %s", p.Name, p.Doc)
	fmt.Printf("func %s - %s", p.Funcs[0].Name, p.Funcs[0].Doc)
	fmt.Printf(" ⤷ example with suffix %q - %s", p.Funcs[0].Examples[0].Suffix, p.Funcs[0].Examples[0].Doc)

}

func mustParse(fset *token.FileSet, filename, src string) *ast.File {
	f, err := parser.ParseFile(fset, filename, src, parser.ParseComments)
	if err != nil {
		panic(err)
	}
	return f
}
</pre>   <h3 id="Package.Filter">func (*Package) Filter<a href="https://golang.org/src/go/doc/filter.go?s=1932:1966#L89" class="source">Source</a>  </h3> <pre data-language="go">func (p *Package) Filter(f Filter)</pre> <p> Filter eliminates documentation for names that don't pass through the filter f. TODO(gri): Recognize "Type.Method" as a name. </p> <h2 id="Type">type Type<a href="https://golang.org/src/go/doc/doc.go?s=1147:1694#L40" class="source">Source</a>  </h2> <p> Type is the documentation for a type declaration. </p> <pre data-language="go">type Type struct {
    Doc  string
    Name string
    Decl *ast.GenDecl

    // associated declarations
    Consts  []*Value // sorted list of constants of (mostly) this type
    Vars    []*Value // sorted list of variables of (mostly) this type
    Funcs   []*Func  // sorted list of functions returning this type
    Methods []*Func  // sorted list of methods (including embedded ones) of this type

    // Examples is a sorted list of examples associated with
    // this type. Examples are extracted from _test.go files
    // provided to NewFromFiles.
    Examples []*Example // Go 1.14
}
</pre> <h2 id="Value">type Value<a href="https://golang.org/src/go/doc/doc.go?s=966:1092#L31" class="source">Source</a>  </h2> <p> Value is the documentation for a (possibly grouped) var or const declaration. </p> <pre data-language="go">type Value struct {
    Doc   string
    Names []string // var or const names in declaration order
    Decl  *ast.GenDecl
    // contains filtered or unexported fields
}
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © Google, Inc.<br>Licensed under the Creative Commons Attribution License 3.0.<br>
    <a href="https://golang.org/pkg/go/doc/" class="_attribution-link">https://golang.org/pkg/go/doc/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
