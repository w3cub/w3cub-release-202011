
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Std&#58;&#58;align - C++ - W3cubDocs</title>
  
  <meta name="description" content="Given a pointer ptr to a buffer of size space, returns a pointer aligned by the specified alignment for size number of bytes and decreases space &hellip;">
  <meta name="keywords" content="std, align, c++, cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cpp/memory/align.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cpp/" class="_nav-link" title="" style="margin-left:0;">C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cppref">
				
				
<h1 id="firstHeading" class="firstHeading">std::align</h1>            <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th> Defined in header <code><a href="../header/memory" title="cpp/header/memory">&lt;memory&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">void* align( std::size_t alignment,
             std::size_t size,
             void*&amp; ptr,
             std::size_t&amp; space );</pre>
</td> <td class="t-dcl-nopad"> </td> <td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td> </tr>  </table> <p>Given a pointer <code>ptr</code> to a buffer of size <code>space</code>, returns a pointer aligned by the specified <code>alignment</code> for <code>size</code> number of bytes and decreases <code>space</code> argument by the number of bytes used for alignment. The first aligned address is returned.</p>
<p>The function modifies the pointer only if it would be possible to fit the wanted number of bytes aligned by the given alignment into the buffer. If the buffer is too small, the function does nothing and returns <code>nullptr</code>.</p>
<p>The behavior is undefined if <code>alignment</code> is not a power of two.</p>
<h3 id="Parameters"> Parameters</h3> <table class="t-par-begin"> <tr class="t-par"> <td> alignment </td> <td> - </td> <td> the desired alignment </td>
</tr> <tr class="t-par"> <td> size </td> <td> - </td> <td> the size of the storage to be aligned </td>
</tr> <tr class="t-par"> <td> ptr </td> <td> - </td> <td> pointer to contiguous storage (a buffer) of at least <code>space</code> bytes </td>
</tr> <tr class="t-par"> <td> space </td> <td> - </td> <td> the size of the buffer in which to operate </td>
</tr>
</table> <h3 id="Return_value"> Return value</h3> <p>The adjusted value of <code>ptr</code>, or null pointer value if the space provided is too small.</p>
<h3 id="Example"> Example</h3> <div class="t-example">
<p>Demonstrates the use of <code>std::align</code> to place objects of different type in memory.</p>
<div class="cpp source-cpp"><pre data-language="cpp">#include &lt;iostream&gt;
#include &lt;memory&gt;
 
template&lt;std::size_t N&gt;
struct MyAllocator
{
    char data[N];
    void* p;
    std::size_t sz;
    MyAllocator() : p(data), sz(N) {}
    template&lt;typename T&gt;
    T* aligned_alloc(std::size_t a = alignof(T))
    {
        if (std::align(a, sizeof(T), p, sz))
        {
            T* result = reinterpret_cast&lt;T*&gt;(p);
            p = (char*)p + sizeof(T);
            sz -= sizeof(T);
            return result;
        }
        return nullptr;
    }
};
 
int main()
{
    MyAllocator&lt;64&gt; a;
    std::cout &lt;&lt; "allocated a.data at " &lt;&lt; (void*)a.data
              &lt;&lt; " (" &lt;&lt; sizeof a.data &lt;&lt; " bytes)\n";
 
    // allocate a char
    if (char* p = a.aligned_alloc&lt;char&gt;())
    {
        *p = 'a';
        std::cout &lt;&lt; "allocated a char at " &lt;&lt; (void*)p &lt;&lt; '\n';
    }
 
    // allocate an int
    if (int* p = a.aligned_alloc&lt;int&gt;())
    {
        *p = 1;
        std::cout &lt;&lt; "allocated an int at " &lt;&lt; (void*)p &lt;&lt; '\n';
    }
 
    // allocate an int, aligned at 32-byte boundary
    if (int* p = a.aligned_alloc&lt;int&gt;(32))
    {
        *p = 2;
        std::cout &lt;&lt; "allocated an int at " &lt;&lt; (void*)p &lt;&lt; " (32 byte alignment)\n";
    }
}</pre></div> <p>Possible output:</p>
<div class="text source-text"><pre data-language="c">allocated a.data at 0x7ffd0b331f80 (64 bytes)
allocated a char at 0x7ffd0b331f80
allocated an int at 0x7ffd0b331f84
allocated an int at 0x7ffd0b331fa0 (32 byte alignment)</pre></div> </div> <h3 id="Defect_reports">  Defect reports </h3> <p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.</p>
<table class="dsctable"> <tr> <th> DR </th> <th> Applied to </th> <th> Behavior as published </th> <th> Correct behavior </th>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2377">LWG 2377</a> </td> <td> C++11 </td> <td> <code>alignment</code> required to be a fundamental or supported extended alignment value </td> <td> only need to be a power of two </td>
</tr>
</table> <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <a href="../language/alignof" title="cpp/language/alignof"> <code>alignof</code> operator</a><span class="t-mark-rev t-since-cxx11">(C++11)</span> </td> <td> queries alignment requirements of a type </td>
</tr> <tr class="t-dsc"> <td> <a href="../language/alignas" title="cpp/language/alignas"> <code>alignas</code> specifier</a><span class="t-mark-rev t-since-cxx11">(C++11)</span> </td> <td> specifies that the storage for the variable should be aligned by specific amount </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../types/aligned_storage" title="cpp/types/aligned storage"> <span class="t-lines"><span>aligned_storage</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span><span class="t-mark-rev t-deprecated-cxx23">(deprecated in C++23)</span></span></span></div> </td> <td> defines the type suitable for use as uninitialized storage for types of given size <br> <span class="t-mark">(class template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="assume_aligned" title="cpp/memory/assume aligned"> <span class="t-lines"><span>assume_aligned</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> informs the compiler that a pointer is aligned <br> <span class="t-mark">(function template)</span>  </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    Â© cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/memory/align" class="_attribution-link">https://en.cppreference.com/w/cpp/memory/align</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
