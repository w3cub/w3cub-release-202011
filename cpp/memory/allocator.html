
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Std&#58;&#58;allocator - C++ - W3cubDocs</title>
  
  <meta name="description" content="The std&#58;&#58;allocator class template is the default Allocator used by all standard library containers if no user-specified allocator is &hellip;">
  <meta name="keywords" content="std, allocator, c++, cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cpp/memory/allocator.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cpp/" class="_nav-link" title="" style="margin-left:0;">C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cppref">
				
				
<h1 id="firstHeading" class="firstHeading">std::allocator</h1>            <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th> Defined in header <code><a href="../header/memory" title="cpp/header/memory">&lt;memory&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl"> <td> <pre data-language="cpp">template&lt; class T &gt;
struct allocator;</pre>
</td> <td> (1) </td> <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl t-until-cxx20"> <td> <pre data-language="cpp">template&lt;&gt;
struct allocator&lt;void&gt;;</pre>
</td> <td> (2) </td> <td> <span class="t-mark">(deprecated in C++17)</span> <br><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span> </td> </tr>  </table> <p>The <code>std::allocator</code> class template is the default <a href="../named_req/allocator" title="cpp/named req/Allocator">Allocator</a> used by all standard library containers if no user-specified allocator is provided. The default allocator is stateless, that is, all instances of the given allocator are interchangeable, compare equal and can deallocate memory allocated by any other instance of the same allocator type.</p>
<table class="t-rev-begin"> <tr class="t-rev t-until-cxx20">
<td> <p>The explicit specialization for <span class="kw4">void</span> lacks the member typedefs <code>reference</code>, <code>const_reference</code>, <code>size_type</code> and <code>difference_type</code>. This specialization declares no member functions.</p>
</td> <td><span class="t-mark-rev t-until-cxx20">(until C++20)</span></td>
</tr> </table> <table class="t-rev-begin"> <tr class="t-rev t-since-cxx17">
<td> <p>The default allocator satisfies <a href="../named_req/allocator#Allocator_completeness_requirements" title="cpp/named req/Allocator">allocator completeness requirements</a>.</p>
</td> <td><span class="t-mark-rev t-since-cxx17">(since C++17)</span></td>
</tr> </table>  <h3 id="Member_types"> Member types</h3> <table class="t-dsc-begin"> <tr class="t-dsc-hitem"> <th> Type </th> <th> Definition </th>
</tr> <tr class="t-dsc"> <td> <code>value_type</code> </td> <td> <code>T</code> </td>
</tr> <tr class="t-dsc"> <td> <code>pointer</code> <span class="t-mark-rev t-deprecated-cxx17">(deprecated in C++17)</span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span> </td> <td> <code>T*</code> </td>
</tr> <tr class="t-dsc"> <td> <code>const_pointer</code> <span class="t-mark-rev t-deprecated-cxx17">(deprecated in C++17)</span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span> </td> <td> <span class="kw4">const</span> T<span class="sy2">*</span> </td>
</tr> <tr class="t-dsc"> <td> <code>reference</code> <span class="t-mark-rev t-deprecated-cxx17">(deprecated in C++17)</span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span> </td> <td> <code>T&amp;</code> </td>
</tr> <tr class="t-dsc"> <td> <code>const_reference</code> <span class="t-mark-rev t-deprecated-cxx17">(deprecated in C++17)</span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span> </td> <td> <span class="kw4">const</span> T<span class="sy3">&amp;</span> </td>
</tr> <tr class="t-dsc"> <td> <code>size_type</code> </td> <td> <code><a href="../types/size_t" title="cpp/types/size t">std::size_t</a></code> </td>
</tr> <tr class="t-dsc"> <td> <code>difference_type</code> </td> <td> <code><a href="../types/ptrdiff_t" title="cpp/types/ptrdiff t">std::ptrdiff_t</a></code> </td>
</tr> <tr class="t-dsc"> <td> <code>propagate_on_container_move_assignment</code> <span class="t-mark-rev t-since-cxx11">(C++11)</span> </td> <td> <code><a href="../types/integral_constant" title="cpp/types/integral constant">std::true_type</a></code> </td>
</tr> <tr class="t-dsc"> <td> <code>rebind</code> <span class="t-mark-rev t-deprecated-cxx17">(deprecated in C++17)</span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span> </td> <td> <code>template&lt; class U &gt; struct rebind { typedef allocator&lt;U&gt; other; };</code> </td>
</tr> <tr class="t-dsc"> <td> <code>is_always_equal</code> <span class="t-mark-rev t-since-cxx11">(C++11)</span><span class="t-mark-rev t-deprecated-cxx23">(deprecated in C++23)</span> </td> <td> <code><a href="../types/integral_constant" title="cpp/types/integral constant">std::true_type</a></code> </td>
</tr> </table> <h3 id="Member_functions"> Member functions</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="allocator/allocator" title="cpp/memory/allocator/allocator"> <span class="t-lines"><span>(constructor)</span></span></a></div> </td> <td> creates a new allocator instance <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="allocator/~allocator" title="cpp/memory/allocator/~allocator"> <span class="t-lines"><span>(destructor)</span></span></a></div> </td> <td> destructs an allocator instance <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="allocator/address" title="cpp/memory/allocator/address"> <span class="t-lines"><span>address</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(until C++20)</span></span></span></div> </td> <td> obtains the address of an object, even if operator<span class="sy3">&amp;</span> is overloaded <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="allocator/allocate" title="cpp/memory/allocator/allocate"> <span class="t-lines"><span>allocate</span></span></a></div> </td> <td> allocates uninitialized storage <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="allocator/allocate_at_least" title="cpp/memory/allocator/allocate at least"> <span class="t-lines"><span>allocate_at_least</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx23">(C++23)</span></span></span></div> </td> <td> allocates uninitialized storage at least as large as requested size <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="allocator/deallocate" title="cpp/memory/allocator/deallocate"> <span class="t-lines"><span>deallocate</span></span></a></div> </td> <td> deallocates storage <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="allocator/max_size" title="cpp/memory/allocator/max size"> <span class="t-lines"><span>max_size</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(until C++20)</span></span></span></div> </td> <td> returns the largest supported allocation size <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="allocator/construct" title="cpp/memory/allocator/construct"> <span class="t-lines"><span>construct</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(until C++20)</span></span></span></div> </td> <td> constructs an object in allocated storage <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="allocator/destroy" title="cpp/memory/allocator/destroy"> <span class="t-lines"><span>destroy</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(until C++20)</span></span></span></div> </td> <td> destructs an object in allocated storage <br> <span class="t-mark">(public member function)</span>  </td>
</tr> </table> <h3 id="Non-member_functions"> Non-member functions</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="allocator/operator_cmp" title="cpp/memory/allocator/operator cmp"> <span class="t-lines"><span>operator==</span><span>operator!=</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span></span></span></div> </td> <td> compares two allocator instances <br> <span class="t-mark">(public member function)</span>  </td>
</tr> </table> <h3 id="Notes"> Notes</h3> <p>The member template class <code>rebind</code> provides a way to obtain an allocator for a different type. For example, <a href="http://en.cppreference.com/w/cpp/container/list"><span class="kw1278">std::<span class="me2">list</span></span></a><span class="sy1">&lt;</span>T, A<span class="sy1">&gt;</span> allocates nodes of some internal type <code>Node&lt;T&gt;</code>, using the allocator <span class="t-rev-inl t-until-cxx11"><span><code>A::rebind&lt;Node&lt;T&gt;&gt;::other</code></span> <span><span class="t-mark-rev t-until-cxx11">(until C++11)</span></span></span><span class="t-rev-inl t-since-cxx11"><span><code><a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw702">std::<span class="me2">allocator_traits</span></span></a><span class="sy1">&lt;</span>A<span class="sy1">&gt;</span><span class="sy4">::</span><span class="me2">rebind_alloc</span><span class="sy1">&lt;</span>Node<span class="sy1">&lt;</span>T<span class="sy1">&gt;&gt;</span></code>, which is implemented in terms of <code>A::rebind&lt;Node&lt;T&gt;&gt;::other</code> if A is an <code>std::allocator</code></span> <span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>.</p>
<p>Member type <code>is_always_equal</code> is deprecated via <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue3170">LWG issue 3170</a>, because it makes custom allocators derived from <code>std::allocator</code> treated as always equal by default. <a href="http://en.cppreference.com/w/cpp/memory/allocator_traits"><span class="kw702">std::<span class="me2">allocator_traits</span></span></a><span class="sy1">&lt;</span>std<span class="sy4">::</span><span class="me2">allocator</span><span class="sy1">&lt;</span>T<span class="sy1">&gt;&gt;</span><span class="sy4">::</span><span class="me2">is_always_equal</span> is not deprecated and its member constant <code>value</code> is <code>true</code> for any <code>T</code>.</p>
<h3 id="Example"> Example</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#include &lt;iostream&gt;
#include &lt;memory&gt;
#include &lt;string&gt;
 
int main()
{
    // default allocator for ints
    std::allocator&lt;int&gt; alloc1;
 
    // demonstrating the few directly usable members
    static_assert(std::is_same_v&lt;int, decltype(alloc1)::value_type&gt;);
    int* p1 = alloc1.allocate(1); // space for one int
    alloc1.deallocate(p1, 1);     // and it is gone
 
    // Even those can be used through traits though, so no need
    using traits_t1 = std::allocator_traits&lt;decltype(alloc1)&gt;; // The matching trait
    p1 = traits_t1::allocate(alloc1, 1);
    traits_t1::construct(alloc1, p1, 7);  // construct the int
    std::cout &lt;&lt; *p1 &lt;&lt; '\n';
    traits_t1::deallocate(alloc1, p1, 1); // deallocate space for one int
 
    // default allocator for strings
    std::allocator&lt;std::string&gt; alloc2;
    // matching traits
    using traits_t2 = std::allocator_traits&lt;decltype(alloc2)&gt;;
 
    // Rebinding the allocator using the trait for strings gets the same type
    traits_t2::rebind_alloc&lt;std::string&gt; alloc_ = alloc2;
 
    std::string* p2 = traits_t2::allocate(alloc2, 2); // space for 2 strings
 
    traits_t2::construct(alloc2, p2, "foo");
    traits_t2::construct(alloc2, p2 + 1, "bar");
 
    std::cout &lt;&lt; p2[0] &lt;&lt; ' ' &lt;&lt; p2[1] &lt;&lt; '\n';
 
    traits_t2::destroy(alloc2, p2 + 1);
    traits_t2::destroy(alloc2, p2);
    traits_t2::deallocate(alloc2, p2, 2);
}</pre></div> <p>Output:</p>
<div class="text source-text"><pre data-language="c">7
foo bar</pre></div> </div> <h3 id="Defect_reports"> Defect reports</h3> <p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.</p>
<table class="dsctable"> <tr> <th> DR </th> <th> Applied to </th> <th> Behavior as published </th> <th> Correct behavior </th>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2103">LWG 2103</a> </td> <td> C++11 </td> <td> redundant comparison between <code>allocator</code> might be required </td> <td> <code>propagate_on_container_move_assignment</code> provided </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2108">LWG 2108</a> </td> <td> C++11 </td> <td> there was no way to show <code>allocator</code> is stateless </td> <td> <code>is_always_equal</code> provided </td>
</tr>
</table> <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="allocator_traits" title="cpp/memory/allocator traits"> <span class="t-lines"><span>allocator_traits</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span></span></span></div> </td> <td> provides information about allocator types <br> <span class="t-mark">(class template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="scoped_allocator_adaptor" title="cpp/memory/scoped allocator adaptor"> <span class="t-lines"><span>scoped_allocator_adaptor</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span></span></span></div> </td> <td> implements multi-level allocator for multi-level containers <br> <span class="t-mark">(class template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="uses_allocator" title="cpp/memory/uses allocator"> <span class="t-lines"><span>uses_allocator</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span></span></span></div> </td> <td> checks if the specified type supports uses-allocator construction <br> <span class="t-mark">(class template)</span>  </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    Â© cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/memory/allocator" class="_attribution-link">https://en.cppreference.com/w/cpp/memory/allocator</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
