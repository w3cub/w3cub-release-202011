
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Main Function - C++ - W3cubDocs</title>
  
  <meta name="description" content="A program shall contain a global function named main, which is the designated start of the program in hosted environment. It shall have one of the &hellip;">
  <meta name="keywords" content="main, function, c++, cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cpp/language/main_function.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cpp/" class="_nav-link" title="" style="margin-left:0;">C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cppref">
				
				
<h1 id="firstHeading" class="firstHeading">Main function</h1>            <p>A program shall contain a global function named <code>main</code>, which is the designated start of the program in hosted environment. It shall have one of the following forms:</p>
<table class="t-sdsc-begin">  <tr class="t-sdsc"> <td> <span class="kw4">int</span><code> main() {</code> <span class="t-spar">body</span> <code>}</code> </td> <td> (1) </td> <td class="t-sdsc-nopad"> </td>
</tr>  <tr class="t-sdsc"> <td> <span class="kw4">int</span><code> main(</code><span class="kw4">int</span> <span class="t-spar">argc</span><code>,</code> <span class="kw4">char</span><span class="sy2">*</span> <span class="t-spar">argv</span><code>[]</code><code>) {</code> <span class="t-spar">body</span> <code>}</code> </td> <td> (2) </td> <td class="t-sdsc-nopad"> </td>
</tr>  <tr class="t-sdsc"> <td> <span class="coMULTI">/* another implementation-defined form, with int as return type */</span> </td> <td> (3) </td> <td class="t-sdsc-nopad"> </td>
</tr> 
</table> <table class="t-par-begin"> <tr class="t-par"> <td> <span class="t-spar">argc</span> </td> <td> - </td> <td> Non-negative value representing the number of arguments passed to the program from the environment in which the program is run. </td>
</tr> <tr class="t-par"> <td> <span class="t-spar">argv</span> </td> <td> - </td> <td> Pointer to the first element of an array of <code>argc + 1</code> pointers, of which the last one is null and the previous ones, if any, point to <a href="../string/multibyte" title="cpp/string/multibyte">null-terminated multibyte strings</a> that represent the arguments passed to the program from the execution environment. If <code>argv[0]</code> is not a null pointer (or, equivalently, if <code>argc &gt; 0</code>), it points to a string that represents the name used to invoke the program, or to an empty string. </td>
</tr> <tr class="t-par"> <td> <span class="t-spar">body</span> </td> <td> - </td> <td> The body of the main function. </td>
</tr>
</table> <p>The names of <span class="t-spar">argc</span> and <span class="t-spar">argv</span> are arbitrary, as well as the representation of the types of the parameters: <span class="kw4">int</span> main<span class="br0">(</span><span class="kw4">int</span> ac, <span class="kw4">char</span><span class="sy2">**</span> av<span class="br0">)</span> is equally valid.</p>
<p>A very common implementation-defined form of main<span class="br0">(</span><span class="br0">)</span> has a third argument (in addition to <code>argc</code> and <code>argv</code>), of type <span class="kw4">char</span><span class="sy2">**</span>, pointing at <a rel="nofollow" class="external text" href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html">an array of pointers to the <i>execution environment variables</i></a>.</p>
<h3 id="Explanation"> Explanation</h3> <p>The <code>main</code> function is called at program startup after <a href="initialization" title="cpp/language/initialization">initialization</a> of the non-local objects with static <a href="storage_duration" title="cpp/language/storage duration">storage duration</a>. It is the designated entry point to a program that is executed in <i>hosted</i> environment (that is, with an operating system). The entry points to <i>freestanding</i> programs (boot loaders, OS kernels, etc) are implementation-defined.</p>
<p>The parameters of the two-parameter form of the main function allow arbitrary multibyte character strings to be passed from the execution environment (these are typically known as <i>command line arguments</i>), the pointers <code>argv[1]</code> .. <code>argv[argc - 1]</code> point at the first characters in each of these strings. <code>argv[0]</code> (if non-null) is the pointer to the initial character of a null-terminated multibyte string that represents the name used to invoke the program itself (or an empty string <code>""</code> if this is not supported by the execution environment). The strings are modifiable, although these modifications do not propagate back to the execution environment: they can be used, for example, with <code><a href="../string/byte/strtok" title="cpp/string/byte/strtok">std::strtok</a></code>. The size of the array pointed to by <code>argv</code> is at least <code>argc + 1</code>, and the last element, <code>argv[argc]</code>, is guaranteed to be a null pointer.</p>
<p>The <code>main</code> function has several special properties:</p>
<div class="t-li1">
<span class="t-li">1)</span> It cannot be used anywhere in the program</div> <div class="t-li2">
<span class="t-li">a)</span> in particular, it cannot be called recursively</div> <div class="t-li2">
<span class="t-li">b)</span> its address cannot be taken</div> <div class="t-li1">
<span class="t-li">2)</span> It cannot be predefined and cannot be overloaded: effectively, the name <code>main</code> in the global namespace is reserved for functions (although it can be used to name classes, namespaces, enumerations, and any entity in a non-global namespace, except that an entity named <code>main</code> cannot be declared with C <a href="language_linkage" title="cpp/language/language linkage">language linkage</a> in any namespace.</div> <div class="t-li1">
<span class="t-li">3)</span> It cannot be <span class="t-rev-inl t-since-cxx11"><span>defined as deleted or</span> <span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span> declared with any language linkage<span class="t-rev-inl t-since-cxx11"><span>, <a href="constexpr" title="cpp/language/constexpr"><code>constexpr</code></a></span> <span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span><span class="t-rev-inl t-since-cxx20"><span>, <a href="consteval" title="cpp/language/consteval"><code>consteval</code></a></span> <span><span class="t-mark-rev t-since-cxx20">(since C++20)</span></span></span>, <a href="inline" title="cpp/language/inline"><code>inline</code></a>, or <a href="static" title="cpp/language/static"><code>static</code></a>.</div> <div class="t-li1">
<span class="t-li">4)</span> The body of the main function does not need to contain the <a href="return" title="cpp/language/return">return statement</a>: if control reaches the end of <code>main</code> without encountering a return statement, the effect is that of executing <code>return 0;</code>.</div> <div class="t-li1">
<span class="t-li">5)</span> Execution of the return (or the implicit return upon reaching the end of main) is equivalent to first leaving the function normally (which destroys the objects with automatic storage duration) and then calling <code><a href="../utility/program/exit" title="cpp/utility/program/exit">std::exit</a></code> with the same argument as the argument of the <a href="return" title="cpp/language/return">return</a> (<code><a href="../utility/program/exit" title="cpp/utility/program/exit">std::exit</a></code> then destroys static objects and terminates the program).</div> <table class="t-rev-begin"> <tr class="t-rev t-since-cxx14">
<td> <pre data-language="cpp">auto main() {...}</pre> </td> <td><span class="t-mark-rev t-since-cxx14">(since C++14)</span></td>
</tr> </table> <table class="t-rev-begin"> <tr class="t-rev t-since-cxx20">
<td> <span class="t-li">7)</span> The main function cannot be a <a href="coroutines" title="cpp/language/coroutines">coroutine</a>. </td> <td><span class="t-mark-rev t-since-cxx20">(since C++20)</span></td>
</tr> </table> <h3 id="Notes"> Notes</h3> <p>If the main function is defined with a <a href="function-try-block" title="cpp/language/function-try-block">function-try-block</a>, the exceptions thrown by the destructors of static objects (which are destroyed by the implied <code><a href="../utility/program/exit" title="cpp/utility/program/exit">std::exit</a></code>) are not caught by it.</p>
<p>The manner in which the arguments given at the OS command line are converted into the multibyte character arrays referenced by <code>argv</code> may involve implementation-defined processing:</p>
<ul>
<li> <a rel="nofollow" class="external text" href="https://docs.microsoft.com/en-us/cpp/cpp/main-function-command-line-args">Parsing C++ Command-Line Arguments</a> MSDN </li>
<li> <a rel="nofollow" class="external text" href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_01">Shell Introduction</a> POSIX </li>
</ul> <h3 id="Example"> Example</h3> <div class="t-example">
<p>Demonstrates how to inform a program about where to find its input and where to write its results.<br> A possible invocation: <code>./convert table_in.dat table_out.dat</code>.</p>
<div class="cpp source-cpp"><pre data-language="cpp">#include &lt;cstdlib&gt;
#include &lt;iomanip&gt;
#include &lt;iostream&gt;
 
int main(int argc, char *argv[])
{
    std::cout &lt;&lt; "argc == " &lt;&lt; argc &lt;&lt; '\n';
 
    for (int ndx{}; ndx != argc; ++ndx)
        std::cout &lt;&lt; "argv[" &lt;&lt; ndx &lt;&lt; "] == " &lt;&lt; std::quoted(argv[ndx]) &lt;&lt; '\n';
    std::cout &lt;&lt; "argv[" &lt;&lt; argc &lt;&lt; "] == "
              &lt;&lt; static_cast&lt;void*&gt;(argv[argc]) &lt;&lt; '\n';
 
    /*...*/
 
    return argc == 3 ? EXIT_SUCCESS : EXIT_FAILURE; // optional return value
}</pre></div> <p>Possible output:</p>
<div class="text source-text"><pre data-language="c">argc == 3
argv[0] == "./convert"
argv[1] == "table_in.dat"
argv[2] == "table_out.dat"
argv[3] == 0</pre></div> </div> <h3 id="Defect_reports"> Defect reports</h3> <p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.</p>
<table class="dsctable"> <tr> <th> DR </th> <th> Applied to </th> <th> Behavior as published </th> <th> Correct behavior </th>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1003.html">CWG 1003</a> </td> <td> C++98 </td> <td> supported parameter names of <code>main</code> were overly restricted </td> <td> all valid parameter names are supported </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1886.html">CWG 1886</a> </td> <td> C++98 </td> <td> the main function could be declared with a language linkage </td> <td> prohibited </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/2479.html">CWG 2479</a> </td> <td> C++20 </td> <td> the main function could be declared consteval </td> <td> prohibited </td>
</tr>
</table> <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td colspan="2"> <span><a href="https://en.cppreference.com/w/c/language/main_function" title="c/language/main function">C documentation</a></span> for <span class=""><span><code>main</code> function</span></span> </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    © cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/language/main_function" class="_attribution-link">https://en.cppreference.com/w/cpp/language/main_function</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
