
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Std&#58;&#58;basic_filebuf&#58;&#58;seekpos - C++ - W3cubDocs</title>
  
  <meta name="description" content="Repositions the file pointer, if possible, to the position indicated by sp. If the associated file is not open (is_open() &#61;&#61; false), fails &hellip;">
  <meta name="keywords" content="std, basic, filebuf, chart, traits, seekpos, c++, cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cpp/io/basic_filebuf/seekpos.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cpp/" class="_nav-link" title="" style="margin-left:0;">C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cppref">
				
				
<h1 id="firstHeading" class="firstHeading">std::basic_filebuf&lt;CharT,Traits&gt;::seekpos</h1>            <table class="t-dcl-begin"> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">protected:
virtual pos_type seekpos( pos_type sp,
                          std::ios_base::openmode which = std::ios_base::in | std::ios_base::out );</pre>
</td> <td class="t-dcl-nopad"> </td> <td class="t-dcl-nopad"> </td> </tr>  </table> <p>Repositions the file pointer, if possible, to the position indicated by <code>sp</code>. If the associated file is not open (<code>is_open() == false</code>), fails immediately.</p>
<p>Reposition performs as follows:</p>
<div class="t-li1">
<span class="t-li">1)</span> If the file is open for writing, writes the put area and any unshift sequences required by the currently imbued locale, using <code><a href="../basic_streambuf/overflow" title="cpp/io/basic streambuf/overflow">overflow()</a></code>.</div> <div class="t-li1">
<span class="t-li">2)</span> Repositions the file pointer, as if by calling <code><a href="../c/fsetpos" title="cpp/io/c/fsetpos">std::fsetpos()</a></code>.</div> <div class="t-li1">
<span class="t-li">3)</span> If the file is open for reading, updates the get area if necessary.</div> <p>If <code>sp</code> was not obtained by calling <code><a href="../basic_streambuf/pubseekoff" title="cpp/io/basic streambuf/pubseekoff">seekoff()</a></code> or <code>seekpos()</code> on the same file, the behavior is undefined.</p>
<h3 id="Parameters"> Parameters</h3> <table class="t-par-begin"> <tr class="t-par"> <td> sp </td> <td> - </td> <td> file position obtained by <code><a href="../basic_streambuf/pubseekoff" title="cpp/io/basic streambuf/pubseekoff">seekoff()</a></code> or <code>seekpos()</code> called earlier on the same file </td>
</tr> <tr class="t-par"> <td> which </td> <td> - </td> <td> defines which of the input and/or output sequences to affect. It can be one or a combination of the following constants: <table class="t-dsc-begin"> <tr class="t-dsc-hitem"> <th> Constant </th> <th> Explanation </th>
</tr> <tr class="t-dsc"> <td> <a href="../ios_base/openmode" title="cpp/io/ios base/openmode"><code>in</code></a> </td> <td> affect the input sequence </td>
</tr> <tr class="t-dsc"> <td> <a href="../ios_base/openmode" title="cpp/io/ios base/openmode"><code>out</code></a> </td> <td> affect the output sequence </td>
</tr> </table> </td>
</tr>
</table> <h3 id="Return_value"> Return value</h3> <p><code>sp</code> on success or <code>pos_type(off_type(-1))</code> on failure.</p>
<h3 id="Notes"> Notes</h3> <p><code>seekpos()</code> is called by <code><a href="../basic_streambuf/pubseekpos" title="cpp/io/basic streambuf/pubseekpos">std::basic_streambuf::pubseekpos()</a></code>, which is called by the single-argument versions of <code><a href="../basic_istream/seekg" title="cpp/io/basic istream/seekg">std::basic_istream::seekg()</a></code> and <code><a href="../basic_ostream/seekp" title="cpp/io/basic ostream/seekp">std::basic_ostream::seekp()</a></code>.</p>
<p>Many implementations do not update the get area in <code>seekpos()</code>, delegating to <code><a href="../basic_streambuf/underflow" title="cpp/io/basic streambuf/underflow">underflow()</a></code> that is called by the next <code><a href="../basic_streambuf/sgetc" title="cpp/io/basic streambuf/sgetc">sgetc()</a></code>.</p>
<h3 id="Example"> Example</h3> <div class="t-example">
<p>On some implementations, the get area is emptied by <code>seekpos()</code> and the second <code>underflow()</code> is necessary to observe the effects.</p>
<div class="cpp source-cpp"><pre data-language="cpp">#include &lt;fstream&gt;
#include &lt;iostream&gt;
 
struct mybuf : std::filebuf
{
    pos_type seekpos(pos_type sp, std::ios_base::openmode which)
    {
        std::cout &lt;&lt; "Before seekpos(" &lt;&lt; sp &lt;&lt; "), size of the get area is "
                  &lt;&lt; egptr() - eback() &lt;&lt; " with "
                  &lt;&lt; egptr() - gptr() &lt;&lt; " read positions available.\n";
 
        pos_type rc = std::filebuf::seekpos(sp, which);
 
        std::cout &lt;&lt; "seekpos() returns " &lt;&lt; rc &lt;&lt; ".\nAfter the call, "
                  &lt;&lt; "size of the get area is "
                  &lt;&lt; egptr() - eback() &lt;&lt; " with "
                  &lt;&lt; egptr() - gptr() &lt;&lt; " read positions available.\n";
// uncomment if get area is emptied by seekpos()
//        std::filebuf::underflow();
//        std::cout &lt;&lt; "after forced underflow(), size of the get area is "
//                  &lt;&lt; egptr() - eback() &lt;&lt; " with "
//                  &lt;&lt; egptr() - gptr() &lt;&lt; " read positions available.\n";
 
        return rc;
    }
};
 
int main()
{
    mybuf buf;
    buf.open("test.txt", std::ios_base::in);
    std::istream stream(&amp;buf);
    stream.get(); // read one char to force underflow()
    stream.seekg(2);
}</pre></div> <p>Possible output:</p>
<div class="text source-text"><pre data-language="c">Before seekpos(2), size of the get area is 110 with 109 read positions available.
seekpos() returns 2.
After the call, size of the get area is 110 with 108 read positions available.</pre></div> </div> <h3 id="Defect_reports"> Defect reports</h3> <p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.</p>
<table class="dsctable"> <tr> <th> DR </th> <th> Applied to </th> <th> Behavior as published </th> <th> Correct behavior </th>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue55">LWG 55</a> </td> <td> C++98 </td> <td> <code>seekpos</code> returned an undefined<br>invalid stream position on failure </td> <td> <code>pos_type(off_type(-1))</code><br>is returned on failure </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue171">LWG 171</a> </td> <td> C++98 </td> <td> the sequence of the operations of reposition was not clear </td> <td> made clear </td>
</tr>
</table> <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="../basic_streambuf/pubseekpos" title="cpp/io/basic streambuf/pubseekpos"> <span class="t-lines"><span>pubseekpos</span></span></a></div> </td> <td> invokes <code>seekpos()</code> <br> <span class="t-mark">(public member function of <code>std::basic_streambuf&lt;CharT,Traits&gt;</code>)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="seekoff" title="cpp/io/basic filebuf/seekoff"> <span class="t-lines"><span>seekoff</span></span></a></div>
<div><span class="t-lines"><span><span class="t-cmark">[virtual]</span></span></span></div> </td> <td> repositions the file position, using relative addressing <br> <span class="t-mark">(virtual protected member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../c/fseek" title="cpp/io/c/fseek"> <span class="t-lines"><span>fseek</span></span></a></div> </td> <td> moves the file position indicator to a specific location in a file <br> <span class="t-mark">(function)</span>  </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    © cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/io/basic_filebuf/seekpos" class="_attribution-link">https://en.cppreference.com/w/cpp/io/basic_filebuf/seekpos</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
