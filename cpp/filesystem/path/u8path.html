
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Std&#58;&#58;filesystem&#58;&#58;u8path - C++ - W3cubDocs</title>
  
  <meta name="description" content="Constructs a path p from a UTF-8 encoded sequence of chars or char8_ts (since C++20), supplied either as an std&#58;&#58;string, or as std&#58;&#58; &hellip;">
  <meta name="keywords" content="std, filesystem, u, path, c++, cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cpp/filesystem/path/u8path.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cpp/" class="_nav-link" title="" style="margin-left:0;">C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cppref">
				
				
<h1 id="firstHeading" class="firstHeading">std::filesystem::u8path</h1>            <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th> Defined in header <code><a href="../../header/filesystem" title="cpp/header/filesystem">&lt;filesystem&gt;</a></code> </th> <th> </th> <th> </th> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">template&lt; class Source &gt;
std::filesystem::path u8path( const Source&amp; source );</pre>
</td> <td> (1) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> <br><span class="t-mark">(deprecated in C++20)</span> </td> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">template&lt; class InputIt &gt;
std::filesystem::path u8path( InputIt first, InputIt last );</pre>
</td> <td> (2) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> <br><span class="t-mark">(deprecated in C++20)</span> </td> </tr>  </table> <p>Constructs a path <code>p</code> from a UTF-8 encoded sequence of <code>char</code>s<span class="t-rev-inl t-since-cxx20"><span> or <code>char8_t</code>s</span> <span><span class="t-mark-rev t-since-cxx20">(since C++20)</span></span></span>, supplied either as an <code><a href="../../string/basic_string" title="cpp/string/basic string">std::string</a></code>, or as <code><a href="../../string/basic_string_view" title="cpp/string/basic string view">std::string_view</a></code>, or as a null-terminated multibyte string, or as a [first, last) iterator pair.</p>
<ul>
<li> If <code>path::value_type</code> is <code>char</code> and native encoding is UTF-8, constructs a path directly as if by <code>path(source)</code> or <code>path(first, last)</code>. Note: this is the typical situation of a POSIX system that uses Unicode, such as Linux. </li>
<li> Otherwise, if <code>path::value_type</code> is <code>wchar_t</code> and native encoding is UTF-16 (this is the situation on Windows), or if <code>path::value_type</code> is <code>char16_t</code> (native encoding guaranteed UTF-16) or <code>char32_t</code> (native encoding guaranteed UTF-32), then first converts the UTF-8 character sequence to a temporary string <code>tmp</code> of type <code>path::string_type</code> and then the new path is constructed as if by <code>path(tmp)</code> </li>
<li> Otherwise (for non-UTF-8 narrow character encodings and for non-UTF-16 <code>wchar_t</code>), first converts the UTF-8 character sequence to a temporary UTF-32-encoded string <code>tmp</code> of type <code><a href="http://en.cppreference.com/w/cpp/string/basic_string"><span class="kw1240">std::<span class="me2">u32string</span></span></a></code>, and then the new path is constructed as if by <code>path(tmp)</code> (this path is taken on a POSIX system with a non-Unicode multibyte or single-byte encoded filesystem) </li>
</ul>  <h3 id="Parameters"> Parameters</h3> <table class="t-par-begin"> <tr class="t-par"> <td> source </td> <td> - </td> <td> a UTF-8 encoded <code><a href="../../string/basic_string" title="cpp/string/basic string">std::string</a></code>, <code><a href="../../string/basic_string_view" title="cpp/string/basic string view">std::string_view</a></code>, a pointer to a null-terminated multibyte string, or an input iterator with char value type that points to a null-terminated multibyte string </td>
</tr> <tr class="t-par"> <td> first, last </td> <td> - </td> <td> pair of <a href="../../named_req/inputiterator" title="cpp/named req/InputIterator">LegacyInputIterators</a> that specify a UTF-8 encoded character sequence </td>
</tr> <tr class="t-par-hitem"> <td colspan="3"> Type requirements </td>
</tr> <tr class="t-par-req"> <td colspan="3"> -<code>InputIt</code> must meet the requirements of <a href="../../named_req/inputiterator" title="cpp/named req/InputIterator">LegacyInputIterator</a>. </td>
</tr> <tr class="t-par-req"> <td colspan="3"> -The value type of <code>Source</code> or <code>InputIt</code> must be <code>char</code> <span class="t-rev-inl t-since-cxx20"><span>or <code>char8_t</code></span> <span><span class="t-mark-rev t-since-cxx20">(since C++20)</span></span></span> </td>
</tr>
</table> <h3 id="Return_value"> Return value</h3> <p>The path constructed from the input string after conversion from UTF-8 to the filesystem's native character encoding.</p>
<h3 id="Exceptions"> Exceptions</h3> <p>May throw <code><a href="../../memory/new/bad_alloc" title="cpp/memory/new/bad alloc">std::bad_alloc</a></code> if memory allocation fails.</p>
<h3 id="Notes"> Notes</h3> <p>On systems where native path format differs from the generic path format (neither Windows nor POSIX systems are examples of such OSes), if the argument to this function is using generic format, it will be converted to native.</p>
<h3 id="Example"> Example</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#include &lt;cstdio&gt;
#ifdef _MSC_VER
#include &lt;io.h&gt;
#include &lt;fcntl.h&gt;
#else
#include &lt;locale&gt;
#include &lt;clocale&gt;
#endif
#include &lt;fstream&gt;
#include &lt;filesystem&gt;
 
int main()
{
#ifdef _MSC_VER
    _setmode(_fileno(stderr), _O_WTEXT);
#else
    std::setlocale(LC_ALL, "");
    std::locale::global(std::locale(""));
#endif
 
    std::filesystem::path p(u8"要らない.txt");
    std::ofstream(p) &lt;&lt; "File contents"; // Prior to LWG2676 uses operator string_type()
                                         // on MSVC, where string_type is wstring, only
                                         // works due to non-standard extension.
                                         // Post-LWG2676 uses new fstream constructors
 
    // native string representation can be used with OS APIs
    if (std::FILE* f =
#ifdef _MSC_VER
                _wfopen(p.c_str(), L"r")
#else
                std::fopen(p.c_str(), "r")
#endif
        )
    {
        int ch;
        while((ch=fgetc(f)) != EOF) putchar(ch);
        std::fclose(f);
    }
 
    std::filesystem::remove(p);
}</pre></div> <p>Possible output:</p>
<div class="text source-text"><pre data-language="c">File contents</pre></div> </div> <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="../path" title="cpp/filesystem/path"> <span class="t-lines"><span>path</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">(C++17)</span></span></span></div> </td> <td> represents a path <br> <span class="t-mark">(class)</span>  </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    © cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/filesystem/path/u8path" class="_attribution-link">https://en.cppreference.com/w/cpp/filesystem/path/u8path</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
