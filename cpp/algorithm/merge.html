
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Std&#58;&#58;merge - C++ - W3cubDocs</title>
  
  <meta name="description" content=" Merges two sorted ranges [first1, last1) and [first2, last2) into one sorted range beginning at d_first. ">
  <meta name="keywords" content="std, merge, c++, cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cpp/algorithm/merge.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cpp/" class="_nav-link" title="" style="margin-left:0;">C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cppref">
				
				
<h1 id="firstHeading" class="firstHeading">std::merge</h1>            <table class="t-dcl-begin"> <tr class="t-dsc-header"> <th> Defined in header <code><a href="../header/algorithm" title="cpp/header/algorithm">&lt;algorithm&gt;</a></code> </th> <th> </th> <th> </th> </tr>  <tr class="t-dcl-rev-aux"> <td></td> <td rowspan="3">(1)</td> <td></td> </tr> <tr class="t-dcl t-until-cxx20"> <td> <pre data-language="cpp">template&lt; class InputIt1, class InputIt2, class OutputIt &gt;
OutputIt merge( InputIt1 first1, InputIt1 last1,
                InputIt2 first2, InputIt2 last2,
                OutputIt d_first );</pre>
</td>  <td> <span class="t-mark-rev t-until-cxx20">(until C++20)</span> </td> </tr> <tr class="t-dcl t-since-cxx20"> <td> <pre data-language="cpp">template&lt; class InputIt1, class InputIt2, class OutputIt &gt;
constexpr OutputIt merge( InputIt1 first1, InputIt1 last1,
                          InputIt2 first2, InputIt2 last2,
                          OutputIt d_first );</pre>
</td>  <td> <span class="t-mark-rev t-since-cxx20">(since C++20)</span> </td> </tr>  <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">template&lt; class ExecutionPolicy, class ForwardIt1, class ForwardIt2,
          class ForwardIt3 &gt;
ForwardIt3 merge( ExecutionPolicy&amp;&amp; policy,
                  ForwardIt1 first1, ForwardIt1 last1,
                  ForwardIt2 first2, ForwardIt2 last2,
                  ForwardIt3 d_first );</pre>
</td> <td> (2) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr>  <tr class="t-dcl-rev-aux"> <td></td> <td rowspan="3">(3)</td> <td></td> </tr> <tr class="t-dcl t-until-cxx20"> <td> <pre data-language="cpp">template&lt; class InputIt1, class InputIt2, class OutputIt, class Compare &gt;
OutputIt merge( InputIt1 first1, InputIt1 last1,
                InputIt2 first2, InputIt2 last2,
                OutputIt d_first, Compare comp );</pre>
</td>  <td> <span class="t-mark-rev t-until-cxx20">(until C++20)</span> </td> </tr> <tr class="t-dcl t-since-cxx20"> <td> <pre data-language="cpp">template&lt; class InputIt1, class InputIt2, class OutputIt, class Compare &gt;
constexpr OutputIt merge( InputIt1 first1, InputIt1 last1,
                          InputIt2 first2, InputIt2 last2,
                          OutputIt d_first, Compare comp );</pre>
</td>  <td> <span class="t-mark-rev t-since-cxx20">(since C++20)</span> </td> </tr>  <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">template&lt; class ExecutionPolicy, class ForwardIt1, class ForwardIt2,
          class ForwardIt3, class Compare &gt;
ForwardIt3 merge( ExecutionPolicy&amp;&amp; policy,
                  ForwardIt1 first1, ForwardIt1 last1,
                  ForwardIt2 first2, ForwardIt2 last2,
                  ForwardIt3 d_first, Compare comp );</pre>
</td> <td> (4) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr>  </table> <p>Merges two <i>sorted</i> ranges <code>[</code><code>first1</code><code>, </code><code>last1</code><code>)</code> and <code>[</code><code>first2</code><code>, </code><code>last2</code><code>)</code> into one <i>sorted</i> range beginning at <code>d_first</code>.</p>
<p>A sequence is said to be <i>sorted</i> with respect to a comparator <code>comp</code> if for any iterator <code>it</code> pointing to the sequence and any non-negative integer <code>n</code> such that <code>it + n</code> is a valid iterator pointing to an element of the sequence, <code>comp(*(it + n), *it)</code> evaluates to <code>false</code>.</p>
<pre data-language="cpp">operator&lt;</pre> <div class="t-li1">
<span class="t-li">3)</span> Elements are compared using the given binary comparison function <code>comp</code>.</div> <div class="t-li1">
<span class="t-li">2,4)</span> Same as <span class="t-v">(1,3)</span>, but executed according to <code>policy</code>. These overloads do not participate in overload resolution unless <table class="t-rev-begin"> <tr class="t-rev t-until-cxx20">
<td> <p><code><a href="http://en.cppreference.com/w/cpp/algorithm/is_execution_policy"><span class="kw1569">std::<span class="me2">is_execution_policy_v</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/types/decay"><span class="kw632">std::<span class="me2">decay_t</span></span></a><span class="sy1">&lt;</span>ExecutionPolicy<span class="sy1">&gt;&gt;</span></code> is <code>true</code>.</p>
</td> <td><span class="t-mark-rev t-until-cxx20">(until C++20)</span></td>
</tr> <tr class="t-rev t-since-cxx20">
<td> <p><code><a href="http://en.cppreference.com/w/cpp/algorithm/is_execution_policy"><span class="kw1569">std::<span class="me2">is_execution_policy_v</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/types/remove_cvref"><span class="kw2647">std::<span class="me2">remove_cvref_t</span></span></a><span class="sy1">&lt;</span>ExecutionPolicy<span class="sy1">&gt;&gt;</span></code> is <code>true</code>.</p>
</td> <td><span class="t-mark-rev t-since-cxx20">(since C++20)</span></td>
</tr> </table>
</div> <p>This merge function is <i>stable</i>, which means that for equivalent elements in the original two ranges, the elements from the first range (preserving their original order) precede the elements from the second range (preserving their original order).</p>
<p>The behavior is undefined if the destination range overlaps either of the input ranges (the input ranges may overlap each other).</p>
<h3 id="Parameters"> Parameters</h3> <table class="t-par-begin"> <tr class="t-par"> <td> first1, last1 </td> <td> - </td> <td> the first range of elements to merge </td>
</tr> <tr class="t-par"> <td> first2, last2 </td> <td> - </td> <td> the second range of elements to merge </td>
</tr> <tr class="t-par"> <td> d_first </td> <td> - </td> <td> the beginning of the destination range </td>
</tr> <tr class="t-par"> <td> policy </td> <td> - </td> <td> the execution policy to use. See <a href="execution_policy_tag_t" title="cpp/algorithm/execution policy tag t">execution policy</a> for details. </td>
</tr> <tr class="t-par"> <td> comp </td> <td> - </td> <td> comparison function object (i.e. an object that satisfies the requirements of <a href="../named_req/compare" title="cpp/named req/Compare">Compare</a>) which returns ​<code>true</code> if the first argument is <i>less</i> than (i.e. is ordered <i>before</i>) the second. <br> <p>The signature of the comparison function should be equivalent to the following:</p>
<p><span class="t-cc"><code>bool cmp(const Type1&amp; a, const Type2&amp; b);</code></span></p>
<p>While the signature does not need to have <span class="kw4">const</span><span class="sy3">&amp;</span>, the function must not modify the objects passed to it and must be able to accept all values of type (possibly const) <code>Type1</code> and <code>Type2</code> regardless of <a href="../language/value_category" title="cpp/language/value category">value category</a> (thus, <code>Type1&amp;</code> is not allowed<span class="t-rev-inl t-since-cxx11"><span>, nor is <code>Type1</code> unless for <code>Type1</code> a move is equivalent to a copy</span> <span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>).<br> The types Type1 and Type2 must be such that objects of types InputIt1 and InputIt2 can be dereferenced and then implicitly converted to both Type1 and Type2. ​</p>
</td>
</tr> <tr class="t-par-hitem"> <td colspan="3"> Type requirements </td>
</tr> <tr class="t-par-req"> <td colspan="3"> -<code>InputIt1, InputIt2</code> must meet the requirements of <a href="../named_req/inputiterator" title="cpp/named req/InputIterator">LegacyInputIterator</a>. </td>
</tr> <tr class="t-par-req"> <td colspan="3"> -<code>ForwardIt1, ForwardIt2, ForwardIt3</code> must meet the requirements of <a href="../named_req/forwarditerator" title="cpp/named req/ForwardIterator">LegacyForwardIterator</a>. </td>
</tr> <tr class="t-par-req"> <td colspan="3"> -<code>OutputIt</code> must meet the requirements of <a href="../named_req/outputiterator" title="cpp/named req/OutputIterator">LegacyOutputIterator</a>. </td>
</tr>
</table> <h3 id="Return_value"> Return value</h3> <p>An output iterator to element past the last element copied.</p>
<h3 id="Complexity"> Complexity</h3> <p>Given <code>N</code> as <code><a href="http://en.cppreference.com/w/cpp/iterator/distance"><span class="kw676">std::<span class="me2">distance</span></span></a><span class="br0">(</span>first1, last1<span class="br0">)</span> <span class="sy2">+</span> <a href="http://en.cppreference.com/w/cpp/iterator/distance"><span class="kw676">std::<span class="me2">distance</span></span></a><span class="br0">(</span>first2, last2<span class="br0">)</span></code>:</p>
<pre data-language="cpp">operator&lt;</pre> <pre data-language="cpp">operator&lt;</pre> <div class="t-li1">
<span class="t-li">3)</span> at most <code>N - 1</code> comparisons using <code>comp</code>
</div> <div class="t-li1">
<span class="t-li">4)</span> <code>O(N)</code> comparisons using <code>comp</code>
</div> <h3 id="Exceptions"> Exceptions</h3> <p>The overloads with a template parameter named <code>ExecutionPolicy</code> report errors as follows:</p>
<ul>
<li> If execution of a function invoked as part of the algorithm throws an exception and <code>ExecutionPolicy</code> is one of the <a href="execution_policy_tag_t" title="cpp/algorithm/execution policy tag t">standard policies</a>, <code><a href="../error/terminate" title="cpp/error/terminate">std::terminate</a></code> is called. For any other <code>ExecutionPolicy</code>, the behavior is implementation-defined. </li>
<li> If the algorithm fails to allocate memory, <code><a href="../memory/new/bad_alloc" title="cpp/memory/new/bad alloc">std::bad_alloc</a></code> is thrown. </li>
</ul> <h3 id="Notes"> Notes</h3> <p>This algorithm performs a similar task as <code><a href="http://en.cppreference.com/w/cpp/algorithm/set_union"><span class="kw1637">std::<span class="me2">set_union</span></span></a></code> does. Both consume two sorted input ranges and produce a sorted output with elements from both inputs. The difference between these two algorithms is with handling values from both input ranges which compare equivalent (see notes on <a href="../named_req/lessthancomparable" title="cpp/named req/LessThanComparable">LessThanComparable</a>). If any equivalent values appeared <code>n</code> times in the first range and <code>m</code> times in the second, <code>std::merge</code> would output all <code>n + m</code> occurrences whereas <code>std::set_union</code> would output <code><a href="http://en.cppreference.com/w/cpp/algorithm/max"><span class="kw1644">std::<span class="me2">max</span></span></a><span class="br0">(</span>n, m<span class="br0">)</span></code> ones only. So <code>std::merge</code> outputs exactly <code><a href="http://en.cppreference.com/w/cpp/iterator/distance"><span class="kw676">std::<span class="me2">distance</span></span></a><span class="br0">(</span>first1, last1<span class="br0">)</span> <span class="sy2">+</span> <a href="http://en.cppreference.com/w/cpp/iterator/distance"><span class="kw676">std::<span class="me2">distance</span></span></a><span class="br0">(</span>first2, last2<span class="br0">)</span></code> values and <code>std::set_union</code> may produce fewer.</p>
<h3 id="Possible_implementation"> Possible implementation</h3> <p>See also the implementations in <a rel="nofollow" class="external text" href="https://github.com/gcc-mirror/gcc/blob/d9375e490072d1aae73a93949aa158fcd2a27018/libstdc%2B%2B-v3/include/bits/stl_algo.h#L4856">libstdc++</a> and <a rel="nofollow" class="external text" href="https://github.com/llvm-mirror/libcxx/blob/a12cb9d211019d99b5875b6d8034617cbc24c2cc/include/algorithm#L4348">libc++</a>.</p>
<table class="eq-fun-cpp-table"> <tr> <th>
<a href="#Version_1">merge (1)</a> </th>
</tr> <tr> <td> <div class="cpp source-cpp"><pre data-language="cpp">template&lt;class InputIt1, class InputIt2, class OutputIt&gt;
OutputIt merge(InputIt1 first1, InputIt1 last1,
               InputIt2 first2, InputIt2 last2,
               OutputIt d_first)
{
    for (; first1 != last1; ++d_first)
    {
        if (first2 == last2)
            return std::copy(first1, last1, d_first);
 
        if (*first2 &lt; *first1)
        {
            *d_first = *first2;
            ++first2;
        }
        else
        {
            *d_first = *first1;
            ++first1;
        }
    }
    return std::copy(first2, last2, d_first);
}</pre></div> </td>
</tr> <tr> <th>
<a href="#Version_3">merge (3)</a> </th>
</tr> <tr> <td> <div class="cpp source-cpp"><pre data-language="cpp">template&lt;class InputIt1, class InputIt2,
         class OutputIt, class Compare&gt;
OutputIt merge(InputIt1 first1, InputIt1 last1,
               InputIt2 first2, InputIt2 last2,
               OutputIt d_first, Compare comp)
{
    for (; first1 != last1; ++d_first)
    {
        if (first2 == last2)
            return std::copy(first1, last1, d_first);
 
        if (comp(*first2, *first1))
        {
            *d_first = *first2;
            ++first2;
        }
        else
        {
            *d_first = *first1;
            ++first1;
        }
    }
    return std::copy(first2, last2, d_first);
}</pre></div> </td>
</tr>
</table> <h3 id="Example"> Example</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#include &lt;algorithm&gt;
#include &lt;functional&gt;
#include &lt;iostream&gt;
#include &lt;iterator&gt;
#include &lt;random&gt;
#include &lt;vector&gt;
 
auto print = [](auto const rem, auto const&amp; v)
{
    std::cout &lt;&lt; rem;
    std::copy(v.begin(), v.end(), std::ostream_iterator&lt;int&gt;(std::cout, " "));
    std::cout &lt;&lt; '\n';
};
 
int main()
{
    // fill the vectors with random numbers
    std::random_device rd;
    std::mt19937 mt(rd());
    std::uniform_int_distribution&lt;&gt; dis(0, 9);
 
    std::vector&lt;int&gt; v1(10), v2(10);
    std::generate(v1.begin(), v1.end(), std::bind(dis, std::ref(mt)));
    std::generate(v2.begin(), v2.end(), std::bind(dis, std::ref(mt)));
 
    print("Originally:\nv1: ", v1);
    print("v2: ", v2);
 
    std::sort(v1.begin(), v1.end());
    std::sort(v2.begin(), v2.end());
 
    print("After sorting:\nv1: ", v1);
    print("v2: ", v2);
 
    // merge
    std::vector&lt;int&gt; dst;
    std::merge(v1.begin(), v1.end(), v2.begin(), v2.end(), std::back_inserter(dst));
 
    print("After merging:\ndst: ", dst);
}</pre></div> <p>Possible output:</p>
<div class="text source-text"><pre data-language="c">Originally:
v1: 2 6 5 7 4 2 2 6 7 0
v2: 8 3 2 5 0 1 9 6 5 0
After sorting:
v1: 0 2 2 2 4 5 6 6 7 7
v2: 0 0 1 2 3 5 5 6 8 9
After merging:
dst: 0 0 0 1 2 2 2 2 3 4 5 5 5 6 6 6 7 7 8 9</pre></div> </div> <h3 id="Defect_reports"> Defect reports</h3> <p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.</p>
<table class="dsctable"> <tr> <th> DR </th> <th> Applied to </th> <th> Behavior as published </th> <th> Correct behavior </th>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue780">LWG 780</a> </td> <td> C++98 </td> <td> the merge operation was not defined </td> <td> defined </td>
</tr>
</table> <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="inplace_merge" title="cpp/algorithm/inplace merge"> <span class="t-lines"><span>inplace_merge</span></span></a></div> </td> <td> merges two ordered ranges in-place <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="is_sorted" title="cpp/algorithm/is sorted"> <span class="t-lines"><span>is_sorted</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span></span></span></div> </td> <td> checks whether a range is sorted into ascending order <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="set_union" title="cpp/algorithm/set union"> <span class="t-lines"><span>set_union</span></span></a></div> </td> <td> computes the union of two sets <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="sort" title="cpp/algorithm/sort"> <span class="t-lines"><span>sort</span></span></a></div> </td> <td> sorts a range into ascending order <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="stable_sort" title="cpp/algorithm/stable sort"> <span class="t-lines"><span>stable_sort</span></span></a></div> </td> <td> sorts a range of elements while preserving order between equal elements <br> <span class="t-mark">(function template)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="ranges/merge" title="cpp/algorithm/ranges/merge"> <span class="t-lines"><span>ranges::merge</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx20">(C++20)</span></span></span></div> </td> <td> merges two sorted ranges <br> <span class="t-mark">(niebloid)</span>  </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    © cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/algorithm/merge" class="_attribution-link">https://en.cppreference.com/w/cpp/algorithm/merge</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
