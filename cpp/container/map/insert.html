
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Std&#58;&#58;map&#58;&#58;insert - C++ - W3cubDocs</title>
  
  <meta name="description" content=" Inserts element(s) into the container, if the container doesn&#39;t already contain an element with an equivalent key. ">
  <meta name="keywords" content="std, map, key, t, compare, allocator, insert, c++, cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cpp/container/map/insert.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cpp/" class="_nav-link" title="" style="margin-left:0;">C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cppref">
				
				
<h1 id="firstHeading" class="firstHeading">std::map&lt;Key,T,Compare,Allocator&gt;::insert</h1>            <table class="t-dcl-begin"> <tr class="t-dcl"> <td> <pre data-language="cpp">std::pair&lt;iterator, bool&gt; insert( const value_type&amp; value );</pre>
</td> <td> (1) </td> <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">template&lt; class P &gt;
std::pair&lt;iterator, bool&gt; insert( P&amp;&amp; value );</pre>
</td> <td> (2) </td> <td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">std::pair&lt;iterator, bool&gt; insert( value_type&amp;&amp; value );</pre>
</td> <td> (3) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr>  <tr class="t-dcl-rev-aux"> <td></td> <td rowspan="3">(4)</td> <td></td> </tr> <tr class="t-dcl t-until-cxx11"> <td> <pre data-language="cpp">iterator insert( iterator pos, const value_type&amp; value );</pre>
</td>  <td> <span class="t-mark-rev t-until-cxx11">(until C++11)</span> </td> </tr> <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">iterator insert( const_iterator pos, const value_type&amp; value );</pre>
</td>  <td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td> </tr>  <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">template&lt; class P &gt;
iterator insert( const_iterator pos, P&amp;&amp; value );</pre>
</td> <td> (5) </td> <td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">iterator insert( const_iterator pos, value_type&amp;&amp; value );</pre>
</td> <td> (6) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr> <tr class="t-dcl"> <td> <pre data-language="cpp">template&lt; class InputIt &gt;
void insert( InputIt first, InputIt last );</pre>
</td> <td> (7) </td> <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">void insert( std::initializer_list&lt;value_type&gt; ilist );</pre>
</td> <td> (8) </td> <td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">insert_return_type insert( node_type&amp;&amp; nh );</pre>
</td> <td> (9) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr> <tr class="t-dcl t-since-cxx17"> <td> <pre data-language="cpp">iterator insert( const_iterator pos, node_type&amp;&amp; nh );</pre>
</td> <td> (10) </td> <td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td> </tr>  </table> <p>Inserts element(s) into the container, if the container doesn't already contain an element with an equivalent key.</p>
<div class="t-li1">
<span class="t-li">1-3)</span> Inserts <code>value</code>. The overload <span class="t-v">(2)</span> is equivalent to <code>emplace<span class="br0">(</span><a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1121">std::<span class="me2">forward</span></span></a><span class="sy1">&lt;</span>P<span class="sy1">&gt;</span><span class="br0">(</span>value<span class="br0">)</span><span class="br0">)</span></code> and only participates in overload resolution if <code><a href="http://en.cppreference.com/w/cpp/types/is_constructible"><span class="kw527">std::<span class="me2">is_constructible</span></span></a><span class="sy1">&lt;</span>value_type, P<span class="sy3">&amp;&amp;</span><span class="sy1">&gt;</span><span class="sy4">::</span><span class="me2">value</span> <span class="sy1">==</span> <span class="kw2">true</span></code>.</div> <div class="t-li1">
<span class="t-li">4-6)</span> Inserts <code>value</code> in the position as close as possible to the position just prior to <code>pos</code>. The overload <span class="t-v">(5)</span> is equivalent to <code>emplace_hint<span class="br0">(</span>hint, <a href="http://en.cppreference.com/w/cpp/utility/forward"><span class="kw1121">std::<span class="me2">forward</span></span></a><span class="sy1">&lt;</span>P<span class="sy1">&gt;</span><span class="br0">(</span>value<span class="br0">)</span><span class="br0">)</span></code> and only participates in overload resolution if <code><a href="http://en.cppreference.com/w/cpp/types/is_constructible"><span class="kw527">std::<span class="me2">is_constructible</span></span></a><span class="sy1">&lt;</span>value_type, P<span class="sy3">&amp;&amp;</span><span class="sy1">&gt;</span><span class="sy4">::</span><span class="me2">value</span> <span class="sy1">==</span> <span class="kw2">true</span></code>.</div> <div class="t-li1">
<span class="t-li">7)</span> Inserts elements from range <code>[first, last)</code>. If multiple elements in the range have keys that compare equivalent, it is unspecified which element is inserted (pending <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2844">LWG2844</a>).</div> <div class="t-li1">
<span class="t-li">8)</span> Inserts elements from initializer list <code>ilist</code>. If multiple elements in the range have keys that compare equivalent, it is unspecified which element is inserted (pending <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2844">LWG2844</a>).</div> <div class="t-li1">
<span class="t-li">9)</span> If <code>nh</code> is an empty <a href="../node_handle" title="cpp/container/node handle">node handle</a>, does nothing. Otherwise, inserts the element owned by <code>nh</code> into the container , if the container doesn't already contain an element with a key equivalent to <code>nh.key()</code>. The behavior is undefined if <code>nh</code> is not empty and <code>get_allocator() != nh.get_allocator()</code>.</div> <div class="t-li1">
<span class="t-li">10)</span> If <code>nh</code> is an empty <a href="../node_handle" title="cpp/container/node handle">node handle</a>, does nothing and returns the end iterator. Otherwise, inserts the element owned by <code>nh</code> into the container, if the container doesn't already contain an element with a key equivalent to <code>nh.key()</code>, and returns the iterator pointing to the element with key equivalent to <code>nh.key()</code>(regardless of whether the insert succeeded or failed). If the insertion succeeds, <code>nh</code> is moved from, otherwise it retains ownership of the element. The element is inserted as close as possible to the position just prior to <code>pos</code>. The behavior is undefined if <code>nh</code> is not empty and <code>get_allocator() != nh.get_allocator()</code>.</div> <p>No iterators or references are invalidated. <span class="t-rev-inl t-since-cxx17"><span>If the insertion is successful, pointers and references to the element obtained while it is held in the node handle are invalidated, and pointers and references obtained to that element before it was extracted become valid.</span> <span><span class="t-mark-rev t-since-cxx17">(since C++17)</span></span></span>.</p>
<h3 id="Parameters"> Parameters</h3> <table class="t-par-begin"> <tr class="t-par"> <td> pos </td> <td> - </td> <td> iterator to the position before which the new element will be inserted </td>
</tr> <tr class="t-par"> <td> value </td> <td> - </td> <td> element value to insert </td>
</tr> <tr class="t-par"> <td> first, last </td> <td> - </td> <td> range of elements to insert </td>
</tr> <tr class="t-par"> <td> ilist </td> <td> - </td> <td> initializer list to insert the values from </td>
</tr> <tr class="t-par"> <td> nh </td> <td> - </td> <td> a compatible <a href="../node_handle" title="cpp/container/node handle">node handle</a> </td>
</tr> <tr class="t-par-hitem"> <td colspan="3"> Type requirements </td>
</tr> <tr class="t-par-req"> <td colspan="3"> -<code>InputIt</code> must meet the requirements of <a href="../../named_req/inputiterator" title="cpp/named req/InputIterator">LegacyInputIterator</a>. </td>
</tr>
</table> <h3 id="Return_value"> Return value</h3> <pre data-language="cpp">bool</pre> <div class="t-li1">
<span class="t-li">4-6)</span> Returns an iterator to the inserted element, or to the element that prevented the insertion.</div> <div class="t-li1">
<span class="t-li">7-8)</span> (none)</div> <span class="t-li">9)</span> Returns an <a href="../map#Member_types" title="cpp/container/map"><code>insert_return_type</code></a> with the members initialized as follows: <ul>
<li> If <code>nh</code> is empty, <code>inserted</code> is <code>false</code>, <code>position</code> is <code>end()</code>, and <code>node</code> is empty. </li>
<li> Otherwise if the insertion took place, <code>inserted</code> is <code>true</code>, <code>position</code> points to the inserted element, and <code>node</code> is empty. </li>
<li> If the insertion failed, <code>inserted</code> is <code>false</code>, <code>node</code> has the previous value of <code>nh</code>, and <code>position</code> points to an element with a key equivalent to <code>nh.key()</code>.</li>
</ul> <div class="t-li1">
<span class="t-li">10)</span> End iterator if <code>nh</code> was empty, iterator pointing to the inserted element if insertion took place, and iterator pointing to an element with a key equivalent to <code>nh.key()</code> if it failed.</div> <h3 id="Exceptions"> Exceptions</h3> <div class="t-li1">
<span class="t-li">1-6)</span> If an exception is thrown by any operation, the insertion has no effect.</div>  <h3 id="Complexity"> Complexity</h3> <div class="t-li1">
<span class="t-li">1-3)</span> Logarithmic in the size of the container, <code>O(log(size()))</code>.</div> <div class="t-li1">
<span class="t-li">4-6)</span> Amortized constant if the insertion happens in the position just <span class="t-rev-inl t-until-cxx11"><span><i>after</i></span> <span><span class="t-mark-rev t-until-cxx11">(until C++11)</span></span></span><span class="t-rev-inl t-since-cxx11"><span><i>before</i></span> <span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span> <code>pos</code>, logarithmic in the size of the container otherwise.</div> <div class="t-li1">
<span class="t-li">7-8)</span> <code>O(N·log(size() + N))</code>, where <code>N</code> is the number of elements to insert.</div> <div class="t-li1">
<span class="t-li">9)</span> Logarithmic in the size of the container, <code>O(log(size()))</code>.</div> <div class="t-li1">
<span class="t-li">10)</span> Amortized constant if the insertion happens in the position just <i>before</i> <code>pos</code>, logarithmic in the size of the container otherwise.</div> <h3 id="Notes"> Notes</h3> <p>The hinted insert <span class="t-v">(4-6)</span> does not return a boolean in order to be signature-compatible with positional insert on sequential containers, such as <code><a href="../vector/insert" title="cpp/container/vector/insert">std::vector::insert</a></code>. This makes it possible to create generic inserters such as <code><a href="../../iterator/inserter" title="cpp/iterator/inserter">std::inserter</a></code>. One way to check success of a hinted insert is to compare <a href="size" title="cpp/container/map/size"><code>size()</code></a> before and after.</p>
<h3 id="Example"> Example</h3> <div class="t-example"> <div class="cpp source-cpp"><pre data-language="cpp">#include &lt;iomanip&gt;
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;string&gt;
 
using namespace std::literals;
 
template&lt;typename It&gt;
void print_insertion_status(It it, bool success)
{
    std::cout &lt;&lt; "Insertion of " &lt;&lt; it-&gt;first
              &lt;&lt; (success ? " succeeded\n" : " failed\n");
}
 
int main()
{
    std::map&lt;std::string, float&gt; heights;
 
    // Overload 3: insert from rvalue reference
    const auto [it_hinata, success] = heights.insert({"Hinata"s, 162.8});
    print_insertion_status(it_hinata, success);
 
    {
        // Overload 1: insert from lvalue reference
        const auto [it, success2] = heights.insert(*it_hinata);
        print_insertion_status(it, success2);
    }
    {
        // Overload 2: insert via forwarding to emplace
        const auto [it, success] = heights.insert(std::pair{"Kageyama", 180.6});
        print_insertion_status(it, success);
    }
 
    {
        // Overload 6: insert from rvalue reference with positional hint
        const std::size_t n = std::size(heights);
        const auto it = heights.insert(it_hinata, {"Azumane"s, 184.7});
        print_insertion_status(it, std::size(heights) != n);
    }
    {
        // Overload 4: insert from lvalue reference with positional hint
        const std::size_t n = std::size(heights);
        const auto it = heights.insert(it_hinata, *it_hinata);
        print_insertion_status(it, std::size(heights) != n);
    }
    {
        // Overload 5: insert via forwarding to emplace with positional hint
        const std::size_t n = std::size(heights);
        const auto it = heights.insert(it_hinata, std::pair{"Tsukishima", 188.3});
        print_insertion_status(it, std::size(heights) != n);
    }
 
    auto node_hinata = heights.extract(it_hinata);
    std::map&lt;std::string, float&gt; heights2;
 
    // Overload 7: insert from iterator range
    heights2.insert(std::begin(heights), std::end(heights));
 
    // Overload 8: insert from initializer_list
    heights2.insert({{"Kozume"s, 169.2}, {"Kuroo", 187.7}});
 
 
    // Overload 9: insert node
    const auto status = heights2.insert(std::move(node_hinata));
    print_insertion_status(status.position, status.inserted);
 
    node_hinata = heights2.extract(status.position);
    {
        // Overload 10: insert node with positional hint
        const std::size_t n = std::size(heights2);
        const auto it = heights2.insert(std::begin(heights2), std::move(node_hinata));
        print_insertion_status(it, std::size(heights2) != n);
    }
 
 
    // Print resulting map
    std::cout &lt;&lt; std::left &lt;&lt; '\n';
    for (const auto&amp; [name, height] : heights2)
        std::cout &lt;&lt; std::setw(10) &lt;&lt; name &lt;&lt; " | " &lt;&lt; height &lt;&lt; "cm\n";
}</pre></div> <p>Output:</p>
<div class="text source-text"><pre data-language="c">Insertion of Hinata succeeded
Insertion of Hinata failed
Insertion of Kageyama succeeded
Insertion of Azumane succeeded
Insertion of Hinata failed
Insertion of Tsukishima succeeded
Insertion of Hinata succeeded
Insertion of Hinata succeeded
 
Azumane    | 184.7cm
Hinata     | 162.8cm
Kageyama   | 180.6cm
Kozume     | 169.2cm
Kuroo      | 187.7cm
Tsukishima | 188.3cm</pre></div> </div> <h3 id="Defect_reports"> Defect reports</h3> <p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.</p>
<table class="dsctable"> <tr> <th> DR </th> <th> Applied to </th> <th> Behavior as published </th> <th> Correct behavior </th>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue233">LWG 233</a> </td> <td> C++98 </td> <td> <code>pos</code> was just a hint, it could be totally ignored </td> <td> the insertion is required to<br>be as close as possible to the<br>position just prior to <code>pos</code> </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue264">LWG 264</a> </td> <td> C++98 </td> <td> the complexity of overload <span class="t-v">(7)</span> was required to be linear if<br>the range <code>[first, last)</code> is sorted according to <code>Compare</code> </td> <td> removed the linear requirement<br>in this special case </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue316">LWG 316</a> </td> <td> C++98 </td> <td> in the return value of overload <span class="t-v">(1)</span>, it was not specified<br>which <span class="kw4">bool</span> value indicates a successful insertion </td> <td> success is<br>indicated by <code>true</code> </td>
</tr>
</table> <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="emplace" title="cpp/container/map/emplace"> <span class="t-lines"><span>emplace</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span></span></span></div> </td> <td> constructs element in-place <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="emplace_hint" title="cpp/container/map/emplace hint"> <span class="t-lines"><span>emplace_hint</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span></span></span></div> </td> <td> constructs elements in-place using a hint <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="insert_or_assign" title="cpp/container/map/insert or assign"> <span class="t-lines"><span>insert_or_assign</span></span></a></div>
<div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx17">(C++17)</span></span></span></div> </td> <td> inserts an element or assigns to the current element if the key already exists <br> <span class="t-mark">(public member function)</span>  </td>
</tr> <tr class="t-dsc"> <td> <div><a href="../../iterator/inserter" title="cpp/iterator/inserter"> <span class="t-lines"><span>inserter</span></span></a></div> </td> <td> creates a <code><a href="../../iterator/insert_iterator" title="cpp/iterator/insert iterator">std::insert_iterator</a></code> of type inferred from the argument <br> <span class="t-mark">(function template)</span>  </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    © cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/container/map/insert" class="_attribution-link">https://en.cppreference.com/w/cpp/container/map/insert</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
