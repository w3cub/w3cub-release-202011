
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Std&#58;&#58;num_get&#58;&#58;do_get - C++ - W3cubDocs</title>
  
  <meta name="description" content=" Conversion occurs in three stages&#58; ">
  <meta name="keywords" content="std, num, get, chart, inputit, do, c++, cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/cpp/locale/num_get/get.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/cpp/" class="_nav-link" title="" style="margin-left:0;">C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _cppref">
				
				
<h1 id="firstHeading" class="firstHeading">std::num_get&lt;CharT,InputIt&gt;::get, std::num_get&lt;CharT,InputIt&gt;::do_get</h1>            <table class="t-dcl-begin">  <tr class="t-dcl-rev-aux"> <td></td> <td rowspan="12">(1)</td> <td></td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">public:
iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, bool&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, long&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, long long&amp; v ) const;</pre>
</td>  <td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, unsigned short&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, unsigned int&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, unsigned long&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, unsigned long long&amp; v ) const;</pre>
</td>  <td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, float&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, double&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, long double&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">iter_type get( iter_type in, iter_type end, std::ios_base&amp; str, 
               std::ios_base::iostate&amp; err, void*&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr>   <tr class="t-dcl-rev-aux"> <td></td> <td rowspan="12">(2)</td> <td></td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">protected:
virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err, bool&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err, long&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err, long long&amp; v ) const;</pre>
</td>  <td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err, unsigned short&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err, unsigned int&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err, unsigned long&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl t-since-cxx11"> <td> <pre data-language="cpp">virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err,
                          unsigned long long&amp; v ) const;</pre>
</td>  <td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err, float&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err, double&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err, long double&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr> <tr class="t-dcl"> <td class="t-dcl-nopad"> <pre data-language="cpp">virtual iter_type do_get( iter_type in, iter_type end, std::ios_base&amp; str, 
                          std::ios_base::iostate&amp; err, void*&amp; v ) const;</pre>
</td>  <td class="t-dcl-nopad"> </td> </tr>   </table> <div class="t-li1">
<span class="t-li">1)</span> Public member function, calls the member function <code>do_get</code> of the most derived class.</div> <div class="t-li1">
<span class="t-li">2)</span> Reads characters from the input iterator <code>in</code> and generates the value of the type of <code>v</code>, taking into account I/O stream formatting flags from <code>str.flags()</code>, character classification rules from <code><a href="http://en.cppreference.com/w/cpp/locale/use_facet"><span class="kw1902">std::<span class="me2">use_facet</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/locale/ctype"><span class="kw1943">std::<span class="me2">ctype</span></span></a><span class="sy1">&lt;</span>CharT<span class="sy1">&gt;&gt;</span><span class="br0">(</span>str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span></code>, and numeric punctuation characters from <code><a href="http://en.cppreference.com/w/cpp/locale/use_facet"><span class="kw1902">std::<span class="me2">use_facet</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/locale/numpunct"><span class="kw1966">std::<span class="me2">numpunct</span></span></a><span class="sy1">&lt;</span>CharT<span class="sy1">&gt;&gt;</span><span class="br0">(</span>str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span></code>. This function is called by all formatted input stream operators such as <code><a href="http://en.cppreference.com/w/cpp/io/cin"><span class="kw1761">std::<span class="me2">cin</span></span></a> <span class="sy1">&gt;&gt;</span> n<span class="sy4">;</span></code>.</div> <p>Conversion occurs in three stages:</p>
<h4 id="Stage_1:_conversion_specifier_selection"> Stage 1: conversion specifier selection</h4> <ul><li> I/O format flags are obtained, as if by </li></ul> <dl>
<dd> <code>fmtflags basefield <span class="sy1">=</span> <span class="br0">(</span>str.<span class="me1">flags</span><span class="br0">(</span><span class="br0">)</span> <span class="sy3">&amp;</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/fmtflags"><span class="kw1687">std::<span class="me2">ios_base</span><span class="sy4">::</span><span class="me2">basefield</span></span></a><span class="br0">)</span><span class="sy4">;</span></code> </dd>
<dd> <code>fmtflags boolalpha <span class="sy1">=</span> <span class="br0">(</span>str.<span class="me1">flags</span><span class="br0">(</span><span class="br0">)</span> <span class="sy3">&amp;</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/fmtflags"><span class="kw1695">std::<span class="me2">ios_base</span><span class="sy4">::</span><span class="me2">boolalpha</span></span></a><span class="br0">)</span><span class="sy4">;</span></code> </dd>
</dl> <ul><li> If the type of <code>v</code> is an integer type, the first applicable choice of the following five is selected: </li></ul> <dl>
<dd> If <code>basefield == oct</code>, will use conversion specifier <code>%o</code> </dd>
<dd> If <code>basefield == hex</code>, will use conversion specifier <code>%X</code> </dd>
<dd> If <code>basefield == 0</code>, will use conversion specifier <code>%i</code> </dd>
<dd> If the type of <code>v</code> is signed, will use conversion specifier <code>%d</code> </dd>
<dd> If the type of <code>v</code> is unsigned, will use conversion specifier <code>%u</code> </dd>
</dl> <ul>
<li> For integer types, length modifier is added to the conversion specification if necessary: <code>h</code> for <span class="kw4">short</span> and <span class="kw4">unsigned</span> <span class="kw4">short</span>, <code>l</code> for <span class="kw4">long</span> and <span class="kw4">unsigned</span> <span class="kw4">long</span><span class="t-rev-inl t-since-cxx11"><span>, <code>ll</code> for <code>long long</code> and <code>unsigned long long</code></span> <span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span> </li>
<li> If the type of <code>v</code> is <span class="kw4">float</span>, will use conversion specifier <code>%g</code> </li>
<li> If the type of <code>v</code> is <span class="kw4">double</span>, will use conversion specifier <code>%lg</code> </li>
<li> If the type of <code>v</code> is <span class="kw4">long</span> <span class="kw4">double</span>, will use conversion specifier <code>%Lg</code> </li>
<li> If the type of <code>v</code> is <span class="kw4">void</span><span class="sy2">*</span>, will use conversion specifier <code>%p</code> </li>
<li> If the type of <code>v</code> is <span class="kw4">bool</span> and <code>boolalpha == 0</code>, proceeds as if the type of <code>v</code> is <span class="kw4">long</span>, except for the value to be stored in <code>v</code> in stage 3. </li>
<li> If the type of <code>v</code> is <span class="kw4">bool</span> and <code>boolalpha != 0</code>, the following replaces stages 2 and 3: <ul>
<li> Successive characters obtained from the input iterator <code>in</code> are matched against the character sequences obtained from <code><a href="http://en.cppreference.com/w/cpp/locale/use_facet"><span class="kw1902">std::<span class="me2">use_facet</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/locale/numpunct"><span class="kw1966">std::<span class="me2">numpunct</span></span></a><span class="sy1">&lt;</span>CharT<span class="sy1">&gt;&gt;</span><span class="br0">(</span>str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">falsename</span><span class="br0">(</span><span class="br0">)</span></code> and <code><a href="http://en.cppreference.com/w/cpp/locale/use_facet"><span class="kw1902">std::<span class="me2">use_facet</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/locale/numpunct"><span class="kw1966">std::<span class="me2">numpunct</span></span></a><span class="sy1">&lt;</span>CharT<span class="sy1">&gt;&gt;</span><span class="br0">(</span>str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">truename</span><span class="br0">(</span><span class="br0">)</span></code> only as necessary as to identify the unique match. The input iterator <code>in</code> is compared to <code>end</code> only when necessary to obtain a character. </li>
<li> If the target sequence is uniquely matched, <code>v</code> is set to the corresponding <span class="kw4">bool</span> value. Otherwise <code>false</code> is stored in <code>v</code> and <code><a href="../../io/ios_base/iostate" title="cpp/io/ios base/iostate">std::ios_base::failbit</a></code> is assigned to <code>err</code>. If unique match could not be found before the input ended (<code>in == end</code>), <code>err <span class="sy3">|</span><span class="sy1">=</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/iostate"><span class="kw1706">std::<span class="me2">ios_base</span><span class="sy4">::</span><span class="me2">eofbit</span></span></a></code> is executed. </li>
</ul> </li>
</ul> <h4 id="Stage_2:_character_extraction"> Stage 2: character extraction</h4> <ul>
<li> If <code>in == end</code>, stage 2 is terminated immediately, no further characters are extracted. </li>
<li> The next character is extracted from <code>in</code> as if by <code>char_type ct = *in;</code>: <ul>
<li> If the character matches one of <span class="t-rev-inl t-until-cxx11"><span><code>"0123456789abcdefxABCDEFX+-"</code></span> <span><span class="t-mark-rev t-until-cxx11">(until C++11)</span></span></span><span class="t-rev-inl t-since-cxx11"><span><code>"0123456789abcdefpxABCDEFPX+-"</code></span> <span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>, widened to the locale's char_type as if by <code><a href="http://en.cppreference.com/w/cpp/locale/use_facet"><span class="kw1902">std::<span class="me2">use_facet</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/locale/ctype"><span class="kw1943">std::<span class="me2">ctype</span></span></a><span class="sy1">&lt;</span>CharT<span class="sy1">&gt;&gt;</span><span class="br0">(</span>str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">widen</span><span class="br0">(</span><span class="br0">)</span></code>, it is converted to the corresponding <code>char</code>. </li>
<li> If the character matches the decimal point separator (<code><a href="http://en.cppreference.com/w/cpp/locale/use_facet"><span class="kw1902">std::<span class="me2">use_facet</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/locale/numpunct"><span class="kw1966">std::<span class="me2">numpunct</span></span></a><span class="sy1">&lt;</span>CharT<span class="sy1">&gt;&gt;</span><span class="br0">(</span>str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">decimal_point</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span></code>), it is replaced by <code>'.'</code>. </li>
<li> If the character matches the thousands separator (<code><a href="http://en.cppreference.com/w/cpp/locale/use_facet"><span class="kw1902">std::<span class="me2">use_facet</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/locale/numpunct"><span class="kw1966">std::<span class="me2">numpunct</span></span></a><span class="sy1">&lt;</span>CharT<span class="sy1">&gt;&gt;</span><span class="br0">(</span>str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">thousands_sep</span><span class="br0">(</span><span class="br0">)</span></code>) and the thousands separation is in use (as determined by <code><a href="http://en.cppreference.com/w/cpp/locale/use_facet"><span class="kw1902">std::<span class="me2">use_facet</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/locale/numpunct"><span class="kw1966">std::<span class="me2">numpunct</span></span></a><span class="sy1">&lt;</span>CharT<span class="sy1">&gt;&gt;</span><span class="br0">(</span>str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">grouping</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">length</span><span class="br0">(</span><span class="br0">)</span> <span class="sy3">!</span><span class="sy1">=</span> <span class="nu0">0</span></code>), then if the decimal point <code>'.'</code> has not yet been accumulated, the position of the character is remembered, but the character is otherwise ignored. If the decimal point has already been accumulated, the character is discarded and stage 2 terminates. </li>
<li> In any case, the check is made whether the <span class="kw4">char</span> obtained from the previous steps is allowed in the input field that would be parsed by <code><a href="../../io/c/fscanf" title="cpp/io/c/fscanf">std::scanf</a></code> given the conversion specifier selected in stage 1. If it is allowed, it is accumulated in a temporary buffer and stage 2 repeats. If it is not allowed, stage 2 terminates. </li>
</ul> </li>
</ul> <h4 id="Stage_3:_conversion_and_storage"> Stage 3: conversion and storage</h4> <ul><li> The sequence of <span class="kw4">char</span>s accumulated in stage 2 is converted to a numeric value: </li></ul> <table class="t-rev-begin"> <tr class="t-rev t-until-cxx11">
<td>  The input is parsed according to the rules of <code><a href="../../io/c/fscanf" title="cpp/io/c/fscanf">std::scanf</a></code>.  </td> <td><span class="t-mark-rev t-until-cxx11">(until C++11)</span></td>
</tr> <tr class="t-rev t-since-cxx11">
<td> <ul>
<li> <code><a href="../../string/byte/strtol" title="cpp/string/byte/strtol">std::strtoll</a></code> for signed integer <code>v</code>, </li>
<li> <code><a href="../../string/byte/strtoul" title="cpp/string/byte/strtoul">std::strtoull</a></code> for unsigned integer <code>v</code>, </li>
<li> <code><a href="../../string/byte/strtof" title="cpp/string/byte/strtof">std::strtof</a></code> for <span class="kw4">float</span> <code>v</code>, </li>
<li> <code><a href="../../string/byte/strtof" title="cpp/string/byte/strtof">std::strtod</a></code> for <span class="kw4">double</span> <code>v</code>, or </li>
<li> <code><a href="../../string/byte/strtof" title="cpp/string/byte/strtof">std::strtold</a></code> for <span class="kw4">long</span> <span class="kw4">double</span> <code>v</code>. </li>
</ul> </td> <td><span class="t-mark-rev t-since-cxx11">(since C++11)</span></td>
</tr> </table> <ul>
<li> If the conversion function fails to convert the entire field, the value <code>​0​</code> is stored in <code>v</code>. </li>
<li> If the type of <code>v</code> is a signed integer type and the conversion function results in a positive or negative value too large to fit in it, the most positive or negative representable value is stored in <code>v</code>, respectively. </li>
<li> If the type of <code>v</code> is an unsigned integer type and the conversion function results in a value that does not fit in it, the most positive representable value is stored in <code>v</code>. </li>
<li> In any case, if the conversion function fails <code><a href="../../io/ios_base/iostate" title="cpp/io/ios base/iostate">std::ios_base::failbit</a></code> is assigned to <code>err</code>. </li>
<li> Otherwise, the numeric result of the conversion is stored in <code>v</code>. <ul><li> If the type of <code>v</code> is <span class="kw4">bool</span> and boolalpha is not set, then if the value to be stored is <code>​0​</code>, <code>false</code> is stored, if the value to be stored is <code>1</code>, <code>true</code> is stored, for any other value <code><a href="../../io/ios_base/iostate" title="cpp/io/ios base/iostate">std::ios_base::failbit</a></code> is assigned to <code>err</code> and <code>true</code> is stored. </li></ul> </li>
<li> After this, digit grouping is checked. if the position of any of the thousands separators discarded in stage 2 does not match the grouping provided by <code><a href="http://en.cppreference.com/w/cpp/locale/use_facet"><span class="kw1902">std::<span class="me2">use_facet</span></span></a><span class="sy1">&lt;</span><a href="http://en.cppreference.com/w/cpp/locale/numpunct"><span class="kw1966">std::<span class="me2">numpunct</span></span></a><span class="sy1">&lt;</span>CharT<span class="sy1">&gt;&gt;</span><span class="br0">(</span>str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">grouping</span><span class="br0">(</span><span class="br0">)</span></code>, <code><a href="../../io/ios_base/iostate" title="cpp/io/ios base/iostate">std::ios_base::failbit</a></code> is assigned to <code>err</code>. </li>
<li> If stage 2 was terminated by the test <code>in == end</code>, <code>err <span class="sy3">|</span><span class="sy1">=</span> <a href="http://en.cppreference.com/w/cpp/io/ios_base/iostate"><span class="kw1706">std::<span class="me2">ios_base</span><span class="sy4">::</span><span class="me2">eofbit</span></span></a></code> is executed to set the eof bit. </li>
</ul> <h3 id="Return_value"> Return value</h3> <p><code>in</code>.</p>
<h3 id="Notes"> Notes</h3> <p>Before the resolutions of <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue23">LWG issue 23</a> and <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue696">LWG issue 696</a>, <code>v</code> was left unchanged if an error occurs.</p>
<p>Before the resolution of <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue221">LWG issue 221</a>, strings representing hexadecimal integers (e.g. <code>"0xA0"</code>) were rejected by <code>do_get(int)</code> even if they are valid input to <a href="../../string/byte/strtol" title="cpp/string/byte/strtol"><code>strtol</code></a> because stage 2 filters out characters <code>'X'</code> and <code>'x'</code>.</p>
<p>Before the resolution of <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue1169">LWG issue 1169</a>, converting a negative number string into an unsigned integer might produce zero (since the value represented by the string is smaller than what the target type can represent).</p>
<table class="t-rev-begin"> <tr class="t-rev t-since-cxx11">
<td> <p>Before the resolution of <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2381">LWG issue 2381</a>, strings representing hexadecimal floating-point numbers with exponents (e.g. <code>"0x1.23p-10"</code>) were rejected by <code>do_get(double)</code> even if they are valid input to <a href="../../string/byte/strtof" title="cpp/string/byte/strtof"><code>strtod</code></a> because stage 2 filters out characters <code>'P'</code> and <code>'p'</code>.</p>
<p>The strings representing infinity or not-a-number (e.g. <code>"NaN"</code> and <code>"inf"</code>) are rejected by <code>do_get(double)</code> even if they are valid input to <code>strtod</code> because stage 2 filters out characters such as <code>'N'</code> or <code>'i'</code>.</p>
</td> <td><span class="t-mark-rev t-since-cxx11">(since C++11)</span></td>
</tr> </table> <h3 id="Example"> Example</h3> <div class="t-example">
<p>An implementation of <code>operator&gt;&gt;</code> for a user-defined type.</p>
<div class="cpp source-cpp"><pre data-language="cpp">#include &lt;iostream&gt;
#include &lt;iterator&gt;
#include &lt;locale&gt;
 
struct base { long x; };
 
template&lt;class CharT, class Traits&gt;
std::basic_istream&lt;CharT, Traits&gt;&amp;
    operator &gt;&gt;(std::basic_istream&lt;CharT, Traits&gt;&amp; is, base&amp; b)
{
    std::ios_base::iostate err = std::ios_base::goodbit;
 
    try // setting err could throw
    {
        typename std::basic_istream&lt;CharT, Traits&gt;::sentry s(is);
 
        if (s) // if stream is ready for input
        {
            std::use_facet&lt;std::num_get&lt;CharT&gt;&gt;(is.getloc()).get(is, {}, is, err, b.x);
        }
    }
    catch(std::ios_base::failure&amp; error)
    {
        // handle the exception
    }
 
    return is;
}
 
int main()
{
    base b;
    std::cin &gt;&gt; b;
}</pre></div> </div> <h3 id="Defect_reports"> Defect reports</h3> <p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.</p>
<table class="dsctable"> <tr> <th> DR </th> <th> Applied to </th> <th> Behavior as published </th> <th> Correct behavior </th>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue17">LWG 17</a> </td> <td> C++98 </td> <td> the process of parsing text boolean values was errornous </td> <td> corrected </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue18">LWG 18</a> </td> <td> C++98 </td> <td> the overload of <code>get</code> taking <span class="kw4">bool</span><span class="sy3">&amp;</span> value was missing </td> <td> added </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue23">LWG 23</a> </td> <td> C++98 </td> <td> overflowing input resulted in undefined behavior </td> <td> overflow handled </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue154">LWG 154</a> </td> <td> C++98 </td> <td> the conversion specifier for <span class="kw4">double</span> was <code>%g</code> (same as <span class="kw4">float</span>) </td> <td> changed to <code>%lg</code> </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue221">LWG 221</a> </td> <td> C++98 </td> <td> <code>do_get</code> did not parse <code>'x'</code> and <code>'X'</code> while <a href="../../string/byte/strtol" title="cpp/string/byte/strtol"><code>strtol</code></a> parsed them </td> <td> made <code>'x'</code> and <code>'X'</code> parsed </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue275">LWG 275</a> </td> <td> C++98 </td> <td> <code>get</code> had an overload taking <span class="kw4">short</span><span class="sy3">&amp;</span> value instead of <span class="kw4">float</span><span class="sy3">&amp;</span> </td> <td> corrected </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue358">LWG 358</a> </td> <td> C++98 </td> <td> thousand separators after the decimal point were ignored </td> <td> stage 2 is terminated if encountered </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue696">LWG 696</a> </td> <td> C++98 </td> <td> the result was unchanged on conversion failure </td> <td> set to zero </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue1169">LWG 1169</a> </td> <td> C++98 </td> <td> overflow handling was inconsistent between floating-point types </td> <td> made consistent<br>with <code>strtof</code>/<code>strtod</code> </td>
</tr> <tr> <td> <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2381">LWG 2381</a> </td> <td> C++11 </td> <td> <code>do_get</code> did not parse <code>'p'</code> and <code>'P'</code> while <a href="../../string/byte/strtof" title="cpp/string/byte/strtof"><code>strtod</code></a> parsed them </td> <td> made <code>'p'</code> and <code>'P'</code> parsed </td>
</tr>
</table> <h3 id="See_also"> See also</h3> <table class="t-dsc-begin"> <tr class="t-dsc"> <td> <div><a href="../../io/basic_istream/operator_gtgt" title="cpp/io/basic istream/operator gtgt"> <span class="t-lines"><span>operator&gt;&gt;</span></span></a></div> </td> <td> extracts formatted data <br> <span class="t-mark">(public member function of <code>std::basic_istream&lt;CharT,Traits&gt;</code>)</span>  </td>
</tr> </table>           <div class="_attribution">
  <p class="_attribution-p">
    © cppreference.com<br>Licensed under the Creative Commons Attribution-ShareAlike Unported License v3.0.<br>
    <a href="https://en.cppreference.com/w/cpp/locale/num_get/get" class="_attribution-link">https://en.cppreference.com/w/cpp/locale/num_get/get</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
