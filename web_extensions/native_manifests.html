
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Native Manifests - Web Extensions - W3cubDocs</title>
  
  <meta name="description" content="Native manifests are specially formatted JSON files that are provisioned on the user&#39;s computer by some means outside the extension installation &hellip;">
  <meta name="keywords" content="native, manifests, web, extensions, web_extensions">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/web_extensions/native_manifests.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/web_extensions.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/web_extensions/" class="_nav-link" title="" style="margin-left:0;">Web Extensions</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>Native manifests</h1> <p>Native manifests are specially formatted JSON files that are provisioned on the user's computer by some means outside the extension installation process. For example, a native manifest might be provisioned by a device administrator or by a native application installer.</p> <p>There are three different types of native manifest:</p> <div class="_table"><table class="standard-table"> <tbody> <tr> <td><a href="#native_messaging_manifests">Native messaging manifests</a></td> <td>Enable a feature called <a href="native_messaging">native messaging</a>, in which an extension can communicate with a native app installed on the device.</td> </tr> <tr> <td><a href="#managed_storage_manifests">Managed storage manifests</a></td> <td>Define read-only data that an extension can access using the <a href="api/storage/managed"><code>storage.managed</code></a> API.</td> </tr> <tr> <td><a href="#pkcs_11_manifests">PKCS #11 manifests</a></td> <td>Enable an extension to use the <a href="api/pkcs11"><code>pkcs11</code></a> API to enumerate PKCS #11 security modules and install them in Firefox.</td> </tr> </tbody> </table></div> <p>For all native manifests, you need to arrange things so the browser can find the manifest. The section on <a href="#manifest_location">manifest location</a> describes these rules.</p>
<h2 id="native_messaging_manifests">Native messaging manifests</h2>
<p>The native messaging manifest contains a single JSON object with the following properties:</p> <div class="_table"><table class="fullwidth-table standard-table"> <thead> <tr> <th scope="col">Name</th> <th scope="col">Type</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <td><code>name</code></td> <td>String</td> <td> <p>Name of the native application.</p> <p>This must match the name passed into <a href="api/runtime/connectnative"><code>runtime.connectNative()</code></a> or <a href="api/runtime/sendnativemessage"><code>runtime.sendNativeMessage()</code></a> by the extension.</p> <p>On MacOS and Linux, it must also match the native messaging manifest's filename (excluding the <code>.json</code> extension).</p> <p>On Windows, it must match the name of the registry key you create, that contains the location of the native messaging manifest.</p> <p>The name must match the following regular expression: <code>"^\w+(\.\w+)*$"</code>. This means that it may only contain (lowercase or uppercase) alphanumeric characters, underscores, and dots. It may not start or end with a dot, and a dot cannot be followed by another dot.</p> </td> </tr> <tr> <td><code>description</code></td> <td>String</td> <td>Description of the native application.</td> </tr> <tr> <td><code>path</code></td> <td>String</td> <td> <p>Path to the native application.</p> <p>On Windows, this may be relative to the manifest itself. On MacOS and Linux it must be absolute.</p> </td> </tr> <tr> <td><code>type</code></td> <td>String</td> <td> <p>Describes the method used to connect the extension with the app.</p> <p>Currently, only one value can be given here, <code>"stdio"</code>, which indicates that messages are received by the app using standard input (<code>stdin</code>) and sent using standard output (<code>stdout</code>).</p> </td> </tr> <tr> <td><code>allowed_extensions</code></td> <td>Array of String</td> <td> <p>An array of <a href="https://extensionworkshop.com/documentation/develop/extensions-and-the-add-on-id/" rel=" noopener">Add-on ID</a> values. Each value represents an extension which is allowed to communicate with this native application.</p> <p>Note that this means you will probably want to include the <code><a href="manifest.json/browser_specific_settings">browser_specific_settings</a></code> key in your extension's <code>manifest.json</code> file, so you can set an explicit ID during development.</p> </td> </tr> </tbody> </table></div> <p>For example, here's a manifest for the <code>ping_pong</code> native application:</p> <div class="code-example"><pre data-language="json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ping_pong"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Example host for native messaging"</span><span class="token punctuation">,</span>
  <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"/path/to/native-messaging/app/ping_pong.py"</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"stdio"</span><span class="token punctuation">,</span>
  <span class="token property">"allowed_extensions"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"ping_pong@example.org"</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span></pre></div> <p>This allows the extension whose ID is <code>ping_pong@example.org</code> to connect, by passing the name <code>ping_pong</code> into the relevant <a href="api/runtime"><code>runtime</code></a> API function. The application itself is at <code>/path/to/native-messaging/app/ping_pong.py</code>.</p>
<h2 id="managed_storage_manifests">Managed storage manifests</h2>
<p>The managed storage manifest contains a single JSON object with the following properties:</p> <div class="_table"><table class="fullwidth-table standard-table"> <thead> <tr> <th scope="col">Name</th> <th scope="col">Type</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <td><code>name</code></td> <td>String</td> <td> <p>The ID of the extension that can access this storage, given as the ID you've specified in the extension's <code><a href="manifest.json/browser_specific_settings">applications</a></code> key.</p> </td> </tr> <tr> <td><code>description</code></td> <td>String</td> <td>Human readable description, ignored by Firefox.</td> </tr> <tr> <td><code>type</code></td> <td>String</td> <td> <p>This must be <code>"storage"</code>.</p> </td> </tr> <tr> <td><code>data</code></td> <td>Object</td> <td> <p>A JSON object that may contain any valid JSON values, including strings, numbers, booleans, arrays, or objects. This will become the data in the <code>browser.storage.managed</code> storage area.</p> </td> </tr> </tbody> </table></div> <p>For example:</p> <div class="code-example"><pre data-language="json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"favourite-color-examples@mozilla.org"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"ignored"</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"storage"</span><span class="token punctuation">,</span>
  <span class="token property">"data"</span><span class="token operator">:</span>
  <span class="token punctuation">{</span>
    <span class="token property">"color"</span><span class="token operator">:</span> <span class="token string">"management thinks it should be blue!"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div> <p>Given this JSON manifest, the <code>favourite-color-examples@mozilla.org</code> extension could access the data using code like this:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">let</span> storageItem <span class="token operator">=</span> browser<span class="token punctuation">.</span>storage<span class="token punctuation">.</span>managed<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
storageItem<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Managed color is: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>
<h2 id="pkcs_11_manifests">PKCS #11 manifests</h2>
<p>The PKCS #11 manifest is a file containing a JSON object with the following properties:</p> <div class="_table"><table class="fullwidth-table standard-table"> <thead> <tr> <th scope="col">Name</th> <th scope="col">Type</th> <th scope="col">Description</th> </tr> </thead> <tbody> <tr> <td><code>name</code></td> <td>String</td> <td> <p>Name of the PKCS #11 module.</p> <p>This must match the name used in the <code>pkcs11</code> API.</p> <p>On MacOS and Linux, it must also match the manifest's filename (excluding the extension).</p> <p>On Windows, it must match the name of the registry key you create, which contains the location of the manifest.</p> <p>The name must match the following regular expression: <code>"^\w+(\.\w+)*$"</code>. This means that it may only contain lowercase alphanumeric characters, underscores and dots. It may not start or end with a dot, and a dot cannot be followed by another dot.</p> </td> </tr> <tr> <td><code>description</code></td> <td>String</td> <td> <p>Description of the module.</p> <p>This is used to set the friendly name for the module in the browser's UI (for example, the "Security Devices" dialog in Firefox).</p> </td> </tr> <tr> <td><code>path</code></td> <td>String</td> <td> <p>Path to the module.</p> <p>On Windows, this may be relative to the manifest itself. On MacOS and Linux it must be absolute.</p> </td> </tr> <tr> <td><code>type</code></td> <td>String</td> <td>This must be <code>"pkcs11"</code>.</td> </tr> <tr> <td><code>allowed_extensions</code></td> <td>Array of String</td> <td> <p>An array of <a href="https://extensionworkshop.com/documentation/develop/extensions-and-the-add-on-id/" rel=" noopener">Add-on ID</a> values. Each value represents an extension which is allowed to interact with the module.</p> <div class="notecard note"> <p><strong>Note:</strong> This means you will probably want to include the <code><a href="manifest.json/browser_specific_settings">applications</a></code> key in your extension's <code>manifest.json</code> file, so you can set an explicit ID during development.</p> </div> </td> </tr> </tbody> </table></div> <p>For example:</p> <div class="code-example"><pre data-language="json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"my_module"</span><span class="token punctuation">,</span>
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"My test module"</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"pkcs11"</span><span class="token punctuation">,</span>
  <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"/path/to/libpkcs11testmodule.dylib"</span><span class="token punctuation">,</span>
  <span class="token property">"allowed_extensions"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"my-extension@mozilla.org"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></pre></div> <p>Given this JSON manifest, saved as <code>my_module.json</code>, the <code>my-extension@mozilla.org</code> extension could install the security module at <code>/path/to/libpkcs11testmodule.dylib</code> using code like this:</p> <div class="code-example"><pre data-language="js">browser<span class="token punctuation">.</span>pkcs11<span class="token punctuation">.</span><span class="token function">installModule</span><span class="token punctuation">(</span><span class="token string">"my_module"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div>
<h2 id="manifest_location">Manifest location</h2>
<p>On Linux and macOS, you need to store the manifest in a particular place. On Windows, you need to create a registry key that points to the manifest's location.</p> <p>The detailed rules are the same for all the manifest types, except that the penultimate component of the path identifies the type of manifest. The examples below show the form for each of the three different types. In all the examples, <code><var>&lt;name&gt;</var></code> is the value of the <code>name</code> property in the manifest.</p>
<h3 id="windows">Windows</h3>
<p>For global visibility, create a registry key with the following name:</p> <pre class="notranslate">HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\NativeMessagingHosts\<var>&lt;name&gt;</var>

HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\ManagedStorage\<var>&lt;name&gt;</var>

HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\PKCS11Modules\<var>&lt;name&gt;</var></pre> <p>The key should have a single default value, which is the path to the manifest.</p> <div class="notecard warning"> <p><strong>Warning:</strong> As of Firefox 64, the 32-bit registry view (<a href="https://en.wikipedia.org/wiki/WoW64#Registry_and_file_system" rel=" noopener">Wow6432Node) </a>will be checked first for these keys, followed by the "native" registry view. Use whichever is appropriate for your application.</p> <p><strong>For Firefox 63 and older:</strong> This key should <em>not</em> be created under <a href="https://en.wikipedia.org/wiki/WoW64#Registry_and_file_system" rel=" noopener">Wow6432Node</a>, even if the app is 32-bit. Previous versions of the browser will always look for the key under the "native" view of the registry, not the 32-bit emulation. To ensure that the key is created in the "native" view, you can pass the <code>KEY_WOW64_64KEY</code> or <code>KEY_WOW64_32KEY</code> flags into <code>RegCreateKeyEx</code>. See <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa384129(v=vs.85).aspx" rel=" noopener">Accessing an Alternate Registry View</a>.</p> </div> <p>For per-user visibility, create a registry key with the following name:</p> <pre class="notranslate">HKEY_CURRENT_USER\SOFTWARE\Mozilla\NativeMessagingHosts\<var>&lt;name&gt;</var>

HKEY_CURRENT_USER\SOFTWARE\Mozilla\ManagedStorage\<var>&lt;name&gt;</var>

HKEY_CURRENT_USER\SOFTWARE\Mozilla\PKCS11Modules\<var>&lt;name&gt;</var></pre> <p>The key should have a single default value, which is the path to the manifest.</p>
<h3 id="macos">macOS</h3>
<p>For global visibility, store the manifest in:</p> <pre class="notranslate">/Library/Application Support/Mozilla/NativeMessagingHosts/<var>&lt;name&gt;</var>.json

/Library/Application Support/Mozilla/ManagedStorage/<var>&lt;name&gt;</var>.json

/Library/Application Support/Mozilla/PKCS11Modules/<var>&lt;name&gt;</var>.json</pre> <p>For per-user visibility, store the manifest in:</p> <pre class="notranslate">~/Library/Application Support/Mozilla/NativeMessagingHosts/<var>&lt;name&gt;</var>.json

~/Library/Application Support/Mozilla/ManagedStorage/<var>&lt;name&gt;</var>.json

~/Library/Application Support/Mozilla/PKCS11Modules/<var>&lt;name&gt;</var>.json
</pre>
<h3 id="linux">Linux</h3>
<p>For global visibility, store the manifest in either:</p> <pre class="notranslate">/usr/lib/mozilla/native-messaging-hosts/<var>&lt;name&gt;</var>.json

/usr/lib/mozilla/managed-storage/<var>&lt;name&gt;</var>.json

/usr/lib/mozilla/pkcs11-modules/<var>&lt;name&gt;</var>.json
</pre> <p>or:</p> <pre class="notranslate">/usr/lib64/mozilla/native-messaging-hosts/<var>&lt;name&gt;</var>.json

/usr/lib64/mozilla/managed-storage/<var>&lt;name&gt;</var>.json

/usr/lib64/mozilla/pkcs11-modules/<var>&lt;name&gt;</var>.json</pre> <p>For per-user visibility, store the manifest in:</p> <pre class="notranslate">~/.mozilla/native-messaging-hosts/<var>&lt;name&gt;</var>.json

~/.mozilla/managed-storage/<var>&lt;name&gt;</var>.json

~/.mozilla/pkcs11-modules/<var>&lt;name&gt;</var>.json</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2021 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Native_manifests" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Native_manifests</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
