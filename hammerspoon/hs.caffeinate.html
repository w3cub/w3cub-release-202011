
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>hs.caffeinate - Hammerspoon - W3cubDocs</title>
  
  <meta name="description" content=" Control system power states (sleeping, preventing sleep, screen locking, etc) ">
  <meta name="keywords" content="hs, caffeinate, hammerspoon">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/hammerspoon/hs.caffeinate.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/hammerspoon.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/hammerspoon/" class="_nav-link" title="" style="margin-left:0;">Hammerspoon</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _hammerspoon">
				
				
<header> <h1>hs.caffeinate</h1> <p>Control system power states (sleeping, preventing sleep, screen locking, etc)</p> <p><strong>NOTE</strong>: Any sleep preventions will be removed when hs.reload() is called. A future version of the module will save/restore state across reloads.</p> </header> <h3>Submodules</h3> <ul> <li><a href="hs.caffeinate.watcher">hs.caffeinate.watcher</a></li> </ul> <h3>API Overview</h3> <ul> <li>Functions - API calls offered directly by the extension</li> <ul> <li><a href="#currentAssertions">currentAssertions</a></li> <li><a href="#declareUserActivity">declareUserActivity</a></li> <li><a href="#fastUserSwitch">fastUserSwitch</a></li> <li><a href="#get">get</a></li> <li><a href="#lockScreen">lockScreen</a></li> <li><a href="#logOut">logOut</a></li> <li><a href="#restartSystem">restartSystem</a></li> <li><a href="#sessionProperties">sessionProperties</a></li> <li><a href="#set">set</a></li> <li><a href="#shutdownSystem">shutdownSystem</a></li> <li><a href="#startScreensaver">startScreensaver</a></li> <li><a href="#systemSleep">systemSleep</a></li> <li><a href="#toggle">toggle</a></li> </ul> </ul> <h3>API Documentation</h3> <h4 class="documentation-section">Functions</h4> <section id="currentAssertions">  <h5><a href="#currentAssertions">currentAssertions</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.currentAssertions()</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Fetches information about processes which are currently asserting display/power sleep restrictions</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>A table containing information about current power assertions, with process IDs (PID) as the keys, each of which may contain multiple assertions</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/libcaffeinate.m#L296">extensions/caffeinate/libcaffeinate.m line 296</a></td> </tr> </table> </section> <section id="declareUserActivity">  <h5><a href="#declareUserActivity">declareUserActivity</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.declareUserActivity([id])</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Informs the OS that the user performed some activity</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>id - An option number containing the assertion ID returned by a previous call of this function</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>A number containing the ID of the assertion generated by this function</li> </ul> </td> </tr> <tr> <th>Notes</th> <td>
<ul> <li>This is intended to simulate user activity, for example to prevent displays from sleeping, or to wake them up</li> <li>It is not mandatory to re-use assertion IDs if you are calling this function multiple times, but it is recommended that you do so if the calls are related</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/libcaffeinate.m#L209">extensions/caffeinate/libcaffeinate.m line 209</a></td> </tr> </table> </section> <section id="fastUserSwitch">  <h5><a href="#fastUserSwitch">fastUserSwitch</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.fastUserSwitch()</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Show the Fast User Switch screen (ie a login screen without logging out first)</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/caffeinate.lua#L109">extensions/caffeinate/caffeinate.lua line 109</a></td> </tr> </table> </section> <section id="get">  <h5><a href="#get">get</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.get(sleepType) -&gt; bool or nil</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Queries whether a particular sleep type is being prevented</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>sleepType - A string containing the type of sleep to inspect (see <a href="#set">hs.caffeinate.set()</a> for information about the possible values)</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>True if the specified type of sleep is being prevented, false if not. nil if sleepType was an invalid value</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/caffeinate.lua#L55">extensions/caffeinate/caffeinate.lua line 55</a></td> </tr> </table> </section> <section id="lockScreen">  <h5><a href="#lockScreen">lockScreen</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.lockScreen()</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Locks the displays</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Notes</th> <td>
<ul> <li>This function uses private Apple APIs and could therefore stop working in any given release of macOS without warning.</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/libcaffeinate.m#L237">extensions/caffeinate/libcaffeinate.m line 237</a></td> </tr> </table> </section> <section id="logOut">  <h5><a href="#logOut">logOut</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.logOut()</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Request the system log out the current user</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/caffeinate.lua#L135">extensions/caffeinate/caffeinate.lua line 135</a></td> </tr> </table> </section> <section id="restartSystem">  <h5><a href="#restartSystem">restartSystem</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.restartSystem()</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Request the system reboot</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/caffeinate.lua#L148">extensions/caffeinate/caffeinate.lua line 148</a></td> </tr> </table> </section> <section id="sessionProperties">  <h5><a href="#sessionProperties">sessionProperties</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.sessionProperties()</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Fetches information from the display server about the current session</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>A table containing information about the current session, or nil if an error occurred</li> </ul> </td> </tr> <tr> <th>Notes</th> <td>
<ul> <li>The keys in this dictionary will vary based on the current state of the system (e.g. local vs VNC login, screen locked vs unlocked).</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/libcaffeinate.m#L271">extensions/caffeinate/libcaffeinate.m line 271</a></td> </tr> </table> </section> <section id="set">  <h5><a href="#set">set</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.set(sleepType, aValue, acAndBattery)</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Configures the sleep prevention settings</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>sleepType - A string containing the type of sleep to be configured. The value should be one of:<ul> <li>displayIdle - Controls whether the screen will be allowed to sleep (and also the system) if the user is idle.</li> <li>systemIdle - Controls whether the system will be allowed to sleep if the user is idle (display may still sleep).</li> <li>system - Controls whether the system will be allowed to sleep for any reason.</li> </ul> </li> <li>aValue - A boolean, true if the specified type of sleep should be prevented, false if it should be allowed</li> <li>acAndBattery - A boolean, true if the sleep prevention should apply to both AC power and battery power, false if it should only apply to AC power.</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Notes</th> <td>
<ul> <li>These calls are not guaranteed to prevent the system sleep behaviours described above. The OS may override them if it feels it must (e.g. if your CPU temperature becomes dangerously high).</li> <li>The acAndBattery argument only applies to the <code>system</code> sleep type.</li> <li>You can toggle the acAndBattery state by calling <code>hs.caffeinate.set()</code> again and altering the acAndBattery value.</li> <li>The acAndBattery option does not appear to work anymore - it is based on private API that is not allowed in macOS 10.15 when running with the Hardened Runtime (which Hammerspoon now uses).</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/caffeinate.lua#L11">extensions/caffeinate/caffeinate.lua line 11</a></td> </tr> </table> </section> <section id="shutdownSystem">  <h5><a href="#shutdownSystem">shutdownSystem</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.shutdownSystem()</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Request the system log out and power down</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/caffeinate.lua#L161">extensions/caffeinate/caffeinate.lua line 161</a></td> </tr> </table> </section> <section id="startScreensaver">  <h5><a href="#startScreensaver">startScreensaver</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.startScreensaver()</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Request the system start the screensaver (which may lock the screen if the OS is configured to do so)</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/caffeinate.lua#L122">extensions/caffeinate/caffeinate.lua line 122</a></td> </tr> </table> </section> <section id="systemSleep">  <h5><a href="#systemSleep">systemSleep</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.systemSleep()</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Requests the system to sleep immediately</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>None</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/libcaffeinate.m#L193">extensions/caffeinate/libcaffeinate.m line 193</a></td> </tr> </table> </section> <section id="toggle">  <h5><a href="#toggle">toggle</a></h5> <table> <tr> <th>Signature</th> <td><code>hs.caffeinate.toggle(sleepType) -&gt; bool or nil</code></td> </tr> <tr> <th>Type</th> <td>Function</td> </tr> <tr> <th>Description</th> <td>
<p>Toggles the current state of the specified type of sleep</p> </td> </tr> <tr> <th>Parameters</th> <td>
<ul> <li>sleepType - A string containing the type of sleep to toggle (see <a href="#set">hs.caffeinate.set()</a> for information about the possible values)</li> </ul> </td> </tr> <tr> <th>Returns</th> <td>
<ul> <li>True if the specified type of sleep is being prevented, false if not. nil if sleepType was an invalid value</li> </ul> </td> </tr> <tr> <th>Notes</th> <td>
<ul> <li>If systemIdle is toggled to on, it will apply to AC only</li> </ul> </td> </tr> <tr> <th>Source</th> <td><a href="https://github.com/Hammerspoon/hammerspoon/blob/master/extensions/caffeinate/caffeinate.lua#L82">extensions/caffeinate/caffeinate.lua line 82</a></td> </tr> </table> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2014–2017 Hammerspoon contributors<br>Licensed under the MIT License.<br>
    <a href="https://www.hammerspoon.org/docs/hs.caffeinate.html" class="_attribution-link">https://www.hammerspoon.org/docs/hs.caffeinate.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
