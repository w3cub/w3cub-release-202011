
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Template_preprocess_links - Drupal 8 - W3cubDocs</title>
  
  <meta name="description" content=" Prepares variables for links templates. ">
  <meta name="keywords" content="function, template, preprocess, links, drupal, drupal~8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/drupal~8/core-includes-theme.inc/function/template_preprocess_links/8.1.x.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/drupal~8.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/drupal~8/" class="_nav-link" title="" style="margin-left:0;">Drupal 8</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _drupal">
				
				
<h1 id="page-subtitle">function template_preprocess_links</h1>     <pre class="signature">template_preprocess_links(&amp;$variables)</pre> <p>Prepares variables for links templates.</p> <p>Default template: <a href="../../../core-modules-system-templates-links.html.twig/8.1.x" title="Default theme implementation for a set of links." class="local">links.html.twig</a>.</p> <p>Unfortunately links templates duplicate the "active" class handling of l() and LinkGenerator::generate() because it needs to be able to set the "active" class not on the links themselves (&lt;a&gt; tags), but on the list items (&lt;li&gt; tags) that contain the links. This is necessary for CSS to be able to style list items differently when the link is active, since CSS does not yet allow one to style list items only if it contains a certain element with a certain class. I.e. we cannot yet convert this jQuery selector to a CSS selector: jQuery('li:has("a.is-active")')</p> <h3>Parameters</h3> <p> <strong>array $variables</strong>: An associative array containing:</p> <ul> <li>
<strong>links</strong>: An array of links to be themed. Each link should be itself an array, with the following elements: <ul> <li>
<strong>title</strong>: The link text.</li> <li>
<strong>url</strong>: (optional) The <a href="../../../core-lib-drupal-core-url.php/class/url/8.1.x" title="Defines an object that holds information about a URL." class="local">\Drupal\Core\Url</a> object to link to. If omitted, no anchor tag is printed out.</li> <li>
<strong>attributes</strong>: (optional) Attributes for the anchor, or for the &lt;span&gt; tag used in its place if no 'href' is supplied. If element 'class' is included, it must be an array of one or more class names.</li> </ul> <p>If the 'href' element is supplied, the entire link array is passed to l() as its $options parameter.</p>
</li> <li>
<strong>attributes</strong>: A keyed array of attributes for the &lt;ul&gt; containing the list of links.</li> <li>
<strong>set_active_class</strong>: (optional) Whether each link should compare the route_name + route_parameters or href (path), language and query options to the current URL, to determine whether the link is "active". If so, an "active" class will be applied to the list item containing the link, as well as the link itself. It is important to use this sparingly since it is usually unnecessary and requires extra processing. For anonymous users, the "active" class will be calculated on the server, because most sites serve each anonymous user the same cached page anyway. For authenticated users, the "active" class will be calculated on the client (through JavaScript), only data- attributes are added to list items and contained links, to prevent breaking the render cache. The JavaScript is added in <a href="../../../core-modules-system-system.module/function/system_page_attachments/8.1.x" title="Implements hook_page_attachments()." class="local">system_page_attachments</a>().</li> <li>
<strong>heading</strong>: (optional) A heading to precede the links. May be an associative array or a string. If it's an array, it can have the following elements: <ul> <li>
<strong>text</strong>: The heading text.</li> <li>
<strong>level</strong>: The heading level (e.g. 'h2', 'h3').</li> <li>
<strong>attributes</strong>: (optional) An array of the CSS attributes for the heading.</li> </ul> <p>When using a string it will be used as the text of the heading and the level will default to 'h2'. Headings should be used on navigation menus and any list of links that consistently appears on multiple pages. To make the heading invisible use the 'visually-hidden' CSS class. Do not use 'display:none', which removes it from screen readers and assistive technology. Headings allow screen reader and keyboard only users to navigate to or skip the links. See <a href="http://juicystudio.com/article/screen-readers-display-none.php">http://juicystudio.com/article/screen-readers-display-none.php</a> and <a href="http://www.w3.org/TR/WCAG-TECHS/H42.html">http://www.w3.org/TR/WCAG-TECHS/H42.html</a> for more information.</p>
</li> </ul> <h3>See also</h3> <p> <a href="../../../core-lib-drupal-core-utility-linkgenerator.php/class/linkgenerator/8.1.x" title="Provides a class which generates a link with route names and parameters." class="local">\Drupal\Core\Utility\LinkGenerator</a></p> <p><a href="../../../core-lib-drupal-core-utility-linkgenerator.php/function/linkgenerator-generate/8.1.x" title='For anonymous users, the "active" class will be calculated on the server,
because most sites serve each anonymous user the same cached page anyway.
For authenticated users, the "active" class will be calculated on the
client…' class="local">\Drupal\Core\Utility\LinkGenerator::generate</a>()</p> <p><a href="../../../core-modules-system-system.module/function/system_page_attachments/8.1.x" title="Implements hook_page_attachments()." class="local">system_page_attachments</a>()</p> <h3>File</h3> 
<dl> <dt>core/includes/<a href="../../8.1.x">theme.inc</a>, line 652</dt> <dd>The theme system, which controls the output of Drupal.</dd> </dl> <h3>Code</h3> <pre class="php" data-language="php">function template_preprocess_links(&amp;$variables) {
  $links = $variables['links'];
  $heading = &amp;$variables['heading'];

  if (!empty($links)) {
    // Prepend the heading to the list, if any.
    if (!empty($heading)) {
      // Convert a string heading into an array, using a &lt;h2&gt; tag by default.
      if (is_string($heading)) {
        $heading = array('text' =&gt; $heading);
      }
      // Merge in default array properties into $heading.
      $heading += array(
        'level' =&gt; 'h2',
        'attributes' =&gt; array(),
      );
      // Convert the attributes array into an Attribute object.
      $heading['attributes'] = new Attribute($heading['attributes']);
    }

    $variables['links'] = array();
    foreach ($links as $key =&gt; $link) {
      $item = array();
      $link += array(
        'ajax' =&gt; NULL,
        'url' =&gt; NULL,
      );

      $li_attributes = array();
      $keys = ['title', 'url'];
      $link_element = array(
        '#type' =&gt; 'link',
        '#title' =&gt; $link['title'],
        '#options' =&gt; array_diff_key($link, array_combine($keys, $keys)),
        '#url' =&gt; $link['url'],
        '#ajax' =&gt; $link['ajax'],
      );

      // Handle links and ensure that the active class is added on the LIs, but
      // only if the 'set_active_class' option is not empty.
      if (isset($link['url'])) {
        if (!empty($variables['set_active_class'])) {

          // Also enable set_active_class for the contained link.
          $link_element['#options']['set_active_class'] = TRUE;

          if (!empty($link['language'])) {
            $li_attributes['hreflang'] = $link['language']-&gt;getId();
          }

          // Add a "data-drupal-link-query" attribute to let the
          // drupal.active-link library know the query in a standardized manner.
          if (!empty($link['query'])) {
            $query = $link['query'];
            ksort($query);
            $li_attributes['data-drupal-link-query'] = Json::encode($query);
          }

          /** @var \Drupal\Core\Url $url */
          $url = $link['url'];
          if ($url-&gt;isRouted()) {
            // Add a "data-drupal-link-system-path" attribute to let the
            // drupal.active-link library know the path in a standardized manner.
            $system_path = $url-&gt;getInternalPath();
            // @todo System path is deprecated - use the route name and parameters.
            // Special case for the front page.
            $li_attributes['data-drupal-link-system-path'] = $system_path == '' ? '&lt;front&gt;' : $system_path;
          }
        }

        $item['link'] = $link_element;
      }

      // Handle title-only text items.
      $item['text'] = $link['title'];
      if (isset($link['attributes'])) {
        $item['text_attributes'] = new Attribute($link['attributes']);
      }

      // Handle list item attributes.
      $item['attributes'] = new Attribute($li_attributes);

      // Add the item to the list of links.
      $variables['links'][$key] = $item;
    }
  }
}
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    © 2001–2016 by the original authors<br>Licensed under the GNU General Public License, version 2 and later.<br>Drupal is a registered trademark of Dries Buytaert.<br>
    <a href="https://api.drupal.org/api/drupal/core!includes!theme.inc/function/template_preprocess_links/8.1.x" class="_attribution-link">https://api.drupal.org/api/drupal/core!includes!theme.inc/function/template_preprocess_links/8.1.x</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
