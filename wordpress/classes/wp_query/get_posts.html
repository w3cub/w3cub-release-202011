
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>WP_Query&#58;&#58;get_posts() - WordPress - W3cubDocs</title>
  
  <meta name="description" content=" Retrieves an array of posts based on query variables. ">
  <meta name="keywords" content="wp, query, get, posts, wordpress">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/wordpress/classes/wp_query/get_posts.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/wordpress.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/wordpress/" class="_nav-link" title="" style="margin-left:0;">WordPress</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _wordpress">
				
				
<h1>WP_Query::get_posts()</h1>  <section class="summary"> <p>Retrieves an array of posts based on query variables.</p> </section> <div class="content-toc">  <section class="description"> <h2 class="toc-heading" id="description" tabindex="-1">Description </h2> <p>There are a few filters and actions that can be used to modify the post database query.</p> </section>  <section class="return"> <h2 class="toc-heading" id="return" tabindex="-1">Return </h2> <p><span class="return-type">(<a href="../wp_post">WP_Post</a>[]|int[])</span> Array of post objects or post IDs.</p> </section>  <section class="source-content"> <h2 class="toc-heading" id="source" tabindex="-1">Source </h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/class-wp-query.php/">wp-includes/class-wp-query.php</a> </p> <pre class="source-code-container" data-language="php">public function get_posts() {
		global $wpdb;

		$this-&gt;parse_query();

		/**
		 * Fires after the query variable object is created, but before the actual query is run.
		 *
		 * Note: If using conditional tags, use the method versions within the passed instance
		 * (e.g. $this-&gt;is_main_query() instead of is_main_query()). This is because the functions
		 * like is_main_query() test against the global $wp_query instance, not the passed one.
		 *
		 * @since 2.0.0
		 *
		 * @param WP_Query $this The WP_Query instance (passed by reference).
		 */
		do_action_ref_array( 'pre_get_posts', array( &amp;$this ) );

		// Shorthand.
		$q = &amp;$this-&gt;query_vars;

		// Fill again in case 'pre_get_posts' unset some vars.
		$q = $this-&gt;fill_query_vars( $q );

		// Parse meta query.
		$this-&gt;meta_query = new WP_Meta_Query();
		$this-&gt;meta_query-&gt;parse_query_vars( $q );

		// Set a flag if a 'pre_get_posts' hook changed the query vars.
		$hash = md5( serialize( $this-&gt;query_vars ) );
		if ( $hash != $this-&gt;query_vars_hash ) {
			$this-&gt;query_vars_changed = true;
			$this-&gt;query_vars_hash    = $hash;
		}
		unset( $hash );

		// First let's clear some variables.
		$distinct         = '';
		$whichauthor      = '';
		$whichmimetype    = '';
		$where            = '';
		$limits           = '';
		$join             = '';
		$search           = '';
		$groupby          = '';
		$post_status_join = false;
		$page             = 1;

		if ( isset( $q['caller_get_posts'] ) ) {
			_deprecated_argument(
				'WP_Query',
				'3.1.0',
				sprintf(
					/* translators: 1: caller_get_posts, 2: ignore_sticky_posts */
					__( '%1$s is deprecated. Use %2$s instead.' ),
					'&lt;code&gt;caller_get_posts&lt;/code&gt;',
					'&lt;code&gt;ignore_sticky_posts&lt;/code&gt;'
				)
			);

			if ( ! isset( $q['ignore_sticky_posts'] ) ) {
				$q['ignore_sticky_posts'] = $q['caller_get_posts'];
			}
		}

		if ( ! isset( $q['ignore_sticky_posts'] ) ) {
			$q['ignore_sticky_posts'] = false;
		}

		if ( ! isset( $q['suppress_filters'] ) ) {
			$q['suppress_filters'] = false;
		}

		if ( ! isset( $q['cache_results'] ) ) {
			if ( wp_using_ext_object_cache() ) {
				$q['cache_results'] = false;
			} else {
				$q['cache_results'] = true;
			}
		}

		if ( ! isset( $q['update_post_term_cache'] ) ) {
			$q['update_post_term_cache'] = true;
		}

		if ( ! isset( $q['lazy_load_term_meta'] ) ) {
			$q['lazy_load_term_meta'] = $q['update_post_term_cache'];
		}

		if ( ! isset( $q['update_post_meta_cache'] ) ) {
			$q['update_post_meta_cache'] = true;
		}

		if ( ! isset( $q['post_type'] ) ) {
			if ( $this-&gt;is_search ) {
				$q['post_type'] = 'any';
			} else {
				$q['post_type'] = '';
			}
		}
		$post_type = $q['post_type'];
		if ( empty( $q['posts_per_page'] ) ) {
			$q['posts_per_page'] = get_option( 'posts_per_page' );
		}
		if ( isset( $q['showposts'] ) &amp;&amp; $q['showposts'] ) {
			$q['showposts']      = (int) $q['showposts'];
			$q['posts_per_page'] = $q['showposts'];
		}
		if ( ( isset( $q['posts_per_archive_page'] ) &amp;&amp; 0 != $q['posts_per_archive_page'] ) &amp;&amp; ( $this-&gt;is_archive || $this-&gt;is_search ) ) {
			$q['posts_per_page'] = $q['posts_per_archive_page'];
		}
		if ( ! isset( $q['nopaging'] ) ) {
			if ( -1 == $q['posts_per_page'] ) {
				$q['nopaging'] = true;
			} else {
				$q['nopaging'] = false;
			}
		}

		if ( $this-&gt;is_feed ) {
			// This overrides 'posts_per_page'.
			if ( ! empty( $q['posts_per_rss'] ) ) {
				$q['posts_per_page'] = $q['posts_per_rss'];
			} else {
				$q['posts_per_page'] = get_option( 'posts_per_rss' );
			}
			$q['nopaging'] = false;
		}
		$q['posts_per_page'] = (int) $q['posts_per_page'];
		if ( $q['posts_per_page'] &lt; -1 ) {
			$q['posts_per_page'] = abs( $q['posts_per_page'] );
		} elseif ( 0 == $q['posts_per_page'] ) {
			$q['posts_per_page'] = 1;
		}

		if ( ! isset( $q['comments_per_page'] ) || 0 == $q['comments_per_page'] ) {
			$q['comments_per_page'] = get_option( 'comments_per_page' );
		}

		if ( $this-&gt;is_home &amp;&amp; ( empty( $this-&gt;query ) || 'true' === $q['preview'] ) &amp;&amp; ( 'page' === get_option( 'show_on_front' ) ) &amp;&amp; get_option( 'page_on_front' ) ) {
			$this-&gt;is_page = true;
			$this-&gt;is_home = false;
			$q['page_id']  = get_option( 'page_on_front' );
		}

		if ( isset( $q['page'] ) ) {
			$q['page'] = trim( $q['page'], '/' );
			$q['page'] = absint( $q['page'] );
		}

		// If true, forcibly turns off SQL_CALC_FOUND_ROWS even when limits are present.
		if ( isset( $q['no_found_rows'] ) ) {
			$q['no_found_rows'] = (bool) $q['no_found_rows'];
		} else {
			$q['no_found_rows'] = false;
		}

		switch ( $q['fields'] ) {
			case 'ids':
				$fields = "{$wpdb-&gt;posts}.ID";
				break;
			case 'id=&gt;parent':
				$fields = "{$wpdb-&gt;posts}.ID, {$wpdb-&gt;posts}.post_parent";
				break;
			default:
				$fields = "{$wpdb-&gt;posts}.*";
		}

		if ( '' !== $q['menu_order'] ) {
			$where .= " AND {$wpdb-&gt;posts}.menu_order = " . $q['menu_order'];
		}
		// The "m" parameter is meant for months but accepts datetimes of varying specificity.
		if ( $q['m'] ) {
			$where .= " AND YEAR({$wpdb-&gt;posts}.post_date)=" . substr( $q['m'], 0, 4 );
			if ( strlen( $q['m'] ) &gt; 5 ) {
				$where .= " AND MONTH({$wpdb-&gt;posts}.post_date)=" . substr( $q['m'], 4, 2 );
			}
			if ( strlen( $q['m'] ) &gt; 7 ) {
				$where .= " AND DAYOFMONTH({$wpdb-&gt;posts}.post_date)=" . substr( $q['m'], 6, 2 );
			}
			if ( strlen( $q['m'] ) &gt; 9 ) {
				$where .= " AND HOUR({$wpdb-&gt;posts}.post_date)=" . substr( $q['m'], 8, 2 );
			}
			if ( strlen( $q['m'] ) &gt; 11 ) {
				$where .= " AND MINUTE({$wpdb-&gt;posts}.post_date)=" . substr( $q['m'], 10, 2 );
			}
			if ( strlen( $q['m'] ) &gt; 13 ) {
				$where .= " AND SECOND({$wpdb-&gt;posts}.post_date)=" . substr( $q['m'], 12, 2 );
			}
		}

		// Handle the other individual date parameters.
		$date_parameters = array();

		if ( '' !== $q['hour'] ) {
			$date_parameters['hour'] = $q['hour'];
		}

		if ( '' !== $q['minute'] ) {
			$date_parameters['minute'] = $q['minute'];
		}

		if ( '' !== $q['second'] ) {
			$date_parameters['second'] = $q['second'];
		}

		if ( $q['year'] ) {
			$date_parameters['year'] = $q['year'];
		}

		if ( $q['monthnum'] ) {
			$date_parameters['monthnum'] = $q['monthnum'];
		}

		if ( $q['w'] ) {
			$date_parameters['week'] = $q['w'];
		}

		if ( $q['day'] ) {
			$date_parameters['day'] = $q['day'];
		}

		if ( $date_parameters ) {
			$date_query = new WP_Date_Query( array( $date_parameters ) );
			$where     .= $date_query-&gt;get_sql();
		}
		unset( $date_parameters, $date_query );

		// Handle complex date queries.
		if ( ! empty( $q['date_query'] ) ) {
			$this-&gt;date_query = new WP_Date_Query( $q['date_query'] );
			$where           .= $this-&gt;date_query-&gt;get_sql();
		}

		// If we've got a post_type AND it's not "any" post_type.
		if ( ! empty( $q['post_type'] ) &amp;&amp; 'any' !== $q['post_type'] ) {
			foreach ( (array) $q['post_type'] as $_post_type ) {
				$ptype_obj = get_post_type_object( $_post_type );
				if ( ! $ptype_obj || ! $ptype_obj-&gt;query_var || empty( $q[ $ptype_obj-&gt;query_var ] ) ) {
					continue;
				}

				if ( ! $ptype_obj-&gt;hierarchical ) {
					// Non-hierarchical post types can directly use 'name'.
					$q['name'] = $q[ $ptype_obj-&gt;query_var ];
				} else {
					// Hierarchical post types will operate through 'pagename'.
					$q['pagename'] = $q[ $ptype_obj-&gt;query_var ];
					$q['name']     = '';
				}

				// Only one request for a slug is possible, this is why name &amp; pagename are overwritten above.
				break;
			} // End foreach.
			unset( $ptype_obj );
		}

		if ( '' !== $q['title'] ) {
			$where .= $wpdb-&gt;prepare( " AND {$wpdb-&gt;posts}.post_title = %s", stripslashes( $q['title'] ) );
		}

		// Parameters related to 'post_name'.
		if ( '' !== $q['name'] ) {
			$q['name'] = sanitize_title_for_query( $q['name'] );
			$where    .= " AND {$wpdb-&gt;posts}.post_name = '" . $q['name'] . "'";
		} elseif ( '' !== $q['pagename'] ) {
			if ( isset( $this-&gt;queried_object_id ) ) {
				$reqpage = $this-&gt;queried_object_id;
			} else {
				if ( 'page' !== $q['post_type'] ) {
					foreach ( (array) $q['post_type'] as $_post_type ) {
						$ptype_obj = get_post_type_object( $_post_type );
						if ( ! $ptype_obj || ! $ptype_obj-&gt;hierarchical ) {
							continue;
						}

						$reqpage = get_page_by_path( $q['pagename'], OBJECT, $_post_type );
						if ( $reqpage ) {
							break;
						}
					}
					unset( $ptype_obj );
				} else {
					$reqpage = get_page_by_path( $q['pagename'] );
				}
				if ( ! empty( $reqpage ) ) {
					$reqpage = $reqpage-&gt;ID;
				} else {
					$reqpage = 0;
				}
			}

			$page_for_posts = get_option( 'page_for_posts' );
			if ( ( 'page' !== get_option( 'show_on_front' ) ) || empty( $page_for_posts ) || ( $reqpage != $page_for_posts ) ) {
				$q['pagename'] = sanitize_title_for_query( wp_basename( $q['pagename'] ) );
				$q['name']     = $q['pagename'];
				$where        .= " AND ({$wpdb-&gt;posts}.ID = '$reqpage')";
				$reqpage_obj   = get_post( $reqpage );
				if ( is_object( $reqpage_obj ) &amp;&amp; 'attachment' === $reqpage_obj-&gt;post_type ) {
					$this-&gt;is_attachment = true;
					$post_type           = 'attachment';
					$q['post_type']      = 'attachment';
					$this-&gt;is_page       = true;
					$q['attachment_id']  = $reqpage;
				}
			}
		} elseif ( '' !== $q['attachment'] ) {
			$q['attachment'] = sanitize_title_for_query( wp_basename( $q['attachment'] ) );
			$q['name']       = $q['attachment'];
			$where          .= " AND {$wpdb-&gt;posts}.post_name = '" . $q['attachment'] . "'";
		} elseif ( is_array( $q['post_name__in'] ) &amp;&amp; ! empty( $q['post_name__in'] ) ) {
			$q['post_name__in'] = array_map( 'sanitize_title_for_query', $q['post_name__in'] );
			$post_name__in      = "'" . implode( "','", $q['post_name__in'] ) . "'";
			$where             .= " AND {$wpdb-&gt;posts}.post_name IN ($post_name__in)";
		}

		// If an attachment is requested by number, let it supersede any post number.
		if ( $q['attachment_id'] ) {
			$q['p'] = absint( $q['attachment_id'] );
		}

		// If a post number is specified, load that post.
		if ( $q['p'] ) {
			$where .= " AND {$wpdb-&gt;posts}.ID = " . $q['p'];
		} elseif ( $q['post__in'] ) {
			$post__in = implode( ',', array_map( 'absint', $q['post__in'] ) );
			$where   .= " AND {$wpdb-&gt;posts}.ID IN ($post__in)";
		} elseif ( $q['post__not_in'] ) {
			$post__not_in = implode( ',', array_map( 'absint', $q['post__not_in'] ) );
			$where       .= " AND {$wpdb-&gt;posts}.ID NOT IN ($post__not_in)";
		}

		if ( is_numeric( $q['post_parent'] ) ) {
			$where .= $wpdb-&gt;prepare( " AND {$wpdb-&gt;posts}.post_parent = %d ", $q['post_parent'] );
		} elseif ( $q['post_parent__in'] ) {
			$post_parent__in = implode( ',', array_map( 'absint', $q['post_parent__in'] ) );
			$where          .= " AND {$wpdb-&gt;posts}.post_parent IN ($post_parent__in)";
		} elseif ( $q['post_parent__not_in'] ) {
			$post_parent__not_in = implode( ',', array_map( 'absint', $q['post_parent__not_in'] ) );
			$where              .= " AND {$wpdb-&gt;posts}.post_parent NOT IN ($post_parent__not_in)";
		}

		if ( $q['page_id'] ) {
			if ( ( 'page' !== get_option( 'show_on_front' ) ) || ( get_option( 'page_for_posts' ) != $q['page_id'] ) ) {
				$q['p'] = $q['page_id'];
				$where  = " AND {$wpdb-&gt;posts}.ID = " . $q['page_id'];
			}
		}

		// If a search pattern is specified, load the posts that match.
		if ( strlen( $q['s'] ) ) {
			$search = $this-&gt;parse_search( $q );
		}

		if ( ! $q['suppress_filters'] ) {
			/**
			 * Filters the search SQL that is used in the WHERE clause of WP_Query.
			 *
			 * @since 3.0.0
			 *
			 * @param string   $search Search SQL for WHERE clause.
			 * @param WP_Query $this   The current WP_Query object.
			 */
			$search = apply_filters_ref_array( 'posts_search', array( $search, &amp;$this ) );
		}

		// Taxonomies.
		if ( ! $this-&gt;is_singular ) {
			$this-&gt;parse_tax_query( $q );

			$clauses = $this-&gt;tax_query-&gt;get_sql( $wpdb-&gt;posts, 'ID' );

			$join  .= $clauses['join'];
			$where .= $clauses['where'];
		}

		if ( $this-&gt;is_tax ) {
			if ( empty( $post_type ) ) {
				// Do a fully inclusive search for currently registered post types of queried taxonomies.
				$post_type  = array();
				$taxonomies = array_keys( $this-&gt;tax_query-&gt;queried_terms );
				foreach ( get_post_types( array( 'exclude_from_search' =&gt; false ) ) as $pt ) {
					$object_taxonomies = 'attachment' === $pt ? get_taxonomies_for_attachments() : get_object_taxonomies( $pt );
					if ( array_intersect( $taxonomies, $object_taxonomies ) ) {
						$post_type[] = $pt;
					}
				}
				if ( ! $post_type ) {
					$post_type = 'any';
				} elseif ( count( $post_type ) == 1 ) {
					$post_type = $post_type[0];
				}

				$post_status_join = true;
			} elseif ( in_array( 'attachment', (array) $post_type, true ) ) {
				$post_status_join = true;
			}
		}

		/*
		 * Ensure that 'taxonomy', 'term', 'term_id', 'cat', and
		 * 'category_name' vars are set for backward compatibility.
		 */
		if ( ! empty( $this-&gt;tax_query-&gt;queried_terms ) ) {

			/*
			 * Set 'taxonomy', 'term', and 'term_id' to the
			 * first taxonomy other than 'post_tag' or 'category'.
			 */
			if ( ! isset( $q['taxonomy'] ) ) {
				foreach ( $this-&gt;tax_query-&gt;queried_terms as $queried_taxonomy =&gt; $queried_items ) {
					if ( empty( $queried_items['terms'][0] ) ) {
						continue;
					}

					if ( ! in_array( $queried_taxonomy, array( 'category', 'post_tag' ), true ) ) {
						$q['taxonomy'] = $queried_taxonomy;

						if ( 'slug' === $queried_items['field'] ) {
							$q['term'] = $queried_items['terms'][0];
						} else {
							$q['term_id'] = $queried_items['terms'][0];
						}

						// Take the first one we find.
						break;
					}
				}
			}

			// 'cat', 'category_name', 'tag_id'.
			foreach ( $this-&gt;tax_query-&gt;queried_terms as $queried_taxonomy =&gt; $queried_items ) {
				if ( empty( $queried_items['terms'][0] ) ) {
					continue;
				}

				if ( 'category' === $queried_taxonomy ) {
					$the_cat = get_term_by( $queried_items['field'], $queried_items['terms'][0], 'category' );
					if ( $the_cat ) {
						$this-&gt;set( 'cat', $the_cat-&gt;term_id );
						$this-&gt;set( 'category_name', $the_cat-&gt;slug );
					}
					unset( $the_cat );
				}

				if ( 'post_tag' === $queried_taxonomy ) {
					$the_tag = get_term_by( $queried_items['field'], $queried_items['terms'][0], 'post_tag' );
					if ( $the_tag ) {
						$this-&gt;set( 'tag_id', $the_tag-&gt;term_id );
					}
					unset( $the_tag );
				}
			}
		}

		if ( ! empty( $this-&gt;tax_query-&gt;queries ) || ! empty( $this-&gt;meta_query-&gt;queries ) ) {
			$groupby = "{$wpdb-&gt;posts}.ID";
		}

		// Author/user stuff.

		if ( ! empty( $q['author'] ) &amp;&amp; '0' != $q['author'] ) {
			$q['author'] = addslashes_gpc( '' . urldecode( $q['author'] ) );
			$authors     = array_unique( array_map( 'intval', preg_split( '/[,\s]+/', $q['author'] ) ) );
			foreach ( $authors as $author ) {
				$key         = $author &gt; 0 ? 'author__in' : 'author__not_in';
				$q[ $key ][] = abs( $author );
			}
			$q['author'] = implode( ',', $authors );
		}

		if ( ! empty( $q['author__not_in'] ) ) {
			$author__not_in = implode( ',', array_map( 'absint', array_unique( (array) $q['author__not_in'] ) ) );
			$where         .= " AND {$wpdb-&gt;posts}.post_author NOT IN ($author__not_in) ";
		} elseif ( ! empty( $q['author__in'] ) ) {
			$author__in = implode( ',', array_map( 'absint', array_unique( (array) $q['author__in'] ) ) );
			$where     .= " AND {$wpdb-&gt;posts}.post_author IN ($author__in) ";
		}

		// Author stuff for nice URLs.

		if ( '' !== $q['author_name'] ) {
			if ( strpos( $q['author_name'], '/' ) !== false ) {
				$q['author_name'] = explode( '/', $q['author_name'] );
				if ( $q['author_name'][ count( $q['author_name'] ) - 1 ] ) {
					$q['author_name'] = $q['author_name'][ count( $q['author_name'] ) - 1 ]; // No trailing slash.
				} else {
					$q['author_name'] = $q['author_name'][ count( $q['author_name'] ) - 2 ]; // There was a trailing slash.
				}
			}
			$q['author_name'] = sanitize_title_for_query( $q['author_name'] );
			$q['author']      = get_user_by( 'slug', $q['author_name'] );
			if ( $q['author'] ) {
				$q['author'] = $q['author']-&gt;ID;
			}
			$whichauthor .= " AND ({$wpdb-&gt;posts}.post_author = " . absint( $q['author'] ) . ')';
		}

		// Matching by comment count.
		if ( isset( $q['comment_count'] ) ) {
			// Numeric comment count is converted to array format.
			if ( is_numeric( $q['comment_count'] ) ) {
				$q['comment_count'] = array(
					'value' =&gt; intval( $q['comment_count'] ),
				);
			}

			if ( isset( $q['comment_count']['value'] ) ) {
				$q['comment_count'] = array_merge(
					array(
						'compare' =&gt; '=',
					),
					$q['comment_count']
				);

				// Fallback for invalid compare operators is '='.
				$compare_operators = array( '=', '!=', '&gt;', '&gt;=', '&lt;', '&lt;=' );
				if ( ! in_array( $q['comment_count']['compare'], $compare_operators, true ) ) {
					$q['comment_count']['compare'] = '=';
				}

				$where .= $wpdb-&gt;prepare( " AND {$wpdb-&gt;posts}.comment_count {$q['comment_count']['compare']} %d", $q['comment_count']['value'] );
			}
		}

		// MIME-Type stuff for attachment browsing.

		if ( isset( $q['post_mime_type'] ) &amp;&amp; '' !== $q['post_mime_type'] ) {
			$whichmimetype = wp_post_mime_type_where( $q['post_mime_type'], $wpdb-&gt;posts );
		}
		$where .= $search . $whichauthor . $whichmimetype;

		if ( ! empty( $this-&gt;meta_query-&gt;queries ) ) {
			$clauses = $this-&gt;meta_query-&gt;get_sql( 'post', $wpdb-&gt;posts, 'ID', $this );
			$join   .= $clauses['join'];
			$where  .= $clauses['where'];
		}

		$rand = ( isset( $q['orderby'] ) &amp;&amp; 'rand' === $q['orderby'] );
		if ( ! isset( $q['order'] ) ) {
			$q['order'] = $rand ? '' : 'DESC';
		} else {
			$q['order'] = $rand ? '' : $this-&gt;parse_order( $q['order'] );
		}

		// These values of orderby should ignore the 'order' parameter.
		$force_asc = array( 'post__in', 'post_name__in', 'post_parent__in' );
		if ( isset( $q['orderby'] ) &amp;&amp; in_array( $q['orderby'], $force_asc, true ) ) {
			$q['order'] = '';
		}

		// Order by.
		if ( empty( $q['orderby'] ) ) {
			/*
			 * Boolean false or empty array blanks out ORDER BY,
			 * while leaving the value unset or otherwise empty sets the default.
			 */
			if ( isset( $q['orderby'] ) &amp;&amp; ( is_array( $q['orderby'] ) || false === $q['orderby'] ) ) {
				$orderby = '';
			} else {
				$orderby = "{$wpdb-&gt;posts}.post_date " . $q['order'];
			}
		} elseif ( 'none' === $q['orderby'] ) {
			$orderby = '';
		} else {
			$orderby_array = array();
			if ( is_array( $q['orderby'] ) ) {
				foreach ( $q['orderby'] as $_orderby =&gt; $order ) {
					$orderby = addslashes_gpc( urldecode( $_orderby ) );
					$parsed  = $this-&gt;parse_orderby( $orderby );

					if ( ! $parsed ) {
						continue;
					}

					$orderby_array[] = $parsed . ' ' . $this-&gt;parse_order( $order );
				}
				$orderby = implode( ', ', $orderby_array );

			} else {
				$q['orderby'] = urldecode( $q['orderby'] );
				$q['orderby'] = addslashes_gpc( $q['orderby'] );

				foreach ( explode( ' ', $q['orderby'] ) as $i =&gt; $orderby ) {
					$parsed = $this-&gt;parse_orderby( $orderby );
					// Only allow certain values for safety.
					if ( ! $parsed ) {
						continue;
					}

					$orderby_array[] = $parsed;
				}
				$orderby = implode( ' ' . $q['order'] . ', ', $orderby_array );

				if ( empty( $orderby ) ) {
					$orderby = "{$wpdb-&gt;posts}.post_date " . $q['order'];
				} elseif ( ! empty( $q['order'] ) ) {
					$orderby .= " {$q['order']}";
				}
			}
		}

		// Order search results by relevance only when another "orderby" is not specified in the query.
		if ( ! empty( $q['s'] ) ) {
			$search_orderby = '';
			if ( ! empty( $q['search_orderby_title'] ) &amp;&amp; ( empty( $q['orderby'] ) &amp;&amp; ! $this-&gt;is_feed ) || ( isset( $q['orderby'] ) &amp;&amp; 'relevance' === $q['orderby'] ) ) {
				$search_orderby = $this-&gt;parse_search_order( $q );
			}

			if ( ! $q['suppress_filters'] ) {
				/**
				 * Filters the ORDER BY used when ordering search results.
				 *
				 * @since 3.7.0
				 *
				 * @param string   $search_orderby The ORDER BY clause.
				 * @param WP_Query $this           The current WP_Query instance.
				 */
				$search_orderby = apply_filters( 'posts_search_orderby', $search_orderby, $this );
			}

			if ( $search_orderby ) {
				$orderby = $orderby ? $search_orderby . ', ' . $orderby : $search_orderby;
			}
		}

		if ( is_array( $post_type ) &amp;&amp; count( $post_type ) &gt; 1 ) {
			$post_type_cap = 'multiple_post_type';
		} else {
			if ( is_array( $post_type ) ) {
				$post_type = reset( $post_type );
			}
			$post_type_object = get_post_type_object( $post_type );
			if ( empty( $post_type_object ) ) {
				$post_type_cap = $post_type;
			}
		}

		if ( isset( $q['post_password'] ) ) {
			$where .= $wpdb-&gt;prepare( " AND {$wpdb-&gt;posts}.post_password = %s", $q['post_password'] );
			if ( empty( $q['perm'] ) ) {
				$q['perm'] = 'readable';
			}
		} elseif ( isset( $q['has_password'] ) ) {
			$where .= sprintf( " AND {$wpdb-&gt;posts}.post_password %s ''", $q['has_password'] ? '!=' : '=' );
		}

		if ( ! empty( $q['comment_status'] ) ) {
			$where .= $wpdb-&gt;prepare( " AND {$wpdb-&gt;posts}.comment_status = %s ", $q['comment_status'] );
		}

		if ( ! empty( $q['ping_status'] ) ) {
			$where .= $wpdb-&gt;prepare( " AND {$wpdb-&gt;posts}.ping_status = %s ", $q['ping_status'] );
		}

		if ( 'any' === $post_type ) {
			$in_search_post_types = get_post_types( array( 'exclude_from_search' =&gt; false ) );
			if ( empty( $in_search_post_types ) ) {
				$where .= ' AND 1=0 ';
			} else {
				$where .= " AND {$wpdb-&gt;posts}.post_type IN ('" . join( "', '", array_map( 'esc_sql', $in_search_post_types ) ) . "')";
			}
		} elseif ( ! empty( $post_type ) &amp;&amp; is_array( $post_type ) ) {
			$where .= " AND {$wpdb-&gt;posts}.post_type IN ('" . join( "', '", esc_sql( $post_type ) ) . "')";
		} elseif ( ! empty( $post_type ) ) {
			$where           .= $wpdb-&gt;prepare( " AND {$wpdb-&gt;posts}.post_type = %s", $post_type );
			$post_type_object = get_post_type_object( $post_type );
		} elseif ( $this-&gt;is_attachment ) {
			$where           .= " AND {$wpdb-&gt;posts}.post_type = 'attachment'";
			$post_type_object = get_post_type_object( 'attachment' );
		} elseif ( $this-&gt;is_page ) {
			$where           .= " AND {$wpdb-&gt;posts}.post_type = 'page'";
			$post_type_object = get_post_type_object( 'page' );
		} else {
			$where           .= " AND {$wpdb-&gt;posts}.post_type = 'post'";
			$post_type_object = get_post_type_object( 'post' );
		}

		$edit_cap = 'edit_post';
		$read_cap = 'read_post';

		if ( ! empty( $post_type_object ) ) {
			$edit_others_cap  = $post_type_object-&gt;cap-&gt;edit_others_posts;
			$read_private_cap = $post_type_object-&gt;cap-&gt;read_private_posts;
		} else {
			$edit_others_cap  = 'edit_others_' . $post_type_cap . 's';
			$read_private_cap = 'read_private_' . $post_type_cap . 's';
		}

		$user_id = get_current_user_id();

		$q_status = array();
		if ( ! empty( $q['post_status'] ) ) {
			$statuswheres = array();
			$q_status     = $q['post_status'];
			if ( ! is_array( $q_status ) ) {
				$q_status = explode( ',', $q_status );
			}
			$r_status = array();
			$p_status = array();
			$e_status = array();
			if ( in_array( 'any', $q_status, true ) ) {
				foreach ( get_post_stati( array( 'exclude_from_search' =&gt; true ) ) as $status ) {
					if ( ! in_array( $status, $q_status, true ) ) {
						$e_status[] = "{$wpdb-&gt;posts}.post_status &lt;&gt; '$status'";
					}
				}
			} else {
				foreach ( get_post_stati() as $status ) {
					if ( in_array( $status, $q_status, true ) ) {
						if ( 'private' === $status ) {
							$p_status[] = "{$wpdb-&gt;posts}.post_status = '$status'";
						} else {
							$r_status[] = "{$wpdb-&gt;posts}.post_status = '$status'";
						}
					}
				}
			}

			if ( empty( $q['perm'] ) || 'readable' !== $q['perm'] ) {
				$r_status = array_merge( $r_status, $p_status );
				unset( $p_status );
			}

			if ( ! empty( $e_status ) ) {
				$statuswheres[] = '(' . join( ' AND ', $e_status ) . ')';
			}
			if ( ! empty( $r_status ) ) {
				if ( ! empty( $q['perm'] ) &amp;&amp; 'editable' === $q['perm'] &amp;&amp; ! current_user_can( $edit_others_cap ) ) {
					$statuswheres[] = "({$wpdb-&gt;posts}.post_author = $user_id " . 'AND (' . join( ' OR ', $r_status ) . '))';
				} else {
					$statuswheres[] = '(' . join( ' OR ', $r_status ) . ')';
				}
			}
			if ( ! empty( $p_status ) ) {
				if ( ! empty( $q['perm'] ) &amp;&amp; 'readable' === $q['perm'] &amp;&amp; ! current_user_can( $read_private_cap ) ) {
					$statuswheres[] = "({$wpdb-&gt;posts}.post_author = $user_id " . 'AND (' . join( ' OR ', $p_status ) . '))';
				} else {
					$statuswheres[] = '(' . join( ' OR ', $p_status ) . ')';
				}
			}
			if ( $post_status_join ) {
				$join .= " LEFT JOIN {$wpdb-&gt;posts} AS p2 ON ({$wpdb-&gt;posts}.post_parent = p2.ID) ";
				foreach ( $statuswheres as $index =&gt; $statuswhere ) {
					$statuswheres[ $index ] = "($statuswhere OR ({$wpdb-&gt;posts}.post_status = 'inherit' AND " . str_replace( $wpdb-&gt;posts, 'p2', $statuswhere ) . '))';
				}
			}
			$where_status = implode( ' OR ', $statuswheres );
			if ( ! empty( $where_status ) ) {
				$where .= " AND ($where_status)";
			}
		} elseif ( ! $this-&gt;is_singular ) {
			$where .= " AND ({$wpdb-&gt;posts}.post_status = 'publish'";

			// Add public states.
			$public_states = get_post_stati( array( 'public' =&gt; true ) );
			foreach ( (array) $public_states as $state ) {
				if ( 'publish' === $state ) { // Publish is hard-coded above.
					continue;
				}
				$where .= " OR {$wpdb-&gt;posts}.post_status = '$state'";
			}

			if ( $this-&gt;is_admin ) {
				// Add protected states that should show in the admin all list.
				$admin_all_states = get_post_stati(
					array(
						'protected'              =&gt; true,
						'show_in_admin_all_list' =&gt; true,
					)
				);
				foreach ( (array) $admin_all_states as $state ) {
					$where .= " OR {$wpdb-&gt;posts}.post_status = '$state'";
				}
			}

			if ( is_user_logged_in() ) {
				// Add private states that are limited to viewing by the author of a post or someone who has caps to read private states.
				$private_states = get_post_stati( array( 'private' =&gt; true ) );
				foreach ( (array) $private_states as $state ) {
					$where .= current_user_can( $read_private_cap ) ? " OR {$wpdb-&gt;posts}.post_status = '$state'" : " OR {$wpdb-&gt;posts}.post_author = $user_id AND {$wpdb-&gt;posts}.post_status = '$state'";
				}
			}

			$where .= ')';
		}

		/*
		 * Apply filters on where and join prior to paging so that any
		 * manipulations to them are reflected in the paging by day queries.
		 */
		if ( ! $q['suppress_filters'] ) {
			/**
			 * Filters the WHERE clause of the query.
			 *
			 * @since 1.5.0
			 *
			 * @param string   $where The WHERE clause of the query.
			 * @param WP_Query $this The WP_Query instance (passed by reference).
			 */
			$where = apply_filters_ref_array( 'posts_where', array( $where, &amp;$this ) );

			/**
			 * Filters the JOIN clause of the query.
			 *
			 * @since 1.5.0
			 *
			 * @param string   $join  The JOIN clause of the query.
			 * @param WP_Query $this The WP_Query instance (passed by reference).
			 */
			$join = apply_filters_ref_array( 'posts_join', array( $join, &amp;$this ) );
		}

		// Paging.
		if ( empty( $q['nopaging'] ) &amp;&amp; ! $this-&gt;is_singular ) {
			$page = absint( $q['paged'] );
			if ( ! $page ) {
				$page = 1;
			}

			// If 'offset' is provided, it takes precedence over 'paged'.
			if ( isset( $q['offset'] ) &amp;&amp; is_numeric( $q['offset'] ) ) {
				$q['offset'] = absint( $q['offset'] );
				$pgstrt      = $q['offset'] . ', ';
			} else {
				$pgstrt = absint( ( $page - 1 ) * $q['posts_per_page'] ) . ', ';
			}
			$limits = 'LIMIT ' . $pgstrt . $q['posts_per_page'];
		}

		// Comments feeds.
		if ( $this-&gt;is_comment_feed &amp;&amp; ! $this-&gt;is_singular ) {
			if ( $this-&gt;is_archive || $this-&gt;is_search ) {
				$cjoin    = "JOIN {$wpdb-&gt;posts} ON ({$wpdb-&gt;comments}.comment_post_ID = {$wpdb-&gt;posts}.ID) $join ";
				$cwhere   = "WHERE comment_approved = '1' $where";
				$cgroupby = "{$wpdb-&gt;comments}.comment_id";
			} else { // Other non-singular, e.g. front.
				$cjoin    = "JOIN {$wpdb-&gt;posts} ON ( {$wpdb-&gt;comments}.comment_post_ID = {$wpdb-&gt;posts}.ID )";
				$cwhere   = "WHERE ( post_status = 'publish' OR ( post_status = 'inherit' AND post_type = 'attachment' ) ) AND comment_approved = '1'";
				$cgroupby = '';
			}

			if ( ! $q['suppress_filters'] ) {
				/**
				 * Filters the JOIN clause of the comments feed query before sending.
				 *
				 * @since 2.2.0
				 *
				 * @param string   $cjoin The JOIN clause of the query.
				 * @param WP_Query $this The WP_Query instance (passed by reference).
				 */
				$cjoin = apply_filters_ref_array( 'comment_feed_join', array( $cjoin, &amp;$this ) );

				/**
				 * Filters the WHERE clause of the comments feed query before sending.
				 *
				 * @since 2.2.0
				 *
				 * @param string   $cwhere The WHERE clause of the query.
				 * @param WP_Query $this   The WP_Query instance (passed by reference).
				 */
				$cwhere = apply_filters_ref_array( 'comment_feed_where', array( $cwhere, &amp;$this ) );

				/**
				 * Filters the GROUP BY clause of the comments feed query before sending.
				 *
				 * @since 2.2.0
				 *
				 * @param string   $cgroupby The GROUP BY clause of the query.
				 * @param WP_Query $this     The WP_Query instance (passed by reference).
				 */
				$cgroupby = apply_filters_ref_array( 'comment_feed_groupby', array( $cgroupby, &amp;$this ) );

				/**
				 * Filters the ORDER BY clause of the comments feed query before sending.
				 *
				 * @since 2.8.0
				 *
				 * @param string   $corderby The ORDER BY clause of the query.
				 * @param WP_Query $this     The WP_Query instance (passed by reference).
				 */
				$corderby = apply_filters_ref_array( 'comment_feed_orderby', array( 'comment_date_gmt DESC', &amp;$this ) );

				/**
				 * Filters the LIMIT clause of the comments feed query before sending.
				 *
				 * @since 2.8.0
				 *
				 * @param string   $climits The JOIN clause of the query.
				 * @param WP_Query $this    The WP_Query instance (passed by reference).
				 */
				$climits = apply_filters_ref_array( 'comment_feed_limits', array( 'LIMIT ' . get_option( 'posts_per_rss' ), &amp;$this ) );
			}

			$cgroupby = ( ! empty( $cgroupby ) ) ? 'GROUP BY ' . $cgroupby : '';
			$corderby = ( ! empty( $corderby ) ) ? 'ORDER BY ' . $corderby : '';
			$climits  = ( ! empty( $climits ) ) ? $climits : '';

			$comments = (array) $wpdb-&gt;get_results( "SELECT $distinct {$wpdb-&gt;comments}.* FROM {$wpdb-&gt;comments} $cjoin $cwhere $cgroupby $corderby $climits" );
			// Convert to WP_Comment.
			$this-&gt;comments      = array_map( 'get_comment', $comments );
			$this-&gt;comment_count = count( $this-&gt;comments );

			$post_ids = array();

			foreach ( $this-&gt;comments as $comment ) {
				$post_ids[] = (int) $comment-&gt;comment_post_ID;
			}

			$post_ids = join( ',', $post_ids );
			$join     = '';
			if ( $post_ids ) {
				$where = "AND {$wpdb-&gt;posts}.ID IN ($post_ids) ";
			} else {
				$where = 'AND 0';
			}
		}

		$pieces = array( 'where', 'groupby', 'join', 'orderby', 'distinct', 'fields', 'limits' );

		/*
		 * Apply post-paging filters on where and join. Only plugins that
		 * manipulate paging queries should use these hooks.
		 */
		if ( ! $q['suppress_filters'] ) {
			/**
			 * Filters the WHERE clause of the query.
			 *
			 * Specifically for manipulating paging queries.
			 *
			 * @since 1.5.0
			 *
			 * @param string   $where The WHERE clause of the query.
			 * @param WP_Query $this The WP_Query instance (passed by reference).
			 */
			$where = apply_filters_ref_array( 'posts_where_paged', array( $where, &amp;$this ) );

			/**
			 * Filters the GROUP BY clause of the query.
			 *
			 * @since 2.0.0
			 *
			 * @param string   $groupby The GROUP BY clause of the query.
			 * @param WP_Query $this    The WP_Query instance (passed by reference).
			 */
			$groupby = apply_filters_ref_array( 'posts_groupby', array( $groupby, &amp;$this ) );

			/**
			 * Filters the JOIN clause of the query.
			 *
			 * Specifically for manipulating paging queries.
			 *
			 * @since 1.5.0
			 *
			 * @param string   $join  The JOIN clause of the query.
			 * @param WP_Query $this The WP_Query instance (passed by reference).
			 */
			$join = apply_filters_ref_array( 'posts_join_paged', array( $join, &amp;$this ) );

			/**
			 * Filters the ORDER BY clause of the query.
			 *
			 * @since 1.5.1
			 *
			 * @param string   $orderby The ORDER BY clause of the query.
			 * @param WP_Query $this    The WP_Query instance (passed by reference).
			 */
			$orderby = apply_filters_ref_array( 'posts_orderby', array( $orderby, &amp;$this ) );

			/**
			 * Filters the DISTINCT clause of the query.
			 *
			 * @since 2.1.0
			 *
			 * @param string   $distinct The DISTINCT clause of the query.
			 * @param WP_Query $this     The WP_Query instance (passed by reference).
			 */
			$distinct = apply_filters_ref_array( 'posts_distinct', array( $distinct, &amp;$this ) );

			/**
			 * Filters the LIMIT clause of the query.
			 *
			 * @since 2.1.0
			 *
			 * @param string   $limits The LIMIT clause of the query.
			 * @param WP_Query $this   The WP_Query instance (passed by reference).
			 */
			$limits = apply_filters_ref_array( 'post_limits', array( $limits, &amp;$this ) );

			/**
			 * Filters the SELECT clause of the query.
			 *
			 * @since 2.1.0
			 *
			 * @param string   $fields The SELECT clause of the query.
			 * @param WP_Query $this   The WP_Query instance (passed by reference).
			 */
			$fields = apply_filters_ref_array( 'posts_fields', array( $fields, &amp;$this ) );

			/**
			 * Filters all query clauses at once, for convenience.
			 *
			 * Covers the WHERE, GROUP BY, JOIN, ORDER BY, DISTINCT,
			 * fields (SELECT), and LIMITS clauses.
			 *
			 * @since 3.1.0
			 *
			 * @param string[] $clauses Associative array of the clauses for the query.
			 * @param WP_Query $this    The WP_Query instance (passed by reference).
			 */
			$clauses = (array) apply_filters_ref_array( 'posts_clauses', array( compact( $pieces ), &amp;$this ) );

			$where    = isset( $clauses['where'] ) ? $clauses['where'] : '';
			$groupby  = isset( $clauses['groupby'] ) ? $clauses['groupby'] : '';
			$join     = isset( $clauses['join'] ) ? $clauses['join'] : '';
			$orderby  = isset( $clauses['orderby'] ) ? $clauses['orderby'] : '';
			$distinct = isset( $clauses['distinct'] ) ? $clauses['distinct'] : '';
			$fields   = isset( $clauses['fields'] ) ? $clauses['fields'] : '';
			$limits   = isset( $clauses['limits'] ) ? $clauses['limits'] : '';
		}

		/**
		 * Fires to announce the query's current selection parameters.
		 *
		 * For use by caching plugins.
		 *
		 * @since 2.3.0
		 *
		 * @param string $selection The assembled selection query.
		 */
		do_action( 'posts_selection', $where . $groupby . $orderby . $limits . $join );

		/*
		 * Filters again for the benefit of caching plugins.
		 * Regular plugins should use the hooks above.
		 */
		if ( ! $q['suppress_filters'] ) {
			/**
			 * Filters the WHERE clause of the query.
			 *
			 * For use by caching plugins.
			 *
			 * @since 2.5.0
			 *
			 * @param string   $where The WHERE clause of the query.
			 * @param WP_Query $this The WP_Query instance (passed by reference).
			 */
			$where = apply_filters_ref_array( 'posts_where_request', array( $where, &amp;$this ) );

			/**
			 * Filters the GROUP BY clause of the query.
			 *
			 * For use by caching plugins.
			 *
			 * @since 2.5.0
			 *
			 * @param string   $groupby The GROUP BY clause of the query.
			 * @param WP_Query $this    The WP_Query instance (passed by reference).
			 */
			$groupby = apply_filters_ref_array( 'posts_groupby_request', array( $groupby, &amp;$this ) );

			/**
			 * Filters the JOIN clause of the query.
			 *
			 * For use by caching plugins.
			 *
			 * @since 2.5.0
			 *
			 * @param string   $join  The JOIN clause of the query.
			 * @param WP_Query $this The WP_Query instance (passed by reference).
			 */
			$join = apply_filters_ref_array( 'posts_join_request', array( $join, &amp;$this ) );

			/**
			 * Filters the ORDER BY clause of the query.
			 *
			 * For use by caching plugins.
			 *
			 * @since 2.5.0
			 *
			 * @param string   $orderby The ORDER BY clause of the query.
			 * @param WP_Query $this    The WP_Query instance (passed by reference).
			 */
			$orderby = apply_filters_ref_array( 'posts_orderby_request', array( $orderby, &amp;$this ) );

			/**
			 * Filters the DISTINCT clause of the query.
			 *
			 * For use by caching plugins.
			 *
			 * @since 2.5.0
			 *
			 * @param string   $distinct The DISTINCT clause of the query.
			 * @param WP_Query $this     The WP_Query instance (passed by reference).
			 */
			$distinct = apply_filters_ref_array( 'posts_distinct_request', array( $distinct, &amp;$this ) );

			/**
			 * Filters the SELECT clause of the query.
			 *
			 * For use by caching plugins.
			 *
			 * @since 2.5.0
			 *
			 * @param string   $fields The SELECT clause of the query.
			 * @param WP_Query $this   The WP_Query instance (passed by reference).
			 */
			$fields = apply_filters_ref_array( 'posts_fields_request', array( $fields, &amp;$this ) );

			/**
			 * Filters the LIMIT clause of the query.
			 *
			 * For use by caching plugins.
			 *
			 * @since 2.5.0
			 *
			 * @param string   $limits The LIMIT clause of the query.
			 * @param WP_Query $this   The WP_Query instance (passed by reference).
			 */
			$limits = apply_filters_ref_array( 'post_limits_request', array( $limits, &amp;$this ) );

			/**
			 * Filters all query clauses at once, for convenience.
			 *
			 * For use by caching plugins.
			 *
			 * Covers the WHERE, GROUP BY, JOIN, ORDER BY, DISTINCT,
			 * fields (SELECT), and LIMITS clauses.
			 *
			 * @since 3.1.0
			 *
			 * @param string[] $pieces Associative array of the pieces of the query.
			 * @param WP_Query $this   The WP_Query instance (passed by reference).
			 */
			$clauses = (array) apply_filters_ref_array( 'posts_clauses_request', array( compact( $pieces ), &amp;$this ) );

			$where    = isset( $clauses['where'] ) ? $clauses['where'] : '';
			$groupby  = isset( $clauses['groupby'] ) ? $clauses['groupby'] : '';
			$join     = isset( $clauses['join'] ) ? $clauses['join'] : '';
			$orderby  = isset( $clauses['orderby'] ) ? $clauses['orderby'] : '';
			$distinct = isset( $clauses['distinct'] ) ? $clauses['distinct'] : '';
			$fields   = isset( $clauses['fields'] ) ? $clauses['fields'] : '';
			$limits   = isset( $clauses['limits'] ) ? $clauses['limits'] : '';
		}

		if ( ! empty( $groupby ) ) {
			$groupby = 'GROUP BY ' . $groupby;
		}
		if ( ! empty( $orderby ) ) {
			$orderby = 'ORDER BY ' . $orderby;
		}

		$found_rows = '';
		if ( ! $q['no_found_rows'] &amp;&amp; ! empty( $limits ) ) {
			$found_rows = 'SQL_CALC_FOUND_ROWS';
		}

		$old_request   = "SELECT $found_rows $distinct $fields FROM {$wpdb-&gt;posts} $join WHERE 1=1 $where $groupby $orderby $limits";
		$this-&gt;request = $old_request;

		if ( ! $q['suppress_filters'] ) {
			/**
			 * Filters the completed SQL query before sending.
			 *
			 * @since 2.0.0
			 *
			 * @param string   $request The complete SQL query.
			 * @param WP_Query $this    The WP_Query instance (passed by reference).
			 */
			$this-&gt;request = apply_filters_ref_array( 'posts_request', array( $this-&gt;request, &amp;$this ) );
		}

		/**
		 * Filters the posts array before the query takes place.
		 *
		 * Return a non-null value to bypass WordPress's default post queries.
		 *
		 * Filtering functions that require pagination information are encouraged to set
		 * the `found_posts` and `max_num_pages` properties of the WP_Query object,
		 * passed to the filter by reference. If WP_Query does not perform a database
		 * query, it will not have enough information to generate these values itself.
		 *
		 * @since 4.6.0
		 *
		 * @param array|null $posts Return an array of post data to short-circuit WP's query,
		 *                          or null to allow WP to run its normal queries.
		 * @param WP_Query   $this  The WP_Query instance (passed by reference).
		 */
		$this-&gt;posts = apply_filters_ref_array( 'posts_pre_query', array( null, &amp;$this ) );

		if ( 'ids' === $q['fields'] ) {
			if ( null === $this-&gt;posts ) {
				$this-&gt;posts = $wpdb-&gt;get_col( $this-&gt;request );
			}

			$this-&gt;posts      = array_map( 'intval', $this-&gt;posts );
			$this-&gt;post_count = count( $this-&gt;posts );
			$this-&gt;set_found_posts( $q, $limits );

			return $this-&gt;posts;
		}

		if ( 'id=&gt;parent' === $q['fields'] ) {
			if ( null === $this-&gt;posts ) {
				$this-&gt;posts = $wpdb-&gt;get_results( $this-&gt;request );
			}

			$this-&gt;post_count = count( $this-&gt;posts );
			$this-&gt;set_found_posts( $q, $limits );

			$r = array();
			foreach ( $this-&gt;posts as $key =&gt; $post ) {
				$this-&gt;posts[ $key ]-&gt;ID          = (int) $post-&gt;ID;
				$this-&gt;posts[ $key ]-&gt;post_parent = (int) $post-&gt;post_parent;

				$r[ (int) $post-&gt;ID ] = (int) $post-&gt;post_parent;
			}

			return $r;
		}

		if ( null === $this-&gt;posts ) {
			$split_the_query = ( $old_request == $this-&gt;request &amp;&amp; "{$wpdb-&gt;posts}.*" === $fields &amp;&amp; ! empty( $limits ) &amp;&amp; $q['posts_per_page'] &lt; 500 );

			/**
			 * Filters whether to split the query.
			 *
			 * Splitting the query will cause it to fetch just the IDs of the found posts
			 * (and then individually fetch each post by ID), rather than fetching every
			 * complete row at once. One massive result vs. many small results.
			 *
			 * @since 3.4.0
			 *
			 * @param bool     $split_the_query Whether or not to split the query.
			 * @param WP_Query $this            The WP_Query instance.
			 */
			$split_the_query = apply_filters( 'split_the_query', $split_the_query, $this );

			if ( $split_the_query ) {
				// First get the IDs and then fill in the objects.

				$this-&gt;request = "SELECT $found_rows $distinct {$wpdb-&gt;posts}.ID FROM {$wpdb-&gt;posts} $join WHERE 1=1 $where $groupby $orderby $limits";

				/**
				 * Filters the Post IDs SQL request before sending.
				 *
				 * @since 3.4.0
				 *
				 * @param string   $request The post ID request.
				 * @param WP_Query $this    The WP_Query instance.
				 */
				$this-&gt;request = apply_filters( 'posts_request_ids', $this-&gt;request, $this );

				$ids = $wpdb-&gt;get_col( $this-&gt;request );

				if ( $ids ) {
					$this-&gt;posts = $ids;
					$this-&gt;set_found_posts( $q, $limits );
					_prime_post_caches( $ids, $q['update_post_term_cache'], $q['update_post_meta_cache'] );
				} else {
					$this-&gt;posts = array();
				}
			} else {
				$this-&gt;posts = $wpdb-&gt;get_results( $this-&gt;request );
				$this-&gt;set_found_posts( $q, $limits );
			}
		}

		// Convert to WP_Post objects.
		if ( $this-&gt;posts ) {
			$this-&gt;posts = array_map( 'get_post', $this-&gt;posts );
		}

		if ( ! $q['suppress_filters'] ) {
			/**
			 * Filters the raw post results array, prior to status checks.
			 *
			 * @since 2.3.0
			 *
			 * @param WP_Post[] $posts Array of post objects.
			 * @param WP_Query  $this  The WP_Query instance (passed by reference).
			 */
			$this-&gt;posts = apply_filters_ref_array( 'posts_results', array( $this-&gt;posts, &amp;$this ) );
		}

		if ( ! empty( $this-&gt;posts ) &amp;&amp; $this-&gt;is_comment_feed &amp;&amp; $this-&gt;is_singular ) {
			/** This filter is documented in wp-includes/query.php */
			$cjoin = apply_filters_ref_array( 'comment_feed_join', array( '', &amp;$this ) );

			/** This filter is documented in wp-includes/query.php */
			$cwhere = apply_filters_ref_array( 'comment_feed_where', array( "WHERE comment_post_ID = '{$this-&gt;posts[0]-&gt;ID}' AND comment_approved = '1'", &amp;$this ) );

			/** This filter is documented in wp-includes/query.php */
			$cgroupby = apply_filters_ref_array( 'comment_feed_groupby', array( '', &amp;$this ) );
			$cgroupby = ( ! empty( $cgroupby ) ) ? 'GROUP BY ' . $cgroupby : '';

			/** This filter is documented in wp-includes/query.php */
			$corderby = apply_filters_ref_array( 'comment_feed_orderby', array( 'comment_date_gmt DESC', &amp;$this ) );
			$corderby = ( ! empty( $corderby ) ) ? 'ORDER BY ' . $corderby : '';

			/** This filter is documented in wp-includes/query.php */
			$climits = apply_filters_ref_array( 'comment_feed_limits', array( 'LIMIT ' . get_option( 'posts_per_rss' ), &amp;$this ) );

			$comments_request = "SELECT {$wpdb-&gt;comments}.* FROM {$wpdb-&gt;comments} $cjoin $cwhere $cgroupby $corderby $climits";
			$comments         = $wpdb-&gt;get_results( $comments_request );
			// Convert to WP_Comment.
			$this-&gt;comments      = array_map( 'get_comment', $comments );
			$this-&gt;comment_count = count( $this-&gt;comments );
		}

		// Check post status to determine if post should be displayed.
		if ( ! empty( $this-&gt;posts ) &amp;&amp; ( $this-&gt;is_single || $this-&gt;is_page ) ) {
			$status = get_post_status( $this-&gt;posts[0] );

			if ( 'attachment' === $this-&gt;posts[0]-&gt;post_type &amp;&amp; 0 === (int) $this-&gt;posts[0]-&gt;post_parent ) {
				$this-&gt;is_page       = false;
				$this-&gt;is_single     = true;
				$this-&gt;is_attachment = true;
			}

			// If the post_status was specifically requested, let it pass through.
			if ( ! in_array( $status, $q_status, true ) ) {
				$post_status_obj = get_post_status_object( $status );

				if ( $post_status_obj &amp;&amp; ! $post_status_obj-&gt;public ) {
					if ( ! is_user_logged_in() ) {
						// User must be logged in to view unpublished posts.
						$this-&gt;posts = array();
					} else {
						if ( $post_status_obj-&gt;protected ) {
							// User must have edit permissions on the draft to preview.
							if ( ! current_user_can( $edit_cap, $this-&gt;posts[0]-&gt;ID ) ) {
								$this-&gt;posts = array();
							} else {
								$this-&gt;is_preview = true;
								if ( 'future' !== $status ) {
									$this-&gt;posts[0]-&gt;post_date = current_time( 'mysql' );
								}
							}
						} elseif ( $post_status_obj-&gt;private ) {
							if ( ! current_user_can( $read_cap, $this-&gt;posts[0]-&gt;ID ) ) {
								$this-&gt;posts = array();
							}
						} else {
							$this-&gt;posts = array();
						}
					}
				} elseif ( ! $post_status_obj ) {
					// Post status is not registered, assume it's not public.
					if ( ! current_user_can( $edit_cap, $this-&gt;posts[0]-&gt;ID ) ) {
						$this-&gt;posts = array();
					}
				}
			}

			if ( $this-&gt;is_preview &amp;&amp; $this-&gt;posts &amp;&amp; current_user_can( $edit_cap, $this-&gt;posts[0]-&gt;ID ) ) {
				/**
				 * Filters the single post for preview mode.
				 *
				 * @since 2.7.0
				 *
				 * @param WP_Post  $post_preview  The Post object.
				 * @param WP_Query $this          The WP_Query instance (passed by reference).
				 */
				$this-&gt;posts[0] = get_post( apply_filters_ref_array( 'the_preview', array( $this-&gt;posts[0], &amp;$this ) ) );
			}
		}

		// Put sticky posts at the top of the posts array.
		$sticky_posts = get_option( 'sticky_posts' );
		if ( $this-&gt;is_home &amp;&amp; $page &lt;= 1 &amp;&amp; is_array( $sticky_posts ) &amp;&amp; ! empty( $sticky_posts ) &amp;&amp; ! $q['ignore_sticky_posts'] ) {
			$num_posts     = count( $this-&gt;posts );
			$sticky_offset = 0;
			// Loop over posts and relocate stickies to the front.
			for ( $i = 0; $i &lt; $num_posts; $i++ ) {
				if ( in_array( $this-&gt;posts[ $i ]-&gt;ID, $sticky_posts, true ) ) {
					$sticky_post = $this-&gt;posts[ $i ];
					// Remove sticky from current position.
					array_splice( $this-&gt;posts, $i, 1 );
					// Move to front, after other stickies.
					array_splice( $this-&gt;posts, $sticky_offset, 0, array( $sticky_post ) );
					// Increment the sticky offset. The next sticky will be placed at this offset.
					$sticky_offset++;
					// Remove post from sticky posts array.
					$offset = array_search( $sticky_post-&gt;ID, $sticky_posts, true );
					unset( $sticky_posts[ $offset ] );
				}
			}

			// If any posts have been excluded specifically, Ignore those that are sticky.
			if ( ! empty( $sticky_posts ) &amp;&amp; ! empty( $q['post__not_in'] ) ) {
				$sticky_posts = array_diff( $sticky_posts, $q['post__not_in'] );
			}

			// Fetch sticky posts that weren't in the query results.
			if ( ! empty( $sticky_posts ) ) {
				$stickies = get_posts(
					array(
						'post__in'    =&gt; $sticky_posts,
						'post_type'   =&gt; $post_type,
						'post_status' =&gt; 'publish',
						'nopaging'    =&gt; true,
					)
				);

				foreach ( $stickies as $sticky_post ) {
					array_splice( $this-&gt;posts, $sticky_offset, 0, array( $sticky_post ) );
					$sticky_offset++;
				}
			}
		}

		// If comments have been fetched as part of the query, make sure comment meta lazy-loading is set up.
		if ( ! empty( $this-&gt;comments ) ) {
			wp_queue_comments_for_comment_meta_lazyload( $this-&gt;comments );
		}

		if ( ! $q['suppress_filters'] ) {
			/**
			 * Filters the array of retrieved posts after they've been fetched and
			 * internally processed.
			 *
			 * @since 1.5.0
			 *
			 * @param WP_Post[] $posts Array of post objects.
			 * @param WP_Query  $this The WP_Query instance (passed by reference).
			 */
			$this-&gt;posts = apply_filters_ref_array( 'the_posts', array( $this-&gt;posts, &amp;$this ) );
		}

		// Ensure that any posts added/modified via one of the filters above are
		// of the type WP_Post and are filtered.
		if ( $this-&gt;posts ) {
			$this-&gt;post_count = count( $this-&gt;posts );

			$this-&gt;posts = array_map( 'get_post', $this-&gt;posts );

			if ( $q['cache_results'] ) {
				update_post_caches( $this-&gt;posts, $post_type, $q['update_post_term_cache'], $q['update_post_meta_cache'] );
			}

			$this-&gt;post = reset( $this-&gt;posts );
		} else {
			$this-&gt;post_count = 0;
			$this-&gt;posts      = array();
		}

		if ( $q['lazy_load_term_meta'] ) {
			wp_queue_posts_for_term_meta_lazyload( $this-&gt;posts );
		}

		return $this-&gt;posts;
	}</pre>  </section>  <section class="related"> <h2 class="toc-heading" id="related" tabindex="-1">Related </h2> <article class="uses"> <h3 class="toc-heading" id="uses" tabindex="-1">Uses </h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_pre_query">posts_pre_query</a> </td> <td class="related-desc"> <p>Filters the posts array before the query takes place.</p> </td> </tr> <tr> <td> <span>wp-includes/comment.php:</span> <a href="../../functions/wp_queue_comments_for_comment_meta_lazyload">wp_queue_comments_for_comment_meta_lazyload()</a> </td> <td class="related-desc"> <p>Queues comments for metadata lazy-loading.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/wp_queue_posts_for_term_meta_lazyload">wp_queue_posts_for_term_meta_lazyload()</a> </td> <td class="related-desc"> <p>Queues posts for lazy-loading of term meta.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="parse_order">WP_Query::parse_order()</a> </td> <td class="related-desc"> <p>Parse an order query variable and cast it to ASC or DESC as necessary.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="parse_orderby">WP_Query::parse_orderby()</a> </td> <td class="related-desc"> <p>Converts the given orderby alias (if allowed) to a properly-prefixed value.</p> </td> </tr> <tr> <td> <span>wp-includes/capabilities.php:</span> <a href="../../functions/current_user_can">current_user_can()</a> </td> <td class="related-desc"> <p>Returns whether the current user has the specified capability.</p> </td> </tr> <tr> <td> <span>wp-includes/l10n.php:</span> <a href="../../functions/__">__()</a> </td> <td class="related-desc"> <p>Retrieve the translation of $text.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="../../functions/wp_basename">wp_basename()</a> </td> <td class="related-desc"> <p>i18n friendly version of basename()</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="../../functions/esc_sql">esc_sql()</a> </td> <td class="related-desc"> <p>Escapes data for use in a MySQL query.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="../../functions/addslashes_gpc">addslashes_gpc()</a> </td> <td class="related-desc"> <p>Adds slashes to escape strings.</p> </td> </tr> <tr> <td> <span>wp-includes/formatting.php:</span> <a href="../../functions/sanitize_title_for_query">sanitize_title_for_query()</a> </td> <td class="related-desc"> <p>Sanitizes a title with the query context.</p> </td> </tr> <tr> <td> <span>wp-includes/pluggable.php:</span> <a href="../../functions/is_user_logged_in">is_user_logged_in()</a> </td> <td class="related-desc"> <p>Determines whether the current visitor is a logged in user.</p> </td> </tr> <tr> <td> <span>wp-includes/pluggable.php:</span> <a href="../../functions/get_user_by">get_user_by()</a> </td> <td class="related-desc"> <p>Retrieve user info by a given field</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="set_found_posts">WP_Query::set_found_posts()</a> </td> <td class="related-desc"> <p>Set up the amount of found posts and the number of pages (if limit clause was used) for the current query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_results">posts_results</a> </td> <td class="related-desc"> <p>Filters the raw post results array, prior to status checks.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/the_preview">the_preview</a> </td> <td class="related-desc"> <p>Filters the single post for preview mode.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/the_posts">the_posts</a> </td> <td class="related-desc"> <p>Filters the array of retrieved posts after theyve been fetched and internally processed.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_join_paged">posts_join_paged</a> </td> <td class="related-desc"> <p>Filters the JOIN clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_orderby">posts_orderby</a> </td> <td class="related-desc"> <p>Filters the ORDER BY clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_distinct">posts_distinct</a> </td> <td class="related-desc"> <p>Filters the DISTINCT clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/post_limits">post_limits</a> </td> <td class="related-desc"> <p>Filters the LIMIT clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_fields">posts_fields</a> </td> <td class="related-desc"> <p>Filters the SELECT clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_clauses">posts_clauses</a> </td> <td class="related-desc"> <p>Filters all query clauses at once, for convenience.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_selection">posts_selection</a> </td> <td class="related-desc"> <p>Fires to announce the querys current selection parameters.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_where_request">posts_where_request</a> </td> <td class="related-desc"> <p>Filters the WHERE clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_groupby_request">posts_groupby_request</a> </td> <td class="related-desc"> <p>Filters the GROUP BY clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_join_request">posts_join_request</a> </td> <td class="related-desc"> <p>Filters the JOIN clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_orderby_request">posts_orderby_request</a> </td> <td class="related-desc"> <p>Filters the ORDER BY clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_distinct_request">posts_distinct_request</a> </td> <td class="related-desc"> <p>Filters the DISTINCT clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_fields_request">posts_fields_request</a> </td> <td class="related-desc"> <p>Filters the SELECT clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/post_limits_request">post_limits_request</a> </td> <td class="related-desc"> <p>Filters the LIMIT clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_clauses_request">posts_clauses_request</a> </td> <td class="related-desc"> <p>Filters all query clauses at once, for convenience.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_request">posts_request</a> </td> <td class="related-desc"> <p>Filters the completed SQL query before sending.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/split_the_query">split_the_query</a> </td> <td class="related-desc"> <p>Filters whether to split the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_request_ids">posts_request_ids</a> </td> <td class="related-desc"> <p>Filters the Post IDs SQL request before sending.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="set">WP_Query::set()</a> </td> <td class="related-desc"> <p>Set query variable.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/pre_get_posts">pre_get_posts</a> </td> <td class="related-desc"> <p>Fires after the query variable object is created, but before the actual query is run.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_search">posts_search</a> </td> <td class="related-desc"> <p>Filters the search SQL that is used in the WHERE clause of <a href="../wp_query">WP_Query</a>.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_search_orderby">posts_search_orderby</a> </td> <td class="related-desc"> <p>Filters the ORDER BY used when ordering search results.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_where">posts_where</a> </td> <td class="related-desc"> <p>Filters the WHERE clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_join">posts_join</a> </td> <td class="related-desc"> <p>Filters the JOIN clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/comment_feed_join">comment_feed_join</a> </td> <td class="related-desc"> <p>Filters the JOIN clause of the comments feed query before sending.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/comment_feed_where">comment_feed_where</a> </td> <td class="related-desc"> <p>Filters the WHERE clause of the comments feed query before sending.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/comment_feed_groupby">comment_feed_groupby</a> </td> <td class="related-desc"> <p>Filters the GROUP BY clause of the comments feed query before sending.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/comment_feed_orderby">comment_feed_orderby</a> </td> <td class="related-desc"> <p>Filters the ORDER BY clause of the comments feed query before sending.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/comment_feed_limits">comment_feed_limits</a> </td> <td class="related-desc"> <p>Filters the LIMIT clause of the comments feed query before sending.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_where_paged">posts_where_paged</a> </td> <td class="related-desc"> <p>Filters the WHERE clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="../../hooks/posts_groupby">posts_groupby</a> </td> <td class="related-desc"> <p>Filters the GROUP BY clause of the query.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="parse_query">WP_Query::parse_query()</a> </td> <td class="related-desc"> <p>Parse a query string and set query type booleans.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="fill_query_vars">WP_Query::fill_query_vars()</a> </td> <td class="related-desc"> <p>Fills in the query variables, which do not exist within the parameter.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="parse_search">WP_Query::parse_search()</a> </td> <td class="related-desc"> <p>Generates SQL for the WHERE clause based on passed search terms.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="parse_tax_query">WP_Query::parse_tax_query()</a> </td> <td class="related-desc"> <p>Parses various taxonomy related query vars.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="parse_search_order">WP_Query::parse_search_order()</a> </td> <td class="related-desc"> <p>Generates SQL for the ORDER BY condition based on passed search terms.</p> </td> </tr> <tr> <td> <span>wp-includes/load.php:</span> <a href="../../functions/wp_using_ext_object_cache">wp_using_ext_object_cache()</a> </td> <td class="related-desc"> <p>Toggle <code>$_wp_using_ext_object_cache</code> on and off without directly touching global.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="../../functions/_deprecated_argument">_deprecated_argument()</a> </td> <td class="related-desc"> <p>Mark a function argument as deprecated and inform when it has been used.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="../../functions/absint">absint()</a> </td> <td class="related-desc"> <p>Convert a value to non-negative integer.</p> </td> </tr> <tr> <td> <span>wp-includes/functions.php:</span> <a href="../../functions/current_time">current_time()</a> </td> <td class="related-desc"> <p>Retrieves the current time based on specified type.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="../../functions/get_term_by">get_term_by()</a> </td> <td class="related-desc"> <p>Get all Term data from database by Term field and data.</p> </td> </tr> <tr> <td> <span>wp-includes/taxonomy.php:</span> <a href="../../functions/get_object_taxonomies">get_object_taxonomies()</a> </td> <td class="related-desc"> <p>Return the names or objects of the taxonomies which are registered for the requested object or object type, such as a post object or post type name.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-date-query.php:</span> <a href="../wp_date_query/__construct">WP_Date_Query::__construct()</a> </td> <td class="related-desc"> <p>Constructor.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="../../functions/do_action_ref_array">do_action_ref_array()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to an action hook, specifying arguments in an array.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="../../functions/apply_filters_ref_array">apply_filters_ref_array()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook, specifying arguments in an array.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="../../functions/apply_filters">apply_filters()</a> </td> <td class="related-desc"> <p>Calls the callback functions that have been added to a filter hook.</p> </td> </tr> <tr> <td> <span>wp-includes/plugin.php:</span> <a href="../../functions/do_action">do_action()</a> </td> <td class="related-desc"> <p>Execute functions hooked on a specific action hook.</p> </td> </tr> <tr> <td> <span>wp-includes/option.php:</span> <a href="../../functions/get_option">get_option()</a> </td> <td class="related-desc"> <p>Retrieves an option value based on an option name.</p> </td> </tr> <tr> <td> <span>wp-includes/user.php:</span> <a href="../../functions/get_current_user_id">get_current_user_id()</a> </td> <td class="related-desc"> <p>Get the current users ID</p> </td> </tr> <tr> <td> <span>wp-includes/media.php:</span> <a href="../../functions/get_taxonomies_for_attachments">get_taxonomies_for_attachments()</a> </td> <td class="related-desc"> <p>Retrieves all of the taxonomies that are registered for attachments.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/_prime_post_caches">_prime_post_caches()</a> </td> <td class="related-desc"> <p>Adds any posts from the given IDs to the cache that do not already exist in cache</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/update_post_caches">update_post_caches()</a> </td> <td class="related-desc"> <p>Call major cache updating functions for list of Post objects.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/get_page_by_path">get_page_by_path()</a> </td> <td class="related-desc"> <p>Retrieves a page given its path.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/wp_post_mime_type_where">wp_post_mime_type_where()</a> </td> <td class="related-desc"> <p>Convert MIME types into SQL.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/get_posts">get_posts()</a> </td> <td class="related-desc"> <p>Retrieves an array of the latest posts, or posts matching the given criteria.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/get_post_type_object">get_post_type_object()</a> </td> <td class="related-desc"> <p>Retrieves a post type object by name.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/get_post">get_post()</a> </td> <td class="related-desc"> <p>Retrieves post data given a post ID or post object.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/get_post_types">get_post_types()</a> </td> <td class="related-desc"> <p>Get a list of all registered post type objects.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/get_post_stati">get_post_stati()</a> </td> <td class="related-desc"> <p>Get a list of post statuses.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/get_post_status">get_post_status()</a> </td> <td class="related-desc"> <p>Retrieve the post status based on the post ID.</p> </td> </tr> <tr> <td> <span>wp-includes/post.php:</span> <a href="../../functions/get_post_status_object">get_post_status_object()</a> </td> <td class="related-desc"> <p>Retrieve a post status object by name.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../wpdb/get_results">wpdb::get_results()</a> </td> <td class="related-desc"> <p>Retrieves an entire SQL result set from the database (i.e., many rows).</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../wpdb/get_col">wpdb::get_col()</a> </td> <td class="related-desc"> <p>Retrieves one column from the database.</p> </td> </tr> <tr> <td> <span>wp-includes/wp-db.php:</span> <a href="../wpdb/prepare">wpdb::prepare()</a> </td> <td class="related-desc"> <p>Prepares a SQL query for safe execution.</p> </td> </tr> <tr> <td> <span>wp-includes/class-wp-meta-query.php:</span> <a href="../wp_meta_query/__construct">WP_Meta_Query::__construct()</a> </td> <td class="related-desc"> <p>Constructor.</p> </td> </tr> </tbody>

</table>   </article>  <article class="used-by"> <h3 class="toc-heading" id="used-by" tabindex="-1">Used By </h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/class-wp-query.php:</span> <a href="query">WP_Query::query()</a> </td> <td class="related-desc"> <p>Sets up the WordPress query by parsing query string.</p> </td> </tr> </tbody>

</table> </article> </section>  <section class="changelog"> <h2 class="toc-heading" id="changelog" tabindex="-1">Changelog </h2> <table>  <thead> <tr> <th class="changelog-version">Version</th> <th class="changelog-desc">Description</th> </tr> </thead> <tbody> <tr> <td><a href="https://developer.wordpress.org/reference/since/1.5.0/" alt="WordPress 1.5.0">1.5.0</a></td> <td>Introduced.</td> </tr> </tbody> </table> </section>   </div>
<div class="_attribution">
  <p class="_attribution-p">
     20032019 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/wp_query/get_posts" class="_attribution-link">https://developer.wordpress.org/reference/classes/wp_query/get_posts</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
