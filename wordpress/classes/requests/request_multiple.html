
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Requests&#58;&#58;request_multiple() - WordPress - W3cubDocs</title>
  
  <meta name="description" content=" Send multiple HTTP requests simultaneously ">
  <meta name="keywords" content="requests, request, multiple, array, &#36;requests, &#36;options, wordpress">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/wordpress/classes/requests/request_multiple.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/wordpress.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/wordpress/" class="_nav-link" title="" style="margin-left:0;">WordPress</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _wordpress">
				
				
<h1>Requests::request_multiple( array $requests, array $options = array() )</h1>  <section class="summary"> <p>Send multiple HTTP requests simultaneously</p> </section> <div class="content-toc">  <section class="description"> <h2 class="toc-heading" id="description" tabindex="-1">Description </h2> <p>The <code>$requests</code> parameter takes an associative or indexed array of request fields. The key of each request can be used to match up the request with the returned data, or with the request passed into your <code>multiple.request.complete</code> callback.</p> <p>The request fields value is an associative array with the following keys:</p> <ul> <li>
<code>url</code>: Request URL Same as the <code>$url</code> parameter to <a href="../requests/request">Requests::request</a> (string, required)</li> <li>
<code>headers</code>: Associative array of header fields. Same as the <code>$headers</code> parameter to <a href="../requests/request">Requests::request</a> (array, default: <code>array()</code>)</li> <li>
<code>data</code>: Associative array of data fields or a string. Same as the <code>$data</code> parameter to <a href="../requests/request">Requests::request</a> (array|string, default: <code>array()</code>)</li> <li>
<code>type</code>: HTTP request type (use Requests constants). Same as the <code>$type</code> parameter to <a href="../requests/request">Requests::request</a> (string, default: <code>Requests::GET</code>)</li> <li>
<code>cookies</code>: Associative array of cookie name to value, or cookie jar. (array|<a href="../requests_cookie_jar">Requests_Cookie_Jar</a>)</li> </ul> <p>If the <code>$options</code> parameter is specified, individual requests will inherit options from it. This can be used to use a single hooking system, or set all the types to <code>Requests::POST</code>, for example.</p> <p>In addition, the <code>$options</code> parameter takes the following global options:</p> <ul> <li>
<code>complete</code>: A callback for when a request is complete. Takes two parameters, a <a href="../requests_response">Requests_Response</a>/Requests_Exception reference, and the ID from the request array (Note: this can also be overridden on a per-request basis, although that’s a little silly) (callback)</li> </ul> </section>  <section class="parameters"> <h2 class="toc-heading" id="parameters" tabindex="-1">Parameters </h2> <dl> <dt>$requests</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Required)</span> <span class="description">Requests data (see description for more information)</span> </p> </dd> <dt>$options</dt> <dd> <p class="desc"> <span class="type">(<span class="array">array</span>)</span> <span class="required">(Optional)</span> <span class="description">Global and default options (see <a href="../requests/request">Requests::request</a>)</span> </p> <p class="default">Default value: array()</p> </dd> </dl> </section>  <section class="return"> <h2 class="toc-heading" id="return" tabindex="-1">Return </h2> <p><span class="return-type">(array)</span> Responses (either <a href="../requests_response">Requests_Response</a> or a <a href="../requests_exception">Requests_Exception</a> object)</p> </section>  <section class="source-content"> <h2 class="toc-heading" id="source" tabindex="-1">Source </h2> <p> File: <a href="https://developer.wordpress.org/reference/files/wp-includes/class-requests.php/">wp-includes/class-requests.php</a> </p> <pre class="source-code-container" data-language="php">public static function request_multiple($requests, $options = array()) {
		$options = array_merge(self::get_default_options(true), $options);

		if (!empty($options['hooks'])) {
			$options['hooks']-&gt;register('transport.internal.parse_response', array('Requests', 'parse_multiple'));
			if (!empty($options['complete'])) {
				$options['hooks']-&gt;register('multiple.request.complete', $options['complete']);
			}
		}

		foreach ($requests as $id =&gt; &amp;$request) {
			if (!isset($request['headers'])) {
				$request['headers'] = array();
			}
			if (!isset($request['data'])) {
				$request['data'] = array();
			}
			if (!isset($request['type'])) {
				$request['type'] = self::GET;
			}
			if (!isset($request['options'])) {
				$request['options'] = $options;
				$request['options']['type'] = $request['type'];
			}
			else {
				if (empty($request['options']['type'])) {
					$request['options']['type'] = $request['type'];
				}
				$request['options'] = array_merge($options, $request['options']);
			}

			self::set_defaults($request['url'], $request['headers'], $request['data'], $request['type'], $request['options']);

			// Ensure we only hook in once
			if ($request['options']['hooks'] !== $options['hooks']) {
				$request['options']['hooks']-&gt;register('transport.internal.parse_response', array('Requests', 'parse_multiple'));
				if (!empty($request['options']['complete'])) {
					$request['options']['hooks']-&gt;register('multiple.request.complete', $request['options']['complete']);
				}
			}
		}
		unset($request);

		if (!empty($options['transport'])) {
			$transport = $options['transport'];

			if (is_string($options['transport'])) {
				$transport = new $transport();
			}
		}
		else {
			$transport = self::get_transport();
		}
		$responses = $transport-&gt;request_multiple($requests, $options);

		foreach ($responses as $id =&gt; &amp;$response) {
			// If our hook got messed with somehow, ensure we end up with the
			// correct response
			if (is_string($response)) {
				$request = $requests[$id];
				self::parse_multiple($response, $request);
				$request['options']['hooks']-&gt;dispatch('multiple.request.complete', array(&amp;$response, $id));
			}
		}

		return $responses;
	}</pre>  </section>  <section class="related"> <h2 class="toc-heading" id="related" tabindex="-1">Related </h2> <article class="uses"> <h3 class="toc-heading" id="uses" tabindex="-1">Uses </h3> <table id="uses-table">  <thead> <tr> <th>Uses</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/class-requests.php:</span> <a href="set_defaults">Requests::set_defaults()</a> </td> <td class="related-desc"> <p>Set the default values</p> </td> </tr> <tr> <td> <span>wp-includes/class-requests.php:</span> <a href="parse_multiple">Requests::parse_multiple()</a> </td> <td class="related-desc"> <p>Callback for <code>transport.internal.parse_response</code></p> </td> </tr> <tr> <td> <span>wp-includes/class-requests.php:</span> <a href="get_default_options">Requests::get_default_options()</a> </td> <td class="related-desc"> <p>Get the default options</p> </td> </tr> <tr> <td> <span>wp-includes/class-requests.php:</span> <a href="get_transport">Requests::get_transport()</a> </td> <td class="related-desc"> <p>Get a working transport</p> </td> </tr> </tbody>

</table> </article> <article class="used-by"> <h3 class="toc-heading" id="used-by" tabindex="-1">Used By </h3> <table id="used-by-table">  <thead> <tr> <th>Used By</th> <th class="related-desc">Description</th> </tr> </thead> <tbody> <tr> <td> <span>wp-includes/Requests/Session.php:</span> <a href="../requests_session/request_multiple">Requests_Session::request_multiple()</a> </td> <td class="related-desc"> <p>Send multiple HTTP requests simultaneously</p> </td> </tr> </tbody>

</table> </article> </section>   </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2003–2019 WordPress Foundation<br>Licensed under the GNU GPLv2+ License.<br>
    <a href="https://developer.wordpress.org/reference/classes/requests/request_multiple" class="_attribution-link">https://developer.wordpress.org/reference/classes/requests/request_multiple</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
