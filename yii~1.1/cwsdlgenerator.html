
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CWsdlGenerator - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" soap&#58;operation style ">
  <meta name="keywords" content="cwsdlgenerator, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cwsdlgenerator.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/yii~1.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CWsdlGenerator</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.web.services">system.web.services</a></td> </tr> <tr> <th>Inheritance</th> <td>class CWsdlGenerator » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php">framework/web/services/CWsdlGenerator.php</a></td> </tr> </table> <div id="classDescription"> CWsdlGenerator generates the WSDL for a given service class. <br><br> The WSDL generation is based on the doc comments found in the service class file. In particular, it recognizes the '@soap' tag in the comment and extracts API method and type definitions. <br><br> In a service class, a remote invokable method must be a public method with a doc comment block containing the '@soap' tag. In the doc comment, the type and name of every input parameter and the type of the return value should be declared using the standard phpdoc format. <br><br> CWsdlGenerator recognizes the following primitive types (case-sensitive) in the parameter and return type declarations: <ul> <li>str/string: maps to xsd:string;</li> <li>int/integer: maps to xsd:int;</li> <li>float/double: maps to xsd:float;</li> <li>bool/boolean: maps to xsd:boolean;</li> <li>date: maps to xsd:date;</li> <li>time: maps to xsd:time;</li> <li>datetime: maps to xsd:dateTime;</li> <li>array: maps to xsd:string;</li> <li>object: maps to xsd:struct;</li> <li>mixed: maps to xsd:anyType.</li> </ul> <br><br> If a type is not a primitive type, it is considered as a class type, and CWsdlGenerator will look for its property declarations. Only public properties are considered, and they each must be associated with a doc comment block containg the '@soap' tag. The doc comment block should declare the type of the property. <br><br> CWsdlGenerator recognizes the array type with the following format: <pre>
typeName[]: maps to tns:typeNameArray
</pre> <br><br> The following is an example declaring a remote invokable method: <pre>
/ **
  * A foo method.
  * @param string name of something
  * @param string value of something
  * @return string[] some array
  * @soap
  * /
public function foo($name,$value) {...}
</pre> <br><br> And the following is an example declaring a class with remote accessible properties: <pre>
class Foo {
    / **
      * @var string name of foo {nillable=1, minOccurs=0, maxOccurs=2}
      * @soap
      * /
    public $name;
    / **
      * @var Member[] members of foo
      * @soap
      * /
    public $members;
}
</pre> In the above, the 'members' property is an array of 'Member' objects. Since 'Member' is not a primitive type, CWsdlGenerator will look further to find the definition of 'Member'. <br><br> Optionally, extra attributes (nillable, minOccurs, maxOccurs) can be defined for each property by enclosing definitions into curly brackets and separated by comma like so: <br><br> {[attribute1 = value1][, attribute2 = value2], ...} <br><br> where the attribute can be one of following: <ul> <li>nillable = [0|1|true|false]</li> <li>minOccurs = n; where n&gt;=0</li> <li>maxOccurs = n; where [n&gt;=0|unbounded]</li> </ul> <br><br> Additionally, each complex data type can have assigned a soap indicator flag declaring special usage for such a data type. A soap indicator must be declared in the doc comment block with the '@soap-indicator' tag. Following soap indicators are currently supported: <ul> <li>all - (default) allows any sorting order of child nodes</li> <li>sequence - all child nodes in WSDL XML file will be expected in predefined order</li> <li>choice - supplied can be either of the child elements</li> </ul> The Group indicators can be also injected via custom soap definitions as XML node into WSDL structure. <br><br> In the following example, class Foo will create a XML node &lt;xsd:Foo&gt;&lt;xsd:sequence&gt; ... &lt;/xsd:sequence&gt;&lt;/xsd:Foo&gt; with children attributes expected in pre-defined order. <pre>
/ *
  * @soap-indicator sequence
  * /
class Foo {
    ...
}
</pre> For more on soap indicators, see See <a href="http://www.w3schools.com/schema/schema_complex_indicators.asp">http://www.w3schools.com/schema/schema_complex_indicators.asp</a>. <br><br> Since the variability of WSDL definitions is virtually unlimited, a special doc comment tag '@soap-wsdl' can be used in order to inject any custom XML string into generated WSDL file. If such a block of the code is found in class's comment block, then it will be used instead of parsing and generating standard attributes within the class. This gives virtually unlimited flexibility in defining data structures of any complexity. Following is an example of defining custom piece of WSDL XML node: <pre>
/ *
  * @soap-wsdl &lt;xsd:sequence&gt;
  * @soap-wsdl 	&lt;xsd:element minOccurs="1" maxOccurs="1" nillable="false" name="name" type="xsd:string"/&gt;
  * @soap-wsdl 	&lt;xsd:choice minOccurs="1" maxOccurs="1" nillable="false"&gt;
  * @soap-wsdl 		&lt;xsd:element minOccurs="1" maxOccurs="1" nillable="false" name="age" type="xsd:integer"/&gt;
  * @soap-wsdl 		&lt;xsd:element minOccurs="1" maxOccurs="1" nillable="false" name="date_of_birth" type="xsd:date"/&gt;
  * @soap-wsdl 	&lt;/xsd:choice&gt;
  * @soap-wsdl &lt;/xsd:sequence&gt;
  * /
class User {
    / **
      * @var string User name {minOccurs=1, maxOccurs=1}
      * @soap
      * /
    public $name;
    / **
      * @var integer User age {nillable=0, minOccurs=1, maxOccurs=1}
      * @example 35
      * @soap
      * /
    public $age;
    / **
      * @var date User's birthday {nillable=0, minOccurs=1, maxOccurs=1}
      * @example 1980-05-27
      * @soap
      * /
    public $date_of_birth;
}
</pre> In the example above, WSDL generator would inject under XML node &lt;xsd:User&gt; the code block defined by @soap-wsdl lines. <br><br> By inserting into SOAP URL link the parameter "?makedoc", WSDL generator will output human-friendly overview of all complex data types rather than XML WSDL file. Each complex type is described in a separate HTML table and recognizes also the '@example' PHPDoc tag. See <a href="cwsdlgenerator#buildHtmlDocs">buildHtmlDocs()</a>.</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="bindingStyle"> <td><a href="cwsdlgenerator#bindingStyle-detail">bindingStyle</a></td> <td>array</td> <td>soap:operation style</td> <td>CWsdlGenerator</td> </tr> <tr id="bindingTransport"> <td><a href="cwsdlgenerator#bindingTransport-detail">bindingTransport</a></td> <td>string</td> <td>soap:operation transport</td> <td>CWsdlGenerator</td> </tr> <tr id="namespace"> <td><a href="cwsdlgenerator#namespace-detail">namespace</a></td> <td>string</td> <td>the namespace to be used in the generated WSDL.</td> <td>CWsdlGenerator</td> </tr> <tr id="operationBodyStyle"> <td><a href="cwsdlgenerator#operationBodyStyle-detail">operationBodyStyle</a></td> <td>array</td> <td>soap:body operation style options</td> <td>CWsdlGenerator</td> </tr> <tr id="serviceName"> <td><a href="cwsdlgenerator#serviceName-detail">serviceName</a></td> <td>string</td> <td>the name of the generated WSDL.</td> <td>CWsdlGenerator</td> </tr> </table> </div> <div class="summary docProperty"> <h2>Protected Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="elements"> <td><a href="cwsdlgenerator#elements-detail">elements</a></td> <td>array</td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="messages"> <td><a href="cwsdlgenerator#messages-detail">messages</a></td> <td>array</td> <td>Map of request and response types for all operations.</td> <td>CWsdlGenerator</td> </tr> <tr id="operations"> <td><a href="cwsdlgenerator#operations-detail">operations</a></td> <td>array</td> <td>List of recognized SOAP operations that will become remotely available.</td> <td>CWsdlGenerator</td> </tr> <tr id="typeMap"> <td><a href="cwsdlgenerator#typeMap-detail">typeMap</a></td> <td></td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="types"> <td><a href="cwsdlgenerator#types-detail">types</a></td> <td>array</td> <td>List of complex types used by operations.</td> <td>CWsdlGenerator</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="__call"> <td><a href="ccomponent#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__get"> <td><a href="ccomponent#__get-detail">__get()</a></td> <td>Returns a property value, an event handler list or a behavior based on its name.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__isset"> <td><a href="ccomponent#__isset-detail">__isset()</a></td> <td>Checks if a property value is null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__set"> <td><a href="ccomponent#__set-detail">__set()</a></td> <td>Sets value of a component property.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__unset"> <td><a href="ccomponent#__unset-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="buildHtmlDocs"> <td><a href="cwsdlgenerator#buildHtmlDocs-detail">buildHtmlDocs()</a></td> <td>Generate human friendly HTML documentation for complex data types.</td> <td>CWsdlGenerator</td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="generateWsdl"> <td><a href="cwsdlgenerator#generateWsdl-detail">generateWsdl()</a></td> <td>Generates the WSDL for the given class.</td> <td>CWsdlGenerator</td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="addBindings"> <td><a href="cwsdlgenerator#addBindings-detail">addBindings()</a></td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="addMessages"> <td><a href="cwsdlgenerator#addMessages-detail">addMessages()</a></td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="addPortTypes"> <td><a href="cwsdlgenerator#addPortTypes-detail">addPortTypes()</a></td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="addService"> <td><a href="cwsdlgenerator#addService-detail">addService()</a></td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="addTypes"> <td><a href="cwsdlgenerator#addTypes-detail">addTypes()</a></td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="buildDOM"> <td><a href="cwsdlgenerator#buildDOM-detail">buildDOM()</a></td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="createOperationElement"> <td><a href="cwsdlgenerator#createOperationElement-detail">createOperationElement()</a></td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="createPortElement"> <td><a href="cwsdlgenerator#createPortElement-detail">createPortElement()</a></td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="getWsdlElementAttributes"> <td><a href="cwsdlgenerator#getWsdlElementAttributes-detail">getWsdlElementAttributes()</a></td> <td>Parse attributes nillable, minOccurs, maxOccurs</td> <td>CWsdlGenerator</td> </tr> <tr id="injectDom"> <td><a href="cwsdlgenerator#injectDom-detail">injectDom()</a></td> <td>Import custom XML source node into WSDL document under specified target node</td> <td>CWsdlGenerator</td> </tr> <tr id="processMethod"> <td><a href="cwsdlgenerator#processMethod-detail">processMethod()</a></td> <td></td> <td>CWsdlGenerator</td> </tr> <tr id="processType"> <td><a href="cwsdlgenerator#processType-detail">processType()</a></td> <td></td> <td>CWsdlGenerator</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="bindingStyle-detail"> bindingStyle<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <b>$bindingStyle</b>;</pre> <p>soap:operation style</p> <h3 class="detailHeader" id="bindingTransport-detail"> bindingTransport<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$bindingTransport</b>;</pre> <p>soap:operation transport</p> <h3 class="detailHeader" id="elements-detail"> elements<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">protected array <b>$elements</b>;</pre>  <h3 class="detailHeader" id="messages-detail"> messages<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">protected array <b>$messages</b>;</pre> <p>Map of request and response types for all operations.</p> <h3 class="detailHeader" id="namespace-detail"> namespace<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$namespace</b>;</pre> <p>the namespace to be used in the generated WSDL. If not set, it defaults to the name of the class that WSDL is generated upon.</p> <h3 class="detailHeader" id="operationBodyStyle-detail"> operationBodyStyle<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <b>$operationBodyStyle</b>;</pre> <p>soap:body operation style options</p> <h3 class="detailHeader" id="operations-detail"> operations<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">protected array <b>$operations</b>;</pre> <p>List of recognized SOAP operations that will become remotely available. All methods with declared @soap parameter will be included here in the format operation1 =&gt; description1, operation2 =&gt; description2, ..</p> <h3 class="detailHeader" id="serviceName-detail"> serviceName<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$serviceName</b>;</pre> <p>the name of the generated WSDL. If not set, it defaults to "urn:{$className}wsdl".</p> <h3 class="detailHeader" id="typeMap-detail"> typeMap<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">protected static <b>$typeMap</b>;</pre>  <h3 class="detailHeader" id="types-detail"> types<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">protected array <b>$types</b>;</pre> <p>List of complex types used by operations. If an SOAP operation defines complex input or output type, all objects are included here containing all sub-parameters. For instance, if an SOAP operation "createUser" requires complex input object "User", then the object "User" will be included here with declared subparameters such as "firstname", "lastname", etc..</p> <h2>Method Details</h2> <h3 class="detailHeader" id="addBindings-detail"> addBindings() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>addBindings</b>(DOMDocument $dom)</pre> </td></tr> <tr> <td class="paramNameCol">$dom</td> <td class="paramTypeCol">DOMDocument</td> <td class="paramDescCol">Represents an entire HTML or XML document; serves as the root of the document tree</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L712">framework/web/services/CWsdlGenerator.php#712</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">addBindings</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$binding</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:binding'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$binding</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Binding'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$binding</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">,</span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceName</span><span style="color: #007700">.</span><span style="color: #DD0000">'PortType'</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$soapBinding</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'soap:binding'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$soapBinding</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'style'</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindingStyle</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$soapBinding</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'transport'</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindingTransport</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$binding</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$soapBinding</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">documentElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$binding</span><span style="color: #007700">);<br><br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">operations </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$operation</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$binding</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createOperationElement</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$operation</span><span style="color: #007700">[</span><span style="color: #DD0000">'headers'</span><span style="color: #007700">]));<br>}</span></pre> </div>  <h3 class="detailHeader" id="addMessages-detail"> addMessages() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>addMessages</b>(DOMDocument $dom)</pre> </td></tr> <tr> <td class="paramNameCol">$dom</td> <td class="paramTypeCol">DOMDocument</td> <td class="paramDescCol">Represents an entire HTML or XML document; serves as the root of the document tree</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L647">framework/web/services/CWsdlGenerator.php#647</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">addMessages</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">)<br>{<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messages </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$message</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$element</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:message'</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>        foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messages</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">] as </span><span style="color: #0000BB">$partName</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$part</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$part</span><span style="color: #007700">))<br>            {<br>                </span><span style="color: #0000BB">$partElement</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:part'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$partElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$partName</span><span style="color: #007700">);<br>                if (isset(</span><span style="color: #0000BB">$part</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]))<br>                {<br>                    </span><span style="color: #0000BB">$partElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">,</span><span style="color: #0000BB">$part</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]);<br>                }<br>                if (isset(</span><span style="color: #0000BB">$part</span><span style="color: #007700">[</span><span style="color: #DD0000">'element'</span><span style="color: #007700">]))<br>                {<br>                    </span><span style="color: #0000BB">$partElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'element'</span><span style="color: #007700">,</span><span style="color: #0000BB">$part</span><span style="color: #007700">[</span><span style="color: #DD0000">'element'</span><span style="color: #007700">]);<br>                }<br>                </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$partElement</span><span style="color: #007700">);<br>            }<br>        }<br>        </span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">documentElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$element</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div>  <h3 class="detailHeader" id="addPortTypes-detail"> addPortTypes() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>addPortTypes</b>(DOMDocument $dom)</pre> </td></tr> <tr> <td class="paramNameCol">$dom</td> <td class="paramTypeCol">DOMDocument</td> <td class="paramDescCol">Represents an entire HTML or XML document; serves as the root of the document tree</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L677">framework/web/services/CWsdlGenerator.php#677</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">addPortTypes</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$portType</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:portType'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$portType</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceName</span><span style="color: #007700">.</span><span style="color: #DD0000">'PortType'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">documentElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$portType</span><span style="color: #007700">);<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">operations </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$operation</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$portType</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createPortElement</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$operation</span><span style="color: #007700">[</span><span style="color: #DD0000">'doc'</span><span style="color: #007700">]));<br>}</span></pre> </div>  <h3 class="detailHeader" id="addService-detail"> addService() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>addService</b>(DOMDocument $dom, string $serviceUrl)</pre> </td></tr> <tr> <td class="paramNameCol">$dom</td> <td class="paramTypeCol">DOMDocument</td> <td class="paramDescCol">Represents an entire HTML or XML document; serves as the root of the document tree</td> </tr> <tr> <td class="paramNameCol">$serviceUrl</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">Web service URL</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L796">framework/web/services/CWsdlGenerator.php#796</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">addService</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">,</span><span style="color: #0000BB">$serviceUrl</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$service</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:service'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$service</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Service'</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$port</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:port'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$port</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Port'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$port</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'binding'</span><span style="color: #007700">, </span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Binding'</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$soapAddress</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'soap:address'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$soapAddress</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'location'</span><span style="color: #007700">,</span><span style="color: #0000BB">$serviceUrl</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$port</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$soapAddress</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$service</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$port</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">documentElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$service</span><span style="color: #007700">);<br>}</span></pre> </div>  <h3 class="detailHeader" id="addTypes-detail"> addTypes() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>addTypes</b>(DOMDocument $dom)</pre> </td></tr> <tr> <td class="paramNameCol">$dom</td> <td class="paramTypeCol">DOMDocument</td> <td class="paramDescCol">Represents an entire HTML or XML document; serves as the root of the document tree</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L533">framework/web/services/CWsdlGenerator.php#533</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">addTypes</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">===array() &amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">===array())<br>        return;<br>    </span><span style="color: #0000BB">$types</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:types'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$schema</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:schema'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'targetNamespace'</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">namespace</span><span style="color: #007700">);<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types </span><span style="color: #007700">as </span><span style="color: #0000BB">$phpType</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">) &amp;&amp; </span><span style="color: #0000BB">strrpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">,</span><span style="color: #DD0000">'Array'</span><span style="color: #007700">)!==</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">)-</span><span style="color: #0000BB">5</span><span style="color: #007700">)<br>            continue;  </span><span style="color: #FF8000">// simple type<br>        </span><span style="color: #0000BB">$complexType</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:complexType'</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">))<br>        {<br>            if((</span><span style="color: #0000BB">$pos</span><span style="color: #007700">=</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">,</span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>                </span><span style="color: #0000BB">$complexType</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">,</span><span style="color: #0000BB">4</span><span style="color: #007700">));<br>            else<br>                </span><span style="color: #0000BB">$complexType</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">);<br><br>            </span><span style="color: #0000BB">$arrayType </span><span style="color: #007700">= (</span><span style="color: #0000BB">$dppos</span><span style="color: #007700">=</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">,</span><span style="color: #DD0000">':'</span><span style="color: #007700">)) !==</span><span style="color: #0000BB">false </span><span style="color: #007700">? </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">,</span><span style="color: #0000BB">$dppos </span><span style="color: #007700">+ </span><span style="color: #0000BB">1</span><span style="color: #007700">) : </span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">; </span><span style="color: #FF8000">// strip namespace, if any<br>            </span><span style="color: #0000BB">$arrayType </span><span style="color: #007700">= </span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$arrayType</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,-</span><span style="color: #0000BB">5</span><span style="color: #007700">); </span><span style="color: #FF8000">// strip 'Array' from name<br>            </span><span style="color: #007700">if (</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">operationBodyStyle</span><span style="color: #007700">[</span><span style="color: #DD0000">'use'</span><span style="color: #007700">] == </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">USE_ENCODED</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">$complexContent</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:complexContent'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$restriction</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:restriction'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$restriction</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'base'</span><span style="color: #007700">,</span><span style="color: #DD0000">'soap-enc:Array'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:attribute'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'ref'</span><span style="color: #007700">,</span><span style="color: #DD0000">'soap-enc:arrayType'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$attribute</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:arrayType'</span><span style="color: #007700">,(isset(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$typeMap</span><span style="color: #007700">[</span><span style="color: #0000BB">$arrayType</span><span style="color: #007700">]) ? </span><span style="color: #DD0000">'xsd:' </span><span style="color: #007700">: </span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">) .</span><span style="color: #0000BB">$arrayType</span><span style="color: #007700">.</span><span style="color: #DD0000">'[]'</span><span style="color: #007700">);<br>                <br>                </span><span style="color: #0000BB">$restriction</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$attribute</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$complexContent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$restriction</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$complexType</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$complexContent</span><span style="color: #007700">);<br>            }<br>            else<br>            {<br>                </span><span style="color: #0000BB">$sequence</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:sequence'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$element</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:element'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #DD0000">'item'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">,(isset(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$typeMap</span><span style="color: #007700">[</span><span style="color: #0000BB">$arrayType</span><span style="color: #007700">]) ? </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$typeMap</span><span style="color: #007700">[</span><span style="color: #0000BB">$arrayType</span><span style="color: #007700">] : </span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$arrayType</span><span style="color: #007700">));<br>                </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'minOccurs'</span><span style="color: #007700">,</span><span style="color: #DD0000">'0'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'maxOccurs'</span><span style="color: #007700">,</span><span style="color: #DD0000">'unbounded'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$sequence</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$element</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$complexType</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$sequence</span><span style="color: #007700">);<br>            }<br>        }<br>        elseif(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$complexType</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$phpType</span><span style="color: #007700">);<br>            if(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">[</span><span style="color: #DD0000">'custom_wsdl'</span><span style="color: #007700">]!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">$custom_dom</span><span style="color: #007700">=new </span><span style="color: #0000BB">DOMDocument</span><span style="color: #007700">();<br>                </span><span style="color: #0000BB">$custom_dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadXML</span><span style="color: #007700">(</span><span style="color: #DD0000">'&lt;root xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;'</span><span style="color: #007700">.</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">[</span><span style="color: #DD0000">'custom_wsdl'</span><span style="color: #007700">].</span><span style="color: #DD0000">'&lt;/root&gt;'</span><span style="color: #007700">);<br>                foreach(</span><span style="color: #0000BB">$custom_dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">documentElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">childNodes </span><span style="color: #007700">as </span><span style="color: #0000BB">$el</span><span style="color: #007700">)<br>                    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">injectDom</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">,</span><span style="color: #0000BB">$complexType</span><span style="color: #007700">,</span><span style="color: #0000BB">$el</span><span style="color: #007700">);<br>            }else{<br>                </span><span style="color: #0000BB">$all</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:' </span><span style="color: #007700">. </span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">[</span><span style="color: #DD0000">'indicator'</span><span style="color: #007700">]);<br><br>                if(!</span><span style="color: #0000BB">is_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">[</span><span style="color: #DD0000">'minOccurs'</span><span style="color: #007700">]))<br>                    </span><span style="color: #0000BB">$all</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'minOccurs'</span><span style="color: #007700">,</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">[</span><span style="color: #DD0000">'minOccurs'</span><span style="color: #007700">]);<br>                if(!</span><span style="color: #0000BB">is_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">[</span><span style="color: #DD0000">'maxOccurs'</span><span style="color: #007700">]))<br>                    </span><span style="color: #0000BB">$all</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'maxOccurs'</span><span style="color: #007700">,</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">[</span><span style="color: #DD0000">'maxOccurs'</span><span style="color: #007700">]);<br>                if(!</span><span style="color: #0000BB">is_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">[</span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">]))<br>                    </span><span style="color: #0000BB">$all</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">,</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">[</span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">]);<br><br>                foreach(</span><span style="color: #0000BB">$xmlType</span><span style="color: #007700">[</span><span style="color: #DD0000">'properties'</span><span style="color: #007700">] as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$type</span><span style="color: #007700">)<br>                {<br>                    </span><span style="color: #0000BB">$element</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:element'</span><span style="color: #007700">);<br>                    if(!</span><span style="color: #0000BB">is_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]))<br>                        </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'minOccurs'</span><span style="color: #007700">,</span><span style="color: #0000BB">$type</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br>                    if(!</span><span style="color: #0000BB">is_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">]))<br>                        </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'maxOccurs'</span><span style="color: #007700">,</span><span style="color: #0000BB">$type</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">]);<br>                    if(!</span><span style="color: #0000BB">is_null</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]))<br>                        </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">,</span><span style="color: #0000BB">$type</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br>                    </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>                    </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">,</span><span style="color: #0000BB">$type</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]);<br>                    </span><span style="color: #0000BB">$all</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$element</span><span style="color: #007700">);<br>                }<br>                </span><span style="color: #0000BB">$complexType</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$all</span><span style="color: #007700">);<br>            }<br>        }<br>        </span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$complexType</span><span style="color: #007700">);<br>    }<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$element</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:element'</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$complexType</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:complexType'</span><span style="color: #007700">);<br>        if (!empty(</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$sequence</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:sequence'</span><span style="color: #007700">);<br>            foreach(</span><span style="color: #0000BB">$parameters </span><span style="color: #007700">as </span><span style="color: #0000BB">$paramName</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$paramOpts</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">$innerElement</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:element'</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$innerElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$paramName</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$innerElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">,</span><span style="color: #0000BB">$paramOpts</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]);<br>                if (isset(</span><span style="color: #0000BB">$paramOpts</span><span style="color: #007700">[</span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">]) &amp;&amp; </span><span style="color: #0000BB">$paramOpts</span><span style="color: #007700">[</span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">])<br>                {<br>                    </span><span style="color: #0000BB">$innerElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">,</span><span style="color: #DD0000">'true'</span><span style="color: #007700">);<br>                }<br>                </span><span style="color: #0000BB">$sequence</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$innerElement</span><span style="color: #007700">);<br>            }<br>            </span><span style="color: #0000BB">$complexType</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$sequence</span><span style="color: #007700">);<br>        }<br>        </span><span style="color: #0000BB">$element</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$complexType</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$element</span><span style="color: #007700">);<br>    }<br>    </span><span style="color: #0000BB">$types</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$schema</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">documentElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$types</span><span style="color: #007700">);<br>}</span></pre> </div>  <h3 class="detailHeader" id="buildDOM-detail"> buildDOM() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected DOMDocument <b>buildDOM</b>(string $serviceUrl, string $encoding)</pre> </td></tr> <tr> <td class="paramNameCol">$serviceUrl</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">Web service URL</td> </tr> <tr> <td class="paramNameCol">$encoding</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">encoding of the WSDL. Defaults to 'UTF-8'.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">DOMDocument</td> <td class="paramDescCol"></td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L506">framework/web/services/CWsdlGenerator.php#506</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">buildDOM</span><span style="color: #007700">(</span><span style="color: #0000BB">$serviceUrl</span><span style="color: #007700">,</span><span style="color: #0000BB">$encoding</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$xml</span><span style="color: #007700">=</span><span style="color: #DD0000">"&lt;?xml version=\"1.0\" encoding=\"</span><span style="color: #0000BB">$encoding</span><span style="color: #DD0000">\"?&gt;<br>&lt;definitions name=\"</span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceName</span><span style="color: #007700">}</span><span style="color: #DD0000">\" targetNamespace=\"</span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">namespace</span><span style="color: #007700">}</span><span style="color: #DD0000">\"<br> xmlns=\"http://schemas.xmlsoap.org/wsdl/\"<br> xmlns:tns=\"</span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">namespace</span><span style="color: #007700">}</span><span style="color: #DD0000">\"<br> xmlns:soap=\"http://schemas.xmlsoap.org/wsdl/soap/\"<br> xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"<br> xmlns:wsdl=\"http://schemas.xmlsoap.org/wsdl/\"<br> xmlns:soap-enc=\"http://schemas.xmlsoap.org/soap/encoding/\"&gt;&lt;/definitions&gt;"</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$dom</span><span style="color: #007700">=new </span><span style="color: #0000BB">DOMDocument</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">formatOutput</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadXml</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addTypes</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addMessages</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addPortTypes</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addBindings</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addService</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">,</span><span style="color: #0000BB">$serviceUrl</span><span style="color: #007700">);<br><br>    return </span><span style="color: #0000BB">$dom</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="buildHtmlDocs-detail"> buildHtmlDocs() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>buildHtmlDocs</b>(bool $return=false)</pre> </td></tr> <tr> <td class="paramNameCol">$return</td> <td class="paramTypeCol">bool</td> <td class="paramDescCol">If true, generated HTML output will be returned rather than directly sent to output buffer</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L830">framework/web/services/CWsdlGenerator.php#830</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">buildHtmlDocs</span><span style="color: #007700">(</span><span style="color: #0000BB">$return</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$html</span><span style="color: #007700">=</span><span style="color: #DD0000">'&lt;html&gt;&lt;head&gt;'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'&lt;style type="text/css"&gt;<br>table{border-collapse: collapse;background-color: #DDDDDD;}<br>tr{background-color: #FFFFFF;}<br>th{background-color: #EEEEEE;}<br>th, td{font-size: 12px;font-family: courier;padding: 3px;}<br>&lt;/style&gt;'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'&lt;/head&gt;&lt;body&gt;'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'&lt;h2&gt;WSDL documentation for service '</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceName</span><span style="color: #007700">.</span><span style="color: #DD0000">'&lt;/h2&gt;'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'&lt;p&gt;Generated on '</span><span style="color: #007700">.</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'d.m.Y H:i:s'</span><span style="color: #007700">).</span><span style="color: #DD0000">'&lt;/p&gt;'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'&lt;table border="0" cellspacing="1" cellpadding="1"&gt;'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'&lt;tr&gt;&lt;td&gt;'</span><span style="color: #007700">;<br><br>    if(!empty(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">))<br>    {<br>        foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types </span><span style="color: #007700">as </span><span style="color: #0000BB">$object</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$options</span><span style="color: #007700">){<br>            if(!</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$options</span><span style="color: #007700">) || empty(</span><span style="color: #0000BB">$options</span><span style="color: #007700">) || !</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'properties'</span><span style="color: #007700">]) || empty(</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'properties'</span><span style="color: #007700">])){<br>                continue;<br>            }<br>            </span><span style="color: #0000BB">$params</span><span style="color: #007700">=</span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'properties'</span><span style="color: #007700">];<br>            </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">"\n\n&lt;h3&gt;Object: </span><span style="color: #007700">{</span><span style="color: #0000BB">$object</span><span style="color: #007700">}</span><span style="color: #DD0000">&lt;/h3&gt;"</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'&lt;table border="1" cellspacing="1" cellpadding="1"&gt;'</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'&lt;tr&gt;&lt;th&gt;#&lt;/th&gt;&lt;th&gt;Attribute&lt;/th&gt;&lt;th&gt;Type&lt;/th&gt;&lt;th&gt;Nill&lt;/th&gt;&lt;th&gt;Min&lt;/th&gt;&lt;th&gt;Max&lt;/th&gt;&lt;th&gt;Description&lt;/th&gt;&lt;th&gt;Example&lt;/th&gt;&lt;/tr&gt;'</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$c</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>            foreach(</span><span style="color: #0000BB">$params </span><span style="color: #007700">as </span><span style="color: #0000BB">$param</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$prop</span><span style="color: #007700">){<br>                ++</span><span style="color: #0000BB">$c</span><span style="color: #007700">;<br>                </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">"\n&lt;tr&gt;"<br>                            </span><span style="color: #007700">.</span><span style="color: #DD0000">"\n\t&lt;td&gt;</span><span style="color: #007700">{</span><span style="color: #0000BB">$c</span><span style="color: #007700">}</span><span style="color: #DD0000">&lt;/td&gt;"<br>                            </span><span style="color: #007700">.</span><span style="color: #DD0000">"\n\t&lt;td&gt;</span><span style="color: #007700">{</span><span style="color: #0000BB">$param</span><span style="color: #007700">}</span><span style="color: #DD0000">&lt;/td&gt;"<br>                            </span><span style="color: #007700">.</span><span style="color: #DD0000">"\n\t&lt;td&gt;"</span><span style="color: #007700">.(</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'xsd:'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$prop</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">])).</span><span style="color: #DD0000">"&lt;/td&gt;"<br>                            </span><span style="color: #007700">.</span><span style="color: #DD0000">"\n\t&lt;td&gt;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$prop</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">].</span><span style="color: #DD0000">"&lt;/td&gt;"<br>                            </span><span style="color: #007700">.</span><span style="color: #DD0000">"\n\t&lt;td&gt;"</span><span style="color: #007700">.(</span><span style="color: #0000BB">$prop</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]==</span><span style="color: #0000BB">null </span><span style="color: #007700">? </span><span style="color: #DD0000">'&amp;nbsp;' </span><span style="color: #007700">: </span><span style="color: #0000BB">$prop</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]).</span><span style="color: #DD0000">"&lt;/td&gt;"<br>                            </span><span style="color: #007700">.</span><span style="color: #DD0000">"\n\t&lt;td&gt;"</span><span style="color: #007700">.(</span><span style="color: #0000BB">$prop</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">]==</span><span style="color: #0000BB">null </span><span style="color: #007700">? </span><span style="color: #DD0000">'&amp;nbsp;' </span><span style="color: #007700">: </span><span style="color: #0000BB">$prop</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">]).</span><span style="color: #DD0000">"&lt;/td&gt;"<br>                            </span><span style="color: #007700">.</span><span style="color: #DD0000">"\n\t&lt;td&gt;</span><span style="color: #007700">{</span><span style="color: #0000BB">$prop</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]}</span><span style="color: #DD0000">&lt;/td&gt;"<br>                            </span><span style="color: #007700">.</span><span style="color: #DD0000">"\n\t&lt;td&gt;"</span><span style="color: #007700">.(</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$prop</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">])==</span><span style="color: #DD0000">'' </span><span style="color: #007700">? </span><span style="color: #DD0000">'&amp;nbsp;' </span><span style="color: #007700">: </span><span style="color: #0000BB">$prop</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">]).</span><span style="color: #DD0000">"&lt;/td&gt;"<br>                        </span><span style="color: #007700">.</span><span style="color: #DD0000">"\n&lt;/tr&gt;"</span><span style="color: #007700">;<br>            }<br>            </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">"\n&lt;/table&gt;&lt;br/&gt;"</span><span style="color: #007700">;<br>        }<br>    }<br>    else<br>        </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'No complex data type found!'</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$html</span><span style="color: #007700">.=</span><span style="color: #DD0000">'&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;'</span><span style="color: #007700">;<br><br>    if(</span><span style="color: #0000BB">$return</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$html</span><span style="color: #007700">;<br><br>    echo </span><span style="color: #0000BB">$html</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">end</span><span style="color: #007700">(); </span><span style="color: #FF8000">// end the app to avoid conflict with text/xml header<br></span><span style="color: #007700">}</span></pre> </div> <p>Generate human friendly HTML documentation for complex data types. This method can be invoked either by inserting URL parameter "&amp;makedoc" into URL link, e.g. "http://www.mydomain.com/soap/create?makedoc", or simply by calling from another script with argument $return=true. <br><br> Each complex data type is described in a separate HTML table containing following columns: </p>
<ul> <li># - attribute ID</li> <li>Attribute - attribute name, e.g. firstname</li> <li>Type - attribute type, e.g. integer, date, tns:SoapPovCalculationResultArray</li> <li>Nill - true|false - whether the attribute is nillable</li> <li>Min - minimum number of occurrences</li> <li>Max - maximum number of occurrences</li> <li>Description - Detailed description of the attribute.</li> <li>Example - Attribute example value if provided via PHPDoc property @example.</li> </ul> <h3 class="detailHeader" id="createOperationElement-detail"> createOperationElement() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected DOMElement <b>createOperationElement</b>(DOMDocument $dom, string $name, array $headers=NULL)</pre> </td></tr> <tr> <td class="paramNameCol">$dom</td> <td class="paramTypeCol">DOMDocument</td> <td class="paramDescCol">Represents an entire HTML or XML document; serves as the root of the document tree</td> </tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">method name</td> </tr> <tr> <td class="paramNameCol">$headers</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">array like array('input'=&gt;array(MESSAGE,PART),'output=&gt;array(MESSAGE,PART))</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">DOMElement</td> <td class="paramDescCol">a new instance of wsdl:operation element</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L735">framework/web/services/CWsdlGenerator.php#735</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">createOperationElement</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$headers</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$operation</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:operation'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$operation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">, </span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$soapOperation</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'soap:operation'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$soapOperation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'soapAction'</span><span style="color: #007700">, </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">namespace</span><span style="color: #007700">.</span><span style="color: #DD0000">'#'</span><span style="color: #007700">.</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br>    if (</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindingStyle </span><span style="color: #007700">== </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STYLE_RPC</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$soapOperation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'style'</span><span style="color: #007700">, </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STYLE_RPC</span><span style="color: #007700">);<br>    }<br><br>    </span><span style="color: #0000BB">$input</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:input'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$output</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:output'</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$soapBody</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'soap:body'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$operationBodyStyle</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">operationBodyStyle</span><span style="color: #007700">;<br>    if (</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindingStyle </span><span style="color: #007700">== </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STYLE_RPC </span><span style="color: #007700">&amp;&amp; !isset(</span><span style="color: #0000BB">$operationBodyStyle</span><span style="color: #007700">[</span><span style="color: #DD0000">'namespace'</span><span style="color: #007700">]))<br>    {<br>        </span><span style="color: #0000BB">$operationBodyStyle</span><span style="color: #007700">[</span><span style="color: #DD0000">'namespace'</span><span style="color: #007700">] = </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">namespace</span><span style="color: #007700">;<br>    }<br>    foreach(</span><span style="color: #0000BB">$operationBodyStyle </span><span style="color: #007700">as </span><span style="color: #0000BB">$attributeName</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$attributeValue</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$soapBody</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributeName</span><span style="color: #007700">, </span><span style="color: #0000BB">$attributeValue</span><span style="color: #007700">);<br>    }<br>    </span><span style="color: #0000BB">$input</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$soapBody</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$output</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(clone </span><span style="color: #0000BB">$soapBody</span><span style="color: #007700">);<br>    if (</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$headers</span><span style="color: #007700">))<br>    {<br>        if (isset(</span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'input'</span><span style="color: #007700">]) &amp;&amp; </span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'input'</span><span style="color: #007700">]) &amp;&amp; </span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'input'</span><span style="color: #007700">])==</span><span style="color: #0000BB">2</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$soapHeader </span><span style="color: #007700">= </span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'soap:header'</span><span style="color: #007700">);<br>            foreach(</span><span style="color: #0000BB">$operationBodyStyle </span><span style="color: #007700">as </span><span style="color: #0000BB">$attributeName</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$attributeValue</span><span style="color: #007700">) {<br>                </span><span style="color: #0000BB">$soapHeader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributeName</span><span style="color: #007700">, </span><span style="color: #0000BB">$attributeValue</span><span style="color: #007700">);<br>            }<br>            </span><span style="color: #0000BB">$soapHeader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'message'</span><span style="color: #007700">, </span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'input'</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]);<br>            </span><span style="color: #0000BB">$soapHeader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'part'</span><span style="color: #007700">, </span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'input'</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br>            </span><span style="color: #0000BB">$input</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$soapHeader</span><span style="color: #007700">);<br>        }<br>        if (isset(</span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'output'</span><span style="color: #007700">]) &amp;&amp; </span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'output'</span><span style="color: #007700">]) &amp;&amp; </span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'output'</span><span style="color: #007700">])==</span><span style="color: #0000BB">2</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$soapHeader </span><span style="color: #007700">= </span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'soap:header'</span><span style="color: #007700">);<br>            foreach(</span><span style="color: #0000BB">$operationBodyStyle </span><span style="color: #007700">as </span><span style="color: #0000BB">$attributeName</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$attributeValue</span><span style="color: #007700">) {<br>                </span><span style="color: #0000BB">$soapHeader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$attributeName</span><span style="color: #007700">, </span><span style="color: #0000BB">$attributeValue</span><span style="color: #007700">);<br>            }<br>            </span><span style="color: #0000BB">$soapHeader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'message'</span><span style="color: #007700">, </span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'output'</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]);<br>            </span><span style="color: #0000BB">$soapHeader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'part'</span><span style="color: #007700">, </span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #DD0000">'output'</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br>            </span><span style="color: #0000BB">$output</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$soapHeader</span><span style="color: #007700">);<br>        }<br>    }<br><br>    </span><span style="color: #0000BB">$operation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$soapOperation</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$operation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$operation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$output</span><span style="color: #007700">);<br><br>    return </span><span style="color: #0000BB">$operation</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="createPortElement-detail"> createPortElement() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected DOMElement <b>createPortElement</b>(DOMDocument $dom, string $name, string $doc)</pre> </td></tr> <tr> <td class="paramNameCol">$dom</td> <td class="paramTypeCol">DOMDocument</td> <td class="paramDescCol">Represents an entire HTML or XML document; serves as the root of the document tree</td> </tr> <tr> <td class="paramNameCol">$name</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">method name</td> </tr> <tr> <td class="paramNameCol">$doc</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">doc</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">DOMElement</td> <td class="paramDescCol">a new instance of wsdl:operation element filled by tns In/Out data</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L692">framework/web/services/CWsdlGenerator.php#692</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">createPortElement</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">$doc</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$operation</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:operation'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$operation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'name'</span><span style="color: #007700">,</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$input</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:input'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$input</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'message'</span><span style="color: #007700">, </span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$name</span><span style="color: #007700">.</span><span style="color: #DD0000">'In'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$output</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:output'</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$output</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #DD0000">'message'</span><span style="color: #007700">, </span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$name</span><span style="color: #007700">.</span><span style="color: #DD0000">'Out'</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$operation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #DD0000">'wsdl:documentation'</span><span style="color: #007700">,</span><span style="color: #0000BB">$doc</span><span style="color: #007700">));<br>    </span><span style="color: #0000BB">$operation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$operation</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$output</span><span style="color: #007700">);<br><br>    return </span><span style="color: #0000BB">$operation</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="generateWsdl-detail"> generateWsdl() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>generateWsdl</b>(string $className, string $serviceUrl, string $encoding='UTF-8')</pre> </td></tr> <tr> <td class="paramNameCol">$className</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">class name</td> </tr> <tr> <td class="paramNameCol">$serviceUrl</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">Web service URL</td> </tr> <tr> <td class="paramNameCol">$encoding</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">encoding of the WSDL. Defaults to 'UTF-8'.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the generated WSDL</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L236">framework/web/services/CWsdlGenerator.php#236</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">generateWsdl</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">, </span><span style="color: #0000BB">$serviceUrl</span><span style="color: #007700">, </span><span style="color: #0000BB">$encoding</span><span style="color: #007700">=</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">operations</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messages</span><span style="color: #007700">=array();<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceName</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceName</span><span style="color: #007700">=</span><span style="color: #0000BB">$className</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">namespace</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">namespace</span><span style="color: #007700">=</span><span style="color: #DD0000">'urn:'</span><span style="color: #007700">.</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'\\'</span><span style="color: #007700">,</span><span style="color: #DD0000">'/'</span><span style="color: #007700">,</span><span style="color: #0000BB">$className</span><span style="color: #007700">).</span><span style="color: #DD0000">'wsdl'</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$reflection</span><span style="color: #007700">=new </span><span style="color: #0000BB">ReflectionClass</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">);<br>    foreach(</span><span style="color: #0000BB">$reflection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMethods</span><span style="color: #007700">() as </span><span style="color: #0000BB">$method</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$method</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isPublic</span><span style="color: #007700">())<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">processMethod</span><span style="color: #007700">(</span><span style="color: #0000BB">$method</span><span style="color: #007700">);<br>    }<br><br>    </span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildDOM</span><span style="color: #007700">(</span><span style="color: #0000BB">$serviceUrl</span><span style="color: #007700">,</span><span style="color: #0000BB">$encoding</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">saveXML</span><span style="color: #007700">();<br><br>    if(isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'makedoc'</span><span style="color: #007700">]))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">buildHtmlDocs</span><span style="color: #007700">();<br><br>    return </span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Generates the WSDL for the given class.</p> <h3 class="detailHeader" id="getWsdlElementAttributes-detail"> getWsdlElementAttributes() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected array <b>getWsdlElementAttributes</b>(string $comment)</pre> </td></tr> <tr> <td class="paramNameCol">$comment</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">Extracted PHPDoc comment</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">array of [nillable, minOccurs, maxOccurs]</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L450">framework/web/services/CWsdlGenerator.php#450</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">getWsdlElementAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$comment</span><span style="color: #007700">) {<br>    </span><span style="color: #0000BB">$nillable</span><span style="color: #007700">=</span><span style="color: #0000BB">$minOccurs</span><span style="color: #007700">=</span><span style="color: #0000BB">$maxOccurs</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/{(.+)}/'</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #0000BB">$attr</span><span style="color: #007700">))<br>    {<br>        if(</span><span style="color: #0000BB">preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">'/((\w+)\s*=\s*(\w+))/mi'</span><span style="color: #007700">,</span><span style="color: #0000BB">$attr</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">],</span><span style="color: #0000BB">$attr</span><span style="color: #007700">))<br>        {<br>            foreach(</span><span style="color: #0000BB">$attr</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">] as </span><span style="color: #0000BB">$id</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$prop</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">$prop</span><span style="color: #007700">=</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$prop</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$val</span><span style="color: #007700">=</span><span style="color: #0000BB">strtolower</span><span style="color: #007700">(</span><span style="color: #0000BB">$attr</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">][</span><span style="color: #0000BB">$id</span><span style="color: #007700">]);<br>                if(</span><span style="color: #0000BB">$prop</span><span style="color: #007700">==</span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">){<br>                    if(</span><span style="color: #0000BB">$val</span><span style="color: #007700">==</span><span style="color: #DD0000">'false' </span><span style="color: #007700">|| </span><span style="color: #0000BB">$val</span><span style="color: #007700">==</span><span style="color: #DD0000">'true'</span><span style="color: #007700">)<br>                        </span><span style="color: #0000BB">$nillable</span><span style="color: #007700">=</span><span style="color: #0000BB">$val</span><span style="color: #007700">;<br>                    else<br>                        </span><span style="color: #0000BB">$nillable</span><span style="color: #007700">=</span><span style="color: #0000BB">$val </span><span style="color: #007700">? </span><span style="color: #DD0000">'true' </span><span style="color: #007700">: </span><span style="color: #DD0000">'false'</span><span style="color: #007700">;<br>                }elseif(</span><span style="color: #0000BB">$prop</span><span style="color: #007700">==</span><span style="color: #DD0000">'minoccurs'</span><span style="color: #007700">)<br>                    </span><span style="color: #0000BB">$minOccurs</span><span style="color: #007700">=</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #0000BB">$val</span><span style="color: #007700">);<br>                elseif(</span><span style="color: #0000BB">$prop</span><span style="color: #007700">==</span><span style="color: #DD0000">'maxoccurs'</span><span style="color: #007700">)<br>                    </span><span style="color: #0000BB">$maxOccurs</span><span style="color: #007700">=(</span><span style="color: #0000BB">$val</span><span style="color: #007700">==</span><span style="color: #DD0000">'unbounded'</span><span style="color: #007700">) ? </span><span style="color: #DD0000">'unbounded' </span><span style="color: #007700">: </span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #0000BB">$val</span><span style="color: #007700">);<br>            }<br>        }<br>    }<br>    return array(<br>        </span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$nillable</span><span style="color: #007700">,<br>        </span><span style="color: #DD0000">'minOccurs'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$minOccurs</span><span style="color: #007700">,<br>        </span><span style="color: #DD0000">'maxOccurs'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$maxOccurs<br>    </span><span style="color: #007700">);<br>}</span></pre> </div> <p>Parse attributes nillable, minOccurs, maxOccurs</p> <h3 class="detailHeader" id="injectDom-detail"> injectDom() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>injectDom</b>(DOMDocument $dom, DOMElement $target, DOMNode $source)</pre> </td></tr> <tr> <td class="paramNameCol">$dom</td> <td class="paramTypeCol">DOMDocument</td> <td class="paramDescCol">XML WSDL document being generated</td> </tr> <tr> <td class="paramNameCol">$target</td> <td class="paramTypeCol">DOMElement</td> <td class="paramDescCol">XML node, to which will be appended $source node</td> </tr> <tr> <td class="paramNameCol">$source</td> <td class="paramTypeCol">DOMNode</td> <td class="paramDescCol">Source XML node to be imported</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L485">framework/web/services/CWsdlGenerator.php#485</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">injectDom</span><span style="color: #007700">(</span><span style="color: #0000BB">DOMDocument $dom</span><span style="color: #007700">, </span><span style="color: #0000BB">DOMElement $target</span><span style="color: #007700">, </span><span style="color: #0000BB">DOMNode $source</span><span style="color: #007700">)<br>{<br>    if (</span><span style="color: #0000BB">$source</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nodeType</span><span style="color: #007700">!=</span><span style="color: #0000BB">XML_ELEMENT_NODE</span><span style="color: #007700">)<br>        return;<br><br>    </span><span style="color: #0000BB">$import</span><span style="color: #007700">=</span><span style="color: #0000BB">$dom</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createElement</span><span style="color: #007700">(</span><span style="color: #0000BB">$source</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nodeName</span><span style="color: #007700">);<br><br>    foreach(</span><span style="color: #0000BB">$source</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attributes </span><span style="color: #007700">as </span><span style="color: #0000BB">$attr</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$import</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">$attr</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">,</span><span style="color: #0000BB">$attr</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">);<br><br>    foreach(</span><span style="color: #0000BB">$source</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">childNodes </span><span style="color: #007700">as </span><span style="color: #0000BB">$child</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">injectDom</span><span style="color: #007700">(</span><span style="color: #0000BB">$dom</span><span style="color: #007700">,</span><span style="color: #0000BB">$import</span><span style="color: #007700">,</span><span style="color: #0000BB">$child</span><span style="color: #007700">);<br><br>    </span><span style="color: #0000BB">$target</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$import</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Import custom XML source node into WSDL document under specified target node</p> <h3 class="detailHeader" id="processMethod-detail"> processMethod() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected void <b>processMethod</b>(ReflectionMethod $method)</pre> </td></tr> <tr> <td class="paramNameCol">$method</td> <td class="paramTypeCol">ReflectionMethod</td> <td class="paramDescCol">method</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L265">framework/web/services/CWsdlGenerator.php#265</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">processMethod</span><span style="color: #007700">(</span><span style="color: #0000BB">$method</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$comment</span><span style="color: #007700">=</span><span style="color: #0000BB">$method</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDocComment</span><span style="color: #007700">();<br>    if(</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #DD0000">'@soap'</span><span style="color: #007700">)===</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>        return;<br>    </span><span style="color: #0000BB">$comment</span><span style="color: #007700">=</span><span style="color: #0000BB">strtr</span><span style="color: #007700">(</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,array(</span><span style="color: #DD0000">"\r\n"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,</span><span style="color: #DD0000">"\r"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">)); </span><span style="color: #FF8000">// make line endings consistent: win -&gt; unix, mac -&gt; unix<br><br>    </span><span style="color: #0000BB">$methodName</span><span style="color: #007700">=</span><span style="color: #0000BB">$method</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$comment</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^\s*\**(\s*?$|\s*)/m'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$params</span><span style="color: #007700">=</span><span style="color: #0000BB">$method</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getParameters</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">$message</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$headers</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^@param\s+([\w\.]+(\[\s*\])?)\s*?(.*)$/im'</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$n</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$params</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$params</span><span style="color: #007700">);<br>    if (</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindingStyle </span><span style="color: #007700">== </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STYLE_RPC</span><span style="color: #007700">)<br>    {<br>        for(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">$n</span><span style="color: #007700">;++</span><span style="color: #0000BB">$i</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$message</span><span style="color: #007700">[</span><span style="color: #0000BB">$params</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">()]=array(<br>                </span><span style="color: #DD0000">'type'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">processType</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">$i</span><span style="color: #007700">]),<br>                </span><span style="color: #DD0000">'doc'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">][</span><span style="color: #0000BB">$i</span><span style="color: #007700">]),<br>            );<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">[</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">] = array();<br>        for(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">$n</span><span style="color: #007700">;++</span><span style="color: #0000BB">$i</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">[</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">][</span><span style="color: #0000BB">$params</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">()]=array(<br>                </span><span style="color: #DD0000">'type'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">processType</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">$i</span><span style="color: #007700">]),<br>                </span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$params</span><span style="color: #007700">[</span><span style="color: #0000BB">$i</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">isOptional</span><span style="color: #007700">(),<br>            );<br>        </span><span style="color: #0000BB">$message</span><span style="color: #007700">[</span><span style="color: #DD0000">'parameters'</span><span style="color: #007700">] = array(</span><span style="color: #DD0000">'element'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">);<br>    }<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messages</span><span style="color: #007700">[</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">.</span><span style="color: #DD0000">'In'</span><span style="color: #007700">]=</span><span style="color: #0000BB">$message</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^@header\s+([\w\.]+(\[\s*\])?)\s*?(.*)$/im'</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br>    for(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">$n</span><span style="color: #007700">;++</span><span style="color: #0000BB">$i</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$name </span><span style="color: #007700">= </span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">$i</span><span style="color: #007700">];<br>        </span><span style="color: #0000BB">$type </span><span style="color: #007700">= </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">processType</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">$i</span><span style="color: #007700">]);<br>        </span><span style="color: #0000BB">$doc </span><span style="color: #007700">= </span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">][</span><span style="color: #0000BB">$i</span><span style="color: #007700">]);<br>        if (</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindingStyle </span><span style="color: #007700">== </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STYLE_RPC</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=array(</span><span style="color: #0000BB">$type</span><span style="color: #007700">,</span><span style="color: #0000BB">$doc</span><span style="color: #007700">);<br>        }<br>        else<br>        {<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">][</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=array(</span><span style="color: #DD0000">'type'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$type</span><span style="color: #007700">);<br>            </span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">] = array(</span><span style="color: #DD0000">'element'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$type</span><span style="color: #007700">);<br>        }<br>    }<br><br>    if (</span><span style="color: #0000BB">$headers </span><span style="color: #007700">!== array())<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messages</span><span style="color: #007700">[</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Headers'</span><span style="color: #007700">]=</span><span style="color: #0000BB">$headers</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$headerKeys </span><span style="color: #007700">= </span><span style="color: #0000BB">array_keys</span><span style="color: #007700">(</span><span style="color: #0000BB">$headers</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$firstHeaderKey </span><span style="color: #007700">= </span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$headerKeys</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$firstHeader </span><span style="color: #007700">= </span><span style="color: #0000BB">$headers</span><span style="color: #007700">[</span><span style="color: #0000BB">$firstHeaderKey</span><span style="color: #007700">];<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$firstHeader </span><span style="color: #007700">= </span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>    }<br><br>    if (</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindingStyle </span><span style="color: #007700">== </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STYLE_RPC</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^@return\s+([\w\.]+(\[\s*\])?)\s*?(.*)$/im'</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$return</span><span style="color: #007700">=array(<br>                </span><span style="color: #DD0000">'type'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">processType</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]),<br>                </span><span style="color: #DD0000">'doc'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]),<br>            );<br>        else<br>            </span><span style="color: #0000BB">$return</span><span style="color: #007700">=</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messages</span><span style="color: #007700">[</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Out'</span><span style="color: #007700">]=array(</span><span style="color: #DD0000">'return'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$return</span><span style="color: #007700">);<br>    }<br>    else<br>    {<br>        if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^@return\s+([\w\.]+(\[\s*\])?)\s*?(.*)$/im'</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">elements</span><span style="color: #007700">[</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Response'</span><span style="color: #007700">][</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Result'</span><span style="color: #007700">]=array(<br>                </span><span style="color: #DD0000">'type'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">processType</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]),<br>            );<br>        }<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">messages</span><span style="color: #007700">[</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Out'</span><span style="color: #007700">]=array(</span><span style="color: #DD0000">'parameters'</span><span style="color: #007700">=&gt;array(</span><span style="color: #DD0000">'element'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Response'</span><span style="color: #007700">));<br>    }<br><br>    if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^\/\*+\s*([^@]*?)\n@/s'</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$doc</span><span style="color: #007700">=</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br>    else<br>        </span><span style="color: #0000BB">$doc</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">operations</span><span style="color: #007700">[</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">]=array(<br>        </span><span style="color: #DD0000">'doc'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$doc</span><span style="color: #007700">,<br>        </span><span style="color: #DD0000">'headers'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$firstHeader </span><span style="color: #007700">=== </span><span style="color: #0000BB">null </span><span style="color: #007700">? </span><span style="color: #0000BB">null </span><span style="color: #007700">: array(</span><span style="color: #DD0000">'input'</span><span style="color: #007700">=&gt;array(</span><span style="color: #0000BB">$methodName</span><span style="color: #007700">.</span><span style="color: #DD0000">'Headers'</span><span style="color: #007700">, </span><span style="color: #0000BB">$firstHeaderKey</span><span style="color: #007700">)),<br>    );<br>}</span></pre> </div>  <h3 class="detailHeader" id="processType-detail"> processType() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected mixed|string <b>processType</b>(string $type)</pre> </td></tr> <tr> <td class="paramNameCol">$type</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">PHP variable type</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">mixed|string</td> <td class="paramDescCol"></td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWsdlGenerator.php#L367">framework/web/services/CWsdlGenerator.php#367</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">processType</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">)<br>{<br>    if(isset(</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$typeMap</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$typeMap</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">];<br>    elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">]))<br>        return </span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">]) ? </span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$type </span><span style="color: #007700">: </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">];<br>    elseif((</span><span style="color: #0000BB">$pos</span><span style="color: #007700">=</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">,</span><span style="color: #DD0000">'[]'</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>    {    </span><span style="color: #FF8000">// array of types<br>        </span><span style="color: #0000BB">$type</span><span style="color: #007700">=</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">,</span><span style="color: #0000BB">$pos</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">.</span><span style="color: #DD0000">'[]'</span><span style="color: #007700">]=</span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$type</span><span style="color: #007700">.</span><span style="color: #DD0000">'Array'</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">processType</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">);<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">.</span><span style="color: #DD0000">'[]'</span><span style="color: #007700">];<br>    }<br>    else<br>    {    </span><span style="color: #FF8000">// process class / complex type<br>        </span><span style="color: #0000BB">$type</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">import</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>        </span><span style="color: #0000BB">$class</span><span style="color: #007700">=new </span><span style="color: #0000BB">ReflectionClass</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">);<br><br>        </span><span style="color: #0000BB">$comment</span><span style="color: #007700">=</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDocComment</span><span style="color: #007700">();<br>        </span><span style="color: #0000BB">$comment</span><span style="color: #007700">=</span><span style="color: #0000BB">strtr</span><span style="color: #007700">(</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,array(</span><span style="color: #DD0000">"\r\n"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,</span><span style="color: #DD0000">"\r"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">)); </span><span style="color: #FF8000">// make line endings consistent: win -&gt; unix, mac -&gt; unix<br>        </span><span style="color: #0000BB">$comment</span><span style="color: #007700">=</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^\s*\**(\s*?$|\s*)/m'</span><span style="color: #007700">,</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">);<br><br>        </span><span style="color: #FF8000">// extract soap indicator flag, if defined, e.g. @soap-indicator sequence<br>        // see http://www.w3schools.com/schema/schema_complex_indicators.asp<br>        </span><span style="color: #007700">if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^@soap-indicator\s+(\w+)\s*?(.*)$/im'</span><span style="color: #007700">, </span><span style="color: #0000BB">$comment</span><span style="color: #007700">, </span><span style="color: #0000BB">$matches</span><span style="color: #007700">))<br>        {<br>            </span><span style="color: #0000BB">$indicator</span><span style="color: #007700">=</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br>            </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWsdlElementAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]);<br>        }else{<br>            </span><span style="color: #0000BB">$indicator</span><span style="color: #007700">=</span><span style="color: #DD0000">'all'</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWsdlElementAttributes</span><span style="color: #007700">(</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br>        }<br><br>        </span><span style="color: #0000BB">$custom_wsdl</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>        if(</span><span style="color: #0000BB">preg_match_all</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^@soap-wsdl\s+(\S.*)$/im'</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">)&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$custom_wsdl</span><span style="color: #007700">=</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">, </span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br><br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">]=array(<br>            </span><span style="color: #DD0000">'indicator'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$indicator</span><span style="color: #007700">,<br>            </span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">],<br>            </span><span style="color: #DD0000">'minOccurs'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #DD0000">'minOccurs'</span><span style="color: #007700">],<br>            </span><span style="color: #DD0000">'maxOccurs'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #DD0000">'maxOccurs'</span><span style="color: #007700">],<br>            </span><span style="color: #DD0000">'custom_wsdl'</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$custom_wsdl</span><span style="color: #007700">,<br>            </span><span style="color: #DD0000">'properties'</span><span style="color: #007700">=&gt;array()<br>        );<br><br>        foreach(</span><span style="color: #0000BB">$class</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperties</span><span style="color: #007700">() as </span><span style="color: #0000BB">$property</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$comment</span><span style="color: #007700">=</span><span style="color: #0000BB">$property</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getDocComment</span><span style="color: #007700">();<br>            if(</span><span style="color: #0000BB">$property</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">isPublic</span><span style="color: #007700">() &amp;&amp; </span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #DD0000">'@soap'</span><span style="color: #007700">)!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>            {<br>                if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/@var\s+([\w\.]+(\[\s*\])?)\s*?(.*)$/mi'</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">))<br>                {<br>                    </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getWsdlElementAttributes</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br><br>                    if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/{(.+)}/'</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #0000BB">$attr</span><span style="color: #007700">))<br>                        </span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]=</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$attr</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],</span><span style="color: #DD0000">''</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]);<br><br>                    </span><span style="color: #FF8000">// extract PHPDoc @example<br>                    </span><span style="color: #0000BB">$example</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br>                    if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/@example[:]?(.+)/mi"</span><span style="color: #007700">,</span><span style="color: #0000BB">$comment</span><span style="color: #007700">,</span><span style="color: #0000BB">$match</span><span style="color: #007700">))<br>                        </span><span style="color: #0000BB">$example</span><span style="color: #007700">=</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$match</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br><br>                    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">types</span><span style="color: #007700">[</span><span style="color: #0000BB">$type</span><span style="color: #007700">][</span><span style="color: #DD0000">'properties'</span><span style="color: #007700">][</span><span style="color: #0000BB">$property</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getName</span><span style="color: #007700">()]=array(<br>                        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">processType</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]),<br>                        </span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">]),<br>                        </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #DD0000">'nillable'</span><span style="color: #007700">],<br>                        </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #DD0000">'minOccurs'</span><span style="color: #007700">],<br>                        </span><span style="color: #0000BB">$attributes</span><span style="color: #007700">[</span><span style="color: #DD0000">'maxOccurs'</span><span style="color: #007700">],<br>                        </span><span style="color: #0000BB">$example<br>                    </span><span style="color: #007700">); </span><span style="color: #FF8000">// name =&gt; type, doc, nillable, minOccurs, maxOccurs, example<br>                </span><span style="color: #007700">}<br>            }<br>        }<br>        return </span><span style="color: #DD0000">'tns:'</span><span style="color: #007700">.</span><span style="color: #0000BB">$type</span><span style="color: #007700">;<br>    }<br>}</span></pre> </div> <div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CWsdlGenerator" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CWsdlGenerator</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
