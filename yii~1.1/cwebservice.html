
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CWebService - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" actor of the SOAP service. Defaults to null, meaning not set. ">
  <meta name="keywords" content="cwebservice, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cwebservice.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/yii~1.1.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CWebService</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.web.services">system.web.services</a></td> </tr> <tr> <th>Inheritance</th> <td>class CWebService » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWebService.php">framework/web/services/CWebService.php</a></td> </tr> </table> <div id="classDescription"> CWebService encapsulates SoapServer and provides a WSDL-based web service. <br><br> PHP SOAP extension is required. <br><br> CWebService makes use of <a href="cwsdlgenerator">CWsdlGenerator</a> and can generate the WSDL on-the-fly without requiring you to write complex WSDL. However WSDL generator could be customized through <a href="cwebservice#generatorConfig">generatorConfig</a> property. <br><br> To generate the WSDL based on doc comment blocks in the service provider class, call <a href="cwebservice#generateWsdl">generateWsdl</a> or <a href="cwebservice#renderWsdl">renderWsdl</a>. To process the web service requests, call <a href="cwebservice#run">run</a>.</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="actor"> <td><a href="cwebservice#actor-detail">actor</a></td> <td>string</td> <td>actor of the SOAP service.</td> <td>CWebService</td> </tr> <tr id="cacheID"> <td><a href="cwebservice#cacheID-detail">cacheID</a></td> <td>string</td> <td>the ID of the cache application component that is used to cache the generated WSDL.</td> <td>CWebService</td> </tr> <tr id="classMap"> <td><a href="cwebservice#classMap-detail">classMap</a></td> <td>array</td> <td>a list of classes that are declared as complex types in WSDL.</td> <td>CWebService</td> </tr> <tr id="encoding"> <td><a href="cwebservice#encoding-detail">encoding</a></td> <td>string</td> <td>encoding of the Web service.</td> <td>CWebService</td> </tr> <tr id="generatorConfig"> <td><a href="cwebservice#generatorConfig-detail">generatorConfig</a></td> <td>string|array</td> <td>WSDL generator configuration.</td> <td>CWebService</td> </tr> <tr id="methodName"> <td><a href="cwebservice#methodName-detail">methodName</a></td> <td>string</td> <td>the currently requested method name.</td> <td>CWebService</td> </tr> <tr id="persistence"> <td><a href="cwebservice#persistence-detail">persistence</a></td> <td>integer</td> <td>the persistence mode of the SOAP server.</td> <td>CWebService</td> </tr> <tr id="provider"> <td><a href="cwebservice#provider-detail">provider</a></td> <td>string|object</td> <td>the web service provider class or object.</td> <td>CWebService</td> </tr> <tr id="serviceUrl"> <td><a href="cwebservice#serviceUrl-detail">serviceUrl</a></td> <td>string</td> <td>the URL for the Web service.</td> <td>CWebService</td> </tr> <tr id="soapVersion"> <td><a href="cwebservice#soapVersion-detail">soapVersion</a></td> <td>string</td> <td>SOAP version (e.g. '1.</td> <td>CWebService</td> </tr> <tr id="wsdlCacheDuration"> <td><a href="cwebservice#wsdlCacheDuration-detail">wsdlCacheDuration</a></td> <td>integer</td> <td>number of seconds that the generated WSDL can remain valid in cache.</td> <td>CWebService</td> </tr> <tr id="wsdlUrl"> <td><a href="cwebservice#wsdlUrl-detail">wsdlUrl</a></td> <td>string</td> <td>the URL for WSDL.</td> <td>CWebService</td> </tr> </table> </div> <div class="summary docProperty"> <h2>Protected Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="options"> <td><a href="cwebservice#options-detail">options</a></td> <td>array</td> <td>options for creating SoapServer instance</td> <td>CWebService</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="__call"> <td><a href="ccomponent#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="__construct"> <td><a href="cwebservice#__construct-detail">__construct()</a></td> <td>Constructor.</td> <td>CWebService</td> </tr> <tr class="inherited" id="__get"> <td><a href="ccomponent#__get-detail">__get()</a></td> <td>Returns a property value, an event handler list or a behavior based on its name.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__isset"> <td><a href="ccomponent#__isset-detail">__isset()</a></td> <td>Checks if a property value is null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__set"> <td><a href="ccomponent#__set-detail">__set()</a></td> <td>Sets value of a component property.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__unset"> <td><a href="ccomponent#__unset-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="generateWsdl"> <td><a href="cwebservice#generateWsdl-detail">generateWsdl()</a></td> <td>Generates the WSDL as defined by the provider.</td> <td>CWebService</td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="getMethodName"> <td><a href="cwebservice#getMethodName-detail">getMethodName()</a></td> <td>Returns the currently requested method name. Empty if no method is being requested.</td> <td>CWebService</td> </tr> <tr id="handleError"> <td><a href="cwebservice#handleError-detail">handleError()</a></td> <td>The PHP error handler.</td> <td>CWebService</td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="renderWsdl"> <td><a href="cwebservice#renderWsdl-detail">renderWsdl()</a></td> <td>Generates and displays the WSDL as defined by the provider.</td> <td>CWebService</td> </tr> <tr id="run"> <td><a href="cwebservice#run-detail">run()</a></td> <td>Handles the web service request.</td> <td>CWebService</td> </tr> </table> </div> <div class="summary docMethod"> <h2>Protected Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="getOptions"> <td><a href="cwebservice#getOptions-detail">getOptions()</a></td> <td>Returns options for creating SoapServer instance</td> <td>CWebService</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="actor-detail"> actor<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$actor</b>;</pre> <p>actor of the SOAP service. Defaults to null, meaning not set.</p> <h3 class="detailHeader" id="cacheID-detail"> cacheID<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$cacheID</b>;</pre> <p>the ID of the cache application component that is used to cache the generated WSDL. Defaults to 'cache' which refers to the primary cache application component. Set this property to false if you want to disable caching WSDL.</p> <h3 class="detailHeader" id="classMap-detail"> classMap<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <b>$classMap</b>;</pre> <p>a list of classes that are declared as complex types in WSDL. This should be an array with WSDL types as keys and names of PHP classes as values. A PHP class can also be specified as a path alias.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/soapserver.soapserver.php">http://www.php.net/manual/en/soapserver.soapserver.php</a></li> </ul> </div> <h3 class="detailHeader" id="encoding-detail"> encoding<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$encoding</b>;</pre> <p>encoding of the Web service. Defaults to 'UTF-8'.</p> <h3 class="detailHeader" id="generatorConfig-detail"> generatorConfig<span class="detailHeaderTag"> property (available since v1.1.12) </span> </h3> <pre class="signature">public string|array <b>$generatorConfig</b>;</pre> <p>WSDL generator configuration. This property may be useful in purpose of enhancing features of the standard <a href="cwsdlgenerator">CWsdlGenerator</a> class by extending it. For example, some developers may need support of the <code>xsd:xsd:base64Binary</code> elements. Another use case is to change initial values at instantiation of the default <a href="cwsdlgenerator">CWsdlGenerator</a>. The value of this property will be passed to <a href="yii#createComponent">Yii::createComponent</a> to create the generator object. Default value is 'CWsdlGenerator'.</p> <h3 class="detailHeader" id="methodName-detail"> methodName<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">public string <a href="cwebservice#getMethodName"><b>getMethodName</b></a>()</pre> <p>the currently requested method name. Empty if no method is being requested.</p> <h3 class="detailHeader" id="options-detail"> options<span class="detailHeaderTag"> property <em>read-only</em> </span> </h3> <pre class="signature">protected array <a href="cwebservice#getOptions"><b>getOptions</b></a>()</pre> <p>options for creating SoapServer instance</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/soapserver.soapserver.php">http://www.php.net/manual/en/soapserver.soapserver.php</a></li> </ul> </div> <h3 class="detailHeader" id="persistence-detail"> persistence<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <b>$persistence</b>;</pre> <p>the persistence mode of the SOAP server.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/soapserver.setpersistence.php">http://www.php.net/manual/en/soapserver.setpersistence.php</a></li> </ul> </div> <h3 class="detailHeader" id="provider-detail"> provider<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string|object <b>$provider</b>;</pre> <p>the web service provider class or object. If specified as a class name, it can be a path alias.</p> <h3 class="detailHeader" id="serviceUrl-detail"> serviceUrl<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$serviceUrl</b>;</pre> <p>the URL for the Web service. This is required by <a href="cwebservice#generateWsdl">generateWsdl()</a> and <a href="cwebservice#renderWsdl">renderWsdl()</a>.</p> <h3 class="detailHeader" id="soapVersion-detail"> soapVersion<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$soapVersion</b>;</pre> <p>SOAP version (e.g. '1.1' or '1.2'). Defaults to null, meaning not set.</p> <h3 class="detailHeader" id="wsdlCacheDuration-detail"> wsdlCacheDuration<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <b>$wsdlCacheDuration</b>;</pre> <p>number of seconds that the generated WSDL can remain valid in cache. Defaults to 0, meaning no caching.</p> <h3 class="detailHeader" id="wsdlUrl-detail"> wsdlUrl<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$wsdlUrl</b>;</pre> <p>the URL for WSDL. This is required by <a href="cwebservice#run">run()</a>.</p> <h2>Method Details</h2> <h3 class="detailHeader" id="__construct-detail"> __construct() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>__construct</b>(mixed $provider, string $wsdlUrl, string $serviceUrl)</pre> </td></tr> <tr> <td class="paramNameCol">$provider</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the web service provider class name or object</td> </tr> <tr> <td class="paramNameCol">$wsdlUrl</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the URL for WSDL. This is required by <a href="cwebservice#run">run()</a>.</td> </tr> <tr> <td class="paramNameCol">$serviceUrl</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the URL for the Web service. This is required by <a href="cwebservice#generateWsdl">generateWsdl()</a> and <a href="cwebservice#renderWsdl">renderWsdl()</a>.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWebService.php#L99">framework/web/services/CWebService.php#99</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$provider</span><span style="color: #007700">,</span><span style="color: #0000BB">$wsdlUrl</span><span style="color: #007700">,</span><span style="color: #0000BB">$serviceUrl</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">provider</span><span style="color: #007700">=</span><span style="color: #0000BB">$provider</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">wsdlUrl</span><span style="color: #007700">=</span><span style="color: #0000BB">$wsdlUrl</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceUrl</span><span style="color: #007700">=</span><span style="color: #0000BB">$serviceUrl</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Constructor.</p> <h3 class="detailHeader" id="generateWsdl-detail"> generateWsdl() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>generateWsdl</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the generated WSDL</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWebService.php#L142">framework/web/services/CWebService.php#142</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">generateWsdl</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$providerClass</span><span style="color: #007700">=</span><span style="color: #0000BB">is_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">provider</span><span style="color: #007700">) ? </span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">provider</span><span style="color: #007700">) : </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">import</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">provider</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">wsdlCacheDuration</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">0 </span><span style="color: #007700">&amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheID</span><span style="color: #007700">!==</span><span style="color: #0000BB">false </span><span style="color: #007700">&amp;&amp; (</span><span style="color: #0000BB">$cache</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">getComponent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cacheID</span><span style="color: #007700">))!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$key</span><span style="color: #007700">=</span><span style="color: #DD0000">'Yii.CWebService.'</span><span style="color: #007700">.</span><span style="color: #0000BB">$providerClass</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceUrl</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">encoding</span><span style="color: #007700">;<br>        if((</span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">=</span><span style="color: #0000BB">$cache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">get</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">))!==</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>            return </span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">;<br>    }<br>    </span><span style="color: #0000BB">$generator</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">createComponent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generatorConfig</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">=</span><span style="color: #0000BB">$generator</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generateWsdl</span><span style="color: #007700">(</span><span style="color: #0000BB">$providerClass</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">serviceUrl</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">encoding</span><span style="color: #007700">);<br>    if(isset(</span><span style="color: #0000BB">$key</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$cache</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">set</span><span style="color: #007700">(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,</span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">wsdlCacheDuration</span><span style="color: #007700">);<br>    return </span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Generates the WSDL as defined by the provider. The cached version may be used if the WSDL is found valid in cache.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebservice#wsdlCacheDuration">wsdlCacheDuration</a></li> </ul> </div> <h3 class="detailHeader" id="getMethodName-detail"> getMethodName() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public string <b>getMethodName</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the currently requested method name. Empty if no method is being requested.</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWebService.php#L236">framework/web/services/CWebService.php#236</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">getMethodName</span><span style="color: #007700">()<br>{<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_method</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #FF8000">// before PHP 5.6 php://input could be read only once<br>        // since PHP 5.6 $HTTP_RAW_POST_DATA is deprecated<br>        </span><span style="color: #007700">if(</span><span style="color: #0000BB">version_compare</span><span style="color: #007700">(</span><span style="color: #0000BB">PHP_VERSION</span><span style="color: #007700">, </span><span style="color: #DD0000">'5.6.0'</span><span style="color: #007700">, </span><span style="color: #DD0000">'&lt;'</span><span style="color: #007700">) &amp;&amp; isset(</span><span style="color: #0000BB">$HTTP_RAW_POST_DATA</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$request</span><span style="color: #007700">=</span><span style="color: #0000BB">$HTTP_RAW_POST_DATA</span><span style="color: #007700">;<br>        else<br>            </span><span style="color: #0000BB">$request</span><span style="color: #007700">=</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'php://input'</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/&lt;.*?:Body[^&gt;]*&gt;\s*&lt;.*?:(\w+)/mi'</span><span style="color: #007700">,</span><span style="color: #0000BB">$request</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_method</span><span style="color: #007700">=</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br>        else<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_method</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">_method</span><span style="color: #007700">;<br>}</span></pre> </div>  <h3 class="detailHeader" id="getOptions-detail"> getOptions() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">protected array <b>getOptions</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">options for creating SoapServer instance</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWebService.php#L258">framework/web/services/CWebService.php#258</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">protected function </span><span style="color: #0000BB">getOptions</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$options</span><span style="color: #007700">=array();<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">soapVersion</span><span style="color: #007700">===</span><span style="color: #DD0000">'1.1'</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'soap_version'</span><span style="color: #007700">]=</span><span style="color: #0000BB">SOAP_1_1</span><span style="color: #007700">;<br>    elseif(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">soapVersion</span><span style="color: #007700">===</span><span style="color: #DD0000">'1.2'</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'soap_version'</span><span style="color: #007700">]=</span><span style="color: #0000BB">SOAP_1_2</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">actor</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'actor'</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">actor</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'encoding'</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">encoding</span><span style="color: #007700">;<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">classMap </span><span style="color: #007700">as </span><span style="color: #0000BB">$type</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$className</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$className</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">import</span><span style="color: #007700">(</span><span style="color: #0000BB">$className</span><span style="color: #007700">,</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">is_int</span><span style="color: #007700">(</span><span style="color: #0000BB">$type</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$type</span><span style="color: #007700">=</span><span style="color: #0000BB">$className</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$options</span><span style="color: #007700">[</span><span style="color: #DD0000">'classmap'</span><span style="color: #007700">][</span><span style="color: #0000BB">$type</span><span style="color: #007700">]=</span><span style="color: #0000BB">$className</span><span style="color: #007700">;<br>    }<br>    return </span><span style="color: #0000BB">$options</span><span style="color: #007700">;<br>}</span></pre> </div>  <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="http://www.php.net/manual/en/soapserver.soapserver.php">http://www.php.net/manual/en/soapserver.soapserver.php</a></li> </ul> </div> <h3 class="detailHeader" id="handleError-detail"> handleError() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>handleError</b>(<a href="cerrorevent">CErrorEvent</a> $event)</pre> </td></tr> <tr> <td class="paramNameCol">$event</td> <td class="paramTypeCol"><a href="cerrorevent">CErrorEvent</a></td> <td class="paramDescCol">the PHP error event</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWebService.php#L111">framework/web/services/CWebService.php#111</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">handleError</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">handled</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$event</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">message</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">YII_DEBUG</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$trace</span><span style="color: #007700">=</span><span style="color: #0000BB">debug_backtrace</span><span style="color: #007700">();<br>        if(isset(</span><span style="color: #0000BB">$trace</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]) &amp;&amp; isset(</span><span style="color: #0000BB">$trace</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">'file'</span><span style="color: #007700">]) &amp;&amp; isset(</span><span style="color: #0000BB">$trace</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">'line'</span><span style="color: #007700">]))<br>            </span><span style="color: #0000BB">$message</span><span style="color: #007700">.=</span><span style="color: #DD0000">' ('</span><span style="color: #007700">.</span><span style="color: #0000BB">$trace</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">'file'</span><span style="color: #007700">].</span><span style="color: #DD0000">':'</span><span style="color: #007700">.</span><span style="color: #0000BB">$trace</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">][</span><span style="color: #DD0000">'line'</span><span style="color: #007700">].</span><span style="color: #DD0000">')'</span><span style="color: #007700">;<br>    }<br>    throw new </span><span style="color: #0000BB">CException</span><span style="color: #007700">(</span><span style="color: #0000BB">$message</span><span style="color: #007700">,</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">SOAP_ERROR</span><span style="color: #007700">);<br>}</span></pre> </div> <p>The PHP error handler.</p> <h3 class="detailHeader" id="renderWsdl-detail"> renderWsdl() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>renderWsdl</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWebService.php#L128">framework/web/services/CWebService.php#128</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">renderWsdl</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generateWsdl</span><span style="color: #007700">();<br>    </span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Type: text/xml;charset='</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">encoding</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Length: '</span><span style="color: #007700">.(</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'mb_strlen'</span><span style="color: #007700">) ? </span><span style="color: #0000BB">mb_strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">,</span><span style="color: #DD0000">'8bit'</span><span style="color: #007700">) : </span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">)));<br>    echo </span><span style="color: #0000BB">$wsdl</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Generates and displays the WSDL as defined by the provider.</p> <div class="SeeAlso"> <h4>See Also</h4> <ul> <li><a href="cwebservice#generateWsdl">generateWsdl</a></li> </ul> </div> <h3 class="detailHeader" id="run-detail"> run() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>run</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/web/services/CWebService.php#L161">framework/web/services/CWebService.php#161</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">run</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Type: text/xml;charset='</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">encoding</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">YII_DEBUG</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">ini_set</span><span style="color: #007700">(</span><span style="color: #DD0000">"soap.wsdl_cache_enabled"</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$server</span><span style="color: #007700">=new </span><span style="color: #0000BB">SoapServer</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">wsdlUrl</span><span style="color: #007700">,</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOptions</span><span style="color: #007700">());<br>    </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">attachEventHandler</span><span style="color: #007700">(</span><span style="color: #DD0000">'onError'</span><span style="color: #007700">,array(</span><span style="color: #0000BB">$this</span><span style="color: #007700">,</span><span style="color: #DD0000">'handleError'</span><span style="color: #007700">));<br>    try<br>    {<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">persistence</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setPersistence</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">persistence</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">provider</span><span style="color: #007700">))<br>            </span><span style="color: #0000BB">$provider</span><span style="color: #007700">=</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">createComponent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">provider</span><span style="color: #007700">);<br>        else<br>            </span><span style="color: #0000BB">$provider</span><span style="color: #007700">=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">provider</span><span style="color: #007700">;<br><br>        if(</span><span style="color: #0000BB">method_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$server</span><span style="color: #007700">,</span><span style="color: #DD0000">'setObject'</span><span style="color: #007700">))<br>        {<br>            if (</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generatorConfig</span><span style="color: #007700">) &amp;&amp; isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generatorConfig</span><span style="color: #007700">[</span><span style="color: #DD0000">'bindingStyle'</span><span style="color: #007700">])<br>                &amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generatorConfig</span><span style="color: #007700">[</span><span style="color: #DD0000">'bindingStyle'</span><span style="color: #007700">]===</span><span style="color: #DD0000">'document'</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setObject</span><span style="color: #007700">(new </span><span style="color: #0000BB">CDocumentSoapObjectWrapper</span><span style="color: #007700">(</span><span style="color: #0000BB">$provider</span><span style="color: #007700">));<br>            }<br>            else<br>            {<br>                </span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setObject</span><span style="color: #007700">(</span><span style="color: #0000BB">$provider</span><span style="color: #007700">);<br>            }<br>        }<br>        else<br>        {<br>            if (</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generatorConfig</span><span style="color: #007700">) &amp;&amp; isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generatorConfig</span><span style="color: #007700">[</span><span style="color: #DD0000">'bindingStyle'</span><span style="color: #007700">])<br>                &amp;&amp; </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">generatorConfig</span><span style="color: #007700">[</span><span style="color: #DD0000">'bindingStyle'</span><span style="color: #007700">]===</span><span style="color: #DD0000">'document'</span><span style="color: #007700">)<br>            {<br>                </span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setClass</span><span style="color: #007700">(</span><span style="color: #DD0000">'CDocumentSoapObjectWrapper'</span><span style="color: #007700">,</span><span style="color: #0000BB">$provider</span><span style="color: #007700">);<br>            }<br>            else<br>            {<br>                </span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setClass</span><span style="color: #007700">(</span><span style="color: #DD0000">'CSoapObjectWrapper'</span><span style="color: #007700">,</span><span style="color: #0000BB">$provider</span><span style="color: #007700">);<br>            }<br>        }<br><br>        if(</span><span style="color: #0000BB">$provider </span><span style="color: #007700">instanceof </span><span style="color: #0000BB">IWebServiceProvider</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">$provider</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beforeWebMethod</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">))<br>            {<br>                </span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">handle</span><span style="color: #007700">();<br>                </span><span style="color: #0000BB">$provider</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">afterWebMethod</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>            }<br>        }<br>        else<br>            </span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">handle</span><span style="color: #007700">();<br>    }<br>    catch(</span><span style="color: #0000BB">Exception $e</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getCode</span><span style="color: #007700">()!==</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">SOAP_ERROR</span><span style="color: #007700">) </span><span style="color: #FF8000">// non-PHP error<br>        </span><span style="color: #007700">{<br>            </span><span style="color: #FF8000">// only log for non-PHP-error case because application's error handler already logs it<br>            // php &lt;5.2 doesn't support string conversion auto-magically<br>            </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">log</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">__toString</span><span style="color: #007700">(),</span><span style="color: #0000BB">CLogger</span><span style="color: #007700">::</span><span style="color: #0000BB">LEVEL_ERROR</span><span style="color: #007700">,</span><span style="color: #DD0000">'application'</span><span style="color: #007700">);<br>        }<br>        </span><span style="color: #0000BB">$message</span><span style="color: #007700">=</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br>        if(</span><span style="color: #0000BB">YII_DEBUG</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$message</span><span style="color: #007700">.=</span><span style="color: #DD0000">' ('</span><span style="color: #007700">.</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getFile</span><span style="color: #007700">().</span><span style="color: #DD0000">':'</span><span style="color: #007700">.</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getLine</span><span style="color: #007700">().</span><span style="color: #DD0000">")\n"</span><span style="color: #007700">.</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getTraceAsString</span><span style="color: #007700">();<br><br>        </span><span style="color: #FF8000">// We need to end application explicitly because of<br>        // http://bugs.php.net/bug.php?id=49513<br>        </span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">app</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">onEndRequest</span><span style="color: #007700">(new </span><span style="color: #0000BB">CEvent</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">));<br>        </span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fault</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">),</span><span style="color: #0000BB">$message</span><span style="color: #007700">);<br>        exit(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br>    }<br>}</span></pre> </div> <p>Handles the web service request.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CWebService" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CWebService</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
