
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CDbCriteria - Yii 1.1 - W3cubDocs</title>
  
  <meta name="description" content=" the alias name of the table. If not set, it means the alias is &#39;t&#39;. ">
  <meta name="keywords" content="cdbcriteria, yii, yii~1.1">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/yii~1.1/cdbcriteria.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/yii~1.1.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/yii~1.1/" class="_nav-link" title="" style="margin-left:0;">Yii 1.1</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _yii">
				
				
<h1>CDbCriteria</h1>  <table class="summaryTable docClass"> <colgroup> <col class="col-name"> <col class="col-value"> </colgroup> <tr> <th>Package</th> <td><a href="index#system.db.schema">system.db.schema</a></td> </tr> <tr> <th>Inheritance</th> <td>class CDbCriteria » <a href="ccomponent">CComponent</a>
</td> </tr> <tr> <th>Since</th> <td>1.0</td> </tr> <tr> <th>Source Code</th> <td><a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php">framework/db/schema/CDbCriteria.php</a></td> </tr> </table> <div id="classDescription"> CDbCriteria represents a query criteria, such as conditions, ordering by, limit/offset. <br><br> It can be used in AR query methods such as CActiveRecord::find and CActiveRecord::findAll. <br><br> $criteria=new CDbCriteria(); $criteria-&gt;compare('status',Post::STATUS_ACTIVE); $criteria-&gt;addInCondition('id',array(1,2,3,4,5,6)); <br><br> $posts = Post::model()-&gt;findAll($criteria);</div>  <div class="summary docProperty"> <h2>Public Properties</h2>  <table class="summaryTable"> <colgroup> <col class="col-property"> <col class="col-type"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr id="alias"> <td><a href="cdbcriteria#alias-detail">alias</a></td> <td>string</td> <td>the alias name of the table.</td> <td>CDbCriteria</td> </tr> <tr id="condition"> <td><a href="cdbcriteria#condition-detail">condition</a></td> <td>string</td> <td>query condition.</td> <td>CDbCriteria</td> </tr> <tr id="distinct"> <td><a href="cdbcriteria#distinct-detail">distinct</a></td> <td>boolean</td> <td>whether to select distinct rows of data only.</td> <td>CDbCriteria</td> </tr> <tr id="group"> <td><a href="cdbcriteria#group-detail">group</a></td> <td>string</td> <td>how to group the query results.</td> <td>CDbCriteria</td> </tr> <tr id="having"> <td><a href="cdbcriteria#having-detail">having</a></td> <td>string</td> <td>the condition to be applied with GROUP-BY clause.</td> <td>CDbCriteria</td> </tr> <tr id="index"> <td><a href="cdbcriteria#index-detail">index</a></td> <td>string</td> <td>the name of the AR attribute whose value should be used as index of the query result array.</td> <td>CDbCriteria</td> </tr> <tr id="join"> <td><a href="cdbcriteria#join-detail">join</a></td> <td>string</td> <td>how to join with other tables.</td> <td>CDbCriteria</td> </tr> <tr id="limit"> <td><a href="cdbcriteria#limit-detail">limit</a></td> <td>integer</td> <td>maximum number of records to be returned.</td> <td>CDbCriteria</td> </tr> <tr id="offset"> <td><a href="cdbcriteria#offset-detail">offset</a></td> <td>integer</td> <td>zero-based offset from where the records are to be returned.</td> <td>CDbCriteria</td> </tr> <tr id="order"> <td><a href="cdbcriteria#order-detail">order</a></td> <td>string</td> <td>how to sort the query results.</td> <td>CDbCriteria</td> </tr> <tr id="paramCount"> <td><a href="cdbcriteria#paramCount-detail">paramCount</a></td> <td>integer</td> <td>the global counter for anonymous binding parameters.</td> <td>CDbCriteria</td> </tr> <tr id="params"> <td><a href="cdbcriteria#params-detail">params</a></td> <td>array</td> <td>list of query parameter values indexed by parameter placeholders.</td> <td>CDbCriteria</td> </tr> <tr id="scopes"> <td><a href="cdbcriteria#scopes-detail">scopes</a></td> <td>mixed</td> <td>scopes to apply <br><br> This property is effective only when passing criteria to the one of the following methods: <ul> <li><a href="cactiverecord#find">CActiveRecord::find()</a></li> <li><a href="cactiverecord#findAll">CActiveRecord::findAll()</a></li> <li><a href="cactiverecord#findByPk">CActiveRecord::findByPk()</a></li> <li><a href="cactiverecord#findAllByPk">CActiveRecord::findAllByPk()</a></li> <li><a href="cactiverecord#findByAttributes">CActiveRecord::findByAttributes()</a></li> <li><a href="cactiverecord#findAllByAttributes">CActiveRecord::findAllByAttributes()</a></li> <li><a href="cactiverecord#count">CActiveRecord::count()</a></li> </ul> <br><br> Can be set to one of the following: <ul> <li>One scope: $criteria-&gt;scopes='scopeName';</li> <li>Multiple scopes: $criteria-&gt;scopes=array('scopeName1','scopeName2');</li> <li>Scope with parameters: $criteria-&gt;scopes=array('scopeName'=&gt;array($params));</li> <li>Multiple scopes with parameters: $criteria-&gt;scopes=array('scopeName1'=&gt;array($params1),'scopeName2'=&gt;array($params2));</li> <li>Multiple scopes with the same name: array(array('scopeName'=&gt;array($params1)),array('scopeName'=&gt;array($params2)));</li> </ul>
</td> <td>CDbCriteria</td> </tr> <tr id="select"> <td><a href="cdbcriteria#select-detail">select</a></td> <td>mixed</td> <td>the columns being selected.</td> <td>CDbCriteria</td> </tr> <tr id="together"> <td><a href="cdbcriteria#together-detail">together</a></td> <td>boolean</td> <td>whether the foreign tables should be joined with the primary table in a single SQL.</td> <td>CDbCriteria</td> </tr> <tr id="with"> <td><a href="cdbcriteria#with-detail">with</a></td> <td>mixed</td> <td>the relational query criteria.</td> <td>CDbCriteria</td> </tr> </table> </div>  <div class="summary docMethod"> <h2>Public Methods</h2>  <table class="summaryTable"> <colgroup> <col class="col-method"> <col class="col-description"> <col class="col-defined"> </colgroup> <tr> <th>Method</th>
<th>Description</th>
<th>Defined By</th> </tr> <tr class="inherited" id="__call"> <td><a href="ccomponent#__call-detail">__call()</a></td> <td>Calls the named method which is not a class method.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="__construct"> <td><a href="cdbcriteria#__construct-detail">__construct()</a></td> <td>Constructor.</td> <td>CDbCriteria</td> </tr> <tr class="inherited" id="__get"> <td><a href="ccomponent#__get-detail">__get()</a></td> <td>Returns a property value, an event handler list or a behavior based on its name.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__isset"> <td><a href="ccomponent#__isset-detail">__isset()</a></td> <td>Checks if a property value is null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__set"> <td><a href="ccomponent#__set-detail">__set()</a></td> <td>Sets value of a component property.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="__unset"> <td><a href="ccomponent#__unset-detail">__unset()</a></td> <td>Sets a component property to be null.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="__wakeup"> <td><a href="cdbcriteria#__wakeup-detail">__wakeup()</a></td> <td>Remaps criteria parameters on unserialize to prevent name collisions.</td> <td>CDbCriteria</td> </tr> <tr id="addBetweenCondition"> <td><a href="cdbcriteria#addBetweenCondition-detail">addBetweenCondition()</a></td> <td>Adds a between condition to the <a href="cdbcriteria#condition">condition</a> property.</td> <td>CDbCriteria</td> </tr> <tr id="addColumnCondition"> <td><a href="cdbcriteria#addColumnCondition-detail">addColumnCondition()</a></td> <td>Appends a condition for matching the given list of column values.</td> <td>CDbCriteria</td> </tr> <tr id="addCondition"> <td><a href="cdbcriteria#addCondition-detail">addCondition()</a></td> <td>Appends a condition to the existing <a href="cdbcriteria#condition">condition</a>.</td> <td>CDbCriteria</td> </tr> <tr id="addInCondition"> <td><a href="cdbcriteria#addInCondition-detail">addInCondition()</a></td> <td>Appends an IN condition to the existing <a href="cdbcriteria#condition">condition</a>.</td> <td>CDbCriteria</td> </tr> <tr id="addNotInCondition"> <td><a href="cdbcriteria#addNotInCondition-detail">addNotInCondition()</a></td> <td>Appends an NOT IN condition to the existing <a href="cdbcriteria#condition">condition</a>.</td> <td>CDbCriteria</td> </tr> <tr id="addSearchCondition"> <td><a href="cdbcriteria#addSearchCondition-detail">addSearchCondition()</a></td> <td>Appends a search condition to the existing <a href="cdbcriteria#condition">condition</a>.</td> <td>CDbCriteria</td> </tr> <tr class="inherited" id="asa"> <td><a href="ccomponent#asa-detail">asa()</a></td> <td>Returns the named behavior object.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehavior"> <td><a href="ccomponent#attachBehavior-detail">attachBehavior()</a></td> <td>Attaches a behavior to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachBehaviors"> <td><a href="ccomponent#attachBehaviors-detail">attachBehaviors()</a></td> <td>Attaches a list of behaviors to the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="attachEventHandler"> <td><a href="ccomponent#attachEventHandler-detail">attachEventHandler()</a></td> <td>Attaches an event handler to an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canGetProperty"> <td><a href="ccomponent#canGetProperty-detail">canGetProperty()</a></td> <td>Determines whether a property can be read.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="canSetProperty"> <td><a href="ccomponent#canSetProperty-detail">canSetProperty()</a></td> <td>Determines whether a property can be set.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="compare"> <td><a href="cdbcriteria#compare-detail">compare()</a></td> <td>Adds a comparison expression to the <a href="cdbcriteria#condition">condition</a> property.</td> <td>CDbCriteria</td> </tr> <tr class="inherited" id="detachBehavior"> <td><a href="ccomponent#detachBehavior-detail">detachBehavior()</a></td> <td>Detaches a behavior from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachBehaviors"> <td><a href="ccomponent#detachBehaviors-detail">detachBehaviors()</a></td> <td>Detaches all behaviors from the component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="detachEventHandler"> <td><a href="ccomponent#detachEventHandler-detail">detachEventHandler()</a></td> <td>Detaches an existing event handler.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehavior"> <td><a href="ccomponent#disableBehavior-detail">disableBehavior()</a></td> <td>Disables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="disableBehaviors"> <td><a href="ccomponent#disableBehaviors-detail">disableBehaviors()</a></td> <td>Disables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehavior"> <td><a href="ccomponent#enableBehavior-detail">enableBehavior()</a></td> <td>Enables an attached behavior.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="enableBehaviors"> <td><a href="ccomponent#enableBehaviors-detail">enableBehaviors()</a></td> <td>Enables all behaviors attached to this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="evaluateExpression"> <td><a href="ccomponent#evaluateExpression-detail">evaluateExpression()</a></td> <td>Evaluates a PHP expression or callback under the context of this component.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="getEventHandlers"> <td><a href="ccomponent#getEventHandlers-detail">getEventHandlers()</a></td> <td>Returns the list of attached event handlers for an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEvent"> <td><a href="ccomponent#hasEvent-detail">hasEvent()</a></td> <td>Determines whether an event is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasEventHandler"> <td><a href="ccomponent#hasEventHandler-detail">hasEventHandler()</a></td> <td>Checks whether the named event has attached handlers.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr class="inherited" id="hasProperty"> <td><a href="ccomponent#hasProperty-detail">hasProperty()</a></td> <td>Determines whether a property is defined.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="mergeWith"> <td><a href="cdbcriteria#mergeWith-detail">mergeWith()</a></td> <td>Merges with another criteria.</td> <td>CDbCriteria</td> </tr> <tr class="inherited" id="raiseEvent"> <td><a href="ccomponent#raiseEvent-detail">raiseEvent()</a></td> <td>Raises an event.</td> <td><a href="ccomponent">CComponent</a></td> </tr> <tr id="toArray"> <td><a href="cdbcriteria#toArray-detail">toArray()</a></td> <td></td> <td>CDbCriteria</td> </tr> </table> </div>  <h2>Property Details</h2> <h3 class="detailHeader" id="alias-detail"> alias<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$alias</b>;</pre> <p>the alias name of the table. If not set, it means the alias is 't'.</p> <h3 class="detailHeader" id="condition-detail"> condition<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$condition</b>;</pre> <p>query condition. This refers to the WHERE clause in an SQL statement. For example, <code>age&gt;31 AND team=1</code>.</p> <h3 class="detailHeader" id="distinct-detail"> distinct<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public boolean <b>$distinct</b>;</pre> <p>whether to select distinct rows of data only. If this is set true, the SELECT clause would be changed to SELECT DISTINCT.</p> <h3 class="detailHeader" id="group-detail"> group<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$group</b>;</pre> <p>how to group the query results. This refers to the GROUP BY clause in an SQL statement. For example, <code>'projectID, teamID'</code>.</p> <h3 class="detailHeader" id="having-detail"> having<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$having</b>;</pre> <p>the condition to be applied with GROUP-BY clause. For example, <code>'SUM(revenue)&lt;50000'</code>.</p> <h3 class="detailHeader" id="index-detail"> index<span class="detailHeaderTag"> property (available since v1.1.5) </span> </h3> <pre class="signature">public string <b>$index</b>;</pre> <p>the name of the AR attribute whose value should be used as index of the query result array. Defaults to null, meaning the result array will be zero-based integers.</p> <h3 class="detailHeader" id="join-detail"> join<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$join</b>;</pre> <p>how to join with other tables. This refers to the JOIN clause in an SQL statement. For example, <code>'LEFT JOIN users ON users.id=authorID'</code>.</p> <h3 class="detailHeader" id="limit-detail"> limit<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <b>$limit</b>;</pre> <p>maximum number of records to be returned. If less than 0, it means no limit.</p> <h3 class="detailHeader" id="offset-detail"> offset<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public integer <b>$offset</b>;</pre> <p>zero-based offset from where the records are to be returned. If less than 0, it means starting from the beginning.</p> <h3 class="detailHeader" id="order-detail"> order<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public string <b>$order</b>;</pre> <p>how to sort the query results. This refers to the ORDER BY clause in an SQL statement.</p> <h3 class="detailHeader" id="paramCount-detail"> paramCount<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public static integer <b>$paramCount</b>;</pre> <p>the global counter for anonymous binding parameters. This counter is used for generating the name for the anonymous parameters.</p> <h3 class="detailHeader" id="params-detail"> params<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public array <b>$params</b>;</pre> <p>list of query parameter values indexed by parameter placeholders. For example, <code>array(':name'=&gt;'Dan', ':age'=&gt;31)</code>.</p> <h3 class="detailHeader" id="scopes-detail"> scopes<span class="detailHeaderTag"> property (available since v1.1.7) </span> </h3> <pre class="signature">public mixed <b>$scopes</b>;</pre> <p>scopes to apply <br><br> This property is effective only when passing criteria to the one of the following methods: </p>
<ul> <li><a href="cactiverecord#find">CActiveRecord::find()</a></li> <li><a href="cactiverecord#findAll">CActiveRecord::findAll()</a></li> <li><a href="cactiverecord#findByPk">CActiveRecord::findByPk()</a></li> <li><a href="cactiverecord#findAllByPk">CActiveRecord::findAllByPk()</a></li> <li><a href="cactiverecord#findByAttributes">CActiveRecord::findByAttributes()</a></li> <li><a href="cactiverecord#findAllByAttributes">CActiveRecord::findAllByAttributes()</a></li> <li><a href="cactiverecord#count">CActiveRecord::count()</a></li> </ul> <br><br> Can be set to one of the following: <ul> <li>One scope: $criteria-&gt;scopes='scopeName';</li> <li>Multiple scopes: $criteria-&gt;scopes=array('scopeName1','scopeName2');</li> <li>Scope with parameters: $criteria-&gt;scopes=array('scopeName'=&gt;array($params));</li> <li>Multiple scopes with parameters: $criteria-&gt;scopes=array('scopeName1'=&gt;array($params1),'scopeName2'=&gt;array($params2));</li> <li>Multiple scopes with the same name: array(array('scopeName'=&gt;array($params1)),array('scopeName'=&gt;array($params2)));</li> </ul> <h3 class="detailHeader" id="select-detail"> select<span class="detailHeaderTag"> property </span> </h3> <pre class="signature">public mixed <b>$select</b>;</pre> <p>the columns being selected. This refers to the SELECT clause in an SQL statement. The property can be either a string (column names separated by commas) or an array of column names. Defaults to '*', meaning all columns.</p> <h3 class="detailHeader" id="together-detail"> together<span class="detailHeaderTag"> property (available since v1.1.4) </span> </h3> <pre class="signature">public boolean <b>$together</b>;</pre> <p>whether the foreign tables should be joined with the primary table in a single SQL. This property is only used in relational AR queries for HAS_MANY and MANY_MANY relations. <br><br> When this property is set true, only a single SQL will be executed for a relational AR query, even if the primary table is limited and the relationship between a foreign table and the primary table is many-to-one. <br><br> When this property is set false, a SQL statement will be executed for each HAS_MANY relation. <br><br> When this property is not set, if the primary table is limited or paginated, a SQL statement will be executed for each HAS_MANY relation. Otherwise, a single SQL statement will be executed for all.</p> <h3 class="detailHeader" id="with-detail"> with<span class="detailHeaderTag"> property (available since v1.1.0) </span> </h3> <pre class="signature">public mixed <b>$with</b>;</pre> <p>the relational query criteria. This is used for fetching related objects in eager loading fashion. This property is effective only when the criteria is passed as a parameter to the following methods of CActiveRecord: </p>
<ul> <li><a href="cactiverecord#find">CActiveRecord::find()</a></li> <li><a href="cactiverecord#findAll">CActiveRecord::findAll()</a></li> <li><a href="cactiverecord#findByPk">CActiveRecord::findByPk()</a></li> <li><a href="cactiverecord#findAllByPk">CActiveRecord::findAllByPk()</a></li> <li><a href="cactiverecord#findByAttributes">CActiveRecord::findByAttributes()</a></li> <li><a href="cactiverecord#findAllByAttributes">CActiveRecord::findAllByAttributes()</a></li> <li><a href="cactiverecord#count">CActiveRecord::count()</a></li> </ul> The property value will be used as the parameter to the <a href="cactiverecord#with">CActiveRecord::with()</a> method to perform the eager loading. Please refer to <a href="cactiverecord#with">CActiveRecord::with()</a> on how to specify this parameter. <h2>Method Details</h2> <h3 class="detailHeader" id="__construct-detail"> __construct() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>__construct</b>(array $data=array ( ))</pre> </td></tr> <tr> <td class="paramNameCol">$data</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">criteria initial property values (indexed by property name)</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L157">framework/db/schema/CDbCriteria.php#157</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">=array())<br>{<br>    foreach(</span><span style="color: #0000BB">$data </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Constructor.</p> <h3 class="detailHeader" id="__wakeup-detail"> __wakeup() <span class="detailHeaderTag"> method (available since v1.1.9) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>__wakeup</b>()</pre> </td></tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L167">framework/db/schema/CDbCriteria.php#167</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">__wakeup</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$map</span><span style="color: #007700">=array();<br>    </span><span style="color: #0000BB">$params</span><span style="color: #007700">=array();<br>    foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">,</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">)===</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$newName</span><span style="color: #007700">=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++;<br>            </span><span style="color: #0000BB">$map</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$newName</span><span style="color: #007700">;<br>        }<br>        else<br>        {<br>            </span><span style="color: #0000BB">$newName</span><span style="color: #007700">=</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>        }<br>        </span><span style="color: #0000BB">$params</span><span style="color: #007700">[</span><span style="color: #0000BB">$newName</span><span style="color: #007700">]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>    }<br>    if (!empty(</span><span style="color: #0000BB">$map</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$sqlContentFieldNames</span><span style="color: #007700">=array(<br>            </span><span style="color: #DD0000">'select'</span><span style="color: #007700">,<br>            </span><span style="color: #DD0000">'condition'</span><span style="color: #007700">,<br>            </span><span style="color: #DD0000">'order'</span><span style="color: #007700">,<br>            </span><span style="color: #DD0000">'group'</span><span style="color: #007700">,<br>            </span><span style="color: #DD0000">'join'</span><span style="color: #007700">,<br>            </span><span style="color: #DD0000">'having'</span><span style="color: #007700">,<br>        );<br>        foreach(</span><span style="color: #0000BB">$sqlContentFieldNames </span><span style="color: #007700">as </span><span style="color: #0000BB">$field</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$field</span><span style="color: #007700">))<br>                foreach(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$field </span><span style="color: #007700">as </span><span style="color: #0000BB">$k</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)<br>                    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;{</span><span style="color: #0000BB">$field</span><span style="color: #007700">}[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]=</span><span style="color: #0000BB">strtr</span><span style="color: #007700">(</span><span style="color: #0000BB">$v</span><span style="color: #007700">,</span><span style="color: #0000BB">$map</span><span style="color: #007700">);<br>            else<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$field</span><span style="color: #007700">=</span><span style="color: #0000BB">strtr</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$field</span><span style="color: #007700">,</span><span style="color: #0000BB">$map</span><span style="color: #007700">);<br>        }<br>    }<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">=</span><span style="color: #0000BB">$params</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Remaps criteria parameters on unserialize to prevent name collisions.</p> <h3 class="detailHeader" id="addBetweenCondition-detail"> addBetweenCondition() <span class="detailHeaderTag"> method (available since v1.1.2) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>addBetweenCondition</b>(string $column, string $valueStart, string $valueEnd, string $operator='AND')</pre> </td></tr> <tr> <td class="paramNameCol">$column</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the name of the column to search between.</td> </tr> <tr> <td class="paramNameCol">$valueStart</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the beginning value to start the between search.</td> </tr> <tr> <td class="paramNameCol">$valueEnd</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the ending value to end the between search.</td> </tr> <tr> <td class="paramNameCol">$operator</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the operator used to concatenate the new condition with the existing one. Defaults to 'AND'.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the criteria object itself</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L468">framework/db/schema/CDbCriteria.php#468</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">addBetweenCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$column</span><span style="color: #007700">,</span><span style="color: #0000BB">$valueStart</span><span style="color: #007700">,</span><span style="color: #0000BB">$valueEnd</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">=</span><span style="color: #DD0000">'AND'</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$valueStart</span><span style="color: #007700">===</span><span style="color: #DD0000">'' </span><span style="color: #007700">|| </span><span style="color: #0000BB">$valueEnd</span><span style="color: #007700">===</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$paramStart</span><span style="color: #007700">=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++;<br>    </span><span style="color: #0000BB">$paramEnd</span><span style="color: #007700">=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">[</span><span style="color: #0000BB">$paramStart</span><span style="color: #007700">]=</span><span style="color: #0000BB">$valueStart</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">[</span><span style="color: #0000BB">$paramEnd</span><span style="color: #007700">]=</span><span style="color: #0000BB">$valueEnd</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$column</span><span style="color: #DD0000"> BETWEEN </span><span style="color: #0000BB">$paramStart</span><span style="color: #DD0000"> AND </span><span style="color: #0000BB">$paramEnd</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br><br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Adds a between condition to the <a href="cdbcriteria#condition">condition</a> property. <br><br> The new between condition and the existing condition will be concatenated via the specified operator which defaults to 'AND'. If one or both values are empty then the condition is not added to the existing condition. This method handles the case when the existing condition is empty. After calling this method, the <a href="cdbcriteria#condition">condition</a> property will be modified.</p> <h3 class="detailHeader" id="addColumnCondition-detail"> addColumnCondition() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>addColumnCondition</b>(array $columns, string $columnOperator='AND', string $operator='AND')</pre> </td></tr> <tr> <td class="paramNameCol">$columns</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of column names and values to be matched (name=&gt;value)</td> </tr> <tr> <td class="paramNameCol">$columnOperator</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the operator to concatenate multiple column matching condition. Defaults to 'AND'.</td> </tr> <tr> <td class="paramNameCol">$operator</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the operator used to concatenate the new condition with the existing one. Defaults to 'AND'.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the criteria object itself</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L354">framework/db/schema/CDbCriteria.php#354</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">addColumnCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$columns</span><span style="color: #007700">,</span><span style="color: #0000BB">$columnOperator</span><span style="color: #007700">=</span><span style="color: #DD0000">'AND'</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">=</span><span style="color: #DD0000">'AND'</span><span style="color: #007700">)<br>{<br>    </span><span style="color: #0000BB">$params</span><span style="color: #007700">=array();<br>    foreach(</span><span style="color: #0000BB">$columns </span><span style="color: #007700">as </span><span style="color: #0000BB">$name</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$params</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$name</span><span style="color: #007700">.</span><span style="color: #DD0000">' IS NULL'</span><span style="color: #007700">;<br>        else<br>        {<br>            </span><span style="color: #0000BB">$params</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$name</span><span style="color: #007700">.</span><span style="color: #DD0000">'='</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">[</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>        }<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">" </span><span style="color: #0000BB">$columnOperator</span><span style="color: #DD0000"> "</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">), </span><span style="color: #0000BB">$operator</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Appends a condition for matching the given list of column values. The generated condition will be concatenated to the existing <a href="cdbcriteria#condition">condition</a> via the specified operator which defaults to 'AND'. The condition is generated by matching each column and the corresponding value.</p> <h3 class="detailHeader" id="addCondition-detail"> addCondition() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>addCondition</b>(mixed $condition, string $operator='AND')</pre> </td></tr> <tr> <td class="paramNameCol">$condition</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the new condition. It can be either a string or an array of strings.</td> </tr> <tr> <td class="paramNameCol">$operator</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the operator to join different conditions. Defaults to 'AND'.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the criteria object itself</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L218">framework/db/schema/CDbCriteria.php#218</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">addCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">=</span><span style="color: #DD0000">'AND'</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">))<br>    {<br>        if(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">===array())<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">'('</span><span style="color: #007700">.</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">') '</span><span style="color: #007700">.</span><span style="color: #0000BB">$operator</span><span style="color: #007700">.</span><span style="color: #DD0000">' ('</span><span style="color: #007700">,</span><span style="color: #0000BB">$condition</span><span style="color: #007700">).</span><span style="color: #DD0000">')'</span><span style="color: #007700">;<br>    }<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">===</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">=</span><span style="color: #0000BB">$condition</span><span style="color: #007700">;<br>    else<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">=</span><span style="color: #DD0000">'('</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">.</span><span style="color: #DD0000">') '</span><span style="color: #007700">.</span><span style="color: #0000BB">$operator</span><span style="color: #007700">.</span><span style="color: #DD0000">' ('</span><span style="color: #007700">.</span><span style="color: #0000BB">$condition</span><span style="color: #007700">.</span><span style="color: #DD0000">')'</span><span style="color: #007700">;<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Appends a condition to the existing <a href="cdbcriteria#condition">condition</a>. The new condition and the existing condition will be concatenated via the specified operator which defaults to 'AND'. The new condition can also be an array. In this case, all elements in the array will be concatenated together via the operator. This method handles the case when the existing condition is empty. After calling this method, the <a href="cdbcriteria#condition">condition</a> property will be modified.</p> <h3 class="detailHeader" id="addInCondition-detail"> addInCondition() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>addInCondition</b>(string $column, array $values, string $operator='AND')</pre> </td></tr> <tr> <td class="paramNameCol">$column</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the column name (or a valid SQL expression)</td> </tr> <tr> <td class="paramNameCol">$values</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of values that the column value should be in</td> </tr> <tr> <td class="paramNameCol">$operator</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the operator used to concatenate the new condition with the existing one. Defaults to 'AND'.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the criteria object itself</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L274">framework/db/schema/CDbCriteria.php#274</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">addInCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$column</span><span style="color: #007700">,</span><span style="color: #0000BB">$values</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">=</span><span style="color: #DD0000">'AND'</span><span style="color: #007700">)<br>{<br>    if((</span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$values</span><span style="color: #007700">))&lt;</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #DD0000">'0=1'</span><span style="color: #007700">; </span><span style="color: #FF8000">// 0=1 is used because in MSSQL value alone can't be used in WHERE<br>    </span><span style="color: #007700">elseif(</span><span style="color: #0000BB">$n</span><span style="color: #007700">===</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$value</span><span style="color: #007700">=</span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$values</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #0000BB">$column</span><span style="color: #007700">.</span><span style="color: #DD0000">' IS NULL'</span><span style="color: #007700">;<br>        else<br>        {<br>            </span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #0000BB">$column</span><span style="color: #007700">.</span><span style="color: #DD0000">'='</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">[</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>        }<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$params</span><span style="color: #007700">=array();<br>        foreach(</span><span style="color: #0000BB">$values </span><span style="color: #007700">as </span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$params</span><span style="color: #007700">[]=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">[</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>        }<br>        </span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #0000BB">$column</span><span style="color: #007700">.</span><span style="color: #DD0000">' IN ('</span><span style="color: #007700">.</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">', '</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">).</span><span style="color: #DD0000">')'</span><span style="color: #007700">;<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Appends an IN condition to the existing <a href="cdbcriteria#condition">condition</a>. The IN condition and the existing condition will be concatenated via the specified operator which defaults to 'AND'. The IN condition is generated by using the SQL IN operator which requires the specified column value to be among the given list of values.</p> <h3 class="detailHeader" id="addNotInCondition-detail"> addNotInCondition() <span class="detailHeaderTag"> method (available since v1.1.1) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>addNotInCondition</b>(string $column, array $values, string $operator='AND')</pre> </td></tr> <tr> <td class="paramNameCol">$column</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the column name (or a valid SQL expression)</td> </tr> <tr> <td class="paramNameCol">$values</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">list of values that the column value should not be in</td> </tr> <tr> <td class="paramNameCol">$operator</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the operator used to concatenate the new condition with the existing one. Defaults to 'AND'.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the criteria object itself</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L315">framework/db/schema/CDbCriteria.php#315</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">addNotInCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$column</span><span style="color: #007700">,</span><span style="color: #0000BB">$values</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">=</span><span style="color: #DD0000">'AND'</span><span style="color: #007700">)<br>{<br>    if((</span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$values</span><span style="color: #007700">))&lt;</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$n</span><span style="color: #007700">===</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>    {<br>        </span><span style="color: #0000BB">$value</span><span style="color: #007700">=</span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$values</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">===</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #0000BB">$column</span><span style="color: #007700">.</span><span style="color: #DD0000">' IS NOT NULL'</span><span style="color: #007700">;<br>        else<br>        {<br>            </span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #0000BB">$column</span><span style="color: #007700">.</span><span style="color: #DD0000">'!='</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">[</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>        }<br>    }<br>    else<br>    {<br>        </span><span style="color: #0000BB">$params</span><span style="color: #007700">=array();<br>        foreach(</span><span style="color: #0000BB">$values </span><span style="color: #007700">as </span><span style="color: #0000BB">$value</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$params</span><span style="color: #007700">[]=</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">[</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br>        }<br>        </span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #0000BB">$column</span><span style="color: #007700">.</span><span style="color: #DD0000">' NOT IN ('</span><span style="color: #007700">.</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">', '</span><span style="color: #007700">,</span><span style="color: #0000BB">$params</span><span style="color: #007700">).</span><span style="color: #DD0000">')'</span><span style="color: #007700">;<br>    }<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Appends an NOT IN condition to the existing <a href="cdbcriteria#condition">condition</a>. The NOT IN condition and the existing condition will be concatenated via the specified operator which defaults to 'AND'. The NOT IN condition is generated by using the SQL NOT IN operator which requires the specified column value to be among the given list of values.</p> <h3 class="detailHeader" id="addSearchCondition-detail"> addSearchCondition() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>addSearchCondition</b>(string $column, string $keyword, boolean $escape=true, string $operator='AND', string $like='LIKE')</pre> </td></tr> <tr> <td class="paramNameCol">$column</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the column name (or a valid SQL expression)</td> </tr> <tr> <td class="paramNameCol">$keyword</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the search keyword. This interpretation of the keyword is affected by the next parameter.</td> </tr> <tr> <td class="paramNameCol">$escape</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the keyword should be escaped if it contains characters % or _. When this parameter is true (default), the special characters % (matches 0 or more characters) and _ (matches a single character) will be escaped, and the keyword will be surrounded with a % character on both ends. When this parameter is false, the keyword will be directly used for matching without any change.</td> </tr> <tr> <td class="paramNameCol">$operator</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the operator used to concatenate the new condition with the existing one. Defaults to 'AND'.</td> </tr> <tr> <td class="paramNameCol">$like</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the LIKE operator. Defaults to 'LIKE'. You may also set this to be 'NOT LIKE'.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the criteria object itself</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L251">framework/db/schema/CDbCriteria.php#251</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">addSearchCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$column</span><span style="color: #007700">,</span><span style="color: #0000BB">$keyword</span><span style="color: #007700">,</span><span style="color: #0000BB">$escape</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">=</span><span style="color: #DD0000">'AND'</span><span style="color: #007700">,</span><span style="color: #0000BB">$like</span><span style="color: #007700">=</span><span style="color: #DD0000">'LIKE'</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">$keyword</span><span style="color: #007700">==</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">$escape</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$keyword</span><span style="color: #007700">=</span><span style="color: #DD0000">'%'</span><span style="color: #007700">.</span><span style="color: #0000BB">strtr</span><span style="color: #007700">(</span><span style="color: #0000BB">$keyword</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'%'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">'\%'</span><span style="color: #007700">, </span><span style="color: #DD0000">'_'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">'\_'</span><span style="color: #007700">, </span><span style="color: #DD0000">'\\'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">'\\\\'</span><span style="color: #007700">)).</span><span style="color: #DD0000">'%'</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$condition</span><span style="color: #007700">=</span><span style="color: #0000BB">$column</span><span style="color: #007700">.</span><span style="color: #DD0000">" </span><span style="color: #0000BB">$like</span><span style="color: #DD0000"> "</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">;<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">[</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++]=</span><span style="color: #0000BB">$keyword</span><span style="color: #007700">;<br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">, </span><span style="color: #0000BB">$operator</span><span style="color: #007700">);<br>}</span></pre> </div> <p>Appends a search condition to the existing <a href="cdbcriteria#condition">condition</a>. The search condition and the existing condition will be concatenated via the specified operator which defaults to 'AND'. The search condition is generated using the SQL LIKE operator with the given column name and search keyword.</p> <h3 class="detailHeader" id="compare-detail"> compare() <span class="detailHeaderTag"> method (available since v1.1.1) </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public static <b>compare</b>(string $column, mixed $value, boolean $partialMatch=false, string $operator='AND', boolean $escape=true)</pre> </td></tr> <tr> <td class="paramNameCol">$column</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the name of the column to be searched</td> </tr> <tr> <td class="paramNameCol">$value</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the column value to be compared with. If the value is a string, the aforementioned intelligent comparison will be conducted. If the value is an array, the comparison is done by exact match of any of the value in the array. If the string or the array is empty, the existing search condition will not be modified.</td> </tr> <tr> <td class="paramNameCol">$partialMatch</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the value should consider partial text match (using LIKE and NOT LIKE operators). Defaults to false, meaning exact comparison.</td> </tr> <tr> <td class="paramNameCol">$operator</td> <td class="paramTypeCol">string</td> <td class="paramDescCol">the operator used to concatenate the new condition with the existing one. Defaults to 'AND'.</td> </tr> <tr> <td class="paramNameCol">$escape</td> <td class="paramTypeCol">boolean</td> <td class="paramDescCol">whether the value should be escaped if $partialMatch is true and the value contains characters % or _. When this parameter is true (default), the special characters % (matches 0 or more characters) and _ (matches a single character) will be escaped, and the value will be surrounded with a % character on both ends. When this parameter is false, the value will be directly used for matching without any change.</td> </tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">static</td> <td class="paramDescCol">the criteria object itself</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L414">framework/db/schema/CDbCriteria.php#414</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">compare</span><span style="color: #007700">(</span><span style="color: #0000BB">$column</span><span style="color: #007700">, </span><span style="color: #0000BB">$value</span><span style="color: #007700">, </span><span style="color: #0000BB">$partialMatch</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">, </span><span style="color: #0000BB">$operator</span><span style="color: #007700">=</span><span style="color: #DD0000">'AND'</span><span style="color: #007700">, </span><span style="color: #0000BB">$escape</span><span style="color: #007700">=</span><span style="color: #0000BB">true</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$value</span><span style="color: #007700">))<br>    {<br>        if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">===array())<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addInCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$column</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">);<br>    }<br>    else<br>        </span><span style="color: #0000BB">$value</span><span style="color: #007700">=</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br><br>    if(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/^(?:\s*(&lt;&gt;|&lt;=|&gt;=|&lt;|&gt;|=))?(.*)$/'</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">$matches</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$value</span><span style="color: #007700">=</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">];<br>        </span><span style="color: #0000BB">$op</span><span style="color: #007700">=</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br>    }<br>    else<br>        </span><span style="color: #0000BB">$op</span><span style="color: #007700">=</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br><br>    if(</span><span style="color: #0000BB">$value</span><span style="color: #007700">===</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>        return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br><br>    if(</span><span style="color: #0000BB">$partialMatch</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$op</span><span style="color: #007700">===</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addSearchCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$column</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">$escape</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">);<br>        if(</span><span style="color: #0000BB">$op</span><span style="color: #007700">===</span><span style="color: #DD0000">'&lt;&gt;'</span><span style="color: #007700">)<br>            return </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addSearchCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$column</span><span style="color: #007700">,</span><span style="color: #0000BB">$value</span><span style="color: #007700">,</span><span style="color: #0000BB">$escape</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">,</span><span style="color: #DD0000">'NOT LIKE'</span><span style="color: #007700">);<br>    }<br>    elseif(</span><span style="color: #0000BB">$op</span><span style="color: #007700">===</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$op</span><span style="color: #007700">=</span><span style="color: #DD0000">'='</span><span style="color: #007700">;<br><br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addCondition</span><span style="color: #007700">(</span><span style="color: #0000BB">$column</span><span style="color: #007700">.</span><span style="color: #0000BB">$op</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">);<br>    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">[</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_PREFIX</span><span style="color: #007700">.</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">$paramCount</span><span style="color: #007700">++]=</span><span style="color: #0000BB">$value</span><span style="color: #007700">;<br><br>    return </span><span style="color: #0000BB">$this</span><span style="color: #007700">;<br>}</span></pre> </div> <p>Adds a comparison expression to the <a href="cdbcriteria#condition">condition</a> property. <br><br> This method is a helper that appends to the <a href="cdbcriteria#condition">condition</a> property with a new comparison expression. The comparison is done by comparing a column with the given value using some comparison operator. <br><br> The comparison operator is intelligently determined based on the first few characters in the given value. In particular, it recognizes the following operators if they appear as the leading characters in the given value: </p>
<ul> <li>
<code>&lt;</code>: the column must be less than the given value.</li> <li>
<code>&gt;</code>: the column must be greater than the given value.</li> <li>
<code>&lt;=</code>: the column must be less than or equal to the given value.</li> <li>
<code>&gt;=</code>: the column must be greater than or equal to the given value.</li> <li>
<code>&lt;&gt;</code>: the column must not be the same as the given value. Note that when $partialMatch is true, this would mean the value must not be a substring of the column.</li> <li>
<code>=</code>: the column must be equal to the given value.</li> <li>none of the above: the column must be equal to the given value. Note that when $partialMatch is true, this would mean the value must be the same as the given value or be a substring of it.</li> </ul> <br><br> Note that any surrounding white spaces will be removed from the value before comparison. When the value is empty, no comparison expression will be added to the search condition. <h3 class="detailHeader" id="mergeWith-detail"> mergeWith() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public void <b>mergeWith</b>(mixed $criteria, string|boolean $operator='AND')</pre> </td></tr> <tr> <td class="paramNameCol">$criteria</td> <td class="paramTypeCol">mixed</td> <td class="paramDescCol">the criteria to be merged with. Either an array or CDbCriteria.</td> </tr> <tr> <td class="paramNameCol">$operator</td> <td class="paramTypeCol">string|boolean</td> <td class="paramDescCol">the operator used to concatenate where and having conditions. Defaults to 'AND'. For backwards compatibility a boolean value can be passed: - 'false' for 'OR' - 'true' for 'AND'</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L494">framework/db/schema/CDbCriteria.php#494</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">mergeWith</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">=</span><span style="color: #DD0000">'AND'</span><span style="color: #007700">)<br>{<br>    if(</span><span style="color: #0000BB">is_bool</span><span style="color: #007700">(</span><span style="color: #0000BB">$operator</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$operator</span><span style="color: #007700">=</span><span style="color: #0000BB">$operator </span><span style="color: #007700">? </span><span style="color: #DD0000">'AND' </span><span style="color: #007700">: </span><span style="color: #DD0000">'OR'</span><span style="color: #007700">;<br>    if(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$criteria</span><span style="color: #007700">=new </span><span style="color: #0000BB">self</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">);<br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">!==</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">===</span><span style="color: #DD0000">'*'</span><span style="color: #007700">||</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">===</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">===</span><span style="color: #0000BB">false</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">=</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">!==</span><span style="color: #DD0000">'*'</span><span style="color: #007700">)<br>        {<br>            </span><span style="color: #0000BB">$select1</span><span style="color: #007700">=</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">)?</span><span style="color: #0000BB">preg_split</span><span style="color: #007700">(</span><span style="color: #DD0000">'/\s*,\s*/'</span><span style="color: #007700">,</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">),-</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">PREG_SPLIT_NO_EMPTY</span><span style="color: #007700">):</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$select2</span><span style="color: #007700">=</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">)?</span><span style="color: #0000BB">preg_split</span><span style="color: #007700">(</span><span style="color: #DD0000">'/\s*,\s*/'</span><span style="color: #007700">,</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">),-</span><span style="color: #0000BB">1</span><span style="color: #007700">,</span><span style="color: #0000BB">PREG_SPLIT_NO_EMPTY</span><span style="color: #007700">):</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">;<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">=</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$select1</span><span style="color: #007700">,</span><span style="color: #0000BB">array_diff</span><span style="color: #007700">(</span><span style="color: #0000BB">$select2</span><span style="color: #007700">,</span><span style="color: #0000BB">$select1</span><span style="color: #007700">));<br>        }<br>    }<br><br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">!==</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">===</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">!==</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">=</span><span style="color: #DD0000">"(</span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">}</span><span style="color: #DD0000">) </span><span style="color: #0000BB">$operator</span><span style="color: #DD0000"> (</span><span style="color: #007700">{</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">condition</span><span style="color: #007700">}</span><span style="color: #DD0000">)"</span><span style="color: #007700">;<br>    }<br><br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">!==</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">=</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">,</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">params</span><span style="color: #007700">);<br><br>    if(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">&gt;=</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">;<br><br>    if(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">offset</span><span style="color: #007700">&gt;=</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">offset</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">offset</span><span style="color: #007700">;<br><br>    if(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">alias</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">alias</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">alias</span><span style="color: #007700">;<br><br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">order</span><span style="color: #007700">!==</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">order</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">order</span><span style="color: #007700">===</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">order</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">order</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">order</span><span style="color: #007700">!==</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">order</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">order</span><span style="color: #007700">.</span><span style="color: #DD0000">', '</span><span style="color: #007700">.</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">order</span><span style="color: #007700">;<br>    }<br><br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">!==</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">===</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">!==</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">.=</span><span style="color: #DD0000">', '</span><span style="color: #007700">.</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">group</span><span style="color: #007700">;<br>    }<br><br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">!==</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">===</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">!==</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">.=</span><span style="color: #DD0000">' '</span><span style="color: #007700">.</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">join</span><span style="color: #007700">;<br>    }<br><br>    if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">!==</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">)<br>    {<br>        if(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">===</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">;<br>        elseif(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">!==</span><span style="color: #DD0000">''</span><span style="color: #007700">)<br>            </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">=</span><span style="color: #DD0000">"(</span><span style="color: #007700">{</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">}</span><span style="color: #DD0000">) </span><span style="color: #0000BB">$operator</span><span style="color: #DD0000"> (</span><span style="color: #007700">{</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">having</span><span style="color: #007700">}</span><span style="color: #DD0000">)"</span><span style="color: #007700">;<br>    }<br><br>    if(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">distinct</span><span style="color: #007700">&gt;</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">distinct</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">distinct</span><span style="color: #007700">;<br><br>    if(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">together</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">together</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">together</span><span style="color: #007700">;<br><br>    if(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">index</span><span style="color: #007700">!==</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">index</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">index</span><span style="color: #007700">;<br><br>    if(empty(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes</span><span style="color: #007700">;<br>    elseif(!empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$scopes1</span><span style="color: #007700">=(array)</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes</span><span style="color: #007700">;<br>        </span><span style="color: #0000BB">$scopes2</span><span style="color: #007700">=(array)</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes</span><span style="color: #007700">;<br>        foreach(</span><span style="color: #0000BB">$scopes1 </span><span style="color: #007700">as </span><span style="color: #0000BB">$k</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">is_integer</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">))<br>                </span><span style="color: #0000BB">$scopes</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br>            elseif(isset(</span><span style="color: #0000BB">$scopes2</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]))<br>                </span><span style="color: #0000BB">$scopes</span><span style="color: #007700">[]=array(</span><span style="color: #0000BB">$k</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$v</span><span style="color: #007700">);<br>            else<br>                </span><span style="color: #0000BB">$scopes</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]=</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br>        }<br>        foreach(</span><span style="color: #0000BB">$scopes2 </span><span style="color: #007700">as </span><span style="color: #0000BB">$k</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">is_integer</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">))<br>                </span><span style="color: #0000BB">$scopes</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br>            elseif(isset(</span><span style="color: #0000BB">$scopes1</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]))<br>                </span><span style="color: #0000BB">$scopes</span><span style="color: #007700">[]=array(</span><span style="color: #0000BB">$k</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$v</span><span style="color: #007700">);<br>            else<br>                </span><span style="color: #0000BB">$scopes</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]=</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br>        }<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scopes</span><span style="color: #007700">=</span><span style="color: #0000BB">$scopes</span><span style="color: #007700">;<br>    }<br><br>    if(empty(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">))<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">=</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">;<br>    elseif(!empty(</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">))<br>    {<br>        </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">=(array)</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">;<br>        foreach((array)</span><span style="color: #0000BB">$criteria</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with </span><span style="color: #007700">as </span><span style="color: #0000BB">$k</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)<br>        {<br>            if(</span><span style="color: #0000BB">is_integer</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">))<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[]=</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br>            elseif(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]))<br>            {<br>                </span><span style="color: #0000BB">$excludes</span><span style="color: #007700">=array();<br>                foreach(array(</span><span style="color: #DD0000">'joinType'</span><span style="color: #007700">,</span><span style="color: #DD0000">'on'</span><span style="color: #007700">) as </span><span style="color: #0000BB">$opt</span><span style="color: #007700">)<br>                {<br>                    if(isset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">][</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]))<br>                        </span><span style="color: #0000BB">$excludes</span><span style="color: #007700">[</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">][</span><span style="color: #0000BB">$opt</span><span style="color: #007700">];<br>                    if(isset(</span><span style="color: #0000BB">$v</span><span style="color: #007700">[</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]))<br>                        </span><span style="color: #0000BB">$excludes</span><span style="color: #007700">[</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]= (</span><span style="color: #0000BB">$opt</span><span style="color: #007700">===</span><span style="color: #DD0000">'on' </span><span style="color: #007700">&amp;&amp; isset(</span><span style="color: #0000BB">$excludes</span><span style="color: #007700">[</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]) &amp;&amp; </span><span style="color: #0000BB">$v</span><span style="color: #007700">[</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]!==</span><span style="color: #0000BB">$excludes</span><span style="color: #007700">[</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]) ?<br>                            </span><span style="color: #DD0000">"(</span><span style="color: #0000BB">$excludes</span><span style="color: #007700">[</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]</span><span style="color: #DD0000">) AND </span><span style="color: #0000BB">$v</span><span style="color: #007700">[</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]</span><span style="color: #DD0000">" </span><span style="color: #007700">: </span><span style="color: #0000BB">$v</span><span style="color: #007700">[</span><span style="color: #0000BB">$opt</span><span style="color: #007700">];<br>                    unset(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">][</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]);<br>                    unset(</span><span style="color: #0000BB">$v</span><span style="color: #007700">[</span><span style="color: #0000BB">$opt</span><span style="color: #007700">]);<br>                }<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]=new </span><span style="color: #0000BB">self</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]);<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">mergeWith</span><span style="color: #007700">(</span><span style="color: #0000BB">$v</span><span style="color: #007700">,</span><span style="color: #0000BB">$operator</span><span style="color: #007700">);<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]-&gt;</span><span style="color: #0000BB">toArray</span><span style="color: #007700">();<br>                if (</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$excludes</span><span style="color: #007700">)!==</span><span style="color: #0000BB">0</span><span style="color: #007700">)<br>                    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]=</span><span style="color: #0000BB">CMap</span><span style="color: #007700">::</span><span style="color: #0000BB">mergeArray</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">],</span><span style="color: #0000BB">$excludes</span><span style="color: #007700">);<br>            }<br>            else<br>                </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">with</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]=</span><span style="color: #0000BB">$v</span><span style="color: #007700">;<br>        }<br>    }<br>}</span></pre> </div> <p>Merges with another criteria. In general, the merging makes the resulting criteria more restrictive. For example, if both criterias have conditions, they will be 'AND' together. Also, the criteria passed as the parameter takes precedence in case two options cannot be merged (e.g. LIMIT, OFFSET).</p> <h3 class="detailHeader" id="toArray-detail"> toArray() <span class="detailHeaderTag"> method </span> </h3> <table class="summaryTable"> <tr><td colspan="3"> <pre class="signature2">public array <b>toArray</b>()</pre> </td></tr> <tr> <td class="paramNameCol">{return}</td> <td class="paramTypeCol">array</td> <td class="paramDescCol">the array representation of the criteria</td> </tr> </table> <div class="sourceCode"> <b>Source Code:</b> <a class="sourceLink" href="https://github.com/yiisoft/yii/blob/1.1.19/framework/db/schema/CDbCriteria.php#L639">framework/db/schema/CDbCriteria.php#639</a> (<b><a href="#" class="show">show</a></b>) <pre class="code"><span style="color: #007700">public function </span><span style="color: #0000BB">toArray</span><span style="color: #007700">()<br>{<br>    </span><span style="color: #0000BB">$result</span><span style="color: #007700">=array();<br>    foreach(array(</span><span style="color: #DD0000">'select'</span><span style="color: #007700">, </span><span style="color: #DD0000">'condition'</span><span style="color: #007700">, </span><span style="color: #DD0000">'params'</span><span style="color: #007700">, </span><span style="color: #DD0000">'limit'</span><span style="color: #007700">, </span><span style="color: #DD0000">'offset'</span><span style="color: #007700">, </span><span style="color: #DD0000">'order'</span><span style="color: #007700">, </span><span style="color: #DD0000">'group'</span><span style="color: #007700">, </span><span style="color: #DD0000">'join'</span><span style="color: #007700">, </span><span style="color: #DD0000">'having'</span><span style="color: #007700">, </span><span style="color: #DD0000">'distinct'</span><span style="color: #007700">, </span><span style="color: #DD0000">'scopes'</span><span style="color: #007700">, </span><span style="color: #DD0000">'with'</span><span style="color: #007700">, </span><span style="color: #DD0000">'alias'</span><span style="color: #007700">, </span><span style="color: #DD0000">'index'</span><span style="color: #007700">, </span><span style="color: #DD0000">'together'</span><span style="color: #007700">) as </span><span style="color: #0000BB">$name</span><span style="color: #007700">)<br>        </span><span style="color: #0000BB">$result</span><span style="color: #007700">[</span><span style="color: #0000BB">$name</span><span style="color: #007700">]=</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br>    return </span><span style="color: #0000BB">$result</span><span style="color: #007700">;<br>}</span></pre> </div> <div class="_attribution">
  <p class="_attribution-p">
    © 2008–2017 by Yii Software LLC<br>Licensed under the three clause BSD license.<br>
    <a href="http://www.yiiframework.com/doc/api/1.1/CDbCriteria" class="_attribution-link">http://www.yiiframework.com/doc/api/1.1/CDbCriteria</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
