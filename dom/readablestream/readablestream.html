
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>ReadableStream.constructor - Web APIs - W3cubDocs</title>
  
  <meta name="description" content=" The ReadableStream() constructor creates and returns a readable stream object from the given handlers. ">
  <meta name="keywords" content="readablestream, constructor, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/readablestream/readablestream.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<header><h1>ReadableStream: ReadableStream() constructor</h1></header><div class="section-content">
<p>The <code>ReadableStream()</code> constructor creates and returns a readable stream object from the given handlers.</p> <p>Note that while all parameters are technically optional, omitting the <code>underlyingSource</code> will result in a stream that has no source, and that can't be read from (readers return a promise that will never be resolved).</p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="arMlM4SvvEN2sBj2x9+tzBSUHYLc/FafvxmlAdWbgBA=" data-language="js"><span class="token keyword">new</span> <span class="token class-name">ReadableStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">ReadableStream</span><span class="token punctuation">(</span>underlyingSource<span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">ReadableStream</span><span class="token punctuation">(</span>underlyingSource<span class="token punctuation">,</span> queuingStrategy<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="underlyingsource">
<a href="#underlyingsource"><code>underlyingSource</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> An object containing methods and properties that define how the constructed stream instance will behave. <code>underlyingSource</code> can contain the following: </p> <dl> <dt id="start">
<a href="#start"><code>start</code></a> (controller) <span class="badge inline optional">Optional</span>
</dt> <dd> <p> This is a method, called immediately when the object is constructed. The contents of this method are defined by the developer, and should aim to get access to the stream source, and do anything else required to set up the stream functionality. If this process is to be done asynchronously, it can return a promise to signal success or failure. The <code>controller</code> parameter passed to this method is a <a href="../readablestreamdefaultcontroller"><code>ReadableStreamDefaultController</code></a> or a <a href="../readablebytestreamcontroller"><code>ReadableByteStreamController</code></a>, depending on the value of the <code>type</code> property. This can be used by the developer to control the stream during set up. </p> </dd> <dt id="pull">
<a href="#pull"><code>pull</code></a> (controller) <span class="badge inline optional">Optional</span>
</dt> <dd> <p> This method, also defined by the developer, will be called repeatedly when the stream's internal queue of chunks is not full, up until it reaches its high water mark. If <code>pull()</code> returns a promise, then it won't be called again until that promise fulfills; if the promise rejects, the stream will become errored. The <code>controller</code> parameter passed to this method is a <a href="../readablestreamdefaultcontroller"><code>ReadableStreamDefaultController</code></a> or a <a href="../readablebytestreamcontroller"><code>ReadableByteStreamController</code></a>, depending on the value of the <code>type</code> property. This can be used by the developer to control the stream as more chunks are fetched. This function will not be called until <code>start()</code> successfully completes. Additionally, it will only be called repeatedly if it enqueues at least one chunk or fulfills a BYOB request; a no-op <code>pull()</code> implementation will not be continually called. </p> </dd> <dt id="cancel">
<a href="#cancel"><code>cancel</code></a> (reason) <span class="badge inline optional">Optional</span>
</dt> <dd> <p> This method, also defined by the developer, will be called if the app signals that the stream is to be cancelled (e.g. if <a href="cancel"><code>ReadableStream.cancel()</code></a> is called). The contents should do whatever is necessary to release access to the stream source. If this process is asynchronous, it can return a promise to signal success or failure. The <code>reason</code> parameter contains a string describing why the stream was cancelled. </p> </dd> <dt id="type">
<a href="#type"><code>type</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> This property controls what type of readable stream is being dealt with. If it is included with a value set to <code>"bytes"</code>, the passed controller object will be a <a href="../readablebytestreamcontroller"><code>ReadableByteStreamController</code></a> capable of handling a BYOB (bring your own buffer)/byte stream. If it is not included, the passed controller will be a <a href="../readablestreamdefaultcontroller"><code>ReadableStreamDefaultController</code></a>. </p> </dd> <dt id="autoallocatechunksize">
<a href="#autoallocatechunksize"><code>autoAllocateChunkSize</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> For byte streams, the developer can set the <code>autoAllocateChunkSize</code> with a positive integer value to turn on the stream's auto-allocation feature. With this is set, the stream implementation will automatically allocate a view buffer of the specified size in <a href="../readablebytestreamcontroller/byobrequest"><code>ReadableByteStreamController.byobRequest</code></a> when required. </p> <p> This must be set to enable zero-copy transfers to be used with a default <a href="../readablestreamdefaultreader"><code>ReadableStreamDefaultReader</code></a>. If not set, a default reader will still stream data, but <a href="../readablebytestreamcontroller/byobrequest"><code>ReadableByteStreamController.byobRequest</code></a> will always be <code>null</code> and transfers to the consumer must be via the stream's internal queues. </p> </dd> </dl> </dd> <dt id="queuingstrategy">
<a href="#queuingstrategy"><code>queuingStrategy</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> An object that optionally defines a queuing strategy for the stream. This takes two parameters: </p> <dl> <dt id="highwatermark"><a href="#highwatermark"><code>highWaterMark</code></a></dt> <dd> <p> A non-negative integer — this defines the total number of chunks that can be contained in the internal queue before backpressure is applied. </p> </dd> <dt id="sizechunk"><a href="#sizechunk"><code>size(chunk)</code></a></dt> <dd> <p> A method containing a parameter <code>chunk</code> — this indicates the size to use for each chunk, in bytes. </p> </dd> </dl> <div class="notecard note" id="sect1"> <p> <strong>Note:</strong> You could define your own custom <code>queuingStrategy</code>, or use an instance of <a href="../bytelengthqueuingstrategy"><code>ByteLengthQueuingStrategy</code></a> or <a href="../countqueuingstrategy"><code>CountQueuingStrategy</code></a> for this object value. If no <code>queuingStrategy</code> is supplied, the default used is the same as a <code>CountQueuingStrategy</code> with a high water mark of 1. </p> </div> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p>An instance of the <a href="../readablestream"><code>ReadableStream</code></a> object.</p></div>
<h3 id="exceptions">Exceptions</h3>
<div class="section-content"><dl> <dt id="sect2"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError"><code>RangeError</code></a></dt> <dd> <p>Thrown if the supplied type value is neither <code>"bytes"</code> nor <code>undefined</code>.</p> </dd> </dl></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p> In the following simple example, a custom <code>ReadableStream</code> is created using a constructor (see our <a href="https://mdn.github.io/dom-examples/streams/simple-random-stream/" target="_blank">Simple random stream example</a> for the full code). The <code>start()</code> function generates a random string of text every second and enqueues it into the stream. A <code>cancel()</code> function is also provided to stop the generation if <a href="cancel"><code>ReadableStream.cancel()</code></a> is called for any reason. </p> <p> When a button is pressed, the generation is stopped, the stream is closed using <a href="../readablestreamdefaultcontroller/close"><code>ReadableStreamDefaultController.close()</code></a>, and another function is run, which reads the data back out of the stream. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="AOoYwTbcL6kKtxa+M5jfCaEjsYpLt1lqPB2nh4e+npY=" data-language="js"><span class="token keyword">let</span> interval<span class="token punctuation">;</span>
<span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReadableStream</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">start</span><span class="token punctuation">(</span><span class="token parameter">controller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> string <span class="token operator">=</span> <span class="token function">randomChars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Add the string to the stream</span>
      controller<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// show it on the screen</span>
      <span class="token keyword">let</span> listItem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      listItem<span class="token punctuation">.</span>textContent <span class="token operator">=</span> string<span class="token punctuation">;</span>
      list1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>listItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">fetchStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      controller<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">pull</span><span class="token punctuation">(</span><span class="token parameter">controller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// We don't really need a pull in this example</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// This is called if the reader cancels,</span>
    <span class="token comment">// so we should stop generating strings</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="#">Streams Standard <br><small># ref-for-rs-constructor⑤</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>ReadableStream</code></th>
<td class="bc-supports-yes">52</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">65</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">39</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">52</td>
<td class="bc-supports-yes">52</td>
<td class="bc-supports-yes">65</td>
<td class="bc-supports-yes">41</td>
<td class="bc-supports-yes">10.3</td>
<td class="bc-supports-yes">6.0</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../readablestream"><code>ReadableStream</code></a></li> <li><a href="../readablebytestreamcontroller"><code>ReadableByteStreamController</code></a></li> <li><a href="../readablestreamdefaultcontroller"><code>ReadableStreamDefaultController</code></a></li> <li><a href="../streams_api/using_readable_streams">Using readable streams</a></li> </ul></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/ReadableStream" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream/ReadableStream</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
