
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>WebTransport API - Web APIs - W3cubDocs</title>
  
  <meta name="description" content=" Secure context&#58; This feature is available only in secure contexts (HTTPS), in some or all supporting browsers. ">
  <meta name="keywords" content="webtransport, api, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/webtransport_api.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<header><h1>WebTransport API</h1></header><div class="section-content">
<div class="notecard secure" id="sect1"><p><strong>Secure context:</strong> This feature is available only in <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#browser_compatibility">supporting browsers</a>.</p></div> <p>The <strong>WebTransport API</strong> provides a modern update to <a href="websockets_api">WebSockets</a>, transmitting data between client and server using <a href="https://datatracker.ietf.org/doc/html/draft-ietf-webtrans-http3/" target="_blank">HTTP/3 Transport</a>. WebTransport provides support for multiple streams, unidirectional streams, and out-of-order delivery. It enables reliable transport via <a href="streams_api">streams</a> and unreliable transport via UDP-like datagrams.</p>
<div class="notecard note" id="sect2"> <p><strong>Note:</strong> This feature is available in <a href="web_workers_api">Web Workers</a></p> </div>
</div>
<h2 id="concepts_and_usage">Concepts and usage</h2>
<div class="section-content">
<p><a href="https://en.wikipedia.org/wiki/HTTP/3" target="_blank">HTTP/3</a> has been in progress since 2018. It is based on Google's QUIC protocol (which is itself based on UDP), and fixes several issues around the classic TCP protocol, on which HTTP and WebSockets are based.</p> <p>These include:</p> <ul> <li>Head-of-line blocking: HTTP/2 allows multiplexing, so a single connection can stream multiple resources simultaneously. However, if a single resource fails, all other resources on that connection are held up until any missing packets are retransmitted. With QUIC, only the failing resource is affected.</li> <li>Faster performance: QUIC is more performant than TCP in many ways. QUIC can handle security features itself, rather than handing responsibility off to other protocols like TLS, meaning fewer round trips. And streams provide better transport efficiency than the older packet mechanism. This can make a significant difference, especially on high-latency networks.</li> <li>Better network transitions: QUIC uses a unique connection ID to handle the source and destination of each request to ensure that packets are delivered correctly. This ID can persist between different networks, meaning that for example a download can continue interrupted if you switch from Wifi to a mobile network. HTTP/2 on the other hand uses IP addresses as identifiers, so network transitions can be problematic.</li> <li>Unreliable transport: HTTP/3 supports unreliable data transmission via datagrams.</li> </ul> <p>The WebTransport API provides low-level access to two-way communication via HTTP/3, taking advantage of the above benefits, and supporting both reliable and unreliable data transmission.</p>
</div>
<h3 id="initial_connection">Initial connection</h3>
<div class="section-content">
<p>To open a connection to an HTTP/3 server, you pass its URL to the <a href="webtransport/webtransport"><code>WebTransport()</code></a> constructor. Note that the scheme needs to be HTTPS, and the port number needs to be explicitly specified. Once the <a href="webtransport/ready"><code>WebTransport.ready</code></a> promise fulfills, you can start using the connection.</p> <p>Also note that you can respond to the connection closing by waiting for the <a href="webtransport/closed"><code>WebTransport.closed</code></a> promise to fulfill. Errors returned by WebTransport operations are of type <a href="webtransporterror"><code>WebTransportError</code></a>, and contain additional data on top of the standard <a href="domexception"><code>DOMException</code></a> set.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="1Q/aVfrKAcIAF/EfaM7+FDb6E6jItyXO70BweVO2Tgc=" data-language="js"><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">"https://example.com:4999/wt"</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">initTransport</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Initialize transport connection</span>
  <span class="token keyword">const</span> transport <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebTransport</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// The connection can be used once ready fulfills</span>
  <span class="token keyword">await</span> transport<span class="token punctuation">.</span>ready<span class="token punctuation">;</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// ...</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">closeTransport</span><span class="token punctuation">(</span><span class="token parameter">transport</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Respond to connection closing</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> transport<span class="token punctuation">.</span>closed<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The HTTP/3 connection to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> closed gracefully.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">The HTTP/3 connection to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> closed due to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h3 id="unreliable_transmission_via_datagrams">Unreliable transmission via datagrams</h3>
<div class="section-content">
<p>"Unreliable" means that transmission of data is not guaranteed, nor is arrival in a specific order. This is fine in some situations and provides very fast delivery. For example, you might want to transmit regular game state updates where each message supersedes the last one that arrives, and order is not important.</p> <p>Unreliable data transmission is handled via the <a href="webtransport/datagrams"><code>WebTransport.datagrams</code></a> property — this returns a <a href="webtransportdatagramduplexstream"><code>WebTransportDatagramDuplexStream</code></a> object containing everything you need to send datagrams to the server, and receive them back.</p> <p>The <a href="webtransportdatagramduplexstream/writable"><code>WebTransportDatagramDuplexStream.writable</code></a> property returns a <a href="writablestream"><code>WritableStream</code></a> object that you can write data to using a writer, for transmission to the server:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="yOf+XLkXNvVqOzYUaYGrYax55V30GgE1KQLOSibVipA=" data-language="js"><span class="token keyword">const</span> writer <span class="token operator">=</span> transport<span class="token punctuation">.</span>datagrams<span class="token punctuation">.</span>writable<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> data1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>The <a href="webtransportdatagramduplexstream/readable"><code>WebTransportDatagramDuplexStream.readable</code></a> property returns a <a href="readablestream"><code>ReadableStream</code></a> object that you can use to receive data from the server:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="Wo6QgX7McC3xv3duwiXSgidzzNj0l6I2xMA5dHIKMNQ=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reader <span class="token operator">=</span> transport<span class="token punctuation">.</span>datagrams<span class="token punctuation">.</span>readable<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> done <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// value is a Uint8Array.</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h3 id="reliable_transmission_via_streams">Reliable transmission via streams</h3>
<div class="section-content"><p>"Reliable" means that transmission and order of data are guaranteed. This provides slower delivery (albeit faster than with WebSockets), and is needed in situations where reliability and ordering are important, like chat applications.</p></div>
<h3 id="unidirectional_transmission">Unidirectional transmission</h3>
<div class="section-content">
<p>To open a unidirectional stream from a user agent, you use the <a href="webtransport/createunidirectionalstream"><code>WebTransport.createUnidirectionalStream()</code></a> method to get a reference to a <a href="writablestream"><code>WritableStream</code></a>. From this you can <a href="writablestream/getwriter"><code>get a writer</code></a> to allow data to be written to the stream and sent to the server.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="I1fspTpTrYLxGuIziUpX1Xyho/VKBq3FmWzmpfds+9g=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">writeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">await</span> transport<span class="token punctuation">.</span><span class="token function">createUnidirectionalStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> writer <span class="token operator">=</span> stream<span class="token punctuation">.</span>writable<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"All data has been sent."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">An error occurred: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>Note also the use of the <a href="writablestreamdefaultwriter/close"><code>WritableStreamDefaultWriter.close()</code></a> method to close the associated HTTP/3 connection once all data has been sent.</p> <p>If the server opens a unidirectional stream to transmit data to the client, this can be accessed via the <a href="webtransport/incomingunidirectionalstreams"><code>WebTransport.incomingUnidirectionalStreams</code></a> property, which returns a <a href="readablestream"><code>ReadableStream</code></a> of <code>WebTransportReceiveStream</code> objects. Each one can be used to read <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a> instances sent by the server.</p> <p>In this case, the first thing to do is set up a function to read a <code>WebTransportReceiveStream</code>. These objects inherit from the <code>ReadableStream</code> class, so can be used in just the same way:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="rqU+cH+so7rELmGoLq4QoruaXKQ3dYBzzo/5WXrgctc=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token parameter">receiveStream</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reader <span class="token operator">=</span> receiveStream<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> done<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// value is a Uint8Array</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>Next, call <a href="webtransport/incomingunidirectionalstreams"><code>WebTransport.incomingUnidirectionalStreams</code></a> and get a reference to the reader available on the <code>ReadableStream</code> it returns, and then use the reader to read the data from the server. Each chunk is a <code>WebTransportReceiveStream</code>, and we use the <code>readFrom()</code> set up earlier to read them:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="bgszJgllZZsCsXG9xF+QZ4tDSSGwxsCgPO9v1Le48Oc=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">receiveUnidirectional</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> uds <span class="token operator">=</span> transport<span class="token punctuation">.</span>incomingUnidirectionalStreams<span class="token punctuation">;</span>
  <span class="token keyword">const</span> reader <span class="token operator">=</span> uds<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> done<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// value is an instance of WebTransportReceiveStream</span>
    <span class="token keyword">await</span> <span class="token function">readData</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <h4 id="bidirectional_transmission">Bidirectional transmission</h4> <p>To open a bidirectional stream from a user agent, you use the <a href="webtransport/createbidirectionalstream"><code>WebTransport.createBidirectionalStream()</code></a> method to get a reference to a <a href="webtransportbidirectionalstream"><code>WebTransportBidirectionalStream</code></a>. In the same way as the <a href="webtransportdatagramduplexstream"><code>WebTransportDatagramDuplexStream</code></a>, this contains <code>readable</code> and <code>writable</code> properties returning references to <code>ReadableStream</code> and <code>WritableStream</code> instances, which can be used to read from and write to the server.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="qtjYUmMBx7Q6ARycGMtHS5SKczr9m5xHwKbC1GDeeZU=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">setUpBidirectional</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">await</span> transport<span class="token punctuation">.</span><span class="token function">createBidirectionalStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// stream is a WebTransportBidirectionalStream</span>
  <span class="token comment">// stream.readable is a ReadableStream</span>
  <span class="token keyword">const</span> readable <span class="token operator">=</span> stream<span class="token punctuation">.</span>readable<span class="token punctuation">;</span>
  <span class="token comment">// stream.writable is a WritableStream</span>
  <span class="token keyword">const</span> writable <span class="token operator">=</span> stream<span class="token punctuation">.</span>writable<span class="token punctuation">;</span>

  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>Reading from the <code>ReadableStream</code> can then be done as follows:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="54oyaFKxO64XCeCrXqw1kq3gnxtquNp1CCRlUAPnp9M=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token parameter">readable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reader <span class="token operator">=</span> readable<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> done <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// value is a Uint8Array.</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>And writing to the <code>WritableStream</code> can be done like this:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="6maE7gVQB+/t98Nzs+PrHLccWa9RJvPkygy+rqwkJB0=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">writeData</span><span class="token punctuation">(</span><span class="token parameter">writable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> writer <span class="token operator">=</span> writable<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">65</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>If the server opens a bidirectional stream to transmit data to and receive it from the client, this can be accessed via the <a href="webtransport/incomingbidirectionalstreams"><code>WebTransport.incomingBidirectionalStreams</code></a> property, which returns a <a href="readablestream"><code>ReadableStream</code></a> of <code>WebTransportBidirectionalStream</code> objects. Each one can be used to read and write <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a> instances as shown above. However, as with the unidirectional example, you need an initial function to read the bidirectional stream in the first place:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="k+WUZJgGZDiF8w+ARhFn+uL0YKUfQLmO9zdnxCStObQ=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">receiveBidirectional</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> bds <span class="token operator">=</span> transport<span class="token punctuation">.</span>incomingBidirectionalStreams<span class="token punctuation">;</span>
  <span class="token keyword">const</span> reader <span class="token operator">=</span> bds<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> done<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// value is an instance of WebTransportBidirectionalStream</span>
    <span class="token keyword">await</span> <span class="token function">readData</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>readable<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">writeData</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>writable<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h2 id="interfaces">Interfaces</h2>
<div class="section-content"><dl> <dt id="sect3"><a href="webtransport"><code>WebTransport</code></a></dt> <dd> <p>Provides functionality to enable a user agent to connect to an HTTP/3 server, initiate reliable and unreliable transport in either or both directions, and close the connection once it is no longer needed.</p> </dd> <dt id="sect4"><a href="webtransportbidirectionalstream"><code>WebTransportBidirectionalStream</code></a></dt> <dd> <p>Represents a bidirectional stream created by a server or a client that can be used for reliable transport. Provides access to a <a href="readablestream"><code>ReadableStream</code></a> for reading incoming data, and a <a href="writablestream"><code>WritableStream</code></a> for writing outgoing data.</p> </dd> <dt id="sect5"><a href="webtransportdatagramduplexstream"><code>WebTransportDatagramDuplexStream</code></a></dt> <dd> <p>Represents a duplex stream that can be used for unreliable transport of datagrams between client and server. Provides access to a <a href="readablestream"><code>ReadableStream</code></a> for reading incoming datagrams, a <a href="writablestream"><code>WritableStream</code></a> for writing outgoing datagrams, and various settings and statistics related to the stream.</p> </dd> <dt id="sect6"><a href="webtransporterror"><code>WebTransportError</code></a></dt> <dd> <p>Represents an error related to the WebTransport API, which can arise from server errors, network connection problems, or client-initiated abort operations (for example, arising from a <a href="writablestream/abort"><code>WritableStream.abort()</code></a> call).</p> </dd> </dl></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>For complete examples, see:</p> <ul> <li><a href="https://webtransport.day/" target="_blank">WebTransport over HTTP/3 client</a></li> <li><a href="https://webrtc.internaut.com/wc/wtSender4/" target="_blank">WebTransport (BYOB) Echo with WebCodecs in Worker</a></li> </ul>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/webtransport/#web-transport">WebTransport <br><small># web-transport</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>WebTransport</code></th>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">83</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">18.0</td>
</tr>
<tr>
<th><code>WebTransport_API</code></th>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">83</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">18.0</td>
</tr>
<tr>
<th><code>byob_readers</code></th>
<td class="bc-supports-yes">109</td>
<td class="bc-supports-yes">109</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">95</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">109</td>
<td class="bc-supports-yes">109</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-yes">74</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">21.0</td>
</tr>
<tr>
<th><code>close</code></th>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">83</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">18.0</td>
</tr>
<tr>
<th><code>closed</code></th>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">83</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">18.0</td>
</tr>
<tr>
<th><code>congestionControl</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
<tr>
<th><code>createBidirectionalStream</code></th>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">83</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">18.0</td>
</tr>
<tr>
<th><code>createUnidirectionalStream</code></th>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes"><details><summary>114</summary>Returns a <code>WritableStream</code> instead of a <code>WebTransportSendStream</code>.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">83</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes"><details><summary>114</summary>Returns a <code>WritableStream</code> instead of a <code>WebTransportSendStream</code>.</details></td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">18.0</td>
</tr>
<tr>
<th><code>datagrams</code></th>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">83</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">18.0</td>
</tr>
<tr>
<th><code>getStats</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><details><summary>114</summary>Method is defined but throws a not-implemented error.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><details><summary>114</summary>Method is defined but throws a not-implemented error.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
<tr>
<th><code>incomingBidirectionalStreams</code></th>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">83</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">18.0</td>
</tr>
<tr>
<th><code>incomingUnidirectionalStreams</code></th>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">83</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">18.0</td>
</tr>
<tr>
<th><code>ready</code></th>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">83</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">97</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">18.0</td>
</tr>
<tr>
<th><code>reliability</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">114</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
</tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="https://web.dev/webtransport/" target="_blank">Using WebTransport</a></li> <li><a href="websockets_api">WebSockets API</a></li> <li><a href="streams_api">Streams API</a></li> <li><a href="https://datatracker.ietf.org/doc/html/draft-ietf-webtrans-http3/" target="_blank">WebTransport over HTTP/3</a></li> </ul></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebTransport_API" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/WebTransport_API</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
