
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>RTCPeerConnection.createOffer - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="The createOffer() method of the RTCPeerConnection interface initiates the creation of an SDP offer for the purpose of starting a new WebRTC &hellip;">
  <meta name="keywords" content="rtcpeerconnection, createoffer, method, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/rtcpeerconnection/createoffer.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>RTCPeerConnection: createOffer() method</h1>
<div class="section-content">
<p> The <code>createOffer()</code> method of the <a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a> interface initiates the creation of an <a href="https://developer.mozilla.org/en-US/docs/Glossary/SDP">SDP</a> offer for the purpose of starting a new WebRTC connection to a remote peer. The SDP offer includes information about any <a href="../mediastreamtrack"><code>MediaStreamTrack</code></a> objects already attached to the WebRTC session, codec, and options supported by the browser, and any candidates already gathered by the <a href="https://developer.mozilla.org/en-US/docs/Glossary/ICE">ICE</a> agent, for the purpose of being sent over the signaling channel to a potential peer to request a connection or to update the configuration of an existing connection. </p> <p> The return value is a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> which, when the offer has been created, is resolved with a <a href="../rtcsessiondescription"><code>RTCSessionDescription</code></a> object containing the newly-created offer. </p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example"><pre data-language="js"><span class="token function">createOffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">createOffer</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>

<span class="token function">createOffer</span><span class="token punctuation">(</span>successCallback<span class="token punctuation">,</span> failureCallback<span class="token punctuation">)</span> <span class="token comment">// deprecated</span>
<span class="token function">createOffer</span><span class="token punctuation">(</span>successCallback<span class="token punctuation">,</span> failureCallback<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token comment">// deprecated</span>
</pre></div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="options">
<code>options</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An object providing the following options requested for the offer:</p> <dl> <dt id="icerestart">
<code>iceRestart</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> To restart ICE on an active connection, set this to <code>true</code>. This will cause the returned offer to have different credentials than those already in place. If you then apply the returned offer, ICE will restart. Specify <code>false</code> to keep the same credentials and therefore not restart ICE. <code>false</code>. </p> </dd> <dt id="offertoreceiveaudio">
<code>offerToReceiveAudio</code> <span class="badge inline optional">Optional</span> <abbr class="icon icon-deprecated" title="Deprecated. Not for use in new websites."> <span class="visually-hidden">Deprecated</span> </abbr>
</dt> <dd> <p>Provides additional control over the directionality of audio. For example, it can be used to ensure that audio can be received, regardless if audio is sent or not.</p> </dd> <dt id="offertoreceivevideo">
<code>offerToReceiveVideo</code> <span class="badge inline optional">Optional</span> <abbr class="icon icon-deprecated" title="Deprecated. Not for use in new websites."> <span class="visually-hidden">Deprecated</span> </abbr>
</dt> <dd> <p>Provides additional control over the directionality of video. For example, it can be used to ensure that video can be received, regardless if video is sent or not.</p> </dd> </dl> </dd> </dl></div>
<h3 id="deprecated_parameters">Deprecated parameters</h3>
<div class="section-content">
<p> In older code and documentation, you may see a callback-based version of this function. This has been deprecated and its use is <strong>strongly</strong> discouraged. You should update any existing code to use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>-based version of <code>createOffer()</code> instead. The parameters for the older form of <code>createOffer()</code> are described below, to aid in updating existing code. </p> <dl> <dt id="successcallback">
<code>successCallback</code> <abbr class="icon icon-deprecated" title="Deprecated. Not for use in new websites."> <span class="visually-hidden">Deprecated</span> </abbr>
</dt> <dd> <p> A <a href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function">callback function</a> which will be passed a single <a href="../rtcsessiondescription"><code>RTCSessionDescription</code></a> object describing the newly-created offer. </p> </dd> <dt id="errorcallback">
<code>errorCallback</code> <abbr class="icon icon-deprecated" title="Deprecated. Not for use in new websites."> <span class="visually-hidden">Deprecated</span> </abbr>
</dt> <dd> <p> A <a href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function">callback function</a> which will be passed a single <a href="../domexception"><code>DOMException</code></a> object explaining why the request to create an offer failed. </p> </dd> <dt id="options_2">
<code>options</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An optional object providing options requested for the offer.</p> </dd> </dl>
</div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p> A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> whose fulfillment handler will receive an object conforming to the <a href="../rtcsessiondescription/rtcsessiondescription#rtcsessiondescriptioninit">RTCSessionDescriptionInit</a> dictionary which contains the SDP describing the generated offer. That received offer should be delivered through the signaling server to a remote peer. </p></div>
<h3 id="exceptions">Exceptions</h3>
<div class="section-content">
<p> These exceptions are returned by rejecting the returned promise. Your rejection handler should examine the received exception to determine which occurred. </p> <dl> <dt id="invalidstateerror">
<code>InvalidStateError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p>Returned if the <code>RTCPeerConnection</code> is closed.</p> </dd> <dt id="notreadableerror">
<code>NotReadableError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p> Returned if no certificate or set of certificates was provided for securing the connection, and <code>createOffer()</code> was unable to create a new one. Since all WebRTC connections are required to be secured, that results in an error. </p> </dd> <dt id="operationerror">
<code>OperationError</code> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p> Returned if examining the state of the system to determine resource availability in order to generate the offer failed for some reason. </p> </dd> </dl>
</div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p> Here we see a handler for the <a href="negotiationneeded_event"><code>negotiationneeded</code></a> event which creates the offer and sends it to the remote system over a signaling channel. </p> <div class="notecard note" id="sect1"> <p> <strong>Note:</strong> Keep in mind that this is part of the signaling process, the transport layer for which is an implementation detail that's entirely up to you. In this case, a <a href="../websockets_api">WebSocket</a> connection is used to send a <a href="https://developer.mozilla.org/en-US/docs/Glossary/JSON">JSON</a> message with a <code>type</code> field with the value "video-offer" to the other peer. The contents of the object being passed to the <code>sendToServer()</code> function, along with everything else in the promise fulfillment handler, depend entirely on your design. </p> </div> <div class="code-example"><pre data-language="js">myPeerConnection
  <span class="token punctuation">.</span><span class="token function">createOffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">offer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> myPeerConnection<span class="token punctuation">.</span><span class="token function">setLocalDescription</span><span class="token punctuation">(</span>offer<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">sendToServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> myUsername<span class="token punctuation">,</span>
      <span class="token literal-property property">target</span><span class="token operator">:</span> targetUsername<span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"video-offer"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">sdp</span><span class="token operator">:</span> myPeerConnection<span class="token punctuation">.</span>localDescription<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// An error occurred, so handle the failure to connect</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p> In this code, the offer is created, and once successful, the local end of the <a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a> is configured to match by passing the offer (which is represented using an object conforming to <a href="../rtcsessiondescription/rtcsessiondescription#rtcsessiondescriptioninit">RTCSessionDescriptionInit</a>) into <a href="setlocaldescription"><code>setLocalDescription()</code></a>. Once that's done, the offer is sent to the remote system over the signaling channel; in this case, by using a custom function called <code>sendToServer()</code>. The implementation of the signaling server is independent from the WebRTC specification, so it doesn't matter how the offer is sent as long as both the caller and potential receiver are using the same one. </p> <p>Use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch"><code>Promise.catch()</code></a> to trap and handle errors.</p> <p> See <a href="../webrtc_api/signaling_and_video_calling">Signaling and video calling</a> for the complete example from which this snippet is derived; this will help you to understand how the signaling code here works. </p>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-createoffer">WebRTC: Real-Time Communication in Browsers <br><small># dom-rtcpeerconnection-createoffer</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>createOffer</code></th>
<td class="bc-supports-yes">24</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">22</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">11</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">24</td>
<td class="bc-supports-yes">14</td>
<td class="bc-supports-yes">11</td>
<td class="bc-supports-yes">1.5</td>
</tr>
<tr>
<th><code>returns_promise</code></th>
<td class="bc-supports-yes">51</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-yes">66</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">43</td>
<td class="bc-supports-yes">11</td>
<td class="bc-supports-yes">51</td>
<td class="bc-supports-yes">51</td>
<td class="bc-supports-yes">66</td>
<td class="bc-supports-yes">43</td>
<td class="bc-supports-yes">11</td>
<td class="bc-supports-yes">6.0</td>
</tr>
</tbody>
</table></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
