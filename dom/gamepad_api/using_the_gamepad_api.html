
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Gamepad API&#58; Using the Gamepad API - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="HTML provides the necessary components for rich, interactive game development. Technologies like &#60;canvas&#62;, WebGL, &#60;audio&#62;, and &#60; &hellip;">
  <meta name="keywords" content="using, gamepad, api, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/gamepad_api/using_the_gamepad_api.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<header><h1>Using the Gamepad API</h1></header><div class="section-content">
<p>HTML provides the necessary components for rich, interactive game development. Technologies like <code>&lt;canvas&gt;</code>, WebGL, <code>&lt;audio&gt;</code>, and <code>&lt;video&gt;</code>, along with JavaScript implementations, support tasks that provide similar, if not the same, features as native code. The Gamepad API allows developers and designers to access and use gamepads and other game controllers.</p> <p>The <a href="../gamepad_api">Gamepad API</a> introduces new events on the <a href="../window"><code>Window</code></a> object for reading gamepad and controller (hereby referred to as <em>gamepad</em>) state. In addition to these events, the API also adds a <a href="../gamepad"><code>Gamepad</code></a> object, which you can use to query the state of a connected gamepad, and a <a href="../navigator/getgamepads"><code>navigator.getGamepads()</code></a> method which you can use to get a list of gamepads known to the page.</p>
</div>
<h2 id="connecting_to_a_gamepad">Connecting to a gamepad</h2>
<div class="section-content">
<p>When a new gamepad is connected to the computer, the focused page first receives a <a href="../window/gamepadconnected_event"><code>gamepadconnected</code></a> event. If a gamepad is already connected when the page loaded, the <a href="../window/gamepadconnected_event"><code>gamepadconnected</code></a> event is dispatched to the focused page when the user presses a button or moves an axis.</p> <div class="notecard note" id="sect1"> <p><strong>Note:</strong> In Firefox, gamepads are only exposed to a page when the user interacts with one with the page visible. This helps prevent gamepads from being used for <a href="https://developer.mozilla.org/en-US/docs/Glossary/Fingerprinting">fingerprinting</a> the user. Once one gamepad has been interacted with, other gamepads that are connected will automatically be visible.</p> </div> <p>You can use <a href="../window/gamepadconnected_event"><code>gamepadconnected</code></a> like this:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="BYYrsmuyaO7yMTky3wzpSv2uMMnV5Iq4TmTYF+mJEOA=" data-language="js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"gamepadconnected"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">"Gamepad connected at index %d: %s. %d buttons, %d axes."</span><span class="token punctuation">,</span>
    e<span class="token punctuation">.</span>gamepad<span class="token punctuation">.</span>index<span class="token punctuation">,</span>
    e<span class="token punctuation">.</span>gamepad<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    e<span class="token punctuation">.</span>gamepad<span class="token punctuation">.</span>buttons<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
    e<span class="token punctuation">.</span>gamepad<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>Each gamepad has a unique ID associated with it, which is available on the event's <a href="../gamepadevent/gamepad"><code>gamepad</code></a> property.</p>
</div>
<h2 id="disconnecting_a_gamepad">Disconnecting a gamepad</h2>
<div class="section-content">
<p>When a gamepad is disconnected, and if a page has previously received data for that gamepad (e.g. <a href="../window/gamepadconnected_event"><code>gamepadconnected</code></a>), a second event is dispatched to the focused window, <a href="../window/gamepaddisconnected_event"><code>gamepaddisconnected</code></a>:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="ITdbfenrL06qnfRSQ2u56Ya/qnCVvepDVw6oeqCB/Kw=" data-language="js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"gamepaddisconnected"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">"Gamepad disconnected from index %d: %s"</span><span class="token punctuation">,</span>
    e<span class="token punctuation">.</span>gamepad<span class="token punctuation">.</span>index<span class="token punctuation">,</span>
    e<span class="token punctuation">.</span>gamepad<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>The gamepad's <a href="../gamepad/index"><code>index</code></a> property will be unique per-device connected to the system, even if multiple controllers of the same type are used. The <code>index</code> property also functions as the index into the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a> returned by <a href="../navigator/getgamepads"><code>Navigator.getGamepads()</code></a>.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="PcEFpNnNZG50VaOgRkWo9uXVFhon6/9/xKX2kaotv0M=" data-language="js"><span class="token keyword">const</span> gamepads <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">gamepadHandler</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> connected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> gamepad <span class="token operator">=</span> event<span class="token punctuation">.</span>gamepad<span class="token punctuation">;</span>
  <span class="token comment">// Note:</span>
  <span class="token comment">// gamepad === navigator.getGamepads()[gamepad.index]</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>connected<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gamepads<span class="token punctuation">[</span>gamepad<span class="token punctuation">.</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> gamepad<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">delete</span> gamepads<span class="token punctuation">[</span>gamepad<span class="token punctuation">.</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">"gamepadconnected"</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">gamepadHandler</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">"gamepaddisconnected"</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">gamepadHandler</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>This previous example also demonstrates how the <code>gamepad</code> property can be held after the event has completed — a technique we will use for device state querying later.</p>
</div>
<h2 id="querying_the_gamepad_object">Querying the Gamepad object</h2>
<div class="section-content">
<p>As you can see, the <strong>gamepad</strong> events discussed above include a <code>gamepad</code> property on the event object, which returns a <a href="../gamepad"><code>Gamepad</code></a> object. We can use this in order to determine which gamepad (i.e., its ID) had caused the event, since multiple gamepads might be connected at once. We can do much more with the <a href="../gamepad"><code>Gamepad</code></a> object, including holding a reference to it and querying it to find out which buttons and axes are being pressed at any one time. Doing so is often desirable for games or other interactive web pages that need to know the state of a gamepad now vs. the next time an event fires.</p> <p>Performing such checks tends to involve using the <a href="../gamepad"><code>Gamepad</code></a> object in conjunction with an animation loop (e.g., <a href="../window/requestanimationframe"><code>requestAnimationFrame</code></a>), where developers want to make decisions for the current frame based on the state of the gamepad or gamepads.</p> <p>The <a href="../navigator/getgamepads"><code>Navigator.getGamepads()</code></a> method returns an array of all devices currently visible to the webpage, as <a href="../gamepad"><code>Gamepad</code></a> objects (the first value is always <code>null</code>, so <code>null</code> will be returned if there are no gamepads connected.) This can then be used to get the same information. For example, the first code example above could be rewritten as shown below:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="PChbuo0xs6kUYVN4QoVdc/Oxa3bETDHa6sVk5WNURu8=" data-language="js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"gamepadconnected"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> gp <span class="token operator">=</span> navigator<span class="token punctuation">.</span><span class="token function">getGamepads</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>e<span class="token punctuation">.</span>gamepad<span class="token punctuation">.</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">"Gamepad connected at index %d: %s. %d buttons, %d axes."</span><span class="token punctuation">,</span>
    gp<span class="token punctuation">.</span>index<span class="token punctuation">,</span>
    gp<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    gp<span class="token punctuation">.</span>buttons<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
    gp<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>The <a href="../gamepad"><code>Gamepad</code></a> object's properties are as follows:</p> <ul> <li>
<code>id</code>: A string containing some information about the controller. This is not strictly specified, but in Firefox it will contain three pieces of information separated by dashes (<code>-</code>): two 4-digit hexadecimal strings containing the USB vendor and product id of the controller, and the name of the controller as provided by the driver. This information is intended to allow you to find a mapping for the controls on the device as well as display useful feedback to the user.</li> <li>
<code>index</code>: An integer that is unique for each gamepad currently connected to the system. This can be used to distinguish multiple controllers. Note that disconnecting a device and then connecting a new device may reuse the previous index.</li> <li>
<code>mapping</code>: A string indicating whether the browser has remapped the controls on the device to a known layout. Currently there is only one supported known layout — the <a href="https://w3c.github.io/gamepad/gamepad.html#remapping" target="_blank">standard gamepad</a>. If the browser is able to map controls on the device to that layout the <code>mapping</code> property will be set to the string <code>standard</code>.</li> <li>
<code>connected</code>: A boolean indicating whether the gamepad is still connected to the system. If this is so the value is <code>True</code>; if not, it is <code>False</code>.</li> <li>
<code>buttons</code>: An array of <a href="../gamepadbutton"><code>GamepadButton</code></a> objects representing the buttons present on the device. Each <a href="../gamepadbutton"><code>GamepadButton</code></a> has a <code>pressed</code> and a <code>value</code> property: <ul> <li>The <code>pressed</code> property is a boolean indicating whether the button is currently pressed (<code>true</code>) or unpressed (<code>false</code>).</li> <li>The <code>value</code> property is a floating point value used to enable representing analog buttons, such as the triggers on many modern gamepads. The values are normalized to the range 0.0..1.0, with 0.0 representing a button that is not pressed, and 1.0 representing a button that is fully pressed.</li> </ul> </li> <li>
<code>axes</code>: An array representing the controls with axes present on the device (e.g. analog thumb sticks). Each entry in the array is a floating point value in the range -1.0 - 1.0, representing the axis position from the lowest value (-1.0) to the highest value (1.0).</li> <li>
<code>timestamp</code>: This returns a <a href="../domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> representing the last time the data for this gamepad was updated, allowing developers to determine if the <code>axes</code> and <code>button</code> data have been updated from the hardware. The value must be relative to the <code>navigationStart</code> attribute of the <a href="../performancetiming"><code>PerformanceTiming</code></a> interface. Values are monotonically increasing, meaning that they can be compared to determine the ordering of updates, as newer values will always be greater than or equal to older values. Note that this property is not currently supported in Firefox.</li> </ul> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> The Gamepad object is available on the <a href="../window/gamepadconnected_event"><code>gamepadconnected</code></a> event rather than the <a href="../window"><code>Window</code></a> object itself, for security reasons. Once we have a reference to it, we can query its properties for information about the current state of the gamepad. Behind the scenes, this object will be updated every time the gamepad's state changes.</p> </div>
</div>
<h3 id="using_button_information">Using button information</h3>
<div class="section-content">
<p>Let's look at a simple example that displays connection information for one gamepad (it ignores subsequent gamepad connections) and allows you to move a ball around the screen using the four gamepad buttons on the right-hand side of the gamepad. You can <a href="https://chrisdavidmills.github.io/gamepad-buttons/" target="_blank">view the demo live</a>, and <a href="https://github.com/chrisdavidmills/gamepad-buttons/tree/master" target="_blank">find the source code</a> on GitHub.</p> <p>To start with, we declare some variables: The <code>gamepadInfo</code> paragraph that the connection info is written into, the <code>ball</code> that we want to move, the <code>start</code> variable that acts as the ID for <code>requestAnimation Frame</code>, the <code>a</code> and <code>b</code> variables that act as position modifiers for moving the ball, and the shorthand variables that will be used for the <a href="../window/requestanimationframe"><code>requestAnimationFrame()</code></a> and <a href="../window/cancelanimationframe"><code>cancelAnimationFrame()</code></a> cross browser forks.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="7c66EQNQFMbFgXzL40tvtx5uBNrdkN0mi3dzfvcbgI0=" data-language="js"><span class="token keyword">const</span> gamepadInfo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"gamepad-info"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ball <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"ball"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> start<span class="token punctuation">;</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</pre>
</div> <p>Next we use the <a href="../window/gamepadconnected_event"><code>gamepadconnected</code></a> event to check for a gamepad being connected. When one is connected, we grab the gamepad using <a href="../navigator/getgamepads"><code>Navigator.getGamepads()</code></a><code>[0]</code>, print information about the gamepad into our gamepad info <code>div</code>, and fire the <code>gameLoop()</code> function that starts the whole ball movement process up.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="HpCsWlDj7feSZux6KnZbxEqMP0lfOijA+SiDNI6dR/g=" data-language="js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"gamepadconnected"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> gp <span class="token operator">=</span> navigator<span class="token punctuation">.</span><span class="token function">getGamepads</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>e<span class="token punctuation">.</span>gamepad<span class="token punctuation">.</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
  gamepadInfo<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Gamepad connected at index </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gp<span class="token punctuation">.</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gp<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">. It has </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gp<span class="token punctuation">.</span>buttons<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> buttons and </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gp<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> axes.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token function">gameLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>Now we use the <a href="../window/gamepaddisconnected_event"><code>gamepaddisconnected</code></a> event to check if the gamepad is disconnected again. If so, we stop the <a href="../window/requestanimationframe"><code>requestAnimationFrame()</code></a> loop (see below) and revert the gamepad information back to what it was originally.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="2R9meZrnzhnwJnefDdQgkMIeSsDQ6s1kHyqtbsVSiXg=" data-language="js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"gamepaddisconnected"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  gamepadInfo<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"Waiting for gamepad."</span><span class="token punctuation">;</span>

  <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>Chrome does things differently here. Instead of constantly storing the gamepad's latest state in a variable it only stores a snapshot, so to do the same thing in Chrome you have to keep polling it and then only use the <a href="../gamepad"><code>Gamepad</code></a> object in code when it is available. We have done this below using <a href="../setinterval"><code>setInterval()</code></a>; once the object is available the gamepad info is outputted, the game loop is started, and the interval is cleared using <a href="../clearinterval"><code>clearInterval</code></a>.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="34h8Fnm/BfjRpCApqs3eOcIUfAbl94G71vjFxm99Vt0=" data-language="js"><span class="token keyword">let</span> interval<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">"ongamepadconnected"</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// No gamepad events available, poll instead.</span>
  interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>pollGamepads<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">pollGamepads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> gamepads <span class="token operator">=</span> navigator<span class="token punctuation">.</span><span class="token function">getGamepads</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> gp <span class="token keyword">of</span> gamepads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gamepadInfo<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Gamepad connected at index </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gp<span class="token punctuation">.</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gp<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">. It has </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gp<span class="token punctuation">.</span>buttons<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> buttons and </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gp<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> axes.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token function">gameLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>Now on to the main game loop. In each execution of the loop we check if one of four buttons is being pressed; if so, we update the values of the <code>a</code> and <code>b</code> movement variables appropriately, then update the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/left"><code>left</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/top"><code>top</code></a> properties, changing their values to the current values of <code>a</code> and <code>b</code> respectively. This has the effect of moving the ball around the screen.</p> <p>After all this is done, we use our <code>requestAnimationFrame()</code> to request the next animation frame, running <code>gameLoop()</code> again.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="nhUHiuldVmztJtCHTbdbQuNif1332lYfiK1kdHvdNYQ=" data-language="js"><span class="token keyword">function</span> <span class="token function">buttonPressed</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> b <span class="token operator">===</span> <span class="token string">"object"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> b<span class="token punctuation">.</span>pressed<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> b <span class="token operator">===</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">gameLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> gamepads <span class="token operator">=</span> navigator<span class="token punctuation">.</span><span class="token function">getGamepads</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>gamepads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> gp <span class="token operator">=</span> gamepads<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">buttonPressed</span><span class="token punctuation">(</span>gp<span class="token punctuation">.</span>buttons<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    b<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">buttonPressed</span><span class="token punctuation">(</span>gp<span class="token punctuation">.</span>buttons<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    b<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">buttonPressed</span><span class="token punctuation">(</span>gp<span class="token punctuation">.</span>buttons<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">buttonPressed</span><span class="token punctuation">(</span>gp<span class="token punctuation">.</span>buttons<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  ball<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a <span class="token operator">*</span> <span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  ball<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b <span class="token operator">*</span> <span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  start <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>gameLoop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h2 id="complete_example_displaying_gamepad_state">Complete example: Displaying gamepad state</h2>
<div class="section-content">
<p>This example shows how to use the <a href="../gamepad"><code>Gamepad</code></a> object, as well as the <a href="../window/gamepadconnected_event"><code>gamepadconnected</code></a> and <a href="../window/gamepaddisconnected_event"><code>gamepaddisconnected</code></a> events in order to display the state of all gamepads connected to the system. You can find a <a href="https://luser.github.io/gamepadtest/" target="_blank">working demo</a> and look at the <a href="https://github.com/luser/gamepadtest" target="_blank">full source code</a> on GitHub.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="9PY2mr5sRM15gZxPkq15SP5oqJzCUNSYYCmwqZczd3c=" data-language="js"><span class="token keyword">const</span> haveEvents <span class="token operator">=</span> <span class="token string">"ongamepadconnected"</span> <span class="token keyword">in</span> window<span class="token punctuation">;</span>
<span class="token keyword">const</span> controllers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">connecthandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">addgamepad</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>gamepad<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">addgamepad</span><span class="token punctuation">(</span><span class="token parameter">gamepad</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  controllers<span class="token punctuation">[</span>gamepad<span class="token punctuation">.</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> gamepad<span class="token punctuation">;</span>

  <span class="token keyword">const</span> d <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  d<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">controller</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gamepad<span class="token punctuation">.</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> t <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"h1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  t<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gamepad: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gamepad<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  d<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> b <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"ul"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  b<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"buttons"</span><span class="token punctuation">;</span>
  gamepad<span class="token punctuation">.</span>buttons<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">button<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> e <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"li"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"button"</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Button </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    b<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  d<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  a<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"axes"</span><span class="token punctuation">;</span>

  gamepad<span class="token punctuation">.</span>axes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">axis<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"progress"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"axis"</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"max"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    p<span class="token punctuation">.</span>textContent <span class="token operator">=</span> i<span class="token punctuation">;</span>
    a<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  d<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// See https://github.com/luser/gamepadtest/blob/master/index.html</span>
  <span class="token keyword">const</span> start <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>start<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    start<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>updateStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">disconnecthandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">removegamepad</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>gamepad<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">removegamepad</span><span class="token punctuation">(</span><span class="token parameter">gamepad</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> d <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">controller</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gamepad<span class="token punctuation">.</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">delete</span> controllers<span class="token punctuation">[</span>gamepad<span class="token punctuation">.</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">updateStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>haveEvents<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">scangamepads</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>controllers<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>i<span class="token punctuation">,</span> controller<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> d <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">controller</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> buttons <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    controller<span class="token punctuation">.</span>buttons<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">button<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> b <span class="token operator">=</span> buttons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> pressed <span class="token operator">=</span> button <span class="token operator">===</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> val <span class="token operator">=</span> button<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> button <span class="token operator">===</span> <span class="token string">"object"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pressed <span class="token operator">=</span> val<span class="token punctuation">.</span>pressed<span class="token punctuation">;</span>
        val <span class="token operator">=</span> val<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">const</span> pct <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>val <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      b<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundSize <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pct<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pct<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      b<span class="token punctuation">.</span>textContent <span class="token operator">=</span> pressed <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Button </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> [PRESSED]</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Button </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      b<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> pressed <span class="token operator">?</span> <span class="token string">"#42f593"</span> <span class="token operator">:</span> <span class="token string">"#2e2d33"</span><span class="token punctuation">;</span>
      b<span class="token punctuation">.</span>className <span class="token operator">=</span> pressed <span class="token operator">?</span> <span class="token string">"button pressed"</span> <span class="token operator">:</span> <span class="token string">"button"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> axes <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">"axis"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    controller<span class="token punctuation">.</span>axes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">axis<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> a <span class="token operator">=</span> axes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      a<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>axis<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      a<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">,</span> axis <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>updateStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">scangamepads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> gamepads <span class="token operator">=</span> navigator<span class="token punctuation">.</span><span class="token function">getGamepads</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#noDevices"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> gamepads<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span>
    <span class="token punctuation">.</span>length
    <span class="token operator">?</span> <span class="token string">"none"</span>
    <span class="token operator">:</span> <span class="token string">"block"</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> gamepad <span class="token keyword">of</span> gamepads<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>gamepad<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Can be null if disconnected during the session</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>gamepad<span class="token punctuation">.</span>index <span class="token keyword">in</span> controllers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        controllers<span class="token punctuation">[</span>gamepad<span class="token punctuation">.</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> gamepad<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">addgamepad</span><span class="token punctuation">(</span>gamepad<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"gamepadconnected"</span><span class="token punctuation">,</span> connecthandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"gamepaddisconnected"</span><span class="token punctuation">,</span> disconnecthandler<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>haveEvents<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span>scangamepads<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody>
<tr><td><a href="https://w3c.github.io/gamepad/#gamepad-interface">Gamepad <br><small># gamepad-interface</small></a></td></tr>
<tr><td><a href="https://w3c.github.io/gamepad/extensions.html#partial-gamepad-interface">Gamepad Extensions <br><small># partial-gamepad-interface</small></a></td></tr>
</tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>Using_the_Gamepad_API</code></th>
<td class="bc-supports-yes">21</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">29</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">32</td>
<td class="bc-supports-yes">14</td>
<td class="bc-supports-yes">10.3</td>
<td class="bc-supports-yes">1.5</td>
</tr>
<tr>
<th><code>axes</code></th>
<td class="bc-supports-yes">21</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">29</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">32</td>
<td class="bc-supports-yes">14</td>
<td class="bc-supports-yes">10.3</td>
<td class="bc-supports-yes">1.5</td>
</tr>
<tr>
<th><code>buttons</code></th>
<td class="bc-supports-yes">21</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">29</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">32</td>
<td class="bc-supports-yes">14</td>
<td class="bc-supports-yes">10.3</td>
<td class="bc-supports-yes">1.5</td>
</tr>
<tr>
<th><code>connected</code></th>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">29</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">32</td>
<td class="bc-supports-yes">14</td>
<td class="bc-supports-yes">10.3</td>
<td class="bc-supports-yes">1.5</td>
</tr>
<tr>
<th><code>displayId</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">79–8015–79</td>
<td class="bc-supports-yes">98<details><summary>64–98</summary>macOS support was enabled in Firefox 64.</details><details><summary>55–98</summary>Windows support was enabled in Firefox 55.</details>
</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no"><details><summary>55–80</summary>Currently supported only by Google Daydream.</details></td>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-no"><details><summary>42–57</summary>Currently supported only by Google Daydream.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no"><details><summary>6.0–13.0</summary>Currently supported only by Google Daydream.</details></td>
</tr>
<tr>
<th><code>hand</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">15–79</td>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
<tr>
<th><code>hapticActuators</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">15–79</td>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
<tr>
<th><code>id</code></th>
<td class="bc-supports-yes">21</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">29</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">32</td>
<td class="bc-supports-yes">14</td>
<td class="bc-supports-yes">10.3</td>
<td class="bc-supports-yes">1.5</td>
</tr>
<tr>
<th><code>index</code></th>
<td class="bc-supports-yes">21</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">29</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">32</td>
<td class="bc-supports-yes">14</td>
<td class="bc-supports-yes">10.3</td>
<td class="bc-supports-yes">1.5</td>
</tr>
<tr>
<th><code>mapping</code></th>
<td class="bc-supports-yes">21</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">29</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">32</td>
<td class="bc-supports-yes">14</td>
<td class="bc-supports-yes">10.3</td>
<td class="bc-supports-yes">1.5</td>
</tr>
<tr>
<th><code>pose</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">15–79</td>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
<tr>
<th><code>secure_context_required</code></th>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-yes">91</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">72</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">86</td>
<td class="bc-supports-yes">91</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
<tr>
<th><code>timestamp</code></th>
<td class="bc-supports-yes">21</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">29</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">25</td>
<td class="bc-supports-yes">32</td>
<td class="bc-supports-yes">14</td>
<td class="bc-supports-yes">10.3</td>
<td class="bc-supports-yes">1.5</td>
</tr>
<tr>
<th><code>vibrationActuator</code></th>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-yes">16.4</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">68</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">48</td>
<td class="bc-supports-yes">16.4</td>
<td class="bc-supports-yes">10.0</td>
</tr>
</tbody>
</table></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
