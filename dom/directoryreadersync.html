
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>DirectoryReaderSync - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="Non-standard&#58; This feature is non-standard and is not on a standards track. Do not use it on production sites facing the Web&#58; it will not &hellip;">
  <meta name="keywords" content="directoryreadersync, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/directoryreadersync.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>DirectoryReaderSync</h1>
<div class="section-content">
<div class="notecard nonstandard" id="sect1"><p><strong>Non-standard:</strong> This feature is non-standard and is not on a standards track. Do not use it on production sites facing the Web: it will not work for every user. There may also be large incompatibilities between implementations and the behavior may change in the future.</p></div>
<div class="notecard deprecated" id="sect2"><p><strong>Deprecated:</strong> This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href="#browser_compatibility">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p></div> <p>The <code>DirectoryReaderSync</code> interface lets you read the entries in a directory.</p> <div class="notecard warning" id="sect3"> <p> <strong>Warning:</strong> This interface is deprecated and is no more on the standard track. <em>Do not use it anymore.</em> Use the <a href="file_and_directory_entries_api">File and Directory Entries API</a> instead. </p> </div>
</div>
<h2 id="basic_concepts">Basic concepts</h2>
<div class="section-content"><p>Before you call the only method in this interface, <a href="#readentries"><code>readEntries()</code></a>, create the <a href="directoryentrysync"><code>DirectoryEntrySync</code></a> object. But DirectoryEntrySync (as well as <a href="fileentrysync"><code>FileEntrySync</code></a>) is not a data type that you can pass between a calling app and Web Worker thread. It's not a big deal, because you don't really need to have the main app and the worker thread see the same JavaScript object; you just need them to access the same files. You can do that by passing a list of <code>filesystem:</code> URLs—which are just strings—instead of a list of entries. You can also use the <code>filesystem:</code> URL to look up the entry with <code>resolveLocalFileSystemURL()</code>. That gets you back to a DirectoryEntrySync (as well as FileEntrySync) object.</p></div>
<h3 id="example">Example</h3>
<div class="section-content">
<p>In the following code snippet from <a href="https://web.dev/filesystem-sync/" target="_blank">HTML5Rocks (web.dev)</a>, we create Web Workers and pass data from it to the main app.</p> <div class="code-example"><pre data-language="js"><span class="token comment">// Taking care of the browser-specific prefixes.</span>
window<span class="token punctuation">.</span>resolveLocalFileSystemURL <span class="token operator">=</span>
  window<span class="token punctuation">.</span>resolveLocalFileSystemURL <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitResolveLocalFileSystemURL<span class="token punctuation">;</span>

<span class="token comment">// Create web workers</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">"worker.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> urls <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>entries<span class="token punctuation">;</span>
  urls<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">resolveLocalFileSystemURL</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">fileEntry</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Print out file's name.</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileEntry<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">cmd</span><span class="token operator">:</span> <span class="token string">"list"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p>The following is <code>worker.js</code> code that gets the contents of the directory.</p> <div class="code-example"><pre data-language="js"><span class="token comment">// worker.js</span>

<span class="token comment">// Taking care of the browser-specific prefixes.</span>
self<span class="token punctuation">.</span>requestFileSystemSync <span class="token operator">=</span>
  self<span class="token punctuation">.</span>webkitRequestFileSystemSync <span class="token operator">||</span> self<span class="token punctuation">.</span>requestFileSystemSync<span class="token punctuation">;</span>

<span class="token comment">// Global for holding the list of entry file system URLs.</span>
<span class="token keyword">const</span> paths <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getAllEntries</span><span class="token punctuation">(</span><span class="token parameter">dirReader</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> entries <span class="token operator">=</span> dirReader<span class="token punctuation">.</span><span class="token function">readEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Stash this entry's filesystem in URL</span>
    paths<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">toURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// If this is a directory, traverse.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isDirectory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">getAllEntries</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">createReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Forward the error to main app.</span>
<span class="token keyword">function</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ERROR: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cmd <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">.</span>cmd<span class="token punctuation">;</span>

  <span class="token comment">// Ignore everything else except our 'list' command.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cmd <span class="token operator">||</span> cmd <span class="token operator">!==</span> <span class="token string">"list"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">requestFileSystemSync</span><span class="token punctuation">(</span><span class="token constant">TEMPORARY</span><span class="token punctuation">,</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token comment">/*1MB*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">getAllEntries</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">createReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">entries</span><span class="token operator">:</span> paths <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre></div>
</div>
<h2 id="method">Method</h2>

<h3 id="readentries">readEntries()</h3>
<div class="section-content">
<p>Returns a list of entries from a specific directory. Call this method until an empty array is returned.</p> <h4 id="syntax">Syntax</h4> <pre class="notranslate">readEntries()
</pre> <h5 id="return_value">Return value</h5> <p>Array containing <a href="fileentrysync"><code>FileEntrySync</code></a> and <a href="directoryentrysync"><code>DirectoryEntrySync</code></a></p> <h5 id="parameter">Parameter</h5> <p>None</p> <h5 id="exceptions">Exceptions</h5> <p>This method can raise a <a href="domexception">DOMException</a> with the following codes:</p> <figure class="table-container"><div class="_table"><table> <thead> <tr> <th>Exception</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>NOT_FOUND_ERR</code></td> <td>The directory does not exist.</td> </tr> <tr> <td><code>INVALID_STATE_ERR</code></td> <td>The directory has been modified since the first call to readEntries was processed.</td> </tr> <tr> <td><code>SECURITY_ERR</code></td> <td>The browser determined that it was not safe to look up the metadata.</td> </tr> </tbody> </table></div></figure>
</div>
<h2 id="specifications">Specifications</h2>
<div class="section-content"><p>This feature is not part of any specification anymore. It is no longer on track to become a standard.</p></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>DirectoryReaderSync</code></th>
<td class="bc-supports-yes">13</td>
<td class="bc-supports-yes">79</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">37</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">1.0</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="file_and_directory_entries_api">File and Directory Entries API</a></li> <li><a href="file_and_directory_entries_api/introduction">Introduction to the File and Directory Entries API</a></li> </ul></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/DirectoryReaderSync" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/DirectoryReaderSync</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
