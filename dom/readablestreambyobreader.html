
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>ReadableStreamBYOBReader - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="The ReadableStreamBYOBReader interface of the Streams API defines a reader for a ReadableStream that supports zero-copy reading from an underlying &hellip;">
  <meta name="keywords" content="readablestreambyobreader, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/readablestreambyobreader.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<header><h1>ReadableStreamBYOBReader</h1></header><div class="section-content">
<p> The <code>ReadableStreamBYOBReader</code> interface of the <a href="streams_api">Streams API</a> defines a reader for a <a href="readablestream"><code>ReadableStream</code></a> that supports zero-copy reading from an underlying byte source. It is used for efficient copying from underlying sources where the data is delivered as an "anonymous" sequence of bytes, such as files. </p> <p> An instance of this reader type should usually be obtained by calling <a href="readablestream/getreader"><code>ReadableStream.getReader()</code></a> on the stream, specifying <code>mode: "byob"</code> in the options parameter. The readable stream must have an <em>underlying byte source</em>. In other words, it must have been <a href="readablestream/readablestream">constructed</a> specifying an underlying source with <a href="readablestream/readablestream#type"><code>type: "bytes"</code></a>). </p> <p> Using this kind of reader, a <a href="#readablestreambyobreader.read"><code>read()</code></a> request when the readable stream's internal queues are empty will result in a zero copy transfer from the underlying source (bypassing the stream's internal queues). If the internal queues are not empty, a <code>read()</code> will satisfy the request from the buffered data. </p> <p> Note that the methods and properties are similar to those for the default reader (<a href="readablestreamdefaultreader"><code>ReadableStreamDefaultReader</code></a>). The <code>read()</code> method differs in that it provide a view into which data should be written. </p>
</div>
<h2 id="constructor">Constructor</h2>
<div class="section-content"><dl> <dt id="sect1"><a href="readablestreambyobreader/readablestreambyobreader"><code>ReadableStreamBYOBReader()</code></a></dt> <dd> <p>Creates and returns a <code>ReadableStreamBYOBReader</code> object instance.</p> </dd> </dl></div>
<h2 id="instance_properties">Instance properties</h2>
<div class="section-content"><dl> <dt id="sect2">
<a href="readablestreambyobreader/closed"><code>ReadableStreamBYOBReader.closed</code></a> <span class="badge inline readonly">Read only </span>
</dt> <dd> <p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that fulfills when the stream closes, or rejects if the stream throws an error or the reader's lock is released. This property enables you to write code that responds to an end to the streaming process.</p> </dd> </dl></div>
<h2 id="instance_methods">Instance methods</h2>
<div class="section-content"><dl> <dt id="sect3"><a href="readablestreambyobreader/cancel"><code>ReadableStreamBYOBReader.cancel()</code></a></dt> <dd> <p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves when the stream is canceled. Calling this method signals a loss of interest in the stream by a consumer. The supplied <code>reason</code> argument will be given to the underlying source, which may or may not use it.</p> </dd> <dt id="sect4"><a href="readablestreambyobreader/read"><code>ReadableStreamBYOBReader.read()</code></a></dt> <dd> <p>Passes a view into which data must be written, and returns a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> that resolves with the next chunk in the stream or rejects with an indication that the stream is closed or has errored.</p> </dd> <dt id="sect5"><a href="readablestreambyobreader/releaselock"><code>ReadableStreamBYOBReader.releaseLock()</code></a></dt> <dd> <p>Releases the reader's lock on the stream.</p> </dd> </dl></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>The example below is taken from the live examples in <a href="streams_api/using_readable_byte_streams#examples">Using readable byte streams</a>.</p> <p> First create the reader using <a href="readablestream/getreader"><code>ReadableStream.getReader()</code></a> on the stream, specifying <code>mode: "byob"</code> in the options parameter. As this is a "Bring Your Own Buffer" reader, we also need to create an <code>ArrayBuffer</code> to read into. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="ehfPsxg4fXBUeJ2/R9Lc6ZHE1ZvPLmMzrmF/OR5naHc=" data-language="js"><span class="token keyword">const</span> reader <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">"byob"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p> A function that uses the reader is shown below. This calls the <code>read()</code> method recursively to read data into the buffer. The method takes a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">typed array</a> which is a view over the part of the original array buffer that has not yet been written. The parameters of the view are calculated from the data that was received in previous calls, which define an offset into the original array buffer. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="zcZS9Pv9nWKlSEY64r3M46OaewDxi+Rbuv71gYLj+ok=" data-language="js"><span class="token function">readStream</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">readStream</span><span class="token punctuation">(</span><span class="token parameter">reader</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> bytesReceived <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token comment">// read() returns a promise that resolves when a value has been received</span>
  reader
    <span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> buffer<span class="token punctuation">.</span>byteLength <span class="token operator">-</span> offset<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">processText</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> done<span class="token punctuation">,</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Result objects contain two properties:</span>
      <span class="token comment">// done  - true if the stream has already given all its data.</span>
      <span class="token comment">// value - some data. Always undefined when done is true.</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">logConsumer</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">readStream() complete. Total bytes: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bytesReceived<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      buffer <span class="token operator">=</span> value<span class="token punctuation">.</span>buffer<span class="token punctuation">;</span>
      offset <span class="token operator">+=</span> value<span class="token punctuation">.</span>byteLength<span class="token punctuation">;</span>
      bytesReceived <span class="token operator">+=</span> value<span class="token punctuation">.</span>byteLength<span class="token punctuation">;</span>

      <span class="token function">logConsumer</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Read </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token punctuation">.</span>byteLength<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bytesReceived<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">) bytes: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      result <span class="token operator">+=</span> value<span class="token punctuation">;</span>

      <span class="token comment">// Read some more, and call this function again</span>
      <span class="token keyword">return</span> reader
        <span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> buffer<span class="token punctuation">.</span>byteLength <span class="token operator">-</span> offset<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>processText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>When there is no more data in the stream, the <code>read()</code> method resolves with an object with the property <code>done</code> set to <code>true</code>, and the function returns.</p> <p>The <a href="readablestreambyobreader/closed"><code>ReadableStreamBYOBReader.closed</code></a> property returns a promise that can be used to monitor for the stream being closed or errored, or the reader lock being released.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="xZU88U2j4/tsHt8GdJght6O+YSxRQk1FPIeqUAt0xKg=" data-language="js">reader<span class="token punctuation">.</span>closed
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Resolved - code to handle stream closing</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Rejected - code to handle error</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p> To cancel the stream call <a href="readablestreambyobreader/cancel"><code>ReadableStreamBYOBReader.cancel()</code></a>, optionally specifying a <em>reason</em>. This returns a promise that will resolve when the stream has been cancelled. When the stream is cancelled the controller will in turn call <code>cancel()</code> on the underlying source, passing in the optional reason. </p> <p>The example code in <a href="streams_api/using_readable_byte_streams#examples">Using readable byte streams</a> calls the cancel method when a button is pressed, as shown:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="SKyvGHsSmR8ccR3kyaiYcTFsIYf7FUvwtMux+kefWoo=" data-language="js">button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  reader<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token string">"user choice"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"cancel complete"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>The consumer can also call <code>releaseLock()</code> to release the reader's hold on the stream, but only when no read is pending:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="5XJJqd+NRHeYL4AeTenpjxZL4dqm13CDc/JTXx3H3Ug=" data-language="js">reader<span class="token punctuation">.</span><span class="token function">releaseLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://streams.spec.whatwg.org/#byob-reader-class">Streams Standard <br><small># byob-reader-class</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>ReadableStreamBYOBReader</code></th>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">75</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15.0</td>
</tr>
<tr>
<th><code>ReadableStreamBYOBReader</code></th>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">75</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15.0</td>
</tr>
<tr>
<th><code>cancel</code></th>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">75</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15.0</td>
</tr>
<tr>
<th><code>closed</code></th>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">75</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15.0</td>
</tr>
<tr>
<th><code>read</code></th>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">75</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15.0</td>
</tr>
<tr>
<th><code>releaseLock</code></th>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">75</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15.0</td>
</tr>
</tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="streams_api">Streams API concepts</a></li> <li><a href="streams_api/using_readable_byte_streams">Using readable byte stream</a></li> <li><a href="readablestream"><code>ReadableStream</code></a></li> <li>
<a href="https://whatwg-stream-visualizer.glitch.me/" target="_blank">WHATWG Stream Visualizer</a>, for a basic visualization of readable, writable, and transform streams.</li> <li>
<a href="https://github.com/MattiasBuelens/web-streams-polyfill" target="_blank">Web-streams-polyfill</a> or <a href="https://github.com/stardazed/sd-streams" target="_blank">sd-streams</a> - polyfills</li> </ul></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamBYOBReader" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamBYOBReader</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
