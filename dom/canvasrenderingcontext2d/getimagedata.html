
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>CanvasRenderingContext2D.getImageData - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="The CanvasRenderingContext2D method getImageData() of the Canvas 2D API returns an ImageData object representing the underlying pixel data for a &hellip;">
  <meta name="keywords" content="canvasrenderingcontext, d, getimagedata, method, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/canvasrenderingcontext2d/getimagedata.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<header><h1>CanvasRenderingContext2D: getImageData() method</h1></header><div class="section-content">
<p> The <a href="../canvasrenderingcontext2d"><code>CanvasRenderingContext2D</code></a> method <code>getImageData()</code> of the Canvas 2D API returns an <a href="../imagedata"><code>ImageData</code></a> object representing the underlying pixel data for a specified portion of the canvas. </p> <p> This method is not affected by the canvas's transformation matrix. If the specified rectangle extends outside the bounds of the canvas, the pixels outside the canvas are transparent black in the returned <code>ImageData</code> object. </p> <div class="notecard note" id="sect1"> <p> <strong>Note:</strong> Image data can be painted onto a canvas using the <a href="putimagedata"><code>putImageData()</code></a> method. </p> </div> <p> You can find more information about <code>getImageData()</code> and general manipulation of canvas contents in <a href="../canvas_api/tutorial/pixel_manipulation_with_canvas">Pixel manipulation with canvas</a>. </p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="CLMZQ126QhebzQYaEfYYrB7wAed4WZNBYeOWsNyDA/o=" data-language="js"><span class="token function">getImageData</span><span class="token punctuation">(</span>sx<span class="token punctuation">,</span> sy<span class="token punctuation">,</span> sw<span class="token punctuation">,</span> sh<span class="token punctuation">)</span>
<span class="token function">getImageData</span><span class="token punctuation">(</span>sx<span class="token punctuation">,</span> sy<span class="token punctuation">,</span> sw<span class="token punctuation">,</span> sh<span class="token punctuation">,</span> settings<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="sx"><a href="#sx"><code>sx</code></a></dt> <dd> <p> The x-axis coordinate of the top-left corner of the rectangle from which the <code>ImageData</code> will be extracted. </p> </dd> <dt id="sy"><a href="#sy"><code>sy</code></a></dt> <dd> <p> The y-axis coordinate of the top-left corner of the rectangle from which the <code>ImageData</code> will be extracted. </p> </dd> <dt id="sw"><a href="#sw"><code>sw</code></a></dt> <dd> <p> The width of the rectangle from which the <code>ImageData</code> will be extracted. Positive values are to the right, and negative to the left. </p> </dd> <dt id="sh"><a href="#sh"><code>sh</code></a></dt> <dd> <p> The height of the rectangle from which the <code>ImageData</code> will be extracted. Positive values are down, and negative are up. </p> </dd> <dt id="settings">
<a href="#settings"><code>settings</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>An object with the following properties:</p> <ul> <li>
<code>colorSpace</code>: Specifies the color space of the image data. Can be set to <code>"srgb"</code> for the <a href="https://en.wikipedia.org/wiki/SRGB" target="_blank">sRGB color space</a> or <code>"display-p3"</code> for the <a href="https://en.wikipedia.org/wiki/DCI-P3" target="_blank">display-p3 color space</a>.</li> </ul> </dd> </dl></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p> An <a href="../imagedata"><code>ImageData</code></a> object containing the image data for the rectangle of the canvas specified. The coordinates of the rectangle's top-left corner are <code>(sx, sy)</code>, while the coordinates of the bottom corner are <code>(sx + sw - 1, sy + sh - 1)</code>. </p></div>
<h3 id="exceptions">Exceptions</h3>
<div class="section-content"><dl> <dt id="indexsizeerror">
<a href="#indexsizeerror"><code>IndexSizeError</code></a> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p>Thrown if either <code>sw</code> or <code>sh</code> are zero.</p> </dd> <dt id="securityerror">
<a href="#securityerror"><code>SecurityError</code></a> <a href="../domexception"><code>DOMException</code></a>
</dt> <dd> <p> The canvas contains or may contain pixels which were loaded from an origin other than the one from which the document itself was loaded. To avoid a <code>SecurityError</code> <a href="../domexception"><code>DOMException</code></a> being thrown in this situation, configure CORS to allow the source image to be used in this way. See <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image">Allowing cross-origin use of images and canvas</a>. </p> </dd> </dl></div>
<h2 id="examples">Examples</h2>

<h3 id="getting_image_data_from_a_canvas">Getting image data from a canvas</h3>
<div class="section-content">
<p> This example draws an image, and then uses <code>getImageData()</code> to grab a portion of the canvas. </p> <p>We use <code>getImageData()</code> to extract a slice of the image, starting at <code>(10, 20)</code>, with a width of <code>80</code> and a height of <code>230</code>. We then draw this slice three times, positioning the slices progressively below and to the right of the last slice.</p> <h4 id="html">HTML</h4> <div class="code-example">
<p class="example-header"><span class="language-name">html</span></p>
<pre data-signature="4TU9Onlm1Mxt02+AtCjZkOG9M+ANk6eaY5u49jnYn9c=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canvas<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>700<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <h4 id="javascript">JavaScript</h4> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="GXfeZsHssHgUdfnURNj+fzYYZD58RLCGOhETdMJ6xKg=" data-language="js"><span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
image<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"plumeria.jpg"</span><span class="token punctuation">;</span>
image<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">233</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> imageData <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">230</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">putImageData</span><span class="token punctuation">(</span>imageData<span class="token punctuation">,</span> <span class="token number">260</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">putImageData</span><span class="token punctuation">(</span>imageData<span class="token punctuation">,</span> <span class="token number">380</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">putImageData</span><span class="token punctuation">(</span>imageData<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <h4 id="result">Result</h4>
<div class="code-example" id="sect2">

<iframe class="sample-code-frame" title="Getting image data from a canvas sample" id="frame_getting_image_data_from_a_canvas" height="420" src="https://live.mdnplay.dev/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData/runner.html?id=getting_image_data_from_a_canvas" loading="lazy"></iframe>
</div>
</div>
<h3 id="color_space_conversion">Color space conversion</h3>
<div class="section-content">
<p>The optional <code>colorSpace</code> setting allows you to get image data in the desired format.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="8wLQbo57Bw79PuA51xffWFyYA+6JpldiFDNfOiVFEbQ=" data-language="js"><span class="token keyword">const</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">colorSpace</span><span class="token operator">:</span> <span class="token string">"display-p3"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"color(display-p3 0.5 0 0)"</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get ImageData converted to sRGB</span>
<span class="token keyword">const</span> imageData <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">colorSpace</span><span class="token operator">:</span> <span class="token string">"srgb"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>imageData<span class="token punctuation">.</span>colorSpace<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "srgb"</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://html.spec.whatwg.org/multipage/canvas.html#dom-context-2d-getimagedata-dev">HTML Standard <br><small># dom-context-2d-getimagedata-dev</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>getImageData</code></th>
<td class="bc-supports-yes">2</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes"><details><summary>2</summary>Since Firefox 5, <code>getImageData</code> now correctly accepts rectangles that extend beyond the bounds of the canvas; pixels outside the canvas are returned as transparent black and now also returns at least one pixel's worth of image data if a rectangle smaller than one pixel is specified.</details></td>
<td class="bc-supports-yes">9</td>
<td class="bc-supports-yes">9.5</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">≤37</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes"><details><summary>4</summary>Since Firefox 5, <code>getImageData</code> now correctly accepts rectangles that extend beyond the bounds of the canvas; pixels outside the canvas are returned as transparent black and now also returns at least one pixel's worth of image data if a rectangle smaller than one pixel is specified.</details></td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">3.2</td>
<td class="bc-supports-yes">1.0</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>The interface defining this method: <a href="../canvasrenderingcontext2d"><code>CanvasRenderingContext2D</code></a>
</li> <li>
<a href="../imagedata"><code>ImageData</code></a> object</li> <li><a href="putimagedata"><code>CanvasRenderingContext2D.putImageData()</code></a></li> <li><a href="../canvas_api/tutorial/pixel_manipulation_with_canvas">Pixel manipulation with canvas</a></li> </ul></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
