
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>window.requestAnimationFrame - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="The window.requestAnimationFrame() method tells the browser that you wish to perform an animation. It requests the browser to call a user-supplied &hellip;">
  <meta name="keywords" content="window, requestanimationframe, method, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/window/requestanimationframe.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<header><h1>Window: requestAnimationFrame() method</h1></header><div class="section-content">
<p> The <code>window.requestAnimationFrame()</code> method tells the browser that you wish to perform an animation. It requests the browser to call a user-supplied callback function prior to the next repaint. </p> <p> The frequency of calls to the callback function will generally match the display refresh rate. The most common refresh rate is 60hz, (60 cycles/frames per second), though 75hz, 120hz, and 144hz are also widely used. <code>requestAnimationFrame()</code> calls are paused in most browsers when running in background tabs or hidden <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe"><code>&lt;iframe&gt;</code></a>s, in order to improve performance and battery life. </p> <div class="notecard note" id="sect1"> <p> <strong>Note:</strong> Your callback function must call <code>requestAnimationFrame()</code> again if you want to animate another frame. <code>requestAnimationFrame()</code> is one-shot. </p> </div> <div class="notecard warning" id="sect2"> <p> <strong>Warning:</strong> Be sure to always use the first argument (or some other method for getting the current time) to calculate how much the animation will progress in a frame — <strong>otherwise the animation will run faster on high refresh-rate screens</strong>. For ways to do that, see the examples below. </p> </div>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="apWgWAoJDigVFYdsMsRtDtO06PnWjG5cnaAf35B2Wpw=" data-language="js"><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="parameters">Parameters</h3>
<div class="section-content"><ul> <li>
<code>callback</code> <ul> <li> The function to call when it's time to update your animation for the next repaint. This callback function is passed a single argument: a <a href="../domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> indicating the end time of the previous frame's rendering (based on the number of milliseconds since <a href="../domhighrestimestamp#the_time_origin">time origin</a>). </li> <li> The timestamp is a decimal number, in milliseconds, but with a minimal precision of 1 millisecond. For <code>Window</code> objects (not <code>Workers</code>), it is equal to <a href="../animationtimeline/currenttime"><code>document.timeline.currentTime</code></a>. This timestamp is shared between all windows that run on the same agent (that is, all same-origin windows, and more importantly same-origin iframes) — which allows synchronizing animations across multiple <code>requestAnimationFrame</code> callbacks. The timestamp value is also similar to calling <a href="../performance/now"><code>performance.now()</code></a> at the start of the callback function, but it is never the same value. </li> <li> When multiple callbacks queued by <code>requestAnimationFrame()</code> begin to fire in a single frame, each receives the same timestamp even though time has passed during the computation of every previous callback's workload. </li> </ul> </li> </ul></div>
<h3 id="return_value">Return value</h3>
<div class="section-content"><p> A <code>long</code> integer value, the request id, that uniquely identifies the entry in the callback list. This is a non-zero value, but you may not make any other assumptions about its value. You can pass this value to <a href="../window/cancelanimationframe"><code>window.cancelAnimationFrame()</code></a> to cancel the refresh callback request. </p></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p> In this example, an element is animated for 2 seconds (2000 milliseconds). The element moves at a speed of 0.1px/ms to the right, so its relative position (in CSS pixels) can be calculated in function of the time elapsed since the start of the animation (in milliseconds) with <code>0.1 * elapsed</code>. The element's final position is 200px (<code>0.1 * 2000</code>) to the right of its initial position. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="Uv/Bsnc5MmDuN7A1MkZSTGwKD6tGQDyYqQxGE2OGm8o=" data-language="js"><span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"some-element-you-want-to-animate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> start<span class="token punctuation">,</span> previousTimeStamp<span class="token punctuation">;</span>
<span class="token keyword">let</span> done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">timeStamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    start <span class="token operator">=</span> timeStamp<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> elapsed <span class="token operator">=</span> timeStamp <span class="token operator">-</span> start<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>previousTimeStamp <span class="token operator">!==</span> timeStamp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Math.min() is used here to make sure the element stops at exactly 200px</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">*</span> elapsed<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translateX(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>elapsed <span class="token operator">&lt;</span> <span class="token number">2000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Stop the animation after 2 seconds</span>
    previousTimeStamp <span class="token operator">=</span> timeStamp<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p> These next three examples illustrate different approaches to setting the zero point in time, the baseline for calculating the progress of your animation in each frame. If you want to synchronize to an external clock, such as <a href="../baseaudiocontext/currenttime"><code>BaseAudioContext.currentTime</code></a>, the highest precision available is the duration of a single frame, 16.67ms @60hz. The callback's timestamp argument represents the end of the previous frame, so the soonest your newly calculated value(s) will be rendered is the next frame. </p> <p> This example waits until the first callback executes to set <code>zero</code>. If your animation jumps to a new value when it starts, you must structure it this way. If you have no need to synchronize to anything external, such as audio, then this approach is recommended because some browsers have a multi-frame delay between the initial call to <code>requestAnimationFrame()</code> and the first call to the callback function. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="WglqffLFvIiVCWWGVvqoqJUVoCd1UZB+pPkBxjJ1c5M=" data-language="js"><span class="token keyword">let</span> zero<span class="token punctuation">;</span>
<span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>firstFrame<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">firstFrame</span><span class="token punctuation">(</span><span class="token parameter">timeStamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  zero <span class="token operator">=</span> timeStamp<span class="token punctuation">;</span>
  <span class="token function">animate</span><span class="token punctuation">(</span>timeStamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">timeStamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">(</span>timeStamp <span class="token operator">-</span> zero<span class="token punctuation">)</span> <span class="token operator">/</span> duration<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">animate</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p> This example uses <a href="../animationtimeline/currenttime"><code>document.timeline.currentTime</code></a> to set a zero value prior to the first call to <code>requestAnimationFrame</code>. <a href="../animationtimeline/currenttime"><code>document.timeline.currentTime</code></a> aligns with the timeStamp argument, so the zero value is equivalent to the 0th frame's timestamp. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="gs67YNkPJ5KvklDNfzySoGvZEc1MX9r9eOreNOtem2w=" data-language="js"><span class="token keyword">const</span> zero <span class="token operator">=</span> document<span class="token punctuation">.</span>timeline<span class="token punctuation">.</span>currentTime<span class="token punctuation">;</span>
<span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">timeStamp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">(</span>timeStamp <span class="token operator">-</span> zero<span class="token punctuation">)</span> <span class="token operator">/</span> duration<span class="token punctuation">;</span> <span class="token comment">// animation-timing-function: linear</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">animate</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p> This example animates using <a href="../performance/now"><code>performance.now()</code></a> instead of the callback's timestamp value. You might use this if you want to achieve slightly higher synchronization precision, though the extra degree of precision is variable and not much of an increase. Note: This example does not allow you to reliably synchronize animation callbacks. </p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="5ZumzPTNzf5rNPfyW+68zHsqErZHbIz3UgVDgbk+xMU=" data-language="js"><span class="token keyword">const</span> zero <span class="token operator">=</span> performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>animate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">(</span>performance<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> zero<span class="token punctuation">)</span> <span class="token operator">/</span> duration<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">t</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">animate</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-animationframeprovider-requestanimationframe">HTML Standard <br><small># dom-animationframeprovider-requestanimationframe</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody><tr>
<th><code>requestAnimationFrame</code></th>
<td class="bc-supports-yes">2410</td>
<td class="bc-supports-yes"><details><summary>12</summary>Before version 17, Edge does not reliably fire <code>requestAnimationFrame</code> before the paint cycle.</details></td>
<td class="bc-supports-yes">
<details><summary>23</summary>Callback parameter is a <code>DOMHighResTimestamp</code>. This means ten microsecond precision and zero time as <code>performance.now()</code>.</details><details><summary>11–42</summary>Callback parameter is a <code>DOMTimestamp</code>. This means millisecond precision and zero time as <code>Date.now()</code>.</details><details><summary>4–11</summary>Could be called with no input parameters.</details>
</td>
<td class="bc-supports-yes"><details><summary>10</summary>Internet Explorer does not reliably fire <code>requestAnimationFrame</code> before the paint cycle.</details></td>
<td class="bc-supports-yes">1515</td>
<td class="bc-supports-yes">76</td>
<td class="bc-supports-yes">≤374.4</td>
<td class="bc-supports-yes">2518</td>
<td class="bc-supports-yes">2314–42</td>
<td class="bc-supports-yes">1414</td>
<td class="bc-supports-yes">76</td>
<td class="bc-supports-yes">1.51.0</td>
</tr></tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="../window/cancelanimationframe"><code>Window.cancelAnimationFrame()</code></a></li> <li><a href="../offscreencanvas"><code>OffscreenCanvas</code></a></li> <li><a href="../dedicatedworkerglobalscope">DedicatedWorkerGlobalScope</a></li> <li>
<a href="https://www.paulirish.com/2011/requestanimationframe-for-smart-animating/" target="_blank">requestAnimationFrame for smart animating</a> - Blog post</li> <li>
<a href="https://hacks.mozilla.org/2011/08/animating-with-javascript-from-setinterval-to-requestanimationframe/" target="_blank">Animating with JavaScript: from setInterval to requestAnimationFrame</a> - Blog post</li> <li><a href="https://www.testufo.com/#test=animation-time-graph" target="_blank">TestUFO: Test your web browser for requestAnimationFrame() Timing Deviations</a></li> </ul></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
