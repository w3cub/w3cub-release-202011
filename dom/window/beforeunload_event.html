
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Window.beforeunload Event - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="The beforeunload event is fired when the window, the document and its resources are about to be unloaded. The document is still visible and the &hellip;">
  <meta name="keywords" content="window, beforeunload, event, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/window/beforeunload_event.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>Window: beforeunload event</h1>
<div class="section-content">
<p>The <code>beforeunload</code> event is fired when the window, the document and its resources are about to be unloaded. The document is still visible and the event is still cancelable at this point.</p> <p>This event enables a web page to trigger a confirmation dialog asking the user if they really want to leave the page. If the user confirms, the browser navigates to the new page, otherwise it cancels the navigation.</p> <p>According to the specification, to show the confirmation dialog an event handler should call <a href="../event/preventdefault"><code>preventDefault()</code></a> on the event.</p> <p>The HTML specification states that calls to <a href="alert"><code>window.alert()</code></a>, <a href="confirm"><code>window.confirm()</code></a>, and <a href="prompt"><code>window.prompt()</code></a> methods may be ignored during this event. See the <a href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#user-prompts" target="_blank">HTML specification</a> for more details.</p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content">
<p>Use the event name in methods like <a href="../eventtarget/addeventlistener"><code>addEventListener()</code></a>, or set an event handler property.</p> <div class="code-example"><pre data-language="js"><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"beforeunload"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function-variable function">onbeforeunload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre></div>
</div>
<h2 id="event_type">Event type</h2>
<div class="section-content"><p>A <a href="../beforeunloadevent"><code>BeforeUnloadEvent</code></a>. Inherits from <a href="../event"><code>Event</code></a>.</p></div>
<h2 id="event_handler_aliases">Event handler aliases</h2>
<div class="section-content">
<p>In addition to the <code>Window</code> interface, the event handler property <code>onbeforeunload</code> is also available on the following targets:</p> <ul> <li><a href="../htmlbodyelement"><code>HTMLBodyElement</code></a></li> <li><a href="../htmlframesetelement"><code>HTMLFrameSetElement</code></a></li> <li><a href="../svgsvgelement"><code>SVGSVGElement</code></a></li> </ul>
</div>
<h2 id="security">Security</h2>
<div class="section-content"><p><a href="https://developer.mozilla.org/en-US/docs/Web/Security/User_activation">Transient user activation</a> is required. The user has to interact with the page or a UI element in order for this feature to work.</p></div>
<h2 id="usage_notes">Usage notes</h2>
<div class="section-content">
<p>The <code>beforeunload</code> event suffers from the same problems as the <a href="unload_event"><code>unload</code></a> event.</p> <p>Especially on mobile, the <code>beforeunload</code> event is not reliably fired. For example, the <code>beforeunload</code> event is not fired at all in the following scenario:</p> <ol> <li>A mobile user visits your page.</li> <li>The user then switches to a different app.</li> <li>Later, the user closes the browser from the app manager.</li> </ol> <p>The <code>beforeunload</code> event is not compatible with the <a href="https://web.dev/bfcache/" target="_blank">back/forward cache</a> (bfcache), because many pages using this event assume that the page will not continue to exist after the event is fired. To combat this, browsers will not place pages in the bfcache if they have <code>beforeunload</code> listeners, and this is bad for performance.</p> <p>However, unlike the <code>unload</code> event, there is a legitimate use case for the <code>beforeunload</code> event: the scenario where the user has entered unsaved data that will be lost if the page is unloaded.</p> <p>It is recommended that developers listen for <code>beforeunload</code> only in this scenario, and only when they actually have unsaved changes, so as to minimize the effect on performance. See the Examples section below for an example of this.</p> <p>See the <a href="https://developer.chrome.com/blog/page-lifecycle-api/" target="_blank">Page Lifecycle API</a> guide for more information about the problems associated with the <code>beforeunload</code> event.</p>
</div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>In this example a page listens for changes to a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/text">text <code>input</code></a>. If the element contains a value, it adds a listener for <code>beforeunload</code>. If the element is empty, it removes the listener:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">const</span> <span class="token function-variable function">beforeUnloadListener</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nameInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

nameInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"beforeunload"</span><span class="token punctuation">,</span> beforeUnloadListener<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">capture</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"beforeunload"</span><span class="token punctuation">,</span> beforeUnloadListener<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">capture</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody>
<tr><td><a href="https://html.spec.whatwg.org/multipage/indices.html#event-beforeunload">HTML Standard <br><small># event-beforeunload</small></a></td></tr>
<tr><td><a href="https://html.spec.whatwg.org/multipage/webappapis.html#handler-window-onbeforeunload">HTML Standard <br><small># handler-window-onbeforeunload</small></a></td></tr>
</tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>beforeunload_event</code></th>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">3</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">1.0</td>
</tr>
<tr>
<th><code>event_returnvalue_activation</code></th>
<td class="bc-supports-yes">30</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">6</td>
<td class="bc-supports-yes">9</td>
<td class="bc-supports-yes">17</td>
<td class="bc-supports-yes">8</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">30</td>
<td class="bc-supports-yes">6</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">2.0</td>
</tr>
<tr>
<th><code>preventdefault_activation</code></th>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">12–79</td>
<td class="bc-supports-yes">6</td>
<td class="bc-supports-yes">9</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">11</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">6</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
<tr>
<th><code>return_string_activation</code></th>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">9</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">3</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">1.0</td>
</tr>
</tbody>
</table></div>
<h2 id="compatibility_notes">Compatibility notes</h2>
<div class="section-content">
<p> The HTML specification states that authors should use the <a href="../event/preventdefault"><code>Event.preventDefault()</code></a> method instead of using <a href="../event/returnvalue"><code>Event.returnValue</code></a> to prompt the user. However, this is not yet supported by all browsers. </p> <p> When this event returns (or sets the <code>returnValue</code> property to) a value other than <code>null</code> or <code>undefined</code>, the user will be prompted to confirm the page unload. In older browsers, the return value of the event is displayed in this dialog. Since Firefox 44, Chrome 51, Opera 38, and Safari 9.1, a generic string not under the control of the webpage is shown instead of the returned string. For example: </p> <ul> <li> Firefox displays the string, "This page is asking you to confirm that you want to leave - data you have entered may not be saved." (see <a href="https://bugzil.la/588292" target="_blank">Firefox bug 588292</a>). </li> <li>Chrome displays the string, "Do you want to leave the site? Changes you made may not be saved." (see <a href="https://chromestatus.com/feature/5349061406228480" target="_blank">Chrome Platform Status</a>).</li> </ul> <p> In some browsers, calls to <a href="alert"><code>window.alert()</code></a>, <a href="confirm"><code>window.confirm()</code></a>, and <a href="prompt"><code>window.prompt()</code></a> may be ignored during this event. See the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#user-prompts" target="_blank">HTML specification</a> for more details. </p> <p> Note also, that various browsers ignore the result of the event and do not ask the user for confirmation at all. In such cases, the document will always be unloaded automatically. Firefox has a switch named <code>dom.disable_beforeunload</code> in <em>about:config</em> to enable this behavior. As of Chrome 60, the confirmation <a href="https://chromestatus.com/feature/5082396709879808" target="_blank">will be skipped</a> if the user has not performed a gesture in the frame or page since it was loaded. Pressing F5 in the page seems to count as user interaction, whereas mouse-clicking the refresh arrow or pressing F5 with Chrome DevTools focused does not count as user interaction (as of Chrome 81). </p>
</div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>Related events: <a href="domcontentloaded_event"><code>DOMContentLoaded</code></a>, <a href="../document/readystatechange_event"><code>readystatechange</code></a>, <a href="load_event"><code>load</code></a>, <a href="unload_event"><code>unload</code></a>
</li> <li><a href="https://html.spec.whatwg.org/#prompt-to-unload-a-document" target="_blank">Unloading Documents — Prompt to unload a document</a></li> <li><a href="https://developer.chrome.com/blog/chrome-51-deprecations/#remove-custom-messages-in-onbeforeunload-dialogs" target="_blank">Remove Custom Messages in onbeforeload Dialogs after Chrome 51</a></li> <li>
<a href="https://www.igvita.com/2015/11/20/dont-lose-user-and-app-state-use-page-visibility/" target="_blank">Don't lose user and app state, use Page Visibility</a> explains in detail why you should use <code>visibilitychange</code>, not <code>beforeunload</code>/<code>unload</code>.</li> <li>
<a href="https://developer.chrome.com/blog/page-lifecycle-api/#developer-recommendations-for-each-state" target="_blank">Page Lifecycle API</a> gives best-practices guidance on handling page lifecycle behavior in your web applications.</li> <li>
<a href="https://github.com/GoogleChromeLabs/page-lifecycle" target="_blank">PageLifecycle.js</a>: a JavaScript library that deals with cross-browser inconsistencies in page lifecycle behavior.</li> <li>
<a href="https://web.dev/bfcache/" target="_blank">Back/forward cache</a> explains what the back/forward cache is, and its implications for various page lifecycle events.</li> </ul></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
