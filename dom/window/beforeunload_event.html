
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Window.beforeunload Event - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="The beforeunload event is fired when the current window, contained document, and associated resources are about to be unloaded. The document is &hellip;">
  <meta name="keywords" content="window, beforeunload, event, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/window/beforeunload_event.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<header><h1>Window: beforeunload event</h1></header><div class="section-content">
<p>The <code>beforeunload</code> event is fired when the current window, contained document, and associated resources are about to be unloaded. The document is still visible and the event is still cancelable at this point.</p> <p>The main use case for this event is to trigger a browser-generated confirmation dialog that asks users to confirm if they <em>really</em> want to leave the page when they try to close or reload it, or navigate somewhere else. This is intended to help prevent loss of unsaved data.</p> <p>The dialog can be triggered in the following ways:</p> <ul> <li>Calling the event object's <a href="../event/preventdefault"><code>preventDefault()</code></a> method.</li> <li>Setting the event object's <a href="../beforeunloadevent/returnvalue"><code>returnValue</code></a> property to a non-empty string value or any other <a href="https://developer.mozilla.org/en-US/docs/Glossary/Truthy">truthy</a> value.</li> <li>Returning any truthy value from the event handler function, e.g. <code>return "string"</code>. Note that this only works when the function is attached via the <code>onbeforeunload</code> property, not the <a href="../eventtarget/addeventlistener"><code>addEventListener()</code></a> method. This behavior is consistent across modern versions of Firefox, Safari, and Chrome.</li> </ul> <p>The last two machanisms are legacy features; best practice is to trigger the dialog by invoking <code>preventDefault()</code> on the event object.</p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content">
<p>Use the event name in methods like <a href="../eventtarget/addeventlistener"><code>addEventListener()</code></a>, or set an event handler property.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="vjlTTmcA29SeDwM2DLkeHmgH7x7nA7f3Q6SMelAeO0k=" data-language="js"><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"beforeunload"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function-variable function">onbeforeunload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="event_type">Event type</h2>
<div class="section-content"><p>A <a href="../beforeunloadevent"><code>BeforeUnloadEvent</code></a>. Inherits from <a href="../event"><code>Event</code></a>.</p></div>
<h2 id="usage_notes">Usage notes</h2>
<div class="section-content">
<p>To trigger the dialog being shown when the user closes or navigates the tab, a <code>beforeunload</code> event handler function should call <a href="../event/preventdefault"><code>preventDefault()</code></a> on the event object. You should note that modern implementations:</p> <ul> <li>Require <a href="https://developer.mozilla.org/en-US/docs/Glossary/Sticky_activation">sticky activation</a> for the dialog to be displayed. In other words, the browser will only show the dialog box if the frame or any embedded frame receives a user gesture or user interaction. If the user has never interacted with the page, then there is no user data to save, so no legitimate use case for the dialog.</li> <li>Only show a generic browser-specified string in the displayed dialog. This cannot be controlled by the webpage code.</li> </ul> <p>The <code>beforeunload</code> event suffers from some problems:</p> <ul> <li>It is not reliably fired, especially on mobile platforms. For example, the <code>beforeunload</code> event is not fired at all in the following scenario: <ol> <li>A mobile user visits your page.</li> <li>The user then switches to a different app.</li> <li>Later, the user closes the browser from the app manager.</li> </ol> <div class="notecard note" id="sect1"> <p><strong>Note:</strong> It is recommended to use the <a href="../document/visibilitychange_event"><code>visibilitychange</code></a> event as a more reliable signal for automatic app state saving that gets around problems like the above. See <a href="https://www.igvita.com/2015/11/20/dont-lose-user-and-app-state-use-page-visibility/" target="_blank">Don't lose user and app state, use Page Visibility</a> for more details.</p> </div> </li> <li>In Firefox, <code>beforeunload</code> is not compatible with the <a href="https://web.dev/bfcache/" target="_blank">back/forward cache</a> (bfcache): that is, Firefox will not place pages in the bfcache if they have <code>beforeunload</code> listeners, and this is bad for performance.</li> </ul> <p>It is therefore recommended that developers listen for <code>beforeunload</code> only when users have unsaved changes so that the dialog mentioned above can be used to warn them about impending data loss, and remove the listener again when it is not needed. Listening for <code>beforeunload</code> sparingly can minimize the effect on performance.</p>
</div>
<h2 id="event_handler_aliases">Event handler aliases</h2>
<div class="section-content">
<p>In addition to the <code>Window</code> interface, the event handler property <code>onbeforeunload</code> is also available on the following targets:</p> <ul> <li><a href="../htmlbodyelement"><code>HTMLBodyElement</code></a></li> <li><a href="../htmlframesetelement"><code>HTMLFrameSetElement</code></a></li> <li><a href="../svgsvgelement"><code>SVGSVGElement</code></a></li> </ul>
</div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>In the following example we have an HTML text <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input"><code>&lt;input&gt;</code></a> to represent some data that could be changed and require saving:</p> <div class="code-example">
<p class="example-header"><span class="language-name">html</span></p>
<pre data-signature="YbX3F0FQ7Thonv9B/929qIllzejsgNlidgnkJbZnC1Q=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</pre>
</div> <p>Our JavaScript attaches an <a href="../htmlelement/input_event"><code>input</code></a> event listener to the <code>&lt;input&gt;</code> element that listens for changes in the inputted value. When the value is updated to a non-empty value, a <a href="beforeunload_event" aria-current="page"><code>beforeunload</code></a> event listener is attached to the <a href="../window"><code>Window</code></a> object.</p> <p>If the value becomes an empty string again (i.e. the value is deleted), the <code>beforeunload</code> event listener is removed again — as mentioned above in the <a href="#usage_notes">Usage notes</a>, the listener should be removed when there is no unsaved data to warn about.</p> <p>The <code>beforeunload</code> event handler function invokes <code>preventDefault()</code> to trigger the warning dialog when the user closes or navigates the tab.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="uJwRp2KOGcMfaFQeUuGtmBR34FWOGT/kA1lCG5QLODA=" data-language="js"><span class="token keyword">const</span> <span class="token function-variable function">beforeUnloadHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Equivalent to the following legacy mechanisms</span>
  <span class="token comment">//   event.returnValue = "string";</span>
  <span class="token comment">//   return "string"; (only works with onbeforeunload)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> nameInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

nameInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"beforeunload"</span><span class="token punctuation">,</span> beforeUnloadHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">"beforeunload"</span><span class="token punctuation">,</span> beforeUnloadHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>When the <code>&lt;input&gt;</code> value is non-empty, if you try to close, navigate, or reload the page the browser displays the warning dialog. Try it out:</p>
<div class="code-example" id="sect2">

<iframe class="sample-code-frame" title="Examples sample" id="frame_examples" width="100%" height="60" src="https://live.mdnplay.dev/en-US/docs/Web/API/Window/beforeunload_event/runner.html?id=examples" loading="lazy"></iframe>
</div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody>
<tr><td><a href="https://html.spec.whatwg.org/multipage/indices.html#event-beforeunload">HTML Standard <br><small># event-beforeunload</small></a></td></tr>
<tr><td><a href="https://html.spec.whatwg.org/multipage/webappapis.html#handler-window-onbeforeunload">HTML Standard <br><small># handler-window-onbeforeunload</small></a></td></tr>
</tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>beforeunload_event</code></th>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">3</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">1.0</td>
</tr>
<tr>
<th><code>event_returnvalue_activation</code></th>
<td class="bc-supports-yes">119<details><summary>30–119</summary>Before Chrome 119, an empty string incorrectly activated the confirmation dialog.</details>
</td>
<td class="bc-supports-yes">119<details><summary>79–119</summary>Before Edge 119, an empty string incorrectly activated the confirmation dialog.</details>
</td>
<td class="bc-supports-yes">6</td>
<td class="bc-supports-yes">9</td>
<td class="bc-supports-yes"><details><summary>17</summary>Before Opera false, an empty string incorrectly activated the confirmation dialog.</details></td>
<td class="bc-supports-yes">8</td>
<td class="bc-supports-yes"><details><summary>4.4</summary>Before Chrome 119, an empty string incorrectly activated the confirmation dialog.</details></td>
<td class="bc-supports-yes">119<details><summary>30–119</summary>Before Chrome 119, an empty string incorrectly activated the confirmation dialog.</details>
</td>
<td class="bc-supports-yes">6</td>
<td class="bc-supports-yes"><details><summary>18</summary>Before Opera false, an empty string incorrectly activated the confirmation dialog.</details></td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes"><details><summary>2.0</summary>Before Samsung Internet false, an empty string incorrectly activated the confirmation dialog.</details></td>
</tr>
<tr>
<th><code>generic_string_displayed</code></th>
<td class="bc-supports-yes">51</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">44</td>
<td class="bc-supports-yes">11</td>
<td class="bc-supports-yes">38</td>
<td class="bc-supports-yes">9.1</td>
<td class="bc-supports-yes">51</td>
<td class="bc-supports-yes">51</td>
<td class="bc-supports-yes">44</td>
<td class="bc-supports-yes">41</td>
<td class="bc-supports-yes">9.3</td>
<td class="bc-supports-yes">5.0</td>
</tr>
<tr>
<th><code>preventdefault_activation</code></th>
<td class="bc-supports-yes">119</td>
<td class="bc-supports-yes">11912–79</td>
<td class="bc-supports-yes">6</td>
<td class="bc-supports-yes">9</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">11</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">119</td>
<td class="bc-supports-yes">6</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-no">No</td>
</tr>
<tr>
<th><code>return_string_activation</code></th>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">1</td>
<td class="bc-supports-yes">9</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-yes">3</td>
<td class="bc-supports-yes">4.4</td>
<td class="bc-supports-yes">18</td>
<td class="bc-supports-yes">4</td>
<td class="bc-supports-yes">12</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">1.0</td>
</tr>
</tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>
<a href="../beforeunloadevent"><code>BeforeUnloadEvent</code></a> interface</li> <li>Related events: <ul> <li><a href="../document/domcontentloaded_event"><code>DOMContentLoaded</code></a></li> <li><a href="../document/readystatechange_event"><code>readystatechange</code></a></li> <li><a href="load_event"><code>load</code></a></li> <li><a href="unload_event"><code>unload</code></a></li> </ul> </li> <li>
<a href="https://developer.chrome.com/blog/page-lifecycle-api/#developer-recommendations-for-each-state" target="_blank">Page Lifecycle API</a> provides more useful guidance on handling page lifecycle behavior in your web apps.</li> </ul></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
