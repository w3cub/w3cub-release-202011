
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>ReadableStreamBYOBRequest - Web APIs - W3cubDocs</title>
  
  <meta name="description" content="The ReadableStreamBYOBRequest interface of the Streams API represents a &#34;pull request&#34; for data from an underlying source that will made as &hellip;">
  <meta name="keywords" content="readablestreambyobrequest, web, apis, dom">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/dom/readablestreambyobrequest.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/dom.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/dom/" class="_nav-link" title="" style="margin-left:0;">Web APIs</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<h1>ReadableStreamBYOBRequest</h1>
<div class="section-content">
<p>The <code>ReadableStreamBYOBRequest</code> interface of the <a href="streams_api">Streams API</a> represents a "pull request" for data from an underlying source that will made as a zero-copy transfer to a consumer (bypassing the stream's internal queues).</p> <p> <code>ReadableStreamBYOBRequest</code> objects are created in "BYOB mode" when a consumer makes a request for data and the stream's internal queue is <em>empty</em>. (The stream will resolve the consumer's request directly if it already has buffered data). An underlying byte source can access active BYOB requests through its controller's <a href="readablebytestreamcontroller/byobrequest"><code>ReadableByteStreamController.byobRequest</code></a> property, which will be set to <code>null</code> if there is no outstanding request. </p> <p> An underlying source that supports "BYOB mode" should check for <a href="readablebytestreamcontroller/byobrequest"><code>ReadableByteStreamController.byobRequest</code></a> and must use it for transferring data, if present. If data arrives from the underlying source when <a href="readablebytestreamcontroller/byobrequest"><code>ReadableByteStreamController.byobRequest</code></a> is <code>null</code>, it can be queued using <a href="readablebytestreamcontroller/enqueue"><code>ReadableByteStreamController.enqueue()</code></a>. This might happen when an underlying push source receives new data when the stream's internal buffers are not empty. </p> <p> An underlying source uses the request by writing data to the BYOB request's <a href="#readablestreambyobrequest.view"><code>view</code></a> and then calling <a href="#readablestreambyobrequest.respond"><code>respond()</code></a>, or by calling <a href="#readablestreambyobrequest.respondwithnewview"><code>respondWithNewView()</code></a> and passing a new view as an argument. Note that the "new view" must actually be a view over the <em>same</em> buffer as the original <code>view</code>, starting at the same offset. This might be used to return a shorter buffer if the underlying source is unable to fill the entire original view. </p> <p> Note that a <a href="readablebytestreamcontroller"><code>ReadableByteStreamController</code></a> is only created for underlying sources when <code>type="bytes"</code> is specified for the source in the <a href="readablestream/readablestream#type"><code>ReadableStream()</code> constructor</a>. "BYOB mode" is enabled when either <a href="readablestream/readablestream#autoallocatechunksize"><code>autoAllocateChunkSize</code></a> is specified in the <a href="readablestream/readablestream#autoallocatechunksize"><code>ReadableController()</code> constructor</a> or when using a <a href="readablestreambyobreader"><code>ReadableStreamBYOBReader</code></a> (typically constructed by calling <a href="readablestream/getreader"><code>ReadableStream.getReader()</code></a> with the argument <code>{ mode: 'byob' }</code>). </p>
</div>
<h2 id="constructor">Constructor</h2>
<div class="section-content"><p>None. <code>ReadableStreamBYOBRequest</code> instance is created automatically by <code>ReadableByteStreamController</code> as needed.</p></div>
<h2 id="instance_properties">Instance properties</h2>
<div class="section-content"><dl> <dt id="readablestreambyobrequest.view">
<a href="readablestreambyobrequest/view"><code>ReadableStreamBYOBRequest.view</code></a> <span class="badge inline readonly">Read only </span>
</dt> <dd> <p> Returns the current view. This is a view on a buffer that will be transferred to the consumer when <code>ReadableStreamBYOBRequest.respond()</code> is called. </p> </dd> </dl></div>
<h2 id="instance_methods">Instance methods</h2>
<div class="section-content"><dl> <dt id="readablestreambyobrequest.respond"><a href="readablestreambyobrequest/respond"><code>ReadableStreamBYOBRequest.respond()</code></a></dt> <dd> <p> Signals the associated readable byte stream that the specified number of bytes were written into the current <a href="#readablestreambyobrequest.view"><code>view</code></a>, which then causes the pending request from the consumer to be resolved. Note that after this method is called the <code>view</code> is transferred and no longer modifiable. </p> </dd> <dt id="readablestreambyobrequest.respondwithnewview"><a href="readablestreambyobrequest/respondwithnewview"><code>ReadableStreamBYOBRequest.respondWithNewView()</code></a></dt> <dd> <p> Signals to the associated readable byte stream view passed as an argument should be transferred to the consumer of the readable byte stream. This new view must use the same buffer as the original <a href="#readablestreambyobrequest.view"><code>view</code></a>, start at the same offset, and be the same length or shorter. Note that after this method is called the <code>view</code> is transferred and no longer modifiable. </p> </dd> </dl></div>
<h2 id="examples">Examples</h2>
<div class="section-content">
<p>The following code is taken from the live example in <a href="streams_api/using_readable_byte_streams#creating_a_readable_socket_push_byte_stream">Using readable byte streams &gt; Creating a readable socket push byte stream</a>.</p> <p> A push underlying byte source with data to transfer should first check that <a href="readablebytestreamcontroller/byobrequest"><code>controller.byobRequest</code></a> is non-<code>null</code>. Pul A pull underlying byte source would only need this check if auto chunk allocation was not enabled and it was used with a default reader. </p> <div class="code-example"><pre data-language="js"><span class="token keyword">if</span> <span class="token punctuation">(</span>controller<span class="token punctuation">.</span>byobRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* code to transfer data */</span>
<span class="token punctuation">}</span>
</pre></div> <p> There are two ways to read data into a <code>ReadableStreamBYOBRequest</code> and then transfer it. The first is to write the data into the <a href="readablestreambyobrequest/view"><code>ReadableStreamBYOBRequest.view</code></a> property and then call <a href="readablestreambyobrequest/respond"><code>ReadableStreamBYOBRequest.respond()</code></a> to indicate the amount of data to be transferred. After the operation the <code>byobRequest.view</code> is detached and the request should be discarded. </p> <p>The code below shows this case using a hypothetical <code>readInto()</code> method to copy data into the view:</p> <div class="code-example"><pre data-language="js"><span class="token keyword">const</span> v <span class="token operator">=</span> controller<span class="token punctuation">.</span>byobRequest<span class="token punctuation">.</span>view<span class="token punctuation">;</span>
bytesRead <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">readInto</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span> v<span class="token punctuation">.</span>byteOffset<span class="token punctuation">,</span> v<span class="token punctuation">.</span>byteLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
controller<span class="token punctuation">.</span>byobRequest<span class="token punctuation">.</span><span class="token function">respond</span><span class="token punctuation">(</span>bytesRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div> <p> The other approach is to call <a href="readablestreambyobrequest/respondwithnewview"><code>ReadableStreamBYOBRequest.respondWithNewView()</code></a> passing your own view on the same underlying backing data. Note that this just another way of specifying the range of the underlying buffer/memory backing that is actually transferred. The <code>respondWithNewView</code> equivalent to the code above would be: </p> <div class="code-example"><pre data-language="js"><span class="token keyword">const</span> v <span class="token operator">=</span> controller<span class="token punctuation">.</span>byobRequest<span class="token punctuation">.</span>view<span class="token punctuation">;</span>
bytesRead <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">readInto</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span> v<span class="token punctuation">.</span>byteOffset<span class="token punctuation">,</span> v<span class="token punctuation">.</span>byteLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span> v<span class="token punctuation">.</span>byteOffset<span class="token punctuation">,</span> bytesRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
controller<span class="token punctuation">.</span>byobRequest<span class="token punctuation">.</span><span class="token function">respondWithNewView</span><span class="token punctuation">(</span>newView<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div>
</div>
<h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://streams.spec.whatwg.org/#rs-byob-request-class">Streams Standard <br><small># rs-byob-request-class</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Internet Explorer</th>
<th>Opera</th>
<th>Safari</th>
<th>WebView Android</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
</tr>
</thead>
<tbody>
<tr>
<th><code>ReadableStreamBYOBRequest</code></th>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">75</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15.0</td>
</tr>
<tr>
<th><code>respond</code></th>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">75</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15.0</td>
</tr>
<tr>
<th><code>respondWithNewView</code></th>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">75</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15.0</td>
</tr>
<tr>
<th><code>view</code></th>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">75</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">89</td>
<td class="bc-supports-yes">102</td>
<td class="bc-supports-yes">63</td>
<td class="bc-supports-no">No</td>
<td class="bc-supports-yes">15.0</td>
</tr>
</tbody>
</table></div>
<h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li><a href="streams_api/using_readable_byte_streams">Using readable byte stream</a></li> </ul></div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamBYOBRequest" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamBYOBRequest</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
