
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.vsphere - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Manage VMware vCenter servers and ESXi hosts. ">
  <meta name="keywords" content="salt, modules, vsphere, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.vsphere.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.vsphere</h1> <p>Manage VMware vCenter servers and ESXi hosts.</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2015.8.4.</span></p> </div> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">codeauthor:</th>
<td class="field-body">Alexandru Bleotu &lt;<a class="reference external" href="mailto:alexandru.bleotu%40morganstaley.com">alexandru<span>.</span>bleotu<span>@</span>morganstaley<span>.</span>com</a>&gt;</td> </tr> </tbody> </table> <div class="section" id="dependencies"> <h2>Dependencies</h2> <ul class="simple"> <li>pyVmomi Python Module</li> <li>ESXCLI</li> </ul> <div class="section" id="pyvmomi"> <h3>pyVmomi</h3> <p>PyVmomi can be installed via pip:</p> <pre class="highlight-bash notranslate" data-language="bash">pip install pyVmomi</pre> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Version 6.0 of pyVmomi has some problems with SSL error handling on certain versions of Python. If using version 6.0 of pyVmomi, Python 2.7.9, or newer must be present. This is due to an upstream dependency in pyVmomi 6.0 that is not supported in Python versions 2.7 to 2.7.8. If the version of Python is not in the supported range, you will need to install an earlier version of pyVmomi. See <a class="reference external" href="https://github.com/saltstack/salt/issues/29537">Issue #29537</a> for more information.</p> </div> <p>Based on the note above, to install an earlier version of pyVmomi than the version currently listed in PyPi, run the following:</p> <pre class="highlight-bash notranslate" data-language="bash">pip install pyVmomi==5.5.0.2014.1.1</pre> <p>The 5.5.0.2014.1.1 is a known stable version that this original vSphere Execution Module was developed against.</p> </div> <div class="section" id="esxcli"> <h3>ESXCLI</h3> <p>Currently, about a third of the functions used in the vSphere Execution Module require the ESXCLI package be installed on the machine running the Proxy Minion process.</p> <p>The ESXCLI package is also referred to as the VMware vSphere CLI, or vCLI. VMware provides vCLI package installation instructions for <a class="reference external" href="http://pubs.vmware.com/vsphere-55/index.jsp#com.vmware.vcli.getstart.doc/cli_install.4.2.html">vSphere 5.5</a> and <a class="reference external" href="http://pubs.vmware.com/vsphere-60/index.jsp#com.vmware.vcli.getstart.doc/cli_install.4.2.html">vSphere 6.0</a>.</p> <p>Once all of the required dependencies are in place and the vCLI package is installed, you can check to see if you can connect to your ESXi host or vCenter server by running the following command:</p> <pre class="highlight-bash notranslate" data-language="bash">esxcli -s &lt;host-location&gt; -u &lt;username&gt; -p &lt;password&gt; system syslog config get</pre> <p>If the connection was successful, ESXCLI was successfully installed on your system. You should see output related to the ESXi host's syslog configuration.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p>Be aware that some functionality in this execution module may depend on the type of license attached to a vCenter Server or ESXi host(s).</p> <p>For example, certain services are only available to manipulate service state or policies with a VMware vSphere Enterprise or Enterprise Plus license, while others are available with a Standard license. The <code class="docutils literal notranslate"><span class="pre">ntpd</span></code> service is restricted to an Enterprise Plus license, while <code class="docutils literal notranslate"><span class="pre">ssh</span></code> is available via the Standard license.</p> <p class="last">Please see the <a class="reference external" href="https://www.vmware.com/products/vsphere/compare">vSphere Comparison</a> page for more information.</p> </div> </div> </div> <div class="section" id="about"> <h2>About</h2> <p>This execution module was designed to be able to handle connections both to a vCenter Server, as well as to an ESXi host. It utilizes the pyVmomi Python library and the ESXCLI package to run remote execution functions against either the defined vCenter server or the ESXi host.</p> <p>Whether or not the function runs against a vCenter Server or an ESXi host depends entirely upon the arguments passed into the function. Each function requires a <code class="docutils literal notranslate"><span class="pre">host</span></code> location, <code class="docutils literal notranslate"><span class="pre">username</span></code>, and <code class="docutils literal notranslate"><span class="pre">password</span></code>. If the credentials provided apply to a vCenter Server, then the function will be run against the vCenter Server. For example, when listing hosts using vCenter credentials, you'll get a list of hosts associated with that vCenter Server:</p> <pre class="highlight-bash notranslate" data-language="bash"># salt my-minion vsphere.list_hosts &lt;vcenter-ip&gt; &lt;vcenter-user&gt; &lt;vcenter-password&gt;
my-minion:
- esxi-1.example.com
- esxi-2.example.com</pre> <p>However, some functions should be used against ESXi hosts, not vCenter Servers. Functionality such as getting a host's coredump network configuration should be performed against a host and not a vCenter server. If the authentication information you're using is against a vCenter server and not an ESXi host, you can provide the host name that is associated with the vCenter server in the command, as a list, using the <code class="docutils literal notranslate"><span class="pre">host_names</span></code> or <code class="docutils literal notranslate"><span class="pre">esxi_host</span></code> kwarg. For example:</p> <pre class="highlight-bash notranslate" data-language="bash"># salt my-minion vsphere.get_coredump_network_config &lt;vcenter-ip&gt; &lt;vcenter-user&gt;         &lt;vcenter-password&gt; esxi_hosts='[esxi-1.example.com, esxi-2.example.com]'
my-minion:
----------
    esxi-1.example.com:
        ----------
        Coredump Config:
            ----------
            enabled:
                False
    esxi-2.example.com:
        ----------
        Coredump Config:
            ----------
            enabled:
                True
            host_vnic:
                vmk0
            ip:
                coredump-location.example.com
            port:
                6500</pre> <p>You can also use these functions against an ESXi host directly by establishing a connection to an ESXi host using the host's location, username, and password. If ESXi connection credentials are used instead of vCenter credentials, the <code class="docutils literal notranslate"><span class="pre">host_names</span></code> and <code class="docutils literal notranslate"><span class="pre">esxi_hosts</span></code> arguments are not needed.</p> <pre class="highlight-bash notranslate" data-language="bash"># salt my-minion vsphere.get_coredump_network_config esxi-1.example.com root &lt;host-password&gt;
local:
----------
    10.4.28.150:
        ----------
        Coredump Config:
            ----------
            enabled:
                True
            host_vnic:
                vmk0
            ip:
                coredump-location.example.com
            port:
                6500</pre> <dl class="function"> <h3 id="salt.modules.vsphere.add_capacity_to_diskgroup"> salt.modules.vsphere.add_capacity_to_diskgroup(cache_disk_id, capacity_disk_ids, safety_checks=True, service_instance=None)</h3> <dd>
<p>Adds capacity disks to the disk group with the specified cache disk.</p> <dl class="docutils"> <dt>cache_disk_id</dt> <dd>The canonical name of the cache disk.</dd> <dt>capacity_disk_ids</dt> <dd>A list containing canonical names of the capacity disks to add.</dd> <dt>safety_checks</dt> <dd>Specify whether to perform safety check or to skip the checks and try performing the required task. Default value is True.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.add_capacity_to_diskgroup
    cache_disk_id='naa.000000000000001'
    capacity_disk_ids='[naa.000000000000002, naa.000000000000003]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.add_host_to_dvs"> salt.modules.vsphere.add_host_to_dvs(host, username, password, vmknic_name, vmnic_name, dvs_name, target_portgroup_name, uplink_portgroup_name, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Adds an ESXi host to a vSphere Distributed Virtual Switch and migrates the desired adapters to the DVS from the standard switch.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the vCenter server.</dd> <dt>username</dt> <dd>The username used to login to the vCenter server.</dd> <dt>password</dt> <dd>The password used to login to the vCenter server.</dd> <dt>vmknic_name</dt> <dd>The name of the virtual NIC to migrate.</dd> <dt>vmnic_name</dt> <dd>The name of the physical NIC to migrate.</dd> <dt>dvs_name</dt> <dd>The name of the Distributed Virtual Switch.</dd> <dt>target_portgroup_name</dt> <dd>The name of the distributed portgroup in which to migrate the virtual NIC.</dd> <dt>uplink_portgroup_name</dt> <dd>The name of the uplink portgroup in which to migrate the physical NIC.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the vCenter server or ESX/ESXi host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the vCenter server or ESX/ESXi host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names:</dt> <dd>An array of VMware host names to migrate</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt some_host vsphere.add_host_to_dvs host='vsphere.corp.com'
    username='administrator@vsphere.corp.com' password='vsphere_password'
    vmknic_name='vmk0' vmnic_name='vnmic0' dvs_name='DSwitch'
    target_portgroup_name='DPortGroup' uplink_portgroup_name='DSwitch1-DVUplinks-181'
    protocol='https' port='443', host_names="['esxi1.corp.com','esxi2.corp.com','esxi3.corp.com']"</pre> <p>Return Example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">somehost:
    ----------
    esxi1.corp.com:
        ----------
        dvs:
            DSwitch
        portgroup:
            DPortGroup
        status:
            True
        uplink:
            DSwitch-DVUplinks-181
        vmknic:
            vmk0
        vmnic:
            vmnic0
    esxi2.corp.com:
        ----------
        dvs:
            DSwitch
        portgroup:
            DPortGroup
        status:
            True
        uplink:
            DSwitch-DVUplinks-181
        vmknic:
            vmk0
        vmnic:
            vmnic0
    esxi3.corp.com:
        ----------
        dvs:
            DSwitch
        portgroup:
            DPortGroup
        status:
            True
        uplink:
            DSwitch-DVUplinks-181
        vmknic:
            vmk0
        vmnic:
            vmnic0
    message:
    success:
        True</pre> <p>This was very difficult to figure out. VMware's PyVmomi documentation at</p> <p><a class="reference external" href="https://github.com/vmware/pyvmomi/blob/master/docs/vim/DistributedVirtualSwitch.rst">https://github.com/vmware/pyvmomi/blob/master/docs/vim/DistributedVirtualSwitch.rst</a> (which is a copy of the official documentation here: <a class="reference external" href="https://www.vmware.com/support/developer/converter-sdk/conv60_apireference/vim.DistributedVirtualSwitch.html">https://www.vmware.com/support/developer/converter-sdk/conv60_apireference/vim.DistributedVirtualSwitch.html</a>)</p> <p>says to create the DVS, create distributed portgroups, and then add the host to the DVS specifying which physical NIC to use as the port backing. However, if the physical NIC is in use as the only link from the host to vSphere, this will fail with an unhelpful "busy" error.</p> <p>There is, however, a Powershell PowerCLI cmdlet called Add-VDSwitchPhysicalNetworkAdapter that does what we want. I used Onyx (<a class="reference external" href="https://labs.vmware.com/flings/onyx">https://labs.vmware.com/flings/onyx</a>) to sniff the SOAP stream from Powershell to our vSphere server and got this snippet out:</p> <pre class="highlight-xml notranslate" data-language="xml">&lt;UpdateNetworkConfig xmlns="urn:vim25"&gt;
  &lt;_this type="HostNetworkSystem"&gt;networkSystem-187&lt;/_this&gt;
  &lt;config&gt;
    &lt;vswitch&gt;
      &lt;changeOperation&gt;edit&lt;/changeOperation&gt;
      &lt;name&gt;vSwitch0&lt;/name&gt;
      &lt;spec&gt;
        &lt;numPorts&gt;7812&lt;/numPorts&gt;
      &lt;/spec&gt;
    &lt;/vswitch&gt;
    &lt;proxySwitch&gt;
        &lt;changeOperation&gt;edit&lt;/changeOperation&gt;
        &lt;uuid&gt;73 a4 05 50 b0 d2 7e b9-38 80 5d 24 65 8f da 70&lt;/uuid&gt;
        &lt;spec&gt;
        &lt;backing xsi:type="DistributedVirtualSwitchHostMemberPnicBacking"&gt;
            &lt;pnicSpec&gt;&lt;pnicDevice&gt;vmnic0&lt;/pnicDevice&gt;&lt;/pnicSpec&gt;
        &lt;/backing&gt;
        &lt;/spec&gt;
    &lt;/proxySwitch&gt;
    &lt;portgroup&gt;
      &lt;changeOperation&gt;remove&lt;/changeOperation&gt;
      &lt;spec&gt;
        &lt;name&gt;Management Network&lt;/name&gt;&lt;vlanId&gt;-1&lt;/vlanId&gt;&lt;vswitchName /&gt;&lt;policy /&gt;
      &lt;/spec&gt;
    &lt;/portgroup&gt;
    &lt;vnic&gt;
      &lt;changeOperation&gt;edit&lt;/changeOperation&gt;
      &lt;device&gt;vmk0&lt;/device&gt;
      &lt;portgroup /&gt;
      &lt;spec&gt;
        &lt;distributedVirtualPort&gt;
          &lt;switchUuid&gt;73 a4 05 50 b0 d2 7e b9-38 80 5d 24 65 8f da 70&lt;/switchUuid&gt;
          &lt;portgroupKey&gt;dvportgroup-191&lt;/portgroupKey&gt;
        &lt;/distributedVirtualPort&gt;
      &lt;/spec&gt;
    &lt;/vnic&gt;
  &lt;/config&gt;
  &lt;changeMode&gt;modify&lt;/changeMode&gt;
&lt;/UpdateNetworkConfig&gt;</pre> <p>The SOAP API maps closely to PyVmomi, so from there it was (relatively) easy to figure out what Python to write.</p> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.add_license"> salt.modules.vsphere.add_license(key, description, safety_checks=True, service_instance=None)</h3> <dd>
<p>Adds a license to the vCenter or ESXi host</p> <dl class="docutils"> <dt>key</dt> <dd>License key.</dd> <dt>description</dt> <dd>License description added in as a label.</dd> <dt>safety_checks</dt> <dd>Specify whether to perform safety check or to skip the checks and try performing the required task</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.add_license key=&lt;license_key&gt; desc='License desc'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.assign_default_storage_policy_to_datastore"> salt.modules.vsphere.assign_default_storage_policy_to_datastore(policy, datastore, service_instance=None)</h3> <dd>
<p>Assigns a storage policy as the default policy to a datastore.</p> <dl class="docutils"> <dt>policy</dt> <dd>Name of the policy to assign.</dd> <dt>datastore</dt> <dd>Name of the datastore to assign. The datastore needs to be visible to the VMware entity the proxy points to.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.assign_storage_policy_to_datastore
    policy='policy name' datastore=ds1</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.assign_license"> salt.modules.vsphere.assign_license(license_key, license_name, entity, entity_display_name, safety_checks=True, service_instance=None)</h3> <dd>
<p>Assigns a license to an entity</p> <dl class="docutils"> <dt>license_key</dt> <dd>Key of the license to assign See <code class="docutils literal notranslate"><span class="pre">_get_entity</span></code> docstrings for format.</dd> <dt>license_name</dt> <dd>Display name of license</dd> <dt>entity</dt> <dd>Dictionary representation of an entity</dd> <dt>entity_display_name</dt> <dd>Entity name used in logging</dd> <dt>safety_checks</dt> <dd>Specify whether to perform safety check or to skip the checks and try performing the required task. Default is False.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.assign_license license_key=00000:00000
    license name=test entity={type:cluster,datacenter:dc,cluster:cl}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.compare_vm_configs"> salt.modules.vsphere.compare_vm_configs(new_config, current_config)</h3> <dd>
<p>Compares virtual machine current and new configuration, the current is the one which is deployed now, and the new is the target config. Returns the differences between the objects in a dictionary, the keys are the configuration parameter keys and the values are differences objects: either list or recursive difference</p> <dl class="docutils"> <dt>new_config:</dt> <dd>New config dictionary with every available parameter</dd> <dt>current_config</dt> <dd>Currently deployed configuration</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.configure_host_cache"> salt.modules.vsphere.configure_host_cache(enabled, datastore=None, swap_size_MiB=None, service_instance=None)</h3> <dd>
<p>Configures the host cache on the selected host.</p> <dl class="docutils"> <dt>enabled</dt> <dd>Boolean flag specifying whether the host cache is enabled.</dd> <dt>datastore</dt> <dd>Name of the datastore that contains the host cache. Must be set if enabled is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</dd> <dt>swap_size_MiB</dt> <dd>Swap size in Mibibytes. Needs to be set if enabled is <code class="docutils literal notranslate"><span class="pre">true</span></code>. Must be smaller than the datastore size.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.configure_host_cache enabled=False

salt '*' vsphere.configure_host_cache enabled=True datastore=ds1
    swap_size_MiB=1024</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.coredump_network_enable"> salt.modules.vsphere.coredump_network_enable(host, username, password, enabled, protocol=None, port=None, esxi_hosts=None, credstore=None)</h3> <dd>
<p>Enable or disable ESXi core dump collection. Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if coredump is enabled and returns <code class="docutils literal notranslate"><span class="pre">False</span></code> if core dump is not enabled. If there was an error, the error will be the value printed in the <code class="docutils literal notranslate"><span class="pre">Error</span></code> key dictionary for the given host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>enabled</dt> <dd>Python True or False to enable or disable coredumps.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>esxi_hosts</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">host</span></code> is a vCenter host, then use esxi_hosts to execute this function on a list of one or more ESXi machines.</dd> <dt>credstore</dt> <dd>Optionally set to path to the credential store file.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for ESXi host connection information
salt '*' vsphere.coredump_network_enable my.esxi.host root bad-password True

# Used for connecting to a vCenter Server
salt '*' vsphere.coredump_network_enable my.vcenter.location root bad-password True             esxi_hosts='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.create_cluster"> salt.modules.vsphere.create_cluster(cluster_dict, datacenter=None, cluster=None, service_instance=None)</h3> <dd>
<p>Creates a cluster.</p> <p>Note: cluster_dict['name'] will be overridden by the cluster param value</p> <dl class="docutils"> <dt>config_dict</dt> <dd>Dictionary with the config values of the new cluster.</dd> <dt>datacenter</dt> <dd>Name of datacenter containing the cluster. Ignored if already contained by proxy details. Default value is None.</dd> <dt>cluster</dt> <dd>Name of cluster. Ignored if already contained by proxy details. Default value is None.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash"># esxdatacenter proxy
salt '*' vsphere.create_cluster cluster_dict=$cluster_dict cluster=cl1

# esxcluster proxy
salt '*' vsphere.create_cluster cluster_dict=$cluster_dict</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.create_datacenter"> salt.modules.vsphere.create_datacenter(datacenter_name, service_instance=None)</h3> <dd>
<p>Creates a datacenter.</p> <p>Supported proxies: esxdatacenter</p> <dl class="docutils"> <dt>datacenter_name</dt> <dd>The datacenter name</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.create_datacenter dc1</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.create_diskgroup"> salt.modules.vsphere.create_diskgroup(cache_disk_id, capacity_disk_ids, safety_checks=True, service_instance=None)</h3> <dd>
<p>Creates disk group on an ESXi host with the specified cache and capacity disks.</p> <dl class="docutils"> <dt>cache_disk_id</dt> <dd>The canonical name of the disk to be used as a cache. The disk must be ssd.</dd> <dt>capacity_disk_ids</dt> <dd>A list containing canonical names of the capacity disks. Must contain at least one id. Default is True.</dd> <dt>safety_checks</dt> <dd>Specify whether to perform safety check or to skip the checks and try performing the required task. Default value is True.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.create_diskgroup cache_disk_id='naa.000000000000001'
    capacity_disk_ids='[naa.000000000000002, naa.000000000000003]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.create_dvportgroup"> salt.modules.vsphere.create_dvportgroup(portgroup_dict, portgroup_name, dvs, service_instance=None)</h3> <dd>
<p>Creates a distributed virtual portgroup.</p> <p>Note: The <code class="docutils literal notranslate"><span class="pre">portgroup_name</span></code> param will override any name already set in <code class="docutils literal notranslate"><span class="pre">portgroup_dict</span></code>.</p> <dl class="docutils"> <dt>portgroup_dict</dt> <dd>Dictionary with the config values the portgroup should be created with (example in salt.states.dvs).</dd> <dt>portgroup_name</dt> <dd>Name of the portgroup to be created.</dd> <dt>dvs</dt> <dd>Name of the DVS that will contain the portgroup.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.create_dvportgroup portgroup_dict=&lt;dict&gt;
    portgroup_name=pg1 dvs=dvs1</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.create_dvs"> salt.modules.vsphere.create_dvs(dvs_dict, dvs_name, service_instance=None)</h3> <dd>
<p>Creates a distributed virtual switch (DVS).</p> <p>Note: The <code class="docutils literal notranslate"><span class="pre">dvs_name</span></code> param will override any name set in <code class="docutils literal notranslate"><span class="pre">dvs_dict</span></code>.</p> <dl class="docutils"> <dt>dvs_dict</dt> <dd>Dict representation of the new DVS (example in salt.states.dvs)</dd> <dt>dvs_name</dt> <dd>Name of the DVS to be created.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.create_dvs dvs dict=$dvs_dict dvs_name=dvs_name</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.create_storage_policy"> salt.modules.vsphere.create_storage_policy(policy_name, policy_dict, service_instance=None)</h3> <dd>
<p>Creates a storage policy.</p> <p>Supported capability types: scalar, set, range.</p> <dl class="docutils"> <dt>policy_name</dt> <dd>Name of the policy to create. The value of the argument will override any existing name in <code class="docutils literal notranslate"><span class="pre">policy_dict</span></code>.</dd> <dt>policy_dict</dt> <dd>Dictionary containing the changes to apply to the policy. (example in salt.states.pbm)</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.create_storage_policy policy_name='policy name'
    policy_dict="$policy_dict"</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.create_vm"> salt.modules.vsphere.create_vm(vm_name, cpu, memory, image, version, datacenter, datastore, placement, interfaces, disks, scsi_devices, serial_ports=None, ide_controllers=None, sata_controllers=None, cd_drives=None, advanced_configs=None, service_instance=None)</h3> <dd>
<p>Creates a virtual machine container.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt vm_minion vsphere.create_vm vm_name=vmname cpu='{count: 2, nested: True}' ...</pre> <dl class="docutils"> <dt>vm_name</dt> <dd>Name of the virtual machine</dd> <dt>cpu</dt> <dd>Properties of CPUs for freshly created machines</dd> <dt>memory</dt> <dd>Memory size for freshly created machines</dd> <dt>image</dt> <dd>Virtual machine guest OS version identifier VirtualMachineGuestOsIdentifier</dd> <dt>version</dt> <dd>Virtual machine container hardware version</dd> <dt>datacenter</dt> <dd>Datacenter where the virtual machine will be deployed (mandatory)</dd> <dt>datastore</dt> <dd>Datastore where the virtual machine files will be placed</dd> <dt>placement</dt> <dd>Resource pool or cluster or host or folder where the virtual machine will be deployed</dd> <dt>devices</dt> <dd>
<p class="first">interfaces</p> <pre class="highlight-bash notranslate" data-language="bash">interfaces:
  adapter: 'Network adapter 1'
  name: vlan100
  switch_type: distributed or standard
  adapter_type: vmxnet3 or vmxnet, vmxnet2, vmxnet3, e1000, e1000e
  mac: '00:11:22:33:44:55'
  connectable:
    allow_guest_control: True
    connected: True
    start_connected: True</pre> <p>disks</p> <pre class="highlight-bash notranslate" data-language="bash">disks:
  adapter: 'Hard disk 1'
  size: 16
  unit: GB
  address: '0:0'
  controller: 'SCSI controller 0'
  thin_provision: False
  eagerly_scrub: False
  datastore: 'myshare'
  filename: 'vm/mydisk.vmdk'</pre> <p>scsi_devices</p> <pre class="highlight-bash notranslate" data-language="bash">scsi_devices:
  controller: 'SCSI controller 0'
  type: paravirtual
  bus_sharing: no_sharing</pre> <p>serial_ports</p> <pre class="highlight-bash notranslate" data-language="bash">serial_ports:
  adapter: 'Serial port 1'
  type: network
  backing:
    uri: 'telnet://something:port'
    direction: &lt;client|server&gt;
    filename: 'service_uri'
  connectable:
    allow_guest_control: True
    connected: True
    start_connected: True
  yield: False</pre> <p>cd_drives</p> <div class="last highlight-bash notranslate">
<div class="highlight"><pre>cd_drives:
  adapter: <span class="s1">'CD/DVD drive 0'</span>
  controller: <span class="s1">'IDE 0'</span>
  device_type: datastore_iso_file
  datastore_iso_file:
    path: path_to_iso
  connectable:
    allow_guest_control: True
    connected: True
    start_connected: True
</pre></div> </div> </dd> <dt>advanced_config</dt> <dd>Advanced config parameters to be set for the virtual machine</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.create_vmfs_datastore"> salt.modules.vsphere.create_vmfs_datastore(datastore_name, disk_id, vmfs_major_version, safety_checks=True, service_instance=None)</h3> <dd>
<p>Creates a ESXi host disk group with the specified cache and capacity disks.</p> <dl class="docutils"> <dt>datastore_name</dt> <dd>The name of the datastore to be created.</dd> <dt>disk_id</dt> <dd>The disk id (canonical name) on which the datastore is created.</dd> <dt>vmfs_major_version</dt> <dd>The VMFS major version.</dd> <dt>safety_checks</dt> <dd>Specify whether to perform safety check or to skip the checks and try performing the required task. Default is True.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.create_vmfs_datastore datastore_name=ds1 disk_id=
    vmfs_major_version=5</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.delete_advanced_configs"> salt.modules.vsphere.delete_advanced_configs(vm_name, datacenter, advanced_configs, service_instance=None)</h3> <dd>
<p>Removes extra config parameters from a virtual machine</p> <dl class="docutils"> <dt>vm_name</dt> <dd>Virtual machine name</dd> <dt>datacenter</dt> <dd>Datacenter name where the virtual machine is available</dd> <dt>advanced_configs</dt> <dd>List of advanced config values to be removed</dd> <dt>service_instance</dt> <dd>vCenter service instance for connection and configuration</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.delete_vm"> salt.modules.vsphere.delete_vm(name, datacenter, placement=None, power_off=False, service_instance=None)</h3> <dd>
<p>Deletes a virtual machine defined by name and placement</p> <dl class="docutils"> <dt>name</dt> <dd>Name of the virtual machine</dd> <dt>datacenter</dt> <dd>Datacenter of the virtual machine</dd> <dt>placement</dt> <dd>Placement information of the virtual machine</dd> <dt>service_instance</dt> <dd>vCenter service instance for connection and configuration</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.delete_vm name=my_vm datacenter=my_datacenter</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.disconnect"> salt.modules.vsphere.disconnect(service_instance)</h3> <dd>
<p>Disconnects from a vCenter or ESXi host</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Should be used by state functions, not invoked directly.</p> </div> <dl class="docutils"> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance)</dd> </dl> <p>CLI Example:</p> <blockquote> <div>See note above.</div>
</blockquote> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.enable_firewall_ruleset"> salt.modules.vsphere.enable_firewall_ruleset(host, username, password, ruleset_enable, ruleset_name, protocol=None, port=None, esxi_hosts=None, credstore=None)</h3> <dd>
<p>Enable or disable an ESXi firewall rule set.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>ruleset_enable</dt> <dd>True to enable the ruleset, false to disable.</dd> <dt>ruleset_name</dt> <dd>Name of ruleset to target.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>esxi_hosts</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">host</span></code> is a vCenter host, then use esxi_hosts to execute this function on a list of one or more ESXi machines.</dd> <dt>credstore</dt> <dd>Optionally set to path to the credential store file.</dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">A standard cmd.run_all dictionary, per host.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for ESXi host connection information
salt '*' vsphere.enable_firewall_ruleset my.esxi.host root bad-password True 'syslog'

# Used for connecting to a vCenter Server
salt '*' vsphere.enable_firewall_ruleset my.vcenter.location root bad-password True 'syslog'             esxi_hosts='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.erase_disk_partitions"> salt.modules.vsphere.erase_disk_partitions(disk_id=None, scsi_address=None, service_instance=None)</h3> <dd>
<p>Erases the partitions on a disk. The disk can be specified either by the canonical name, or by the scsi_address.</p> <dl class="docutils"> <dt>disk_id</dt> <dd>Canonical name of the disk. Either <code class="docutils literal notranslate"><span class="pre">disk_id</span></code> or <code class="docutils literal notranslate"><span class="pre">scsi_address</span></code> needs to be specified (<code class="docutils literal notranslate"><span class="pre">disk_id</span></code> supersedes <code class="docutils literal notranslate"><span class="pre">scsi_address</span></code>.</dd> <dt>scsi_address</dt> <dd>Scsi address of the disk. <code class="docutils literal notranslate"><span class="pre">disk_id</span></code> or <code class="docutils literal notranslate"><span class="pre">scsi_address</span></code> needs to be specified (<code class="docutils literal notranslate"><span class="pre">disk_id</span></code> supersedes <code class="docutils literal notranslate"><span class="pre">scsi_address</span></code>.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.erase_disk_partitions scsi_address='vmhaba0:C0:T0:L0'

salt '*' vsphere.erase_disk_partitions disk_id='naa.000000000000001'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.esxcli_cmd"> salt.modules.vsphere.esxcli_cmd(cmd_str, host=None, username=None, password=None, protocol=None, port=None, esxi_hosts=None, credstore=None)</h3> <dd>
<p>Run an ESXCLI command directly on the host or list of hosts.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>cmd_str</dt> <dd>The ESXCLI command to run. Note: This should not include the <code class="docutils literal notranslate"><span class="pre">-s</span></code>, <code class="docutils literal notranslate"><span class="pre">-u</span></code>, <code class="docutils literal notranslate"><span class="pre">-p</span></code>, <code class="docutils literal notranslate"><span class="pre">-h</span></code>, <code class="docutils literal notranslate"><span class="pre">--protocol</span></code>, or <code class="docutils literal notranslate"><span class="pre">--portnumber</span></code> arguments that are frequently passed when using a bare ESXCLI command from the command line. Those arguments are handled by this function via the other args and kwargs.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>esxi_hosts</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">host</span></code> is a vCenter host, then use esxi_hosts to execute this function on a list of one or more ESXi machines.</dd> <dt>credstore</dt> <dd>Optionally set to path to the credential store file.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for ESXi host connection information
salt '*' vsphere.esxcli_cmd my.esxi.host root bad-password             'system coredump network get'

# Used for connecting to a vCenter Server
salt '*' vsphere.esxcli_cmd my.vcenter.location root bad-password             'system coredump network get' esxi_hosts='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_advanced_configs"> salt.modules.vsphere.get_advanced_configs(vm_name, datacenter, service_instance=None)</h3> <dd>
<p>Returns extra config parameters from a virtual machine advanced config list</p> <dl class="docutils"> <dt>vm_name</dt> <dd>Virtual machine name</dd> <dt>datacenter</dt> <dd>Datacenter name where the virtual machine is available</dd> <dt>service_instance</dt> <dd>vCenter service instance for connection and configuration</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_coredump_network_config"> salt.modules.vsphere.get_coredump_network_config(host, username, password, protocol=None, port=None, esxi_hosts=None, credstore=None)</h3> <dd>
<p>Retrieve information on ESXi or vCenter network dump collection and format it into a dictionary.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>esxi_hosts</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">host</span></code> is a vCenter host, then use esxi_hosts to execute this function on a list of one or more ESXi machines.</dd> <dt>credstore</dt> <dd>Optionally set to path to the credential store file.</dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">A dictionary with the network configuration, or, if getting the network config failed, a an error message retrieved from the standard cmd.run_all dictionary, per host.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for ESXi host connection information
salt '*' vsphere.get_coredump_network_config my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.get_coredump_network_config my.vcenter.location root bad-password             esxi_hosts='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_firewall_status"> salt.modules.vsphere.get_firewall_status(host, username, password, protocol=None, port=None, esxi_hosts=None, credstore=None)</h3> <dd>
<p>Show status of all firewall rule sets.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>esxi_hosts</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">host</span></code> is a vCenter host, then use esxi_hosts to execute this function on a list of one or more ESXi machines.</dd> <dt>credstore</dt> <dd>Optionally set to path to the credential store file.</dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">Nested dictionary with two toplevel keys <code class="docutils literal notranslate"><span class="pre">rulesets</span></code> and <code class="docutils literal notranslate"><span class="pre">success</span></code> <code class="docutils literal notranslate"><span class="pre">success</span></code> will be True or False depending on query success <code class="docutils literal notranslate"><span class="pre">rulesets</span></code> will list the rulesets and their statuses if <code class="docutils literal notranslate"><span class="pre">success</span></code> was true, per host.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for ESXi host connection information
salt '*' vsphere.get_firewall_status my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.get_firewall_status my.vcenter.location root bad-password             esxi_hosts='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_host_cache"> salt.modules.vsphere.get_host_cache(service_instance=None)</h3> <dd>
<p>Returns the host cache configuration on the proxy host.</p> <dl class="docutils"> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.get_host_cache</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_host_datetime"> salt.modules.vsphere.get_host_datetime(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Get the date/time information for a given host or list of host_names.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter the hosts for which to get date/time information.</p> <p class="last">If host_names is not provided, the date/time information will be retrieved for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.get_host_datetime my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.get_host_datetime my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_ntp_config"> salt.modules.vsphere.get_ntp_config(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Get the NTP configuration information for a given host or list of host_names.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter the hosts for which to get ntp configuration information.</p> <p class="last">If host_names is not provided, the NTP configuration will be retrieved for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.get_ntp_config my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.get_ntp_config my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_proxy_type"> salt.modules.vsphere.get_proxy_type()</h3> <dd>
<p>Returns the proxy type retrieved either from the pillar of from the proxy minion's config. Returns <code class="docutils literal notranslate"><span class="pre">&lt;undefined&gt;</span></code> otherwise.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.get_proxy_type</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_service_instance_via_proxy"> salt.modules.vsphere.get_service_instance_via_proxy(service_instance=None)</h3> <dd>
<p>Returns a service instance to the proxied endpoint (vCenter/ESXi host).</p> <dl class="docutils"> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Should be used by state functions not invoked directly.</p> </div> <dl class="docutils"> <dt>CLI Example:</dt> <dd>See note above</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_service_policy"> salt.modules.vsphere.get_service_policy(host, username, password, service_name, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Get the service name's policy for a given host or list of hosts.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>service_name</dt> <dd>
<dl class="first last docutils"> <dt>The name of the service for which to retrieve the policy. Supported service names are:</dt> <dd>
<ul class="first last simple"> <li>DCUI</li> <li>TSM</li> <li>SSH</li> <li>lbtd</li> <li>lsassd</li> <li>lwiod</li> <li>netlogond</li> <li>ntpd</li> <li>sfcbd-watchdog</li> <li>snmpd</li> <li>vprobed</li> <li>vpxa</li> <li>xorg</li> </ul> </dd> </dl> </dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter the hosts for which to get service policy information.</p> <p class="last">If host_names is not provided, the service policy information will be retrieved for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.get_service_policy my.esxi.host root bad-password 'ssh'

# Used for connecting to a vCenter Server
salt '*' vsphere.get_service_policy my.vcenter.location root bad-password 'ntpd'         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_service_running"> salt.modules.vsphere.get_service_running(host, username, password, service_name, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Get the service name's running state for a given host or list of hosts.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>service_name</dt> <dd>
<dl class="first last docutils"> <dt>The name of the service for which to retrieve the policy. Supported service names are:</dt> <dd>
<ul class="first last simple"> <li>DCUI</li> <li>TSM</li> <li>SSH</li> <li>lbtd</li> <li>lsassd</li> <li>lwiod</li> <li>netlogond</li> <li>ntpd</li> <li>sfcbd-watchdog</li> <li>snmpd</li> <li>vprobed</li> <li>vpxa</li> <li>xorg</li> </ul> </dd> </dl> </dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter the hosts for which to get the service's running state.</p> <p class="last">If host_names is not provided, the service's running state will be retrieved for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.get_service_running my.esxi.host root bad-password 'ssh'

# Used for connecting to a vCenter Server
salt '*' vsphere.get_service_running my.vcenter.location root bad-password 'ntpd'         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_ssh_key"> salt.modules.vsphere.get_ssh_key(host, username, password, protocol=None, port=None, certificate_verify=False)</h3> <dd>
<p>Retrieve the authorized_keys entry for root. This function only works for ESXi, not vCenter.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>host</strong> -- The location of the ESXi Host</li> <li>
<strong>username</strong> -- Username to connect as</li> <li>
<strong>password</strong> -- Password for the ESXi web endpoint</li> <li>
<strong>protocol</strong> -- defaults to https, can be http if ssl is disabled on ESXi</li> <li>
<strong>port</strong> -- defaults to 443 for https</li> <li>
<strong>certificate_verify</strong> -- If true require that the SSL connection present a valid certificate</li> </ul> </td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first last">True if upload is successful</p> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.get_ssh_key my.esxi.host root bad-password certificate_verify=True</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_syslog_config"> salt.modules.vsphere.get_syslog_config(host, username, password, protocol=None, port=None, esxi_hosts=None, credstore=None)</h3> <dd>
<p>Retrieve the syslog configuration.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>esxi_hosts</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">host</span></code> is a vCenter host, then use esxi_hosts to execute this function on a list of one or more ESXi machines.</dd> <dt>credstore</dt> <dd>Optionally set to path to the credential store file.</dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">Dictionary with keys and values corresponding to the syslog configuration, per host.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for ESXi host connection information
salt '*' vsphere.get_syslog_config my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.get_syslog_config my.vcenter.location root bad-password             esxi_hosts='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_vm"> salt.modules.vsphere.get_vm(name, datacenter=None, vm_properties=None, traversal_spec=None, parent_ref=None, service_instance=None)</h3> <dd>
<p>Returns vm object properties.</p> <dl class="docutils"> <dt>name</dt> <dd>Name of the virtual machine.</dd> <dt>datacenter</dt> <dd>Datacenter name</dd> <dt>vm_properties</dt> <dd>List of vm properties.</dd> <dt>traversal_spec</dt> <dd>Traversal Spec object(s) for searching.</dd> <dt>parent_ref</dt> <dd>Container Reference object for searching under a given object.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_vm_config"> salt.modules.vsphere.get_vm_config(name, datacenter=None, objects=True, service_instance=None)</h3> <dd>
<p>Queries and converts the virtual machine properties to the available format from the schema. If the objects attribute is True the config objects will have extra properties, like 'object' which will include the vim.vm.device.VirtualDevice, this is necessary for deletion and update actions.</p> <dl class="docutils"> <dt>name</dt> <dd>Name of the virtual machine</dd> <dt>datacenter</dt> <dd>Datacenter's name where the virtual machine is available</dd> <dt>objects</dt> <dd>Indicates whether to return the vmware object properties (eg. object, key) or just the properties which can be set</dd> <dt>service_instance</dt> <dd>vCenter service instance for connection and configuration</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_vm_config_file"> salt.modules.vsphere.get_vm_config_file(name, datacenter, placement, datastore, service_instance=None)</h3> <dd>
<p>Queries the virtual machine config file and returns vim.host.DatastoreBrowser.SearchResults object on success None on failure</p> <dl class="docutils"> <dt>name</dt> <dd>Name of the virtual machine</dd> <dt>datacenter</dt> <dd>Datacenter name</dd> <dt>datastore</dt> <dd>Datastore where the virtual machine files are stored</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_vmotion_enabled"> salt.modules.vsphere.get_vmotion_enabled(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Get the VMotion enabled status for a given host or a list of host_names. Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if VMotion is enabled, <code class="docutils literal notranslate"><span class="pre">False</span></code> if it is not enabled.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter which hosts to check if VMotion is enabled.</p> <p class="last">If host_names is not provided, the VMotion status will be retrieved for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.get_vmotion_enabled my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.get_vmotion_enabled my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_vsan_eligible_disks"> salt.modules.vsphere.get_vsan_eligible_disks(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Returns a list of VSAN-eligible disks for a given host or list of host_names.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter which hosts to check if any VSAN-eligible disks are available.</p> <p class="last">If host_names is not provided, the VSAN-eligible disks will be retrieved for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.get_vsan_eligible_disks my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.get_vsan_eligible_disks my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.get_vsan_enabled"> salt.modules.vsphere.get_vsan_enabled(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Get the VSAN enabled status for a given host or a list of host_names. Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if VSAN is enabled, <code class="docutils literal notranslate"><span class="pre">False</span></code> if it is not enabled, and <code class="docutils literal notranslate"><span class="pre">None</span></code> if a VSAN Host Config is unset, per host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter which hosts to check if VSAN enabled.</p> <p class="last">If host_names is not provided, the VSAN status will be retrieved for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.get_vsan_enabled my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.get_vsan_enabled my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.gets_service_instance_via_proxy"> salt.modules.vsphere.gets_service_instance_via_proxy(fn)</h3> <dd>
<p>Decorator that connects to a target system (vCenter or ESXi host) using the proxy details and passes the connection (vim.ServiceInstance) to the decorated function.</p> <p>Supported proxies: esxi, esxcluster, esxdatacenter.</p> <p class="rubric">Notes</p> <p>1. The decorated function must have a <code class="docutils literal notranslate"><span class="pre">service_instance</span></code> parameter or a <code class="docutils literal notranslate"><span class="pre">**kwarg</span></code> type argument (name of argument is not important); 2. If the <code class="docutils literal notranslate"><span class="pre">service_instance</span></code> parameter is already defined, the value is passed through to the decorated function; 3. If the <code class="docutils literal notranslate"><span class="pre">service_instance</span></code> parameter in not defined, the connection is created using the proxy details and the service instance is returned.</p> <dl class="docutils"> <dt>CLI Example:</dt> <dd>None, this is a decorator</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_assigned_licenses"> salt.modules.vsphere.list_assigned_licenses(entity, entity_display_name, license_keys=None, service_instance=None)</h3> <dd>
<p>Lists the licenses assigned to an entity</p> <dl class="docutils"> <dt>entity</dt> <dd>Dictionary representation of an entity. See <code class="docutils literal notranslate"><span class="pre">_get_entity</span></code> docstrings for format.</dd> <dt>entity_display_name</dt> <dd>Entity name used in logging</dd> <dt>license_keys:</dt> <dd>List of license keys to be retrieved. Default is None.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_assigned_licenses
    entity={type:cluster,datacenter:dc,cluster:cl}
    entiy_display_name=cl</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_capability_definitions"> salt.modules.vsphere.list_capability_definitions(service_instance=None)</h3> <dd>
<p>Returns a list of the metadata of all capabilities in the vCenter.</p> <dl class="docutils"> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_capabilities</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_cluster"> salt.modules.vsphere.list_cluster(datacenter=None, cluster=None, service_instance=None)</h3> <dd>
<p>Returns a dict representation of an ESX cluster.</p> <dl class="docutils"> <dt>datacenter</dt> <dd>Name of datacenter containing the cluster. Ignored if already contained by proxy details. Default value is None.</dd> <dt>cluster</dt> <dd>Name of cluster. Ignored if already contained by proxy details. Default value is None.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash"># vcenter proxy
salt '*' vsphere.list_cluster datacenter=dc1 cluster=cl1

# esxdatacenter proxy
salt '*' vsphere.list_cluster cluster=cl1

# esxcluster proxy
salt '*' vsphere.list_cluster</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_clusters"> salt.modules.vsphere.list_clusters(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of clusters for the the specified host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_clusters 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_datacenters"> salt.modules.vsphere.list_datacenters(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of datacenters for the the specified host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_datacenters 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_datacenters_via_proxy"> salt.modules.vsphere.list_datacenters_via_proxy(datacenter_names=None, service_instance=None)</h3> <dd>
<p>Returns a list of dict representations of VMware datacenters. Connection is done via the proxy details.</p> <p>Supported proxies: esxdatacenter</p> <dl class="docutils"> <dt>datacenter_names</dt> <dd>List of datacenter names. Default is None.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_datacenters_via_proxy

salt '*' vsphere.list_datacenters_via_proxy dc1

salt '*' vsphere.list_datacenters_via_proxy dc1,dc2

salt '*' vsphere.list_datacenters_via_proxy datacenter_names=[dc1, dc2]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_datastore_clusters"> salt.modules.vsphere.list_datastore_clusters(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of datastore clusters for the the specified host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_datastore_clusters 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_datastores"> salt.modules.vsphere.list_datastores(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of datastores for the the specified host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_datastores 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_datastores_via_proxy"> salt.modules.vsphere.list_datastores_via_proxy(datastore_names=None, backing_disk_ids=None, backing_disk_scsi_addresses=None, service_instance=None)</h3> <dd>
<p>Returns a list of dict representations of the datastores visible to the proxy object. The list of datastores can be filtered by datastore names, backing disk ids (canonical names) or backing disk scsi addresses.</p> <p>Supported proxy types: esxi, esxcluster, esxdatacenter</p> <dl class="docutils"> <dt>datastore_names</dt> <dd>List of the names of datastores to filter on</dd> <dt>backing_disk_ids</dt> <dd>List of canonical names of the backing disks of the datastores to filer. Default is None.</dd> <dt>backing_disk_scsi_addresses</dt> <dd>List of scsi addresses of the backing disks of the datastores to filter. Default is None.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_datastores_via_proxy

salt '*' vsphere.list_datastores_via_proxy datastore_names=[ds1, ds2]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_default_storage_policy_of_datastore"> salt.modules.vsphere.list_default_storage_policy_of_datastore(datastore, service_instance=None)</h3> <dd>
<p>Returns a list of datastores assign the the storage policies.</p> <dl class="docutils"> <dt>datastore</dt> <dd>Name of the datastore to assign. The datastore needs to be visible to the VMware entity the proxy points to.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_default_storage_policy_of_datastore datastore=ds1</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_default_vsan_policy"> salt.modules.vsphere.list_default_vsan_policy(service_instance=None)</h3> <dd>
<p>Returns the default vsan storage policy.</p> <dl class="docutils"> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_storage_policies

salt '*' vsphere.list_storage_policy policy_names=[policy_name]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_disk_partitions"> salt.modules.vsphere.list_disk_partitions(disk_id=None, scsi_address=None, service_instance=None)</h3> <dd>
<p>Lists the partitions on a disk. The disk can be specified either by the canonical name, or by the scsi_address.</p> <dl class="docutils"> <dt>disk_id</dt> <dd>Canonical name of the disk. Either <code class="docutils literal notranslate"><span class="pre">disk_id</span></code> or <code class="docutils literal notranslate"><span class="pre">scsi_address</span></code> needs to be specified (<code class="docutils literal notranslate"><span class="pre">disk_id</span></code> supersedes <code class="docutils literal notranslate"><span class="pre">scsi_address</span></code>.</dd> <dt>scsi_address`</dt> <dd>Scsi address of the disk. <code class="docutils literal notranslate"><span class="pre">disk_id</span></code> or <code class="docutils literal notranslate"><span class="pre">scsi_address</span></code> needs to be specified (<code class="docutils literal notranslate"><span class="pre">disk_id</span></code> supersedes <code class="docutils literal notranslate"><span class="pre">scsi_address</span></code>.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_disk_partitions scsi_address='vmhaba0:C0:T0:L0'

salt '*' vsphere.list_disk_partitions disk_id='naa.000000000000001'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_diskgroups"> salt.modules.vsphere.list_diskgroups(cache_disk_ids=None, service_instance=None)</h3> <dd>
<p>Returns a list of disk group dict representation on an ESXi host. The list of disk groups can be filtered by the cache disks canonical names. If no filtering is applied, all disk groups are returned.</p> <dl class="docutils"> <dt>cache_disk_ids:</dt> <dd>List of cache disk canonical names of the disk groups to be retrieved. Default is None.</dd> <dt>use_proxy_details</dt> <dd>Specify whether to use the proxy minion's details instead of the arguments</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_diskgroups

salt '*' vsphere.list_diskgroups cache_disk_ids='[naa.000000000000001]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_disks"> salt.modules.vsphere.list_disks(disk_ids=None, scsi_addresses=None, service_instance=None)</h3> <dd>
<p>Returns a list of dict representations of the disks in an ESXi host. The list of disks can be filtered by disk canonical names or scsi addresses.</p> <dl class="docutils"> <dt>disk_ids:</dt> <dd>List of disk canonical names to be retrieved. Default is None.</dd> <dt>scsi_addresses</dt> <dd>List of scsi addresses of disks to be retrieved. Default is None</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_disks

salt '*' vsphere.list_disks disk_ids='[naa.00, naa.001]'

salt '*' vsphere.list_disks
    scsi_addresses='[vmhba0:C0:T0:L0, vmhba1:C0:T0:L0]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_dvportgroups"> salt.modules.vsphere.list_dvportgroups(dvs=None, portgroup_names=None, service_instance=None)</h3> <dd>
<p>Returns a list of distributed virtual switch portgroups. The list can be filtered by the portgroup names or by the DVS.</p> <dl class="docutils"> <dt>dvs</dt> <dd>Name of the DVS containing the portgroups. Default value is None.</dd> <dt>portgroup_names</dt> <dd>List of portgroup names to look for. If None, all portgroups are returned. Default value is None</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_dvporgroups

salt '*' vsphere.list_dvportgroups dvs=dvs1

salt '*' vsphere.list_dvportgroups portgroup_names=[pg1]

salt '*' vsphere.list_dvportgroups dvs=dvs1 portgroup_names=[pg1]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_dvs"> salt.modules.vsphere.list_dvs(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of distributed virtual switches for the the specified host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_dvs 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_dvss"> salt.modules.vsphere.list_dvss(datacenter=None, dvs_names=None, service_instance=None)</h3> <dd>
<p>Returns a list of distributed virtual switches (DVSs). The list can be filtered by the datacenter or DVS names.</p> <dl class="docutils"> <dt>datacenter</dt> <dd>The datacenter to look for DVSs in. Default value is None.</dd> <dt>dvs_names</dt> <dd>List of DVS names to look for. If None, all DVSs are returned. Default value is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_dvss

salt '*' vsphere.list_dvss dvs_names=[dvs1,dvs2]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_folders"> salt.modules.vsphere.list_folders(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of folders for the the specified host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_folders 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_hosts"> salt.modules.vsphere.list_hosts(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of hosts for the the specified VMware environment.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_hosts 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_hosts_via_proxy"> salt.modules.vsphere.list_hosts_via_proxy(hostnames=None, datacenter=None, cluster=None, service_instance=None)</h3> <dd>
<p>Returns a list of hosts for the the specified VMware environment. The list of hosts can be filtered by datacenter name and/or cluster name</p> <dl class="docutils"> <dt>hostnames</dt> <dd>Hostnames to filter on.</dd> <dt>datacenter_name</dt> <dd>Name of datacenter. Only hosts in this datacenter will be retrieved. Default is None.</dd> <dt>cluster_name</dt> <dd>Name of cluster. Only hosts in this cluster will be retrieved. If a datacenter is not specified the first cluster with this name will be considerred. Default is None.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_hosts_via_proxy

salt '*' vsphere.list_hosts_via_proxy hostnames=[esxi1.example.com]

salt '*' vsphere.list_hosts_via_proxy datacenter=dc1 cluster=cluster1</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_licenses"> salt.modules.vsphere.list_licenses(service_instance=None)</h3> <dd>
<p>Lists all licenses on a vCenter.</p> <dl class="docutils"> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_licenses</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_networks"> salt.modules.vsphere.list_networks(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of networks for the the specified host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_networks 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_non_ssds"> salt.modules.vsphere.list_non_ssds(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Returns a list of Non-SSD disks for the given host or list of host_names.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">In the pyVmomi StorageSystem, ScsiDisks may, or may not have an <code class="docutils literal notranslate"><span class="pre">ssd</span></code> attribute. This attribute indicates if the ScsiDisk is SSD backed. As this option is optional, if a relevant disk in the StorageSystem does not have <code class="docutils literal notranslate"><span class="pre">ssd</span> <span class="pre">=</span> <span class="pre">true</span></code>, it will end up in the <code class="docutils literal notranslate"><span class="pre">non_ssds</span></code> list here.</p> </div> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter the hosts for which to retrieve Non-SSD disks.</p> <p class="last">If host_names is not provided, Non-SSD disks will be retrieved for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.list_non_ssds my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.list_non_ssds my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_resourcepools"> salt.modules.vsphere.list_resourcepools(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of resource pools for the the specified host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_resourcepools 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_ssds"> salt.modules.vsphere.list_ssds(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Returns a list of SSDs for the given host or list of host_names.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter the hosts for which to retrieve SSDs.</p> <p class="last">If host_names is not provided, SSDs will be retrieved for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.list_ssds my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.list_ssds my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_storage_policies"> salt.modules.vsphere.list_storage_policies(policy_names=None, service_instance=None)</h3> <dd>
<p>Returns a list of storage policies.</p> <dl class="docutils"> <dt>policy_names</dt> <dd>Names of policies to list. If None, all policies are listed. Default is None.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_storage_policies

salt '*' vsphere.list_storage_policy policy_names=[policy_name]</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_uplink_dvportgroup"> salt.modules.vsphere.list_uplink_dvportgroup(dvs, service_instance=None)</h3> <dd>
<p>Returns the uplink portgroup of a distributed virtual switch.</p> <dl class="docutils"> <dt>dvs</dt> <dd>Name of the DVS containing the portgroup.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_uplink_dvportgroup dvs=dvs_name</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_vapps"> salt.modules.vsphere.list_vapps(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of vApps for the the specified host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># List vapps from all minions
salt '*' vsphere.list_vapps 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.list_vms"> salt.modules.vsphere.list_vms(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Returns a list of VMs for the the specified host.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.list_vms 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.power_off_vm"> salt.modules.vsphere.power_off_vm(name, datacenter=None, service_instance=None)</h3> <dd>
<p>Powers off a virtual machine specified by it's name.</p> <dl class="docutils"> <dt>name</dt> <dd>Name of the virtual machine</dd> <dt>datacenter</dt> <dd>Datacenter of the virtual machine</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.power_off_vm name=my_vm</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.power_on_vm"> salt.modules.vsphere.power_on_vm(name, datacenter=None, service_instance=None)</h3> <dd>
<p>Powers on a virtual machine specified by it's name.</p> <dl class="docutils"> <dt>name</dt> <dd>Name of the virtual machine</dd> <dt>datacenter</dt> <dd>Datacenter of the virtual machine</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.power_on_vm name=my_vm</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.register_vm"> salt.modules.vsphere.register_vm(name, datacenter, placement, vmx_path, service_instance=None)</h3> <dd>
<p>Registers a virtual machine to the inventory with the given vmx file. Returns comments and change list</p> <dl class="docutils"> <dt>name</dt> <dd>Name of the virtual machine</dd> <dt>datacenter</dt> <dd>Datacenter of the virtual machine</dd> <dt>placement</dt> <dd>Placement dictionary of the virtual machine, host or cluster</dd> <dt>vmx_path:</dt> <dd>Full path to the vmx file, datastore name should be included</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.remove_capacity_from_diskgroup"> salt.modules.vsphere.remove_capacity_from_diskgroup(cache_disk_id, capacity_disk_ids, data_evacuation=True, safety_checks=True, service_instance=None)</h3> <dd>
<p>Remove capacity disks from the disk group with the specified cache disk.</p> <dl class="docutils"> <dt>cache_disk_id</dt> <dd>The canonical name of the cache disk.</dd> <dt>capacity_disk_ids</dt> <dd>A list containing canonical names of the capacity disks to add.</dd> <dt>data_evacuation</dt> <dd>Specifies whether to gracefully evacuate the data on the capacity disks before removing them from the disk group. Default value is True.</dd> <dt>safety_checks</dt> <dd>Specify whether to perform safety check or to skip the checks and try performing the required task. Default value is True.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.remove_capacity_from_diskgroup
    cache_disk_id='naa.000000000000001'
    capacity_disk_ids='[naa.000000000000002, naa.000000000000003]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.remove_datastore"> salt.modules.vsphere.remove_datastore(datastore, service_instance=None)</h3> <dd>
<p>Removes a datastore. If multiple datastores an error is raised.</p> <dl class="docutils"> <dt>datastore</dt> <dd>Datastore name</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.remove_datastore ds_name</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.remove_diskgroup"> salt.modules.vsphere.remove_diskgroup(cache_disk_id, data_accessibility=True, service_instance=None)</h3> <dd>
<p>Remove the diskgroup with the specified cache disk.</p> <dl class="docutils"> <dt>cache_disk_id</dt> <dd>The canonical name of the cache disk.</dd> <dt>data_accessibility</dt> <dd>Specifies whether to ensure data accessibility. Default value is True.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.remove_diskgroup cache_disk_id='naa.000000000000001'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.remove_dvportgroup"> salt.modules.vsphere.remove_dvportgroup(portgroup, dvs, service_instance=None)</h3> <dd>
<p>Removes a distributed virtual portgroup.</p> <dl class="docutils"> <dt>portgroup</dt> <dd>Name of the portgroup to be removed.</dd> <dt>dvs</dt> <dd>Name of the DVS containing the portgroups.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.remove_dvportgroup portgroup=pg1 dvs=dvs1</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.rename_datastore"> salt.modules.vsphere.rename_datastore(datastore_name, new_datastore_name, service_instance=None)</h3> <dd>
<p>Renames a datastore. The datastore needs to be visible to the proxy.</p> <dl class="docutils"> <dt>datastore_name</dt> <dd>Current datastore name.</dd> <dt>new_datastore_name</dt> <dd>New datastore name.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter/ESXi host. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.rename_datastore old_name new_name</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.reset_syslog_config"> salt.modules.vsphere.reset_syslog_config(host, username, password, protocol=None, port=None, syslog_config=None, esxi_hosts=None, credstore=None)</h3> <dd>
<p>Reset the syslog service to its default settings.</p> <p>Valid syslog_config values are <code class="docutils literal notranslate"><span class="pre">logdir</span></code>, <code class="docutils literal notranslate"><span class="pre">loghost</span></code>, <code class="docutils literal notranslate"><span class="pre">logdir-unique</span></code>, <code class="docutils literal notranslate"><span class="pre">default-rotate</span></code>, <code class="docutils literal notranslate"><span class="pre">default-size</span></code>, <code class="docutils literal notranslate"><span class="pre">default-timeout</span></code>, or <code class="docutils literal notranslate"><span class="pre">all</span></code> for all of these.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>syslog_config</dt> <dd>List of parameters to reset, provided as a comma-delimited string, or 'all' to reset all syslog configuration parameters. Required.</dd> <dt>esxi_hosts</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">host</span></code> is a vCenter host, then use esxi_hosts to execute this function on a list of one or more ESXi machines.</dd> <dt>credstore</dt> <dd>Optionally set to path to the credential store file.</dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">Dictionary with a top-level key of 'success' which indicates if all the parameters were reset, and individual keys for each parameter indicating which succeeded or failed, per host.</td> </tr> </tbody> </table> <p>CLI Example:</p> <p><code class="docutils literal notranslate"><span class="pre">syslog_config</span></code> can be passed as a quoted, comma-separated string, e.g.</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for ESXi host connection information
salt '*' vsphere.reset_syslog_config my.esxi.host root bad-password             syslog_config='logdir,loghost'

# Used for connecting to a vCenter Server
salt '*' vsphere.reset_syslog_config my.vcenter.location root bad-password             syslog_config='logdir,loghost' esxi_hosts='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.service_restart"> salt.modules.vsphere.service_restart(host, username, password, service_name, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Restart the named service for the given host or list of hosts.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>service_name</dt> <dd>
<dl class="first last docutils"> <dt>The name of the service for which to set the policy. Supported service names are:</dt> <dd>
<ul class="first last simple"> <li>DCUI</li> <li>TSM</li> <li>SSH</li> <li>lbtd</li> <li>lsassd</li> <li>lwiod</li> <li>netlogond</li> <li>ntpd</li> <li>sfcbd-watchdog</li> <li>snmpd</li> <li>vprobed</li> <li>vpxa</li> <li>xorg</li> </ul> </dd> </dl> </dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter the hosts for which to restart the service.</p> <p class="last">If host_names is not provided, the service will be restarted for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.service_restart my.esxi.host root bad-password 'ntpd'

# Used for connecting to a vCenter Server
salt '*' vsphere.service_restart my.vcenter.location root bad-password 'ntpd'         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.service_start"> salt.modules.vsphere.service_start(host, username, password, service_name, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Start the named service for the given host or list of hosts.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>service_name</dt> <dd>
<dl class="first last docutils"> <dt>The name of the service for which to set the policy. Supported service names are:</dt> <dd>
<ul class="first last simple"> <li>DCUI</li> <li>TSM</li> <li>SSH</li> <li>lbtd</li> <li>lsassd</li> <li>lwiod</li> <li>netlogond</li> <li>ntpd</li> <li>sfcbd-watchdog</li> <li>snmpd</li> <li>vprobed</li> <li>vpxa</li> <li>xorg</li> </ul> </dd> </dl> </dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter the hosts for which to start the service.</p> <p class="last">If host_names is not provided, the service will be started for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.service_start my.esxi.host root bad-password 'ntpd'

# Used for connecting to a vCenter Server
salt '*' vsphere.service_start my.vcenter.location root bad-password 'ntpd'         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.service_stop"> salt.modules.vsphere.service_stop(host, username, password, service_name, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Stop the named service for the given host or list of hosts.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>service_name</dt> <dd>
<dl class="first last docutils"> <dt>The name of the service for which to set the policy. Supported service names are:</dt> <dd>
<ul class="first last simple"> <li>DCUI</li> <li>TSM</li> <li>SSH</li> <li>lbtd</li> <li>lsassd</li> <li>lwiod</li> <li>netlogond</li> <li>ntpd</li> <li>sfcbd-watchdog</li> <li>snmpd</li> <li>vprobed</li> <li>vpxa</li> <li>xorg</li> </ul> </dd> </dl> </dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter the hosts for which to stop the service.</p> <p class="last">If host_names is not provided, the service will be stopped for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.service_stop my.esxi.host root bad-password 'ssh'

# Used for connecting to a vCenter Server
salt '*' vsphere.service_stop my.vcenter.location root bad-password 'ssh'         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.set_advanced_configs"> salt.modules.vsphere.set_advanced_configs(vm_name, datacenter, advanced_configs, service_instance=None)</h3> <dd>
<p>Appends extra config parameters to a virtual machine advanced config list</p> <dl class="docutils"> <dt>vm_name</dt> <dd>Virtual machine name</dd> <dt>datacenter</dt> <dd>Datacenter name where the virtual machine is available</dd> <dt>advanced_configs</dt> <dd>Dictionary with advanced parameter key value pairs</dd> <dt>service_instance</dt> <dd>vCenter service instance for connection and configuration</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.set_coredump_network_config"> salt.modules.vsphere.set_coredump_network_config(host, username, password, dump_ip, protocol=None, port=None, host_vnic='vmk0', dump_port=6500, esxi_hosts=None, credstore=None)</h3> <dd>
<p>Set the network parameters for a network coredump collection. Note that ESXi requires that the dumps first be enabled (see <cite>coredump_network_enable</cite>) before these parameters may be set.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>dump_ip</dt> <dd>IP address of host that will accept the dump.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>esxi_hosts</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">host</span></code> is a vCenter host, then use esxi_hosts to execute this function on a list of one or more ESXi machines.</dd> <dt>host_vnic</dt> <dd>Host VNic port through which to communicate. Defaults to <code class="docutils literal notranslate"><span class="pre">vmk0</span></code>.</dd> <dt>dump_port</dt> <dd>TCP port to use for the dump, defaults to <code class="docutils literal notranslate"><span class="pre">6500</span></code>.</dd> <dt>credstore</dt> <dd>Optionally set to path to the credential store file.</dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">A standard cmd.run_all dictionary with a <cite>success</cite> key added, per host. <cite>success</cite> will be True if the set succeeded, False otherwise.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for ESXi host connection information
salt '*' vsphere.set_coredump_network_config my.esxi.host root bad-password 'dump_ip.host.com'

# Used for connecting to a vCenter Server
salt '*' vsphere.set_coredump_network_config my.vcenter.location root bad-password 'dump_ip.host.com'             esxi_hosts='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.set_ntp_config"> salt.modules.vsphere.set_ntp_config(host, username, password, ntp_servers, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Set NTP configuration for a given host of list of host_names.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>ntp_servers</dt> <dd>A list of servers that should be added to and configured for the specified host's NTP configuration.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter which hosts to configure ntp servers.</p> <p class="last">If host_names is not provided, the NTP servers will be configured for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.ntp_configure my.esxi.host root bad-password '[192.174.1.100, 192.174.1.200]'

# Used for connecting to a vCenter Server
salt '*' vsphere.ntp_configure my.vcenter.location root bad-password '[192.174.1.100, 192.174.1.200]'         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.set_service_policy"> salt.modules.vsphere.set_service_policy(host, username, password, service_name, service_policy, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Set the service name's policy for a given host or list of hosts.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>service_name</dt> <dd>
<dl class="first last docutils"> <dt>The name of the service for which to set the policy. Supported service names are:</dt> <dd>
<ul class="first last simple"> <li>DCUI</li> <li>TSM</li> <li>SSH</li> <li>lbtd</li> <li>lsassd</li> <li>lwiod</li> <li>netlogond</li> <li>ntpd</li> <li>sfcbd-watchdog</li> <li>snmpd</li> <li>vprobed</li> <li>vpxa</li> <li>xorg</li> </ul> </dd> </dl> </dd> <dt>service_policy</dt> <dd>The policy to set for the service. For example, 'automatic'.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter the hosts for which to set the service policy.</p> <p class="last">If host_names is not provided, the service policy information will be retrieved for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.set_service_policy my.esxi.host root bad-password 'ntpd' 'automatic'

# Used for connecting to a vCenter Server
salt '*' vsphere.set_service_policy my.vcenter.location root bad-password 'ntpd' 'automatic'         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.set_syslog_config"> salt.modules.vsphere.set_syslog_config(host, username, password, syslog_config, config_value, protocol=None, port=None, firewall=True, reset_service=True, esxi_hosts=None, credstore=None)</h3> <dd>
<p>Set the specified syslog configuration parameter. By default, this function will reset the syslog service after the configuration is set.</p> <dl class="docutils"> <dt>host</dt> <dd>ESXi or vCenter host to connect to.</dd> <dt>username</dt> <dd>User to connect as, usually root.</dd> <dt>password</dt> <dd>Password to connect with.</dd> <dt>syslog_config</dt> <dd>
<p class="first">Name of parameter to set (corresponds to the command line switch for esxcli without the double dashes (--))</p> <p class="last">Valid syslog_config values are <code class="docutils literal notranslate"><span class="pre">logdir</span></code>, <code class="docutils literal notranslate"><span class="pre">loghost</span></code>, <code class="docutils literal notranslate"><span class="pre">default-rotate`,</span>
<span class="pre">``default-size</span></code>, <code class="docutils literal notranslate"><span class="pre">default-timeout</span></code>, and <code class="docutils literal notranslate"><span class="pre">logdir-unique</span></code>.</p> </dd> <dt>config_value</dt> <dd>
<p class="first">Value for the above parameter. For <code class="docutils literal notranslate"><span class="pre">loghost</span></code>, URLs or IP addresses to use for logging. Multiple log servers can be specified by listing them, comma-separated, but without spaces before or after commas.</p> <p class="last">(reference: <a class="reference external" href="https://blogs.vmware.com/vsphere/2012/04/configuring-multiple-syslog-servers-for-esxi-5.html">https://blogs.vmware.com/vsphere/2012/04/configuring-multiple-syslog-servers-for-esxi-5.html</a>)</p> </dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>firewall</dt> <dd>Enable the firewall rule set for syslog. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> <dt>reset_service</dt> <dd>After a successful parameter set, reset the service. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</dd> <dt>esxi_hosts</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">host</span></code> is a vCenter host, then use esxi_hosts to execute this function on a list of one or more ESXi machines.</dd> <dt>credstore</dt> <dd>Optionally set to path to the credential store file.</dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">Dictionary with a top-level key of 'success' which indicates if all the parameters were reset, and individual keys for each parameter indicating which succeeded or failed, per host.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for ESXi host connection information
salt '*' vsphere.set_syslog_config my.esxi.host root bad-password             loghost ssl://localhost:5432,tcp://10.1.0.1:1514

# Used for connecting to a vCenter Server
salt '*' vsphere.set_syslog_config my.vcenter.location root bad-password             loghost ssl://localhost:5432,tcp://10.1.0.1:1514             esxi_hosts='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.supports_proxies"> salt.modules.vsphere.supports_proxies(*proxy_types)</h3> <dd>
<p>Decorator to specify which proxy types are supported by a function</p> <dl class="docutils"> <dt>proxy_types:</dt> <dd>Arbitrary list of strings with the supported types of proxies</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.syslog_service_reload"> salt.modules.vsphere.syslog_service_reload(host, username, password, protocol=None, port=None, esxi_hosts=None, credstore=None)</h3> <dd>
<p>Reload the syslog service so it will pick up any changes.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>esxi_hosts</dt> <dd>If <code class="docutils literal notranslate"><span class="pre">host</span></code> is a vCenter host, then use esxi_hosts to execute this function on a list of one or more ESXi machines.</dd> <dt>credstore</dt> <dd>Optionally set to path to the credential store file.</dd> </dl> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Returns:</th>
<td class="field-body">A standard cmd.run_all dictionary. This dictionary will at least have a <cite>retcode</cite> key. If <cite>retcode</cite> is 0 the command was successful.</td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for ESXi host connection information
salt '*' vsphere.syslog_service_reload my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.syslog_service_reload my.vcenter.location root bad-password             esxi_hosts='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.system_info"> salt.modules.vsphere.system_info(host, username, password, protocol=None, port=None)</h3> <dd>
<p>Return system information about a VMware environment.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.system_info 1.2.3.4 root bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.test_vcenter_connection"> salt.modules.vsphere.test_vcenter_connection(service_instance=None)</h3> <dd>
<p>Checks if a connection is to a vCenter</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.test_vcenter_connection</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.unregister_vm"> salt.modules.vsphere.unregister_vm(name, datacenter, placement=None, power_off=False, service_instance=None)</h3> <dd>
<p>Unregisters a virtual machine defined by name and placement</p> <dl class="docutils"> <dt>name</dt> <dd>Name of the virtual machine</dd> <dt>datacenter</dt> <dd>Datacenter of the virtual machine</dd> <dt>placement</dt> <dd>Placement information of the virtual machine</dd> <dt>service_instance</dt> <dd>vCenter service instance for connection and configuration</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.unregister_vm name=my_vm datacenter=my_datacenter</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.update_cluster"> salt.modules.vsphere.update_cluster(cluster_dict, datacenter=None, cluster=None, service_instance=None)</h3> <dd>
<p>Updates a cluster.</p> <dl class="docutils"> <dt>config_dict</dt> <dd>Dictionary with the config values of the new cluster.</dd> <dt>datacenter</dt> <dd>Name of datacenter containing the cluster. Ignored if already contained by proxy details. Default value is None.</dd> <dt>cluster</dt> <dd>Name of cluster. Ignored if already contained by proxy details. Default value is None.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash"># esxdatacenter proxy
salt '*' vsphere.update_cluster cluster_dict=$cluster_dict cluster=cl1

# esxcluster proxy
salt '*' vsphere.update_cluster cluster_dict=$cluster_dict</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.update_dvportgroup"> salt.modules.vsphere.update_dvportgroup(portgroup_dict, portgroup, dvs, service_instance=True)</h3> <dd>
<p>Updates a distributed virtual portgroup.</p> <dl class="docutils"> <dt>portgroup_dict</dt> <dd>Dictionary with the values the portgroup should be update with (example in salt.states.dvs).</dd> <dt>portgroup</dt> <dd>Name of the portgroup to be updated.</dd> <dt>dvs</dt> <dd>Name of the DVS containing the portgroups.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.update_dvportgroup portgroup_dict=&lt;dict&gt;
    portgroup=pg1

salt '*' vsphere.update_dvportgroup portgroup_dict=&lt;dict&gt;
    portgroup=pg1 dvs=dvs1</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.update_dvs"> salt.modules.vsphere.update_dvs(dvs_dict, dvs, service_instance=None)</h3> <dd>
<p>Updates a distributed virtual switch (DVS).</p> <dl class="docutils"> <dt>Note: Updating the product info, capability, uplinks of a DVS is not</dt> <dd>supported so the corresponding entries in <code class="docutils literal notranslate"><span class="pre">dvs_dict</span></code> will be ignored.</dd> <dt>dvs_dict</dt> <dd>Dictionary with the values the DVS should be update with (example in salt.states.dvs)</dd> <dt>dvs</dt> <dd>Name of the DVS to be updated.</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.update_dvs dvs_dict=$dvs_dict dvs=dvs1</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.update_host_datetime"> salt.modules.vsphere.update_host_datetime(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Update the date/time on the given host or list of host_names. This function should be used with caution since network delays and execution delays can result in time skews.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter which hosts should update their date/time.</p> <p class="last">If host_names is not provided, the date/time will be updated for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.update_date_time my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.update_date_time my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.update_host_password"> salt.modules.vsphere.update_host_password(host, username, password, new_password, protocol=None, port=None)</h3> <dd>
<p>Update the password for a given host.</p> <div class="admonition note"> <p class="first admonition-title">Note</p> <p class="last">Currently only works with connections to ESXi hosts. Does not work with vCenter servers.</p> </div> <dl class="docutils"> <dt>host</dt> <dd>The location of the ESXi host.</dd> <dt>username</dt> <dd>The username used to login to the ESXi host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the ESXi host.</dd> <dt>new_password</dt> <dd>The new password that will be updated for the provided username on the ESXi host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.update_host_password my.esxi.host root original-bad-password new-bad-password</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.update_storage_policy"> salt.modules.vsphere.update_storage_policy(policy, policy_dict, service_instance=None)</h3> <dd>
<p>Updates a storage policy.</p> <p>Supported capability types: scalar, set, range.</p> <dl class="docutils"> <dt>policy</dt> <dd>Name of the policy to update.</dd> <dt>policy_dict</dt> <dd>Dictionary containing the changes to apply to the policy. (example in salt.states.pbm)</dd> <dt>service_instance</dt> <dd>Service instance (vim.ServiceInstance) of the vCenter. Default is None.</dd> </dl> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.update_storage_policy policy='policy name'
    policy_dict="$policy_dict"</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.update_vm"> salt.modules.vsphere.update_vm(vm_name, cpu=None, memory=None, image=None, version=None, interfaces=None, disks=None, scsi_devices=None, serial_ports=None, datacenter=None, datastore=None, cd_dvd_drives=None, sata_controllers=None, advanced_configs=None, service_instance=None)</h3> <dd>
<p>Updates the configuration of the virtual machine if the config differs</p> <dl class="docutils"> <dt>vm_name</dt> <dd>Virtual Machine name to be updated</dd> <dt>cpu</dt> <dd>CPU configuration options</dd> <dt>memory</dt> <dd>Memory configuration options</dd> <dt>version</dt> <dd>Virtual machine container hardware version</dd> <dt>image</dt> <dd>Virtual machine guest OS version identifier VirtualMachineGuestOsIdentifier</dd> <dt>interfaces</dt> <dd>Network interfaces configuration options</dd> <dt>disks</dt> <dd>Disks configuration options</dd> <dt>scsi_devices</dt> <dd>SCSI devices configuration options</dd> <dt>serial_ports</dt> <dd>Serial ports configuration options</dd> <dt>datacenter</dt> <dd>Datacenter where the virtual machine is available</dd> <dt>datastore</dt> <dd>Datastore where the virtual machine config files are available</dd> <dt>cd_dvd_drives</dt> <dd>CD/DVD drives configuration options</dd> <dt>advanced_config</dt> <dd>Advanced config parameters to be set for the virtual machine</dd> <dt>service_instance</dt> <dd>vCenter service instance for connection and configuration</dd> </dl> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.upload_ssh_key"> salt.modules.vsphere.upload_ssh_key(host, username, password, ssh_key=None, ssh_key_file=None, protocol=None, port=None, certificate_verify=False)</h3> <dd>
<p>Upload an ssh key for root to an ESXi host via http PUT. This function only works for ESXi, not vCenter. Only one ssh key can be uploaded for root. Uploading a second key will replace any existing key.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first simple"> <li>
<strong>host</strong> -- The location of the ESXi Host</li> <li>
<strong>username</strong> -- Username to connect as</li> <li>
<strong>password</strong> -- Password for the ESXi web endpoint</li> <li>
<strong>ssh_key</strong> -- Public SSH key, will be added to authorized_keys on ESXi</li> <li>
<strong>ssh_key_file</strong> -- File containing the SSH key. Use 'ssh_key' or ssh_key_file, but not both.</li> <li>
<strong>protocol</strong> -- defaults to https, can be http if ssl is disabled on ESXi</li> <li>
<strong>port</strong> -- defaults to 443 for https</li> <li>
<strong>certificate_verify</strong> -- If true require that the SSL connection present a valid certificate</li> </ul> </td> </tr> <tr class="field-even field">
<th class="field-name">Returns:</th>
<td class="field-body">
<p class="first last">Dictionary with a 'status' key, True if upload is successful. If upload is unsuccessful, 'status' key will be False and an 'Error' key will have an informative message.</p> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' vsphere.upload_ssh_key my.esxi.host root bad-password ssh_key_file='/etc/salt/my_keys/my_key.pub'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.vmotion_disable"> salt.modules.vsphere.vmotion_disable(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Disable vMotion for a given host or list of host_names.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter which hosts should disable VMotion.</p> <p class="last">If host_names is not provided, VMotion will be disabled for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.vmotion_disable my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.vmotion_disable my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.vmotion_enable"> salt.modules.vsphere.vmotion_enable(host, username, password, protocol=None, port=None, host_names=None, device='vmk0')</h3> <dd>
<p>Enable vMotion for a given host or list of host_names.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter which hosts should enable VMotion.</p> <p class="last">If host_names is not provided, VMotion will be enabled for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> <dt>device</dt> <dd>The device that uniquely identifies the VirtualNic that will be used for VMotion for each host. Defaults to <code class="docutils literal notranslate"><span class="pre">vmk0</span></code>.</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.vmotion_enable my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.vmotion_enable my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.vsan_add_disks"> salt.modules.vsphere.vsan_add_disks(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Add any VSAN-eligible disks to the VSAN System for the given host or list of host_names.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter which hosts need to add any VSAN-eligible disks to the host's VSAN system.</p> <p class="last">If host_names is not provided, VSAN-eligible disks will be added to the hosts's VSAN system for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.vsan_add_disks my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.vsan_add_disks my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.vsan_disable"> salt.modules.vsphere.vsan_disable(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Disable VSAN for a given host or list of host_names.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter which hosts should disable VSAN.</p> <p class="last">If host_names is not provided, VSAN will be disabled for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.vsan_disable my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.vsan_disable my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.vsphere.vsan_enable"> salt.modules.vsphere.vsan_enable(host, username, password, protocol=None, port=None, host_names=None)</h3> <dd>
<p>Enable VSAN for a given host or list of host_names.</p> <dl class="docutils"> <dt>host</dt> <dd>The location of the host.</dd> <dt>username</dt> <dd>The username used to login to the host, such as <code class="docutils literal notranslate"><span class="pre">root</span></code>.</dd> <dt>password</dt> <dd>The password used to login to the host.</dd> <dt>protocol</dt> <dd>Optionally set to alternate protocol if the host is not using the default protocol. Default protocol is <code class="docutils literal notranslate"><span class="pre">https</span></code>.</dd> <dt>port</dt> <dd>Optionally set to alternate port if the host is not using the default port. Default port is <code class="docutils literal notranslate"><span class="pre">443</span></code>.</dd> <dt>host_names</dt> <dd>
<p class="first">List of ESXi host names. When the host, username, and password credentials are provided for a vCenter Server, the host_names argument is required to tell vCenter which hosts should enable VSAN.</p> <p class="last">If host_names is not provided, VSAN will be enabled for the <code class="docutils literal notranslate"><span class="pre">host</span></code> location instead. This is useful for when service instance connection information is used for a single ESXi host.</p> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash"># Used for single ESXi host connection information
salt '*' vsphere.vsan_enable my.esxi.host root bad-password

# Used for connecting to a vCenter Server
salt '*' vsphere.vsan_enable my.vcenter.location root bad-password         host_names='[esxi-1.host.com, esxi-2.host.com]'</pre> </dd>
</dl> </div>
<div class="_attribution">
  <p class="_attribution-p">
     2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.vsphere.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.vsphere.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
