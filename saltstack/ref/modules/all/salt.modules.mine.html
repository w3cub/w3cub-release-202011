
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.mine - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" The function cache system allows for data to be stored on the master so it can be easily read by other minions ">
  <meta name="keywords" content="salt, modules, mine, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.mine.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.mine</h1> <p>The function cache system allows for data to be stored on the master so it can be easily read by other minions</p> <dl class="function"> <h3 id="salt.modules.mine.delete"> salt.modules.mine.delete(fun)</h3> <dd>
<p>Remove specific function contents of minion. Returns True on success.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' mine.delete 'network.interfaces'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mine.flush"> salt.modules.mine.flush()</h3> <dd>
<p>Remove all mine contents of minion. Returns True on success.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' mine.flush</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mine.get"> salt.modules.mine.get(tgt, fun, tgt_type='glob', exclude_minion=False)</h3> <dd>
<p>Get data from the mine based on the target, function and tgt_type</p> <p>Targets can be matched based on any standard matching system that can be matched on the master via these keywords:</p> <ul class="simple"> <li>glob</li> <li>pcre</li> <li>grain</li> <li>grain_pcre</li> <li>compound</li> <li>pillar</li> <li>pillar_pcre</li> </ul> <p>Note that all pillar matches, whether using the compound matching system or the pillar matching system, will be exact matches, with globbing disabled.</p> <dl class="docutils"> <dt>exclude_minion</dt> <dd>Excludes the current minion from the result set</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' mine.get '*' network.interfaces
salt '*' mine.get 'os:Fedora' network.interfaces grain
salt '*' mine.get 'G@os:Fedora and S@192.168.5.0/24' network.ipaddrs compound</pre> <div class="admonition seealso"> <p class="first admonition-title">See also</p> <p>Retrieving Mine data from Pillar and Orchestrate</p> <p>This execution module is intended to be executed on minions. Master-side operations such as Pillar or Orchestrate that require Mine data should use the <a class="reference internal" href="../../runners/all/salt.runners.mine#module-salt.runners.mine" title="salt.runners.mine"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Mine</span> <span class="pre">Runner</span> <span class="pre">module</span></code></a> instead; it can be invoked from a Pillar SLS file using the <a class="reference internal" href="salt.modules.saltutil#salt.modules.saltutil.runner" title="salt.modules.saltutil.runner"><code class="xref py py-func docutils literal notranslate"><span class="pre">saltutil.runner</span></code></a> module. For example:</p> <div class="last highlight-jinja notranslate">
<div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">minion_ips</span> <span class="o">=</span> <span class="nv">salt.saltutil.runner</span><span class="o">(</span><span class="s1">'mine.get'</span><span class="o">,</span>
    <span class="nv">tgt</span><span class="o">=</span><span class="s1">'*'</span><span class="o">,</span>
    <span class="nv">fun</span><span class="o">=</span><span class="s1">'network.ip_addrs'</span><span class="o">,</span>
    <span class="nv">tgt_type</span><span class="o">=</span><span class="s1">'glob'</span><span class="o">)</span> <span class="cp">%}</span>
</pre></div> </div> </div> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mine.get_docker"> salt.modules.mine.get_docker(interfaces=None, cidrs=None, with_container_id=False)</h3> <dd>
<div class="versionchanged"> <p><span class="versionmodified">Changed in version 2017.7.8,2018.3.3: </span>When <a class="reference internal" href="https://docs.saltstack.com/en/latest/ref/configuration/minion.html#std:conf_minion-docker.update_mine"><code class="xref std std-conf_minion docutils literal notranslate"><span class="pre">docker.update_mine</span></code></a> is set to <code class="docutils literal notranslate"><span class="pre">False</span></code> for a given minion, no mine data will be populated for that minion, and thus none will be returned for it.</p> </div> <div class="versionchanged"> <p><span class="versionmodified">Changed in version 2019.2.0: </span><a class="reference internal" href="https://docs.saltstack.com/en/latest/ref/configuration/minion.html#std:conf_minion-docker.update_mine"><code class="xref std std-conf_minion docutils literal notranslate"><span class="pre">docker.update_mine</span></code></a> now defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code></p> </div> <p>Get all mine data for <a class="reference internal" href="salt.modules.dockermod#salt.modules.dockermod.ps_" title="salt.modules.dockermod.ps_"><code class="xref py py-func docutils literal notranslate"><span class="pre">docker.ps</span></code></a> and run an aggregation routine. The <code class="docutils literal notranslate"><span class="pre">interfaces</span></code> parameter allows for specifying the network interfaces from which to select IP addresses. The <code class="docutils literal notranslate"><span class="pre">cidrs</span></code> parameter allows for specifying a list of subnets which the IP address must match.</p> <dl class="docutils"> <dt>with_container_id</dt> <dd>
<p class="first">Boolean, to expose container_id in the list of results</p> <div class="last versionadded"> <p><span class="versionmodified">New in version 2015.8.2.</span></p> </div> </dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' mine.get_docker
salt '*' mine.get_docker interfaces='eth0'
salt '*' mine.get_docker interfaces='["eth0", "eth1"]'
salt '*' mine.get_docker cidrs='107.170.147.0/24'
salt '*' mine.get_docker cidrs='["107.170.147.0/24", "172.17.42.0/24"]'
salt '*' mine.get_docker interfaces='["eth0", "eth1"]' cidrs='["107.170.147.0/24", "172.17.42.0/24"]'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mine.send"> salt.modules.mine.send(func, *args, **kwargs)</h3> <dd>
<p>Send a specific function to the mine.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' mine.send network.ip_addrs eth0
salt '*' mine.send eth0_ip_addrs mine_function=network.ip_addrs eth0</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mine.update"> salt.modules.mine.update(clear=False, mine_functions=None)</h3> <dd>
<p>Execute the configured functions and send the data back up to the master. The functions to be executed are merged from the master config, pillar and minion config under the option <cite>mine_functions</cite>:</p> <pre class="highlight-yaml notranslate" data-language="yaml">mine_functions:
  network.ip_addrs:
    - eth0
  disk.usage: []</pre> <p>This function accepts the following arguments:</p> <dl class="docutils"> <dt>clear: False</dt> <dd>Boolean flag specifying whether updating will clear the existing mines, or will update. Default: <cite>False</cite> (update).</dd> <dt>mine_functions</dt> <dd>
<p class="first">Update the mine data on certain functions only. This feature can be used when updating the mine for functions that require refresh at different intervals than the rest of the functions specified under <cite>mine_functions</cite> in the minion/master config or pillar. A potential use would be together with the <cite>scheduler</cite>, for example:</p> <pre class="highlight-yaml notranslate" data-language="yaml">schedule:
  lldp_mine_update:
    function: mine.update
    kwargs:
        mine_functions:
          net.lldp: []
    hours: 12</pre> <p class="last">In the example above, the mine for <cite>net.lldp</cite> would be refreshed every 12 hours, while <cite>network.ip_addrs</cite> would continue to be updated as specified in <cite>mine_interval</cite>.</p> </dd> </dl> <p>The function cache will be populated with information from executing these functions</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' mine.update</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.mine.valid"> salt.modules.mine.valid()</h3> <dd>
<p>List valid entries in mine configuration.</p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' mine.valid</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.mine.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.mine.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
