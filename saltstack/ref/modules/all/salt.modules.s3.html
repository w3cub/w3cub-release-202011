
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.s3 - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Connection module for Amazon S3 ">
  <meta name="keywords" content="salt, modules, s, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.s3.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.s3</h1> <p>Connection module for Amazon S3</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">configuration:</th>
<td class="field-body">
<p class="first">This module accepts explicit s3 credentials but can also utilize IAM roles assigned to the instance through Instance Profiles. Dynamic credentials are then automatically obtained from AWS API and no further configuration is necessary. More Information available at:</p> <pre class="highlight-default notranslate" data-language="default">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html</pre> <p>If IAM roles are not used you need to specify them either in a pillar or in the minion's config file:</p> <pre class="highlight-default notranslate" data-language="default">s3.keyid: GKTADJGHEIQSXMKKRBJ08H
s3.key: askdjghsdfjkghWupUjasdflkdfklgjsdfjajkghs</pre> <p>(Note: this is literally the pillar key 's3.keyid' or the config option 's3.keyid', not "s3:n keyid: blah".)</p> <p>A service_url may also be specified in the configuration:</p> <pre class="highlight-default notranslate" data-language="default">s3.service_url: s3.amazonaws.com</pre> <p>A role_arn may also be specified in the configuration:</p> <pre class="highlight-default notranslate" data-language="default">s3.role_arn: arn:aws:iam::111111111111:role/my-role-to-assume</pre> <p>If a service_url is not specified, the default is s3.amazonaws.com. This may appear in various documentation as an "endpoint". A comprehensive list for Amazon S3 may be found at:</p> <pre class="highlight-default notranslate" data-language="default">http://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region</pre> <p>The service_url will form the basis for the final endpoint that is used to query the service.</p> <p>Path style can be enabled:</p> <blockquote> <div>
<p>s3.path_style: True</p> </div>
</blockquote> <p>This can be useful if you need to use salt with a proxy for an s3 compatible storage</p> <p>You can use either https protocol or http protocol:</p> <blockquote> <div>
<p>s3.https_enable: True</p> </div>
</blockquote> <p>SSL verification may also be turned off in the configuration:</p> <blockquote> <div>
<p>s3.verify_ssl: False</p> </div>
</blockquote> <p>This is required if using S3 bucket names that contain a period, as these will not match Amazon's S3 wildcard certificates. Certificate verification is enabled by default.</p> <p>AWS region may be specified in the configuration:</p> <blockquote> <div>
<p>s3.location: eu-central-1</p> </div>
</blockquote> <p>Default is us-east-1.</p> <p>This module should be usable to query other S3-like services, such as Eucalyptus.</p> </td> </tr> <tr class="field-even field">
<th class="field-name">depends:</th>
<td class="field-body">
<p class="first last">requests</p> </td> </tr> </tbody> </table> <dl class="function"> <h3 id="salt.modules.s3.delete"> salt.modules.s3.delete(bucket, path=None, action=None, key=None, keyid=None, service_url=None, verify_ssl=None, kms_keyid=None, location=None, role_arn=None, path_style=None, https_enable=None)</h3> <dd>
<p>Delete a bucket, or delete an object from a bucket.</p> <p>CLI Example to delete a bucket:</p> <pre class="highlight-default notranslate" data-language="default">salt myminion s3.delete mybucket</pre> <p>CLI Example to delete an object from a bucket:</p> <pre class="highlight-default notranslate" data-language="default">salt myminion s3.delete mybucket remoteobject</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.s3.get"> salt.modules.s3.get(bucket='', path='', return_bin=False, action=None, local_file=None, key=None, keyid=None, service_url=None, verify_ssl=None, kms_keyid=None, location=None, role_arn=None, path_style=None, https_enable=None)</h3> <dd>
<p>List the contents of a bucket, or return an object from a bucket. Set return_bin to True in order to retrieve an object wholesale. Otherwise, Salt will attempt to parse an XML response.</p> <p>CLI Example to list buckets:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion s3.get</pre> <p>CLI Example to list the contents of a bucket:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion s3.get mybucket</pre> <p>CLI Example to return the binary contents of an object:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion s3.get mybucket myfile.png return_bin=True</pre> <p>CLI Example to save the binary contents of an object to a local file:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion s3.get mybucket myfile.png local_file=/tmp/myfile.png</pre> <p>It is also possible to perform an action on a bucket. Currently, S3 supports the following actions:</p> <pre class="highlight-default notranslate" data-language="default">acl
cors
lifecycle
policy
location
logging
notification
tagging
versions
requestPayment
versioning
website</pre> <p>To perform an action on a bucket:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion s3.get mybucket myfile.png action=acl</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.s3.head"> salt.modules.s3.head(bucket, path='', key=None, keyid=None, service_url=None, verify_ssl=None, kms_keyid=None, location=None, role_arn=None, path_style=None, https_enable=None)</h3> <dd>
<p>Return the metadata for a bucket, or an object in a bucket.</p> <p>CLI Examples:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion s3.head mybucket
salt myminion s3.head mybucket myfile.png</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.s3.put"> salt.modules.s3.put(bucket, path=None, return_bin=False, action=None, local_file=None, key=None, keyid=None, service_url=None, verify_ssl=None, kms_keyid=None, location=None, role_arn=None, path_style=None, https_enable=None)</h3> <dd>
<p>Create a new bucket, or upload an object to a bucket.</p> <p>CLI Example to create a bucket:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion s3.put mybucket</pre> <p>CLI Example to upload an object to a bucket:</p> <pre class="highlight-bash notranslate" data-language="bash">salt myminion s3.put mybucket remotepath local_file=/path/to/file</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.s3.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.s3.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
