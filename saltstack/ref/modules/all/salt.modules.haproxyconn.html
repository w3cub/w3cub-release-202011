
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.haproxyconn - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Support for haproxy ">
  <meta name="keywords" content="salt, modules, haproxyconn, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.haproxyconn.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.haproxyconn</h1> <p>Support for haproxy</p> <div class="versionadded"> <p><span class="versionmodified">New in version 2014.7.0.</span></p> </div> <dl class="function"> <h3 id="salt.modules.haproxyconn.disable_server"> salt.modules.haproxyconn.disable_server(name, backend, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Disable server in haproxy.</p> <dl class="docutils"> <dt>name</dt> <dd>Server to disable</dd> <dt>backend</dt> <dd>haproxy backend, or all backends if "*" is supplied</dd> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.disable_server db1.example.com mysql</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.enable_server"> salt.modules.haproxyconn.enable_server(name, backend, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Enable Server in haproxy</p> <dl class="docutils"> <dt>name</dt> <dd>Server to enable</dd> <dt>backend</dt> <dd>haproxy backend, or all backends if "*" is supplied</dd> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.enable_server web1.example.com www</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.get_backend"> salt.modules.haproxyconn.get_backend(backend, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Receive information about a specific backend.</p> <dl class="docutils"> <dt>backend</dt> <dd>haproxy backend</dd> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.get_backend mysql</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.get_sessions"> salt.modules.haproxyconn.get_sessions(name, backend, socket='/var/run/haproxy.sock')</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2016.11.0.</span></p> </div> <p>Get number of current sessions on server in backend (scur)</p> <dl class="docutils"> <dt>name</dt> <dd>Server name</dd> <dt>backend</dt> <dd>haproxy backend</dd> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.get_sessions web1.example.com www</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.get_weight"> salt.modules.haproxyconn.get_weight(name, backend, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Get server weight</p> <dl class="docutils"> <dt>name</dt> <dd>Server name</dd> <dt>backend</dt> <dd>haproxy backend</dd> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.get_weight web1.example.com www</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.list_backends"> salt.modules.haproxyconn.list_backends(servers=True, socket='/var/run/haproxy.sock')</h3> <dd>
<p>List HaProxy Backends</p> <dl class="docutils"> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> <dt>servers</dt> <dd>list backends with servers</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.list_backends</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.list_frontends"> salt.modules.haproxyconn.list_frontends(socket='/var/run/haproxy.sock')</h3> <dd>
<p>List HaProxy frontends</p> <dl class="docutils"> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.list_frontends</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.list_servers"> salt.modules.haproxyconn.list_servers(backend, socket='/var/run/haproxy.sock', objectify=False)</h3> <dd>
<p>List servers in haproxy backend.</p> <dl class="docutils"> <dt>backend</dt> <dd>haproxy backend</dd> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.list_servers mysql</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.set_state"> salt.modules.haproxyconn.set_state(name, backend, state, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Force a server's administrative state to a new state. This can be useful to disable load balancing and/or any traffic to a server. Setting the state to "ready" puts the server in normal mode, and the command is the equivalent of the "enable server" command. Setting the state to "maint" disables any traffic to the server as well as any health checks. This is the equivalent of the "disable server" command. Setting the mode to "drain" only removes the server from load balancing but still allows it to be checked and to accept new persistent connections. Changes are propagated to tracking servers if any.</p> <dl class="docutils"> <dt>name</dt> <dd>Server name</dd> <dt>backend</dt> <dd>haproxy backend</dd> <dt>state</dt> <dd>A string of the state to set. Must be 'ready', 'drain', or 'maint'</dd> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.set_state my_proxy_server my_backend ready</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.set_weight"> salt.modules.haproxyconn.set_weight(name, backend, weight=0, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Set server weight</p> <dl class="docutils"> <dt>name</dt> <dd>Server name</dd> <dt>backend</dt> <dd>haproxy backend</dd> <dt>weight</dt> <dd>Server Weight</dd> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.set_weight web1.example.com www 13</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.show_backends"> salt.modules.haproxyconn.show_backends(socket='/var/run/haproxy.sock')</h3> <dd>
<p>Show HaProxy Backends</p> <dl class="docutils"> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.show_backends</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.show_frontends"> salt.modules.haproxyconn.show_frontends(socket='/var/run/haproxy.sock')</h3> <dd>
<p>Show HaProxy frontends</p> <dl class="docutils"> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.show_frontends</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.haproxyconn.wait_state"> salt.modules.haproxyconn.wait_state(backend, server, value='up', timeout=300, socket='/var/run/haproxy.sock')</h3> <dd>
<p>Wait for a specific server state</p> <dl class="docutils"> <dt>backend</dt> <dd>haproxy backend</dd> <dt>server</dt> <dd>targeted server</dd> <dt>value</dt> <dd>state value</dd> <dt>timeout</dt> <dd>timeout before giving up state value, default 5 min</dd> <dt>socket</dt> <dd>haproxy stats socket, default <code class="docutils literal notranslate"><span class="pre">/var/run/haproxy.sock</span></code>
</dd> </dl> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' haproxy.wait_state mysql server01 up 60</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.haproxyconn.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.haproxyconn.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
