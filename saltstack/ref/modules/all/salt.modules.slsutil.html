
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>modules.slsutil - SaltStack - W3cubDocs</title>
  
  <meta name="description" content=" Utility functions for use with or in SLS files ">
  <meta name="keywords" content="salt, modules, slsutil, saltstack">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/saltstack/ref/modules/all/salt.modules.slsutil.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/saltstack.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/saltstack/" class="_nav-link" title="" style="margin-left:0;">SaltStack</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>salt.modules.slsutil</h1> <p>Utility functions for use with or in SLS files</p> <dl class="function"> <h3 id="salt.modules.slsutil.deserialize"> salt.modules.slsutil.deserialize(serializer, stream_or_string, **mod_kwargs)</h3> <dd>
<p>Deserialize a Python object using a <code class="xref py py-mod docutils literal notranslate"><span class="pre">serializer</span> <span class="pre">module</span></code></p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' slsutil.deserialize 'json' '{"foo": "Foo!"}'
salt '*' --no-parse=stream_or_string slsutil.deserialize 'json' \
    stream_or_string='{"foo": "Foo!"}'</pre> <p>Jinja Example:</p> <pre class="highlight-jinja notranslate" data-language="jinja">{% set python_object = salt.slsutil.deserialize('json',
    '{"foo": "Foo!"}') %}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.slsutil.merge"> salt.modules.slsutil.merge(obj_a, obj_b, strategy='smart', renderer='yaml', merge_lists=False)</h3> <dd>
<p>Merge a data structure into another by choosing a merge strategy</p> <p>Strategies:</p> <ul class="simple"> <li>aggregate</li> <li>list</li> <li>overwrite</li> <li>recurse</li> <li>smart</li> </ul> <p>CLI Example:</p> <pre class="highlight-shell notranslate" data-language="shell">salt '*' slsutil.merge '{foo: Foo}' '{bar: Bar}'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.slsutil.merge_all"> salt.modules.slsutil.merge_all(lst, strategy='smart', renderer='yaml', merge_lists=False)</h3> <dd>
<div class="versionadded"> <p><span class="versionmodified">New in version 2019.2.0.</span></p> </div> <p>Merge a list of objects into each other in order</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>lst</strong> (<em>Iterable</em>) -- List of objects to be merged.</li> <li>
<strong>strategy</strong> (<em>String</em>) -- Merge strategy. See utils.dictupdate.</li> <li>
<strong>renderer</strong> (<em>String</em>) -- Renderer type. Used to determine strategy when strategy is 'smart'.</li> <li>
<strong>merge_lists</strong> (<em>Bool</em>) -- Defines whether to merge embedded object lists.</li> </ul> </td> </tr> </tbody> </table> <p>CLI Example:</p> <pre class="highlight-shell notranslate" data-language="shell">$ salt-call --output=txt slsutil.merge_all '[{foo: Foo}, {foo: Bar}]'
local: {u'foo': u'Bar'}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.slsutil.renderer"> salt.modules.slsutil.renderer(path=None, string=None, default_renderer='jinja|yaml', **kwargs)</h3> <dd>
<p>Parse a string or file through Salt's renderer system</p> <div class="versionchanged"> <p><span class="versionmodified">Changed in version 2018.3.0: </span>Add support for Salt fileserver URIs.</p> </div> <p>This is an open-ended function and can be used for a variety of tasks. It makes use of Salt's "renderer pipes" system to run a string or file through a pipe of any of the loaded renderer modules.</p> <table class="docutils field-list" frame="void" rules="none"> <col class="field-name"> <col class="field-body"> <tbody valign="top"> <tr class="field-odd field">
<th class="field-name">Parameters:</th>
<td class="field-body">
<ul class="first last simple"> <li>
<strong>path</strong> -- The path to a file on Salt's fileserver (any URIs supported by <a class="reference internal" href="salt.modules.cp#salt.modules.cp.get_url" title="salt.modules.cp.get_url"><code class="xref py py-func docutils literal notranslate"><span class="pre">cp.get_url</span></code></a>) or on the local file system.</li> <li>
<strong>string</strong> -- An inline string to be used as the file to send through the renderer system. Note, not all renderer modules can work with strings; the 'py' renderer requires a file, for example.</li> <li>
<strong>default_renderer</strong> -- The renderer pipe to send the file through; this is overridden by a "she-bang" at the top of the file.</li> <li>
<strong>kwargs</strong> -- Keyword args to pass to Salt's compile_template() function.</li> </ul> </td> </tr> </tbody> </table> <p>Keep in mind the goal of each renderer when choosing a render-pipe; for example, the Jinja renderer processes a text file and produces a string, however the YAML renderer processes a text file and produces a data structure.</p> <p>One possible use is to allow writing "map files", as are commonly seen in Salt formulas, but without tying the renderer of the map file to the renderer used in the other sls files. In other words, a map file could use the Python renderer and still be included and used by an sls file that uses the default 'jinja|yaml' renderer.</p> <p>For example, the two following map files produce identical results but one is written using the normal 'jinja|yaml' and the other is using 'py':</p> <pre class="highlight-jinja notranslate" data-language="jinja">#!jinja|yaml
{% set apache = salt.grains.filter_by({
    ...normal jinja map file here...
}, merge=salt.pillar.get('apache:lookup')) %}
{{ apache | yaml() }}</pre> <pre class="highlight-python notranslate" data-language="python">#!py
def run():
    apache = __salt__.grains.filter_by({
        ...normal map here but as a python dict...
    }, merge=__salt__.pillar.get('apache:lookup'))
    return apache</pre> <p>Regardless of which of the above map files is used, it can be accessed from any other sls file by calling this function. The following is a usage example in Jinja:</p> <pre class="highlight-jinja notranslate" data-language="jinja">{% set apache = salt.slsutil.renderer('map.sls') %}</pre> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' slsutil.renderer salt://path/to/file
salt '*' slsutil.renderer /path/to/file
salt '*' slsutil.renderer /path/to/file.jinja 'jinja'
salt '*' slsutil.renderer /path/to/file.sls 'jinja|yaml'
salt '*' slsutil.renderer string='Inline template! {{ saltenv }}'
salt '*' slsutil.renderer string='Hello, {{ name }}.' name='world'</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.slsutil.serialize"> salt.modules.slsutil.serialize(serializer, obj, **mod_kwargs)</h3> <dd>
<p>Serialize a Python object using a <code class="xref py py-mod docutils literal notranslate"><span class="pre">serializer</span> <span class="pre">module</span></code></p> <p>CLI Example:</p> <pre class="highlight-bash notranslate" data-language="bash">salt '*' --no-parse=obj slsutil.serialize 'json' obj="{'foo': 'Foo!'}</pre> <p>Jinja Example:</p> <pre class="highlight-jinja notranslate" data-language="jinja">{% set json_string = salt.slsutil.serialize('json',
    {'foo': 'Foo!'}) %}</pre> </dd>
</dl> <dl class="function"> <h3 id="salt.modules.slsutil.update"> salt.modules.slsutil.update(dest, upd, recursive_update=True, merge_lists=False)</h3> <dd>
<p>Merge <code class="docutils literal notranslate"><span class="pre">upd</span></code> recursively into <code class="docutils literal notranslate"><span class="pre">dest</span></code></p> <p>If <code class="docutils literal notranslate"><span class="pre">merge_lists=True</span></code>, will aggregate list object types instead of replacing. This behavior is only activated when <code class="docutils literal notranslate"><span class="pre">recursive_update=True</span></code>.</p> <p>CLI Example:</p> <pre class="highlight-shell notranslate" data-language="shell">salt '*' slsutil.update '{foo: Foo}' '{bar: Bar}'</pre> </dd>
</dl>
<div class="_attribution">
  <p class="_attribution-p">
    Â© 2019 SaltStack.<br>Licensed under the Apache License, Version 2.0.<br>
    <a href="https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.slsutil.html" class="_attribution-link">https://docs.saltstack.com/en/latest/ref/modules/all/salt.modules.slsutil.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
