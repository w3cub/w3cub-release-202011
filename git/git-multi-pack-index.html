
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Git Multi-pack-index - Git - W3cubDocs</title>
  
  <meta name="description" content=" git-multi-pack-index - Write and verify multi-pack-indexes ">
  <meta name="keywords" content="git-multi-pack-index, git, multi-pack-index">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/git/git-multi-pack-">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/git.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/git/" class="_nav-link" title="" style="margin-left:0;">Git</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _git">
				
				
<h1>git-multi-pack-index</h1>  <h2 id="_name">Name</h2> <div class="sectionbody">  <p>git-multi-pack-index - Write and verify multi-pack-indexes</p>  </div>   <h2 id="_synopsis">Synopsis</h2> <div class="sectionbody"> <div class="verseblock"> <pre class="content" data-language="shell">git multi-pack-index [--object-dir=&lt;dir&gt;] [--[no-]bitmap] &lt;sub-command&gt;</pre> </div> </div>   <h2 id="_description">Description</h2> <div class="sectionbody">  <p>Write or verify a multi-pack-index (MIDX) file.</p>  </div>   <h2 id="_options">Options</h2> <div class="sectionbody"> <div class="dlist"> <dl> <dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---object-dirltdirgt"> --object-dir=&lt;dir&gt; </dt> <dd> <p>Use given directory for the location of Git objects. We check <code>&lt;dir&gt;/packs/multi-pack-index</code> for the current MIDX file, and <code>&lt;dir&gt;/packs</code> for the pack-files to index.</p>  <p><code>&lt;dir&gt;</code> must be an alternate of the current repository.</p>  </dd> <dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---no-progress"> --[no-]progress </dt> <dd> <p>Turn progress on/off explicitly. If neither is specified, progress is shown if standard error is connected to a terminal. Supported by sub-commands <code>write</code>, <code>verify</code>, <code>expire</code>, and `repack.</p> </dd> </dl> </div>  <p>The following subcommands are available:</p>  <div class="dlist"> <dl> <dt class="hdlist1" id="Documentation/git-multi-pack-index.txt-write"> write </dt> <dd> <p>Write a new MIDX file. The following options are available for the <code>write</code> sub-command:</p> <div class="openblock"> <div class="content"> <div class="dlist"> <dl> <dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---preferred-packltpackgt"> --preferred-pack=&lt;pack&gt; </dt> <dd> <p>Optionally specify the tie-breaking pack used when multiple packs contain the same object. <code>&lt;pack&gt;</code> must contain at least one object. If not given, ties are broken in favor of the pack with the lowest mtime.</p> </dd> <dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---no-bitmap"> --[no-]bitmap </dt> <dd> <p>Control whether or not a multi-pack bitmap is written.</p> </dd> <dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---stdin-packs"> --stdin-packs </dt> <dd> <p>Write a multi-pack index containing only the set of line-delimited pack index basenames provided over stdin.</p> </dd> <dt class="hdlist1" id="Documentation/git-multi-pack-index.txt---refs-snapshotltpathgt"> --refs-snapshot=&lt;path&gt; </dt> <dd> <p>With <code>--bitmap</code>, optionally specify a file which contains a "refs snapshot" taken prior to repacking.</p>  <p>A reference snapshot is composed of line-delimited OIDs corresponding to the reference tips, usually taken by <code>git repack</code> prior to generating a new pack. A line may optionally start with a <code>+</code> character to indicate that the reference which corresponds to that OID is "preferred" (see <a href="git-config">git-config[1]</a>'s <code>pack.preferBitmapTips</code>.)</p>   <p>The file given at <code>&lt;path&gt;</code> is expected to be readable, and can contain duplicates. (If a given OID is given more than once, it is marked as preferred if at least one instance of it begins with the special <code>+</code> marker).</p>  </dd> </dl> </div> </div> </div> </dd> <dt class="hdlist1" id="Documentation/git-multi-pack-index.txt-verify"> verify </dt> <dd> <p>Verify the contents of the MIDX file.</p> </dd> <dt class="hdlist1" id="Documentation/git-multi-pack-index.txt-expire"> expire </dt> <dd> <p>Delete the pack-files that are tracked by the MIDX file, but have no objects referenced by the MIDX (with the exception of <code>.keep</code> packs and cruft packs). Rewrite the MIDX file afterward to remove all references to these pack-files.</p> </dd> <dt class="hdlist1" id="Documentation/git-multi-pack-index.txt-repack"> repack </dt> <dd> <p>Create a new pack-file containing objects in small pack-files referenced by the multi-pack-index. If the size given by the <code>--batch-size=&lt;size&gt;</code> argument is zero, then create a pack containing all objects referenced by the multi-pack-index. For a non-zero batch size, Select the pack-files by examining packs from oldest-to-newest, computing the "expected size" by counting the number of objects in the pack referenced by the multi-pack-index, then divide by the total number of objects in the pack and multiply by the pack size. We select packs with expected size below the batch size until the set of packs have total expected size at least the batch size, or all pack-files are considered. If only one pack-file is selected, then do nothing. If a new pack-file is created, rewrite the multi-pack-index to reference the new pack-file. A later run of <code>git multi-pack-index expire</code> will delete the pack-files that were part of this batch.</p>  <p>If <code>repack.packKeptObjects</code> is <code>false</code>, then any pack-files with an associated <code>.keep</code> file will not be selected for the batch to repack.</p>  </dd> </dl> </div> </div>   <h2 id="_examples">Examples</h2> <div class="sectionbody"> <div class="ulist"> <ul> <li> <p>Write a MIDX file for the packfiles in the current <code>.git</code> directory.</p> <div class="listingblock"> <div class="content"> <pre data-language="shell-session">$ git multi-pack-index write</pre> </div> </div> </li> <li> <p>Write a MIDX file for the packfiles in the current <code>.git</code> directory with a corresponding bitmap.</p> <div class="listingblock"> <div class="content"> <pre data-language="shell-session">$ git multi-pack-index write --preferred-pack=&lt;pack&gt; --bitmap</pre> </div> </div> </li> <li> <p>Write a MIDX file for the packfiles in an alternate object store.</p> <div class="listingblock"> <div class="content"> <pre data-language="shell-session">$ git multi-pack-index --object-dir &lt;alt&gt; write</pre> </div> </div> </li> <li> <p>Verify the MIDX file for the packfiles in the current <code>.git</code> directory.</p> <div class="listingblock"> <div class="content"> <pre data-language="shell-session">$ git multi-pack-index verify</pre> </div> </div> </li> </ul> </div> </div>   <h2 id="_see_also">See also</h2> <div class="sectionbody">  <p>See <a href="multi-pack-index">The Multi-Pack-Index Design Document</a> and <a href="gitformat-pack">gitformat-pack[5]</a> for more information on the multi-pack-index feature and its file format.</p>  </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2023 Scott Chacon and others<br>Licensed under the MIT License.<br>
    <a href="https://git-scm.com/docs/git-multi-pack-index" class="_attribution-link">https://git-scm.com/docs/git-multi-pack-index</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
