
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>tf.compat.v1.gather - TensorFlow 2.9 - W3cubDocs</title>
  
  <meta name="description" content=" Gather slices from params axis axis according to indices. (deprecated arguments) ">
  <meta name="keywords" content="tf, compat, gather, tensorflow, tensorflow~2.9">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/tensorflow~2.9/compat/v1/gather.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-f16eecbe420d8b2925d31ffbb21d05646497ecbd9515f08ffe69e9bba7332f5657accc7003c7f6c72cb4a132171acf171b359ae3bae4ae5660ddfb1718f88c67.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/tensorflow~2.9.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tensorflow~2.9/" class="_nav-link" title="" style="margin-left:0;">TensorFlow 2.9</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _tensorflow">
				
				
<h1 class="devsite-page-title">tf.compat.v1.gather</h1> <devsite-bookmark></devsite-bookmark>       <p>Gather slices from params axis <code translate="no" dir="ltr">axis</code> according to indices. (deprecated arguments)</p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
tf.compat.v1.gather(
    params, indices, validate_indices=None, name=None, axis=None, batch_dims=0
)
</pre>  <aside class="deprecated"><strong>Deprecated:</strong><span> SOME ARGUMENTS ARE DEPRECATED: <code translate="no" dir="ltr">(validate_indices)</code>. They will be removed in a future version. Instructions for updating: The <code translate="no" dir="ltr">validate_indices</code> argument has no effect. Indices are always validated on CPU and never validated on GPU.</span></aside> <p>Gather slices from <code translate="no" dir="ltr">params</code> axis <code translate="no" dir="ltr">axis</code> according to <code translate="no" dir="ltr">indices</code>. <code translate="no" dir="ltr">indices</code> must be an integer tensor of any dimension (often 1-D).</p> <p><a href="https://www.tensorflow.org/api_docs/python/tf/Tensor#__getitem__"><code translate="no" dir="ltr">Tensor.<strong>getitem</strong></code></a> works for scalars, <a href="../../../tf#newaxis"><code translate="no" dir="ltr">tf.newaxis</code></a>, and <a href="https://numpy.org/doc/stable/reference/arrays.indexing.html#basic-slicing-and-indexing">python slices</a></p> <p><a href="../../gather"><code translate="no" dir="ltr">tf.gather</code></a> extends indexing to handle tensors of indices.</p> <p>In the simplest case it's identical to scalar indexing:</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
params = tf.constant(['p0', 'p1', 'p2', 'p3', 'p4', 'p5'])
params[3].numpy()
b'p3'
tf.gather(params, 3).numpy()
b'p3'
</pre> <p>The most common case is to pass a single axis tensor of indices (this can't be expressed as a python slice because the indices are not sequential):</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
indices = [2, 0, 2, 5]
tf.gather(params, indices).numpy()
array([b'p2', b'p0', b'p2', b'p5'], dtype=object)
</pre> <div style="width:70%; margin:auto; margin-bottom:10px; margin-top:20px;"> <img style="width:100%" src="data:image/png;base64,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" alt> </div> <p>The indices can have any shape. When the <code translate="no" dir="ltr">params</code> has 1 axis, the output shape is equal to the input shape:</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
tf.gather(params, [[2, 0], [2, 5]]).numpy()
array([[b'p2', b'p0'],
       [b'p2', b'p5']], dtype=object)
</pre> <p>The <code translate="no" dir="ltr">params</code> may also have any shape. <code translate="no" dir="ltr">gather</code> can select slices across any axis depending on the <code translate="no" dir="ltr">axis</code> argument (which defaults to 0). Below it is used to gather first rows, then columns from a matrix:</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
params = tf.constant([[0, 1.0, 2.0],
                      [10.0, 11.0, 12.0],
                      [20.0, 21.0, 22.0],
                      [30.0, 31.0, 32.0]])
tf.gather(params, indices=[3,1]).numpy()
array([[30., 31., 32.],
       [10., 11., 12.]], dtype=float32)
tf.gather(params, indices=[2,1], axis=1).numpy()
array([[ 2.,  1.],
       [12., 11.],
       [22., 21.],
       [32., 31.]], dtype=float32)
</pre> <p>More generally: The output shape has the same shape as the input, with the indexed-axis replaced by the shape of the indices.</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
def result_shape(p_shape, i_shape, axis=0):
  return p_shape[:axis] + i_shape + p_shape[axis+1:]

result_shape([1, 2, 3], [], axis=1)
[1, 3]
result_shape([1, 2, 3], [7], axis=1)
[1, 7, 3]
result_shape([1, 2, 3], [7, 5], axis=1)
[1, 7, 5, 3]
</pre> <p>Here are some examples:</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
params.shape.as_list()
[4, 3]
indices = tf.constant([[0, 2]])
tf.gather(params, indices=indices, axis=0).shape.as_list()
[1, 2, 3]
tf.gather(params, indices=indices, axis=1).shape.as_list()
[4, 1, 2]
</pre> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
params = tf.random.normal(shape=(5, 6, 7, 8))
indices = tf.random.uniform(shape=(10, 11), maxval=7, dtype=tf.int32)
result = tf.gather(params, indices, axis=2)
result.shape.as_list()
[5, 6, 10, 11, 8]
</pre> <p>This is because each index takes a slice from <code translate="no" dir="ltr">params</code>, and places it at the corresponding location in the output. For the above example</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
# For any location in indices
a, b = 0, 1
tf.reduce_all(
    # the corresponding slice of the result
    result[:, :, a, b, :] ==
    # is equal to the slice of `params` along `axis` at the index.
    params[:, :, indices[a, b], :]
).numpy()
True
</pre> <h3 id="batching" data-text="Batching:">Batching:</h3> <p>The <code translate="no" dir="ltr">batch_dims</code> argument lets you gather different items from each element of a batch.</p> <p>Using <code translate="no" dir="ltr">batch_dims=1</code> is equivalent to having an outer loop over the first axis of <code translate="no" dir="ltr">params</code> and <code translate="no" dir="ltr">indices</code>:</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
params = tf.constant([
    [0, 0, 1, 0, 2],
    [3, 0, 0, 0, 4],
    [0, 5, 0, 6, 0]])
indices = tf.constant([
    [2, 4],
    [0, 4],
    [1, 3]])
</pre> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
tf.gather(params, indices, axis=1, batch_dims=1).numpy()
array([[1, 2],
       [3, 4],
       [5, 6]], dtype=int32)
</pre> <h4 id="this_is_equivalent_to" data-text="This is equivalent to:">This is equivalent to:</h4> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
def manually_batched_gather(params, indices, axis):
  batch_dims=1
  result = []
  for p,i in zip(params, indices):
    r = tf.gather(p, i, axis=axis-batch_dims)
    result.append(r)
  return tf.stack(result)
manually_batched_gather(params, indices, axis=1).numpy()
array([[1, 2],
       [3, 4],
       [5, 6]], dtype=int32)
</pre> <p>Higher values of <code translate="no" dir="ltr">batch_dims</code> are equivalent to multiple nested loops over the outer axes of <code translate="no" dir="ltr">params</code> and <code translate="no" dir="ltr">indices</code>. So the overall shape function is</p> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
def batched_result_shape(p_shape, i_shape, axis=0, batch_dims=0):
  return p_shape[:axis] + i_shape[batch_dims:] + p_shape[axis+1:]

batched_result_shape(
    p_shape=params.shape.as_list(),
    i_shape=indices.shape.as_list(),
    axis=1,
    batch_dims=1)
[3, 2]
</pre> <pre class="devsite-click-to-copy prettyprint lang-py" translate="no" dir="ltr" data-language="cpp">
tf.gather(params, indices, axis=1, batch_dims=1).shape.as_list()
[3, 2]
</pre> <p>This comes up naturally if you need to use the indices of an operation like <a href="../../argsort"><code translate="no" dir="ltr">tf.argsort</code></a>, or <a href="../../math/top_k"><code translate="no" dir="ltr">tf.math.top_k</code></a> where the last dimension of the indices indexes into the last dimension of input, at the corresponding location. In this case you can use <code translate="no" dir="ltr">tf.gather(values, indices, batch_dims=-1)</code>.</p> <h4 id="see_also" data-text="See also:">See also:</h4> <ul> <li>
<a href="../../tensor#__getitem__"><code translate="no" dir="ltr">tf.Tensor.<strong>getitem</strong></code></a>: The direct tensor index operation (<code translate="no" dir="ltr">t[]</code>), handles scalars and python-slices <code translate="no" dir="ltr">tensor[..., 7, 1:-1]</code>
</li> <li>
<code translate="no" dir="ltr">tf.scatter</code>: A collection of operations similar to <code translate="no" dir="ltr">__setitem__</code> (<code translate="no" dir="ltr">t[i] = x</code>)</li> <li>
<a href="../../gather_nd"><code translate="no" dir="ltr">tf.gather_nd</code></a>: An operation similar to <a href="../../gather"><code translate="no" dir="ltr">tf.gather</code></a> but gathers across multiple axis at once (it can gather elements of a matrix instead of rows or columns)</li> <li>
<a href="../../boolean_mask"><code translate="no" dir="ltr">tf.boolean_mask</code></a>, <a href="../../where"><code translate="no" dir="ltr">tf.where</code></a>: Binary indexing.</li> <li>
<a href="../../slice"><code translate="no" dir="ltr">tf.slice</code></a> and <a href="../../strided_slice"><code translate="no" dir="ltr">tf.strided_slice</code></a>: For lower level access to the implementation of <code translate="no" dir="ltr">__getitem__</code>'s python-slice handling (<code translate="no" dir="ltr">t[1:-1:2]</code>)</li> </ul>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">params</code> </td> <td> The <code translate="no" dir="ltr">Tensor</code> from which to gather values. Must be at least rank <code translate="no" dir="ltr">axis + 1</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">indices</code> </td> <td> The index <code translate="no" dir="ltr">Tensor</code>. Must be one of the following types: <code translate="no" dir="ltr">int32</code>, <code translate="no" dir="ltr">int64</code>. The values must be in range <code translate="no" dir="ltr">[0, params.shape[axis])</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">validate_indices</code> </td> <td> Deprecated, does nothing. Indices are always validated on CPU, never validated on GPU. <aside class="caution"><strong>Caution:</strong><span> On CPU, if an out of bound index is found, an error is raised. On GPU, if an out of bound index is found, a 0 is stored in the corresponding output value. </span></aside>
</td> </tr>
<tr> <td> <code translate="no" dir="ltr">axis</code> </td> <td> A <code translate="no" dir="ltr">Tensor</code>. Must be one of the following types: <code translate="no" dir="ltr">int32</code>, <code translate="no" dir="ltr">int64</code>. The <code translate="no" dir="ltr">axis</code> in <code translate="no" dir="ltr">params</code> to gather <code translate="no" dir="ltr">indices</code> from. Must be greater than or equal to <code translate="no" dir="ltr">batch_dims</code>. Defaults to the first non-batch dimension. Supports negative indexes. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">batch_dims</code> </td> <td> An <code translate="no" dir="ltr">integer</code>. The number of batch dimensions. Must be less than or equal to <code translate="no" dir="ltr">rank(indices)</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">name</code> </td> <td> A name for the operation (optional). </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> A <code translate="no" dir="ltr">Tensor</code>. Has the same type as <code translate="no" dir="ltr">params</code>. </td> </tr> 
</table>  <devsite-thumb-rating position="footer"> </devsite-thumb-rating><div class="_attribution">
  <p class="_attribution-p">
    Â© 2022 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 4.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/compat/v1/gather" class="_attribution-link">https://www.tensorflow.org/versions/r2.9/api_docs/python/tf/compat/v1/gather</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
