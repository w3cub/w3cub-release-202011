
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Shell Rules - Bazel 7.0 - W3cubDocs</title>
  
  <meta name="description" content="The sh_binary rule is used to declare executable shell scripts. (sh_binary is a misnomer&#58; its outputs aren&#39;t necessarily binaries.) This &hellip;">
  <meta name="keywords" content="shell, rules, bazel, bazel~7.0">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/bazel~7.0/shell.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/bazel~7.0.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/bazel~7.0/" class="_nav-link" title="" style="margin-left:0;">Bazel 7.0</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _bazel">
				
				
<article class="devsite-article">  <h1 class="devsite-page-title" tabindex="-1">Shell Rules</h1> <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>  <div class="devsite-article-body clearfix
  ">     <h2 id="rules" data-text="Rules" tabindex="-1">Rules</h2> <ul> <li> <a href="#sh_binary"> sh_binary </a> </li> <li> <a href="#sh_library"> sh_library </a> </li> <li> <a href="#sh_test"> sh_test </a> </li> </ul> <h2 id="sh_binary" data-text="     sh_binary   " tabindex="-1"> sh_binary </h2>  <pre class="rule-signature" translate="no" dir="ltr">sh_binary(<a href="#sh_binary.name">name</a>, <a href="#sh_binary.deps">deps</a>, <a href="#sh_binary.srcs">srcs</a>, <a href="common-definitions#typical.data">data</a>, <a href="common-definitions#binary.args">args</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#binary.env">env</a>, <a href="common-definitions#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions#common.exec_properties">exec_properties</a>, <a href="common-definitions#common.features">features</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="common-definitions#binary.output_licenses">output_licenses</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#common.toolchains">toolchains</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p> The <code translate="no" dir="ltr">sh_binary</code> rule is used to declare executable shell scripts. (<code translate="no" dir="ltr">sh_binary</code> is a misnomer: its outputs aren't necessarily binaries.) This rule ensures that all dependencies are built, and appear in the <code translate="no" dir="ltr">runfiles</code> area at execution time. We recommend that you name your <code translate="no" dir="ltr">sh_binary()</code> rules after the name of the script minus the extension (e.g. <code translate="no" dir="ltr">.sh</code>); the rule name and the file name must be distinct. <code translate="no" dir="ltr">sh_binary</code> respects shebangs, so any available interpreter may be used (eg. <code translate="no" dir="ltr">#!/bin/zsh</code>) </p> <h4 id="sh_binary_examples" data-text="Example" tabindex="-1">Example</h4> <p>For a simple shell script with no dependencies and some data files: </p> <pre class="code" translate="no" dir="ltr">
sh_binary(
    name = "foo",
    srcs = ["foo.sh"],
    data = glob(["datafiles/*.txt"]),
)
</pre> <h3 id="sh_binary_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="sh_binary.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="sh_binary.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of "library" targets to be aggregated into this target. See general comments about <code translate="no" dir="ltr">deps</code> at <a href="common-definitions#typical.deps">Typical attributes defined by most build rules</a>. <p> This attribute should be used to list other <code translate="no" dir="ltr">sh_library</code> rules that provide interpreted program source code depended on by the code in <code translate="no" dir="ltr">srcs</code>. The files provided by these rules will be present among the <code translate="no" dir="ltr">runfiles</code> of this target. </p> </td> </tr> <tr> <td id="sh_binary.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; required</p> The file containing the shell script. <p> This attribute must be a singleton list, whose element is the shell script. This script must be executable, and may be a source file or a generated file. All other files required at runtime (whether scripts or data) belong in the <code translate="no" dir="ltr">data</code> attribute. </p> </td> </tr> </tbody> </table> <h2 id="sh_library" data-text="     sh_library   " tabindex="-1"> sh_library </h2>  <pre class="rule-signature" translate="no" dir="ltr">sh_library(<a href="#sh_library.name">name</a>, <a href="#sh_library.deps">deps</a>, <a href="#sh_library.srcs">srcs</a>, <a href="common-definitions#typical.data">data</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions#common.exec_properties">exec_properties</a>, <a href="common-definitions#common.features">features</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p> The main use for this rule is to aggregate together a logical "library" consisting of related scripts—programs in an interpreted language that does not require compilation or linking, such as the Bourne shell—and any data those programs need at run-time. Such "libraries" can then be used from the <code translate="no" dir="ltr">data</code> attribute of one or more <code translate="no" dir="ltr">sh_binary</code> rules. </p> <p> You can use the <a href="general#filegroup"><code translate="no" dir="ltr">filegroup</code></a> rule to aggregate data files. </p> <p> In interpreted programming languages, there's not always a clear distinction between "code" and "data": after all, the program is just "data" from the interpreter's point of view. For this reason this rule has three attributes which are all essentially equivalent: <code translate="no" dir="ltr">srcs</code>, <code translate="no" dir="ltr">deps</code> and <code translate="no" dir="ltr">data</code>. The current implementation does not distinguish between the elements of these lists. All three attributes accept rules, source files and generated files. It is however good practice to use the attributes for their usual purpose (as with other rules). </p> <h4 id="sh_library_examples" data-text="Examples" tabindex="-1">Examples</h4> <pre class="code" translate="no" dir="ltr">
sh_library(
    name = "foo",
    data = [
        ":foo_service_script",  # an sh_binary with srcs
        ":deploy_foo",  # another sh_binary with srcs
    ],
)
</pre> <h3 id="sh_library_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="sh_library.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="sh_library.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of "library" targets to be aggregated into this target. See general comments about <code translate="no" dir="ltr">deps</code> at <a href="common-definitions#typical.deps">Typical attributes defined by most build rules</a>. <p> This attribute should be used to list other <code translate="no" dir="ltr">sh_library</code> rules that provide interpreted program source code depended on by the code in <code translate="no" dir="ltr">srcs</code>. The files provided by these rules will be present among the <code translate="no" dir="ltr">runfiles</code> of this target. </p> </td> </tr> <tr> <td id="sh_library.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of input files. <p> This attribute should be used to list shell script source files that belong to this library. Scripts can load other scripts using the shell's <code translate="no" dir="ltr">source</code> or <code translate="no" dir="ltr">.</code> command. </p> </td> </tr> </tbody> </table> <h2 id="sh_test" data-text="     sh_test   " tabindex="-1"> sh_test </h2>  <pre class="rule-signature" translate="no" dir="ltr">sh_test(<a href="#sh_test.name">name</a>, <a href="#sh_test.deps">deps</a>, <a href="#sh_test.srcs">srcs</a>, <a href="common-definitions#typical.data">data</a>, <a href="common-definitions#test.args">args</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#test.env">env</a>, <a href="common-definitions#test.env_inherit">env_inherit</a>, <a href="common-definitions#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions#common.exec_properties">exec_properties</a>, <a href="common-definitions#common.features">features</a>, <a href="common-definitions#test.flaky">flaky</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="common-definitions#test.local">local</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="common-definitions#test.shard_count">shard_count</a>, <a href="common-definitions#test.size">size</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#test.timeout">timeout</a>, <a href="common-definitions#common.toolchains">toolchains</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p>A <code translate="no" dir="ltr">sh_test()</code> rule creates a test written as a Bourne shell script.</p> <p>See the <a href="common-definitions#common-attributes-tests"> attributes common to all test rules (*_test)</a>.</p> <h4 id="sh_test_examples" data-text="Examples" tabindex="-1">Examples</h4> <pre class="code" translate="no" dir="ltr">
sh_test(
    name = "foo_integration_test",
    size = "small",
    srcs = ["foo_integration_test.sh"],
    deps = [":foo_sh_lib"],
    data = glob(["testdata/*.txt"]),
)
</pre> <h3 id="sh_test_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="sh_test.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="sh_test.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of "library" targets to be aggregated into this target. See general comments about <code translate="no" dir="ltr">deps</code> at <a href="common-definitions#typical.deps">Typical attributes defined by most build rules</a>. <p> This attribute should be used to list other <code translate="no" dir="ltr">sh_library</code> rules that provide interpreted program source code depended on by the code in <code translate="no" dir="ltr">srcs</code>. The files provided by these rules will be present among the <code translate="no" dir="ltr">runfiles</code> of this target. </p> </td> </tr> <tr> <td id="sh_test.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; required</p> The file containing the shell script. <p> This attribute must be a singleton list, whose element is the shell script. This script must be executable, and may be a source file or a generated file. All other files required at runtime (whether scripts or data) belong in the <code translate="no" dir="ltr">data</code> attribute. </p> </td> </tr> </tbody> </table>  </div>  </article> <devsite-content-footer class="nocontent"> <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see the <a href="https://developers.google.com/site-policies">Google Developers Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p> <p>Last updated 2023-12-11 UTC.</p> </devsite-content-footer> <devsite-notification> </devsite-notification> <div class="devsite-content-data"> <template class="devsite-thumb-rating-down-categories"> [{ "type": "thumb-down", "id": "missingTheInformationINeed", "label":"Missing the information I need" },{ "type": "thumb-down", "id": "tooComplicatedTooManySteps", "label":"Too complicated / too many steps" },{ "type": "thumb-down", "id": "outOfDate", "label":"Out of date" },{ "type": "thumb-down", "id": "samplesCodeIssue", "label":"Samples / code issue" },{ "type": "thumb-down", "id": "otherDown", "label":"Other" }] </template> <template class="devsite-thumb-rating-up-categories"> [{ "type": "thumb-up", "id": "easyToUnderstand", "label":"Easy to understand" },{ "type": "thumb-up", "id": "solvedMyProblem", "label":"Solved my problem" },{ "type": "thumb-up", "id": "otherUp", "label":"Other" }] </template> </div>
<div class="_attribution">
  <p class="_attribution-p">
    Licensed under the Creative Commons Attribution 4.0 License, and code samples are licensed under the Apache 2.0 License.<br>
    <a href="https://bazel.build/versions/7.0.0/reference/be/shell" class="_attribution-link">https://bazel.build/versions/7.0.0/reference/be/shell</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
