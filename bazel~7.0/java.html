
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Java Rules - Bazel 7.0 - W3cubDocs</title>
  
  <meta name="description" content="Builds a Java archive (&#34;jar file&#34;), plus a wrapper shell script with the same name as the rule. The wrapper shell script uses a classpath &hellip;">
  <meta name="keywords" content="java, rules, bazel, bazel~7.0">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/bazel~7.0/java.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/bazel~7.0.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/bazel~7.0/" class="_nav-link" title="" style="margin-left:0;">Bazel 7.0</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _bazel">
				
				
<article class="devsite-article">  <h1 class="devsite-page-title" tabindex="-1">Java Rules</h1> <div class="devsite-page-title-meta"><devsite-view-release-notes></devsite-view-release-notes></div>  <div class="devsite-article-body clearfix
  ">     <h2 id="rules" data-text="Rules" tabindex="-1">Rules</h2> <ul> <li> <a href="#java_binary"> java_binary </a> </li> <li> <a href="#java_import"> java_import </a> </li> <li> <a href="#java_library"> java_library </a> </li> <li> <a href="#java_lite_proto_library"> java_lite_proto_library </a> </li> <li> <a href="#java_proto_library"> java_proto_library </a> </li> <li> <a href="#java_test"> java_test </a> </li> <li> <a href="#java_package_configuration"> java_package_configuration </a> </li> <li> <a href="#java_plugin"> java_plugin </a> </li> <li> <a href="#java_runtime"> java_runtime </a> </li> <li> <a href="#java_toolchain"> java_toolchain </a> </li> </ul> <h2 id="java_binary" data-text="     java_binary   " tabindex="-1"> java_binary </h2>  <pre class="rule-signature" translate="no" dir="ltr">java_binary(<a href="#java_binary.name">name</a>, <a href="#java_binary.deps">deps</a>, <a href="#java_binary.srcs">srcs</a>, <a href="common-definitions#typical.data">data</a>, <a href="#java_binary.resources">resources</a>, <a href="common-definitions#binary.args">args</a>, <a href="#java_binary.classpath_resources">classpath_resources</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="#java_binary.create_executable">create_executable</a>, <a href="#java_binary.deploy_env">deploy_env</a>, <a href="#java_binary.deploy_manifest_lines">deploy_manifest_lines</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#binary.env">env</a>, <a href="common-definitions#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions#common.exec_properties">exec_properties</a>, <a href="common-definitions#common.features">features</a>, <a href="#java_binary.javacopts">javacopts</a>, <a href="#java_binary.jvm_flags">jvm_flags</a>, <a href="#java_binary.launcher">launcher</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="#java_binary.main_class">main_class</a>, <a href="common-definitions#binary.output_licenses">output_licenses</a>, <a href="#java_binary.plugins">plugins</a>, <a href="#java_binary.resource_jars">resource_jars</a>, <a href="#java_binary.resource_strip_prefix">resource_strip_prefix</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="#java_binary.runtime_deps">runtime_deps</a>, <a href="#java_binary.stamp">stamp</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#common.toolchains">toolchains</a>, <a href="#java_binary.use_launcher">use_launcher</a>, <a href="#java_binary.use_testrunner">use_testrunner</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p> Builds a Java archive ("jar file"), plus a wrapper shell script with the same name as the rule. The wrapper shell script uses a classpath that includes, among other things, a jar file for each library on which the binary depends. When running the wrapper shell script, any nonempty <code translate="no" dir="ltr">JAVABIN</code> environment variable will take precedence over the version specified via Bazel's <code translate="no" dir="ltr">--java_runtime_version</code> flag. </p> <p> The wrapper script accepts several unique flags. Refer to <code translate="no" dir="ltr">//src/main/java/com/google/devtools/build/lib/bazel/rules/java/java_stub_template.txt</code> for a list of configurable flags and environment variables accepted by the wrapper. </p> <h4 id="java_binary_implicit_outputs" data-text="Implicit output targets" tabindex="-1">Implicit output targets</h4> <ul> <li>
<code translate="no" dir="ltr"><var translate="no">name</var>.jar</code>: A Java archive, containing the class files and other resources corresponding to the binary's direct dependencies.</li> <li>
<code translate="no" dir="ltr"><var translate="no">name</var>-src.jar</code>: An archive containing the sources ("source jar").</li> <li>
<code translate="no" dir="ltr"><var translate="no">name</var>_deploy.jar</code>: A Java archive suitable for deployment (only built if explicitly requested). <p> Building the <code translate="no" dir="ltr">&lt;<var translate="no">name</var>&gt;_deploy.jar</code> target for your rule creates a self-contained jar file with a manifest that allows it to be run with the <code translate="no" dir="ltr">java -jar</code> command or with the wrapper script's <code translate="no" dir="ltr">--singlejar</code> option. Using the wrapper script is preferred to <code translate="no" dir="ltr">java -jar</code> because it also passes the <a href="java#java_binary.jvm_flags">JVM flags</a> and the options to load native libraries. </p> <p> The deploy jar contains all the classes that would be found by a classloader that searched the classpath from the binary's wrapper script from beginning to end. It also contains the native libraries needed for dependencies. These are automatically loaded into the JVM at runtime. </p> <p>If your target specifies a <a href="#java_binary.launcher">launcher</a> attribute, then instead of being a normal JAR file, the _deploy.jar will be a native binary. This will contain the launcher plus any native (C++) dependencies of your rule, all linked into a static binary. The actual jar file's bytes will be appended to that native binary, creating a single binary blob containing both the executable and the Java code. You can execute the resulting jar file directly like you would execute any native binary.</p> </li> <li>
<code translate="no" dir="ltr"><var translate="no">name</var>_deploy-src.jar</code>: An archive containing the sources collected from the transitive closure of the target. These will match the classes in the <code translate="no" dir="ltr">deploy.jar</code> except where jars have no matching source jar.</li> </ul> <p> A <code translate="no" dir="ltr">deps</code> attribute is not allowed in a <code translate="no" dir="ltr">java_binary</code> rule without <a href="java#java_binary.srcs"><code translate="no" dir="ltr">srcs</code></a>; such a rule requires a <a href="java#java_binary.main_class"><code translate="no" dir="ltr">main_class</code></a> provided by <a href="java#java_binary.runtime_deps"><code translate="no" dir="ltr">runtime_deps</code></a>. </p> <p>The following code snippet illustrates a common mistake:</p> <pre class="code" translate="no" dir="ltr">
java_binary(
    name = "DontDoThis",
    srcs = [
        <var translate="no">...</var>,
        <code class="deprecated" translate="no" dir="ltr">"GeneratedJavaFile.java"</code>,  # a generated .java file
    ],
    deps = [<code class="deprecated" translate="no" dir="ltr">":generating_rule",</code>],  # rule that generates that file
)
</pre> <p>Do this instead:</p> <pre class="code" translate="no" dir="ltr">
java_binary(
    name = "DoThisInstead",
    srcs = [
        <var translate="no">...</var>,
        ":generating_rule",
    ],
)
</pre> <h3 id="java_binary_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_binary.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> <br>It is good practice to use the name of the source file that is the main entry point of the application (minus the extension). For example, if your entry point is called <code translate="no" dir="ltr">Main.java</code>, then your name could be <code translate="no" dir="ltr">Main</code>. </td> </tr> <tr> <td id="java_binary.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of other libraries to be linked in to the target. See general comments about <code translate="no" dir="ltr">deps</code> at <a href="common-definitions#typical-attributes">Typical attributes defined by most build rules</a>. </td> </tr> <tr> <td id="java_binary.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of source files that are processed to create the target. This attribute is almost always required; see exceptions below. <p> Source files of type <code translate="no" dir="ltr">.java</code> are compiled. In case of generated <code translate="no" dir="ltr">.java</code> files it is generally advisable to put the generating rule's name here instead of the name of the file itself. This not only improves readability but makes the rule more resilient to future changes: if the generating rule generates different files in the future, you only need to fix one place: the <code translate="no" dir="ltr">outs</code> of the generating rule. You should not list the generating rule in <code translate="no" dir="ltr">deps</code> because it is a no-op. </p> <p> Source files of type <code translate="no" dir="ltr">.srcjar</code> are unpacked and compiled. (This is useful if you need to generate a set of <code translate="no" dir="ltr">.java</code> files with a genrule.) </p> <p> Rules: if the rule (typically <code translate="no" dir="ltr">genrule</code> or <code translate="no" dir="ltr">filegroup</code>) generates any of the files listed above, they will be used the same way as described for source files. </p> <p> This argument is almost always required, except if a <a href="#java_binary.main_class"><code translate="no" dir="ltr">main_class</code></a> attribute specifies a class on the runtime classpath or you specify the <code translate="no" dir="ltr">runtime_deps</code> argument. </p> </td> </tr> <tr> <td id="java_binary.resources"> <code translate="no" dir="ltr">resources</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> A list of data files to include in a Java jar. <p> If resources are specified, they will be bundled in the jar along with the usual <code translate="no" dir="ltr">.class</code> files produced by compilation. The location of the resources inside of the jar file is determined by the project structure. Bazel first looks for Maven's <a href="https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">standard directory layout</a>, (a "src" directory followed by a "resources" directory grandchild). If that is not found, Bazel then looks for the topmost directory named "java" or "javatests" (so, for example, if a resource is at <code translate="no" dir="ltr">&lt;workspace root&gt;/x/java/y/java/z</code>, the path of the resource will be <code translate="no" dir="ltr">y/java/z</code>. This heuristic cannot be overridden, however, the <code translate="no" dir="ltr">resource_strip_prefix</code> attribute can be used to specify a specific alternative directory for resource files. </p> <p> Resources may be source files or generated files. </p> </td> </tr> <tr> <td id="java_binary.classpath_resources"> <code translate="no" dir="ltr">classpath_resources</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> <em class="harmful">DO NOT USE THIS OPTION UNLESS THERE IS NO OTHER WAY)</em> <p> A list of resources that must be located at the root of the java tree. This attribute's only purpose is to support third-party libraries that require that their resources be found on the classpath as exactly <code translate="no" dir="ltr">"myconfig.xml"</code>. It is only allowed on binaries and not libraries, due to the danger of namespace conflicts. </p> </td> </tr> <tr> <td id="java_binary.create_executable"> <code translate="no" dir="ltr">create_executable</code> </td> <td> <p>Boolean; <a href="common-definitions#configurable-attributes">nonconfigurable</a>; default is <code translate="no" dir="ltr">True</code></p> Deprecated, use <code translate="no" dir="ltr">java_single_jar</code> instead. </td> </tr> <tr> <td id="java_binary.deploy_env"> <code translate="no" dir="ltr">deploy_env</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> A list of other <code translate="no" dir="ltr">java_binary</code> targets which represent the deployment environment for this binary. Set this attribute when building a plugin which will be loaded by another <code translate="no" dir="ltr">java_binary</code>.<br> Setting this attribute excludes all dependencies from the runtime classpath (and the deploy jar) of this binary that are shared between this binary and the targets specified in <code translate="no" dir="ltr">deploy_env</code>. </td> </tr> <tr> <td id="java_binary.deploy_manifest_lines"> <code translate="no" dir="ltr">deploy_manifest_lines</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> A list of lines to add to the <code translate="no" dir="ltr">META-INF/manifest.mf</code> file generated for the <code translate="no" dir="ltr">*_deploy.jar</code> target. The contents of this attribute are <em>not</em> subject to <a href="make-variables">"Make variable"</a> substitution. </td> </tr> <tr> <td id="java_binary.javacopts"> <code translate="no" dir="ltr">javacopts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> Extra compiler options for this library. Subject to <a href="make-variables">"Make variable"</a> substitution and <a href="common-definitions#sh-tokenization">Bourne shell tokenization</a>. <p>These compiler options are passed to javac after the global compiler options.</p> </td> </tr> <tr> <td id="java_binary.jvm_flags"> <code translate="no" dir="ltr">jvm_flags</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> A list of flags to embed in the wrapper script generated for running this binary. Subject to <a href="make-variables#location">$(location)</a> and <a href="make-variables">"Make variable"</a> substitution, and <a href="common-definitions#sh-tokenization">Bourne shell tokenization</a>. <p>The wrapper script for a Java binary includes a CLASSPATH definition (to find all the dependent jars) and invokes the right Java interpreter. The command line generated by the wrapper script includes the name of the main class followed by a <code translate="no" dir="ltr">"$@"</code> so you can pass along other arguments after the classname. However, arguments intended for parsing by the JVM must be specified <i>before</i> the classname on the command line. The contents of <code translate="no" dir="ltr">jvm_flags</code> are added to the wrapper script before the classname is listed.</p> <p>Note that this attribute has <em>no effect</em> on <code translate="no" dir="ltr">*_deploy.jar</code> outputs.</p> </td> </tr> <tr> <td id="java_binary.launcher"> <code translate="no" dir="ltr">launcher</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> Specify a binary that will be used to run your Java program instead of the normal <code translate="no" dir="ltr">bin/java</code> program included with the JDK. The target must be a <code translate="no" dir="ltr">cc_binary</code>. Any <code translate="no" dir="ltr">cc_binary</code> that implements the <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html"> Java Invocation API</a> can be specified as a value for this attribute. <p>By default, Bazel will use the normal JDK launcher (bin/java or java.exe).</p> <p>The related <a href="https://bazel.build/versions/7.0.0/docs/user-manual#flag--java_launcher"><code translate="no" dir="ltr">
          --java_launcher</code></a> Bazel flag affects only those <code translate="no" dir="ltr">java_binary</code> and <code translate="no" dir="ltr">java_test</code> targets that have <i>not</i> specified a <code translate="no" dir="ltr">launcher</code> attribute.</p> <p>Note that your native (C++, SWIG, JNI) dependencies will be built differently depending on whether you are using the JDK launcher or another launcher:</p> <ul> <li>If you are using the normal JDK launcher (the default), native dependencies are built as a shared library named <code translate="no" dir="ltr">{name}_nativedeps.so</code>, where <code translate="no" dir="ltr">{name}</code> is the <code translate="no" dir="ltr">name</code> attribute of this java_binary rule. Unused code is <em>not</em> removed by the linker in this configuration.</li> <li>If you are using any other launcher, native (C++) dependencies are statically linked into a binary named <code translate="no" dir="ltr">{name}_nativedeps</code>, where <code translate="no" dir="ltr">{name}</code> is the <code translate="no" dir="ltr">name</code> attribute of this java_binary rule. In this case, the linker will remove any code it thinks is unused from the resulting binary, which means any C++ code accessed only via JNI may not be linked in unless that <code translate="no" dir="ltr">cc_library</code> target specifies <code translate="no" dir="ltr">alwayslink = 1</code>.</li> </ul> <p>When using any launcher other than the default JDK launcher, the format of the <code translate="no" dir="ltr">*_deploy.jar</code> output changes. See the main <a href="#java_binary">java_binary</a> docs for details.</p> </td> </tr> <tr> <td id="java_binary.main_class"> <code translate="no" dir="ltr">main_class</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> Name of class with <code translate="no" dir="ltr">main()</code> method to use as entry point. If a rule uses this option, it does not need a <code translate="no" dir="ltr">srcs=[...]</code> list. Thus, with this attribute one can make an executable from a Java library that already contains one or more <code translate="no" dir="ltr">main()</code> methods. <p> The value of this attribute is a class name, not a source file. The class must be available at runtime: it may be compiled by this rule (from <code translate="no" dir="ltr">srcs</code>) or provided by direct or transitive dependencies (through <code translate="no" dir="ltr">runtime_deps</code> or <code translate="no" dir="ltr">deps</code>). If the class is unavailable, the binary will fail at runtime; there is no build-time check. </p> </td> </tr> <tr> <td id="java_binary.plugins"> <code translate="no" dir="ltr">plugins</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Java compiler plugins to run at compile-time. Every <code translate="no" dir="ltr">java_plugin</code> specified in this attribute will be run whenever this rule is built. A library may also inherit plugins from dependencies that use <code translate="no" dir="ltr"><a href="#java_library.exported_plugins">exported_plugins</a></code>. Resources generated by the plugin will be included in the resulting jar of this rule. </td> </tr> <tr> <td id="java_binary.resource_jars"> <code translate="no" dir="ltr">resource_jars</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Deprecated: Use java_import and deps or runtime_deps instead. </td> </tr> <tr> <td id="java_binary.resource_strip_prefix"> <code translate="no" dir="ltr">resource_strip_prefix</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> The path prefix to strip from Java resources. <p> If specified, this path prefix is stripped from every file in the <code translate="no" dir="ltr">resources</code> attribute. It is an error for a resource file not to be under this directory. If not specified (the default), the path of resource file is determined according to the same logic as the Java package of source files. For example, a source file at <code translate="no" dir="ltr">stuff/java/foo/bar/a.txt</code> will be located at <code translate="no" dir="ltr">foo/bar/a.txt</code>. </p> </td> </tr> <tr> <td id="java_binary.runtime_deps"> <code translate="no" dir="ltr">runtime_deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Libraries to make available to the final binary or test at runtime only. Like ordinary <code translate="no" dir="ltr">deps</code>, these will appear on the runtime classpath, but unlike them, not on the compile-time classpath. Dependencies needed only at runtime should be listed here. Dependency-analysis tools should ignore targets that appear in both <code translate="no" dir="ltr">runtime_deps</code> and <code translate="no" dir="ltr">deps</code>. </td> </tr> <tr> <td id="java_binary.stamp"> <code translate="no" dir="ltr">stamp</code> </td> <td> <p>Integer; default is <code translate="no" dir="ltr">-1</code></p> Whether to encode build information into the binary. Possible values: <ul> <li> <code translate="no" dir="ltr">stamp = 1</code>: Always stamp the build information into the binary, even in <a href="https://bazel.build/versions/7.0.0/docs/user-manual#flag--stamp"><code translate="no" dir="ltr">--nostamp</code></a> builds. <b>This setting should be avoided</b>, since it potentially kills remote caching for the binary and any downstream actions that depend on it. </li> <li> <code translate="no" dir="ltr">stamp = 0</code>: Always replace build information by constant values. This gives good build result caching. </li> <li> <code translate="no" dir="ltr">stamp = -1</code>: Embedding of build information is controlled by the <a href="https://bazel.build/versions/7.0.0/docs/user-manual#flag--stamp"><code translate="no" dir="ltr">--[no]stamp</code></a> flag. </li> </ul> <p>Stamped binaries are <em>not</em> rebuilt unless their dependencies change.</p> </td> </tr> <tr> <td id="java_binary.use_launcher"> <code translate="no" dir="ltr">use_launcher</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">True</code></p> Whether the binary should use a custom launcher. <p>If this attribute is set to false, the <a href="java#java_binary.launcher">launcher</a> attribute and the related <a href="https://bazel.build/versions/7.0.0/docs/user-manual#flag--java_launcher"><code translate="no" dir="ltr">--java_launcher</code></a> flag will be ignored for this target. </p>
</td> </tr> <tr> <td id="java_binary.use_testrunner"> <code translate="no" dir="ltr">use_testrunner</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">False</code></p> Use the test runner (by default <code translate="no" dir="ltr">com.google.testing.junit.runner.BazelTestRunner</code>) class as the main entry point for a Java program, and provide the test class to the test runner as a value of <code translate="no" dir="ltr">bazel.test_suite</code> system property. You can use this to override the default behavior, which is to use test runner for <code translate="no" dir="ltr">java_test</code> rules, and not use it for <code translate="no" dir="ltr">java_binary</code> rules. It is unlikely you will want to do this. One use is for <code translate="no" dir="ltr">AllTest</code> rules that are invoked by another rule (to set up a database before running the tests, for example). The <code translate="no" dir="ltr">AllTest</code> rule must be declared as a <code translate="no" dir="ltr">java_binary</code>, but should still use the test runner as its main entry point. The name of a test runner class can be overridden with <code translate="no" dir="ltr">main_class</code> attribute. </td> </tr> </tbody> </table> <h2 id="java_import" data-text="     java_import   " tabindex="-1"> java_import </h2>  <pre class="rule-signature" translate="no" dir="ltr">java_import(<a href="#java_import.name">name</a>, <a href="#java_import.deps">deps</a>, <a href="common-definitions#typical.data">data</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="#java_import.constraints">constraints</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions#common.exec_properties">exec_properties</a>, <a href="#java_import.exports">exports</a>, <a href="common-definitions#common.features">features</a>, <a href="#java_import.jars">jars</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="#java_import.neverlink">neverlink</a>, <a href="#java_import.proguard_specs">proguard_specs</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="#java_import.runtime_deps">runtime_deps</a>, <a href="#java_import.srcjar">srcjar</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p> This rule allows the use of precompiled <code translate="no" dir="ltr">.jar</code> files as libraries for <code translate="no" dir="ltr"><a href="java#java_library">java_library</a></code> and <code translate="no" dir="ltr"><a href="java#java_binary">java_binary</a></code> rules. </p> <h4 id="java_import_examples" data-text="Examples" tabindex="-1">Examples</h4> <pre class="code" translate="no" dir="ltr">
    java_import(
        name = "maven_model",
        jars = [
            "maven_model/maven-aether-provider-3.2.3.jar",
            "maven_model/maven-model-3.2.3.jar",
            "maven_model/maven-model-builder-3.2.3.jar",
        ],
    )
</pre> <h3 id="java_import_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_import.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_import.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of other libraries to be linked in to the target. See <a href="java#java_library.deps">java_library.deps</a>. </td> </tr> <tr> <td id="java_import.constraints"> <code translate="no" dir="ltr">constraints</code> </td> <td> <p>List of strings; <a href="common-definitions#configurable-attributes">nonconfigurable</a>; default is <code translate="no" dir="ltr">[]</code></p> Extra constraints imposed on this rule as a Java library. </td> </tr> <tr> <td id="java_import.exports"> <code translate="no" dir="ltr">exports</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Targets to make available to users of this rule. See <a href="java#java_library.exports">java_library.exports</a>. </td> </tr> <tr> <td id="java_import.jars"> <code translate="no" dir="ltr">jars</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; required</p> The list of JAR files provided to Java targets that depend on this target. </td> </tr> <tr> <td id="java_import.neverlink"> <code translate="no" dir="ltr">neverlink</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">False</code></p> Only use this library for compilation and not at runtime. Useful if the library will be provided by the runtime environment during execution. Examples of libraries like this are IDE APIs for IDE plug-ins or <code translate="no" dir="ltr">tools.jar</code> for anything running on a standard JDK. </td> </tr> <tr> <td id="java_import.proguard_specs"> <code translate="no" dir="ltr">proguard_specs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Files to be used as Proguard specification. These will describe the set of specifications to be used by Proguard. If specified, they will be added to any <code translate="no" dir="ltr">android_binary</code> target depending on this library. The files included here must only have idempotent rules, namely -dontnote, -dontwarn, assumenosideeffects, and rules that start with -keep. Other options can only appear in <code translate="no" dir="ltr">android_binary</code>'s proguard_specs, to ensure non-tautological merges. </td> </tr> <tr> <td id="java_import.runtime_deps"> <code translate="no" dir="ltr">runtime_deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Libraries to make available to the final binary or test at runtime only. See <a href="java#java_library.runtime_deps">java_library.runtime_deps</a>. </td> </tr> <tr> <td id="java_import.srcjar"> <code translate="no" dir="ltr">srcjar</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> A JAR file that contains source code for the compiled JAR files. </td> </tr> </tbody> </table> <h2 id="java_library" data-text="     java_library   " tabindex="-1"> java_library </h2>  <pre class="rule-signature" translate="no" dir="ltr">java_library(<a href="#java_library.name">name</a>, <a href="#java_library.deps">deps</a>, <a href="#java_library.srcs">srcs</a>, <a href="#java_library.data">data</a>, <a href="#java_library.resources">resources</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions#common.exec_properties">exec_properties</a>, <a href="#java_library.exported_plugins">exported_plugins</a>, <a href="#java_library.exports">exports</a>, <a href="common-definitions#common.features">features</a>, <a href="#java_library.javacopts">javacopts</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="#java_library.neverlink">neverlink</a>, <a href="#java_library.plugins">plugins</a>, <a href="#java_library.proguard_specs">proguard_specs</a>, <a href="#java_library.resource_jars">resource_jars</a>, <a href="#java_library.resource_strip_prefix">resource_strip_prefix</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="#java_library.runtime_deps">runtime_deps</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p>This rule compiles and links sources into a <code translate="no" dir="ltr">.jar</code> file.</p> <h4 id="java_library_implicit_outputs" data-text="Implicit output targets" tabindex="-1">Implicit output targets</h4> <ul> <li>
<code translate="no" dir="ltr">lib<var translate="no">name</var>.jar</code>: A Java archive containing the class files.</li> <li>
<code translate="no" dir="ltr">lib<var translate="no">name</var>-src.jar</code>: An archive containing the sources ("source jar").</li> </ul> <h3 id="java_library_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_library.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_library.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of libraries to link into this library. See general comments about <code translate="no" dir="ltr">deps</code> at <a href="common-definitions#typical-attributes">Typical attributes defined by most build rules</a>. <p> The jars built by <code translate="no" dir="ltr">java_library</code> rules listed in <code translate="no" dir="ltr">deps</code> will be on the compile-time classpath of this rule. Furthermore the transitive closure of their <code translate="no" dir="ltr">deps</code>, <code translate="no" dir="ltr">runtime_deps</code> and <code translate="no" dir="ltr">exports</code> will be on the runtime classpath. </p> <p> By contrast, targets in the <code translate="no" dir="ltr">data</code> attribute are included in the runfiles but on neither the compile-time nor runtime classpath. </p> </td> </tr> <tr> <td id="java_library.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of source files that are processed to create the target. This attribute is almost always required; see exceptions below. <p> Source files of type <code translate="no" dir="ltr">.java</code> are compiled. In case of generated <code translate="no" dir="ltr">.java</code> files it is generally advisable to put the generating rule's name here instead of the name of the file itself. This not only improves readability but makes the rule more resilient to future changes: if the generating rule generates different files in the future, you only need to fix one place: the <code translate="no" dir="ltr">outs</code> of the generating rule. You should not list the generating rule in <code translate="no" dir="ltr">deps</code> because it is a no-op. </p> <p> Source files of type <code translate="no" dir="ltr">.srcjar</code> are unpacked and compiled. (This is useful if you need to generate a set of <code translate="no" dir="ltr">.java</code> files with a genrule.) </p> <p> Rules: if the rule (typically <code translate="no" dir="ltr">genrule</code> or <code translate="no" dir="ltr">filegroup</code>) generates any of the files listed above, they will be used the same way as described for source files. </p> <p> This argument is almost always required, except if a <a href="#java_binary.main_class"><code translate="no" dir="ltr">main_class</code></a> attribute specifies a class on the runtime classpath or you specify the <code translate="no" dir="ltr">runtime_deps</code> argument. </p> </td> </tr> <tr> <td id="java_library.data"> <code translate="no" dir="ltr">data</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of files needed by this library at runtime. See general comments about <code translate="no" dir="ltr">data</code> at <a href="common-definitions#typical-attributes">Typical attributes defined by most build rules</a>. <p> When building a <code translate="no" dir="ltr">java_library</code>, Bazel doesn't put these files anywhere; if the <code translate="no" dir="ltr">data</code> files are generated files then Bazel generates them. When building a test that depends on this <code translate="no" dir="ltr">java_library</code> Bazel copies or links the <code translate="no" dir="ltr">data</code> files into the runfiles area. </p> </td> </tr> <tr> <td id="java_library.resources"> <code translate="no" dir="ltr">resources</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> A list of data files to include in a Java jar. <p> If resources are specified, they will be bundled in the jar along with the usual <code translate="no" dir="ltr">.class</code> files produced by compilation. The location of the resources inside of the jar file is determined by the project structure. Bazel first looks for Maven's <a href="https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">standard directory layout</a>, (a "src" directory followed by a "resources" directory grandchild). If that is not found, Bazel then looks for the topmost directory named "java" or "javatests" (so, for example, if a resource is at <code translate="no" dir="ltr">&lt;workspace root&gt;/x/java/y/java/z</code>, the path of the resource will be <code translate="no" dir="ltr">y/java/z</code>. This heuristic cannot be overridden, however, the <code translate="no" dir="ltr">resource_strip_prefix</code> attribute can be used to specify a specific alternative directory for resource files. </p> <p> Resources may be source files or generated files. </p> </td> </tr> <tr> <td id="java_library.exported_plugins"> <code translate="no" dir="ltr">exported_plugins</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of <code translate="no" dir="ltr"><a href="#/reference/be/java.html#java_plugin">java_plugin</a></code>s (e.g. annotation processors) to export to libraries that directly depend on this library. <p> The specified list of <code translate="no" dir="ltr">java_plugin</code>s will be applied to any library which directly depends on this library, just as if that library had explicitly declared these labels in <code translate="no" dir="ltr"><a href="java#java_library.plugins">plugins</a></code>. </p> </td> </tr> <tr> <td id="java_library.exports"> <code translate="no" dir="ltr">exports</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Exported libraries. <p> Listing rules here will make them available to parent rules, as if the parents explicitly depended on these rules. This is not true for regular (non-exported) <code translate="no" dir="ltr">deps</code>. </p> <p> Summary: a rule <i>X</i> can access the code in <i>Y</i> if there exists a dependency path between them that begins with a <code translate="no" dir="ltr">deps</code> edge followed by zero or more <code translate="no" dir="ltr">exports</code> edges. Let's see some examples to illustrate this. </p> <p> Assume <i>A</i> depends on <i>B</i> and <i>B</i> depends on <i>C</i>. In this case C is a <em>transitive</em> dependency of A, so changing C's sources and rebuilding A will correctly rebuild everything. However A will not be able to use classes in C. To allow that, either A has to declare C in its <code translate="no" dir="ltr">deps</code>, or B can make it easier for A (and anything that may depend on A) by declaring C in its (B's) <code translate="no" dir="ltr">exports</code> attribute. </p> <p> The closure of exported libraries is available to all direct parent rules. Take a slightly different example: A depends on B, B depends on C and D, and also exports C but not D. Now A has access to C but not to D. Now, if C and D exported some libraries, C' and D' respectively, A could only access C' but not D'. </p> <p> Important: an exported rule is not a regular dependency. Sticking to the previous example, if B exports C and wants to also use C, it has to also list it in its own <code translate="no" dir="ltr">deps</code>. </p> </td> </tr> <tr> <td id="java_library.javacopts"> <code translate="no" dir="ltr">javacopts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> Extra compiler options for this library. Subject to <a href="make-variables">"Make variable"</a> substitution and <a href="common-definitions#sh-tokenization">Bourne shell tokenization</a>. <p>These compiler options are passed to javac after the global compiler options.</p> </td> </tr> <tr> <td id="java_library.neverlink"> <code translate="no" dir="ltr">neverlink</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">False</code></p> Whether this library should only be used for compilation and not at runtime. Useful if the library will be provided by the runtime environment during execution. Examples of such libraries are the IDE APIs for IDE plug-ins or <code translate="no" dir="ltr">tools.jar</code> for anything running on a standard JDK. <p> Note that <code translate="no" dir="ltr">neverlink = 1</code> does not prevent the compiler from inlining material from this library into compilation targets that depend on it, as permitted by the Java Language Specification (e.g., <code translate="no" dir="ltr">static final</code> constants of <code translate="no" dir="ltr">String</code> or of primitive types). The preferred use case is therefore when the runtime library is identical to the compilation library. </p> <p> If the runtime library differs from the compilation library then you must ensure that it differs only in places that the JLS forbids compilers to inline (and that must hold for all future versions of the JLS). </p> </td> </tr> <tr> <td id="java_library.plugins"> <code translate="no" dir="ltr">plugins</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Java compiler plugins to run at compile-time. Every <code translate="no" dir="ltr">java_plugin</code> specified in this attribute will be run whenever this rule is built. A library may also inherit plugins from dependencies that use <code translate="no" dir="ltr"><a href="#java_library.exported_plugins">exported_plugins</a></code>. Resources generated by the plugin will be included in the resulting jar of this rule. </td> </tr> <tr> <td id="java_library.proguard_specs"> <code translate="no" dir="ltr">proguard_specs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Files to be used as Proguard specification. These will describe the set of specifications to be used by Proguard. If specified, they will be added to any <code translate="no" dir="ltr">android_binary</code> target depending on this library. The files included here must only have idempotent rules, namely -dontnote, -dontwarn, assumenosideeffects, and rules that start with -keep. Other options can only appear in <code translate="no" dir="ltr">android_binary</code>'s proguard_specs, to ensure non-tautological merges. </td> </tr> <tr> <td id="java_library.resource_jars"> <code translate="no" dir="ltr">resource_jars</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Deprecated: Use java_import and deps or runtime_deps instead. </td> </tr> <tr> <td id="java_library.resource_strip_prefix"> <code translate="no" dir="ltr">resource_strip_prefix</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> The path prefix to strip from Java resources. <p> If specified, this path prefix is stripped from every file in the <code translate="no" dir="ltr">resources</code> attribute. It is an error for a resource file not to be under this directory. If not specified (the default), the path of resource file is determined according to the same logic as the Java package of source files. For example, a source file at <code translate="no" dir="ltr">stuff/java/foo/bar/a.txt</code> will be located at <code translate="no" dir="ltr">foo/bar/a.txt</code>. </p> </td> </tr> <tr> <td id="java_library.runtime_deps"> <code translate="no" dir="ltr">runtime_deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Libraries to make available to the final binary or test at runtime only. Like ordinary <code translate="no" dir="ltr">deps</code>, these will appear on the runtime classpath, but unlike them, not on the compile-time classpath. Dependencies needed only at runtime should be listed here. Dependency-analysis tools should ignore targets that appear in both <code translate="no" dir="ltr">runtime_deps</code> and <code translate="no" dir="ltr">deps</code>. </td> </tr> </tbody> </table> <h2 id="java_lite_proto_library" data-text="     java_lite_proto_library   " tabindex="-1"> java_lite_proto_library </h2>  <pre class="rule-signature" translate="no" dir="ltr">java_lite_proto_library(<a href="#java_lite_proto_library.name">name</a>, <a href="#java_lite_proto_library.deps">deps</a>, <a href="common-definitions#typical.data">data</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions#common.exec_properties">exec_properties</a>, <a href="common-definitions#common.features">features</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p> <code translate="no" dir="ltr">java_lite_proto_library</code> generates Java code from <code translate="no" dir="ltr">.proto</code> files. </p> <p> <code translate="no" dir="ltr">deps</code> must point to <a href="protocol-buffer#proto_library"><code translate="no" dir="ltr">proto_library
</code></a> rules. </p> <p> Example: </p> <pre class="code" translate="no" dir="ltr">
java_library(
    name = "lib",
    deps = [":foo"],
)

java_lite_proto_library(
    name = "foo",
    deps = [":bar"],
)

proto_library(
    name = "bar",
)
</pre> <h3 id="java_lite_proto_library_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_lite_proto_library.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_lite_proto_library.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of <a href="protocol-buffer#proto_library"><code translate="no" dir="ltr">proto_library</code></a> rules to generate Java code for. </td> </tr> </tbody> </table> <h2 id="java_proto_library" data-text="     java_proto_library   " tabindex="-1"> java_proto_library </h2>  <pre class="rule-signature" translate="no" dir="ltr">java_proto_library(<a href="#java_proto_library.name">name</a>, <a href="#java_proto_library.deps">deps</a>, <a href="common-definitions#typical.data">data</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions#common.exec_properties">exec_properties</a>, <a href="common-definitions#common.features">features</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p> <code translate="no" dir="ltr">java_proto_library</code> generates Java code from <code translate="no" dir="ltr">.proto</code> files. </p> <p> <code translate="no" dir="ltr">deps</code> must point to <a href="protocol-buffer#proto_library"><code translate="no" dir="ltr">proto_library
</code></a> rules. </p> <p> Example: </p> <pre class="code" translate="no" dir="ltr">
java_library(
    name = "lib",
    deps = [":foo_java_proto"],
)

java_proto_library(
    name = "foo_java_proto",
    deps = [":foo_proto"],
)

proto_library(
    name = "foo_proto",
)
</pre> <h3 id="java_proto_library_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_proto_library.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_proto_library.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of <a href="protocol-buffer#proto_library"><code translate="no" dir="ltr">proto_library</code></a> rules to generate Java code for. </td> </tr> </tbody> </table> <h2 id="java_test" data-text="     java_test   " tabindex="-1"> java_test </h2>  <pre class="rule-signature" translate="no" dir="ltr">java_test(<a href="#java_test.name">name</a>, <a href="#java_test.deps">deps</a>, <a href="#java_test.srcs">srcs</a>, <a href="common-definitions#typical.data">data</a>, <a href="#java_test.resources">resources</a>, <a href="common-definitions#test.args">args</a>, <a href="#java_test.classpath_resources">classpath_resources</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="#java_test.create_executable">create_executable</a>, <a href="#java_test.deploy_manifest_lines">deploy_manifest_lines</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#test.env">env</a>, <a href="common-definitions#test.env_inherit">env_inherit</a>, <a href="common-definitions#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions#common.exec_properties">exec_properties</a>, <a href="common-definitions#common.features">features</a>, <a href="common-definitions#test.flaky">flaky</a>, <a href="#java_test.javacopts">javacopts</a>, <a href="#java_test.jvm_flags">jvm_flags</a>, <a href="#java_test.launcher">launcher</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="common-definitions#test.local">local</a>, <a href="#java_test.main_class">main_class</a>, <a href="#java_test.plugins">plugins</a>, <a href="#java_test.resource_jars">resource_jars</a>, <a href="#java_test.resource_strip_prefix">resource_strip_prefix</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="#java_test.runtime_deps">runtime_deps</a>, <a href="common-definitions#test.shard_count">shard_count</a>, <a href="common-definitions#test.size">size</a>, <a href="#java_test.stamp">stamp</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="#java_test.test_class">test_class</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#test.timeout">timeout</a>, <a href="common-definitions#common.toolchains">toolchains</a>, <a href="#java_test.use_launcher">use_launcher</a>, <a href="#java_test.use_testrunner">use_testrunner</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p> A <code translate="no" dir="ltr">java_test()</code> rule compiles a Java test. A test is a binary wrapper around your test code. The test runner's main method is invoked instead of the main class being compiled. </p> <h4 id="java_test_implicit_outputs" data-text="Implicit output targets" tabindex="-1">Implicit output targets</h4> <ul> <li>
<code translate="no" dir="ltr"><var translate="no">name</var>.jar</code>: A Java archive.</li> <li>
<code translate="no" dir="ltr"><var translate="no">name</var>_deploy.jar</code>: A Java archive suitable for deployment. (Only built if explicitly requested.) See the description of the <code translate="no" dir="ltr"><var translate="no">name</var>_deploy.jar</code> output from <a href="#java_binary">java_binary</a> for more details.</li> </ul> <p> See the section on <a href="java#java_binary_args">java_binary()</a> arguments. This rule also supports all <a href="common-definitions#common-attributes-tests">attributes common to all test rules (*_test)</a>. </p> <h4 id="java_test_examples" data-text="Examples" tabindex="-1">Examples</h4> <pre class="code" translate="no" dir="ltr">
java_library(
    name = "tests",
    srcs = glob(["*.java"]),
    deps = [
        "//java/com/foo/base:testResources",
        "//java/com/foo/testing/util",
    ],
)

java_test(
    name = "AllTests",
    size = "small",
    runtime_deps = [
        ":tests",
        "//util/mysql",
    ],
)
</pre> <h3 id="java_test_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_test.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_test.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of other libraries to be linked in to the target. See general comments about <code translate="no" dir="ltr">deps</code> at <a href="common-definitions#typical-attributes">Typical attributes defined by most build rules</a>. </td> </tr> <tr> <td id="java_test.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of source files that are processed to create the target. This attribute is almost always required; see exceptions below. <p> Source files of type <code translate="no" dir="ltr">.java</code> are compiled. In case of generated <code translate="no" dir="ltr">.java</code> files it is generally advisable to put the generating rule's name here instead of the name of the file itself. This not only improves readability but makes the rule more resilient to future changes: if the generating rule generates different files in the future, you only need to fix one place: the <code translate="no" dir="ltr">outs</code> of the generating rule. You should not list the generating rule in <code translate="no" dir="ltr">deps</code> because it is a no-op. </p> <p> Source files of type <code translate="no" dir="ltr">.srcjar</code> are unpacked and compiled. (This is useful if you need to generate a set of <code translate="no" dir="ltr">.java</code> files with a genrule.) </p> <p> Rules: if the rule (typically <code translate="no" dir="ltr">genrule</code> or <code translate="no" dir="ltr">filegroup</code>) generates any of the files listed above, they will be used the same way as described for source files. </p> <p> This argument is almost always required, except if a <a href="#java_binary.main_class"><code translate="no" dir="ltr">main_class</code></a> attribute specifies a class on the runtime classpath or you specify the <code translate="no" dir="ltr">runtime_deps</code> argument. </p> </td> </tr> <tr> <td id="java_test.resources"> <code translate="no" dir="ltr">resources</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> A list of data files to include in a Java jar. <p> If resources are specified, they will be bundled in the jar along with the usual <code translate="no" dir="ltr">.class</code> files produced by compilation. The location of the resources inside of the jar file is determined by the project structure. Bazel first looks for Maven's <a href="https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">standard directory layout</a>, (a "src" directory followed by a "resources" directory grandchild). If that is not found, Bazel then looks for the topmost directory named "java" or "javatests" (so, for example, if a resource is at <code translate="no" dir="ltr">&lt;workspace root&gt;/x/java/y/java/z</code>, the path of the resource will be <code translate="no" dir="ltr">y/java/z</code>. This heuristic cannot be overridden, however, the <code translate="no" dir="ltr">resource_strip_prefix</code> attribute can be used to specify a specific alternative directory for resource files. </p> <p> Resources may be source files or generated files. </p> </td> </tr> <tr> <td id="java_test.classpath_resources"> <code translate="no" dir="ltr">classpath_resources</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> <em class="harmful">DO NOT USE THIS OPTION UNLESS THERE IS NO OTHER WAY)</em> <p> A list of resources that must be located at the root of the java tree. This attribute's only purpose is to support third-party libraries that require that their resources be found on the classpath as exactly <code translate="no" dir="ltr">"myconfig.xml"</code>. It is only allowed on binaries and not libraries, due to the danger of namespace conflicts. </p> </td> </tr> <tr> <td id="java_test.create_executable"> <code translate="no" dir="ltr">create_executable</code> </td> <td> <p>Boolean; <a href="common-definitions#configurable-attributes">nonconfigurable</a>; default is <code translate="no" dir="ltr">True</code></p> Deprecated, use <code translate="no" dir="ltr">java_single_jar</code> instead. </td> </tr> <tr> <td id="java_test.deploy_manifest_lines"> <code translate="no" dir="ltr">deploy_manifest_lines</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> A list of lines to add to the <code translate="no" dir="ltr">META-INF/manifest.mf</code> file generated for the <code translate="no" dir="ltr">*_deploy.jar</code> target. The contents of this attribute are <em>not</em> subject to <a href="make-variables">"Make variable"</a> substitution. </td> </tr> <tr> <td id="java_test.javacopts"> <code translate="no" dir="ltr">javacopts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> Extra compiler options for this library. Subject to <a href="make-variables">"Make variable"</a> substitution and <a href="common-definitions#sh-tokenization">Bourne shell tokenization</a>. <p>These compiler options are passed to javac after the global compiler options.</p> </td> </tr> <tr> <td id="java_test.jvm_flags"> <code translate="no" dir="ltr">jvm_flags</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> A list of flags to embed in the wrapper script generated for running this binary. Subject to <a href="make-variables#location">$(location)</a> and <a href="make-variables">"Make variable"</a> substitution, and <a href="common-definitions#sh-tokenization">Bourne shell tokenization</a>. <p>The wrapper script for a Java binary includes a CLASSPATH definition (to find all the dependent jars) and invokes the right Java interpreter. The command line generated by the wrapper script includes the name of the main class followed by a <code translate="no" dir="ltr">"$@"</code> so you can pass along other arguments after the classname. However, arguments intended for parsing by the JVM must be specified <i>before</i> the classname on the command line. The contents of <code translate="no" dir="ltr">jvm_flags</code> are added to the wrapper script before the classname is listed.</p> <p>Note that this attribute has <em>no effect</em> on <code translate="no" dir="ltr">*_deploy.jar</code> outputs.</p> </td> </tr> <tr> <td id="java_test.launcher"> <code translate="no" dir="ltr">launcher</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> Specify a binary that will be used to run your Java program instead of the normal <code translate="no" dir="ltr">bin/java</code> program included with the JDK. The target must be a <code translate="no" dir="ltr">cc_binary</code>. Any <code translate="no" dir="ltr">cc_binary</code> that implements the <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html"> Java Invocation API</a> can be specified as a value for this attribute. <p>By default, Bazel will use the normal JDK launcher (bin/java or java.exe).</p> <p>The related <a href="https://bazel.build/versions/7.0.0/docs/user-manual#flag--java_launcher"><code translate="no" dir="ltr">
          --java_launcher</code></a> Bazel flag affects only those <code translate="no" dir="ltr">java_binary</code> and <code translate="no" dir="ltr">java_test</code> targets that have <i>not</i> specified a <code translate="no" dir="ltr">launcher</code> attribute.</p> <p>Note that your native (C++, SWIG, JNI) dependencies will be built differently depending on whether you are using the JDK launcher or another launcher:</p> <ul> <li>If you are using the normal JDK launcher (the default), native dependencies are built as a shared library named <code translate="no" dir="ltr">{name}_nativedeps.so</code>, where <code translate="no" dir="ltr">{name}</code> is the <code translate="no" dir="ltr">name</code> attribute of this java_binary rule. Unused code is <em>not</em> removed by the linker in this configuration.</li> <li>If you are using any other launcher, native (C++) dependencies are statically linked into a binary named <code translate="no" dir="ltr">{name}_nativedeps</code>, where <code translate="no" dir="ltr">{name}</code> is the <code translate="no" dir="ltr">name</code> attribute of this java_binary rule. In this case, the linker will remove any code it thinks is unused from the resulting binary, which means any C++ code accessed only via JNI may not be linked in unless that <code translate="no" dir="ltr">cc_library</code> target specifies <code translate="no" dir="ltr">alwayslink = 1</code>.</li> </ul> <p>When using any launcher other than the default JDK launcher, the format of the <code translate="no" dir="ltr">*_deploy.jar</code> output changes. See the main <a href="#java_binary">java_binary</a> docs for details.</p> </td> </tr> <tr> <td id="java_test.main_class"> <code translate="no" dir="ltr">main_class</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> Name of class with <code translate="no" dir="ltr">main()</code> method to use as entry point. If a rule uses this option, it does not need a <code translate="no" dir="ltr">srcs=[...]</code> list. Thus, with this attribute one can make an executable from a Java library that already contains one or more <code translate="no" dir="ltr">main()</code> methods. <p> The value of this attribute is a class name, not a source file. The class must be available at runtime: it may be compiled by this rule (from <code translate="no" dir="ltr">srcs</code>) or provided by direct or transitive dependencies (through <code translate="no" dir="ltr">runtime_deps</code> or <code translate="no" dir="ltr">deps</code>). If the class is unavailable, the binary will fail at runtime; there is no build-time check. </p> </td> </tr> <tr> <td id="java_test.plugins"> <code translate="no" dir="ltr">plugins</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Java compiler plugins to run at compile-time. Every <code translate="no" dir="ltr">java_plugin</code> specified in this attribute will be run whenever this rule is built. A library may also inherit plugins from dependencies that use <code translate="no" dir="ltr"><a href="#java_library.exported_plugins">exported_plugins</a></code>. Resources generated by the plugin will be included in the resulting jar of this rule. </td> </tr> <tr> <td id="java_test.resource_jars"> <code translate="no" dir="ltr">resource_jars</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Deprecated: Use java_import and deps or runtime_deps instead. </td> </tr> <tr> <td id="java_test.resource_strip_prefix"> <code translate="no" dir="ltr">resource_strip_prefix</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> The path prefix to strip from Java resources. <p> If specified, this path prefix is stripped from every file in the <code translate="no" dir="ltr">resources</code> attribute. It is an error for a resource file not to be under this directory. If not specified (the default), the path of resource file is determined according to the same logic as the Java package of source files. For example, a source file at <code translate="no" dir="ltr">stuff/java/foo/bar/a.txt</code> will be located at <code translate="no" dir="ltr">foo/bar/a.txt</code>. </p> </td> </tr> <tr> <td id="java_test.runtime_deps"> <code translate="no" dir="ltr">runtime_deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Libraries to make available to the final binary or test at runtime only. Like ordinary <code translate="no" dir="ltr">deps</code>, these will appear on the runtime classpath, but unlike them, not on the compile-time classpath. Dependencies needed only at runtime should be listed here. Dependency-analysis tools should ignore targets that appear in both <code translate="no" dir="ltr">runtime_deps</code> and <code translate="no" dir="ltr">deps</code>. </td> </tr> <tr> <td id="java_test.stamp"> <code translate="no" dir="ltr">stamp</code> </td> <td> <p>Integer; default is <code translate="no" dir="ltr">0</code></p> Whether to encode build information into the binary. Possible values: <ul> <li> <code translate="no" dir="ltr">stamp = 1</code>: Always stamp the build information into the binary, even in <a href="https://bazel.build/versions/7.0.0/docs/user-manual#flag--stamp"><code translate="no" dir="ltr">--nostamp</code></a> builds. <b>This setting should be avoided</b>, since it potentially kills remote caching for the binary and any downstream actions that depend on it. </li> <li> <code translate="no" dir="ltr">stamp = 0</code>: Always replace build information by constant values. This gives good build result caching. </li> <li> <code translate="no" dir="ltr">stamp = -1</code>: Embedding of build information is controlled by the <a href="https://bazel.build/versions/7.0.0/docs/user-manual#flag--stamp"><code translate="no" dir="ltr">--[no]stamp</code></a> flag. </li> </ul> <p>Stamped binaries are <em>not</em> rebuilt unless their dependencies change.</p> </td> </tr> <tr> <td id="java_test.test_class"> <code translate="no" dir="ltr">test_class</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> The Java class to be loaded by the test runner.<br> <p> By default, if this argument is not defined then the legacy mode is used and the test arguments are used instead. Set the <code translate="no" dir="ltr">--nolegacy_bazel_java_test</code> flag to not fallback on the first argument. </p> <p> This attribute specifies the name of a Java class to be run by this test. It is rare to need to set this. If this argument is omitted, it will be inferred using the target's <code translate="no" dir="ltr">name</code> and its source-root-relative path. If the test is located outside a known source root, Bazel will report an error if <code translate="no" dir="ltr">test_class</code> is unset. </p> <p> For JUnit3, the test class needs to either be a subclass of <code translate="no" dir="ltr">junit.framework.TestCase</code> or it needs to have a public static <code translate="no" dir="ltr">suite()</code> method that returns a <code translate="no" dir="ltr">junit.framework.Test</code> (or a subclass of <code translate="no" dir="ltr">Test</code>). For JUnit4, the class needs to be annotated with <code translate="no" dir="ltr">org.junit.runner.RunWith</code>. </p> <p> This attribute allows several <code translate="no" dir="ltr">java_test</code> rules to share the same <code translate="no" dir="ltr">Test</code> (<code translate="no" dir="ltr">TestCase</code>, <code translate="no" dir="ltr">TestSuite</code>, ...). Typically additional information is passed to it (e.g. via <code translate="no" dir="ltr">jvm_flags=['-Dkey=value']</code>) so that its behavior differs in each case, such as running a different subset of the tests. This attribute also enables the use of Java tests outside the <code translate="no" dir="ltr">javatests</code> tree. </p> </td> </tr> <tr> <td id="java_test.use_launcher"> <code translate="no" dir="ltr">use_launcher</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">True</code></p> Whether the binary should use a custom launcher. <p>If this attribute is set to false, the <a href="java#java_binary.launcher">launcher</a> attribute and the related <a href="https://bazel.build/versions/7.0.0/docs/user-manual#flag--java_launcher"><code translate="no" dir="ltr">--java_launcher</code></a> flag will be ignored for this target. </p>
</td> </tr> <tr> <td id="java_test.use_testrunner"> <code translate="no" dir="ltr">use_testrunner</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">True</code></p> Use the test runner (by default <code translate="no" dir="ltr">com.google.testing.junit.runner.BazelTestRunner</code>) class as the main entry point for a Java program, and provide the test class to the test runner as a value of <code translate="no" dir="ltr">bazel.test_suite</code> system property. You can use this to override the default behavior, which is to use test runner for <code translate="no" dir="ltr">java_test</code> rules, and not use it for <code translate="no" dir="ltr">java_binary</code> rules. It is unlikely you will want to do this. One use is for <code translate="no" dir="ltr">AllTest</code> rules that are invoked by another rule (to set up a database before running the tests, for example). The <code translate="no" dir="ltr">AllTest</code> rule must be declared as a <code translate="no" dir="ltr">java_binary</code>, but should still use the test runner as its main entry point. The name of a test runner class can be overridden with <code translate="no" dir="ltr">main_class</code> attribute. </td> </tr> </tbody> </table> <h2 id="java_package_configuration" data-text="     java_package_configuration   " tabindex="-1"> java_package_configuration </h2>  <pre class="rule-signature" translate="no" dir="ltr">java_package_configuration(<a href="#java_package_configuration.name">name</a>, <a href="#java_package_configuration.data">data</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#common.features">features</a>, <a href="#java_package_configuration.javacopts">javacopts</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="#java_package_configuration.packages">packages</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p> Configuration to apply to a set of packages. Configurations can be added to <code translate="no" dir="ltr"><a href="java#java_toolchain.javacopts">java_toolchain.javacopts</a></code>s. </p> <h4 id="java_package_configuration_example" data-text="Example:" tabindex="-1">Example:</h4> <pre class="code" translate="no" dir="ltr">
java_package_configuration(
    name = "my_configuration",
    packages = [":my_packages"],
    javacopts = ["-Werror"],
)

package_group(
    name = "my_packages",
    packages = [
        "//com/my/project/...",
        "-//com/my/project/testing/...",
    ],
)

java_toolchain(
    ...,
    package_configuration = [
        ":my_configuration",
    ]
)
</pre> <h3 id="java_package_configuration_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_package_configuration.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_package_configuration.data"> <code translate="no" dir="ltr">data</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of files needed by this configuration at runtime. </td> </tr> <tr> <td id="java_package_configuration.javacopts"> <code translate="no" dir="ltr">javacopts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> Java compiler flags. </td> </tr> <tr> <td id="java_package_configuration.packages"> <code translate="no" dir="ltr">packages</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The set of <code translate="no" dir="ltr"><a href="functions#package_group">package_group</a></code>s the configuration should be applied to. </td> </tr> </tbody> </table> <h2 id="java_plugin" data-text="     java_plugin   " tabindex="-1"> java_plugin </h2>  <pre class="rule-signature" translate="no" dir="ltr">java_plugin(<a href="#java_plugin.name">name</a>, <a href="#java_plugin.deps">deps</a>, <a href="#java_plugin.srcs">srcs</a>, <a href="#java_plugin.data">data</a>, <a href="#java_plugin.resources">resources</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#common.exec_compatible_with">exec_compatible_with</a>, <a href="common-definitions#common.exec_properties">exec_properties</a>, <a href="common-definitions#common.features">features</a>, <a href="#java_plugin.generates_api">generates_api</a>, <a href="#java_plugin.javacopts">javacopts</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="#java_plugin.neverlink">neverlink</a>, <a href="#java_plugin.output_licenses">output_licenses</a>, <a href="#java_plugin.plugins">plugins</a>, <a href="#java_plugin.processor_class">processor_class</a>, <a href="#java_plugin.proguard_specs">proguard_specs</a>, <a href="#java_plugin.resource_jars">resource_jars</a>, <a href="#java_plugin.resource_strip_prefix">resource_strip_prefix</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p> <code translate="no" dir="ltr">java_plugin</code> defines plugins for the Java compiler run by Bazel. At the moment, the only supported kind of plugins are annotation processors. A <code translate="no" dir="ltr">java_library</code> or <code translate="no" dir="ltr">java_binary</code> rule can run plugins by depending on them via the <code translate="no" dir="ltr">plugins</code> attribute. A <code translate="no" dir="ltr">java_library</code> can also automatically export plugins to libraries that directly depend on it using <code translate="no" dir="ltr"><a href="java#java_library.exported_plugins">exported_plugins</a></code>. </p> <h4 id="java_plugin_implicit_outputs" data-text="Implicit output targets" tabindex="-1">Implicit output targets</h4> <ul> <li>
<code translate="no" dir="ltr"><var translate="no">libname</var>.jar</code>: A Java archive.</li> </ul> <p> Arguments are identical to <a href="java#java_library"><code translate="no" dir="ltr">java_library</code></a>, except for the addition of the <code translate="no" dir="ltr">processor_class</code> argument. </p> <h3 id="java_plugin_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_plugin.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_plugin.deps"> <code translate="no" dir="ltr">deps</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of libraries to link into this library. See general comments about <code translate="no" dir="ltr">deps</code> at <a href="common-definitions#typical-attributes">Typical attributes defined by most build rules</a>. <p> The jars built by <code translate="no" dir="ltr">java_library</code> rules listed in <code translate="no" dir="ltr">deps</code> will be on the compile-time classpath of this rule. Furthermore the transitive closure of their <code translate="no" dir="ltr">deps</code>, <code translate="no" dir="ltr">runtime_deps</code> and <code translate="no" dir="ltr">exports</code> will be on the runtime classpath. </p> <p> By contrast, targets in the <code translate="no" dir="ltr">data</code> attribute are included in the runfiles but on neither the compile-time nor runtime classpath. </p> </td> </tr> <tr> <td id="java_plugin.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of source files that are processed to create the target. This attribute is almost always required; see exceptions below. <p> Source files of type <code translate="no" dir="ltr">.java</code> are compiled. In case of generated <code translate="no" dir="ltr">.java</code> files it is generally advisable to put the generating rule's name here instead of the name of the file itself. This not only improves readability but makes the rule more resilient to future changes: if the generating rule generates different files in the future, you only need to fix one place: the <code translate="no" dir="ltr">outs</code> of the generating rule. You should not list the generating rule in <code translate="no" dir="ltr">deps</code> because it is a no-op. </p> <p> Source files of type <code translate="no" dir="ltr">.srcjar</code> are unpacked and compiled. (This is useful if you need to generate a set of <code translate="no" dir="ltr">.java</code> files with a genrule.) </p> <p> Rules: if the rule (typically <code translate="no" dir="ltr">genrule</code> or <code translate="no" dir="ltr">filegroup</code>) generates any of the files listed above, they will be used the same way as described for source files. </p> <p> This argument is almost always required, except if a <a href="#java_binary.main_class"><code translate="no" dir="ltr">main_class</code></a> attribute specifies a class on the runtime classpath or you specify the <code translate="no" dir="ltr">runtime_deps</code> argument. </p> </td> </tr> <tr> <td id="java_plugin.data"> <code translate="no" dir="ltr">data</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The list of files needed by this library at runtime. See general comments about <code translate="no" dir="ltr">data</code> at <a href="common-definitions#typical-attributes">Typical attributes defined by most build rules</a>. <p> When building a <code translate="no" dir="ltr">java_library</code>, Bazel doesn't put these files anywhere; if the <code translate="no" dir="ltr">data</code> files are generated files then Bazel generates them. When building a test that depends on this <code translate="no" dir="ltr">java_library</code> Bazel copies or links the <code translate="no" dir="ltr">data</code> files into the runfiles area. </p> </td> </tr> <tr> <td id="java_plugin.resources"> <code translate="no" dir="ltr">resources</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> A list of data files to include in a Java jar. <p> If resources are specified, they will be bundled in the jar along with the usual <code translate="no" dir="ltr">.class</code> files produced by compilation. The location of the resources inside of the jar file is determined by the project structure. Bazel first looks for Maven's <a href="https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">standard directory layout</a>, (a "src" directory followed by a "resources" directory grandchild). If that is not found, Bazel then looks for the topmost directory named "java" or "javatests" (so, for example, if a resource is at <code translate="no" dir="ltr">&lt;workspace root&gt;/x/java/y/java/z</code>, the path of the resource will be <code translate="no" dir="ltr">y/java/z</code>. This heuristic cannot be overridden, however, the <code translate="no" dir="ltr">resource_strip_prefix</code> attribute can be used to specify a specific alternative directory for resource files. </p> <p> Resources may be source files or generated files. </p> </td> </tr> <tr> <td id="java_plugin.generates_api"> <code translate="no" dir="ltr">generates_api</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">False</code></p> This attribute marks annotation processors that generate API code. <p>If a rule uses an API-generating annotation processor, other rules depending on it can refer to the generated code only if their compilation actions are scheduled after the generating rule. This attribute instructs Bazel to introduce scheduling constraints when --java_header_compilation is enabled. </p>
<p><em class="harmful">WARNING: This attribute affects build performance, use it only if necessary.</em></p> </td> </tr> <tr> <td id="java_plugin.javacopts"> <code translate="no" dir="ltr">javacopts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> Extra compiler options for this library. Subject to <a href="make-variables">"Make variable"</a> substitution and <a href="common-definitions#sh-tokenization">Bourne shell tokenization</a>. <p>These compiler options are passed to javac after the global compiler options.</p> </td> </tr> <tr> <td id="java_plugin.neverlink"> <code translate="no" dir="ltr">neverlink</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">False</code></p> Whether this library should only be used for compilation and not at runtime. Useful if the library will be provided by the runtime environment during execution. Examples of such libraries are the IDE APIs for IDE plug-ins or <code translate="no" dir="ltr">tools.jar</code> for anything running on a standard JDK. <p> Note that <code translate="no" dir="ltr">neverlink = 1</code> does not prevent the compiler from inlining material from this library into compilation targets that depend on it, as permitted by the Java Language Specification (e.g., <code translate="no" dir="ltr">static final</code> constants of <code translate="no" dir="ltr">String</code> or of primitive types). The preferred use case is therefore when the runtime library is identical to the compilation library. </p> <p> If the runtime library differs from the compilation library then you must ensure that it differs only in places that the JLS forbids compilers to inline (and that must hold for all future versions of the JLS). </p> </td> </tr> <tr> <td id="java_plugin.output_licenses"> <code translate="no" dir="ltr">output_licenses</code> </td> <td> <p>Licence type; default is <code translate="no" dir="ltr">["none"]</code></p> See <a href="common-definitions#binary.output_licenses"><code translate="no" dir="ltr">common attributes
        </code></a> </td> </tr> <tr> <td id="java_plugin.plugins"> <code translate="no" dir="ltr">plugins</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Java compiler plugins to run at compile-time. Every <code translate="no" dir="ltr">java_plugin</code> specified in this attribute will be run whenever this rule is built. A library may also inherit plugins from dependencies that use <code translate="no" dir="ltr"><a href="#java_library.exported_plugins">exported_plugins</a></code>. Resources generated by the plugin will be included in the resulting jar of this rule. </td> </tr> <tr> <td id="java_plugin.processor_class"> <code translate="no" dir="ltr">processor_class</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> The processor class is the fully qualified type of the class that the Java compiler should use as entry point to the annotation processor. If not specified, this rule will not contribute an annotation processor to the Java compiler's annotation processing, but its runtime classpath will still be included on the compiler's annotation processor path. (This is primarily intended for use by <a href="https://errorprone.info/docs/plugins">Error Prone plugins</a>, which are loaded from the annotation processor path using <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html"> java.util.ServiceLoader</a>.) </td> </tr> <tr> <td id="java_plugin.proguard_specs"> <code translate="no" dir="ltr">proguard_specs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Files to be used as Proguard specification. These will describe the set of specifications to be used by Proguard. If specified, they will be added to any <code translate="no" dir="ltr">android_binary</code> target depending on this library. The files included here must only have idempotent rules, namely -dontnote, -dontwarn, assumenosideeffects, and rules that start with -keep. Other options can only appear in <code translate="no" dir="ltr">android_binary</code>'s proguard_specs, to ensure non-tautological merges. </td> </tr> <tr> <td id="java_plugin.resource_jars"> <code translate="no" dir="ltr">resource_jars</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Deprecated: Use java_import and deps or runtime_deps instead. </td> </tr> <tr> <td id="java_plugin.resource_strip_prefix"> <code translate="no" dir="ltr">resource_strip_prefix</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> The path prefix to strip from Java resources. <p> If specified, this path prefix is stripped from every file in the <code translate="no" dir="ltr">resources</code> attribute. It is an error for a resource file not to be under this directory. If not specified (the default), the path of resource file is determined according to the same logic as the Java package of source files. For example, a source file at <code translate="no" dir="ltr">stuff/java/foo/bar/a.txt</code> will be located at <code translate="no" dir="ltr">foo/bar/a.txt</code>. </p> </td> </tr> </tbody> </table> <h2 id="java_runtime" data-text="     java_runtime   " tabindex="-1"> java_runtime </h2>  <pre class="rule-signature" translate="no" dir="ltr">java_runtime(<a href="#java_runtime.name">name</a>, <a href="#java_runtime.srcs">srcs</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="#java_runtime.default_cds">default_cds</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#common.features">features</a>, <a href="#java_runtime.hermetic_srcs">hermetic_srcs</a>, <a href="#java_runtime.java">java</a>, <a href="#java_runtime.java_home">java_home</a>, <a href="#java_runtime.lib_ct_sym">lib_ct_sym</a>, <a href="#java_runtime.lib_modules">lib_modules</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="#java_runtime.version">version</a>, <a href="common-definitions#common.visibility">visibility</a>)</pre> <p> Specifies the configuration for a Java runtime. </p> <h4 id="java_runtime_example" data-text="Example:" tabindex="-1">Example:</h4> <pre class="code" translate="no" dir="ltr">
java_runtime(
    name = "jdk-9-ea+153",
    srcs = glob(["jdk9-ea+153/**"]),
    java_home = "jdk9-ea+153",
)
</pre> <h3 id="java_runtime_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_runtime.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_runtime.srcs"> <code translate="no" dir="ltr">srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> All files in the runtime. </td> </tr> <tr> <td id="java_runtime.default_cds"> <code translate="no" dir="ltr">default_cds</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> Default CDS archive for hermetic <code translate="no" dir="ltr">java_runtime</code>. When hermetic is enabled for a <code translate="no" dir="ltr">java_binary</code> target and if the target does not provide its own CDS archive by specifying the <a href="java#java_binary.classlist"><code translate="no" dir="ltr">classlist</code></a> attribute, the <code translate="no" dir="ltr">java_runtime</code> default CDS is packaged in the hermetic deploy JAR. </td> </tr> <tr> <td id="java_runtime.hermetic_srcs"> <code translate="no" dir="ltr">hermetic_srcs</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Files in the runtime needed for hermetic deployments. </td> </tr> <tr> <td id="java_runtime.java"> <code translate="no" dir="ltr">java</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> The path to the java executable. </td> </tr> <tr> <td id="java_runtime.java_home"> <code translate="no" dir="ltr">java_home</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> The path to the root of the runtime. Subject to <a href="make-variables">"Make" variable</a> substitution. If this path is absolute, the rule denotes a non-hermetic Java runtime with a well-known path. In that case, the <code translate="no" dir="ltr">srcs</code> and <code translate="no" dir="ltr">java</code> attributes must be empty. </td> </tr> <tr> <td id="java_runtime.lib_ct_sym"> <code translate="no" dir="ltr">lib_ct_sym</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> The lib/ct.sym file needed for compilation with <code translate="no" dir="ltr">--release</code>. If not specified and there is exactly one file in <code translate="no" dir="ltr">srcs</code> whose path ends with <code translate="no" dir="ltr">/lib/ct.sym</code>, that file is used. </td> </tr> <tr> <td id="java_runtime.lib_modules"> <code translate="no" dir="ltr">lib_modules</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> The lib/modules file needed for hermetic deployments. </td> </tr> <tr> <td id="java_runtime.version"> <code translate="no" dir="ltr">version</code> </td> <td> <p>Integer; default is <code translate="no" dir="ltr">0</code></p> The feature version of the Java runtime. I.e., the integer returned by <code translate="no" dir="ltr">Runtime.version().feature()</code>. </td> </tr> </tbody> </table> <h2 id="java_toolchain" data-text="     java_toolchain   " tabindex="-1"> java_toolchain </h2>  <pre class="rule-signature" translate="no" dir="ltr">java_toolchain(<a href="#java_toolchain.name">name</a>, <a href="#java_toolchain.android_lint_data">android_lint_data</a>, <a href="#java_toolchain.android_lint_jvm_opts">android_lint_jvm_opts</a>, <a href="#java_toolchain.android_lint_opts">android_lint_opts</a>, <a href="#java_toolchain.android_lint_package_configuration">android_lint_package_configuration</a>, <a href="#java_toolchain.android_lint_runner">android_lint_runner</a>, <a href="#java_toolchain.bootclasspath">bootclasspath</a>, <a href="common-definitions#common.compatible_with">compatible_with</a>, <a href="common-definitions#common.deprecation">deprecation</a>, <a href="#java_toolchain.deps_checker">deps_checker</a>, <a href="common-definitions#common.distribs">distribs</a>, <a href="common-definitions#common.features">features</a>, <a href="#java_toolchain.forcibly_disable_header_compilation">forcibly_disable_header_compilation</a>, <a href="#java_toolchain.genclass">genclass</a>, <a href="#java_toolchain.header_compiler">header_compiler</a>, <a href="#java_toolchain.header_compiler_direct">header_compiler_direct</a>, <a href="#java_toolchain.ijar">ijar</a>, <a href="#java_toolchain.jacocorunner">jacocorunner</a>, <a href="#java_toolchain.java_runtime">java_runtime</a>, <a href="#java_toolchain.javabuilder">javabuilder</a>, <a href="#java_toolchain.javabuilder_data">javabuilder_data</a>, <a href="#java_toolchain.javabuilder_jvm_opts">javabuilder_jvm_opts</a>, <a href="#java_toolchain.javac_supports_multiplex_workers">javac_supports_multiplex_workers</a>, <a href="#java_toolchain.javac_supports_workers">javac_supports_workers</a>, <a href="#java_toolchain.javacopts">javacopts</a>, <a href="#java_toolchain.jvm_opts">jvm_opts</a>, <a href="common-definitions#typical.licenses">licenses</a>, <a href="#java_toolchain.oneversion">oneversion</a>, <a href="#java_toolchain.oneversion_allowlist_for_tests">oneversion_allowlist_for_tests</a>, <a href="#java_toolchain.oneversion_whitelist">oneversion_whitelist</a>, <a href="#java_toolchain.package_configuration">package_configuration</a>, <a href="#java_toolchain.proguard_allowlister">proguard_allowlister</a>, <a href="#java_toolchain.resourcejar">resourcejar</a>, <a href="common-definitions#common.restricted_to">restricted_to</a>, <a href="#java_toolchain.singlejar">singlejar</a>, <a href="#java_toolchain.source_version">source_version</a>, <a href="common-definitions#common.tags">tags</a>, <a href="common-definitions#common.target_compatible_with">target_compatible_with</a>, <a href="#java_toolchain.target_version">target_version</a>, <a href="common-definitions#common.testonly">testonly</a>, <a href="#java_toolchain.timezone_data">timezone_data</a>, <a href="#java_toolchain.tools">tools</a>, <a href="#java_toolchain.turbine_data">turbine_data</a>, <a href="#java_toolchain.turbine_jvm_opts">turbine_jvm_opts</a>, <a href="common-definitions#common.visibility">visibility</a>, <a href="#java_toolchain.xlint">xlint</a>)</pre> <p> Specifies the configuration for the Java compiler. Which toolchain to be used can be changed through the --java_toolchain argument. Normally you should not write those kind of rules unless you want to tune your Java compiler. </p> <h4 id="examples" data-text="Examples" tabindex="-1">Examples</h4> <p>A simple example would be: </p> <pre class="code" translate="no" dir="ltr">
java_toolchain(
    name = "toolchain",
    source_version = "7",
    target_version = "7",
    bootclasspath = ["//tools/jdk:bootclasspath"],
    xlint = [ "classfile", "divzero", "empty", "options", "path" ],
    javacopts = [ "-g" ],
    javabuilder = ":JavaBuilder_deploy.jar",
)
</pre> <h3 id="java_toolchain_args" data-text="Arguments" tabindex="-1">Arguments</h3> <table class="table table-condensed table-bordered table-params"> <colgroup> <col class="col-param"> <col class="param-description"> </colgroup> <thead> <tr> <th colspan="2">Attributes</th> </tr> </thead> <tbody> <tr> <td id="java_toolchain.name"><code translate="no" dir="ltr">name</code></td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels#target-names">Name</a>; required</p> <p>A unique name for this target.</p> </td> </tr> <tr> <td id="java_toolchain.android_lint_data"> <code translate="no" dir="ltr">android_lint_data</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Labels of tools available for label-expansion in android_lint_jvm_opts. </td> </tr> <tr> <td id="java_toolchain.android_lint_jvm_opts"> <code translate="no" dir="ltr">android_lint_jvm_opts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> The list of arguments for the JVM when invoking Android Lint. </td> </tr> <tr> <td id="java_toolchain.android_lint_opts"> <code translate="no" dir="ltr">android_lint_opts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> The list of Android Lint arguments. </td> </tr> <tr> <td id="java_toolchain.android_lint_package_configuration"> <code translate="no" dir="ltr">android_lint_package_configuration</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Android Lint Configuration that should be applied to the specified package groups. </td> </tr> <tr> <td id="java_toolchain.android_lint_runner"> <code translate="no" dir="ltr">android_lint_runner</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> Label of the Android Lint runner, if any. </td> </tr> <tr> <td id="java_toolchain.bootclasspath"> <code translate="no" dir="ltr">bootclasspath</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> The Java target bootclasspath entries. Corresponds to javac's -bootclasspath flag. </td> </tr> <tr> <td id="java_toolchain.deps_checker"> <code translate="no" dir="ltr">deps_checker</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Label of the ImportDepsChecker deploy jar. </td> </tr> <tr> <td id="java_toolchain.forcibly_disable_header_compilation"> <code translate="no" dir="ltr">forcibly_disable_header_compilation</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">False</code></p> Overrides --java_header_compilation to disable header compilation on platforms that do not support it, e.g. JDK 7 Bazel. </td> </tr> <tr> <td id="java_toolchain.genclass"> <code translate="no" dir="ltr">genclass</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; required</p> Label of the GenClass deploy jar. </td> </tr> <tr> <td id="java_toolchain.header_compiler"> <code translate="no" dir="ltr">header_compiler</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Label of the header compiler. Required if --java_header_compilation is enabled. </td> </tr> <tr> <td id="java_toolchain.header_compiler_direct"> <code translate="no" dir="ltr">header_compiler_direct</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Optional label of the header compiler to use for direct classpath actions that do not include any API-generating annotation processors. <p>This tool does not support annotation processing. </p>
</td> </tr> <tr> <td id="java_toolchain.ijar"> <code translate="no" dir="ltr">ijar</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; required</p> Label of the ijar executable. </td> </tr> <tr> <td id="java_toolchain.jacocorunner"> <code translate="no" dir="ltr">jacocorunner</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> Label of the JacocoCoverageRunner deploy jar. </td> </tr> <tr> <td id="java_toolchain.java_runtime"> <code translate="no" dir="ltr">java_runtime</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; required</p> The java_runtime to use with this toolchain. It defaults to java_runtime in execution configuration. </td> </tr> <tr> <td id="java_toolchain.javabuilder"> <code translate="no" dir="ltr">javabuilder</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; required</p> Label of the JavaBuilder deploy jar. </td> </tr> <tr> <td id="java_toolchain.javabuilder_data"> <code translate="no" dir="ltr">javabuilder_data</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Labels of data available for label-expansion in javabuilder_jvm_opts. </td> </tr> <tr> <td id="java_toolchain.javabuilder_jvm_opts"> <code translate="no" dir="ltr">javabuilder_jvm_opts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> The list of arguments for the JVM when invoking JavaBuilder. </td> </tr> <tr> <td id="java_toolchain.javac_supports_multiplex_workers"> <code translate="no" dir="ltr">javac_supports_multiplex_workers</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">True</code></p> True if JavaBuilder supports running as a multiplex persistent worker, false if it doesn't. </td> </tr> <tr> <td id="java_toolchain.javac_supports_workers"> <code translate="no" dir="ltr">javac_supports_workers</code> </td> <td> <p>Boolean; default is <code translate="no" dir="ltr">True</code></p> True if JavaBuilder supports running as a persistent worker, false if it doesn't. </td> </tr> <tr> <td id="java_toolchain.javacopts"> <code translate="no" dir="ltr">javacopts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> The list of extra arguments for the Java compiler. Please refer to the Java compiler documentation for the extensive list of possible Java compiler flags. </td> </tr> <tr> <td id="java_toolchain.jvm_opts"> <code translate="no" dir="ltr">jvm_opts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> The list of arguments for the JVM when invoking the Java compiler. Please refer to the Java virtual machine documentation for the extensive list of possible flags for this option. </td> </tr> <tr> <td id="java_toolchain.oneversion"> <code translate="no" dir="ltr">oneversion</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> Label of the one-version enforcement binary. </td> </tr> <tr> <td id="java_toolchain.oneversion_allowlist_for_tests"> <code translate="no" dir="ltr">oneversion_allowlist_for_tests</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> Label of the one-version allowlist for tests. </td> </tr> <tr> <td id="java_toolchain.oneversion_whitelist"> <code translate="no" dir="ltr">oneversion_whitelist</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> Label of the one-version whitelist. </td> </tr> <tr> <td id="java_toolchain.package_configuration"> <code translate="no" dir="ltr">package_configuration</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Configuration that should be applied to the specified package groups. </td> </tr> <tr> <td id="java_toolchain.proguard_allowlister"> <code translate="no" dir="ltr">proguard_allowlister</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">"@bazel_tools//tools/jdk:proguard_whitelister"</code></p> Label of the Proguard allowlister. </td> </tr> <tr> <td id="java_toolchain.resourcejar"> <code translate="no" dir="ltr">resourcejar</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Label of the resource jar builder executable. </td> </tr> <tr> <td id="java_toolchain.singlejar"> <code translate="no" dir="ltr">singlejar</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; required</p> Label of the SingleJar deploy jar. </td> </tr> <tr> <td id="java_toolchain.source_version"> <code translate="no" dir="ltr">source_version</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> The Java source version (e.g., '6' or '7'). It specifies which set of code structures are allowed in the Java source code. </td> </tr> <tr> <td id="java_toolchain.target_version"> <code translate="no" dir="ltr">target_version</code> </td> <td> <p>String; default is <code translate="no" dir="ltr">""</code></p> The Java target version (e.g., '6' or '7'). It specifies for which Java runtime the class should be build. </td> </tr> <tr> <td id="java_toolchain.timezone_data"> <code translate="no" dir="ltr">timezone_data</code> </td> <td> <p><a href="https://bazel.build/versions/7.0.0/concepts/labels">Label</a>; default is <code translate="no" dir="ltr">None</code></p> Label of a resource jar containing timezone data. If set, the timezone data is added as an implicitly runtime dependency of all java_binary rules. </td> </tr> <tr> <td id="java_toolchain.tools"> <code translate="no" dir="ltr">tools</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Labels of tools available for label-expansion in jvm_opts. </td> </tr> <tr> <td id="java_toolchain.turbine_data"> <code translate="no" dir="ltr">turbine_data</code> </td> <td> <p>List of <a href="https://bazel.build/versions/7.0.0/concepts/labels">labels</a>; default is <code translate="no" dir="ltr">[]</code></p> Labels of data available for label-expansion in turbine_jvm_opts. </td> </tr> <tr> <td id="java_toolchain.turbine_jvm_opts"> <code translate="no" dir="ltr">turbine_jvm_opts</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> The list of arguments for the JVM when invoking turbine. </td> </tr> <tr> <td id="java_toolchain.xlint"> <code translate="no" dir="ltr">xlint</code> </td> <td> <p>List of strings; default is <code translate="no" dir="ltr">[]</code></p> The list of warning to add or removes from default list. Precedes it with a dash to removes it. Please see the Javac documentation on the -Xlint options for more information. </td> </tr> </tbody> </table>  </div>  </article> <devsite-content-footer class="nocontent"> <p>Except as otherwise noted, the content of this page is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see the <a href="https://developers.google.com/site-policies">Google Developers Site Policies</a>. Java is a registered trademark of Oracle and/or its affiliates.</p> <p>Last updated 2023-12-11 UTC.</p> </devsite-content-footer> <devsite-notification> </devsite-notification> <div class="devsite-content-data"> <template class="devsite-thumb-rating-down-categories"> [{ "type": "thumb-down", "id": "missingTheInformationINeed", "label":"Missing the information I need" },{ "type": "thumb-down", "id": "tooComplicatedTooManySteps", "label":"Too complicated / too many steps" },{ "type": "thumb-down", "id": "outOfDate", "label":"Out of date" },{ "type": "thumb-down", "id": "samplesCodeIssue", "label":"Samples / code issue" },{ "type": "thumb-down", "id": "otherDown", "label":"Other" }] </template> <template class="devsite-thumb-rating-up-categories"> [{ "type": "thumb-up", "id": "easyToUnderstand", "label":"Easy to understand" },{ "type": "thumb-up", "id": "solvedMyProblem", "label":"Solved my problem" },{ "type": "thumb-up", "id": "otherUp", "label":"Other" }] </template> </div>
<div class="_attribution">
  <p class="_attribution-p">
    Licensed under the Creative Commons Attribution 4.0 License, and code samples are licensed under the Apache 2.0 License.<br>
    <a href="https://bazel.build/versions/7.0.0/reference/be/java" class="_attribution-link">https://bazel.build/versions/7.0.0/reference/be/java</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
