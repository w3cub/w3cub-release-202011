
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>QInAppStore (Class) - Qt 5.15 - W3cubDocs</title>
  
  <meta name="description" content=" The main entry point for managing in-app purchases. More... ">
  <meta name="keywords" content="qinappstore, class, qt, qt~5.15">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/qt~5.15/qinappstore.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/qt~5.15.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/qt~5.15/" class="_nav-link" title="" style="margin-left:0;">Qt 5.15</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _qt">
				
				
<h1 class="title">QInAppStore Class</h1>  <p>The main entry point for managing in-app purchases. <a href="#details">More...</a></p>  <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> Header:</td>
<td class="memItemRight bottomAlign"> <span class="preprocessor">#include &lt;QInAppStore&gt;</span> </td>
</tr>
<tr>
<td class="memItemLeft rightAlign topAlign"> Inherits:</td>
<td class="memItemRight bottomAlign"> <a href="qobject">QObject</a>
</td>
</tr>
</table>
<ul> <li><a href="https://doc.qt.io/qt-5.15/qinappstore-members.html">List of all members, including inherited members</a></li> </ul>  <h2 id="public-functions">Public Functions
</h2> <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> </td>
<td class="memItemRight bottomAlign">
<b><a href="qinappstore#QInAppStore">QInAppStore</a></b>(QObject *<i>parent</i> = nullptr)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> virtual </td>
<td class="memItemRight bottomAlign">
<b><a href="qinappstore#dtor.QInAppStore">~QInAppStore</a></b>()</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qinappstore#registerProduct">registerProduct</a></b>(QInAppProduct::ProductType <i>productType</i>, const QString &amp;<i>identifier</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> QInAppProduct *</td>
<td class="memItemRight bottomAlign">
<b><a href="qinappstore#registeredProduct">registeredProduct</a></b>(const QString &amp;<i>identifier</i>) const</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qinappstore#restorePurchases">restorePurchases</a></b>()</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qinappstore#setPlatformProperty">setPlatformProperty</a></b>(const QString &amp;<i>propertyName</i>, const QString &amp;<i>value</i>)</td>
</tr> </table>  <h2 id="signals">Signals
</h2> <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qinappstore#productRegistered">productRegistered</a></b>(QInAppProduct *<i>product</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qinappstore#productUnknown">productUnknown</a></b>(QInAppProduct::ProductType <i>productType</i>, const QString &amp;<i>identifier</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qinappstore#transactionReady">transactionReady</a></b>(QInAppTransaction *<i>transaction</i>)</td>
</tr> </table>    <h2 id="details">Detailed Description
</h2> <p>QInAppStore is used for managing in-app purchases in your application in a cross-platform way.</p>  <h3 id="using-the-qinappstore">Using the QInAppStore
</h3> <p>In general there are two steps to completing an in-app purchase using the API:</p>  <h4 id="initialize-the-store">Initialize the store
</h4> <p>Upon start-up of your application, connect all signals in QInAppStore to related slots in your own <a href="qobject">QObject</a>. Then use the <a href="qinappstore#registerProduct">registerProduct</a>() function to register the ID of each product you expect to find registered in the external store, as well as its type.</p> <p>Registering a product is asynchronous, and will at some point yield one of the following two signals: 1. <a href="qinappstore#productRegistered">productRegistered</a>() if the product was found in the external store with a matching type. 2. <a href="qinappstore#productUnknown">productUnknown</a>() if the product was not found in the external store with the type you specified.</p> <p>In addition, a <a href="qinappstore#transactionReady">transactionReady</a>() signal may be emitted for any existing transaction which has not yet been finalized. At this point, you should check if the transaction has previously been registered. If it hasn't, register it right away. Finally, call <a href="qinapptransaction#finalize">QInAppTransaction::finalize</a>() on the transaction.</p>  <h4 id="complete-a-purchase">Complete a purchase
</h4> <p>Once the items have been successfully registered in the store, you can purchase them. Get the previously registered <a href="qinappproduct">QInAppProduct</a> using <a href="qinappstore#registeredProduct">registeredProduct</a>() and call <a href="qinappproduct#purchase">QInAppProduct::purchase</a>(). This call is also asynchronous.</p> <p>At some point later on, the <a href="qinappstore#transactionReady">transactionReady</a>() signal will be emitted for the purchase. Check <a href="qinapptransaction#status-prop">QInAppTransaction::status</a>() to see if the purchase was completed successfully. If it was, then you must save the information about the purchase in a safe way, so that the application can restore it later.</p> <p>When you are done, call <a href="qinapptransaction#finalize">QInAppTransaction::finalize</a>(), regardless of its status. Transactions which are not finalized will be emitted again the next time your application calls <a href="qinappstore#registerProduct">registerProduct</a>() for the same product.</p> <p><b>Note: </b>Please mind that QInAppStore does not save the purchased state of items in the store for you. The application should store this information in a safe way upon receiving the <a href="qinappstore#transactionReady">transactionReady</a>() signal, before calling <a href="qinapptransaction#finalize">QInAppTransaction::finalize</a>().</p>  <h3 id="types-of-purchases">Types of purchases
</h3> <p>There are two types of purchases supported by QInAppStore: <a href="qinappproduct#ProductType-enum">QInAppProduct::Consumable</a> and <a href="qinappproduct#ProductType-enum">QInAppProduct::Unlockable</a>. The former will be consumed when the transaction is completed and <a href="qinapptransaction#finalize">QInAppTransaction::finalize</a>() is called, meaning that it can be purchased again, any number of times. Unlockable items can only be purchased once.</p> <p>Consumable products are temporary and can be purchased multiple times. Examples could be a day-ticket on the bus or a magic sword in a computer game. Note that when purchasing the same product multiple times, you should call <a href="qinapptransaction#finalize">QInAppTransaction::finalize</a>() on each transaction before you can purchase the same product again.</p> <p>Unlockable products are products that a user will buy once, and the purchase of these items will be persistent. It can typically be used for things like unlocking content or functionality in the application.</p>  <h3 id="restoring-purchases">Restoring purchases
</h3> <p>If your application has unlockable products, and does not store the purchase states of these products in a way which makes it possible to restore them when the user reinstalls the application, you should provide a way for the user to restore the purchases manually.</p> <p>Call the <a href="qinappstore#restorePurchases">restorePurchases</a>() function to begin this process. Granted that the remote store supports it, you will then at some point get <a href="qinappstore#transactionReady">transactionReady</a>() for each unlockable item which has previously been purchased by the current user.</p> <p>Save the purchase state of each product and call <a href="qinapptransaction#finalize">QInAppTransaction::finalize</a>() as you would for a regular purchase.</p> <p>Since <a href="qinappstore#restorePurchases">restorePurchases</a>() may, on some platforms, cause the user to be prompted for their password, it should usually be called as a reaction to user input. For instance applications can have a button in the UI which will trigger <a href="qinappstore#restorePurchases">restorePurchases</a>() and which users can hit manually if they have reinstalled the application (or installed it on a new device) and need to unlock the features that they have previously paid for.</p> <p><b>Note: </b>This depends on support for this functionality in the remote store. If the remote store does not save the purchase state of unlockable products for you, the call will yield no <a href="qinappstore#transactionReady">transactionReady</a>() signals, as if no products have been purchased. Both the Android and OS X / iOS backends support restoring unlockable products.</p>    <h2>Member Function Documentation</h2>  <h3 class="fn" id="QInAppStore">
QInAppStore::<span class="name">QInAppStore</span>(<span class="type"><a href="qobject#QObject">QObject</a></span> *<i>parent</i> = nullptr)
</h3> <p>Constructs a QInAppStore with the given <i>parent</i>.</p>   <h3 class="fn" id="productRegistered">
<code>[signal] </code><span class="type">void</span> QInAppStore::<span class="name">productRegistered</span>(<span class="type"><a href="qinappproduct">QInAppProduct</a></span> *<i>product</i>)
</h3> <p>This signal is emitted when information about a <i>product</i> has been collected from the remote store. It is emitted as a reaction to a <a href="qinappstore#registerProduct">registerProduct</a>() call for the same product.</p> <p><b>See also </b><a href="qinappstore#productUnknown">productUnknown</a>().</p>   <h3 class="fn" id="productUnknown">
<code>[signal] </code><span class="type">void</span> QInAppStore::<span class="name">productUnknown</span>(<span class="type"><a href="qinappproduct#ProductType-enum">QInAppProduct::ProductType</a></span> <i>productType</i>, const <span class="type"><a href="qstring">QString</a></span> &amp;<i>identifier</i>)
</h3> <p>This signal is emitted when the product named <i>identifier</i> was registered using <a href="qinappstore#registerProduct">registerProduct</a>() and matching information could not be provided by the remote store. The <i>productType</i> matches the product type which was originally passed to <a href="qinappstore#registerProduct">registerProduct</a>().</p> <p><b>See also </b><a href="qinappstore#productRegistered">productRegistered</a>().</p>   <h3 class="fn" id="transactionReady">
<code>[signal] </code><span class="type">void</span> QInAppStore::<span class="name">transactionReady</span>(<span class="type"><a href="qinapptransaction">QInAppTransaction</a></span> *<i>transaction</i>)
</h3> <p>This signal is emitted whenever there is a <i>transaction</i> which needs to be finalized. It is emitted either when a purchase request has been made for a product, when <a href="qinappstore#restorePurchases">restorePurchases</a>() has been called and the product was previously purchased, or when <a href="qinappstore#registerProduct">registerProduct</a>() was called for a product and there was a pending transaction for the product which had not yet been finalized.</p>   <h3 class="fn" id="dtor.QInAppStore">
<code>[virtual] </code>QInAppStore::<span class="name">~QInAppStore</span>()
</h3> <p>Destroys the <a href="qinappstore">QInAppStore</a>.</p>   <h3 class="fn" id="registerProduct">
<span class="type">void</span> QInAppStore::<span class="name">registerProduct</span>(<span class="type"><a href="qinappproduct#ProductType-enum">QInAppProduct::ProductType</a></span> <i>productType</i>, const <span class="type"><a href="qstring">QString</a></span> &amp;<i>identifier</i>)
</h3> <p>Registers a product identified by <i>identifier</i> and with the given <i>productType</i>. The <i>identifier</i> must match the identifier of the product in the remote store. If the remote store differentiates between consumable and unlockable products, the <i>productType</i> must also match this.</p> <p>Calling this function will asynchronously yield either a <a href="qinappstore#productRegistered">productRegistered</a>() or a <a href="qinappstore#productUnknown">productUnknown</a>() signal. It may also yield a <a href="qinappstore#transactionReady">transactionReady</a>() signal if there is a pending transaction for the product which has not yet been finalized.</p> <p><b>Note: </b>This function can be invoked via the meta-object system and from QML. See <a href="qobject#Q_INVOKABLE">Q_INVOKABLE</a>.</p>   <h3 class="fn" id="registeredProduct">
<span class="type"><a href="qinappproduct">QInAppProduct</a></span> *QInAppStore::<span class="name">registeredProduct</span>(const <span class="type"><a href="qstring">QString</a></span> &amp;<i>identifier</i>) const
</h3> <p>Returns the previously registered product uniquely known by the <i>identifier</i>.</p> <p><b>Note: </b>This function can be invoked via the meta-object system and from QML. See <a href="qobject#Q_INVOKABLE">Q_INVOKABLE</a>.</p>   <h3 class="fn" id="restorePurchases">
<span class="type">void</span> QInAppStore::<span class="name">restorePurchases</span>()
</h3> <p>Requests existing purchases of unlockable items and will yield a <a href="qinappstore#transactionReady">transactionReady</a>() signal for each unlockable product that the remote store confirms have previously been purchased by the current user.</p> <p>This function can typically be used for restoring unlockable products when the application has been reinstalled and lost the saved purchase states.</p> <p><b>Note: </b>Calling this function may prompt the user for their password on some platforms.</p> <p><b>Note: </b>This function can be invoked via the meta-object system and from QML. See <a href="qobject#Q_INVOKABLE">Q_INVOKABLE</a>.</p>   <h3 class="fn" id="setPlatformProperty">
<span class="type">void</span> QInAppStore::<span class="name">setPlatformProperty</span>(const <span class="type"><a href="qstring">QString</a></span> &amp;<i>propertyName</i>, const <span class="type"><a href="qstring">QString</a></span> &amp;<i>value</i>)
</h3> <p>Sets the platform specific property given by <i>propertyName</i> to <i>value</i>. This can be used to pass information to the platform implementation. The properties will be silently ignored on other platforms.</p> <p>Currently, the only supported platform property is "AndroidPublicKey" which is used by the Android backend to verify purchases. If it is not set, purchases will be accepted with no verification. (You can also do the verification manually by getting the signature from the <a href="qinapptransaction">QInAppTransaction</a> object for the purchase.) For more information, see <a href="http://developer.android.com/google/play/billing/billing_integrate.html#billing-security">the Android documentation for billing security</a>.</p> <p><b>Note: </b>This function can be invoked via the meta-object system and from QML. See <a href="qobject#Q_INVOKABLE">Q_INVOKABLE</a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    Â© The Qt Company Ltd<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://doc.qt.io/qt-5.15/qinappstore.html" class="_attribution-link">https://doc.qt.io/qt-5.15/qinappstore.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
