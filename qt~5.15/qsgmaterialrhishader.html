
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>QSGMaterialRhiShader (Class) - Qt 5.15 - W3cubDocs</title>
  
  <meta name="description" content=" The QSGMaterialRhiShader class represents a graphics API independent shader program. More... ">
  <meta name="keywords" content="qsgmaterialrhishader, class, qt, qt~5.15">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/qt~5.15/qsgmaterialrhishader.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/qt~5.15.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/qt~5.15/" class="_nav-link" title="" style="margin-left:0;">Qt 5.15</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _qt">
				
				
<h1 class="title">QSGMaterialRhiShader Class</h1>  <p>The QSGMaterialRhiShader class represents a graphics API independent shader program. <a href="#details">More...</a></p>  <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> Header:</td>
<td class="memItemRight bottomAlign"> <span class="preprocessor">#include &lt;QSGMaterialRhiShader&gt;</span> </td>
</tr>
<tr>
<td class="memItemLeft rightAlign topAlign"> qmake:</td>
<td class="memItemRight bottomAlign"> QT += quick</td>
</tr>
<tr>
<td class="memItemLeft rightAlign topAlign"> Since:</td>
<td class="memItemRight bottomAlign"> Qt 5.14</td>
</tr>
<tr>
<td class="memItemLeft rightAlign topAlign"> Inherits:</td>
<td class="memItemRight bottomAlign"> <a href="qsgmaterialshader">QSGMaterialShader</a>
</td>
</tr>
</table>
<p>This class was introduced in Qt 5.14.</p> <ul> <li><a href="https://doc.qt.io/qt-5.15/qsgmaterialrhishader-members.html">List of all members, including inherited members</a></li> </ul>  <h2 id="public-types">Public Types
</h2> <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> struct </td>
<td class="memItemRight bottomAlign"><b><a href="qsgmaterialrhishader-graphicspipelinestate">GraphicsPipelineState</a></b></td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> class </td>
<td class="memItemRight bottomAlign"><b><a href="qsgmaterialrhishader-renderstate">RenderState</a></b></td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> enum </td>
<td class="memItemRight bottomAlign">
<b><a href="qsgmaterialrhishader#Flag-enum">Flag</a></b> { UpdatesGraphicsPipelineState }</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> flags </td>
<td class="memItemRight bottomAlign"><b><a href="qsgmaterialrhishader#Flag-enum">Flags</a></b></td>
</tr> </table>  <h2 id="public-functions">Public Functions
</h2> <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> </td>
<td class="memItemRight bottomAlign">
<b><a href="qsgmaterialrhishader#QSGMaterialRhiShader">QSGMaterialRhiShader</a></b>()</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> QSGMaterialRhiShader::Flags </td>
<td class="memItemRight bottomAlign">
<b><a href="qsgmaterialrhishader#flags">flags</a></b>() const</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qsgmaterialrhishader#setFlag">setFlag</a></b>(QSGMaterialRhiShader::Flags <i>flags</i>, bool <i>on</i> = true)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> virtual bool </td>
<td class="memItemRight bottomAlign">
<b><a href="qsgmaterialrhishader#updateGraphicsPipelineState">updateGraphicsPipelineState</a></b>(QSGMaterialRhiShader::RenderState &amp;<i>state</i>, QSGMaterialRhiShader::GraphicsPipelineState *<i>ps</i>, QSGMaterial *<i>newMaterial</i>, QSGMaterial *<i>oldMaterial</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> virtual void </td>
<td class="memItemRight bottomAlign">
<b><a href="qsgmaterialrhishader#updateSampledImage">updateSampledImage</a></b>(QSGMaterialRhiShader::RenderState &amp;<i>state</i>, int <i>binding</i>, QSGTexture **<i>texture</i>, QSGMaterial *<i>newMaterial</i>, QSGMaterial *<i>oldMaterial</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> virtual bool </td>
<td class="memItemRight bottomAlign">
<b><a href="qsgmaterialrhishader#updateUniformData">updateUniformData</a></b>(QSGMaterialRhiShader::RenderState &amp;<i>state</i>, QSGMaterial *<i>newMaterial</i>, QSGMaterial *<i>oldMaterial</i>)</td>
</tr> </table>  <h2 id="protected-functions">Protected Functions
</h2> <table class="alignedsummary"> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qsgmaterialrhishader#setShader">setShader</a></b>(QSGMaterialRhiShader::Stage <i>stage</i>, const QShader &amp;<i>shader</i>)</td>
</tr> <tr>
<td class="memItemLeft rightAlign topAlign"> void </td>
<td class="memItemRight bottomAlign">
<b><a href="qsgmaterialrhishader#setShaderFileName">setShaderFileName</a></b>(QSGMaterialRhiShader::Stage <i>stage</i>, const QString &amp;<i>filename</i>)</td>
</tr> </table>    <h2 id="details">Detailed Description
</h2> <p>QSGMaterialRhiShader is a modern, cross-platform alternative to <a href="qsgmaterialshader">QSGMaterialShader</a>. The latter is tied to OpenGL and GLSL by design, whereas QSGMaterialRhiShader is based on QShader, a container for multiple versions of a graphics shader together with reflection information.</p> <p><b>Note: </b>All classes with QSG prefix should be used solely on the scene graph's rendering thread. See <a href="qtquick-visualcanvas-scenegraph#scene-graph-and-rendering">Scene Graph and Rendering</a> for more information.</p>    <h2>Member Type Documentation</h2>  <h3 class="flags" id="Flag-enum">
enum QSGMaterialRhiShader::<span class="name">Flag</span>flags QSGMaterialRhiShader::<span class="name">Flags</span>
</h3> <p>Flag values to indicate special material properties.</p> <table class="valuelist">
<tr class="odd" valign="top">
<th class="tblConst">Constant</th>
<th class="tblval">Value</th>
<th class="tbldscr">Description</th>
</tr> <tr>
<td class="topAlign"><code>QSGMaterialRhiShader::UpdatesGraphicsPipelineState</code></td>
<td class="topAlign tblval"><code>0x0001</code></td>
<td class="topAlign">Setting this flag enables calling <a href="qsgmaterialrhishader#updateGraphicsPipelineState">updateGraphicsPipelineState</a>().</td>
</tr> </table> <p>The Flags type is a typedef for <a href="qflags">QFlags</a>&lt;Flag&gt;. It stores an OR combination of Flag values.</p>    <h2>Member Function Documentation</h2>  <h3 class="fn" id="QSGMaterialRhiShader">
QSGMaterialRhiShader::<span class="name">QSGMaterialRhiShader</span>()
</h3> <p>Constructs a new QSGMaterialRhiShader.</p>   <h3 class="fn" id="flags">
<span class="type"><a href="qsgmaterialrhishader#Flag-enum">QSGMaterialRhiShader::Flags</a></span> QSGMaterialRhiShader::<span class="name">flags</span>() const
</h3> <p>Returns the currently set flags for this material shader.</p>   <h3 class="fn" id="setFlag">
<span class="type">void</span> QSGMaterialRhiShader::<span class="name">setFlag</span>(<span class="type"><a href="qsgmaterialrhishader#Flag-enum">QSGMaterialRhiShader::Flags</a></span> <i>flags</i>, <span class="type">bool</span> <i>on</i> = true)
</h3> <p>Sets the <i>flags</i> on this material shader if <i>on</i> is true; otherwise clears the specified flags.</p>   <h3 class="fn" id="setShader">
<code>[protected] </code><span class="type">void</span> QSGMaterialRhiShader::<span class="name">setShader</span>(<span class="type">QSGMaterialRhiShader::Stage</span> <i>stage</i>, const <span class="type"><a href="qshader">QShader</a></span> &amp;<i>shader</i>)
</h3> <p>Sets the <i>shader</i> for the specified <i>stage</i>.</p>   <h3 class="fn" id="setShaderFileName">
<code>[protected] </code><span class="type">void</span> QSGMaterialRhiShader::<span class="name">setShaderFileName</span>(<span class="type">QSGMaterialRhiShader::Stage</span> <i>stage</i>, const <span class="type"><a href="qstring">QString</a></span> &amp;<i>filename</i>)
</h3> <p>Sets the <i>filename</i> for the shader for the specified <i>stage</i>.</p> <p>The file is expected to contain a serialized QRhiShader.</p>   <h3 class="fn" id="updateGraphicsPipelineState">
<code>[virtual] </code><span class="type">bool</span> QSGMaterialRhiShader::<span class="name">updateGraphicsPipelineState</span>(<span class="type"><a href="qsgmaterialrhishader-renderstate">QSGMaterialRhiShader::RenderState</a></span> &amp;<i>state</i>, <span class="type"><a href="qsgmaterialrhishader-graphicspipelinestate">QSGMaterialRhiShader::GraphicsPipelineState</a></span> *<i>ps</i>, <span class="type"><a href="qsgmaterial">QSGMaterial</a></span> *<i>newMaterial</i>, <span class="type"><a href="qsgmaterial">QSGMaterial</a></span> *<i>oldMaterial</i>)
</h3> <p>This function is called by the scene graph to enable the material to provide a custom set of graphics state. The set of states that are customizable by material is limited to blending and related settings.</p> <p><b>Note: </b>This function is only called when the <a href="qsgmaterialrhishader#Flag-enum">UpdatesGraphicsPipelineState</a> flag was enabled via setFlags(). By default it is not set, and so this function is never called.</p> <p>The return value must be <code>true</code> whenever a change was made to any of the members in <i>ps</i>.</p> <p><b>Note: </b>The contents of <i>ps</i> is not persistent between invocations of this function.</p> <p>The current rendering <i>state</i> is passed from the scene graph.</p> <p>The subclass specific state can be extracted from <i>newMaterial</i>. When <i>oldMaterial</i> is null, this shader was just activated.</p>   <h3 class="fn" id="updateSampledImage">
<code>[virtual] </code><span class="type">void</span> QSGMaterialRhiShader::<span class="name">updateSampledImage</span>(<span class="type"><a href="qsgmaterialrhishader-renderstate">QSGMaterialRhiShader::RenderState</a></span> &amp;<i>state</i>, <span class="type">int</span> <i>binding</i>, <span class="type"><a href="qsgtexture">QSGTexture</a></span> **<i>texture</i>, <span class="type"><a href="qsgmaterial">QSGMaterial</a></span> *<i>newMaterial</i>, <span class="type"><a href="qsgmaterial">QSGMaterial</a></span> *<i>oldMaterial</i>)
</h3> <p>This function is called by the scene graph to prepare using a sampled image in the shader, typically in form of a combined image sampler.</p> <p><i>binding</i> is the binding number of the sampler. The function is called for each variable in the material's shaders' <a href="qshaderdescription#combinedImageSamplers">QShaderDescription::combinedImageSamplers</a>().</p> <p>When *<i>texture</i> is null, it must be set to a <a href="qsgtexture">QSGTexture</a> pointer before returning. When non-null, it is up to the material to decide if a new <code>QSGTexture *</code> is stored to it, or if it updates some parameters on the already known <a href="qsgtexture">QSGTexture</a>. The ownership of the <a href="qsgtexture">QSGTexture</a> is not transferred.</p> <p>The current rendering <i>state</i> is passed from the scene graph. It is up to the material to enqueue the texture data uploads to the QRhiResourceUpdateBatch retriveable via <a href="qsgmaterialrhishader-renderstate#resourceUpdateBatch">RenderState::resourceUpdateBatch</a>().</p> <p>The subclass specific state can be extracted from <i>newMaterial</i>.</p> <p><i>oldMaterial</i> can be used to minimize changes. When <i>oldMaterial</i> is null, this shader was just activated.</p>   <h3 class="fn" id="updateUniformData">
<code>[virtual] </code><span class="type">bool</span> QSGMaterialRhiShader::<span class="name">updateUniformData</span>(<span class="type"><a href="qsgmaterialrhishader-renderstate">QSGMaterialRhiShader::RenderState</a></span> &amp;<i>state</i>, <span class="type"><a href="qsgmaterial">QSGMaterial</a></span> *<i>newMaterial</i>, <span class="type"><a href="qsgmaterial">QSGMaterial</a></span> *<i>oldMaterial</i>)
</h3> <p>This function is called by the scene graph to get the contents of the shader program's uniform buffer updated. The implementation is not expected to perform any real graphics operations, it is merely responsible for copying data to the <a href="qbytearray">QByteArray</a> returned from <a href="qsgmaterialrhishader-renderstate#uniformData">RenderState::uniformData</a>(). The scene graph takes care of making that buffer visible in the shaders.</p> <p>The current rendering <i>state</i> is passed from the scene graph. If the state indicates that any relevant state is dirty, the implementation must update the appropriate region in the buffer data that is accessible via <a href="qsgmaterialrhishader-renderstate#uniformData">RenderState::uniformData</a>(). When a state, such as, matrix or opacity, is not dirty, there is no need to touch the corresponding region since the data is persistent.</p> <p>The return value must be <code>true</code> whenever any change was made to the uniform data.</p> <p>The subclass specific state, such as the color of a flat color material, should be extracted from <i>newMaterial</i> to update the relevant regions in the buffer accordingly.</p> <p><i>oldMaterial</i> can be used to minimize buffer changes (which are typically memcpy calls) when updating material states. When <i>oldMaterial</i> is null, this shader was just activated.</p>
<div class="_attribution">
  <p class="_attribution-p">
    Â© The Qt Company Ltd<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://doc.qt.io/qt-5.15/qsgmaterialrhishader.html" class="_attribution-link">https://doc.qt.io/qt-5.15/qsgmaterialrhishader.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
