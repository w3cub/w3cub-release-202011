
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>community.general.ali_instance – Create, Start, Stop, Restart or Terminate an Instance in ECS. Add or Remove Instance To&#47;from a Security Group. - Ansible 2.11 - W3cubDocs</title>
  
  <meta name="description" content=" Note ">
  <meta name="keywords" content="community, general, ali, instance, –, create, start, stop, restart, or, terminate, ecs, add, remove, from, security, group, ansible, ansible~2.11">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.11/collections/community/general/ali_instance_module.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9352e6910fe51dd10a2c4166dc5a7847892ebc84c0bb52d7e40dcdccbf262592790483d09e6dbfd62c689609a706227727ca9acb967a718e944c111f43ca96a0.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/ansible~2.11.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.11/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.11</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="community-general-ali-instance-create-start-stop-restart-or-terminate-an-instance-in-ecs-add-or-remove-instance-to-from-a-security-group">community.general.ali_instance – Create, Start, Stop, Restart or Terminate an Instance in ECS. Add or Remove Instance to/from a Security Group.</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/general">community.general collection</a> (version 2.0.1).</p> <p>To install it use: <code>ansible-galaxy collection install community.general</code>.</p> <p>To use it in a playbook, specify: <code>community.general.ali_instance</code>.</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Create, start, stop, restart, modify or terminate ecs instances.</li> <li>Add or remove ecs instances to/from security group.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>footmark &gt;= 1.19.0</li> <li>python &gt;= 3.6</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>alicloud_access_key</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Alibaba Cloud access key. If not set then the value of environment variable <code>ALICLOUD_ACCESS_KEY</code>, <code>ALICLOUD_ACCESS_KEY_ID</code> will be used instead.</div> <div>
<br>aliases: access_key_id, access_key</div> </td> </tr> <tr> <td colspan="1">  <b>alicloud_assume_role</b>  <div> <span>dictionary</span> </div> </td> <td> </td> <td> <div>If provided with a role ARN, Ansible will attempt to assume this role using the supplied credentials.</div> <div>The nested assume_role block supports <em>alicloud_assume_role_arn</em>, <em>alicloud_assume_role_session_name</em>, <em>alicloud_assume_role_session_expiration</em> and <em>alicloud_assume_role_policy</em>
</div> <div>
<br>aliases: assume_role</div> </td> </tr> <tr> <td colspan="1">  <b>alicloud_assume_role_arn</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The Alibaba Cloud role_arn. The ARN of the role to assume. If ARN is set to an empty string, it does not perform role switching. It supports environment variable ALICLOUD_ASSUME_ROLE_ARN. ansible will execute with provided credentials.</div> <div>
<br>aliases: assume_role_arn</div> </td> </tr> <tr> <td colspan="1">  <b>alicloud_assume_role_session_expiration</b>  <div> <span>integer</span> </div> </td> <td> </td> <td> <div>The Alibaba Cloud session_expiration. The time after which the established session for assuming role expires. Valid value range 900-3600 seconds. Default to 3600 (in this case Alicloud use own default value). It supports environment variable ALICLOUD_ASSUME_ROLE_SESSION_EXPIRATION</div> <div>
<br>aliases: assume_role_session_expiration</div> </td> </tr> <tr> <td colspan="1">  <b>alicloud_assume_role_session_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The Alibaba Cloud session_name. The session name to use when assuming the role. If omitted, 'ansible' is passed to the AssumeRole call as session name. It supports environment variable ALICLOUD_ASSUME_ROLE_SESSION_NAME</div> <div>
<br>aliases: assume_role_session_name</div> </td> </tr> <tr> <td colspan="1">  <b>alicloud_region</b>  <div> <span>string</span> / <span>required</span> </div> </td> <td> </td> <td> <div>The Alibaba Cloud region to use. If not specified then the value of environment variable <code>ALICLOUD_REGION</code>, <code>ALICLOUD_REGION_ID</code> will be used instead.</div> <div>
<br>aliases: region, region_id</div> </td> </tr> <tr> <td colspan="1">  <b>alicloud_secret_key</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Alibaba Cloud secret key. If not set then the value of environment variable <code>ALICLOUD_SECRET_KEY</code>, <code>ALICLOUD_SECRET_ACCESS_KEY</code> will be used instead.</div> <div>
<br>aliases: secret_access_key, secret_key</div> </td> </tr> <tr> <td colspan="1">  <b>alicloud_security_token</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The Alibaba Cloud security token. If not specified then the value of environment variable <code>ALICLOUD_SECURITY_TOKEN</code> will be used instead.</div> <div>
<br>aliases: security_token</div> </td> </tr> <tr> <td colspan="1">  <b>allocate_public_ip</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Whether allocate a public ip for the new instance.</div> <div>
<br>aliases: assign_public_ip</div> </td> </tr> <tr> <td colspan="1">  <b>auto_renew</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Whether automate renew the charge of the instance.</div> </td> </tr> <tr> <td colspan="1">  <b>auto_renew_period</b>  <div> <span>integer</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>1</li> <li>2</li> <li>3</li> <li>6</li> <li>12</li> </ul> </td> <td> <div>The duration of the automatic renew the charge of the instance. Required when <code>auto_renew=True</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>availability_zone</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Aliyun availability zone ID in which to launch the instance. If it is not specified, it will be allocated by system automatically.</div> <div>
<br>aliases: alicloud_zone, zone_id</div> </td> </tr> <tr> <td colspan="1">  <b>count</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>1</div> </td> <td> <div>The number of the new instance. An integer value which indicates how many instances that match <em>count_tag</em> should be running. Instances are either created or terminated based on this value.</div> </td> </tr> <tr> <td colspan="1">  <b>count_tag</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>
<em>count</em> determines how many instances based on a specific tag criteria should be present. This can be expressed in multiple ways and is shown in the EXAMPLES section. The specified count_tag must already exist or be passed in as the <em>tags</em> option. If it is not specified, it will be replaced by <em>instance_name</em>.</div> </td> </tr> <tr> <td colspan="1">  <b>description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The description of ECS instance, which is a string of 2 to 256 characters. It cannot begin with http:// or https://.</div> </td> </tr> <tr> <td colspan="1">  <b>dry_run</b>  <div> <span>boolean</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Specifies whether to send a dry-run request.</div> <div>If <em>dry_run=True</em>, Only a dry-run request is sent and no instance is created. The system checks whether the required parameters are set, and validates the request format, service permissions, and available ECS instances. If the validation fails, the corresponding error code is returned. If the validation succeeds, the DryRunOperation error code is returned.</div> <div>If <em>dry_run=False</em>, A request is sent. If the validation succeeds, the instance is created.</div> </td> </tr> <tr> <td colspan="1">  <b>ecs_role_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The RAM Role Name attached on a ECS instance for API operations. You can retrieve this from the 'Access Control' section of the Alibaba Cloud console.</div> <div>If you're running Ansible from an ECS instance with RAM Instance using RAM Role, Ansible will just access the metadata <a href="#">http://100.100.100.200/latest/meta-data/ram/security-credentials/&lt;ecs_role_name&gt;</a> to obtain the STS credential. This is a preferred approach over any other when running in ECS as you can avoid hard coding credentials. Instead these are leased on-the-fly by Ansible which reduces the chance of leakage.</div> <div>
<br>aliases: role_name</div> </td> </tr> <tr> <td colspan="1">  <b>force</b>  <div> <span>boolean</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Whether the current operation needs to be execute forcibly.</div> </td> </tr> <tr> <td colspan="1">  <b>host_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Instance host name. Ordered hostname is not supported.</div> </td> </tr> <tr> <td colspan="1">  <b>image_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Image ID used to launch instances. Required when <code>state=present</code> and creating new ECS instances.</div> <div>
<br>aliases: image</div> </td> </tr> <tr> <td colspan="1">  <b>include_data_disks</b>  <div> <span>boolean</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li>no</li> <li><div>
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Whether to change instance disks charge type when changing instance charge type.</div> </td> </tr> <tr> <td colspan="1">  <b>instance_charge_type</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li>PrePaid</li> <li><div>
<b>PostPaid</b> ←</div></li> </ul> </td> <td> <div>The charge type of the instance.</div> </td> </tr> <tr> <td colspan="1">  <b>instance_ids</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>A list of instance ids. It is required when need to operate existing instances. If it is specified, <em>count</em> will lose efficacy.</div> </td> </tr> <tr> <td colspan="1">  <b>instance_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The name of ECS instance, which is a string of 2 to 128 Chinese or English characters. It must begin with an uppercase/lowercase letter or a Chinese character and can contain numerals, ".", "_" or "-". It cannot begin with http:// or https://.</div> <div>
<br>aliases: name</div> </td> </tr> <tr> <td colspan="1">  <b>instance_type</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Instance type used to launch instances. Required when <code>state=present</code> and creating new ECS instances.</div> <div>
<br>aliases: type</div> </td> </tr> <tr> <td colspan="1">  <b>internet_charge_type</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>PayByBandwidth</b> ←</div></li> <li>PayByTraffic</li> </ul> </td> <td> <div>Internet charge type of ECS instance.</div> </td> </tr> <tr> <td colspan="1">  <b>key_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The name of key pair which is used to access ECS instance in SSH.</div> <div>
<br>aliases: keypair</div> </td> </tr> <tr> <td colspan="1">  <b>max_bandwidth_in</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>200</div> </td> <td> <div>Maximum incoming bandwidth from the public network, measured in Mbps (Megabits per second).</div> </td> </tr> <tr> <td colspan="1">  <b>max_bandwidth_out</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>0</div> </td> <td> <div>Maximum outgoing bandwidth to the public network, measured in Mbps (Megabits per second). Required when <code>allocate_public_ip=True</code>. Ignored when <code>allocate_public_ip=False</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>password</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The password to login instance. After rebooting instances, modified password will take effect.</div> </td> </tr> <tr> <td colspan="1">  <b>period</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>1</div> </td> <td> <div>The charge duration of the instance, in month. Required when <code>instance_charge_type=PrePaid</code>.</div> <div>The valid value are [1-9, 12, 24, 36].</div> </td> </tr> <tr> <td colspan="1">  <b>period_unit</b>  <div> <span>string</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>Month</b> ←</div></li> <li>Week</li> </ul> </td> <td> <div>The duration unit that you will buy the resource. It is valid when <code>instance_charge_type=PrePaid</code>
</div> </td> </tr> <tr> <td colspan="1">  <b>profile</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is the Alicloud profile name as set in the shared credentials file. It can also be sourced from the ALICLOUD_PROFILE environment variable.</div> </td> </tr> <tr> <td colspan="1">  <b>purge_tags</b>  <div> <span>boolean</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Delete any tags not specified in the task that are on the instance. If True, it means you have to specify all the desired tags on each task affecting an instance.</div> </td> </tr> <tr> <td colspan="1">  <b>ram_role_name</b>  <div> <span>string</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> </td> <td> <div>The name of the instance RAM role.</div> </td> </tr> <tr> <td colspan="1">  <b>security_groups</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td> </td> <td> <div>A list of security group IDs.</div> <div>
<br>aliases: group_ids</div> </td> </tr> <tr> <td colspan="1">  <b>shared_credentials_file</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>This is the path to the shared credentials file. It can also be sourced from the ALICLOUD_SHARED_CREDENTIALS_FILE environment variable.</div> <div>If this is not set and a profile is specified, ~/.aliyun/config.json will be used.</div> </td> </tr> <tr> <td colspan="1">  <b>spot_price_limit</b>  <div> <span>float</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> </td> <td> <div>The maximum hourly price for the preemptible instance. This parameter supports a maximum of three decimal places and takes effect when the SpotStrategy parameter is set to SpotWithPriceLimit.</div> </td> </tr> <tr> <td colspan="1">  <b>spot_strategy</b>  <div> <span>string</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>NoSpot</b> ←</div></li> <li>SpotWithPriceLimit</li> <li>SpotAsPriceGo</li> </ul> </td> <td> <div>The bidding mode of the pay-as-you-go instance. This parameter is valid when InstanceChargeType is set to PostPaid.</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>present</b> ←</div></li> <li>running</li> <li>stopped</li> <li>restarted</li> <li>absent</li> </ul> </td> <td> <div>The state of the instance after operating.</div> </td> </tr> <tr> <td colspan="1">  <b>system_disk_category</b>  <div> <span>string</span> </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>cloud_efficiency</b> ←</div></li> <li>cloud_ssd</li> </ul> </td> <td> <div>Category of the system disk.</div> </td> </tr> <tr> <td colspan="1">  <b>system_disk_description</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Description of the system disk.</div> </td> </tr> <tr> <td colspan="1">  <b>system_disk_name</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>Name of the system disk.</div> </td> </tr> <tr> <td colspan="1">  <b>system_disk_size</b>  <div> <span>integer</span> </div> </td> <td> <b>Default:</b><br><div>40</div> </td> <td> <div>Size of the system disk, in GB. The valid values are 40~500.</div> </td> </tr> <tr> <td colspan="1">  <b>tags</b>  <div> <span>dictionary</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> </td> <td> <div>A hash/dictionaries of instance tags, to add to the new instance or for starting/stopping instance by tag. <code>{"key":"value"}</code>
</div> <div>
<br>aliases: instance_tags</div> </td> </tr> <tr> <td colspan="1">  <b>unique_suffix</b>  <div> <span>boolean</span> </div> <div> added in 0.2.0 of community.general </div> </td> <td> <ul>
<b>Choices:</b> <li><div>
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Specifies whether to add sequential suffixes to the host_name. The sequential suffix ranges from 001 to 999.</div> </td> </tr> <tr> <td colspan="1">  <b>user_data</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>User-defined data to customize the startup behaviors of an ECS instance and to pass data into an ECS instance. It only will take effect when launching the new ECS instances.</div> </td> </tr> <tr> <td colspan="1">  <b>vswitch_id</b>  <div> <span>string</span> </div> </td> <td> </td> <td> <div>The subnet ID in which to launch the instances (VPC).</div> <div>
<br>aliases: subnet_id</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>If parameters are not set within the module, the following environment variables can be used in decreasing order of precedence <code>ALICLOUD_ACCESS_KEY</code> or <code>ALICLOUD_ACCESS_KEY_ID</code>, <code>ALICLOUD_SECRET_KEY</code> or <code>ALICLOUD_SECRET_ACCESS_KEY</code>, <code>ALICLOUD_REGION</code> or <code>ALICLOUD_REGION_ID</code>, <code>ALICLOUD_SECURITY_TOKEN</code>, <code>ALICLOUD_ECS_ROLE_NAME</code>, <code>ALICLOUD_SHARED_CREDENTIALS_FILE</code>, <code>ALICLOUD_PROFILE</code>, <code>ALICLOUD_ASSUME_ROLE_ARN</code>, <code>ALICLOUD_ASSUME_ROLE_SESSION_NAME</code>, <code>ALICLOUD_ASSUME_ROLE_SESSION_EXPIRATION</code>,</li> <li>
<code>ALICLOUD_REGION</code> or <code>ALICLOUD_REGION_ID</code> can be typically be used to specify the ALICLOUD region, when required, but this can also be configured in the footmark config file</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml+jinja"># basic provisioning example vpc network
- name: Basic provisioning example
  hosts: localhost
  vars:
    alicloud_access_key: &lt;your-alicloud-access-key-id&gt;
    alicloud_secret_key: &lt;your-alicloud-access-secret-key&gt;
    alicloud_region: cn-beijing
    image: ubuntu1404_64_40G_cloudinit_20160727.raw
    instance_type: ecs.n4.small
    vswitch_id: vsw-abcd1234
    assign_public_ip: True
    max_bandwidth_out: 10
    host_name: myhost
    password: mypassword
    system_disk_category: cloud_efficiency
    system_disk_size: 100
    internet_charge_type: PayByBandwidth
    security_groups: ["sg-f2rwnfh23r"]

    instance_ids: ["i-abcd12346", "i-abcd12345"]
    force: True

  tasks:
    - name: Launch ECS instance in VPC network
      community.general.ali_instance:
        alicloud_access_key: '{{ alicloud_access_key }}'
        alicloud_secret_key: '{{ alicloud_secret_key }}'
        alicloud_region: '{{ alicloud_region }}'
        image: '{{ image }}'
        system_disk_category: '{{ system_disk_category }}'
        system_disk_size: '{{ system_disk_size }}'
        instance_type: '{{ instance_type }}'
        vswitch_id: '{{ vswitch_id }}'
        assign_public_ip: '{{ assign_public_ip }}'
        internet_charge_type: '{{ internet_charge_type }}'
        max_bandwidth_out: '{{ max_bandwidth_out }}'
        tags:
            Name: created_one
        host_name: '{{ host_name }}'
        password: '{{ password }}'

    - name: With count and count_tag to create a number of instances
      community.general.ali_instance:
        alicloud_access_key: '{{ alicloud_access_key }}'
        alicloud_secret_key: '{{ alicloud_secret_key }}'
        alicloud_region: '{{ alicloud_region }}'
        image: '{{ image }}'
        system_disk_category: '{{ system_disk_category }}'
        system_disk_size: '{{ system_disk_size }}'
        instance_type: '{{ instance_type }}'
        assign_public_ip: '{{ assign_public_ip }}'
        security_groups: '{{ security_groups }}'
        internet_charge_type: '{{ internet_charge_type }}'
        max_bandwidth_out: '{{ max_bandwidth_out }}'
        tags:
            Name: created_one
            Version: 0.1
        count: 2
        count_tag:
            Name: created_one
        host_name: '{{ host_name }}'
        password: '{{ password }}'

    - name: Start instance
      community.general.ali_instance:
        alicloud_access_key: '{{ alicloud_access_key }}'
        alicloud_secret_key: '{{ alicloud_secret_key }}'
        alicloud_region: '{{ alicloud_region }}'
        instance_ids: '{{ instance_ids }}'
        state: 'running'

    - name: Reboot instance forcibly
      ecs:
        alicloud_access_key: '{{ alicloud_access_key }}'
        alicloud_secret_key: '{{ alicloud_secret_key }}'
        alicloud_region: '{{ alicloud_region }}'
        instance_ids: '{{ instance_ids }}'
        state: 'restarted'
        force: '{{ force }}'

    - name: Add instances to an security group
      ecs:
        alicloud_access_key: '{{ alicloud_access_key }}'
        alicloud_secret_key: '{{ alicloud_secret_key }}'
        alicloud_region: '{{ alicloud_region }}'
        instance_ids: '{{ instance_ids }}'
        security_groups: '{{ security_groups }}'
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="3">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="3">  <b>ids</b>  <div> <span>list</span> / <span>elements=string</span> </div> </td> <td>always</td> <td> <div>List of ECS instance IDs</div> <br> <div><b>Sample:</b></div> <div>['i-12345er', 'i-3245fs']</div> </td> </tr> <tr> <td colspan="3">  <b>instances</b>  <div> <span>complex</span> </div> </td> <td>always</td> <td> <div>List of ECS instances</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>availability_zone</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The availability zone of the instance is in.</div> <br> <div><b>Sample:</b></div> <div>cn-beijing-a</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>block_device_mappings</b>  <div> <span>complex</span> </div> </td> <td>always</td> <td> <div>Any block device mapping entries for the instance.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>attach_time</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The time stamp when the attachment initiated.</div> <br> <div><b>Sample:</b></div> <div>2018-06-25T04:08:26Z</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>delete_on_termination</b>  <div> <span>boolean</span> </div> </td> <td>always</td> <td> <div>Indicates whether the volume is deleted on instance termination.</div> <br> <div><b>Sample:</b></div> <div>True</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>device_name</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The device name exposed to the instance (for example, /dev/xvda).</div> <br> <div><b>Sample:</b></div> <div>/dev/xvda</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>status</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The attachment state.</div> <br> <div><b>Sample:</b></div> <div>in_use</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>volume_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The ID of the cloud disk.</div> <br> <div><b>Sample:</b></div> <div>d-2zei53pjsi117y6gf9t6</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>cpu</b>  <div> <span>integer</span> </div> </td> <td>always</td> <td> <div>The CPU core count of the instance.</div> <br> <div><b>Sample:</b></div> <div>4</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>creation_time</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The time the instance was created.</div> <br> <div><b>Sample:</b></div> <div>2018-06-25T04:08Z</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>description</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The instance description.</div> <br> <div><b>Sample:</b></div> <div>my ansible instance</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>eip</b>  <div> <span>complex</span> </div> </td> <td>always</td> <td> <div>The attribution of EIP associated with the instance.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>allocation_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The ID of the EIP.</div> <br> <div><b>Sample:</b></div> <div>eip-12345</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>internet_charge_type</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The internet charge type of the EIP.</div> <br> <div><b>Sample:</b></div> <div>paybybandwidth</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>ip_address</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>EIP address.</div> <br> <div><b>Sample:</b></div> <div>42.10.2.2</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>expired_time</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The time the instance will expire.</div> <br> <div><b>Sample:</b></div> <div>2099-12-31T15:59Z</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>gpu</b>  <div> <span>complex</span> </div> </td> <td>always</td> <td> <div>The attribution of instance GPU.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>amount</b>  <div> <span>integer</span> </div> </td> <td>always</td> <td> <div>The count of the GPU.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>spec</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The specification of the GPU.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>host_name</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The host name of the instance.</div> <br> <div><b>Sample:</b></div> <div>iZ2zewaoZ</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>Alias of instance_id.</div> <br> <div><b>Sample:</b></div> <div>i-abc12345</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>image_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The ID of the image used to launch the instance.</div> <br> <div><b>Sample:</b></div> <div>m-0011223344</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>inner_ip_address</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The inner IPv4 address of the classic instance.</div> <br> <div><b>Sample:</b></div> <div>10.0.0.2</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>instance_charge_type</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The instance charge type.</div> <br> <div><b>Sample:</b></div> <div>PostPaid</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>instance_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>ECS instance resource ID.</div> <br> <div><b>Sample:</b></div> <div>i-abc12345</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>instance_name</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The name of the instance.</div> <br> <div><b>Sample:</b></div> <div>my-ecs</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>instance_type</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The instance type of the running instance.</div> <br> <div><b>Sample:</b></div> <div>ecs.sn1ne.xlarge</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>instance_type_family</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The instance type family of the instance belongs.</div> <br> <div><b>Sample:</b></div> <div>ecs.sn1ne</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>internet_charge_type</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The billing method of the network bandwidth.</div> <br> <div><b>Sample:</b></div> <div>PayByBandwidth</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>internet_max_bandwidth_in</b>  <div> <span>integer</span> </div> </td> <td>always</td> <td> <div>Maximum incoming bandwidth from the internet network.</div> <br> <div><b>Sample:</b></div> <div>200</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>internet_max_bandwidth_out</b>  <div> <span>integer</span> </div> </td> <td>always</td> <td> <div>Maximum incoming bandwidth from the internet network.</div> <br> <div><b>Sample:</b></div> <div>20</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>io_optimized</b>  <div> <span>boolean</span> </div> </td> <td>always</td> <td> <div>Indicates whether the instance is optimized for EBS I/O.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>memory</b>  <div> <span>integer</span> </div> </td> <td>always</td> <td> <div>Memory size of the instance.</div> <br> <div><b>Sample:</b></div> <div>8192</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>network_interfaces</b>  <div> <span>complex</span> </div> </td> <td>always</td> <td> <div>One or more network interfaces for the instance.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>mac_address</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The MAC address.</div> <br> <div><b>Sample:</b></div> <div>00:11:22:33:44:55</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>network_interface_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The ID of the network interface.</div> <br> <div><b>Sample:</b></div> <div>eni-01234567</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>primary_ip_address</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The primary IPv4 address of the network interface within the vswitch.</div> <br> <div><b>Sample:</b></div> <div>10.0.0.1</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>osname</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The operation system name of the instance owned.</div> <br> <div><b>Sample:</b></div> <div>CentOS</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>ostype</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The operation system type of the instance owned.</div> <br> <div><b>Sample:</b></div> <div>linux</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>private_ip_address</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The IPv4 address of the network interface within the subnet.</div> <br> <div><b>Sample:</b></div> <div>10.0.0.1</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>public_ip_address</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The public IPv4 address assigned to the instance or eip address</div> <br> <div><b>Sample:</b></div> <div>43.0.0.1</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>resource_group_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The id of the resource group to which the instance belongs.</div> <br> <div><b>Sample:</b></div> <div>my-ecs-group</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>security_groups</b>  <div> <span>list</span> / <span>elements=dictionary</span> </div> </td> <td>always</td> <td> <div>One or more security groups for the instance.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>group_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The ID of the security group.</div> <br> <div><b>Sample:</b></div> <div>sg-0123456</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td class="elbow-placeholder"> </td> <td colspan="1">  <b>group_name</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The name of the security group.</div> <br> <div><b>Sample:</b></div> <div>my-security-group</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>spot_price_limit</b>  <div> <span>float</span> </div> </td> <td>always</td> <td> <div>The maximum hourly price for the preemptible instance.</div> <br> <div><b>Sample:</b></div> <div>0.97</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>spot_strategy</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The bidding mode of the pay-as-you-go instance.</div> <br> <div><b>Sample:</b></div> <div>NoSpot</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>status</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The current status of the instance.</div> <br> <div><b>Sample:</b></div> <div>running</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>tags</b>  <div> <span>dictionary</span> </div> </td> <td>always</td> <td> <div>Any tags assigned to the instance.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>user_data</b>  <div> <span>dictionary</span> </div> </td> <td>always</td> <td> <div>User-defined data.</div> <br> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>vpc_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The ID of the VPC the instance is in.</div> <br> <div><b>Sample:</b></div> <div>vpc-0011223344</div> </td> </tr> <tr> <td class="elbow-placeholder"> </td> <td colspan="2">  <b>vswitch_id</b>  <div> <span>string</span> </div> </td> <td>always</td> <td> <div>The ID of the vswitch in which the instance is running.</div> <br> <div><b>Sample:</b></div> <div>vsw-dew00abcdef</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>He Guimin (@xiaozhu36)</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2021 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.11/collections/community/general/ali_instance_module.html" class="_attribution-link">https://docs.ansible.com/ansible/2.11/collections/community/general/ali_instance_module.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
