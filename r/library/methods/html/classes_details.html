
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Class Definitions - R - W3cubDocs</title>
  
  <meta name="description" content="Class definitions are objects that contain the formal definition of a class of R objects, usually referred to as an S4 class, to distinguish them &hellip;">
  <meta name="keywords" content="class, definitions, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/methods/html/classes_details.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>Classes_Details</code> Class Definitions</h2> <h3>Description</h3> <p>Class definitions are objects that contain the formal definition of a class of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> objects, usually referred to as an S4 class, to distinguish them from the informal S3 classes. This document gives an overview of S4 classes; for details of the class representation objects, see help for the class <code><a href="classrepresentation-class">classRepresentation</a></code>. </p> <h3>Metadata Information</h3> <p>When a class is defined, an object is stored that contains the information about that class. The object, known as the <em>metadata</em> defining the class, is not stored under the name of the class (to allow programmers to write generating functions of that name), but under a specially constructed name. To examine the class definition, call <code><a href="getclass">getClass</a></code>. The information in the metadata object includes: </p> <dl> <dt>Slots:</dt>
<dd> <p>The data contained in an object from an S4 class is defined by the <em>slots</em> in the class definition. </p> <p>Each slot in an object is a component of the object; like components (that is, elements) of a list, these may be extracted and set, using the function <code><a href="slot">slot</a>()</code> or more often the operator <code>"<a href="../../base/html/slotop">@</a>"</code>. However, they differ from list components in important ways. First, slots can only be referred to by name, not by position, and there is no partial matching of names as with list elements. </p> <p>All the objects from a particular class have the same set of slot names; specifically, the slot names that are contained in the class definition. Each slot in each object always is an object of the class specified for this slot in the definition of the current class. The word “is” corresponds to the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> function of the same name (<code><a href="is">is</a></code>), meaning that the class of the object in the slot must be the same as the class specified in the definition, or some class that extends the one in the definition (a <em>subclass</em>). </p> <p>A special slot name, <code>.Data</code>, stands for the ‘data part’ of the object. An object from a class with a data part is defined by specifying that the class contains one of the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> object types or one of the special pseudo-classes, <code>matrix</code> or <code>array</code>, usually because the definition of the class, or of one of its superclasses, has included the type or pseudo-class in its <code>contains</code> argument. A second special slot name, <code>.xData</code>, is used to enable inheritance from abnormal types such as <code>"environment"</code> See the section on inheriting from non-S4 classes for details on the representation and for the behavior of S3 methods with objects from these classes. </p> <p>Some slot names correspond to attributes used in old-style S3 objects and in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> objects without an explicit class, for example, the <code>names</code> attribute. If you define a class for which that attribute will be set, such as a subclass of named vectors, you should include <code>"names"</code> as a slot. See the definition of class <code>"namedList"</code> for an example. Using the <code>names()</code> assignment to set such names will generate a warning if there is no names slot and an error if the object in question is not a vector type. A slot called <code>"names"</code> can be used anywhere, but only if it is assigned as a slot, not via the default <code>names()</code> assignment. </p> </dd> <dt>Superclasses:</dt>
<dd> <p>The definition of a class includes the <em>superclasses</em> —the classes that this class extends. A class <code>Fancy</code>, say, extends a class <code>Simple</code> if an object from the <code>Fancy</code> class has all the capabilities of the <code>Simple</code> class (and probably some more as well). In particular, and very usefully, any method defined to work for a <code>Simple</code> object can be applied to a <code>Fancy</code> object as well. </p> <p>This relationship is expressed equivalently by saying that <code>Simple</code> is a superclass of <code>Fancy</code>, or that <code>Fancy</code> is a subclass of <code>Simple</code>. </p> <p>The direct superclasses of a class are those superclasses explicitly defined. Direct superclasses can be defined in three ways. Most commonly, the superclasses are listed in the <code>contains=</code> argument in the call to <code><a href="setclass">setClass</a></code> that creates the subclass. In this case the subclass will contain all the slots of the superclass, and the relation between the class is called <em>simple</em>, as it in fact is. Superclasses can also be defined explicitly by a call to <code><a href="setis">setIs</a></code>; in this case, the relation requires methods to be specified to go from subclass to superclass. Thirdly, a class union is a superclass of all the members of the union. In this case too the relation is simple, but notice that the relation is defined when the superclass is created, not when the subclass is created as with the <code>contains=</code> mechanism. </p> <p>The definition of a superclass will also potentially contain its own direct superclasses. These are considered (and shown) as superclasses at distance 2 from the original class; their direct superclasses are at distance 3, and so on. All these are legitimate superclasses for purposes such as method selection. </p> <p>When superclasses are defined by including the names of superclasses in the <code>contains=</code> argument to <code><a href="setclass">setClass</a></code>, an object from the class will have all the slots defined for its own class <em>and</em> all the slots defined for all its superclasses as well. </p> <p>The information about the relation between a class and a particular superclass is encoded as an object of class <code><a href="sclassextension-class">SClassExtension</a></code>. A list of such objects for the superclasses (and sometimes for the subclasses) is included in the metadata object defining the class. If you need to compute with these objects (for example, to compare the distances), call the function <code><a href="is">extends</a></code> with argument <code>fullInfo=TRUE</code>. </p> </dd> <dt>Prototype:</dt>
<dd> <p>The objects from a class created by a call to <code><a href="new">new</a></code> are defined by the <em>prototype</em> object for the class and by additional arguments in the call to <code><a href="new">new</a></code>, which are passed to a method for that class for the function <code><a href="new">initialize</a></code>. </p> <p>Each class representation object contains a prototype object for the class (although for a virtual class the prototype may be <code>NULL</code>). The prototype object must have values for all the slots of the class. By default, these are the prototypes of the corresponding slot classes. However, the definition of the class can specify any valid object for any of the slots. </p> </dd> </dl> <h3>Basic classes</h3> <p>There are a number of ‘basic’ classes, corresponding to the ordinary kinds of data occurring in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>. For example, <code>"numeric"</code> is a class corresponding to numeric vectors. The other vector basic classes are <code>"logical"</code>, <code>"integer"</code>, <code>"complex"</code>, <code>"character"</code>, <code>"raw"</code>, <code>"list"</code> and <code>"expression"</code>. The prototypes for the vector classes are vectors of length 0 of the corresponding type. Notice that basic classes are unusual in that the prototype object is from the class itself. </p> <p>In addition to the vector classes there are also basic classes corresponding to objects in the language, such as <code>"function"</code> and <code>"call"</code>. These classes are subclasses of the virtual class <code>"language"</code>. Finally, there are object types and corresponding basic classes for “abnormal” objects, such as <code>"environment"</code> and <code>"externalptr"</code>. These objects do not follow the functional behavior of the language; in particular, they are not copied and so cannot have attributes or slots defined locally. </p> <p>All these classes can be used as slots or as superclasses for any other class definitions, although they do not themselves come with an explicit class. For the abnormal object types, a special mechanism is used to enable inheritance as described below. </p> <h3>Inheriting from non-S4 Classes</h3> <p>A class definition can extend classes other than regular S4 classes, usually by specifying them in the <code>contains=</code> argument to <code><a href="setclass">setClass</a></code>. Three groups of such classes behave distinctly: </p> <ol> <li> <p>S3 classes, which must have been registered by a previous call to <code><a href="setoldclass">setOldClass</a></code> (you can check that this has been done by calling <code><a href="getclass">getClass</a></code>, which should return a class that extends <a href="setoldclass">oldClass</a>); </p> </li> <li> <p>One of the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> object types, typically a vector type, which then defines the type of the S4 objects, but also a type such as <code><a href="../../base/html/environment">environment</a></code> that can not be used directly as a type for an S4 object. See below. </p> </li> <li> <p>One of the pseudo-classes <code><a href="structureclasses">matrix</a></code> and <code><a href="structureclasses">array</a></code>, implying objects with arbitrary vector types plus the <code>dim</code> and <code>dimnames</code> attributes. </p> </li>
</ol> <p>This section describes the approach to combining S4 computations with older S3 computations by using such classes as superclasses. The design goal is to allow the S4 class to inherit S3 methods and default computations in as consistent a form as possible. </p> <p>As part of a general effort to make the S4 and S3 code in R more consistent, when objects from an S4 class are used as the first argument to a non-default S3 method, either for an S3 generic function (one that calls <code><a href="../../base/html/usemethod">UseMethod</a></code>) or for one of the primitive functions that dispatches S3 methods, an effort is made to provide a valid object for that method. In particular, if the S4 class extends an S3 class or <code>matrix</code> or <code>array</code>, and there is an S3 method matching one of these classes, the S4 object will be coerced to a valid S3 object, to the extent that is possible given that there is no formal definition of an S3 class. </p> <p>For example, suppose <code>"myFrame"</code> is an S4 class that includes the S3 class <code>"data.frame"</code> in the <code>contains=</code> argument to <code><a href="setclass">setClass</a></code>. If an object from this S4 class is passed to a function, say <code><a href="../../base/html/matrix">as.matrix</a></code>, that has an S3 method for <code>"data.frame"</code>, the internal code for <code><a href="../../base/html/usemethod">UseMethod</a></code> will convert the object to a data frame; in particular, to an S3 object whose class attribute will be the vector corresponding to the S3 class (possibly containing multiple class names). Similarly for an S4 object inheriting from <code>"matrix"</code> or <code>"array"</code>, the S4 object will be converted to a valid S3 matrix or array. </p> <p>Note that the conversion is <em>not</em> applied when an S4 object is passed to the default S3 method. Some S3 generics attempt to deal with general objects, including S4 objects. Also, no transformation is applied to S4 objects that do not correspond to a selected S3 method; in particular, to objects from a class that does not contain either an S3 class or one of the basic types. See <code><a href="../../base/html/iss4">asS4</a></code> for the transformation details. </p> <p>In addition to explicit S3 generic functions, S3 methods are defined for a variety of operators and functions implemented as primitives. These methods are dispatched by some internal C code that operates partly through the same code as real S3 generic functions and partly via special considerations (for example, both arguments to a binary operator are examined when looking for methods). The same mechanism for adapting S4 objects to S3 methods has been applied to these computations as well, with a few exceptions such as generating an error if an S4 object that does not extend an appropriate S3 class or type is passed to a binary operator. </p> <p>The remainder of this section discusses the mechanisms for inheriting from basic object types. See <code><a href="structureclasses">matrix</a></code> or <code><a href="structureclasses">array</a></code> for inhering from the matrix and array pseudo-classes, or from time-series. For the corresponding details for inheritance from S3 classes, see <code><a href="setoldclass">setOldClass</a></code>. </p> <p>An object from a class that directly and simply contains one of the basic object types in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, has implicitly a corresponding <code>.Data</code> slot of that type, allowing computations to extract or replace the data part while leaving other slots unchanged. If the type is one that can accept attributes and is duplicated normally, the inheritance also determines the type of the object; if the class definition has a <code>.Data</code> slot corresponding to a normal type, the class of the slot determines the type of the object (that is, the value of <code><a href="../../base/html/typeof">typeof</a>(x)</code>). For such classes, <code>.Data</code> is a pseudo-slot; that is, extracting or setting it modifies the non-slot data in the object. The functions <code><a href="rclassutils">getDataPart</a></code> and <code><a href="rclassutils">setDataPart</a></code> are a cleaner, but essentially equivalent way to deal with the data part. </p> <p>Extending a basic type this way allows objects to use old-style code for the corresponding type as well as S4 methods. Any basic type can be used for <code>.Data</code>, but a few types are treated differently because they do not behave like ordinary objects; for example, <code>"NULL"</code>, environments, and external pointers. Classes extend these types by having a slot, <code>.xData</code>, itself inherited from an internally defined S4 class. This slot actually contains an object of the inherited type, to protect computations from the reference semantics of the type. Coercing to the nonstandard object type then requires an actual computation, rather than the <code>"simple"</code> inclusion for other types and classes. The intent is that programmers will not need to take account of the mechanism, but one implication is that you should <em>not</em> explicitly use the type of an S4 object to detect inheritance from an arbitrary object type. Use <code><a href="is">is</a></code> and similar functions instead. </p> <h3>References</h3> <p>Chambers, John M. (2016) <em>Extending R</em>, Chapman &amp; Hall. (Chapters 9 and 10.) </p> <h3>See Also</h3> <p><code><a href="methods_details">Methods_Details</a></code> for analogous discussion of methods, <code><a href="setclass">setClass</a></code> for details of specifying class definitions, <code><a href="is">is</a></code>, <code><a href="as">as</a></code>, <code><a href="new">new</a></code>, <code><a href="slot">slot</a></code> </p>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
