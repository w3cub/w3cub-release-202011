
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>all.equal - R - W3cubDocs</title>
  
  <meta name="description" content="all.equal(x, y) is a utility to compare R objects x and y testing ‘near equality’. If they are different, comparison is still made to some extent, &hellip;">
  <meta name="keywords" content="all, equal, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/base/html/all.equal.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>all.equal</code> Test if Two Objects are (Nearly) Equal</h2> <h3>Description</h3> <p><code>all.equal(x, y)</code> is a utility to compare <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> objects <code>x</code> and <code>y</code> testing ‘near equality’. If they are different, comparison is still made to some extent, and a report of the differences is returned. Do not use <code>all.equal</code> directly in <code>if</code> expressions—either use <code>isTRUE(all.equal(....))</code> or <code><a href="identical">identical</a></code> if appropriate. </p> <h3>Usage</h3> <pre data-language="r">
all.equal(target, current, ...)

## S3 method for class 'numeric'
all.equal(target, current,
          tolerance = sqrt(.Machine$double.eps), scale = NULL,
          countEQ = FALSE,
          formatFUN = function(err, what) format(err),
          ..., check.attributes = TRUE)

## S3 method for class 'list'
all.equal(target, current, ...,
          check.attributes = TRUE, use.names = TRUE)

## S3 method for class 'environment'
all.equal(target, current, all.names = TRUE,
          evaluate = TRUE, ...)

## S3 method for class 'function'
all.equal(target, current, check.environment=TRUE, ...)

## S3 method for class 'POSIXt'
all.equal(target, current, ..., tolerance = 1e-3, scale,
          check.tzone = TRUE)


attr.all.equal(target, current, ...,
               check.attributes = TRUE, check.names = TRUE)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>target</code></td> <td> <p><span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> object.</p> </td>
</tr> <tr valign="top">
<td><code>current</code></td> <td> <p>other <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> object, to be compared with <code>target</code>.</p> </td>
</tr> <tr valign="top">
<td><code>...</code></td> <td> <p>further arguments for different methods, notably the following two, for numerical comparison:</p> </td>
</tr> <tr valign="top">
<td><code>tolerance</code></td> <td> <p>numeric <i>≥</i> 0. Differences smaller than <code>tolerance</code> are not reported. The default value is close to <code>1.5e-8</code>.</p> </td>
</tr> <tr valign="top">
<td><code>scale</code></td> <td> <p><code>NULL</code> or numeric &gt; 0, typically of length 1 or <code>length(target)</code>. See ‘Details’.</p> </td>
</tr> <tr valign="top">
<td><code>countEQ</code></td> <td> <p>logical indicating if the <code>target == current</code> cases should be counted when computing the mean (absolute or relative) differences. The default, <code>FALSE</code> may seem misleading in cases where <code>target</code> and <code>current</code> only differ in a few places; see the extensive example.</p> </td>
</tr> <tr valign="top">
<td><code>formatFUN</code></td> <td> <p>a <code><a href="function">function</a></code> of two arguments, <code>err</code>, the relative, absolute or scaled error, and <code>what</code>, a character string indicating the <em>kind</em> of error; may be used, e.g., to format relative and absolute errors differently.</p> </td>
</tr> <tr valign="top">
<td><code>check.attributes</code></td> <td> <p>logical indicating if the <code><a href="attributes">attributes</a></code> of <code>target</code> and <code>current</code> (other than the names) should be compared.</p> </td>
</tr> <tr valign="top">
<td><code>use.names</code></td> <td> <p>logical indicating if <code><a href="list">list</a></code> comparison should report differing components by name (if matching) instead of integer index. Note that this comes after <code>...</code> and so must be specified by its full name.</p> </td>
</tr> <tr valign="top">
<td><code>all.names</code></td> <td> <p>logical passed to <code><a href="ls">ls</a></code> indicating if “hidden” objects should also be considered in the environments.</p> </td>
</tr> <tr valign="top">
<td><code>evaluate</code></td> <td> <p>for the <code>environment</code> method: <code><a href="logical">logical</a></code> indicating if “promises should be forced”, i.e., typically formal function arguments be evaluated for comparison. If false, only the <code><a href="names">names</a></code> of the objects in the two environments are checked for equality.</p> </td>
</tr> <tr valign="top">
<td><code>check.environment</code></td> <td> <p>logical requiring that the <code><a href="environment">environment</a>()</code>s of functions should be compared, too. You may need to set <code>check.environment=FALSE</code> in unexpected cases, such as when comparing two <code><a href="../../stats/html/nls">nls</a>()</code> fits.</p> </td>
</tr> <tr valign="top">
<td><code>check.tzone</code></td> <td> <p>logical indicating if the <code>"tzone"</code> attributes of <code>target</code> and <code>current</code> should be compared.</p> </td>
</tr> <tr valign="top">
<td><code>check.names</code></td> <td> <p>logical indicating if the <code><a href="names">names</a>(.)</code> of <code>target</code> and <code>current</code> should be compared.</p> </td>
</tr> </table> <h3>Details</h3> <p><code>all.equal</code> is a generic function, dispatching methods on the <code>target</code> argument. To see the available methods, use <code><a href="../../utils/html/methods">methods</a>("all.equal")</code>, but note that the default method also does some dispatching, e.g. using the raw method for logical targets. </p> <p>Remember that arguments which follow <code>...</code> must be specified by (unabbreviated) name. It is inadvisable to pass unnamed arguments in <code>...</code> as these will match different arguments in different methods. </p> <p>Numerical comparisons for <code>scale = NULL</code> (the default) are typically on <em>relative difference</em> scale unless the target values are close to zero: First, the mean absolute difference of the two numerical vectors is computed. If this is smaller than <code>tolerance</code> or not finite, absolute differences are used, otherwise relative differences scaled by the mean absolute <code>target</code> value. Note that these comparisons are computed only for those vector elements where <code>target</code> is not <code><a href="na">NA</a></code> and differs from <code>current</code>. If <code>countEQ</code> is true, the equal and <code>NA</code> cases are <em>counted</em> in determining “sample” size. </p> <p>If <code>scale</code> is numeric (and positive), absolute comparisons are made after scaling (dividing) by <code>scale</code>. </p> <p>For complex <code>target</code>, the modulus (<code><a href="complex">Mod</a></code>) of the difference is used: <code>all.equal.numeric</code> is called so arguments <code>tolerance</code> and <code>scale</code> are available. </p> <p>The <code><a href="list">list</a></code> method compares components of <code>target</code> and <code>current</code> recursively, passing all other arguments, as long as both are “list-like”, i.e., fulfill either <code><a href="vector">is.vector</a></code> or <code><a href="list">is.list</a></code>. </p> <p>The <code><a href="environment">environment</a></code> method works via the <code>list</code> method, and is also used for reference classes (unless a specific <code>all.equal</code> method is defined). </p> <p>The method for date-time objects uses <code>all.equal.numeric</code> to compare times (in <code>"<a href="datetimeclasses">POSIXct</a>"</code> representation) with a default <code>tolerance</code> of 0.001 seconds, ignoring <code>scale</code>. A time zone mismatch between <code>target</code> and <code>current</code> is reported unless <code>check.tzone = FALSE</code>. </p> <p><code>attr.all.equal</code> is used for comparing <code><a href="attributes">attributes</a></code>, returning <code>NULL</code> or a <code>character</code> vector. </p> <h3>Value</h3> <p>Either <code>TRUE</code> (<code>NULL</code> for <code>attr.all.equal</code>) or a vector of <code><a href="mode">mode</a></code> <code>"character"</code> describing the differences between <code>target</code> and <code>current</code>. </p> <h3>References</h3> <p>Chambers, J. M. (1998) <em>Programming with Data. A Guide to the S Language</em>. Springer (for <code>=</code>). </p> <h3>See Also</h3> <p><code><a href="identical">identical</a></code>, <code><a href="logic">isTRUE</a></code>, <code><a href="comparison">==</a></code>, and <code><a href="all">all</a></code> for exact equality testing. </p> <h3>Examples</h3> <pre data-language="r">
all.equal(pi, 355/113)
# not precise enough (default tol) &gt; relative error

d45 &lt;- pi*(1/4 + 1:10)
stopifnot(
all.equal(tan(d45), rep(1, 10)))          # TRUE, but
all      (tan(d45) == rep(1, 10))         # FALSE, since not exactly
all.equal(tan(d45), rep(1, 10), tolerance = 0)  # to see difference

## advanced: equality of environments
ae &lt;- all.equal(as.environment("package:stats"),
                asNamespace("stats"))
stopifnot(is.character(ae), length(ae) &gt; 10,
          ## were incorrectly "considered equal" in R &lt;= 3.1.1
          all.equal(asNamespace("stats"), asNamespace("stats")))

## A situation where  'countEQ = TRUE' makes sense:
x1 &lt;- x2 &lt;- (1:100)/10;  x2[2] &lt;- 1.1*x1[2]
## 99 out of 100 pairs (x1[i], x2[i]) are equal:
plot(x1,x2, main = "all.equal.numeric() -- not counting equal parts")
all.equal(x1,x2) ## "Mean relative difference: 0.1"
mtext(paste("all.equal(x1,x2) :", all.equal(x1,x2)), line= -2)
##' extract the 'Mean relative difference' as number:
all.eqNum &lt;- function(...) as.numeric(sub(".*:", '', all.equal(...)))
set.seed(17)
## When x2 is jittered, typically all pairs (x1[i],x2[i]) do differ:
summary(r &lt;- replicate(100, all.eqNum(x1, x2*(1+rnorm(x1)*1e-7))))
mtext(paste("mean(all.equal(x1, x2*(1 + eps_k))) {100 x} Mean rel.diff.=",
            signif(mean(r), 3)), line = -4, adj=0)
## With argument  countEQ=TRUE, get "the same" (w/o need for jittering):
mtext(paste("all.equal(x1,x2, countEQ=TRUE) :",
          signif(all.eqNum(x1,x2, countEQ=TRUE), 3)), line= -6, col=2)

## comparison of date-time objects
now &lt;- Sys.time()
stopifnot(
all.equal(now, now + 1e-4)  # TRUE (default tolerance = 0.001 seconds)
)
all.equal(now, now + 0.2)
all.equal(now, as.POSIXlt(now, "UTC"))
stopifnot(
all.equal(now, as.POSIXlt(now, "UTC"), check.tzone = FALSE)  # TRUE
)
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
