
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Count the Number of Characters (or Bytes or Width) - R - W3cubDocs</title>
  
  <meta name="description" content="nchar takes a character vector as an argument and returns a vector whose elements contain the sizes of the corresponding elements of x. Internally, &hellip;">
  <meta name="keywords" content="count, number, characters, or, bytes, width, r">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/r/library/base/html/nchar.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/r.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/r/" class="_nav-link" title="" style="margin-left:0;">R</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h2>
<code>nchar</code> Count the Number of Characters (or Bytes or Width)</h2> <h3>Description</h3> <p><code>nchar</code> takes a character vector as an argument and returns a vector whose elements contain the sizes of the corresponding elements of <code>x</code>. Internally, it is a generic, for which methods can be defined (see <a href="internalmethods">InternalMethods</a>). </p> <p><code>nzchar</code> is a fast way to find out if elements of a character vector are non-empty strings. </p> <h3>Usage</h3> <pre data-language="r">
nchar(x, type = "chars", allowNA = FALSE, keepNA = NA)

nzchar(x, keepNA = FALSE)
</pre> <h3>Arguments</h3> <table summary="R argblock"> <tr valign="top">
<td><code>x</code></td> <td> <p>character vector, or a vector to be coerced to a character vector. Giving a factor is an error.</p> </td>
</tr> <tr valign="top">
<td><code>type</code></td> <td> <p>character string: partial matching to one of <code>c("bytes", "chars", "width")</code>. See ‘Details’.</p> </td>
</tr> <tr valign="top">
<td><code>allowNA</code></td> <td> <p>logical: should <code>NA</code> be returned for invalid multibyte strings or <code>"bytes"</code>-encoded strings (rather than throwing an error)?</p> </td>
</tr> <tr valign="top">
<td><code>keepNA</code></td> <td> <p>logical: should <code>NA</code> be returned when <code>x</code> is <code><a href="na">NA</a></code>? If false, <code>nchar()</code> returns <code>2</code>, as that is the number of printing characters used when strings are written to output, and <code>nzchar()</code> is <code>TRUE</code>. The default for <code>nchar()</code>, <code>NA</code>, means to use <code>keepNA = TRUE</code> unless <code>type</code> is <code>"width"</code>.</p> </td>
</tr> </table> <h3>Details</h3> <p>The ‘size’ of a character string can be measured in one of three ways (corresponding to the <code>type</code> argument): </p> <dl> <dt><code>bytes</code></dt>
<dd>
<p>The number of bytes needed to store the string (plus in C a final terminator which is not counted).</p> </dd> <dt><code>chars</code></dt>
<dd>
<p>The number of characters.</p> </dd> <dt><code>width</code></dt>
<dd>
<p>The number of columns <code><a href="cat">cat</a></code> will use to print the string in a monospaced font. The same as <code>chars</code> if this cannot be calculated.</p> </dd> </dl> <p>These will often be the same, and almost always will be in single-byte locales (but note how <code>type</code> determines the default for <code>keepNA</code>). There will be differences between the first two with multibyte character sequences, e.g. in UTF-8 locales. </p> <p>The internal equivalent of the default method of <code><a href="character">as.character</a></code> is performed on <code>x</code> (so there is no method dispatch). If you want to operate on non-vector objects passing them through <code><a href="deparse">deparse</a></code> first will be required. </p> <h3>Value</h3> <p>For <code>nchar</code>, an integer vector giving the sizes of each element. For missing values (i.e., <code>NA</code>, i.e., <code><a href="na">NA_character_</a></code>), <code>nchar()</code> returns <code><a href="na">NA_integer_</a></code> if <code>keepNA</code> is true, and <code>2</code>, the number of printing characters, if false. </p> <p><code>type = "width"</code> gives (an approximation to) the number of columns used in printing each element in a terminal font, taking into account double-width, zero-width and ‘composing’ characters. The approximation is likely to be poor when there are unassigned or non-printing characters. </p> <p>If <code>allowNA = TRUE</code> and an element is detected as invalid in a multi-byte character set such as UTF-8, its number of characters and the width will be <code>NA</code>. Otherwise the number of characters will be non-negative, so <code>!is.na(nchar(x, "chars", TRUE))</code> is a test of validity. </p> <p>A character string marked with <code>"bytes"</code> encoding (see <code><a href="encoding">Encoding</a></code>) has a number of bytes, but neither a known number of characters nor a width, so the latter two types are <code>NA</code> if <code>allowNA = TRUE</code>, otherwise an error. </p> <p>Names, dims and dimnames are copied from the input. </p> <p>For <code>nzchar</code>, a logical vector of the same length as <code>x</code>, true if and only if the element has non-zero length; if the element is <code>NA</code>, <code>nzchar()</code> is true when <code>keepNA</code> is false (the default) and <code>NA</code> otherwise. </p> <h3>Note</h3> <p>This does <strong>not</strong> by default give the number of characters that will be used to <code>print()</code> the string. Use <code><a href="encodestring">encodeString</a></code> to find that. Where character strings have been marked as UTF-8, the number of characters and widths will be computed in UTF-8, even though printing may use escapes such as <span class="samp">&lt;U+2642&gt;</span> in a non-UTF-8 locale. </p> <p>The concept of ‘width’ is a slippery one even in a monospaced font. Some human languages have the concept of <em>combining</em> characters, in which two or more characters are rendered together: an example would be <code>"y\u306"</code>, which is two characters of width one: combining characters are given width zero, and there are other zero-width characters such as the zero-width space <code>"\u200b"</code>. </p> <p>Some East Asian languages have ‘wide’ characters, ideographs which are conventionally printed across two columns when mixed with ASCII and other ‘narrow’ characters in those languages. The problem is that whether a computer prints wide characters over two or one columns depends on the font, with it not being uncommon to use two columns in a font intended for East Asian users and a single column in a ‘Western’ font. Unicode has encodings for ‘fullwidth’ versions of ASCII characters and ‘halfwidth’ versions of Katakana (Japanese) and Hangul (Korean) characters. Then there is the ‘East Asian Ambiguous class’ (Greek, Cyrillic, signs, some accented Latin chars, etc), for which the historical practice was to use two columns in East Asia and one elsewhere. The width quoted by <code>nchar</code> for characters in that class (and some others) depends on the locale, being one except in some East Asian locales on some OSes (notably Windows). </p> <p>Control characters are given width zero in multi-byte locales, but are usually given width one in single-byte ones (as their positions are often undefined and maybe re-used as in CP1252 <em>vs</em> Latin-1). </p> <h3>References</h3> <p>Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) <em>The New S Language</em>. Wadsworth &amp; Brooks/Cole. </p> <p>Unicode Standard Annex #11: <em>East Asian Width.</em> <a href="https://www.unicode.org/reports/tr11/">https://www.unicode.org/reports/tr11/</a> </p> <h3>See Also</h3> <p><code><a href="../../graphics/html/strwidth">strwidth</a></code> giving width of strings for plotting; <code><a href="paste">paste</a></code>, <code><a href="substr">substr</a></code>, <code><a href="strsplit">strsplit</a></code> </p> <h3>Examples</h3> <pre data-language="r">
x &lt;- c("asfef", "qwerty", "yuiop[", "b", "stuff.blah.yech")
nchar(x)
# 5  6  6  1 15

nchar(deparse(mean))
# 18 17  &lt;-- unless mean differs from base::mean

x[3] &lt;- NA; x
nchar(x, keepNA= TRUE) #  5  6 NA  1 15
nchar(x, keepNA=FALSE) #  5  6  2  1 15
stopifnot(identical(nchar(x     ), nchar(x, keepNA= TRUE)),
          identical(nchar(x, "w"), nchar(x, keepNA=FALSE)),
          identical(is.na(x), is.na(nchar(x))))

##' nchar() for all three types :
nchars &lt;- function(x, ...)
   vapply(c("chars", "bytes", "width"),
          function(tp) nchar(x, tp, ...), integer(length(x)))

nchars("\u200b") # in R versions (&gt;= 2015-09-xx):
## chars bytes width
##     1     3     0

data.frame(x, nchars(x)) ## all three types : same unless for NA
## force the same by forcing 'keepNA':
(ncT &lt;- nchars(x, keepNA = TRUE)) ## .... NA NA NA ....
(ncF &lt;- nchars(x, keepNA = FALSE))## ....  2  2  2 ....
stopifnot(apply(ncT, 1, function(.) length(unique(.))) == 1,
          apply(ncF, 1, function(.) length(unique(.))) == 1)
</pre>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright (©) 1999–2012 R Foundation for Statistical Computing.<br>Licensed under the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
