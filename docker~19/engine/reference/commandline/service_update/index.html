
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Docker Service Update - Docker 19 - W3cubDocs</title>
  
  <meta name="description" content=" Update a service ">
  <meta name="keywords" content="docker, service, update, docker~19">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/docker~19/engine/reference/commandline/service_update/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/docker~19.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/docker~19/" class="_nav-link" title="" style="margin-left:0;">Docker 19</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1>docker service update</h1>    <h2 id="description">Description</h2> <p>Update a service</p> <p><a href="https://docs.docker.com/engine/api/v1.24/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" data-placement="right" title="Open the 1.24 API reference (in a new window)">API 1.24+</span></a> The client and daemon API must both be at least <a href="https://docs.docker.com/engine/api/v1.24/" target="_blank" class="_">1.24</a> to use this command. Use the <code class="highlighter-rouge">docker version</code> command on the client to check your client and daemon API versions.</p> <p><span class="badge badge-info" data-toggle="tooltip" data-placement="right" title="This command works with the Swarm orchestrator.">Swarm</span> This command works with the Swarm orchestrator.</p> <h2 id="usage">Usage</h2> <pre data-language="">docker service update [OPTIONS] SERVICE
</pre> <h2 id="options">Options</h2> <table> <thead> <tr> <td>Name, shorthand</td> <td>Default</td> <td>Description</td> </tr> </thead> <tbody> <tr> <td><code class="highlighter-rouge">--args</code></td> <td></td> <td>Service command args</td> </tr> <tr> <td><code class="highlighter-rouge">--config-add</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.30/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.30+</span></a><br>Add or update a config file on a service</td> </tr> <tr> <td><code class="highlighter-rouge">--config-rm</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.30/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.30+</span></a><br>Remove a configuration file</td> </tr> <tr> <td><code class="highlighter-rouge">--constraint-add</code></td> <td></td> <td>Add or update a placement constraint</td> </tr> <tr> <td><code class="highlighter-rouge">--constraint-rm</code></td> <td></td> <td>Remove a constraint</td> </tr> <tr> <td><code class="highlighter-rouge">--container-label-add</code></td> <td></td> <td>Add or update a container label</td> </tr> <tr> <td><code class="highlighter-rouge">--container-label-rm</code></td> <td></td> <td>Remove a container label by its key</td> </tr> <tr> <td><code class="highlighter-rouge">--credential-spec</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.29/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.29+</span></a><br>Credential spec for managed service account (Windows only)</td> </tr> <tr> <td><code class="highlighter-rouge">--detach , -d</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.29/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.29+</span></a><br>Exit immediately instead of waiting for the service to converge</td> </tr> <tr> <td><code class="highlighter-rouge">--dns-add</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Add or update a custom DNS server</td> </tr> <tr> <td><code class="highlighter-rouge">--dns-option-add</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Add or update a DNS option</td> </tr> <tr> <td><code class="highlighter-rouge">--dns-option-rm</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Remove a DNS option</td> </tr> <tr> <td><code class="highlighter-rouge">--dns-rm</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Remove a custom DNS server</td> </tr> <tr> <td><code class="highlighter-rouge">--dns-search-add</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Add or update a custom DNS search domain</td> </tr> <tr> <td><code class="highlighter-rouge">--dns-search-rm</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Remove a DNS search domain</td> </tr> <tr> <td><code class="highlighter-rouge">--endpoint-mode</code></td> <td></td> <td>Endpoint mode (vip or dnsrr)</td> </tr> <tr> <td><code class="highlighter-rouge">--entrypoint</code></td> <td></td> <td>Overwrite the default ENTRYPOINT of the image</td> </tr> <tr> <td><code class="highlighter-rouge">--env-add</code></td> <td></td> <td>Add or update an environment variable</td> </tr> <tr> <td><code class="highlighter-rouge">--env-rm</code></td> <td></td> <td>Remove an environment variable</td> </tr> <tr> <td><code class="highlighter-rouge">--force</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Force update even if no changes require it</td> </tr> <tr> <td><code class="highlighter-rouge">--generic-resource-add</code></td> <td></td> <td>Add a Generic resource</td> </tr> <tr> <td><code class="highlighter-rouge">--generic-resource-rm</code></td> <td></td> <td>Remove a Generic resource</td> </tr> <tr> <td><code class="highlighter-rouge">--group-add</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Add an additional supplementary user group to the container</td> </tr> <tr> <td><code class="highlighter-rouge">--group-rm</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Remove a previously added supplementary user group from the container</td> </tr> <tr> <td><code class="highlighter-rouge">--health-cmd</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Command to run to check health</td> </tr> <tr> <td><code class="highlighter-rouge">--health-interval</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Time between running the check (ms|s|m|h)</td> </tr> <tr> <td><code class="highlighter-rouge">--health-retries</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Consecutive failures needed to report unhealthy</td> </tr> <tr> <td><code class="highlighter-rouge">--health-start-period</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.29/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.29+</span></a><br>Start period for the container to initialize before counting retries towards unstable (ms|s|m|h)</td> </tr> <tr> <td><code class="highlighter-rouge">--health-timeout</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Maximum time to allow one check to run (ms|s|m|h)</td> </tr> <tr> <td><code class="highlighter-rouge">--host-add</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.32/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.32+</span></a><br>Add a custom host-to-IP mapping (host:ip)</td> </tr> <tr> <td><code class="highlighter-rouge">--host-rm</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Remove a custom host-to-IP mapping (host:ip)</td> </tr> <tr> <td><code class="highlighter-rouge">--hostname</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Container hostname</td> </tr> <tr> <td><code class="highlighter-rouge">--image</code></td> <td></td> <td>Service image tag</td> </tr> <tr> <td><code class="highlighter-rouge">--init</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.37/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.37+</span></a><br>Use an init inside each service container to forward signals and reap processes</td> </tr> <tr> <td><code class="highlighter-rouge">--isolation</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.35/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.35+</span></a><br>Service container isolation mode</td> </tr> <tr> <td><code class="highlighter-rouge">--label-add</code></td> <td></td> <td>Add or update a service label</td> </tr> <tr> <td><code class="highlighter-rouge">--label-rm</code></td> <td></td> <td>Remove a label by its key</td> </tr> <tr> <td><code class="highlighter-rouge">--limit-cpu</code></td> <td></td> <td>Limit CPUs</td> </tr> <tr> <td><code class="highlighter-rouge">--limit-memory</code></td> <td></td> <td>Limit Memory</td> </tr> <tr> <td><code class="highlighter-rouge">--log-driver</code></td> <td></td> <td>Logging driver for service</td> </tr> <tr> <td><code class="highlighter-rouge">--log-opt</code></td> <td></td> <td>Logging driver options</td> </tr> <tr> <td><code class="highlighter-rouge">--mount-add</code></td> <td></td> <td>Add or update a mount on a service</td> </tr> <tr> <td><code class="highlighter-rouge">--mount-rm</code></td> <td></td> <td>Remove a mount by its target path</td> </tr> <tr> <td><code class="highlighter-rouge">--network-add</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.29/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.29+</span></a><br>Add a network</td> </tr> <tr> <td><code class="highlighter-rouge">--network-rm</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.29/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.29+</span></a><br>Remove a network</td> </tr> <tr> <td><code class="highlighter-rouge">--no-healthcheck</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Disable any container-specified HEALTHCHECK</td> </tr> <tr> <td><code class="highlighter-rouge">--no-resolve-image</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.30/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.30+</span></a><br>Do not query the registry to resolve image digest and supported platforms</td> </tr> <tr> <td><code class="highlighter-rouge">--placement-pref-add</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.28/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.28+</span></a><br>Add a placement preference</td> </tr> <tr> <td><code class="highlighter-rouge">--placement-pref-rm</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.28/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.28+</span></a><br>Remove a placement preference</td> </tr> <tr> <td><code class="highlighter-rouge">--publish-add</code></td> <td></td> <td>Add or update a published port</td> </tr> <tr> <td><code class="highlighter-rouge">--publish-rm</code></td> <td></td> <td>Remove a published port by its target port</td> </tr> <tr> <td><code class="highlighter-rouge">--quiet , -q</code></td> <td></td> <td>Suppress progress output</td> </tr> <tr> <td><code class="highlighter-rouge">--read-only</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.28/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.28+</span></a><br>Mount the container’s root filesystem as read only</td> </tr> <tr> <td><code class="highlighter-rouge">--replicas</code></td> <td></td> <td>Number of tasks</td> </tr> <tr> <td><code class="highlighter-rouge">--replicas-max-per-node</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.40/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.40+</span></a><br>Maximum number of tasks per node (default 0 = unlimited)</td> </tr> <tr> <td><code class="highlighter-rouge">--reserve-cpu</code></td> <td></td> <td>Reserve CPUs</td> </tr> <tr> <td><code class="highlighter-rouge">--reserve-memory</code></td> <td></td> <td>Reserve Memory</td> </tr> <tr> <td><code class="highlighter-rouge">--restart-condition</code></td> <td></td> <td>Restart when condition is met (“none”|”on-failure”|”any”)</td> </tr> <tr> <td><code class="highlighter-rouge">--restart-delay</code></td> <td></td> <td>Delay between restart attempts (ns|us|ms|s|m|h)</td> </tr> <tr> <td><code class="highlighter-rouge">--restart-max-attempts</code></td> <td></td> <td>Maximum number of restarts before giving up</td> </tr> <tr> <td><code class="highlighter-rouge">--restart-window</code></td> <td></td> <td>Window used to evaluate the restart policy (ns|us|ms|s|m|h)</td> </tr> <tr> <td><code class="highlighter-rouge">--rollback</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Rollback to previous specification</td> </tr> <tr> <td><code class="highlighter-rouge">--rollback-delay</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.28/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.28+</span></a><br>Delay between task rollbacks (ns|us|ms|s|m|h)</td> </tr> <tr> <td><code class="highlighter-rouge">--rollback-failure-action</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.28/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.28+</span></a><br>Action on rollback failure (“pause”|”continue”)</td> </tr> <tr> <td><code class="highlighter-rouge">--rollback-max-failure-ratio</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.28/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.28+</span></a><br>Failure rate to tolerate during a rollback</td> </tr> <tr> <td><code class="highlighter-rouge">--rollback-monitor</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.28/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.28+</span></a><br>Duration after each task rollback to monitor for failure (ns|us|ms|s|m|h)</td> </tr> <tr> <td><code class="highlighter-rouge">--rollback-order</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.29/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.29+</span></a><br>Rollback order (“start-first”|”stop-first”)</td> </tr> <tr> <td><code class="highlighter-rouge">--rollback-parallelism</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.28/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.28+</span></a><br>Maximum number of tasks rolled back simultaneously (0 to roll back all at once)</td> </tr> <tr> <td><code class="highlighter-rouge">--secret-add</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Add or update a secret on a service</td> </tr> <tr> <td><code class="highlighter-rouge">--secret-rm</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Remove a secret</td> </tr> <tr> <td><code class="highlighter-rouge">--stop-grace-period</code></td> <td></td> <td>Time to wait before force killing a container (ns|us|ms|s|m|h)</td> </tr> <tr> <td><code class="highlighter-rouge">--stop-signal</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.28/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.28+</span></a><br>Signal to stop the container</td> </tr> <tr> <td><code class="highlighter-rouge">--sysctl-add</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.40/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.40+</span></a><br>Add or update a Sysctl option</td> </tr> <tr> <td><code class="highlighter-rouge">--sysctl-rm</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.40/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.40+</span></a><br>Remove a Sysctl option</td> </tr> <tr> <td><code class="highlighter-rouge">--tty , -t</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Allocate a pseudo-TTY</td> </tr> <tr> <td><code class="highlighter-rouge">--update-delay</code></td> <td></td> <td>Delay between updates (ns|us|ms|s|m|h)</td> </tr> <tr> <td><code class="highlighter-rouge">--update-failure-action</code></td> <td></td> <td>Action on update failure (“pause”|”continue”|”rollback”)</td> </tr> <tr> <td><code class="highlighter-rouge">--update-max-failure-ratio</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Failure rate to tolerate during an update</td> </tr> <tr> <td><code class="highlighter-rouge">--update-monitor</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.25/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.25+</span></a><br>Duration after each task update to monitor for failure (ns|us|ms|s|m|h)</td> </tr> <tr> <td><code class="highlighter-rouge">--update-order</code></td> <td></td> <td>
<a href="https://docs.docker.com/engine/api/v1.29/" target="_blank" class="_"><span class="badge badge-info" data-toggle="tooltip" ttitle="Open the 1.24 API reference (in a new window)">API 1.29+</span></a><br>Update order (“start-first”|”stop-first”)</td> </tr> <tr> <td><code class="highlighter-rouge">--update-parallelism</code></td> <td></td> <td>Maximum number of tasks updated simultaneously (0 to update all at once)</td> </tr> <tr> <td><code class="highlighter-rouge">--user , -u</code></td> <td></td> <td>Username or UID (format: &lt;name|uid&gt;[:&lt;group|gid&gt;])</td> </tr> <tr> <td><code class="highlighter-rouge">--with-registry-auth</code></td> <td></td> <td>Send registry authentication details to swarm agents</td> </tr> <tr> <td><code class="highlighter-rouge">--workdir , -w</code></td> <td></td> <td>Working directory inside the container</td> </tr>  </tbody> </table>  <h2 id="parent-command">Parent command</h2> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><a href="../service/index">docker service</a></td> <td>Manage services</td> </tr> </tbody> </table> <h2 id="related-commands">Related commands</h2> <table> <thead> <tr> <td>Command</td> <td>Description</td> </tr> </thead> <tbody> <tr> <td><a href="../service_create/index">docker service create</a></td> <td>Create a new service</td> </tr> <tr> <td><a href="../service_inspect/index">docker service inspect</a></td> <td>Display detailed information on one or more services</td> </tr> <tr> <td><a href="../service_logs/index">docker service logs</a></td> <td>Fetch the logs of a service or task</td> </tr> <tr> <td><a href="../service_ls/index">docker service ls</a></td> <td>List services</td> </tr> <tr> <td><a href="../service_ps/index">docker service ps</a></td> <td>List the tasks of one or more services</td> </tr> <tr> <td><a href="../service_rm/index">docker service rm</a></td> <td>Remove one or more services</td> </tr> <tr> <td><a href="../service_rollback/index">docker service rollback</a></td> <td>Revert changes to a service’s configuration</td> </tr> <tr> <td><a href="../service_scale/index">docker service scale</a></td> <td>Scale one or multiple replicated services</td> </tr> <tr> <td><a href="index">docker service update</a></td> <td>Update a service</td> </tr> </tbody> </table> <h2 id="extended-description">Extended description</h2> <p>Updates a service as described by the specified parameters. This command has to be run targeting a manager node. The parameters are the same as <a href="../service_create/index"><code class="highlighter-rouge">docker service create</code></a>. Please look at the description there for further information.</p> <p>Normally, updating a service will only cause the service’s tasks to be replaced with new ones if a change to the service requires recreating the tasks for it to take effect. For example, only changing the <code class="highlighter-rouge">--update-parallelism</code> setting will not recreate the tasks, because the individual tasks are not affected by this setting. However, the <code class="highlighter-rouge">--force</code> flag will cause the tasks to be recreated anyway. This can be used to perform a rolling restart without any changes to the service parameters.</p> <h2 id="examples">Examples</h2> <h3 id="update-a-service">Update a service</h3> <div class="highlight"><pre class="highlight" data-language="">$ docker service update --limit-cpu 2 redis
</pre></div> <h3 id="perform-a-rolling-restart-with-no-parameter-changes">Perform a rolling restart with no parameter changes</h3> <div class="highlight"><pre class="highlight" data-language="">$ docker service update --force --update-parallelism 1 --update-delay 30s redis
</pre></div> <p>In this example, the <code class="highlighter-rouge">--force</code> flag causes the service’s tasks to be shut down and replaced with new ones even though none of the other parameters would normally cause that to happen. The <code class="highlighter-rouge">--update-parallelism 1</code> setting ensures that only one task is replaced at a time (this is the default behavior). The <code class="highlighter-rouge">--update-delay 30s</code> setting introduces a 30 second delay between tasks, so that the rolling restart happens gradually.</p> <h3 id="add-or-remove-mounts">Add or remove mounts</h3> <p>Use the <code class="highlighter-rouge">--mount-add</code> or <code class="highlighter-rouge">--mount-rm</code> options add or remove a service’s bind mounts or volumes.</p> <p>The following example creates a service which mounts the <code class="highlighter-rouge">test-data</code> volume to <code class="highlighter-rouge">/somewhere</code>. The next step updates the service to also mount the <code class="highlighter-rouge">other-volume</code> volume to <code class="highlighter-rouge">/somewhere-else</code>volume, The last step unmounts the <code class="highlighter-rouge">/somewhere</code> mount point, effectively removing the <code class="highlighter-rouge">test-data</code> volume. Each command returns the service name.</p> <ul> <li> <p>The <code class="highlighter-rouge">--mount-add</code> flag takes the same parameters as the <code class="highlighter-rouge">--mount</code> flag on <code class="highlighter-rouge">service create</code>. Refer to the <a href="../service_create/index#volumes-and-bind-mounts-mount">volumes and bind mounts</a> section in the <code class="highlighter-rouge">service create</code> reference for details.</p> </li> <li> <p>The <code class="highlighter-rouge">--mount-rm</code> flag takes the <code class="highlighter-rouge">target</code> path of the mount.</p> </li> </ul> <div class="highlight"><pre class="highlight" data-language="">$ docker service create \
    --name=myservice \
    --mount \
      type=volume,source=test-data,target=/somewhere \
    nginx:alpine \
    myservice

myservice

$ docker service update \
    --mount-add \
      type=volume,source=other-volume,target=/somewhere-else \
    myservice

myservice

$ docker service update --mount-rm /somewhere myservice

myservice
</pre></div> <h3 id="add-or-remove-published-service-ports">Add or remove published service ports</h3> <p>Use the <code class="highlighter-rouge">--publish-add</code> or <code class="highlighter-rouge">--publish-rm</code> flags to add or remove a published port for a service. You can use the short or long syntax discussed in the <a href="../service_create/index#publish-service-ports-externally-to-the-swarm">docker service create</a> reference.</p> <p>The following example adds a published service port to an existing service.</p> <div class="highlight"><pre class="highlight" data-language="">$ docker service update \
  --publish-add published=8080,target=80 \
  myservice
</pre></div> <h3 id="add-or-remove-network">Add or remove network</h3> <p>Use the <code class="highlighter-rouge">--network-add</code> or <code class="highlighter-rouge">--network-rm</code> flags to add or remove a network for a service. You can use the short or long syntax discussed in the <a href="../service_create/index#attach-a-service-to-an-existing-network-network">docker service create</a> reference.</p> <p>The following example adds a new alias name to an existing service already connected to network my-network:</p> <div class="highlight"><pre class="highlight" data-language="">$ docker service update \
  --network-rm my-network \
  --network-add name=my-network,alias=web1 \
  myservice
</pre></div> <h3 id="roll-back-to-the-previous-version-of-a-service">Roll back to the previous version of a service</h3> <p>Use the <code class="highlighter-rouge">--rollback</code> option to roll back to the previous version of the service.</p> <p>This will revert the service to the configuration that was in place before the most recent <code class="highlighter-rouge">docker service update</code> command.</p> <p>The following example updates the number of replicas for the service from 4 to 5, and then rolls back to the previous configuration.</p> <div class="highlight"><pre class="highlight" data-language="">$ docker service update --replicas=5 web

web

$ docker service ls

ID            NAME  MODE        REPLICAS  IMAGE
80bvrzp6vxf3  web   replicated  0/5       nginx:alpine

</pre></div> <p>Roll back the <code class="highlighter-rouge">web</code> service...</p> <div class="highlight"><pre class="highlight" data-language="">$ docker service update --rollback web

web

$ docker service ls

ID            NAME  MODE        REPLICAS  IMAGE
80bvrzp6vxf3  web   replicated  0/4       nginx:alpine

</pre></div> <p>Other options can be combined with <code class="highlighter-rouge">--rollback</code> as well, for example, <code class="highlighter-rouge">--update-delay 0s</code> to execute the rollback without a delay between tasks:</p> <div class="highlight"><pre class="highlight" data-language="">$ docker service update \
  --rollback \
  --update-delay 0s
  web

web

</pre></div> <p>Services can also be set up to roll back to the previous version automatically when an update fails. To set up a service for automatic rollback, use <code class="highlighter-rouge">--update-failure-action=rollback</code>. A rollback will be triggered if the fraction of the tasks which failed to update successfully exceeds the value given with <code class="highlighter-rouge">--update-max-failure-ratio</code>.</p> <p>The rate, parallelism, and other parameters of a rollback operation are determined by the values passed with the following flags:</p> <ul> <li><code class="highlighter-rouge">--rollback-delay</code></li> <li><code class="highlighter-rouge">--rollback-failure-action</code></li> <li><code class="highlighter-rouge">--rollback-max-failure-ratio</code></li> <li><code class="highlighter-rouge">--rollback-monitor</code></li> <li><code class="highlighter-rouge">--rollback-parallelism</code></li> </ul> <p>For example, a service set up with <code class="highlighter-rouge">--update-parallelism 1 --rollback-parallelism 3</code> will update one task at a time during a normal update, but during a rollback, 3 tasks at a time will get rolled back. These rollback parameters are respected both during automatic rollbacks and for rollbacks initiated manually using <code class="highlighter-rouge">--rollback</code>.</p> <h3 id="add-or-remove-secrets">Add or remove secrets</h3> <p>Use the <code class="highlighter-rouge">--secret-add</code> or <code class="highlighter-rouge">--secret-rm</code> options add or remove a service’s secrets.</p> <p>The following example adds a secret named <code class="highlighter-rouge">ssh-2</code> and removes <code class="highlighter-rouge">ssh-1</code>:</p> <div class="highlight"><pre class="highlight" data-language="">$ docker service update \
    --secret-add source=ssh-2,target=ssh-2 \
    --secret-rm ssh-1 \
    myservice
</pre></div> <h3 id="update-services-using-templates">Update services using templates</h3> <p>Some flags of <code class="highlighter-rouge">service update</code> support the use of templating. See <a href="../service_create/index#templating"><code class="highlighter-rouge">service create</code></a> for the reference.</p> <h3 id="specify-isolation-mode-windows">Specify isolation mode (Windows)</h3> <p><code class="highlighter-rouge">service update</code> supports the same <code class="highlighter-rouge">--isolation</code> flag as <code class="highlighter-rouge">service create</code> See <a href="../service_create/index"><code class="highlighter-rouge">service create</code></a> for the reference.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019 Docker, Inc.<br>Licensed under the Apache License, Version 2.0.<br>Docker and the Docker logo are trademarks or registered trademarks of Docker, Inc. in the United States and/or other countries.<br>Docker, Inc. and other parties may also have trademark rights in other terms used herein.<br>
    <a href="https://docs.docker.com/engine/reference/commandline/service_update/" class="_attribution-link">https://docs.docker.com/engine/reference/commandline/service_update/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
