
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Async Function - JavaScript - W3cubDocs</title>
  
  <meta name="description" content=" This feature is well established and works across many devices and browser versions. It’s been available across browsers since April 2017. ">
  <meta name="keywords" content="async, function, javascript">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/javascript/statements/async_function.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/javascript.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/javascript/" class="_nav-link" title="" style="margin-left:0;">JavaScript</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _mdn">
				
				
<header><h1>async function</h1>
<details class="baseline-indicator high"><summary><h2>Baseline <span class="not-bold">Widely available</span>
</h2>

</summary><div class="extra">
<p>This feature is well established and works across many devices and browser versions. It’s been available across browsers since April 2017.</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/blog/baseline-evolution-on-mdn/" data-glean="baseline_link_learn_more" target="_blank" class="learn-more">Learn more</a></li>
<li><a href="#browser_compatibility" data-glean="baseline_link_bcd_table">See full compatibility</a></li>
<li><a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FStatements%2Fasync_function&amp;level=high" data-glean="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer">Report feedback</a></li>
</ul>
</div></details></header><div class="section-content">
<p>The <code>async function</code> declaration creates a <a href="https://developer.mozilla.org/en-US/docs/Glossary/Binding">binding</a> of a new async function to a given name. The <code>await</code> keyword is permitted within the function body, enabling asynchronous, promise-based behavior to be written in a cleaner style and avoiding the need to explicitly configure promise chains.</p> <p>You can also define async functions using the <a href="../operators/async_function"><code>async function</code> expression</a>.</p>
</div>
<section aria-labelledby="try_it"><h2 id="try_it">Try it</h2>
<div class="section-content"><iframe class="interactive is-taller-height" height="200" src="https://interactive-examples.mdn.mozilla.net/pages/js/statement-async.html" title="MDN Web Docs Interactive Example" loading="lazy"></iframe></div></section><section aria-labelledby="syntax"><h2 id="syntax">Syntax</h2>
<div class="section-content">
<div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="sGYr+NsiUXe9C22LCHlG89FwNgwUI3mo3sdbmelNeRY=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">param0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  statements
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">param0<span class="token punctuation">,</span> param1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  statements
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">name</span><span class="token punctuation">(</span>param0<span class="token punctuation">,</span> param1<span class="token punctuation">,</span> <span class="token comment">/* …, */</span> paramN<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  statements
<span class="token punctuation">}</span>
</pre>
</div> <div class="notecard note" id="sect1"> <p><strong>Note:</strong> There cannot be a line terminator between <code>async</code> and <code>function</code>, otherwise a semicolon is <a href="../lexical_grammar#automatic_semicolon_insertion">automatically inserted</a>, causing <code>async</code> to become an identifier and the rest to become a <code>function</code> declaration.</p> </div>
</div></section><section aria-labelledby="parameters"><h3 id="parameters">Parameters</h3>
<div class="section-content"><dl> <dt id="name"><a href="#name"><code>name</code></a></dt> <dd> <p>The function's name.</p> </dd> <dt id="param">
<a href="#param"><code>param</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>The name of a formal parameter for the function. For the parameters' syntax, see the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions#function_parameters">Functions reference</a>.</p> </dd> <dt id="statements">
<a href="#statements"><code>statements</code></a> <span class="badge inline optional">Optional</span>
</dt> <dd> <p> The statements comprising the body of the function. The <code>await</code> mechanism may be used. </p> </dd> </dl></div></section><section aria-labelledby="description"><h2 id="description">Description</h2>
<div class="section-content">
<p>An <code>async function</code> declaration creates an <a href="../global_objects/asyncfunction"><code>AsyncFunction</code></a> object. Each time when an async function is called, it returns a new <a href="../global_objects/promise"><code>Promise</code></a> which will be resolved with the value returned by the async function, or rejected with an exception uncaught within the async function.</p> <p>Async functions can contain zero or more <a href="../operators/await"><code>await</code></a> expressions. Await expressions make promise-returning functions behave as though they're synchronous by suspending execution until the returned promise is fulfilled or rejected. The resolved value of the promise is treated as the return value of the await expression. Use of <code>async</code> and <code>await</code> enables the use of ordinary <code>try</code> / <code>catch</code> blocks around asynchronous code.</p> <div class="notecard note" id="sect2"> <p><strong>Note:</strong> The <code>await</code> keyword is only valid inside async functions within regular JavaScript code. If you use it outside of an async function's body, you will get a <a href="../global_objects/syntaxerror"><code>SyntaxError</code></a>.</p> <p><code>await</code> can be used on its own with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">JavaScript modules.</a></p> </div> <div class="notecard note" id="sect3"> <p> <strong>Note:</strong> The purpose of <code>async</code>/<code>await</code> is to simplify the syntax necessary to consume promise-based APIs. The behavior of <code>async</code>/<code>await</code> is similar to combining <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_generators">generators</a> and promises. </p> </div> <p> Async functions always return a promise. If the return value of an async function is not explicitly a promise, it will be implicitly wrapped in a promise. </p> <p>For example, consider the following code:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="67Uu0v/AsRjKAGUB8vrvnh94jH6uFkK883vPzrOXWTs=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>It is similar to:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="1th3Q26kCQOipAgxFIgBUc3CfUOel3JNMRUisuNZ07k=" data-language="js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <div class="notecard note" id="sect4"> <p><strong>Note:</strong></p> <p>Even though the return value of an async function behaves as if it's wrapped in a <code>Promise.resolve</code>, they are not equivalent.</p> <p>An async function will return a different <em>reference</em>, whereas <code>Promise.resolve</code> returns the same reference if the given value is a promise.</p> <p>It can be a problem when you want to check the equality of a promise and a return value of an async function.</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="EtvMnH4oU4Of6m4WdH6sapJlSxTDCg8FWmWOjtVeFn0=" data-language="js"><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">res</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> p<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">basicReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token function">basicReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token function">asyncReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</pre>
</div> </div> <p> The body of an async function can be thought of as being split by zero or more await expressions. Top-level code, up to and including the first await expression (if there is one), is run synchronously. In this way, an async function without an await expression will run synchronously. If there is an await expression inside the function body, however, the async function will always complete asynchronously. </p> <p>For example:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="KzKTNLwrqNIVe5RbTqHKKE+DhQn9zp1xeC/pdW9GW3c=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>It is also equivalent to:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="2sXOgHdsNjoq4083gamUG+SNHmWsBAvg/Vm5DKTqOJU=" data-language="js"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p> Code after each await expression can be thought of as existing in a <code>.then</code> callback. In this way a promise chain is progressively constructed with each reentrant step through the function. The return value forms the final link in the chain. </p> <p> In the following example, we successively await two promises. Progress moves through function <code>foo</code> in three stages. </p> <ol> <li> The first line of the body of function <code>foo</code> is executed synchronously, with the await expression configured with the pending promise. Progress through <code>foo</code> is then suspended and control is yielded back to the function that called <code>foo</code>. </li> <li> Some time later, when the first promise has either been fulfilled or rejected, control moves back into <code>foo</code>. The result of the first promise fulfillment (if it was not rejected) is returned from the await expression. Here <code>1</code> is assigned to <code>result1</code>. Progress continues, and the second await expression is evaluated. Again, progress through <code>foo</code> is suspended and control is yielded. </li> <li> Some time later, when the second promise has either been fulfilled or rejected, control re-enters <code>foo</code>. The result of the second promise resolution is returned from the second await expression. Here <code>2</code> is assigned to <code>result2</code>. Control moves to the return expression (if any). The default return value of <code>undefined</code> is returned as the resolution value of the current promise. </li> </ol> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="rdiJNBPnXNXfFyTbnNtdbBMbuEYssaSrpVnF+Y4lvPk=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> result2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p> Note how the promise chain is not built-up in one go. Instead, the promise chain is constructed in stages as control is successively yielded from and returned to the async function. As a result, we must be mindful of error handling behavior when dealing with concurrent asynchronous operations. </p> <p> For example, in the following code an unhandled promise rejection error will be thrown, even if a <code>.catch</code> handler has been configured further along the promise chain. This is because <code>p2</code> will not be "wired into" the promise chain until control returns from <code>p1</code>. </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="YPzkZr5kMhTItGqGFSQuSzoEbPtzPKdztvGgC92IMVw=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">await</span> p1<span class="token punctuation">,</span> <span class="token keyword">await</span> p2<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Do not do this! Use Promise.all or Promise.allSettled instead.</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Attempt to swallow all errors...</span>
</pre>
</div> <p><code>async function</code> declarations behave similar to <a href="function"><code>function</code></a> declarations — they are <a href="https://developer.mozilla.org/en-US/docs/Glossary/Hoisting">hoisted</a> to the top of their scope and can be called anywhere in their scope, and they can be redeclared only in certain contexts.</p>
</div></section><section aria-labelledby="examples"><h2 id="examples">Examples</h2>
</section><section aria-labelledby="async_functions_and_execution_order"><h3 id="async_functions_and_execution_order">Async functions and execution order</h3>
<div class="section-content">
<div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="sTf4N+WRrqdznvDf6qYnTJ0FPVDxmxddz9JvyPteldA=" data-language="js"><span class="token keyword">function</span> <span class="token function">resolveAfter2Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"starting slow promise"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"slow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"slow promise is done"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">resolveAfter1Second</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"starting fast promise"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"fast"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"fast promise is done"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sequentialStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"== sequentialStart starts =="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 1. Start a timer, log after it's done</span>
  <span class="token keyword">const</span> slow <span class="token operator">=</span> <span class="token function">resolveAfter2Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> slow<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 2. Start the next timer after waiting for the previous one</span>
  <span class="token keyword">const</span> fast <span class="token operator">=</span> <span class="token function">resolveAfter1Second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> fast<span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"== sequentialStart done =="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sequentialWait</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"== sequentialWait starts =="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 1. Start two timers without waiting for each other</span>
  <span class="token keyword">const</span> slow <span class="token operator">=</span> <span class="token function">resolveAfter2Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> fast <span class="token operator">=</span> <span class="token function">resolveAfter1Second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 2. Wait for the slow timer to complete, and then log the result</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> slow<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 3. Wait for the fast timer to complete, and then log the result</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> fast<span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"== sequentialWait done =="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">concurrent1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"== concurrent1 starts =="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 1. Start two timers concurrently and wait for both to complete</span>
  <span class="token keyword">const</span> results <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token function">resolveAfter2Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">resolveAfter1Second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 2. Log the results together</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"== concurrent1 done =="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">concurrent2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"== concurrent2 starts =="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 1. Start two timers concurrently, log immediately after each one is done</span>
  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">resolveAfter2Seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">resolveAfter1Second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"== concurrent2 done =="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">sequentialStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// after 2 seconds, logs "slow", then after 1 more second, "fast"</span>

<span class="token comment">// wait above to finish</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>sequentialWait<span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// after 2 seconds, logs "slow" and then "fast"</span>

<span class="token comment">// wait again</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>concurrent1<span class="token punctuation">,</span> <span class="token number">7000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// same as sequentialWait</span>

<span class="token comment">// wait again</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>concurrent2<span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// after 1 second, logs "fast", then after 1 more second, "slow"</span>
</pre>
</div> <h4 id="await_and_concurrency">await and concurrency</h4> <p> In <code>sequentialStart</code>, execution suspends 2 seconds for the first <code>await</code>, and then another second for the second <code>await</code>. The second timer is not created until the first has already fired, so the code finishes after 3 seconds. </p> <p> In <code>sequentialWait</code>, both timers are created and then <code>await</code>ed. The timers run concurrently, which means the code finishes in 2 rather than 3 seconds, i.e. the slowest timer. However, the <code>await</code> calls still run in series, which means the second <code>await</code> will wait for the first one to finish. In this case, the result of the fastest timer is processed after the slowest. </p> <p> If you wish to safely perform other jobs after two or more jobs run concurrently and are complete, you must await a call to <a href="../global_objects/promise/all"><code>Promise.all()</code></a> or <a href="../global_objects/promise/allsettled"><code>Promise.allSettled()</code></a> before that job. </p> <div class="notecard warning" id="sect5"> <p> <strong>Warning:</strong> The functions <code>sequentialWait</code> and <code>concurrent1</code> are not functionally equivalent. </p> <p> In <code>sequentialWait</code>, if promise <code>fast</code> rejects before promise <code>slow</code> is fulfilled, then an unhandled promise rejection error will be raised, regardless of whether the caller has configured a catch clause. </p> <p> In <code>concurrent1</code>, <code>Promise.all</code> wires up the promise chain in one go, meaning that the operation will fail-fast regardless of the order of rejection of the promises, and the error will always occur within the configured promise chain, enabling it to be caught in the normal way. </p> </div>
</div></section><section aria-labelledby="rewriting_a_promise_chain_with_an_async_function"><h3 id="rewriting_a_promise_chain_with_an_async_function">Rewriting a Promise chain with an async function</h3>
<div class="section-content">
<p> An API that returns a <a href="../global_objects/promise"><code>Promise</code></a> will result in a promise chain, and it splits the function into many parts. Consider the following code: </p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="+FRTCLwYKfaplnO8xxVYNYZui0SBLn/ySwrDe/ALmpo=" data-language="js"><span class="token keyword">function</span> <span class="token function">getProcessedData</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">downloadData</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token comment">// returns a promise</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">downloadFallbackData</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// returns a promise</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">processDataInWorker</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns a promise</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>it can be rewritten with a single async function as follows:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="57pv/uXUu13vO31PI4VJmxhsvd12mRP7Gwspt9hytIY=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getProcessedData</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> v<span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    v <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">downloadData</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    v <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">downloadFallbackData</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">processDataInWorker</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>Alternatively, you can chain the promise with <code>catch()</code>:</p> <div class="code-example">
<div class="example-header"><span class="language-name">js</span></div>
<pre data-signature="YT8v4Aqec2RQo84drA08Jx76A1ghaUvoYQFnRp2EC+4=" data-language="js"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getProcessedData</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> v <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">downloadData</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">downloadFallbackData</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">processDataInWorker</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p> In the two rewritten versions, notice there is no <code>await</code> statement after the <code>return</code> keyword, although that would be valid too: The return value of an async function is implicitly wrapped in <a href="../global_objects/promise/resolve"><code>Promise.resolve</code></a> - if it's not already a promise itself (as in the examples). </p>
</div></section><h2 id="specifications">Specifications</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://tc39.es/ecma262/multipage/ecmascript-language-functions-and-classes.html#sec-async-function-definitions">ECMAScript Language Specification <br><small># sec-async-function-definitions</small></a></td></tr></tbody>
</table></div>
<h2 id="browser_compatibility">Browser compatibility</h2>
<div class="_table"><table>
<thead>
<tr id="bct-browser-type">
<th></th>
<th colspan="6">Desktop</th>
<th colspan="6">Mobile</th>
<th colspan="2">Server</th>
</tr>
<tr id="bct-browsers">
<th></th>
<th>Chrome</th>
<th>Edge</th>
<th>Firefox</th>
<th>Opera</th>
<th>Safari</th>
<th>Chrome Android</th>
<th>Firefox for Android</th>
<th>Opera Android</th>
<th>Safari on IOS</th>
<th>Samsung Internet</th>
<th>WebView Android</th>
<th>Deno</th>
<th>Node.js</th>
</tr>
</thead>
<tbody><tr>
<th><code>async_function</code></th>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-yes">15</td>
<td class="bc-supports-yes">52</td>
<td class="bc-supports-yes">42</td>
<td class="bc-supports-yes">10.1</td>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-yes">52</td>
<td class="bc-supports-yes">42</td>
<td class="bc-supports-yes">10.3</td>
<td class="bc-supports-yes">6.0</td>
<td class="bc-supports-yes">55</td>
<td class="bc-supports-yes">1.0</td>
<td class="bc-supports-yes">7.6.0</td>
</tr></tbody>
</table></div>
<section aria-labelledby="see_also"><h2 id="see_also">See also</h2>
<div class="section-content"><ul> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions">Functions</a> guide</li> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises">Using promises</a> guide</li> <li><a href="../functions">Functions</a></li> <li><a href="../global_objects/asyncfunction"><code>AsyncFunction</code></a></li> <li><a href="../operators/async_function"><code>async function</code> expression</a></li> <li><a href="function"><code>function</code></a></li> <li><a href="function*"><code>function*</code></a></li> <li><a href="async_function*"><code>async function*</code></a></li> <li><a href="../operators/await"><code>await</code></a></li> <li><a href="../global_objects/promise"><code>Promise</code></a></li> <li>
<a href="https://innolitics.com/10x/javascript-decorators-for-promise-returning-functions/" target="_blank">Decorating async JavaScript functions</a> on innolitics.com (2016)</li> </ul></div></section><div class="_attribution">
  <p class="_attribution-p">
    © 2005–2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" class="_attribution-link">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
