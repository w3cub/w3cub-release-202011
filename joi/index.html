
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Joi Documentation - W3cubDocs</title>
  
  <meta name="description" content=" Joi documentation ">
  <meta name="keywords" content="joi, documentation">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/joi/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/joi.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/joi/" class="_nav-link" title="" style="margin-left:0;">Joi</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _joi">
				
				
<h3 id="introduction">
Introduction</h3> <p><strong>joi</strong> lets you describe your data using a simple, intuitive, and readable language.</p> <h4 id="example">
Example</h4> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-v">Joi</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'joi'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">username</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">alphanum</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">3</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">30</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>

    <span class="pl-c1">password</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">pattern</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-v">RegExp</span><span class="pl-kos">(</span><span class="pl-s">'^[a-zA-Z0-9]{3,30}$'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">,</span>

    <span class="pl-c1">repeat_password</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'password'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>

    <span class="pl-c1">access_token</span>: <span class="pl-kos">[</span>
        <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
    <span class="pl-kos">]</span><span class="pl-kos">,</span>

    <span class="pl-c1">birth_year</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">integer</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">1900</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">2013</span><span class="pl-kos">)</span><span class="pl-kos">,</span>

    <span class="pl-c1">email</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">email</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">minDomainSegments</span>: <span class="pl-c1">2</span><span class="pl-kos">,</span> <span class="pl-c1">tlds</span>: <span class="pl-kos">{</span> <span class="pl-c1">allow</span>: <span class="pl-kos">[</span><span class="pl-s">'com'</span><span class="pl-kos">,</span> <span class="pl-s">'net'</span><span class="pl-kos">]</span> <span class="pl-kos">}</span> <span class="pl-kos">}</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">with</span><span class="pl-kos">(</span><span class="pl-s">'username'</span><span class="pl-kos">,</span> <span class="pl-s">'birth_year'</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">xor</span><span class="pl-kos">(</span><span class="pl-s">'password'</span><span class="pl-kos">,</span> <span class="pl-s">'access_token'</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">with</span><span class="pl-kos">(</span><span class="pl-s">'password'</span><span class="pl-kos">,</span> <span class="pl-s">'repeat_password'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>


<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">username</span>: <span class="pl-s">'abc'</span><span class="pl-kos">,</span> <span class="pl-c1">birth_year</span>: <span class="pl-c1">1994</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// -&gt; { value: { username: 'abc', birth_year: 1994 } }</span>

<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// -&gt; { value: {}, error: '"username" is required' }</span>

<span class="pl-c">// Also -</span>

<span class="pl-k">try</span> <span class="pl-kos">{</span>
    <span class="pl-k">const</span> <span class="pl-s1">value</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">username</span>: <span class="pl-s">'abc'</span><span class="pl-kos">,</span> <span class="pl-c1">birth_year</span>: <span class="pl-c1">1994</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span>
<span class="pl-k">catch</span> <span class="pl-kos">(</span><span class="pl-s1">err</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-kos">}</span></pre></div> <p>The above schema defines the following constraints:</p> <ul> <li> <code data-language="javascript">username</code> <ul> <li>a required string</li> <li>must contain only alphanumeric characters</li> <li>at least 3 characters long but no more than 30</li> <li>must be accompanied by <code data-language="javascript">birth_year</code> </li> </ul> </li> <li> <code data-language="javascript">password</code> <ul> <li>an optional string</li> <li>must satisfy the custom regex pattern</li> <li>cannot appear together with <code data-language="javascript">access_token</code> </li> <li>must be accompanied by <code data-language="javascript">repeat_password</code> and equal to it</li> </ul> </li> <li> <code data-language="javascript">access_token</code> <ul> <li>an optional, unconstrained string or number</li> </ul> </li> <li> <code data-language="javascript">birth_year</code> <ul> <li>an integer between 1900 and 2013</li> </ul> </li> <li> <code data-language="javascript">email</code> <ul> <li>a valid email address string</li> <li>must have two domain parts e.g. <code data-language="javascript">example.com</code> </li> <li>TLD must be <code data-language="javascript">.com</code> or <code data-language="javascript">.net</code> </li> </ul> </li> </ul> <h3 id="general-usage">
General Usage</h3> <p>Usage is a two steps process:</p> <p>First, a schema is constructed using the provided types and constraints:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Note that <strong>joi</strong> schema objects are immutable which means every additional rule added (e.g. <code data-language="javascript">.min(5)</code>) will return a new schema object.</p> <p>Second, the value is validated against the defined schema:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-kos">{</span> error<span class="pl-kos">,</span> value <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-s">'a string'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>If the input is valid, then the <code data-language="javascript">error</code> will be <code data-language="javascript">undefined</code>. If the input is invalid, <code data-language="javascript">error</code> is assigned a <a href="#validationerror"><code data-language="javascript">ValidationError</code></a> object providing more information.</p> <p>The schema can be a plain JavaScript object where every key is assigned a <strong>joi</strong> type, or it can be a <strong>joi</strong> type directly:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>If the schema is a <strong>joi</strong> type, the <code data-language="javascript">schema.validate(value)</code> can be called directly on the type. When passing a non-type schema object, the module converts it internally to an object() type equivalent to:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">keys</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>When validating a schema:</p> <ul> <li> <p>Values (or keys in case of objects) are optional by default.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-c1">undefined</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// validates fine</span></pre></div> <p>To disallow this behavior, you can either set the schema as <code data-language="javascript">required()</code>, or set <code data-language="javascript">presence</code> to <code data-language="javascript">"required"</code> when passing <code data-language="javascript">options</code>:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-c1">undefined</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// or</span>
<span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-c1">undefined</span><span class="pl-kos">,</span> <span class="pl-c">/* options */</span> <span class="pl-kos">{</span> <span class="pl-c1">presence</span>: <span class="pl-s">"required"</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> </li> <li> <p>Strings are utf-8 encoded by default.</p> </li> <li> <p>Rules are defined in an additive fashion and evaluated in order, first the inclusive rules, then the exclusive rules.</p> </li> </ul> <h3 id="assertvalue-schema-message-options">
<code data-language="javascript">assert(value, schema, [message], [options])</code>
</h3> <p>Validates a value against a schema and <a href="#errors">throws</a> if validation fails where:</p> <ul> <li> <code data-language="javascript">value</code> - the value to validate.</li> <li> <code data-language="javascript">schema</code> - the validation schema. Can be a <strong>joi</strong> type object or a plain object where every key is assigned a <strong>joi</strong> type object using <a href="#compileschema-options"><code data-language="javascript">Joi.compile</code></a> (be careful of the cost of compiling repeatedly the same schemas).</li> <li> <code data-language="javascript">message</code> - optional message string prefix added in front of the error message. may also be an Error object.</li> <li> <code data-language="javascript">options</code> - optional options object, passed in to <a href="#anyvalidatevalue-options"><code data-language="javascript">any.validate</code></a> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">assert</span><span class="pl-kos">(</span><span class="pl-s">'x'</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h3 id="attemptvalue-schema-message-options">
<code data-language="javascript">attempt(value, schema, [message], [options])</code>
</h3> <p>Validates a value against a schema, returns valid object, and <a href="#errors">throws</a> if validation fails where:</p> <ul> <li> <code data-language="javascript">value</code> - the value to validate.</li> <li> <code data-language="javascript">schema</code> - the validation schema. Can be a <strong>joi</strong> type object or a plain object where every key is assigned a <strong>joi</strong> type object using <a href="#compileschema-options"><code data-language="javascript">Joi.compile</code></a> (be careful of the cost of compiling repeatedly the same schemas).</li> <li> <code data-language="javascript">message</code> - optional message string prefix added in front of the error message. may also be an Error object.</li> <li> <code data-language="javascript">options</code> - optional options object, passed in to <a href="#anyvalidatevalue-options"><code data-language="javascript">any.validate</code></a> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">attempt</span><span class="pl-kos">(</span><span class="pl-s">'x'</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// throws error</span>
<span class="pl-k">const</span> <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">attempt</span><span class="pl-kos">(</span><span class="pl-s">'4'</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// result -&gt; 4</span></pre></div> <h3 id="cacheprovisionoptions">
<code data-language="javascript">cache.provision([options])</code>
</h3> <p>Provisions a simple LRU cache for caching simple inputs (<code data-language="javascript">undefined</code>, <code data-language="javascript">null</code>, strings, numbers, and booleans) where:</p> <ul> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">max</code> - number of items to store in the cache before the least used items are dropped. Defaults to <code data-language="javascript">1000</code>.</li> </ul> </li> </ul> <h3 id="checkpreferencesprefs">
<code data-language="javascript">checkPreferences(prefs)</code>
</h3> <p>Checks if the provided preferences are valid where:</p> <ul> <li> <code data-language="javascript">prefs</code> - the preferences object to validate.</li> </ul> <p>Throws an exception if the <code data-language="javascript">prefs</code> object is invalid.</p> <p>The method is provided to perform inputs validation for the <a href="#anyvalidatevalue-options"><code data-language="javascript">any.validate()</code></a> and <a href="#anyvalidateasyncvalue-options"><code data-language="javascript">any.validateAsync()</code></a> methods. Validation is not performed automatically for performance reasons. Instead, manually validate the preferences passed once and reuse.</p> <h3 id="compileschema-options">
<code data-language="javascript">compile(schema, [options])</code>
</h3> <p>Converts literal schema definition to <strong>joi</strong> schema object (or returns the same back if already a <strong>joi</strong> schema object) where:</p> <ul> <li> <code data-language="javascript">schema</code> - the schema definition to compile.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">legacy</code> - if <code data-language="javascript">true</code> and the provided schema is (or contains parts) using an older version of <strong>joi</strong>, will return a compiled schema that is compatible with the older version. If <code data-language="javascript">false</code>, the schema is always compiled using the current version and if older schema components are found, an error is thrown.</li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">definition</span> <span class="pl-c1">=</span> <span class="pl-kos">[</span><span class="pl-s">'key'</span><span class="pl-kos">,</span> <span class="pl-c1">5</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-c1">b</span>: <span class="pl-kos">[</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span>a<span class="pl-c1">/</span></span><span class="pl-kos">,</span> <span class="pl-s">'boom'</span><span class="pl-kos">]</span> <span class="pl-kos">}</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">compile</span><span class="pl-kos">(</span><span class="pl-s1">definition</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// Same as:</span>

<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">alternatives</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">try</span><span class="pl-kos">(</span>
    <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'key'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">5</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
        <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">true</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">alternatives</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">try</span><span class="pl-kos">(</span>
            <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">pattern</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span>a<span class="pl-c1">/</span></span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'boom'</span><span class="pl-kos">)</span>
        <span class="pl-kos">)</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span>
<span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h3 id="defaultsmodifier">
<code data-language="javascript">defaults(modifier)</code>
</h3> <p>Creates a new <strong>joi</strong> instance that applies the provided modifier function to every new schemas where:</p> <ul> <li> <code data-language="javascript">modifier</code> - a function with signature <code data-language="javascript">function(schema)</code> that must return a schema object.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">custom</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">defaults</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">schema</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>

    <span class="pl-k">switch</span> <span class="pl-kos">(</span><span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-c1">type</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">case</span> <span class="pl-s">'string'</span>:
            <span class="pl-k">return</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">allow</span><span class="pl-kos">(</span><span class="pl-s">''</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-k">case</span> <span class="pl-s">'object'</span>:
            <span class="pl-k">return</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
        <span class="pl-k">default</span>:
            <span class="pl-k">return</span> <span class="pl-s1">schema</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-s1">custom</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>   <span class="pl-c">// Returns Joi.object().min(1)</span></pre></div> <h3 id="expressiontemplate-options---aliases-x">
 <code data-language="javascript">expression(template, [options])</code> - aliases: <code data-language="javascript">x</code> </h3> <p>Generates a dynamic expression using a template string where:</p> <ul> <li> <code data-language="javascript">template</code> - the template string using the <a href="#template-syntax">template syntax</a>.</li> <li> <code data-language="javascript">options</code> - optional settings used when creating internal references. Supports the same options as <a href="#refkey-options"><code data-language="javascript">ref()</code></a>.</li> </ul> <h4 id="template-syntax">
Template syntax</h4> <p>The template syntax uses <code data-language="javascript">{}</code> and <code data-language="javascript">{{}}</code> enclosed formulas to reference values as well as perform number and string operations. Single braces <code data-language="javascript">{}</code> leave the formula result as-is, while double braces <code data-language="javascript">{{}}</code> HTML-escape the formula result (unless the template is used for error messages and the <code data-language="javascript">errors.escapeHtml</code> preference flag is set to <code data-language="javascript">false</code>).</p> <p>If the formula is a single reference prefixed with <code data-language="javascript">:</code> (e.g. <code data-language="javascript">{:#ref}</code> or <code data-language="javascript">{{:#ref}}</code>), its values will be wrapped according to the <a href="#anyvalidatevalue-options"><code data-language="javascript">wrap</code></a> validation setting. The <code data-language="javascript">#label</code> variable is always wrapped according to the <code data-language="javascript">wrap</code> setting.</p> <p>The formula uses a simple mathematical syntax such as <code data-language="javascript">a + b * 2</code> where the named formula variables are references. Most references can be used as-is but some can create ambiguity with the formula syntax and must be enclosed in <code data-language="javascript">[]</code> braces (e.g. <code data-language="javascript">[.]</code>).</p> <p>The formulas can only operate on <code data-language="javascript">null</code>, booleans, numbers, and strings. If any operation involves a string, all other numbers will be casted to strings (as the internal implementation uses simple JavaScript operators). The supported operators are: <code data-language="javascript">^</code>, <code data-language="javascript">*</code>, <code data-language="javascript">/</code>, <code data-language="javascript">%</code>, <code data-language="javascript">+</code>, <code data-language="javascript">-</code>, <code data-language="javascript">&lt;</code>, <code data-language="javascript">&lt;=</code>, <code data-language="javascript">&gt;</code>, <code data-language="javascript">&gt;=</code>, <code data-language="javascript">==</code>, <code data-language="javascript">!=</code>, <code data-language="javascript">&amp;&amp;</code>, <code data-language="javascript">||</code>, and <code data-language="javascript">??</code> (in this order of precedence).</p> <p>The reference names can have one of the following prefixes:</p> <ul> <li> <code data-language="javascript">#</code> - indicates the variable references a local context value. For example, in errors this is the error context, while in rename operations, it is the regular expression matching groups.</li> <li> <code data-language="javascript">$</code> - indicates the variable references a global context value from the <code data-language="javascript">context</code> preference object provided as an option to the validation function or set using <a href="#anyprefsoptions--aliases-preferences-options"><code data-language="javascript">any.prefs()</code></a>.</li> <li>any other variable references a key within the current value being validated.</li> </ul> <p>The formula syntax also supports built-in functions:</p> <ul> <li> <code data-language="javascript">if(condition, then, otherwise)</code> - returns <code data-language="javascript">then</code> when <code data-language="javascript">condition</code> is truthy, otherwise <code data-language="javascript">otherwise</code>.</li> <li> <code data-language="javascript">length(item)</code> - return the length of an array or string, the number of keys of an object, otherwise <code data-language="javascript">null</code>.</li> <li> <code data-language="javascript">msg(code)</code> - embeds another error code message.</li> <li> <code data-language="javascript">number(value)</code> - cast value to a number.</li> </ul> <p>And the following constants:</p> <ul> <li><code data-language="javascript">null</code></li> <li><code data-language="javascript">true</code></li> <li><code data-language="javascript">false</code></li> </ul> <h3 id="extendextensions">
<code data-language="javascript">extend(...extensions)</code>
</h3> <p>Creates a new customized instance of the <strong>joi</strong> module where:</p> <ul> <li> <code data-language="javascript">extensions</code> - the extensions configurations as described in <a href="#extensions">Extensions</a>.</li> </ul> <p>Note that the original <strong>joi</strong> module is not modified by this.</p> <h3 id="inref-options">
<code data-language="javascript">in(ref, [options])</code>
</h3> <p>Creates a <a href="#refkey-options">reference</a> that when resolved, is used as an array of values to match against the rule, where:</p> <ul> <li> <code data-language="javascript">ref</code> - same as <a href="#refkey-options"><code data-language="javascript">Joi.ref()</code></a>.</li> <li> <code data-language="javascript">options</code> - same as <a href="#refkey-options"><code data-language="javascript">Joi.ref()</code></a>.</li> </ul> <p>Can only be used in rules that support in-references.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">in</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h3 id="iserrorerr">
<code data-language="javascript">isError(err)</code>
</h3> <p>Checks whether or not the provided argument is a validation error.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">isError</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-v">Error</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// returns false</span></pre></div> <h3 id="isexpressionexpression">
<code data-language="javascript">isExpression(expression)</code>
</h3> <p>Checks whether or not the provided argument is an expression.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">expression</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">x</span><span class="pl-kos">(</span><span class="pl-s">'{a}'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">isExpression</span><span class="pl-kos">(</span><span class="pl-s1">expression</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// returns true</span></pre></div> <h3 id="isrefref">
<code data-language="javascript">isRef(ref)</code>
</h3> <p>Checks whether or not the provided argument is a reference. Useful if you want to post-process error messages.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">ref</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">isRef</span><span class="pl-kos">(</span><span class="pl-s1">ref</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// returns true</span></pre></div> <h3 id="isschemaschema-options">
<code data-language="javascript">isSchema(schema, [options])</code>
</h3> <p>Checks whether or not the provided argument is a <strong>joi</strong> schema where:</p> <ul> <li> <code data-language="javascript">schema</code> - the value being checked.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">legacy</code> - if <code data-language="javascript">true</code>, will identify schemas from older versions of joi, otherwise will throw an error. Defaults to <code data-language="javascript">false</code>.</li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">isSchema</span><span class="pl-kos">(</span><span class="pl-s1">schema</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// returns true</span></pre></div> <h3 id="override">
<code data-language="javascript">override</code>
</h3> <p>A special value used with <code data-language="javascript">any.allow()</code>, <code data-language="javascript">any.invalid()</code>, and <code data-language="javascript">any.valid()</code> as the first value to reset any previously set values.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-c1">override</span><span class="pl-kos">,</span> <span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// Same as:</span>

<span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// Whereas:</span>

<span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// Is the same as:</span>

<span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h3 id="refkey-options">
<code data-language="javascript">ref(key, [options])</code>
</h3> <p>Generates a reference to the value of the named key. References are resolved at validation time and in order of dependency so that if one key validation depends on another, the dependent key is validated second after the reference is validated.</p> <p>References support the following arguments:</p> <ul> <li> <code data-language="javascript">key</code> - the reference target. References can point to sibling keys (<code data-language="javascript">a.b</code>) or ancestor keys (<code data-language="javascript">...a.b</code>) using the <code data-language="javascript">.</code> separator. If a <code data-language="javascript">key</code> starts with <code data-language="javascript">$</code> is signifies a context reference which is looked up in the <code data-language="javascript">context</code> option object. The <code data-language="javascript">key</code> can start with one or more separator characters to indicate a <a href="#Relative-references">relative starting point</a>.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">adjust</code> - a function with the signature <code data-language="javascript">function(value)</code> where <code data-language="javascript">value</code> is the resolved reference value and the return value is the adjusted value to use. For example <code data-language="javascript">(value) =&gt; value + 5</code> will add 5 to the resolved value. Note that the <code data-language="javascript">adjust</code> feature will not perform any type validation on the adjusted value and it must match the value expected by the rule it is used in. Cannot be used with <code data-language="javascript">map</code>.</li> <li> <code data-language="javascript">map</code> - an array of array pairs using the format <code data-language="javascript">[[key, value], [key, value]]</code> used to maps the resolved reference value to another value. If the resolved value is not in the map, it is returned as-is. Cannot be used with <code data-language="javascript">adjust</code>.</li> <li> <code data-language="javascript">prefix</code> - overrides default prefix characters key string prefix. Can be set to <code data-language="javascript">false</code> to disable all prefix parsing (treat keys as literal strings), or an object with specific overrides for: <ul> <li> <code data-language="javascript">global</code> - references to the globally provided <code data-language="javascript">context</code> preference. Defaults to <code data-language="javascript">'$'</code>.</li> <li> <code data-language="javascript">local</code> - references to error-specific or rule specific context. Defaults to <code data-language="javascript">'#'</code>.</li> <li> <code data-language="javascript">root</code> - references to the root value being validated. Defaults to <code data-language="javascript">'/'</code>.</li> </ul> </li> <li> <code data-language="javascript">separator</code> - overrides the default <code data-language="javascript">.</code> hierarchy separator. Set to <code data-language="javascript">false</code> to treat the <code data-language="javascript">key</code> as a literal value.</li> <li> <code data-language="javascript">ancestor</code> - if set to a number, sets the reference <a href="#Relative-references">relative starting point</a>. Cannot be combined with separator prefix characters. Defaults to the reference key prefix (or <code data-language="javascript">1</code> if none present).</li> <li> <code data-language="javascript">in</code> - creates an <a href="#inref-options">in-reference</a>.</li> <li> <code data-language="javascript">iterables</code> - when <code data-language="javascript">true</code>, the reference resolves by reaching into maps and sets.</li> <li> <code data-language="javascript">render</code> - when <code data-language="javascript">true</code>, the value of the reference is used instead of its name in error messages and template rendering. Defaults to <code data-language="javascript">false</code>.</li> </ul> </li> </ul> <p>Note that references can only be used where explicitly supported such as in <code data-language="javascript">valid()</code> or <code data-language="javascript">invalid()</code> rules. If upwards (parents) references are needed, use <a href="#objectassertref-schema-message"><code data-language="javascript">object.assert()</code></a>.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'b.c'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'$x'</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">await</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-c1">5</span><span class="pl-kos">,</span> <span class="pl-c1">b</span>: <span class="pl-kos">{</span> <span class="pl-c1">c</span>: <span class="pl-c1">5</span> <span class="pl-kos">}</span> <span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">context</span>: <span class="pl-kos">{</span> <span class="pl-c1">x</span>: <span class="pl-c1">5</span> <span class="pl-kos">}</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="relative-references">
Relative references</h4> <p>By default, a reference is relative to the parent of the current value (the reference key is lookup up inside the parent). This means that in the schema:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">x</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">b</span>: <span class="pl-kos">{</span>
            <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-c1">d</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'c'</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-c1">y</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span></pre></div> <p>The reference <code data-language="javascript">Joi.ref('c')</code> points to <code data-language="javascript">c</code> which is a sibling of <code data-language="javascript">d</code> - the reference starting point is <code data-language="javascript">d</code>'s parent which is <code data-language="javascript">b</code>. This schema means that <code data-language="javascript">d</code> must be equal to <code data-language="javascript">c</code>.</p> <p>In order to reference a parent peer, you can use a separator prefix where (using <code data-language="javascript">.</code> as separator):</p> <ul> <li> <code data-language="javascript">.</code> - self</li> <li> <code data-language="javascript">..</code> - parent (same as no prefix)</li> <li> <code data-language="javascript">...</code> - grandparent</li> <li> <code data-language="javascript">....</code> - great-grandparent</li> <li>etc.</li> </ul> <p>For example:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">x</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">b</span>: <span class="pl-kos">{</span>
            <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-c1">d</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'c'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-c1">e</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'...a'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-c1">f</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'....y'</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-c1">y</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span></pre></div> <p>Another way to specify the relative starting point is using the <code data-language="javascript">ancestor</code> option where:</p> <ul> <li>0 - self</li> <li>1 - parent (this is the default value if no key prefix is present)</li> <li>2 - grandparent</li> <li>3 - great-grandparent</li> <li>etc.</li> </ul> <p>For example:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">x</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">b</span>: <span class="pl-kos">{</span>
            <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-c1">d</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'c'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">ancestor</span>: <span class="pl-c1">1</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-c1">e</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">ancestor</span>: <span class="pl-c1">2</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-c1">f</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'y'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">ancestor</span>: <span class="pl-c1">3</span> <span class="pl-kos">}</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-c1">y</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span></pre></div> <p>Note that if a reference tries to reach beyond the value root, validation fails.</p> <p>To specify an absolute path from the value root, use the <code data-language="javascript">/</code> prefix:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">x</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">b</span>: <span class="pl-kos">{</span>
            <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'/x.a'</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div> <h3 id="version">
<code data-language="javascript">version</code>
</h3> <p>Property showing the current version of <strong>joi</strong> being used.</p> <h3 id="types">
<code data-language="javascript">types()</code>
</h3> <p>Returns an object where each key is a plain joi schema type. Useful for creating type shortcuts using deconstruction. Note that the types are already formed and do not need to be called as functions (e.g. <code data-language="javascript">string</code>, not <code data-language="javascript">string()</code>).</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-v">Joi</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'joi'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-kos">{</span> object<span class="pl-kos">,</span> string <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">types</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-s1">object</span><span class="pl-kos">.</span><span class="pl-en">keys</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">property</span>: <span class="pl-s1">string</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">4</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h3 id="any">
<code data-language="javascript">any</code>
</h3> <p>Generates a schema object that matches any data type.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">any</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">any</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anytype">
<code data-language="javascript">any.type</code>
</h4> <p>Gets the type of the schema.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-c1">type</span> <span class="pl-c1">===</span> <span class="pl-s">'string'</span><span class="pl-kos">;</span>   <span class="pl-c">// === true</span></pre></div> <h4 id="anyallowvalues">
<code data-language="javascript">any.allow(...values)</code>
</h4> <p>Allows values where:</p> <ul> <li> <code data-language="javascript">values</code> - one or more allowed values which can be of any type and will be matched against the validated value before applying any other rules. Supports <a href="#refkey-options">references</a> and <a href="#inref-options">in-references</a>. If the first value is <a href="#override"><code data-language="javascript">Joi.override</code></a>, will override any previously set values.</li> </ul> <p>Note that this list of allowed values is in <em>addition</em> to any other permitted values. To create an exclusive list of values, see <a href="#anyvalidvalues---aliases-equal"><code data-language="javascript">any.valid(value)</code></a>.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">allow</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">allow</span><span class="pl-kos">(</span><span class="pl-s">'b'</span><span class="pl-kos">,</span> <span class="pl-s">'B'</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <h4 id="anyaltertargets">
<code data-language="javascript">any.alter(targets)</code>
</h4> <p>Assign target alteration options to a schema that are applied when <a href="#anytailortargets"><code data-language="javascript">any.tailor()</code></a> is called where:</p> <ul> <li> <code data-language="javascript">targets</code> - an object where each key is a target name, and each value is a function with signature <code data-language="javascript">function(schema)</code> that returns a schema.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">key</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">alter</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
            <span class="pl-en">get</span>: <span class="pl-kos">(</span><span class="pl-s1">schema</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-en">post</span>: <span class="pl-kos">(</span><span class="pl-s1">schema</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">forbidden</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span><span class="pl-kos">)</span>  
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">getSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">tailor</span><span class="pl-kos">(</span><span class="pl-s">'get'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">postSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">tailor</span><span class="pl-kos">(</span><span class="pl-s">'post'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anyartifactid">
<code data-language="javascript">any.artifact(id)</code>
</h4> <p>Assigns the schema an artifact id which is included in the validation result if the rule passed validation where:</p> <ul> <li> <code data-language="javascript">id</code> - any value other than <code data-language="javascript">undefined</code> which will be returned as-is in the result <code data-language="javascript">artifacts</code> map.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-kos">[</span>
        <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">artifact</span><span class="pl-kos">(</span><span class="pl-s">'under'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">11</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">artifact</span><span class="pl-kos">(</span><span class="pl-s">'over'</span><span class="pl-kos">)</span>
    <span class="pl-kos">]</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <h4 id="anycachecache">
<code data-language="javascript">any.cache([cache])</code>
</h4> <p>Adds caching to the schema which will attempt to cache the validation results (success and failures) of incoming inputs where:</p> <ul> <li> <code data-language="javascript">cache</code> - an optional cache implementation compatible with the built-in cache provided by <a href="#cacheprovisionoptions"><code data-language="javascript">cache.provision()</code></a>. If no <code data-language="javascript">cache</code> is passed, a default cache is provisioned by using <a href="#cacheprovisionoptions"><code data-language="javascript">cache.provision()</code></a> internally.</li> </ul> <p>Note that deciding which inputs to cache is left to the cache implementation. The built-in cache will only store simple values such as <code data-language="javascript">undefined</code>, <code data-language="javascript">null</code>, strings, numbers, and booleans. Any changes to the schema after <code data-language="javascript">any.cache()</code> is called will disable caching on the resulting schema. this means that if <code data-language="javascript">.cache()</code> is not the last statement in a schema definition, caching will be disabled.</p> <p>To disable caching for an entire schema in runtime, pass the <code data-language="javascript">cache</code> preference set to <code data-language="javascript">false</code>.</p> <p>Caching ignores changes to runtime preference. This means that if you run <code data-language="javascript">schema.validate()</code> onces using one set of preferences, and then again using another set (for example, changing the language), the cached results will be based on the first set of preferences.</p> <p>Before using caching, it is recommended to consider the performance gain as it will not speed up every schema. Schemas using <code data-language="javascript">.valid()</code> list will not benefit from caching.</p> <p>Caching will be ignored when the schema uses references outside of the value scope.</p> <h5>
Cache interface</h5> <p>Custom cache implementation must implement the following interface:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">class</span> <span class="pl-kos">{</span>
    <span class="pl-en">set</span><span class="pl-kos">(</span><span class="pl-s1">key</span><span class="pl-kos">,</span> <span class="pl-s1">value</span><span class="pl-kos">)</span> <span class="pl-kos">{</span><span class="pl-kos">}</span>
    <span class="pl-en">get</span><span class="pl-kos">(</span><span class="pl-s1">key</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-k">return</span> <span class="pl-s1">found</span> ? <span class="pl-s1">value</span> : <span class="pl-c1">undefined</span><span class="pl-kos">;</span> <span class="pl-kos">}</span>
<span class="pl-kos">}</span></pre></div> <p>Note that <code data-language="javascript">key</code> and <code data-language="javascript">value</code> can be anything including objects, array, etc. It is recommended to limit the size of the cache when validating external data in order to prevent an attacker from increasing the process memory usage by sending large amount of different data to validate.</p> <h4 id="anycastto">
<code data-language="javascript">any.cast(to)</code>
</h4> <p>Casts the validated value to the specified type where:</p> <ul> <li> <code data-language="javascript">to</code> - the value target type. Each <strong>joi</strong> schema type supports its own set of cast targets: <ul> <li> <code data-language="javascript">'map'</code> - supported by the <code data-language="javascript">Joi.object()</code> type, converts the result to a <code data-language="javascript">Map</code> object containing the object key-value pairs.</li> <li> <code data-language="javascript">'number'</code> - supported by <code data-language="javascript">Joi.boolean()</code> and <code data-language="javascript">Joi.date()</code>, converts the result to a number. For dates, number of milliseconds since the epoch and for booleans, <code data-language="javascript">0</code> for <code data-language="javascript">false</code> and <code data-language="javascript">1</code> for <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">'set'</code> - supported by the <code data-language="javascript">Joi.array()</code> type, converts the result to a <code data-language="javascript">Set</code> object containing the array values.</li> <li> <code data-language="javascript">'string'</code> - supported by <code data-language="javascript">Joi.binary()</code>, <code data-language="javascript">Joi.boolean()</code>, <code data-language="javascript">Joi.date()</code>, and <code data-language="javascript">Joi.number()</code>, converts the result to a string.</li> </ul> </li> </ul> <h4 id="anyconcatschema">
<code data-language="javascript">any.concat(schema)</code>
</h4> <p>Returns a new type that is the result of adding the rules of one type to another where:</p> <ul> <li> <code data-language="javascript">schema</code> - a <strong>joi</strong> type to merge into the current schema. Can only be of the same type as the context type or <code data-language="javascript">any</code>. If applied to an <code data-language="javascript">any</code> type, the schema can be any other schema.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">a</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">b</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'b'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">ab</span> <span class="pl-c1">=</span> <span class="pl-s1">a</span><span class="pl-kos">.</span><span class="pl-en">concat</span><span class="pl-kos">(</span><span class="pl-s1">b</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anycustommethod-description">
<code data-language="javascript">any.custom(method, [description])</code>
</h4> <p>Adds a custom validation function to execute arbitrary code where:</p> <ul> <li> <code data-language="javascript">method</code> - the custom (synchronous only) validation function using signature <code data-language="javascript">function(value, helpers)</code> where: <ul> <li> <code data-language="javascript">value</code> - the value being validated.</li> <li> <code data-language="javascript">helpers</code> - an object with the following helpers: <ul> <li> <code data-language="javascript">schema</code> - the current schema.</li> <li> <code data-language="javascript">state</code> - the current validation state.</li> <li> <code data-language="javascript">prefs</code> - the current preferences.</li> <li> <code data-language="javascript">original</code> - the original value passed into validation before any conversions.</li> <li> <code data-language="javascript">error(code, [local])</code> - a method to generate error codes using a message code and optional local context.</li> <li> <code data-language="javascript">message(messages, [local])</code> - a method to generate an error with an internal <code data-language="javascript">'custom'</code> error code and the provided messages object to use as override. Note that this is much slower than using the preferences <code data-language="javascript">messages</code> option but is much simpler to write when performance is not important.</li> <li> <code data-language="javascript">warn(code, [local])</code> - a method to add a warning using a message code and optional local context.</li> </ul> </li> </ul> </li> </ul> <p>Note: if the method fails to return a value, the value will be unset or returned as <code data-language="javascript">undefined</code>.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-en">method</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">,</span> <span class="pl-s1">helpers</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>

    <span class="pl-c">// Throw an error (will be replaced with 'any.custom' error)</span>
    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">value</span> <span class="pl-c1">===</span> <span class="pl-s">'1'</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-v">Error</span><span class="pl-kos">(</span><span class="pl-s">'nope'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>

    <span class="pl-c">// Replace value with a new value</span>
    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">value</span> <span class="pl-c1">===</span> <span class="pl-s">'2'</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-s">'3'</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>

    <span class="pl-c">// Use error to return an existing error code</span>
    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">value</span> <span class="pl-c1">===</span> <span class="pl-s">'4'</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-s1">helpers</span><span class="pl-kos">.</span><span class="pl-en">error</span><span class="pl-kos">(</span><span class="pl-s">'any.invalid'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>

    <span class="pl-c">// Override value with undefined to unset</span>
    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">value</span> <span class="pl-c1">===</span> <span class="pl-s">'5'</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-k">return</span> <span class="pl-c1">undefined</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span>

    <span class="pl-c">// Return the value unchanged</span>
    <span class="pl-k">return</span> <span class="pl-s1">value</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">custom</span><span class="pl-kos">(</span><span class="pl-en">method</span><span class="pl-kos">,</span> <span class="pl-s">'custom validation'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#anycustom"><code data-language="javascript">any.custom</code></a></p> <h4 id="anydefaultvalue">
<code data-language="javascript">any.default([value])</code>
</h4> <p>Sets a default value if the original value is <code data-language="javascript">undefined</code> where:</p> <ul> <li> <code data-language="javascript">value</code> - the default value. One of: <ul> <li>a literal value (string, number, object, etc.).</li> <li>a <a href="#refkey-options">references</a>.</li> <li>a function which returns the default value using the signature <code data-language="javascript">function(parent, helpers)</code> where: <ul> <li> <code data-language="javascript">parent</code> - a clone of the object containing the value being validated. Note that since specifying a <code data-language="javascript">parent</code> argument performs cloning, do not declare format arguments if you are not using them.</li> <li> <code data-language="javascript">helpers</code> - same as those described in <a href="#anycustommethod_description"><code data-language="javascript">any.custom()</code></a>.</li> </ul> </li> </ul> </li> </ul> <p>When called without any <code data-language="javascript">value</code> on an object schema type, a default value will be automatically generated based on the default values of the object keys.</p> <p>Note that if <code data-language="javascript">value</code> is an object, any changes to the object after <code data-language="javascript">default()</code> is called will change the reference and any future assignment. Use a function when setting a dynamic value (e.g. the current time).</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-en">generateUsername</span> <span class="pl-c1">=</span> <span class="pl-kos">(</span><span class="pl-s1">parent</span><span class="pl-kos">,</span> <span class="pl-s1">helpers</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>

  <span class="pl-k">return</span> <span class="pl-s1">parent</span><span class="pl-kos">.</span><span class="pl-c1">firstname</span><span class="pl-kos">.</span><span class="pl-en">toLowerCase</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-c1">+</span> <span class="pl-s">'-'</span> <span class="pl-c1">+</span> <span class="pl-s1">parent</span><span class="pl-kos">.</span><span class="pl-c1">lastname</span><span class="pl-kos">.</span><span class="pl-en">toLowerCase</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-en">generateUsername</span><span class="pl-kos">.</span><span class="pl-c1">description</span> <span class="pl-c1">=</span> <span class="pl-s">'generated username'</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">username</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">default</span><span class="pl-kos">(</span><span class="pl-en">generateUsername</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">firstname</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">lastname</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">created</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">default</span><span class="pl-kos">(</span><span class="pl-v">Date</span><span class="pl-kos">.</span><span class="pl-c1">now</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">status</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">default</span><span class="pl-kos">(</span><span class="pl-s">'registered'</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-kos">{</span> value <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">firstname</span>: <span class="pl-s">'Jane'</span><span class="pl-kos">,</span>
    <span class="pl-c1">lastname</span>: <span class="pl-s">'Doe'</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// value.status === 'registered'</span>
<span class="pl-c">// value.username === 'jane-doe'</span>
<span class="pl-c">// value.created will be the time of validation</span></pre></div> <p>Possible validation errors: <a href="#anydefault"><code data-language="javascript">any.default</code></a></p> <h4 id="anydescribe">
<code data-language="javascript">any.describe()</code>
</h4> <p>Returns an object that represents the internal configuration of the schema. Useful for debugging and exposing a schema's configuration to other systems, like valid values in a user interface.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'foo'</span><span class="pl-kos">,</span> <span class="pl-s">'bar'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">log</span><span class="pl-kos">(</span><span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">describe</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Results in:</p> <pre data-language="javascript"><code data-language="javascript">{ type: 'any',
  flags: { only: true },
  valids: [ 'foo', 'bar' ] }
</code></pre> <h4 id="anydescriptiondesc">
<code data-language="javascript">any.description(desc)</code>
</h4> <p>Annotates the key where:</p> <ul> <li> <code data-language="javascript">desc</code> - the description string.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">description</span><span class="pl-kos">(</span><span class="pl-s">'this key will match anything you give it'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anyemptyschema">
<code data-language="javascript">any.empty(schema)</code>
</h4> <p>Considers anything that matches the schema to be empty (<code data-language="javascript">undefined</code>).</p> <ul> <li> <code data-language="javascript">schema</code> - any object or <strong>joi</strong> schema to match. An undefined schema unsets that rule.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">let</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">empty</span><span class="pl-kos">(</span><span class="pl-s">''</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">''</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// returns { error: null, value: undefined }</span>
<span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">empty</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">''</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// returns { error: "value" is not allowed to be empty, value: '' }</span></pre></div> <h4 id="anyerrorerr">
<code data-language="javascript">any.error(err)</code>
</h4> <p>Overrides the default <strong>joi</strong> error with a custom error if the rule fails where:</p> <ul> <li> <code data-language="javascript">err</code> can be: <ul> <li>an instance of <code data-language="javascript">Error</code> - the override error.</li> <li>a function with the signature <code data-language="javascript">function(errors)</code>, where <code data-language="javascript">errors</code> is an array of validation reports and it returns either a single <code data-language="javascript">Error</code> or an array of validation reports.</li> </ul> </li> </ul> <p>Do not use this method if you are simply trying to override the error message - use <code data-language="javascript">any.message()</code> or <code data-language="javascript">any.messages()</code> instead. This method is designed to override the <strong>joi</strong> validation error and return the exact override provided. It is useful when you want to return the result of validation directly (e.g. when using with a <strong>hapi</strong> server) and want to return a different HTTP error code than 400.</p> <p>Note that if you provide an <code data-language="javascript">Error</code>, it will be returned as-is, unmodified and undecorated with any of the normal error properties. If validation fails and another error is found before the error override, that error will be returned and the override will be ignored (unless the <code data-language="javascript">abortEarly</code> option has been set to <code data-language="javascript">false</code>). If you set multiple errors on a single schema, only the last error is used.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">error</span><span class="pl-kos">(</span><span class="pl-k">new</span> <span class="pl-v">Error</span><span class="pl-kos">(</span><span class="pl-s">'Was REALLY expecting a string'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-c1">3</span><span class="pl-kos">)</span><span class="pl-kos">;</span>     <span class="pl-c">// returns Error('Was REALLY expecting a string')</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">foo</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">0</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">error</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">errors</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-k">new</span> <span class="pl-v">Error</span><span class="pl-kos">(</span><span class="pl-s">'"foo" requires a positive number'</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-c1">-</span><span class="pl-c1">2</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>    <span class="pl-c">// returns new Error('"foo" requires a positive number')</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">foo</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">0</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">error</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">errors</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>

        <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-v">Error</span><span class="pl-kos">(</span><span class="pl-s">'found errors with '</span> <span class="pl-c1">+</span> <span class="pl-s1">errors</span><span class="pl-kos">.</span><span class="pl-en">map</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">err</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-s">`<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">err</span><span class="pl-kos">.</span><span class="pl-c1">local</span><span class="pl-kos">.</span><span class="pl-c1">key</span><span class="pl-kos">}</span></span>(<span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">err</span><span class="pl-kos">.</span><span class="pl-c1">local</span><span class="pl-kos">.</span><span class="pl-c1">limit</span><span class="pl-kos">}</span></span>) with value <span class="pl-s1"><span class="pl-kos">${</span><span class="pl-s1">err</span><span class="pl-kos">.</span><span class="pl-c1">local</span><span class="pl-kos">.</span><span class="pl-c1">value</span><span class="pl-kos">}</span></span>`</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">join</span><span class="pl-kos">(</span><span class="pl-s">' and '</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-c1">-</span><span class="pl-c1">2</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>    <span class="pl-c">// returns new Error('found errors with foo(0) with value -2')</span></pre></div> <h4 id="anyexampleexample-options">
<code data-language="javascript">any.example(example, [options])</code>
</h4> <p>Adds examples to the schema where:</p> <ul> <li> <code data-language="javascript">example</code> - adds an example. Note that no validation is performed on the value.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">override</code> - if <code data-language="javascript">true</code>, replaces any existing examples. Defaults to <code data-language="javascript">false</code>.</li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">4</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">example</span><span class="pl-kos">(</span><span class="pl-s">'abcd'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anyexternalmethod-description">
<code data-language="javascript">any.external(method, [description])</code>
</h4> <p>Adds an external validation rule where:</p> <ul> <li> <code data-language="javascript">method</code> - an async or sync function with signature <code data-language="javascript">function(value, helpers)</code> which can either return a replacement value, <code data-language="javascript">undefined</code> to indicate no change, or throw an error, where: <ul> <li> <code data-language="javascript">value</code> - a clone of the object containing the value being validated.</li> <li> <code data-language="javascript">helpers</code> - an object with the following helpers: <ul> <li> <code data-language="javascript">schema</code> - the current schema.</li> <li> <code data-language="javascript">linked</code> - if the schema is a link, the schema it links to.</li> <li> <code data-language="javascript">state</code> - the current validation state.</li> <li> <code data-language="javascript">prefs</code> - the current preferences.</li> <li> <code data-language="javascript">original</code> - the original value passed into validation before any conversions.</li> <li> <code data-language="javascript">error(code, [local])</code> - a method to generate error codes using a message code and optional local context.</li> <li> <code data-language="javascript">message(messages, [local])</code> - a method to generate an error with an internal <code data-language="javascript">'external'</code> error code and the provided messages object to use as override. Note that this is much slower than using the preferences <code data-language="javascript">messages</code> option but is much simpler to write when performance is not important.</li> <li> <code data-language="javascript">warn(code, [local])</code> - a method to add a warning using a message code and optional local context.</li> </ul> </li> </ul> </li> <li> <code data-language="javascript">description</code> - optional string used to document the purpose of the method.</li> </ul> <p>Note that external validation rules are only called after the all other validation rules for the entire schema (from the value root) are checked. This means that any changes made to the value by the external rules are not available to any other validation rules during the non-external validation phase.</p> <p>If schema validation failed, no external validation rules are called.</p> <h4 id="anyextractpath">
<code data-language="javascript">any.extract(path)</code>
</h4> <p>Returns a sub-schema based on a path of object keys or schema ids where:</p> <ul> <li> <code data-language="javascript">path</code> - a dot <code data-language="javascript">.</code> separated path string or a pre-split array of path keys. The keys must match the sub-schema id or object key (if no id was explicitly set).</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">foo</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">bar</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">number</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">extract</span><span class="pl-kos">(</span><span class="pl-s">'foo.bar'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">//or</span>
<span class="pl-k">const</span> <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">extract</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-s">'foo'</span><span class="pl-kos">,</span> <span class="pl-s">'bar'</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">//same as number</span></pre></div> <h4 id="anyfailovervalue">
<code data-language="javascript">any.failover(value)</code>
</h4> <p>Sets a failover value if the original value fails passing validation where:</p> <ul> <li> <code data-language="javascript">value</code> - the failover value. <code data-language="javascript">value</code> supports <a href="#refkey-options">references</a>. <code data-language="javascript">value</code> may be assigned a function which returns the default value. If <code data-language="javascript">value</code> is specified as a function that accepts a single parameter, that parameter will be a context object that can be used to derive the resulting value.</li> </ul> <p>Note that if <code data-language="javascript">value</code> is an object, any changes to the object after <code data-language="javascript">failover()</code> is called will change the reference and any future assignment. Use a function when setting a dynamic value (e.g. the current time).</p> <p>Using a function with a single argument performs some internal cloning which has a performance impact. If you do not need access to the context, define the function without any arguments.</p> <p>Possible validation errors: <a href="#anyfailover"><code data-language="javascript">any.failover</code></a></p> <h4 id="anyforbidden">
<code data-language="javascript">any.forbidden()</code>
</h4> <p>Marks a key as forbidden which will not allow any value except <code data-language="javascript">undefined</code>. Used to explicitly forbid keys.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">forbidden</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#anyunknown"><code data-language="javascript">any.unknown</code></a></p> <h4 id="anyforkpaths-adjuster">
<code data-language="javascript">any.fork(paths, adjuster)</code>
</h4> <p>Returns a new schema where each of the path keys listed have been modified where:</p> <ul> <li> <code data-language="javascript">paths</code> - an array of key strings, a single key string, or an array of arrays of pre-split key strings. Key string paths use dot <code data-language="javascript">.</code> to indicate key hierarchy.</li> <li> <code data-language="javascript">adjuster</code> - a function using the signature <code data-language="javascript">function(schema)</code> which must return a modified schema. For example, <code data-language="javascript">(schema) =&gt; schema.required()</code>.</li> </ul> <p>The method does not modify the original schema.</p> <h4 id="anyidid">
<code data-language="javascript">any.id(id)</code>
</h4> <p>Sets a schema id for reaching into the schema via <a href="#anyextractpath"><code data-language="javascript">any.extract()</code></a> where:</p> <ul> <li> <code data-language="javascript">id</code> - an alphanumeric string (plus <code data-language="javascript">_</code>) used to identify the schema.</li> </ul> <p>If no id is set, the schema id defaults to the object key it is associated with. If the schema is used in an array or alternatives type and no id is set, the schema is unreachable.</p> <h4 id="anyinvalidvalues---aliases-disallow-not">
 <code data-language="javascript">any.invalid(...values)</code> - aliases: <code data-language="javascript">disallow</code>, <code data-language="javascript">not</code> </h4> <p>Disallows values where:</p> <ul> <li> <code data-language="javascript">values</code> - the forbidden values which can be of any type and will be matched against the validated value before applying any other rules. Supports <a href="#refkey-options">references</a> and <a href="#inref-options">in-references</a>. If the first value is <a href="#override"><code data-language="javascript">Joi.override</code></a>, will override any previously set values.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">invalid</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">invalid</span><span class="pl-kos">(</span><span class="pl-s">'b'</span><span class="pl-kos">,</span> <span class="pl-s">'B'</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#anyinvalid"><code data-language="javascript">any.invalid</code></a></p> <h4 id="anykeep">
<code data-language="javascript">any.keep()</code>
</h4> <p>Same as <a href="#anyruleoptions"><code data-language="javascript">rule({ keep: true })</code></a>.</p> <p>Note that <code data-language="javascript">keep()</code> will terminate the current ruleset and cannot be followed by another rule option. Use <a href="#anyruleoptions"><code data-language="javascript">rule()</code></a> to apply multiple rule options.</p> <h4 id="anylabelname">
<code data-language="javascript">any.label(name)</code>
</h4> <p>Overrides the key name in error messages.</p> <ul> <li> <code data-language="javascript">name</code> - the name of the key.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">first_name</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">label</span><span class="pl-kos">(</span><span class="pl-s">'First Name'</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <h4 id="anymessagemessage">
<code data-language="javascript">any.message(message)</code>
</h4> <p>Same as <a href="#anyruleoptions"><code data-language="javascript">rule({ message })</code></a>.</p> <p>Note that <code data-language="javascript">message()</code> will terminate the current ruleset and cannot be followed by another rule option. Use <a href="#anyruleoptions"><code data-language="javascript">rule()</code></a> to apply multiple rule options.</p> <h4 id="anymessagesmessages">
<code data-language="javascript">any.messages(messages)</code>
</h4> <p>Same as <a href="#anyprefsoptions---aliases-preferences-options"><code data-language="javascript">any.prefs({ messages })</code></a>.</p> <p>Note that while <a href="#anymessagemessage"><code data-language="javascript">any.message()</code></a> applies only to the last rule or ruleset, <code data-language="javascript">any.messages()</code> applies to the entire schema.</p> <h4 id="anymetameta">
<code data-language="javascript">any.meta(meta)</code>
</h4> <p>Attaches metadata to the key where:</p> <ul> <li> <code data-language="javascript">meta</code> - the meta object to attach.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">meta</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">index</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anynotenotes">
<code data-language="javascript">any.note(...notes)</code>
</h4> <p>Annotates the key where:</p> <ul> <li> <code data-language="javascript">notes</code> - the note string or multiple notes as individual arguments.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">note</span><span class="pl-kos">(</span><span class="pl-s">'this is special'</span><span class="pl-kos">,</span> <span class="pl-s">'this is important'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anyonly">
<code data-language="javascript">any.only()</code>
</h4> <p>Requires the validated value to match of the provided <code data-language="javascript">any.allow()</code> values. It has no effect when called together with <code data-language="javascript">any.valid()</code> since it already sets the requirements. When used with <code data-language="javascript">any.allow()</code> it converts it to an <code data-language="javascript">any.valid()</code>.</p> <h4 id="anyoptional">
<code data-language="javascript">any.optional()</code>
</h4> <p>Marks a key as optional which will allow <code data-language="javascript">undefined</code> as values. Used to annotate the schema for readability as all keys are optional by default.</p> <p>Note: this does not allow a <code data-language="javascript">null</code> value. To do that, use <a href="#anyallowvalue"><code data-language="javascript">any.allow(value)</code></a>. Or both!</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">optional</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anyprefsoptions---aliases-preferences-options">
 <code data-language="javascript">any.prefs(options)</code> - aliases: <code data-language="javascript">preferences</code>, <code data-language="javascript">options</code> </h4> <p>Overrides the global <code data-language="javascript">validate()</code> options for the current key and any sub-key where:</p> <ul> <li> <code data-language="javascript">options</code> - an object with the same optional keys as <a href="#anyvalidatevalue-options"><code data-language="javascript">any.validate()</code></a>.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">prefs</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">convert</span>: <span class="pl-c1">false</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anypresencemode">
<code data-language="javascript">any.presence(mode)</code>
</h4> <p>Sets the presence mode for the schema where:</p> <ul> <li> <code data-language="javascript">mode</code> - can be one of <code data-language="javascript">'optional'</code>, <code data-language="javascript">'required'</code>, or <code data-language="javascript">'forbidden'</code> </li> </ul> <p>Same as calling <code data-language="javascript">any.optional()</code>, <code data-language="javascript">any.required()</code>, or <code data-language="javascript">any.forbidden()</code>.</p> <h4 id="anyrawenabled">
<code data-language="javascript">any.raw([enabled])</code>
</h4> <p>Outputs the original untouched value instead of the casted value where:</p> <ul> <li> <code data-language="javascript">enabled</code> - if <code data-language="javascript">true</code>, the original result is returned, otherwise the validated value. Defaults to <code data-language="javascript">true</code>.</li> </ul> <p>Note that the raw value is only applied after validation and any references to the value use the validated value, not the raw value.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">timestampSchema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">timestamp</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">timestampSchema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'12376834097810'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// { error: null, value: Sat Mar 17 2362 04:28:17 GMT-0500 (CDT) }</span>

<span class="pl-k">const</span> <span class="pl-s1">rawTimestampSchema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">timestamp</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">raw</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">rawTimestampSchema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'12376834097810'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// { error: null, value: '12376834097810' }</span></pre></div> <h4 id="anyrequired---aliases-exist">
 <code data-language="javascript">any.required()</code> - aliases: <code data-language="javascript">exist</code> </h4> <p>Marks a key as required which will not allow <code data-language="javascript">undefined</code> as value. All keys are optional by default.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#anyrequired"><code data-language="javascript">any.required</code></a></p> <h4 id="anyresultmode">
<code data-language="javascript">any.result(mode)</code>
</h4> <p>Set the result mode where:</p> <ul> <li> <code data-language="javascript">mode</code> - one of <code data-language="javascript">'raw'</code> (same as <code data-language="javascript">any.raw()</code>) or <code data-language="javascript">'strip'</code> (same as <code data-language="javascript">any.strip()</code>).</li> </ul> <h4 id="anyruleoptions">
<code data-language="javascript">any.rule(options)</code>
</h4> <p>Applies a set of rule options to the current ruleset or last rule added where:</p> <ul> <li> <code data-language="javascript">options</code> - the rules to apply where: <ul> <li> <code data-language="javascript">keep</code> - if <code data-language="javascript">true</code>, the rules will not be replaced by the same unique rule later. For example, <code data-language="javascript">Joi.number().min(1).rule({ keep: true }).min(2)</code> will keep both <code data-language="javascript">min()</code> rules instead of the later rule overriding the first. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">message</code> - a single message string or a messages object where each key is an error code and corresponding message string as value. The object is the same as the <code data-language="javascript">messages</code> used as an option in <a href="#anyvalidatevalue-options"><code data-language="javascript">any.validate()</code></a>. The strings can be plain messages or a message template.</li> <li> <code data-language="javascript">warn</code> - if <code data-language="javascript">true</code>, turns any error generated by the ruleset to warnings.</li> </ul> </li> </ul> <p>When applying rule options, the last rule (e.g. <code data-language="javascript">min()</code>) is used unless there is an active ruleset defined (e.g. <code data-language="javascript">$.min().max()</code>) in which case the options are applied to all the provided rules. Once <code data-language="javascript">rule()</code> is called, the previous rules can no longer be modified and any active ruleset is terminated.</p> <p>Rule modifications can only be applied to supported rules. Most of the <code data-language="javascript">any</code> methods do not support rule modifications because they are implemented using schema flags (e.g. <code data-language="javascript">required()</code>) or special internal implementation (e.g. <code data-language="javascript">valid()</code>). In those cases, use the <code data-language="javascript">any.messages()</code> method to override the error codes for the errors you want to customize.</p> <h4 id="anyruleset---aliases-">
 <code data-language="javascript">any.ruleset</code> - aliases: <code data-language="javascript">$</code> </h4> <p>Starts a ruleset in order to apply multiple <a href="#anyruleoptions">rule options</a>. The set ends when <a href="#anyruleoptions"><code data-language="javascript">rule()</code></a>, <a href="#anykeep"><code data-language="javascript">keep()</code></a>, <a href="#anymessagemessage"><code data-language="javascript">message()</code></a>, or <a href="#anywarn"><code data-language="javascript">warn()</code></a> is called.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-c1">ruleset</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">rule</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">message</span>: <span class="pl-s">'Number must be between 1 and 10'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-c1">$</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">rule</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">message</span>: <span class="pl-s">'Number must be between 1 and 10'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anysharedschema">
<code data-language="javascript">any.shared(schema)</code>
</h4> <p>Registers a schema to be used by descendants of the current schema in named link references, where:</p> <ul> <li> <code data-language="javascript">schema</code> - a <strong>joi</strong> schema with an id.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript">  <span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
      <span class="pl-c1">a</span>: <span class="pl-kos">[</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">link</span><span class="pl-kos">(</span><span class="pl-s">'#x'</span><span class="pl-kos">)</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
      <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">link</span><span class="pl-kos">(</span><span class="pl-s">'#type.a'</span><span class="pl-kos">)</span>
  <span class="pl-kos">}</span><span class="pl-kos">)</span>
      <span class="pl-kos">.</span><span class="pl-en">shared</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">id</span><span class="pl-kos">(</span><span class="pl-s">'x'</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
      <span class="pl-kos">.</span><span class="pl-en">id</span><span class="pl-kos">(</span><span class="pl-s">'type'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anystrictisstrict">
<code data-language="javascript">any.strict(isStrict)</code>
</h4> <p>Strict mode sets the <code data-language="javascript">options.convert</code> options to <code data-language="javascript">false</code> which prevent type casting for the current key and any child keys.</p> <ul> <li> <code data-language="javascript">isStrict</code> - whether strict mode is enabled or not. Defaults to true.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">strict</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anystripenabled">
<code data-language="javascript">any.strip([enabled])</code>
</h4> <p>Marks a key to be removed from a resulting object or array after validation to sanitize the output where:</p> <ul> <li> <code data-language="javascript">enabled</code> - if <code data-language="javascript">true</code>, the value is stripped, otherwise the validated value is retained. Defaults to <code data-language="javascript">true</code>.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">username</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">password</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">strip</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">username</span>: <span class="pl-s">'test'</span><span class="pl-kos">,</span> <span class="pl-c1">password</span>: <span class="pl-s">'hunter2'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// result.value = { username: 'test' }</span>

<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">strip</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-s">'one'</span><span class="pl-kos">,</span> <span class="pl-s">'two'</span><span class="pl-kos">,</span> <span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-c1">false</span><span class="pl-kos">,</span> <span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">2</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// result.value = ['one', 'two']</span></pre></div> <h4 id="anytagtags">
<code data-language="javascript">any.tag(...tags)</code>
</h4> <p>Annotates the key where:</p> <ul> <li> <code data-language="javascript">tags</code> - the tag string or multiple tags (each as an argument).</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">tag</span><span class="pl-kos">(</span><span class="pl-s">'api'</span><span class="pl-kos">,</span> <span class="pl-s">'user'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anytailortargets">
<code data-language="javascript">any.tailor(targets)</code>
</h4> <p>Applies any assigned target alterations to a copy of the schema that were applied via <a href="#anyaltertargets"><code data-language="javascript">any.alter()</code></a> where:</p> <ul> <li> <code data-language="javascript">targets</code> - a single target string or array or target strings to apply.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">key</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">alter</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
            <span class="pl-en">get</span>: <span class="pl-kos">(</span><span class="pl-s1">schema</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-en">post</span>: <span class="pl-kos">(</span><span class="pl-s1">schema</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">forbidden</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span><span class="pl-kos">)</span>  
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">getSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">tailor</span><span class="pl-kos">(</span><span class="pl-s">'get'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">postSchema</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">tailor</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-s">'post'</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anyunitname">
<code data-language="javascript">any.unit(name)</code>
</h4> <p>Annotates the key where:</p> <ul> <li> <code data-language="javascript">name</code> - the unit name of the value.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unit</span><span class="pl-kos">(</span><span class="pl-s">'milliseconds'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="anyvalidvalues---aliases-equal">
 <code data-language="javascript">any.valid(...values)</code> - aliases: <code data-language="javascript">equal</code> </h4> <p>Adds the provided values into the allowed values list and marks them as the only valid values allowed where:</p> <ul> <li> <code data-language="javascript">values</code> - one or more allowed values which can be of any type and will be matched against the validated value before applying any other rules. Supports <a href="#refkey-options">references</a> and <a href="#inref-options">in-references</a>. If the first value is <a href="#override"><code data-language="javascript">Joi.override</code></a>, will override any previously set values. If the only value is <a href="#override"><code data-language="javascript">Joi.override</code></a>, will also remove the <code data-language="javascript">only</code> flag from the schema.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'b'</span><span class="pl-kos">,</span> <span class="pl-s">'B'</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#anyonly"><code data-language="javascript">any.only</code></a></p> <h4 id="anyvalidatevalue-options">
<code data-language="javascript">any.validate(value, [options])</code>
</h4> <p>Validates a value using the current schema and options where:</p> <ul> <li> <code data-language="javascript">value</code> - the value being validated.</li> <li> <code data-language="javascript">options</code> - an optional object with the following optional keys: <ul> <li> <code data-language="javascript">abortEarly</code> - when <code data-language="javascript">true</code>, stops validation on the first error, otherwise returns all the errors found. Defaults to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">allowUnknown</code> - when <code data-language="javascript">true</code>, allows object to contain unknown keys which are ignored. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">cache</code> - when <code data-language="javascript">true</code>, schema caching is enabled (for schemas with explicit caching rules). Default to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">context</code> - provides an external data set to be used in <a href="#refkey-options">references</a>. Can only be set as an external option to <code data-language="javascript">validate()</code> and not using <code data-language="javascript">any.prefs()</code>.</li> <li> <code data-language="javascript">convert</code> - when <code data-language="javascript">true</code>, attempts to cast values to the required types (e.g. a string to a number). Defaults to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">dateFormat</code> - sets the string format used when converting dates to strings in error messages and casting. Options are: <ul> <li> <code data-language="javascript">'date'</code> - date string.</li> <li> <code data-language="javascript">'iso'</code> - date time ISO string. This is the default.</li> <li> <code data-language="javascript">'string'</code> - JS default date time string.</li> <li> <code data-language="javascript">'time'</code> - time string.</li> <li> <code data-language="javascript">'utc'</code> - UTC date time string.</li> </ul> </li> <li> <code data-language="javascript">debug</code> - when <code data-language="javascript">true</code>, valid results and throw errors are decorated with a <code data-language="javascript">debug</code> property which includes an array of the validation steps used to generate the returned result. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">errors</code> - error formatting settings: <ul> <li> <code data-language="javascript">escapeHtml</code> - when <code data-language="javascript">true</code>, error message templates will escape special characters to HTML entities, for security purposes. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">label</code> - defines the value used to set the <code data-language="javascript">label</code> context variable: <ul> <li> <code data-language="javascript">'path'</code> - the full path to the value being validated. This is the default value.</li> <li> <code data-language="javascript">'key'</code> - the key of the value being validated.</li> <li> <code data-language="javascript">false</code> - remove any label prefix from error message, including the <code data-language="javascript">""</code>.</li> </ul> </li> <li> <code data-language="javascript">language</code> - the preferred language code for error messages. The value is matched against keys at the root of the <code data-language="javascript">messages</code> object, and then the error code as a child key of that. Can be a reference to the value, global context, or local context which is the root value passed to the validation function. Note that references to the value are usually not what you want as they move around the value structure relative to where the error happens. Instead, either use the global context, or the absolute value (e.g. <code data-language="javascript">Joi.ref('/variable')</code>);</li> <li> <code data-language="javascript">render</code> - when <code data-language="javascript">false</code>, skips rendering error templates. Useful when error messages are generated elsewhere to save processing time. Defaults to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">stack</code> - when <code data-language="javascript">true</code>, the main error will possess a stack trace, otherwise it will be disabled. Defaults to <code data-language="javascript">false</code> for performance reasons. Has no effect on platforms other than V8/node.js as it uses the <a href="https://v8.dev/docs/stack-trace-api" rel="nofollow">Stack trace API</a>.</li> <li> <code data-language="javascript">wrap</code> - overrides the way values are wrapped (e.g. <code data-language="javascript">[]</code> around arrays, <code data-language="javascript">""</code> around labels and variables prefixed with <code data-language="javascript">:</code>). Each key can be set to a string with one (same character before and after the value) or two characters (first character before and second character after), or <code data-language="javascript">false</code> to disable wrapping: <ul> <li> <code data-language="javascript">label</code> - the characters used around <code data-language="javascript">{#label}</code> references. Defaults to <code data-language="javascript">'"'</code>.</li> <li> <code data-language="javascript">array</code> - the characters used around array values. Defaults to <code data-language="javascript">'[]'</code>.</li> <li> <code data-language="javascript">string</code> - the characters used around each array string values. Defaults to <code data-language="javascript">false</code>.</li> </ul> </li> <li> <code data-language="javascript">wrapArrays</code> - if <code data-language="javascript">true</code>, array values in error messages are wrapped in <code data-language="javascript">[]</code>. Defaults to <code data-language="javascript">true</code>.</li> </ul> </li> <li> <code data-language="javascript">externals</code> - if <code data-language="javascript">false</code>, the external rules set with <a href="#anyexternalmethod-description"><code data-language="javascript">any.external()</code></a> are ignored, which is required to ignore any external validations in synchronous mode (or an exception is thrown). Defaults to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">messages</code> - overrides individual error messages. Defaults to no override (<code data-language="javascript">{}</code>). Use the <code data-language="javascript">'*'</code> error code as a catch-all for all error codes that do not have a message provided in the override. Messages use the same rules as <a href="#template-syntax">templates</a>. Variables in double braces <code data-language="javascript">{{var}}</code> are HTML escaped if the option <code data-language="javascript">errors.escapeHtml</code> is set to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">noDefaults</code> - when <code data-language="javascript">true</code>, do not apply default values. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">nonEnumerables</code> - when <code data-language="javascript">true</code>, inputs are shallow cloned to include non-enumerable properties. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">presence</code> - sets the default presence requirements. Supported modes: <code data-language="javascript">'optional'</code>, <code data-language="javascript">'required'</code>, and <code data-language="javascript">'forbidden'</code>. Defaults to <code data-language="javascript">'optional'</code>.</li> <li> <code data-language="javascript">skipFunctions</code> - when <code data-language="javascript">true</code>, ignores unknown keys with a function value. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">stripUnknown</code> - remove unknown elements from objects and arrays. Defaults to <code data-language="javascript">false</code>. <ul> <li>when an <code data-language="javascript">object</code> : <ul> <li> <code data-language="javascript">arrays</code> - set to <code data-language="javascript">true</code> to remove unknown items from arrays.</li> <li> <code data-language="javascript">objects</code> - set to <code data-language="javascript">true</code> to remove unknown keys from objects.</li> </ul> </li> <li>when <code data-language="javascript">true</code>, it is equivalent to having <code data-language="javascript">{ arrays: false, objects: true }</code>.</li> </ul> </li> </ul> </li> </ul> <p>Returns an object with the following keys:</p> <ul> <li> <code data-language="javascript">value</code> - the validated and normalized value.</li> <li> <code data-language="javascript">error</code> - the validation errors if found.</li> <li> <code data-language="javascript">warning</code> - the generated warnings if any.</li> <li> <code data-language="javascript">artifacts</code> - a <code data-language="javascript">Map</code> containing any passing rules' artifacts and their corresponding array of paths.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">value</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-s">'123'</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">result</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// result -&gt; { value: { "a" : 123 } }</span></pre></div> <h4 id="anyvalidateasyncvalue-options">
<code data-language="javascript">any.validateAsync(value, [options])</code>
</h4> <p>Validates a value asynchronously using the current schema and options where:</p> <ul> <li> <code data-language="javascript">value</code> - the value being validated.</li> <li> <code data-language="javascript">options</code> - an optional object as described in <a href="#anyvalidatevalue-options"><code data-language="javascript">any.validate()</code></a>, with the following additional settings: <ul> <li> <code data-language="javascript">artifacts</code> - when <code data-language="javascript">true</code>, artifacts are returned alongside the value (i.e. <code data-language="javascript">{ value, artifacts }</code>). Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">warnings</code> - when <code data-language="javascript">true</code>, warnings are returned alongside the value (i.e. <code data-language="javascript">{ value, warning }</code>). Defaults to <code data-language="javascript">false</code>.</li> </ul> </li> </ul> <p>Returns a Promise that resolves into the validated value when the value is valid. If the value is valid and the <code data-language="javascript">warnings</code> or <code data-language="javascript">debug</code> options are set to <code data-language="javascript">true</code>, returns an object <code data-language="javascript">{ value, warning, debug }</code>. If validation fails, the promise rejects with the validation error.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">value</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-s">'123'</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-k">try</span> <span class="pl-kos">{</span>
  <span class="pl-k">const</span> <span class="pl-s1">value</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
  <span class="pl-c">// value -&gt; { "a" : 123 }</span>
<span class="pl-kos">}</span>
<span class="pl-k">catch</span> <span class="pl-kos">(</span><span class="pl-s1">err</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
<span class="pl-kos">}</span></pre></div> <h4 id="anywarn">
<code data-language="javascript">any.warn()</code>
</h4> <p>Same as <a href="#anyruleoptions"><code data-language="javascript">rule({ warn: true })</code></a>.</p> <p>Note that <code data-language="javascript">warn()</code> will terminate the current ruleset and cannot be followed by another rule option. Use <a href="#anyruleoptions"><code data-language="javascript">rule()</code></a> to apply multiple rule options.</p> <h4 id="anywarningcode-context">
<code data-language="javascript">any.warning(code, [context])</code>
</h4> <p>Generates a warning where:</p> <ul> <li> <code data-language="javascript">code</code> - the warning code. Can be an existing error code or a custom code. If a custom code is used, a matching error message definition must be configured via <a href="#anymessagemessage"><code data-language="javascript">any.message()</code></a>, <a href="#anyprefsoptions--aliases-preferences-options"><code data-language="javascript">any.prefs()</code></a>, or validation <code data-language="javascript">messages</code> option.</li> <li> <code data-language="javascript">context</code> - optional context object.</li> </ul> <p>When calling <a href="#anyvalidateasyncvalue-options"><code data-language="javascript">any.validateAsync()</code></a>, set the <code data-language="javascript">warning</code> option to <code data-language="javascript">true</code> to enable warnings. Warnings are reported separately from errors alongside the result value via the <code data-language="javascript">warning</code> key (i.e. <code data-language="javascript">{ value, warning }</code>). Warning are always included when calling <a href="#anyvalidatevalue-options"><code data-language="javascript">any.validate()</code></a>.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">warning</span><span class="pl-kos">(</span><span class="pl-s">'custom.x'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">w</span>: <span class="pl-s">'world'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">message</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-s">'custom.x'</span>: <span class="pl-s">'hello {#w}!'</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-kos">{</span> value<span class="pl-kos">,</span> error<span class="pl-kos">,</span> warning <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'anything'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// value -&gt; 'anything';</span>
<span class="pl-c">// error -&gt; null</span>
<span class="pl-c">// warning -&gt; { message: 'hello world!', details: [...] }</span>

<span class="pl-c">// or</span>

<span class="pl-k">try</span> <span class="pl-kos">{</span>
    <span class="pl-k">const</span> <span class="pl-kos">{</span> value<span class="pl-kos">,</span> warning <span class="pl-kos">}</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s">'anything'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">warnings</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-c">// value -&gt; 'anything';</span>
    <span class="pl-c">// warning -&gt; { message: 'hello world!', details: [...] }</span>
<span class="pl-kos">}</span>
<span class="pl-k">catch</span> <span class="pl-kos">(</span><span class="pl-s1">err</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> <span class="pl-kos">}</span></pre></div> <h4 id="anywhencondition-options">
<code data-language="javascript">any.when([condition], options)</code>
</h4> <p>Adds conditions that are evaluated during validation and modify the schema before it is applied to the value, where:</p> <ul> <li> <code data-language="javascript">condition</code> - a key name, <a href="#refkey-options">reference</a>, or a schema. If omitted, defaults to <code data-language="javascript">Joi.ref('.')</code>.</li> <li> <code data-language="javascript">options</code> - an object with: <ul> <li> <code data-language="javascript">is</code> - the condition expressed as a <strong>joi</strong> schema. Anything that is not a <strong>joi</strong> schema will be converted using <a href="#compileschema-options">Joi.compile</a>. By default, the <code data-language="javascript">is</code> condition schema allows for <code data-language="javascript">undefined</code> values. Use <code data-language="javascript">.required()</code> to override. For example, use <code data-language="javascript">is: Joi.number().required()</code> to guarantee that a <strong>joi</strong> reference exists and is a number.</li> <li> <code data-language="javascript">not</code> - the negative version of <code data-language="javascript">is</code> (<code data-language="javascript">then</code> and <code data-language="javascript">otherwise</code> have reverse roles).</li> <li> <code data-language="javascript">then</code> - if the condition is true, the <strong>joi</strong> schema to use.</li> <li> <code data-language="javascript">otherwise</code> - if the condition is false, the <strong>joi</strong> schema to use.</li> <li> <code data-language="javascript">switch</code> - an array of <code data-language="javascript">{ is, then }</code> conditions that are evaluated against the <code data-language="javascript">condition</code>. The last item in the array may also contain <code data-language="javascript">otherwise</code>.</li> <li> <code data-language="javascript">break</code> - stops processing all other conditions if the rule results in a <code data-language="javascript">then</code>, <code data-language="javascript">otherwise</code>, of <code data-language="javascript">switch</code> match.</li> </ul> </li> </ul> <p>If <code data-language="javascript">condition</code> is a reference:</p> <ul> <li>if <code data-language="javascript">is</code>, <code data-language="javascript">not</code>, and <code data-language="javascript">switch</code> are missing, <code data-language="javascript">is</code> defaults to <code data-language="javascript">Joi.invalid(null, false, 0, '').required()</code> (value must be a truthy).</li> <li> <code data-language="javascript">is</code> and <code data-language="javascript">not</code> cannot be used together.</li> <li>one of <code data-language="javascript">then</code>, <code data-language="javascript">otherwise</code>, or <code data-language="javascript">switch</code> is required.</li> <li>cannot use <code data-language="javascript">is</code> or <code data-language="javascript">then</code> with <code data-language="javascript">switch</code>.</li> <li>cannot specify <code data-language="javascript">otherwise</code> both inside the last <code data-language="javascript">switch</code> statement and outside.</li> </ul> <p>If <code data-language="javascript">condition</code> is a schema:</p> <ul> <li>cannot specify <code data-language="javascript">is</code> or <code data-language="javascript">switch</code>.</li> <li>one of <code data-language="javascript">then</code> or <code data-language="javascript">otherwise</code> is required.</li> </ul> <p>When <code data-language="javascript">is</code>, <code data-language="javascript">then</code>, or <code data-language="javascript">otherwise</code> are assigned literal values, the values are compiled into override schemas (<code data-language="javascript">'x'</code> is compiled into <code data-language="javascript">Joi.valid(Joi.override, 'x')</code>). This means they will override any base schema the rule is applied to. To append a literal value, use the explicit <code data-language="javascript">Joi.valid('x')</code> format.</p> <p>Notes:</p> <ul> <li>an invalid combination of schema modifications (e.g. trying to add string rules or a number type) will cause validation to throw an error.</li> <li>because the schema is constructed at validation time, it can have a significant performance impact. Run-time generated schemas are cached, but the first time of each generation will take longer than once it is cached.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'x'</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-s">'b'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">exist</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'y'</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-c1">otherwise</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'z'</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-s">'c'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">forbidden</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <p>Or with a schema:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'x'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">exist</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unknown</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
        <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
            <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'y'</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">otherwise</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
            <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'z'</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Note that this style is much more useful when your whole schema depends on the value of one of its property, or if you find yourself repeating the check for many keys of an object. For example to validate this logic:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">type</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'A'</span><span class="pl-kos">,</span> <span class="pl-s">'B'</span><span class="pl-kos">,</span> <span class="pl-s">'C'</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>              <span class="pl-c">// required if type == 'A'</span>
        
    <span class="pl-c1">foo</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-s">'type'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
        <span class="pl-c1">is</span>: <span class="pl-s">'A'</span><span class="pl-kos">,</span>
        <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'X'</span><span class="pl-kos">,</span> <span class="pl-s">'Y'</span><span class="pl-kos">,</span> <span class="pl-s">'Z'</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>                           <span class="pl-c">// required if type === 'A' and foo !== 'Z'</span>
    
    <span class="pl-c1">bar</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">type</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'A'</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-c1">foo</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">not</span><span class="pl-kos">(</span><span class="pl-s">'Z'</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unknown</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
        <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">bar</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Alternatively, if you want to specify a specific type such as <code data-language="javascript">string</code>, <code data-language="javascript">array</code>, etc, you can do so like this:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-s">'b'</span><span class="pl-kos">,</span> <span class="pl-s">'other'</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">other</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-s">'other'</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <p>If you need to validate a child key inside a nested object based on a sibling's value, you can do so like this:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">keys</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
            <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
            <span class="pl-c1">d</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
            <span class="pl-c1">is</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
            <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span>		<span class="pl-c">// b.c is required only when a is true</span>
        <span class="pl-kos">}</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>If you want to validate one key based on the existence of another key, you can do so like the following (notice the use of <code data-language="javascript">required()</code>):</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">min</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">max</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-s">'min'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
        <span class="pl-c1">is</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">greater</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'min'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>To evaluate multiple values on a single reference:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
            <span class="pl-c1">switch</span>: <span class="pl-kos">[</span>
                <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">,</span>
                <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">,</span>
                <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-c1">2</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">3</span><span class="pl-kos">)</span> <span class="pl-kos">}</span>
            <span class="pl-kos">]</span><span class="pl-kos">,</span>
            <span class="pl-c1">otherwise</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-c1">4</span><span class="pl-kos">)</span>
        <span class="pl-kos">}</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Or shorter:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-kos">[</span>
            <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-c1">0</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-c1">1</span> <span class="pl-kos">}</span><span class="pl-kos">,</span>
            <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-c1">2</span> <span class="pl-kos">}</span><span class="pl-kos">,</span>
            <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-c1">2</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-c1">3</span><span class="pl-kos">,</span> <span class="pl-c1">otherwise</span>: <span class="pl-c1">4</span> <span class="pl-kos">}</span>
        <span class="pl-kos">]</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h3 id="alternatives">
<code data-language="javascript">alternatives</code>
</h3> <p>Generates a type that will match one of the provided alternative schemas via the <a href="#alternativestryschemas"><code data-language="javascript">try()</code></a> method. If no schemas are added, the type will not match any value except for <code data-language="javascript">undefined</code>.</p> <p>Supports the same methods of the <a href="#any"><code data-language="javascript">any()</code></a> type.</p> <p>Alternatives can be expressed using the shorter <code data-language="javascript">[]</code> notation.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">alt</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">alternatives</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">try</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// Same as [Joi.number(), Joi.string()]</span></pre></div> <p>Note that numeric strings would be casted to numbers in the example above (see <a href="#anystrictisstrict">any.strict()</a>).</p> <p>Possible validation errors: <a href="#alternativesany"><code data-language="javascript">alternatives.any</code></a>, <a href="#alternativesall"><code data-language="javascript">alternatives.all</code></a>, <a href="#alternativesone"><code data-language="javascript">alternatives.one</code></a>, <a href="#alternativestypes"><code data-language="javascript">alternatives.types</code></a>, <a href="#alternativesmatch"><code data-language="javascript">alternatives.match</code></a></p> <h4 id="alternativesconditionalcondition-options">
<code data-language="javascript">alternatives.conditional(condition, options)</code>
</h4> <p>Adds a conditional alternative schema type, either based on another key value, or a schema peeking into the current value, where:</p> <ul> <li> <code data-language="javascript">condition</code> - the key name or <a href="#refkey-options">reference</a>, or a schema.</li> <li> <code data-language="javascript">options</code> - an object with: <ul> <li> <code data-language="javascript">is</code> - the condition expressed as a <strong>joi</strong> schema. Anything that is not a <strong>joi</strong> schema will be converted using <a href="#compileschema-options">Joi.compile</a>.</li> <li> <code data-language="javascript">not</code> - the negative version of <code data-language="javascript">is</code> (<code data-language="javascript">then</code> and <code data-language="javascript">otherwise</code> have reverse roles).</li> <li> <code data-language="javascript">then</code> - if the condition is true, the <strong>joi</strong> schema to use.</li> <li> <code data-language="javascript">otherwise</code> - if the condition is false, the <strong>joi</strong> schema to use.</li> <li> <code data-language="javascript">switch</code> - an array of <code data-language="javascript">{ is, then }</code> conditions that are evaluated against the <code data-language="javascript">condition</code>. The last item in the array may also contain <code data-language="javascript">otherwise</code>.</li> </ul> </li> </ul> <p>If <code data-language="javascript">condition</code> is a reference:</p> <ul> <li>if <code data-language="javascript">is</code>, <code data-language="javascript">not</code>, and <code data-language="javascript">switch</code> are missing, <code data-language="javascript">is</code> defaults to <code data-language="javascript">Joi.invalid(null, false, 0, '').required()</code> (value must be a truthy).</li> <li> <code data-language="javascript">is</code> and <code data-language="javascript">not</code> cannot be used together.</li> <li>one of <code data-language="javascript">then</code>, <code data-language="javascript">otherwise</code>, or <code data-language="javascript">switch</code> is required.</li> <li>cannot use <code data-language="javascript">is</code> or <code data-language="javascript">then</code> with <code data-language="javascript">switch</code>.</li> <li>cannot specify <code data-language="javascript">otherwise</code> both inside the last <code data-language="javascript">switch</code> statement and outside.</li> </ul> <p>If <code data-language="javascript">condition</code> is a schema:</p> <ul> <li>cannot specify <code data-language="javascript">is</code> or <code data-language="javascript">switch</code>.</li> <li>one of <code data-language="javascript">then</code> or <code data-language="javascript">otherwise</code> is required.</li> </ul> <p>When <code data-language="javascript">is</code>, <code data-language="javascript">then</code>, or <code data-language="javascript">otherwise</code> are assigned literal values, the values are compiled into override schemas (<code data-language="javascript">'x'</code> is compiled into <code data-language="javascript">Joi.valid(Joi.override, 'x')</code>). This means they will override any base schema the rule is applied to. To append a literal value, use the explicit <code data-language="javascript">Joi.valid('x')</code> format.</p> <p>Note that <code data-language="javascript">alternatives.conditional()</code> is different than <code data-language="javascript">any.when()</code>. When you use <code data-language="javascript">any.when()</code> you end up with composite schema of all the matching conditions while <code data-language="javascript">alternatives.conditional()</code> will use the first matching schema, ignoring other conditional statements.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">alternatives</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">conditional</span><span class="pl-kos">(</span><span class="pl-s">'b'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-c1">5</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-c1">otherwise</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">alternatives</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">conditional</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">b</span>: <span class="pl-c1">5</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unknown</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-kos">{</span>
    <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
        <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">otherwise</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
        <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Note that <code data-language="javascript">conditional()</code> only adds additional alternatives to try and does not impact the overall type. Setting a <code data-language="javascript">required()</code> rule on a single alternative will not apply to the overall key. For example, this definition of <code data-language="javascript">a</code>:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">alternatives</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">conditional</span><span class="pl-kos">(</span><span class="pl-s">'b'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <p>Does not turn <code data-language="javascript">a</code> into a required key when <code data-language="javascript">b</code> is <code data-language="javascript">true</code>. Instead, it tells the validator to try and match the value to anything that's not <code data-language="javascript">undefined</code>. However, since <code data-language="javascript">Joi.alternatives()</code> by itself allows <code data-language="javascript">undefined</code>, the rule does not accomplish turning <code data-language="javascript">a</code> to a required value. This rule is the same as <code data-language="javascript">Joi.alternatives([Joi.required()])</code> when <code data-language="javascript">b</code> is <code data-language="javascript">true</code> which will allow any value including <code data-language="javascript">undefined</code>.</p> <p>To accomplish the desired result above use:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">when</span><span class="pl-kos">(</span><span class="pl-s">'b'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">is</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span> <span class="pl-c1">then</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span></pre></div> <h4 id="alternativesmatchmode">
<code data-language="javascript">alternatives.match(mode)</code>
</h4> <p>Requires the validated value to match a specific set of the provided <code data-language="javascript">alternative.try()</code> schemas where:</p> <ul> <li> <code data-language="javascript">mode</code> - the match mode which can be one of: <ul> <li> <code data-language="javascript">'any'</code> - match any provided schema. This is the default value.</li> <li> <code data-language="javascript">'all'</code> - match all of the provided schemas. Note that this will ignore any conversions performed by the matchin schemas and return the raw value provided regardless of the <code data-language="javascript">convert</code> preference set.</li> <li> <code data-language="javascript">'one'</code> - match one and only one of the provided schemas.</li> </ul> </li> </ul> <p>Note: Cannot be combined with <code data-language="javascript">alternatives.conditional()</code>.</p> <p>Possible validation errors: <a href="#alternativesany"><code data-language="javascript">alternatives.any</code></a>, <a href="#alternativesall"><code data-language="javascript">alternatives.all</code></a>, <a href="#alternativesone"><code data-language="javascript">alternatives.one</code></a></p> <h4 id="alternativestryschemas">
<code data-language="javascript">alternatives.try(...schemas)</code>
</h4> <p>Adds an alternative schema type for attempting to match against the validated value where:</p> <ul> <li> <code data-language="javascript">schemas</code> - alternative <strong>joi</strong> types, each as a separate argument.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">alt</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">alternatives</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">try</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">alt</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h3 id="array">
<code data-language="javascript">array</code>
</h3> <p>Generates a schema object that matches an array data type. Note that undefined values inside arrays are not allowed by default but can be by using <code data-language="javascript">sparse()</code>.</p> <p>Supports the same methods of the <a href="#any"><code data-language="javascript">any()</code></a> type.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">array</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-s">'b'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">array</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-s">'b'</span><span class="pl-kos">,</span> <span class="pl-s">'a'</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#arraybase"><code data-language="javascript">array.base</code></a></p> <h4 id="arrayhasschema">
<code data-language="javascript">array.has(schema)</code>
</h4> <p>Verifies that a schema validates at least one of the values in the array, where:</p> <ul> <li> <code data-language="javascript">schema</code> - the validation rules required to satisfy the check. If the <code data-language="javascript">schema</code> includes references, they are resolved against the array item being tested, not the value of the <code data-language="javascript">ref</code> target.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span>
  <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
  <span class="pl-kos">}</span><span class="pl-kos">)</span>
<span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">has</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">)</span></pre></div> <p>Possible validation errors: <a href="#arrayhasknown"><code data-language="javascript">array.hasKnown</code></a>, <a href="#arrayhasunknown"><code data-language="javascript">array.hasUnknown</code></a></p> <h4 id="arrayitemstypes">
<code data-language="javascript">array.items(...types)</code>
</h4> <p>Lists the types allowed for the array values where:</p> <ul> <li> <code data-language="javascript">types</code> - one or more <strong>joi</strong> schema objects to validate each array item against.</li> </ul> <p>If a given type is <code data-language="javascript">.required()</code> then there must be a matching item in the array. If a type is <code data-language="javascript">.forbidden()</code> then it cannot appear in the array. Required items can be added multiple times to signify that multiple items must be found. Errors will contain the number of items that didn't match. Any unmatched item having a <a href="#anylabelname">label</a> will be mentioned explicitly.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// array may contain strings and numbers</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// array must contain at least two strings</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'not allowed'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">forbidden</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// array may contain strings, but none of those strings can match 'not allowed'</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">label</span><span class="pl-kos">(</span><span class="pl-s">'My string'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// If this fails it can result in `[ValidationError: "value" does not contain [My string] and 1 other required value(s)]`</span></pre></div> <p>Possible validation errors: <a href="#arrayexcludes"><code data-language="javascript">array.excludes</code></a>, <a href="#arrayincludesrequiredboth"><code data-language="javascript">array.includesRequiredBoth</code></a>, <a href="#arrayincludesrequiredknowns"><code data-language="javascript">array.includesRequiredKnowns</code></a>, <a href="#arrayincludesrequiredunknowns"><code data-language="javascript">array.includesRequiredUnknowns</code></a>, <a href="#arrayincludes"><code data-language="javascript">array.includes</code></a></p> <h4 id="arraylengthlimit">
<code data-language="javascript">array.length(limit)</code>
</h4> <p>Specifies the exact number of items in the array where:</p> <ul> <li> <code data-language="javascript">limit</code> - the number of array items allowed or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">length</span><span class="pl-kos">(</span><span class="pl-c1">5</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">limit</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">integer</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">numbers</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">length</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'limit'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#arraylength"><code data-language="javascript">array.length</code></a>, <a href="#arrayref"><code data-language="javascript">array.ref</code></a></p> <h4 id="arraymaxlimit">
<code data-language="javascript">array.max(limit)</code>
</h4> <p>Specifies the maximum number of items in the array where:</p> <ul> <li> <code data-language="javascript">limit</code> - the highest number of array items allowed or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">limit</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">integer</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">numbers</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'limit'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#arraymax"><code data-language="javascript">array.max</code></a>, <a href="#arrayref"><code data-language="javascript">array.ref</code></a></p> <h4 id="arrayminlimit">
<code data-language="javascript">array.min(limit)</code>
</h4> <p>Specifies the minimum number of items in the array where:</p> <ul> <li> <code data-language="javascript">limit</code> - the lowest number of array items allowed or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">limit</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">integer</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">numbers</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'limit'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#arraymin"><code data-language="javascript">array.min</code></a>, <a href="#arrayref"><code data-language="javascript">array.ref</code></a></p> <h4 id="arrayorderedtype">
<code data-language="javascript">array.ordered(...type)</code>
</h4> <p>Lists the types in sequence order for the array values where:</p> <ul> <li> <code data-language="javascript">types</code> - one or more <strong>joi</strong> schema objects to validate against each array item in sequence order.</li> </ul> <p>If a given type is <code data-language="javascript">.required()</code> then there must be a matching item with the same index position in the array. Errors will contain the number of items that didn't match. Any unmatched item having a <a href="#anylabelname">label</a> will be mentioned explicitly.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">ordered</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// array must have first item as string and second item as number</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">ordered</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// array must have first item as string and 1 or more subsequent items as number</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">ordered</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// array must have first item as string and optionally second item as number</span></pre></div> <p>Possible validation errors: <a href="#arrayexcludes"><code data-language="javascript">array.excludes</code></a>, <a href="#arrayincludes"><code data-language="javascript">array.includes</code></a>, <a href="#arrayorderedlength"><code data-language="javascript">array.orderedLength</code></a></p> <h4 id="arraysingleenabled">
<code data-language="javascript">array.single([enabled])</code>
</h4> <p>Allows single values to be checked against rules as if it were provided as an array.</p> <p><code data-language="javascript">enabled</code> can be used with a falsy value to go back to the default behavior.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">single</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-c1">4</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// returns `{ error: null, value: [ 4 ] }`</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-c1">4</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// returns `{ error: null, value: [ 4 ] }`</span></pre></div> <p>Possible validation errors: <a href="#arrayexcludes"><code data-language="javascript">array.excludes</code></a>, <a href="#arrayincludes"><code data-language="javascript">array.includes</code></a></p> <h4 id="arraysortoptions">
<code data-language="javascript">array.sort([options])</code>
</h4> <p>Requires the array to comply with the specified sort order where:</p> <ul> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">order</code> - the sort order. Allowed values: <ul> <li> <code data-language="javascript">'ascending'</code> - sort the array in ascending order. This is the default.</li> <li> <code data-language="javascript">'descending'</code> - sort the array in descending order.</li> </ul> </li> <li> <code data-language="javascript">by</code> - a key name or reference to sort array objects by. Defaults to the entire value.</li> </ul> </li> </ul> <p>Notes:</p> <ul> <li>if the <code data-language="javascript">convert</code> preference is <code data-language="javascript">true</code>, the array is modified to match the required sort order.</li> <li> <code data-language="javascript">undefined</code> values are always placed at the end of the array regardless of the sort order.</li> <li>can only sort string and number items or item key values.</li> </ul> <p>Possible validation errors: <a href="#arraysort"><code data-language="javascript">array.sort</code></a>, <a href="#arraysortunsupported"><code data-language="javascript">array.sort.unsupported</code></a>, <a href="#arraysortmismatching"><code data-language="javascript">array.sort.mismatching</code></a></p> <h4 id="arraysparseenabled">
<code data-language="javascript">array.sparse([enabled])</code>
</h4> <p>Allows this array to be sparse. <code data-language="javascript">enabled</code> can be used with a falsy value to go back to the default behavior.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">let</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">sparse</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// undefined values are now allowed</span>
<span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">sparse</span><span class="pl-kos">(</span><span class="pl-c1">false</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// undefined values are now denied</span></pre></div> <p>Possible validation errors: <a href="#arraysparse"><code data-language="javascript">array.sparse</code></a></p> <h4 id="arrayuniquecomparator-options">
<code data-language="javascript">array.unique([comparator, [options]])</code>
</h4> <p>Requires the array values to be unique where:</p> <ul> <li> <code data-language="javascript">comparator</code> - an optional custom <code data-language="javascript">comparator</code> that is either: <ul> <li>a function that takes 2 parameters to compare. This function should return whether the 2 parameters are equal or not, you are also <strong>responsible</strong> for this function not to fail, any <code data-language="javascript">Error</code> would bubble out of Joi.</li> <li>a string in dot notation representing the path of the element to do uniqueness check on. Any missing path will be considered undefined, and can as well only exist once.</li> </ul> </li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">ignoreUndefined</code> - if <code data-language="javascript">true</code>, undefined values for the dot notation string comparator will not cause the array to fail on uniqueness. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">separator</code> - overrides the default <code data-language="javascript">.</code> hierarchy separator. Set to <code data-language="javascript">false</code> to treat the <code data-language="javascript">key</code> as a literal value.</li> </ul> </li> </ul> <p>Note: remember that if you provide a custom comparator function, different types can be passed as parameter depending on the rules you set on items.</p> <p>Be aware that a deep equality is performed on elements of the array having a type of <code data-language="javascript">object</code>, a performance penalty is to be expected for this kind of operation.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unique</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unique</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">a</span><span class="pl-kos">,</span> <span class="pl-s1">b</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-s1">a</span><span class="pl-kos">.</span><span class="pl-c1">property</span> <span class="pl-c1">===</span> <span class="pl-s1">b</span><span class="pl-kos">.</span><span class="pl-c1">property</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unique</span><span class="pl-kos">(</span><span class="pl-s">'customer.id'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">let</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unique</span><span class="pl-kos">(</span><span class="pl-s">'identifier'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// ValidationError: "value" position 1 contains a duplicate value</span>

<span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unique</span><span class="pl-kos">(</span><span class="pl-s">'identifier'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">ignoreUndefined</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-kos">[</span><span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// error: null</span></pre></div> <p>Possible validation errors: <a href="#arrayunique"><code data-language="javascript">array.unique</code></a></p> <h3 id="binary">
<code data-language="javascript">binary</code>
</h3> <p>Generates a schema object that matches a Buffer data type. If the validation <code data-language="javascript">convert</code> option is on (enabled by default), a string will be converted to a Buffer if specified.</p> <p>Supports the same methods of the <a href="#any"><code data-language="javascript">any()</code></a> type.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">binary</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#binarybase"><code data-language="javascript">binary.base</code></a></p> <h4 id="binaryencodingencoding">
<code data-language="javascript">binary.encoding(encoding)</code>
</h4> <p>Sets the string encoding format if a string input is converted to a buffer where:</p> <ul> <li> <code data-language="javascript">encoding</code> - the encoding scheme.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">binary</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">encoding</span><span class="pl-kos">(</span><span class="pl-s">'base64'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="binarylengthlimit">
<code data-language="javascript">binary.length(limit)</code>
</h4> <p>Specifies the exact length of the buffer:</p> <ul> <li> <code data-language="javascript">limit</code> - the size of buffer allowed or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">binary</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">length</span><span class="pl-kos">(</span><span class="pl-c1">5</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#binarylength"><code data-language="javascript">binary.length</code></a>, <a href="#binaryref"><code data-language="javascript">binary.ref</code></a></p> <h4 id="binarymaxlimit">
<code data-language="javascript">binary.max(limit)</code>
</h4> <p>Specifies the maximum length of the buffer where:</p> <ul> <li> <code data-language="javascript">limit</code> - the highest size of the buffer or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">binary</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#binarymax"><code data-language="javascript">binary.max</code></a>, <a href="#binaryref"><code data-language="javascript">binary.ref</code></a></p> <h4 id="binaryminlimit">
<code data-language="javascript">binary.min(limit)</code>
</h4> <p>Specifies the minimum length of the buffer where:</p> <ul> <li> <code data-language="javascript">limit</code> - the lowest size of the buffer or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">binary</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#binarymin"><code data-language="javascript">binary.min</code></a>, <a href="#binaryref"><code data-language="javascript">binary.ref</code></a></p> <h3 id="boolean">
<code data-language="javascript">boolean</code>
</h3> <p>Generates a schema object that matches a boolean data type. Can also be called via <code data-language="javascript">bool()</code>. If the validation <code data-language="javascript">convert</code> option is on (enabled by default), a string (either "true" or "false") will be converted to a <code data-language="javascript">boolean</code> if specified.</p> <p>Supports the same methods of the <a href="#any"><code data-language="javascript">any()</code></a> type.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">boolean</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">await</span> <span class="pl-s1">boolean</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-c1">true</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// Valid</span>
<span class="pl-k">await</span> <span class="pl-s1">boolean</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">;</span>    <span class="pl-c">// Throws</span></pre></div> <p>Possible validation errors: <a href="#booleanbase"><code data-language="javascript">boolean.base</code></a></p> <h4 id="booleanfalsyvalues">
<code data-language="javascript">boolean.falsy(...values)</code>
</h4> <p>Allows for additional values to be considered valid booleans by converting them to <code data-language="javascript">false</code> during validation. Requires the validation <code data-language="javascript">convert</code> option to be <code data-language="javascript">true</code>.</p> <p>String comparisons are by default case insensitive, see <a href="#booleansensitiveenabled"><code data-language="javascript">boolean.sensitive()</code></a> to change this behavior.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">boolean</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">falsy</span><span class="pl-kos">(</span><span class="pl-s">'N'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">boolean</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s">'N'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// Valid</span></pre></div> <h4 id="booleansensitiveenabled">
<code data-language="javascript">boolean.sensitive([enabled])</code>
</h4> <p>Restrict the values provided to <code data-language="javascript">truthy</code> and <code data-language="javascript">falsy</code> as well as the <code data-language="javascript">'true'</code> and <code data-language="javascript">'false'</code> default conversions (when not in <code data-language="javascript">strict()</code> mode) to be matched in a case sensitive manner, where:</p> <ul> <li> <code data-language="javascript">enabled</code> - when <code data-language="javascript">false</code>, allows insensitive comparison. Defaults to <code data-language="javascript">true</code>.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">truthy</span><span class="pl-kos">(</span><span class="pl-s">'yes'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">falsy</span><span class="pl-kos">(</span><span class="pl-s">'no'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">sensitive</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="booleantruthyvalues">
<code data-language="javascript">boolean.truthy(...values)</code>
</h4> <p>Allows for additional values to be considered valid booleans by converting them to <code data-language="javascript">true</code> during validation. Requires the validation <code data-language="javascript">convert</code> option to be <code data-language="javascript">true</code>.</p> <p>String comparisons are by default case insensitive, see <a href="#booleansensitiveenabled"><code data-language="javascript">boolean.sensitive()</code></a> to change this behavior.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">boolean</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">truthy</span><span class="pl-kos">(</span><span class="pl-s">'Y'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">boolean</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s">'Y'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// Valid</span></pre></div> <h3 id="date">
<code data-language="javascript">date</code>
</h3> <p>Generates a schema object that matches a date type (as well as a JavaScript date string or number of milliseconds). If the validation <code data-language="javascript">convert</code> option is on (enabled by default), a string or number will be converted to a Date if specified. Note that some invalid date strings will be accepted if they can be adjusted to valid dates (e.g. <code data-language="javascript">'2/31/2019'</code> will be converted to <code data-language="javascript">'3/3/2019'</code>) by the internal JS <code data-language="javascript">Date.parse()</code> implementation.</p> <p>Note: When <strong>joi</strong> is used in a browser environment, the parsing of date strings with the Date constructor (and Date.parse(), which works the same way) is strongly discouraged due to browser differences and inconsistencies. For example <code data-language="javascript">'1-1-1910'</code> is valid in Chrome but will error in Safari.</p> <p>Supports the same methods of the <a href="#any"><code data-language="javascript">any()</code></a> type.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">date</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">date</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s">'12-21-2012'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#datebase"><code data-language="javascript">date.base</code></a>, <a href="#datestrict"><code data-language="javascript">date.strict</code></a></p> <h4 id="dategreaterdate">
<code data-language="javascript">date.greater(date)</code>
</h4> <p>Specifies that the value must be greater than <code data-language="javascript">date</code> (or a reference).</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">greater</span><span class="pl-kos">(</span><span class="pl-s">'1-1-1974'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Notes: <code data-language="javascript">'now'</code> can be passed in lieu of <code data-language="javascript">date</code> so as to always compare relatively to the current date, allowing to explicitly ensure a date is either in the past or in the future. When using <code data-language="javascript">'now'</code> note that is includes the current time and the two values are compared based on their UTC milliseconds timestamp.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">greater</span><span class="pl-kos">(</span><span class="pl-s">'now'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">from</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">to</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">greater</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'from'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#dategreater"><code data-language="javascript">date.greater</code></a>, <a href="#dateref"><code data-language="javascript">date.ref</code></a></p> <h4 id="dateiso">
<code data-language="javascript">date.iso()</code>
</h4> <p>Requires the string value to be in valid ISO 8601 date format.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">iso</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#dateformat"><code data-language="javascript">date.format</code></a></p> <h4 id="datelessdate">
<code data-language="javascript">date.less(date)</code>
</h4> <p>Specifies that the value must be less than <code data-language="javascript">date</code> (or a reference).</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">less</span><span class="pl-kos">(</span><span class="pl-s">'12-31-2020'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Notes: <code data-language="javascript">'now'</code> can be passed in lieu of <code data-language="javascript">date</code> so as to always compare relatively to the current date, allowing to explicitly ensure a date is either in the past or in the future.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">less</span><span class="pl-kos">(</span><span class="pl-s">'now'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">from</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">less</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'to'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">to</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#dateless"><code data-language="javascript">date.less</code></a>, <a href="#dateref"><code data-language="javascript">date.ref</code></a></p> <h4 id="datemaxdate">
<code data-language="javascript">date.max(date)</code>
</h4> <p>Specifies the latest date allowed where:</p> <ul> <li> <code data-language="javascript">date</code> - the latest date allowed or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-s">'12-31-2020'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Notes: <code data-language="javascript">'now'</code> can be passed in lieu of <code data-language="javascript">date</code> so as to always compare relatively to the current date, allowing to explicitly ensure a date is either in the past or in the future.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-s">'now'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">from</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'to'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">to</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#datemax"><code data-language="javascript">date.max</code></a>, <a href="#dateref"><code data-language="javascript">date.ref</code></a></p> <h4 id="datemindate">
<code data-language="javascript">date.min(date)</code>
</h4> <p>Specifies the oldest date allowed where:</p> <ul> <li> <code data-language="javascript">date</code> - the oldest date allowed or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-s">'1-1-1974'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Notes: <code data-language="javascript">'now'</code> can be passed in lieu of <code data-language="javascript">date</code> so as to always compare relatively to the current date, allowing to explicitly ensure a date is either in the past or in the future.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-s">'now'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">from</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">to</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'from'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#datemin"><code data-language="javascript">date.min</code></a>, <a href="#dateref"><code data-language="javascript">date.ref</code></a></p> <h4 id="datetimestamptype">
<code data-language="javascript">date.timestamp([type])</code>
</h4> <p>Requires the value to be a timestamp interval from <a href="https://en.wikipedia.org/wiki/Unix_time" rel="nofollow">Unix Time</a>.</p> <ul> <li> <code data-language="javascript">type</code> - the type of timestamp (allowed values are <code data-language="javascript">unix</code> or <code data-language="javascript">javascript</code> [default])</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">timestamp</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// defaults to javascript timestamp</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">timestamp</span><span class="pl-kos">(</span><span class="pl-s">'javascript'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// also, for javascript timestamp (milliseconds)</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">date</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">timestamp</span><span class="pl-kos">(</span><span class="pl-s">'unix'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// for unix timestamp (seconds)</span></pre></div> <p>Possible validation errors: <a href="#dateformat"><code data-language="javascript">date.format</code></a></p> <h3 id="function---inherits-from-object">
 <code data-language="javascript">function</code> - inherits from <code data-language="javascript">object</code> </h3> <p>Generates a schema object that matches a function type.</p> <p>Supports the same methods of the <a href="#object"><code data-language="javascript">object()</code></a> type. Note that validating a function keys will cause the function to be cloned. While the function will retain its prototype and closure, it will lose its <code data-language="javascript">length</code> property value (will be set to <code data-language="javascript">0</code>).</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">func</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">function</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">func</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-k">function</span> <span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectbase"><code data-language="javascript">object.base</code></a></p> <h4 id="functionarityn">
<code data-language="javascript">function.arity(n)</code>
</h4> <p>Specifies the arity of the function where:</p> <ul> <li> <code data-language="javascript">n</code> - the arity expected.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">function</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">arity</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#functionarity"><code data-language="javascript">function.arity</code></a></p> <h4 id="-functionclass">
 <code data-language="javascript">function.class()</code> </h4> <p>Requires the function to be a class.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">function</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">class</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#functionclass"><code data-language="javascript">function.class</code></a></p> <h4 id="-functionmaxarityn">
 <code data-language="javascript">function.maxArity(n)</code> </h4> <p>Specifies the maximal arity of the function where:</p> <ul> <li> <code data-language="javascript">n</code> - the maximum arity expected.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">function</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">maxArity</span><span class="pl-kos">(</span><span class="pl-c1">3</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#functionmaxarity"><code data-language="javascript">function.maxArity</code></a></p> <h4 id="-functionminarityn">
 <code data-language="javascript">function.minArity(n)</code> </h4> <p>Specifies the minimal arity of the function where:</p> <ul> <li> <code data-language="javascript">n</code> - the minimal arity expected.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">function</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">minArity</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#functionminarity"><code data-language="javascript">function.minArity</code></a></p> <h3 id="linkref">
<code data-language="javascript">link(ref)</code>
</h3> <p>Links to another schema node and reuses it for validation, typically for creative recursive schemas, where:</p> <ul> <li> <code data-language="javascript">ref</code> - the reference to the linked schema node. Cannot reference itself or its children as well as other links. Links can be expressed in relative terms like value references (<code data-language="javascript">Joi.link('...')</code>), in absolute terms from the schema run-time root (<code data-language="javascript">Joi.link('/a')</code>), or using schema ids implicitly using object keys or explicitly using <code data-language="javascript">any.id()</code> (<code data-language="javascript">Joi.link('#a.b.c')</code>).</li> </ul> <p>Supports the methods of the <a href="#any"><code data-language="javascript">any()</code></a> type.</p> <p>When links are combined with <code data-language="javascript">any.when()</code> rules, the rules are applied after the link is resolved to the linked schema.</p> <p>Named links are recommended for most use cases as they are easy to reason and understand, and when mistakes are made, they simply error with invalid link message. Relative links are often hard to follow, especially when they are nested in array or alternatives rules. Absolute links are useful only when the schema is never reused inside another schema as the root is the run-time root of the schema being validated, not the current schema root.</p> <p>Note that named links must be found in a direct ancestor of the link. The names are searched by iterating over the chain of schemas from the current schema to the root. To reach an uncle or cousin, you must use the name of a common ancestor such as a grandparent and then walk down the tree.</p> <p>Links are resolved once (per runtime) and the result schema cached. If you reuse a link in different places, the first time it is resolved at run-time, the result will be used by all other instances. If you want each link to resolve relative to the place it is used, use a separate <code data-language="javascript">Joi.link()</code> statement in each place or set the <code data-language="javascript">relative()</code> flag.</p> <p>Named links:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">person</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">firstName</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">lastName</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">children</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">link</span><span class="pl-kos">(</span><span class="pl-s">'#person'</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span>
  <span class="pl-kos">.</span><span class="pl-en">id</span><span class="pl-kos">(</span><span class="pl-s">'person'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Relative links:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">person</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">firstName</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">lastName</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">children</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">link</span><span class="pl-kos">(</span><span class="pl-s">'...'</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
        <span class="pl-c">// . - the link</span>
        <span class="pl-c">// .. - the children array</span>
        <span class="pl-c">// ... - the person object</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Absolute links:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">person</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">firstName</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">lastName</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">children</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
        <span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">link</span><span class="pl-kos">(</span><span class="pl-s">'/'</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="linkrefref">
<code data-language="javascript">link.ref(ref)</code>
</h4> <p>Initializes the schema after constructions for cases where the schema has to be constructed first and then initialized. If <code data-language="javascript">ref</code> was not passed to the constructor, <code data-language="javascript">link.ref()</code> must be called prior to usage.</p> <p>Will throw an error during validation if left uninitialized (e.g. <code data-language="javascript">Joi.link()</code> called without a link and <code data-language="javascript">link.ref()</code> not called).</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-kos">[</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">link</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'#type.a'</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">id</span><span class="pl-kos">(</span><span class="pl-s">'type'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="linkconcatschema">
<code data-language="javascript">link.concat(schema)</code>
</h4> <p>Same as <a href="#anyconcatschema"><code data-language="javascript">any.concat()</code></a> but the schema is merged after the link is resolved which allows merging with schemas of the same type as the resolved link. Will throw an exception during validation if the merged types are not compatible.</p> <h3 id="number">
<code data-language="javascript">number</code>
</h3> <p>Generates a schema object that matches a number data type (as well as strings that can be converted to numbers).</p> <p>By default, it only allows safe numbers, see <a href="#numberunsafeenabled"><code data-language="javascript">number.unsafe()</code></a>.</p> <p>If the validation <code data-language="javascript">convert</code> option is on (enabled by default), a string will be converted to a <code data-language="javascript">number</code> if specified. Also, if <code data-language="javascript">convert</code> is on and <code data-language="javascript">number.precision()</code> is used, the value will be converted to the specified <code data-language="javascript">precision</code> as well.</p> <p><code data-language="javascript">Infinity</code> and <code data-language="javascript">-Infinity</code> are invalid by default, you can change that behavior by calling <code data-language="javascript">allow(Infinity, -Infinity)</code>.</p> <p>Supports the same methods of the <a href="#any"><code data-language="javascript">any()</code></a> type.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">number</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">number</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-c1">5</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#numberbase"><code data-language="javascript">number.base</code></a>, <a href="#numberinfinity"><code data-language="javascript">number.infinity</code></a></p> <h4 id="numbergreaterlimit">
<code data-language="javascript">number.greater(limit)</code>
</h4> <p>Specifies that the value must be greater than <code data-language="javascript">limit</code> or a reference.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">greater</span><span class="pl-kos">(</span><span class="pl-c1">5</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">min</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">max</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">greater</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'min'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#numbergreater"><code data-language="javascript">number.greater</code></a>, <a href="#numberref"><code data-language="javascript">number.ref</code></a></p> <h4 id="numberinteger">
<code data-language="javascript">number.integer()</code>
</h4> <p>Requires the number to be an integer (no floating point).</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">integer</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#numberbase"><code data-language="javascript">number.base</code></a></p> <h4 id="numberlesslimit">
<code data-language="javascript">number.less(limit)</code>
</h4> <p>Specifies that the value must be less than <code data-language="javascript">limit</code> or a reference.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">less</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">min</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">less</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'max'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">max</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#numberless"><code data-language="javascript">number.less</code></a>, <a href="#numberref"><code data-language="javascript">number.ref</code></a></p> <h4 id="numbermaxlimit">
<code data-language="javascript">number.max(limit)</code>
</h4> <p>Specifies the maximum value where:</p> <ul> <li> <code data-language="javascript">limit</code> - the maximum value allowed or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">min</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'max'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">max</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#numbermax"><code data-language="javascript">number.max</code></a>, <a href="#numberref"><code data-language="javascript">number.ref</code></a></p> <h4 id="numberminlimit">
<code data-language="javascript">number.min(limit)</code>
</h4> <p>Specifies the minimum value where:</p> <ul> <li> <code data-language="javascript">limit</code> - the minimum value allowed or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">min</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">max</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'min'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#numbermin"><code data-language="javascript">number.min</code></a>, <a href="#numberref"><code data-language="javascript">number.ref</code></a></p> <h4 id="numbermultiplebase">
<code data-language="javascript">number.multiple(base)</code>
</h4> <p>Specifies that the value must be a multiple of <code data-language="javascript">base</code> (or a reference):</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">multiple</span><span class="pl-kos">(</span><span class="pl-c1">3</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Notes: <code data-language="javascript">Joi.number.multiple(base)</code> <em>uses the modulo operator (%) to determine if a number is multiple of another number. Therefore, it has the normal limitations of Javascript modulo operator. The results with decimal/floats may be incorrect.</em></p> <p>Possible validation errors: <a href="#numbermultiple"><code data-language="javascript">number.multiple</code></a>, <a href="#numberref"><code data-language="javascript">number.ref</code></a></p> <h4 id="numbernegative">
<code data-language="javascript">number.negative()</code>
</h4> <p>Requires the number to be negative.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">negative</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#numbernegative-1"><code data-language="javascript">number.negative</code></a></p> <h4 id="numberport">
<code data-language="javascript">number.port()</code>
</h4> <p>Requires the number to be a TCP port, so between 0 and 65535.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">port</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#numberport-1"><code data-language="javascript">number.port</code></a></p> <h4 id="numberpositive">
<code data-language="javascript">number.positive()</code>
</h4> <p>Requires the number to be positive.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">positive</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#numberpositive-1"><code data-language="javascript">number.positive</code></a></p> <h4 id="numberprecisionlimit">
<code data-language="javascript">number.precision(limit)</code>
</h4> <p>Specifies the maximum number of decimal places where:</p> <ul> <li> <code data-language="javascript">limit</code> - the maximum number of decimal places allowed.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">precision</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#numberinteger-1"><code data-language="javascript">number.integer</code></a></p> <h4 id="numbersignsign">
<code data-language="javascript">number.sign(sign)</code>
</h4> <p>Requires the number to be negative or positive where: <code data-language="javascript">sign</code> - one of <code data-language="javascript">'negative'</code> or <code data-language="javascript">'positive'</code>.</p> <p>Possible validation errors: <a href="#numbernegative-1"><code data-language="javascript">number.negative</code></a>, <a href="#numberpositive-1"><code data-language="javascript">number.positive</code></a></p> <h4 id="numberunsafeenabled">
<code data-language="javascript">number.unsafe([enabled])</code>
</h4> <p>By default, numbers must be within JavaScript's safety range (<code data-language="javascript">Number.MIN_SAFE_INTEGER</code> &amp; <code data-language="javascript">Number.MAX_SAFE_INTEGER</code>), and when given a string, should be converted without loss of information. You can allow unsafe numbers at your own risks by calling <code data-language="javascript">number.unsafe()</code>.</p> <p>Parameters are:</p> <ul> <li> <code data-language="javascript">enabled</code> - optional parameter defaulting to <code data-language="javascript">true</code> which allows you to reset the behavior of unsafe by providing a falsy value.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">safeNumber</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">safeNumber</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-c1">90071992547409924</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// error -&gt; "value" must be a safe number</span>

<span class="pl-k">const</span> <span class="pl-s1">unsafeNumber</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unsafe</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">unsafeNumber</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-c1">90071992547409924</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// error -&gt; null</span>
<span class="pl-c">// value -&gt; 90071992547409920</span></pre></div> <p>Possible validation errors: <a href="#numberunsafe"><code data-language="javascript">number.unsafe</code></a></p> <h3 id="object">
<code data-language="javascript">object</code>
</h3> <p>Generates a schema object that matches an object data type. Defaults to allowing any child key.</p> <p>Supports the same methods of the <a href="#any"><code data-language="javascript">any()</code></a> type.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">object</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">integer</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-s">'some string'</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">await</span> <span class="pl-s1">object</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-c1">5</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Note that when an object schema type is passed as an input to another joi method (e.g. array item) or is set as a key definition, the <code data-language="javascript">Joi.object()</code> constructor may be omitted. For example:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">array</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">items</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectbase"><code data-language="javascript">object.base</code></a></p> <h4 id="objectandpeers-options">
<code data-language="javascript">object.and(...peers, [options])</code>
</h4> <p>Defines an all-or-nothing relationship between keys where if one of the peers is present, all of them are required as well where:</p> <ul> <li> <code data-language="javascript">peers</code> - the string key names of which if one present, all are required.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">separator</code> - overrides the default <code data-language="javascript">.</code> hierarchy separator. Set to <code data-language="javascript">false</code> to treat the <code data-language="javascript">key</code> as a literal value.</li> <li> <code data-language="javascript">isPresent</code> - function that overrides the default check for an empty value. Default: <code data-language="javascript">(resolved) =&gt; resolved !== undefined</code> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">and</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-s">'b'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectand"><code data-language="javascript">object.and</code></a></p> <h4 id="objectappendschema">
<code data-language="javascript">object.append([schema])</code>
</h4> <p>Appends the allowed object keys where:</p> <ul> <li> <code data-language="javascript">schema</code> - optional object where each key is assigned a <strong>joi</strong> type object. If <code data-language="javascript">schema</code> is <code data-language="javascript">null</code>,<code data-language="javascript">undefined</code> or <code data-language="javascript">{}</code> no changes will be applied. Uses object.keys([schema]) to append keys.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-c">// Validate key a</span>
<span class="pl-k">const</span> <span class="pl-s1">base</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// Validate keys a, b.</span>
<span class="pl-k">const</span> <span class="pl-s1">extended</span> <span class="pl-c1">=</span> <span class="pl-s1">base</span><span class="pl-kos">.</span><span class="pl-en">append</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="objectassertsubject-schema-message">
<code data-language="javascript">object.assert(subject, schema, [message])</code>
</h4> <p>Verifies an assertion where:</p> <ul> <li> <code data-language="javascript">subject</code> - the key name, <a href="#refkey-options">reference</a>, or template expression to validate. Note that the reference is resolved against the object itself as value, which means if you want to reference a key of the object being validated, you have to prefix the reference path with <code data-language="javascript">.</code>.</li> <li> <code data-language="javascript">schema</code> - the validation rules required to satisfy the assertion. If the <code data-language="javascript">schema</code> includes references, they are resolved against the object value, not the value of the <code data-language="javascript">subject</code> target.</li> <li> <code data-language="javascript">message</code> - optional human-readable message used when the assertion fails. Defaults to 'failed to pass the assertion test'.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-c1">d</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">e</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
    <span class="pl-kos">}</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">assert</span><span class="pl-kos">(</span><span class="pl-s">'.d.e'</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'a.c'</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s">'equal to a.c'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectassert"><code data-language="javascript">object.assert</code></a></p> <h4 id="objectinstanceconstructor-name">
<code data-language="javascript">object.instance(constructor, [name])</code>
</h4> <p>Requires the object to be an instance of a given constructor where:</p> <ul> <li> <code data-language="javascript">constructor</code> - the constructor function that the object must be an instance of.</li> <li> <code data-language="javascript">name</code> - an alternate name to use in validation errors. This is useful when the constructor function does not have a name.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">instance</span><span class="pl-kos">(</span><span class="pl-v">RegExp</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectinstance"><code data-language="javascript">object.instance</code></a></p> <h4 id="objectkeysschema">
<code data-language="javascript">object.keys([schema])</code>
</h4> <p>Sets or extends the allowed object keys where:</p> <ul> <li> <code data-language="javascript">schema</code> - optional object where each key is assigned a <strong>joi</strong> type object. If <code data-language="javascript">schema</code> is <code data-language="javascript">{}</code> no keys allowed. If <code data-language="javascript">schema</code> is <code data-language="javascript">null</code> or <code data-language="javascript">undefined</code>, any key allowed. If <code data-language="javascript">schema</code> is an object with keys, the keys are added to any previously defined keys (but narrows the selection if all keys previously allowed). Defaults to 'undefined' which allows any child key.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">base</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">keys</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// Validate keys a, b and c.</span>
<span class="pl-k">const</span> <span class="pl-s1">extended</span> <span class="pl-c1">=</span> <span class="pl-s1">base</span><span class="pl-kos">.</span><span class="pl-en">keys</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">c</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectunknown"><code data-language="javascript">object.unknown</code></a></p> <h4 id="objectlengthlimit">
<code data-language="javascript">object.length(limit)</code>
</h4> <p>Specifies the exact number of keys in the object where or a reference:</p> <ul> <li> <code data-language="javascript">limit</code> - the number of object keys allowed.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">length</span><span class="pl-kos">(</span><span class="pl-c1">5</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectlength"><code data-language="javascript">object.length</code></a>, <a href="#objectref"><code data-language="javascript">object.ref</code></a></p> <h4 id="objectmaxlimit">
<code data-language="javascript">object.max(limit)</code>
</h4> <p>Specifies the maximum number of keys in the object where:</p> <ul> <li> <code data-language="javascript">limit</code> - the highest number of object keys allowed or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectmax"><code data-language="javascript">object.max</code></a>, <a href="#objectref"><code data-language="javascript">object.ref</code></a></p> <h4 id="objectminlimit">
<code data-language="javascript">object.min(limit)</code>
</h4> <p>Specifies the minimum number of keys in the object where:</p> <ul> <li> <code data-language="javascript">limit</code> - the lowest number of keys allowed or a reference.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectmin"><code data-language="javascript">object.min</code></a>, <a href="#objectref"><code data-language="javascript">object.ref</code></a></p> <h4 id="objectnandpeers-options">
<code data-language="javascript">object.nand(...peers, [options])</code>
</h4> <p>Defines a relationship between keys where not all peers can be present at the same time where:</p> <ul> <li> <code data-language="javascript">peers</code> - the key names of which if one present, the others may not all be present.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">separator</code> - overrides the default <code data-language="javascript">.</code> hierarchy separator. Set to <code data-language="javascript">false</code> to treat the <code data-language="javascript">key</code> as a literal value.</li> <li> <code data-language="javascript">isPresent</code> - function that overrides the default check for an empty value. Default: <code data-language="javascript">(resolved) =&gt; resolved !== undefined</code> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">nand</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-s">'b'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectnand"><code data-language="javascript">object.nand</code></a></p> <h4 id="objectorpeers-options">
<code data-language="javascript">object.or(...peers, [options])</code>
</h4> <p>Defines a relationship between keys where one of the peers is required (and more than one is allowed) where:</p> <ul> <li> <code data-language="javascript">peers</code> - the key names of which at least one must appear.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">separator</code> - overrides the default <code data-language="javascript">.</code> hierarchy separator. Set to <code data-language="javascript">false</code> to treat the <code data-language="javascript">key</code> as a literal value.</li> <li> <code data-language="javascript">isPresent</code> - function that overrides the default check for an empty value. Default: <code data-language="javascript">(resolved) =&gt; resolved !== undefined</code> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">or</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-s">'b'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectmissing"><code data-language="javascript">object.missing</code></a></p> <h4 id="objectoxorpeers-options">
<code data-language="javascript">object.oxor(...peers, [options])</code>
</h4> <p>Defines an exclusive relationship between a set of keys where only one is allowed but none are required where:</p> <ul> <li> <code data-language="javascript">peers</code> - the exclusive key names that must not appear together but where none are required.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">separator</code> - overrides the default <code data-language="javascript">.</code> hierarchy separator. Set to <code data-language="javascript">false</code> to treat the <code data-language="javascript">key</code> as a literal value.</li> <li> <code data-language="javascript">isPresent</code> - function that overrides the default check for an empty value. Default: <code data-language="javascript">(resolved) =&gt; resolved !== undefined</code> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">oxor</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-s">'b'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectoxor"><code data-language="javascript">object.oxor</code></a></p> <h4 id="objectpatternpattern-schema-options">
<code data-language="javascript">object.pattern(pattern, schema, [options])</code>
</h4> <p>Specify validation rules for unknown keys matching a pattern where:</p> <ul> <li> <code data-language="javascript">pattern</code> - a pattern that can be either a regular expression or a <strong>joi</strong> schema that will be tested against the unknown key names. Note that if the pattern is a regular expression, for it to match the entire key name, it must begin with <code data-language="javascript">^</code> and end with <code data-language="javascript">$</code>.</li> <li> <code data-language="javascript">schema</code> - the schema object matching keys must validate against.</li> <li> <code data-language="javascript">options</code> - options settings: <ul> <li> <code data-language="javascript">fallthrough</code> - if <code data-language="javascript">true</code>, multiple matching patterns are tested against the key, otherwise once a pattern match is found, no other patterns are compared. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">matches</code> - a joi array schema used to validated the array of matching keys. For example, <code data-language="javascript">Joi.object().pattern(/\d/, Joi.boolean(), { matches: Joi.array().length(2) })</code> will require two matching keys. If the <code data-language="javascript">matches</code> schema is not an array type schema, it will be converted to <code data-language="javascript">Joi.array().items(matches)</code>. If the <code data-language="javascript">matches</code> schema contains references, they are resolved against the ancestors as follows: <ul> <li>self - the array of matching keys (<code data-language="javascript">Joi.ref('.length')</code>)</li> <li>parent - the object value containing the keys (<code data-language="javascript">Joi.ref('a')</code>)</li> </ul> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">pattern</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">\w</span><span class="pl-cce">\d</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// OR</span>

<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">pattern</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">5</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">boolean</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectpatternmatch"><code data-language="javascript">object.pattern.match</code></a></p> <h4 id="objectref">
<code data-language="javascript">object.ref()</code>
</h4> <p>Requires the object to be a <strong>joi</strong> reference.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectreftype"><code data-language="javascript">object.refType</code></a></p> <h4 id="objectregex">
<code data-language="javascript">object.regex()</code>
</h4> <p>Requires the object to be a <code data-language="javascript">RegExp</code> object.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">regex</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectregex"><code data-language="javascript">object.regex</code></a></p> <h4 id="objectrenamefrom-to-options">
<code data-language="javascript">object.rename(from, to, [options])</code>
</h4> <p>Renames a key to another name (deletes the renamed key) where:</p> <ul> <li> <code data-language="javascript">from</code> - the original key name or a regular expression matching keys.</li> <li> <code data-language="javascript">to</code> - the new key name. <code data-language="javascript">to</code> can be set to a <a href="#templatetemplate-options"><code data-language="javascript">template</code></a> which is rendered at runtime using the current value, global context, and local context if <code data-language="javascript">from</code> is a regular expression (e.g. the expression <code data-language="javascript">/^(\d+)$/</code> will match any all-digits keys with a capture group that is accessible in the template via <code data-language="javascript">{#1}</code>).</li> <li> <code data-language="javascript">options</code> - an optional object with the following optional keys: <ul> <li> <code data-language="javascript">alias</code> - if <code data-language="javascript">true</code>, does not delete the old key name, keeping both the new and old keys in place. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">multiple</code> - if <code data-language="javascript">true</code>, allows renaming multiple keys to the same destination where the last rename wins. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">override</code> - if <code data-language="javascript">true</code>, allows renaming a key over an existing key. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">ignoreUndefined</code> - if <code data-language="javascript">true</code>, skip renaming of a key if it's undefined. Defaults to <code data-language="javascript">false</code>.</li> </ul> </li> </ul> <p>Keys are renamed before any other validation rules are applied. If <code data-language="javascript">to</code> is a template that references the object own keys (e.g. <code data-language="javascript">'{.prefix}-{#1}'</code>), the value of these keys is the raw input value, not the value generated after validation. If a key is renamed and then its value fails to pass a validation rule, the error message will use the renamed key, not the original key which may be confusing for users (labels can help in some cases).</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">object</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">rename</span><span class="pl-kos">(</span><span class="pl-s">'b'</span><span class="pl-kos">,</span> <span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">await</span> <span class="pl-s1">object</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">b</span>: <span class="pl-c1">5</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Using a regular expression:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">regex</span> <span class="pl-c1">=</span> <span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span>foobar<span class="pl-cce">$</span><span class="pl-c1">/</span>i</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">fooBar</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">rename</span><span class="pl-kos">(</span><span class="pl-s1">regex</span><span class="pl-kos">,</span> <span class="pl-s">'fooBar'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">await</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">FooBar</span>: <span class="pl-s">'a'</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Using a regular expression with template:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">rename</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span><span class="pl-kos">(</span><span class="pl-cce">\d</span><span class="pl-c1">+</span><span class="pl-kos">)</span><span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">expression</span><span class="pl-kos">(</span><span class="pl-s">'x{#1}x'</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">pattern</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span>x<span class="pl-cce">\d</span><span class="pl-c1">+</span>x<span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">input</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
    <span class="pl-c1">123</span>: <span class="pl-s">'x'</span><span class="pl-kos">,</span>
    <span class="pl-c1">1</span>: <span class="pl-s">'y'</span><span class="pl-kos">,</span>
    <span class="pl-c1">0</span>: <span class="pl-s">'z'</span><span class="pl-kos">,</span>
    <span class="pl-c1">x4x</span>: <span class="pl-s">'test'</span>
<span class="pl-kos">}</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">value</span> <span class="pl-c1">=</span> <span class="pl-k">await</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">compile</span><span class="pl-kos">(</span><span class="pl-s1">schema</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s1">input</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// value === { x123x: 'x', x1x: 'y', x0x: 'z', x4x: 'test' }</span></pre></div> <p>Possible validation errors: <a href="#objectrenamemultiple"><code data-language="javascript">object.rename.multiple</code></a>, <a href="#objectrenameoverride"><code data-language="javascript">object.rename.override</code></a></p> <h4 id="objectschematype">
<code data-language="javascript">object.schema([type])</code>
</h4> <p>Requires the object to be a <strong>joi</strong> schema instance where:</p> <ul> <li> <code data-language="javascript">type</code> - optional <strong>joi</strong> schema to require.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">schema</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectschema-1"><code data-language="javascript">object.schema</code></a></p> <h4 id="objectunknownallow">
<code data-language="javascript">object.unknown([allow])</code>
</h4> <p>Overrides the handling of unknown keys for the scope of the current object only (does not apply to children) where:</p> <ul> <li> <code data-language="javascript">allow</code> - if <code data-language="javascript">false</code>, unknown keys are not allowed, otherwise unknown keys are ignored.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unknown</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectunknown"><code data-language="javascript">object.unknown</code></a></p> <h4 id="objectwithkey-peers-options">
<code data-language="javascript">object.with(key, peers, [options])</code>
</h4> <p>Requires the presence of other keys whenever the specified key is present where:</p> <ul> <li> <code data-language="javascript">key</code> - the reference key.</li> <li> <code data-language="javascript">peers</code> - the required peer key names that must appear together with <code data-language="javascript">key</code>. <code data-language="javascript">peers</code> can be a single string value or an array of string values.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">separator</code> - overrides the default <code data-language="javascript">.</code> hierarchy separator. Set to <code data-language="javascript">false</code> to treat the <code data-language="javascript">key</code> as a literal value.</li> <li> <code data-language="javascript">isPresent</code> - function that overrides the default check for an empty value. Default: <code data-language="javascript">(resolved) =&gt; resolved !== undefined</code> </li> </ul> </li> </ul> <p>Note that unlike <a href="#objectandpeers-options"><code data-language="javascript">object.and()</code></a>, <code data-language="javascript">with()</code> creates a dependency only between the <code data-language="javascript">key</code> and each of the <code data-language="javascript">peers</code>, not between the <code data-language="javascript">peers</code> themselves.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">with</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-s">'b'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectwith"><code data-language="javascript">object.with</code></a></p> <h4 id="objectwithoutkey-peers-options">
<code data-language="javascript">object.without(key, peers, [options])</code>
</h4> <p>Forbids the presence of other keys whenever the specified is present where:</p> <ul> <li> <code data-language="javascript">key</code> - the reference key.</li> <li> <code data-language="javascript">peers</code> - the forbidden peer key names that must not appear together with <code data-language="javascript">key</code>. <code data-language="javascript">peers</code> can be a single string value or an array of string values.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">separator</code> - overrides the default <code data-language="javascript">.</code> hierarchy separator. Set to <code data-language="javascript">false</code> to treat the <code data-language="javascript">key</code> as a literal value.</li> <li> <code data-language="javascript">isPresent</code> - function that overrides the default check for an empty value. Default: <code data-language="javascript">(resolved) =&gt; resolved !== undefined</code> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">without</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-kos">[</span><span class="pl-s">'b'</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectwithout"><code data-language="javascript">object.without</code></a></p> <h4 id="objectxorpeers-options">
<code data-language="javascript">object.xor(...peers, [options])</code>
</h4> <p>Defines an exclusive relationship between a set of keys where one of them is required but not at the same time where:</p> <ul> <li> <code data-language="javascript">peers</code> - the exclusive key names that must not appear together but where one of them is required.</li> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">separator</code> - overrides the default <code data-language="javascript">.</code> hierarchy separator. Set to <code data-language="javascript">false</code> to treat the <code data-language="javascript">key</code> as a literal value.</li> <li> <code data-language="javascript">isPresent</code> - function that overrides the default check for an empty value. Default: <code data-language="javascript">(resolved) =&gt; resolved !== undefined</code> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">any</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">xor</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">,</span> <span class="pl-s">'b'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#objectxor"><code data-language="javascript">object.xor</code></a>, <a href="#objectmissing"><code data-language="javascript">object.missing</code></a></p> <h3 id="string">
<code data-language="javascript">string</code>
</h3> <p>Generates a schema object that matches a string data type.</p> <p><strong>Note that the empty string is not allowed by default and must be enabled with <code data-language="javascript">allow('')</code>. Don't over think, just remember that the empty string is not a valid string by default. Also, don't ask to change it or argue why it doesn't make sense. This topic is closed.</strong></p> <p>To specify a default value in case of the empty string use:</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">empty</span><span class="pl-kos">(</span><span class="pl-s">''</span><span class="pl-kos">)</span>
    <span class="pl-kos">.</span><span class="pl-en">default</span><span class="pl-kos">(</span><span class="pl-s">'default value'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>If the <code data-language="javascript">convert</code> preference is <code data-language="javascript">true</code> (the default value), a string will be converted using the specified modifiers for <code data-language="javascript">string.lowercase()</code>, <code data-language="javascript">string.uppercase()</code>, <code data-language="javascript">string.trim()</code>, and each replacement specified with <code data-language="javascript">string.replace()</code>.</p> <p>Supports the same methods of the <a href="#any"><code data-language="javascript">any()</code></a> type.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">1</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s">'12345'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringbase"><code data-language="javascript">string.base</code></a>, <a href="#stringempty"><code data-language="javascript">string.empty</code></a></p> <h4 id="stringalphanum">
<code data-language="javascript">string.alphanum()</code>
</h4> <p>Requires the string value to only contain a-z, A-Z, and 0-9.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">alphanum</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringalphanum-1"><code data-language="javascript">string.alphanum</code></a></p> <h4 id="stringbase64options">
<code data-language="javascript">string.base64([options])</code>
</h4> <p>Requires the string value to be a valid base64 string; does not check the decoded value.</p> <ul> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">paddingRequired</code> - if <code data-language="javascript">true</code>, the string must be properly padded with the <code data-language="javascript">=</code> characters. Defaults to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">urlSafe</code> - if <code data-language="javascript">true</code>, uses the URI-safe base64 format which replaces <code data-language="javascript">+</code> with <code data-language="javascript">-</code> and <code data-language="javascript">\</code> with <code data-language="javascript">_</code>. Defaults to <code data-language="javascript">false</code>.</li> </ul> </li> </ul> <p>Padding characters are not required for decoding, as the number of missing bytes can be inferred from the number of digits. With that said, try to use padding if at all possible.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">base64</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'VE9PTUFOWVNFQ1JFVFM'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: "value" must be a valid base64 string</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'VE9PTUFOWVNFQ1JFVFM='</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// No Error</span>

<span class="pl-k">const</span> <span class="pl-s1">paddingRequiredSchema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">base64</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">paddingRequired</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">paddingRequiredSchema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'VE9PTUFOWVNFQ1JFVFM'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: "value" must be a valid base64 string</span>
<span class="pl-s1">paddingRequiredSchema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'VE9PTUFOWVNFQ1JFVFM='</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// No Error</span>

<span class="pl-k">const</span> <span class="pl-s1">paddingOptionalSchema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">base64</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">paddingRequired</span>: <span class="pl-c1">false</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">paddingOptionalSchema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'VE9PTUFOWVNFQ1JFVFM'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// No Error</span>
<span class="pl-s1">paddingOptionalSchema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'VE9PTUFOWVNFQ1JFVFM='</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// No Error</span></pre></div> <p>Possible validation errors: <a href="#stringbase64"><code data-language="javascript">string.base64</code></a></p> <h4 id="stringcasedirection">
<code data-language="javascript">string.case(direction)</code>
</h4> <p>Sets the required string case where:</p> <ul> <li> <code data-language="javascript">direction</code> - can be either <code data-language="javascript">'upper'</code> or <code data-language="javascript">'lower'</code>.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">case</span><span class="pl-kos">(</span><span class="pl-s">'lower'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringlowercase-1"><code data-language="javascript">string.lowercase</code></a> <a href="#stringuppercase-1"><code data-language="javascript">string.uppercase</code></a></p> <h4 id="stringcreditcard">
<code data-language="javascript">string.creditCard()</code>
</h4> <p>Requires the number to be a credit card number (Using <a href="http://en.wikipedia.org/wiki/Luhn_algorithm" rel="nofollow">Luhn Algorithm</a>).</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">creditCard</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringcreditcard-1"><code data-language="javascript">string.creditCard</code></a></p> <h4 id="stringdataurioptions">
<code data-language="javascript">string.dataUri([options])</code>
</h4> <p>Requires the string value to be a valid data URI string.</p> <ul> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">paddingRequired</code> - optional parameter defaulting to <code data-language="javascript">true</code> which will require <code data-language="javascript">=</code> padding if <code data-language="javascript">true</code> or make padding optional if <code data-language="javascript">false</code>.</li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">dataUri</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'VE9PTUFOWVNFQ1JFVFM='</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: "value" must be a valid dataUri string</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'data:image/png;base64,VE9PTUFOWVNFQ1JFVFM='</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// No Error</span></pre></div> <p>Possible validation errors: <a href="#stringdatauri"><code data-language="javascript">string.dataUri</code></a></p> <h4 id="stringdomainoptions">
<code data-language="javascript">string.domain([options])</code>
</h4> <p>Requires the string value to be a valid domain name.</p> <ul> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">allowFullyQualified</code> - if <code data-language="javascript">true</code>, domains ending with a <code data-language="javascript">.</code> character are permitted. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">allowUnicode</code> - if <code data-language="javascript">true</code>, Unicode characters are permitted. Defaults to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">allowUnderscore</code> - if <code data-language="javascript">true</code>, underscores (<code data-language="javascript">_</code>) are allowed in the domain name. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">minDomainSegments</code> - number of segments required for the domain. Defaults to <code data-language="javascript">2</code>.</li> <li> <code data-language="javascript">maxDomainSegments</code> - maximum number of allowed domain segments. Default to no limit.</li> <li> <code data-language="javascript">tlds</code> - options for TLD (top level domain) validation. By default, the TLD must be a valid name listed on the <a href="http://data.iana.org/TLD/tlds-alpha-by-domain.txt" rel="nofollow">IANA registry</a>. To disable validation, set <code data-language="javascript">tlds</code> to <code data-language="javascript">false</code>. To customize how TLDs are validated, set one of these: <ul> <li> <code data-language="javascript">allow</code> - one of: <ul> <li> <code data-language="javascript">true</code> to use the IANA list of registered TLDs. This is the default value.</li> <li> <code data-language="javascript">false</code> to allow any TLD not listed in the <code data-language="javascript">deny</code> list, if present.</li> <li>a <code data-language="javascript">Set</code> or array of the allowed TLDs. Cannot be used together with <code data-language="javascript">deny</code>.</li> </ul> </li> <li> <code data-language="javascript">deny</code> - one of: <ul> <li>a <code data-language="javascript">Set</code> or array of the forbidden TLDs. Cannot be used together with a custom <code data-language="javascript">allow</code> list.</li> </ul> </li> </ul> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">domain</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringdomain"><code data-language="javascript">string.domain</code></a></p> <h4 id="stringemailoptions">
<code data-language="javascript">string.email([options])</code>
</h4> <p>Requires the string value to be a valid email address.</p> <ul> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">allowFullyQualified</code> - if <code data-language="javascript">true</code>, domains ending with a <code data-language="javascript">.</code> character are permitted. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">allowUnicode</code> - if <code data-language="javascript">true</code>, Unicode characters are permitted. Defaults to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">allowUnderscore</code> - if <code data-language="javascript">true</code>, underscores (<code data-language="javascript">_</code>) are allowed in the domain name. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">ignoreLength</code> - if <code data-language="javascript">true</code>, ignore invalid email length errors. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">minDomainSegments</code> - number of segments required for the domain. The default setting excludes single segment domains such as <code data-language="javascript">example@io</code> which is a valid email but very uncommon. Defaults to <code data-language="javascript">2</code>.</li> <li> <code data-language="javascript">maxDomainSegments</code> - maximum number of allowed domain segments. Default to no limit.</li> <li> <code data-language="javascript">multiple</code> - if <code data-language="javascript">true</code>, allows multiple email addresses in a single string, separated by <code data-language="javascript">,</code> or the <code data-language="javascript">separator</code> characters. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">separator</code> - when <code data-language="javascript">multiple</code> is <code data-language="javascript">true</code>, overrides the default <code data-language="javascript">,</code> separator. String can be a single character or multiple separator characters. Defaults to <code data-language="javascript">','</code>.</li> <li> <code data-language="javascript">tlds</code> - options for TLD (top level domain) validation. By default, the TLD must be a valid name listed on the <a href="http://data.iana.org/TLD/tlds-alpha-by-domain.txt" rel="nofollow">IANA registry</a>. To disable validation, set <code data-language="javascript">tlds</code> to <code data-language="javascript">false</code>. To customize how TLDs are validated, set one of these: <ul> <li> <code data-language="javascript">allow</code> - one of: <ul> <li> <code data-language="javascript">true</code> to use the IANA list of registered TLDs. This is the default value.</li> <li> <code data-language="javascript">false</code> to allow any TLD not listed in the <code data-language="javascript">deny</code> list, if present.</li> <li>a <code data-language="javascript">Set</code> or array of the allowed TLDs. Cannot be used together with <code data-language="javascript">deny</code>.</li> </ul> </li> <li> <code data-language="javascript">deny</code> - one of: <ul> <li>a <code data-language="javascript">Set</code> or array of the forbidden TLDs. Cannot be used together with a custom <code data-language="javascript">allow</code> list.</li> </ul> </li> </ul> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">email</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Note that quoted email addresses (e.g. <code data-language="javascript">"test"@example.com</code>) are not supported and will fail validation.</p> <p>Possible validation errors: <a href="#stringemail"><code data-language="javascript">string.email</code></a></p> <h4 id="stringguid---aliases-uuid">
 <code data-language="javascript">string.guid()</code> - aliases: <code data-language="javascript">uuid</code> </h4> <p>Requires the string value to be a valid GUID.</p> <ul> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">version</code> - specifies one or more acceptable versions. Can be an Array or String with the following values: <code data-language="javascript">uuidv1</code>, <code data-language="javascript">uuidv2</code>, <code data-language="javascript">uuidv3</code>, <code data-language="javascript">uuidv4</code>, or <code data-language="javascript">uuidv5</code>. If no <code data-language="javascript">version</code> is specified then it is assumed to be a generic <code data-language="javascript">guid</code> which will not validate the version or variant of the guid and just check for general structure format.</li> <li> <code data-language="javascript">separator</code> - defines the allowed or required GUID separator where: <ul> <li> <code data-language="javascript">true</code> - a separator is required, can be either <code data-language="javascript">:</code> or <code data-language="javascript">-</code>.</li> <li> <code data-language="javascript">false</code> - separator is not allowed.</li> <li> <code data-language="javascript">'-'</code> - a dash separator is required.</li> <li> <code data-language="javascript">':'</code> - a colon separator is required.</li> <li>defaults to optional <code data-language="javascript">:</code> or <code data-language="javascript">-</code> separator.</li> </ul> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">guid</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">version</span>: <span class="pl-kos">[</span>
        <span class="pl-s">'uuidv4'</span><span class="pl-kos">,</span>
        <span class="pl-s">'uuidv5'</span>
    <span class="pl-kos">]</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringguid"><code data-language="javascript">string.guid</code></a></p> <h4 id="stringhexoptions">
<code data-language="javascript">string.hex([options])</code>
</h4> <p>Requires the string value to be a valid hexadecimal string.</p> <ul> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">byteAligned</code> - Boolean specifying whether you want to check that the hexadecimal string is byte aligned. If <code data-language="javascript">convert</code> is <code data-language="javascript">true</code>, a <code data-language="javascript">0</code> will be added in front of the string in case it needs to be aligned. Defaults to <code data-language="javascript">false</code>.</li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">hex</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringhex"><code data-language="javascript">string.hex</code></a>, <a href="#stringhexalign"><code data-language="javascript">string.hexAlign</code></a></p> <h4 id="stringhostname">
<code data-language="javascript">string.hostname()</code>
</h4> <p>Requires the string value to be a valid hostname as per <a href="http://tools.ietf.org/html/rfc1123" rel="nofollow">RFC1123</a>.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">hostname</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringhostname-1"><code data-language="javascript">string.hostname</code></a></p> <h4 id="stringinsensitive">
<code data-language="javascript">string.insensitive()</code>
</h4> <p>Allows the value to match any value in the allowed list or disallowed list in a case insensitive comparison.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">valid</span><span class="pl-kos">(</span><span class="pl-s">'a'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">insensitive</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="stringipoptions">
<code data-language="javascript">string.ip([options])</code>
</h4> <p>Requires the string value to be a valid ip address.</p> <ul> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">version</code> - One or more IP address versions to validate against. Valid values: <code data-language="javascript">ipv4</code>, <code data-language="javascript">ipv6</code>, <code data-language="javascript">ipvfuture</code> </li> <li> <code data-language="javascript">cidr</code> - Used to determine if a CIDR is allowed or not. Valid values: <code data-language="javascript">optional</code>, <code data-language="javascript">required</code>, <code data-language="javascript">forbidden</code> </li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-c">// Accept only ipv4 and ipv6 addresses with a CIDR</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">ip</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">version</span>: <span class="pl-kos">[</span>
    <span class="pl-s">'ipv4'</span><span class="pl-kos">,</span>
    <span class="pl-s">'ipv6'</span>
  <span class="pl-kos">]</span><span class="pl-kos">,</span>
  <span class="pl-c1">cidr</span>: <span class="pl-s">'required'</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringip"><code data-language="javascript">string.ip</code></a>, <a href="#stringipversion"><code data-language="javascript">string.ipVersion</code></a></p> <h4 id="stringisodate">
<code data-language="javascript">string.isoDate()</code>
</h4> <p>Requires the string value to be in valid ISO 8601 date format.</p> <p>If the validation <code data-language="javascript">convert</code> option is on (enabled by default), the string will be forced to simplified extended ISO format (ISO 8601). Be aware that this operation uses javascript Date object, which does not support the full ISO format, so a few formats might not pass when using <code data-language="javascript">convert</code>.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">isoDate</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'2018-11-28T18:25:32+00:00'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// No Error</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'20181-11-28T18:25:32+00:00'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: must be a valid 8601 date</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">''</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: must be a valid 8601 date</span></pre></div> <p>Possible validation errors: <a href="#stringisodate-1"><code data-language="javascript">string.isoDate</code></a></p> <h4 id="stringisoduration">
<code data-language="javascript">string.isoDuration()</code>
</h4> <p>Requires the string value to be in valid ISO 8601 duration format.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">isoDuration</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'P3Y6M4DT12H30M5S'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// No Error</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'2018-11-28T18:25:32+00:00'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: must be a valid ISO 8601 duration</span>
<span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">''</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: must be a valid ISO 8601 duration</span></pre></div> <p>Possible validation errors: <a href="#stringisoduration-1"><code data-language="javascript">string.isoDuration</code></a></p> <h4 id="stringlengthlimit-encoding">
<code data-language="javascript">string.length(limit, [encoding])</code>
</h4> <p>Specifies the exact string length required where:</p> <ul> <li> <code data-language="javascript">limit</code> - the required string length or a reference.</li> <li> <code data-language="javascript">encoding</code> - if specified, the string length is calculated in bytes using the provided encoding.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">length</span><span class="pl-kos">(</span><span class="pl-c1">5</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">length</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">value</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">length</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'length'</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s">'utf8'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringlength"><code data-language="javascript">string.length</code></a>, <a href="#stringref"><code data-language="javascript">string.ref</code></a></p> <h4 id="stringlowercase">
<code data-language="javascript">string.lowercase()</code>
</h4> <p>Requires the string value to be all lowercase. If the validation <code data-language="javascript">convert</code> option is on (enabled by default), the string will be forced to lowercase.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">lowercase</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringlowercase-1"><code data-language="javascript">string.lowercase</code></a></p> <h4 id="stringmaxlimit-encoding">
<code data-language="javascript">string.max(limit, [encoding])</code>
</h4> <p>Specifies the maximum number of string characters where:</p> <ul> <li> <code data-language="javascript">limit</code> - the maximum number of string characters allowed or a reference.</li> <li> <code data-language="javascript">encoding</code> - if specified, the string length is calculated in bytes using the provided encoding.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">10</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">max</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">value</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'max'</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s">'utf8'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringmax"><code data-language="javascript">string.max</code></a>, <a href="#stringref"><code data-language="javascript">string.ref</code></a></p> <h4 id="stringminlimit-encoding">
<code data-language="javascript">string.min(limit, [encoding])</code>
</h4> <p>Specifies the minimum number string characters where:</p> <ul> <li> <code data-language="javascript">limit</code> - the minimum number of string characters required or a reference.</li> <li> <code data-language="javascript">encoding</code> - if specified, the string length is calculated in bytes using the provided encoding.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">min</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
  <span class="pl-c1">value</span>: <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">min</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'min'</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s">'utf8'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">required</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringmin"><code data-language="javascript">string.min</code></a>, <a href="#stringref"><code data-language="javascript">string.ref</code></a></p> <h4 id="stringnormalizeform">
<code data-language="javascript">string.normalize([form])</code>
</h4> <p>Requires the string value to be in a <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/normalize" rel="nofollow">Unicode normalized</a> form. If the validation <code data-language="javascript">convert</code> option is on (enabled by default), the string will be normalized.</p> <ul> <li> <code data-language="javascript">form</code> - The Unicode normalization form to use. Valid values: <code data-language="javascript">NFC</code> [default], <code data-language="javascript">NFD</code>, <code data-language="javascript">NFKC</code>, <code data-language="javascript">NFKD</code> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">normalize</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// defaults to NFC</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">normalize</span><span class="pl-kos">(</span><span class="pl-s">'NFC'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// canonical composition</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">normalize</span><span class="pl-kos">(</span><span class="pl-s">'NFD'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// canonical decomposition</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">normalize</span><span class="pl-kos">(</span><span class="pl-s">'NFKC'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// compatibility composition</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">normalize</span><span class="pl-kos">(</span><span class="pl-s">'NFKD'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// compatibility decomposition</span></pre></div> <p>Possible validation errors: <a href="#stringnormalize"><code data-language="javascript">string.normalize</code></a></p> <h4 id="stringpatternregex-name--options---aliases-regex">
 <code data-language="javascript">string.pattern(regex, [name | options])</code> - aliases: <code data-language="javascript">regex</code> </h4> <p>Defines a pattern rule where:</p> <ul> <li> <code data-language="javascript">regex</code> - a regular expression object the string value must match against. Note that if the pattern is a regular expression, for it to match the entire key name, it must begin with <code data-language="javascript">^</code> and end with <code data-language="javascript">$</code>.</li> <li> <code data-language="javascript">name</code> - optional name for patterns (useful with multiple patterns).</li> <li> <code data-language="javascript">options</code> - an optional configuration object with the following supported properties: <ul> <li> <code data-language="javascript">name</code> - optional pattern name.</li> <li> <code data-language="javascript">invert</code> - optional boolean flag. Defaults to <code data-language="javascript">false</code> behavior. If specified as <code data-language="javascript">true</code>, the provided pattern will be disallowed instead of required.</li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">pattern</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span><span class="pl-kos">[</span>abc<span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">inlineNamedSchema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">pattern</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span><span class="pl-kos">[</span>0-9<span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span> <span class="pl-s">'numbers'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">inlineNamedSchema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'alpha'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: "value" with value "alpha" fails to match the numbers pattern</span>

<span class="pl-k">const</span> <span class="pl-s1">namedSchema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">pattern</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span><span class="pl-kos">[</span>0-9<span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">name</span>: <span class="pl-s">'numbers'</span><span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">namedSchema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'alpha'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: "value" with value "alpha" fails to match the numbers pattern</span>

<span class="pl-k">const</span> <span class="pl-s1">invertedSchema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">pattern</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span><span class="pl-kos">[</span>a-z<span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">invert</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">invertedSchema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'lowercase'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: "value" with value "lowercase" matches the inverted pattern: [a-z]</span>

<span class="pl-k">const</span> <span class="pl-s1">invertedNamedSchema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">pattern</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span><span class="pl-cce">^</span><span class="pl-kos">[</span>a-z<span class="pl-kos">]</span><span class="pl-c1">+</span><span class="pl-cce">$</span><span class="pl-c1">/</span></span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">name</span>: <span class="pl-s">'alpha'</span><span class="pl-kos">,</span> <span class="pl-c1">invert</span>: <span class="pl-c1">true</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-s1">invertedNamedSchema</span><span class="pl-kos">.</span><span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s">'lowercase'</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// ValidationError: "value" with value "lowercase" matches the inverted alpha pattern</span></pre></div> <p>Possible validation errors: <a href="#stringpatternbase"><code data-language="javascript">string.pattern.base</code></a>, <a href="#stringpatterninvertbase"><code data-language="javascript">string.pattern.invert.base</code></a>, <a href="#stringpatterninvertname"><code data-language="javascript">string.pattern.invert.name</code></a>, <a href="#stringpatternname"><code data-language="javascript">string.pattern.name</code></a></p> <h4 id="stringreplacepattern-replacement">
<code data-language="javascript">string.replace(pattern, replacement)</code>
</h4> <p>Replace characters matching the given <em>pattern</em> with the specified <em>replacement</em> string where:</p> <ul> <li> <code data-language="javascript">pattern</code> - a regular expression object to match against, or a string of which <em>all</em> occurrences will be replaced.</li> <li> <code data-language="javascript">replacement</code> - the string that will replace the pattern.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">replace</span><span class="pl-kos">(</span><span class="pl-pds"><span class="pl-c1">/</span>b<span class="pl-c1">/</span>gi</span><span class="pl-kos">,</span> <span class="pl-s">'x'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s">'abBc'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>  <span class="pl-c">// return value will be 'axxc'</span></pre></div> <p>When <code data-language="javascript">pattern</code> is a <em>string</em> all its occurrences will be replaced.</p> <h4 id="stringtoken">
<code data-language="javascript">string.token()</code>
</h4> <p>Requires the string value to only contain a-z, A-Z, 0-9, and underscore _.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">token</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringtoken-1"><code data-language="javascript">string.token</code></a></p> <h4 id="stringtrimenabled">
<code data-language="javascript">string.trim([enabled])</code>
</h4> <p>Requires the string value to contain no whitespace before or after. If the validation <code data-language="javascript">convert</code> option is on (enabled by default), the string will be trimmed.</p> <p>Parameters are:</p> <ul> <li> <code data-language="javascript">enabled</code> - optional parameter defaulting to <code data-language="javascript">true</code> which allows you to reset the behavior of trim by providing a falsy value.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">trim</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">trim</span><span class="pl-kos">(</span><span class="pl-c1">false</span><span class="pl-kos">)</span><span class="pl-kos">;</span> <span class="pl-c">// disable trim flag</span></pre></div> <p>Possible validation errors: <a href="#stringtrim"><code data-language="javascript">string.trim</code></a></p> <h4 id="stringtruncateenabled">
<code data-language="javascript">string.truncate([enabled])</code>
</h4> <p>Specifies whether the <code data-language="javascript">string.max()</code> limit should be used as a truncation.</p> <p>Parameters are:</p> <ul> <li> <code data-language="javascript">enabled</code> - optional parameter defaulting to <code data-language="javascript">true</code> which allows you to reset the behavior of truncate by providing a falsy value.</li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">max</span><span class="pl-kos">(</span><span class="pl-c1">5</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">truncate</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h4 id="stringuppercase">
<code data-language="javascript">string.uppercase()</code>
</h4> <p>Requires the string value to be all uppercase. If the validation <code data-language="javascript">convert</code> option is on (enabled by default), the string will be forced to uppercase.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">uppercase</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringuppercase-1"><code data-language="javascript">string.uppercase</code></a></p> <h4 id="stringurioptions">
<code data-language="javascript">string.uri([options])</code>
</h4> <p>Requires the string value to be a valid <a href="http://tools.ietf.org/html/rfc3986" rel="nofollow">RFC 3986</a> URI.</p> <ul> <li> <code data-language="javascript">options</code> - optional settings: <ul> <li> <code data-language="javascript">scheme</code> - Specifies one or more acceptable Schemes, should only include the scheme name. Can be an Array or String (strings are automatically escaped for use in a Regular Expression).</li> <li> <code data-language="javascript">allowRelative</code> - Allow relative URIs. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">relativeOnly</code> - Restrict only relative URIs. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">allowQuerySquareBrackets</code> - Allows unencoded square brackets inside the query string. This is <strong>NOT</strong> RFC 3986 compliant but query strings like <code data-language="javascript">abc[]=123&amp;abc[]=456</code> are very common these days. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">domain</code> - Validate the domain component using the options specified in <a href="#stringdomainoptions"><code data-language="javascript">string.domain()</code></a>.</li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-c">// Accept git or git http/https</span>
<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">string</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">uri</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
  <span class="pl-c1">scheme</span>: <span class="pl-kos">[</span>
    <span class="pl-s">'git'</span><span class="pl-kos">,</span>
    <span class="pl-pds"><span class="pl-c1">/</span>git<span class="pl-cce">\+</span>https?<span class="pl-c1">/</span></span>
  <span class="pl-kos">]</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#stringuri"><code data-language="javascript">string.uri</code></a>, <a href="#stringuricustomscheme"><code data-language="javascript">string.uriCustomScheme</code></a>, <a href="#stringurirelativeonly"><code data-language="javascript">string.uriRelativeOnly</code></a>, <a href="#stringdomain"><code data-language="javascript">string.domain</code></a></p> <h3 id="symbol">
<code data-language="javascript">symbol</code>
</h3> <p>Generates a schema object that matches a <code data-language="javascript">Symbol</code> data type.</p> <p>If the validation <code data-language="javascript">convert</code> option is on (enabled by default), the mappings declared in <code data-language="javascript">map()</code> will be tried for an eventual match.</p> <p>Supports the same methods of the <a href="#any"><code data-language="javascript">any()</code></a> type.</p> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">symbol</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">map</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-s">'foo'</span>: <span class="pl-v">Symbol</span><span class="pl-kos">(</span><span class="pl-s">'foo'</span><span class="pl-kos">)</span><span class="pl-kos">,</span> <span class="pl-s">'bar'</span>: <span class="pl-v">Symbol</span><span class="pl-kos">(</span><span class="pl-s">'bar'</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-k">await</span> <span class="pl-s1">schema</span><span class="pl-kos">.</span><span class="pl-en">validateAsync</span><span class="pl-kos">(</span><span class="pl-s">'foo'</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#symbolbase"><code data-language="javascript">symbol.base</code></a></p> <h4 id="symbolmapmap">
<code data-language="javascript">symbol.map(map)</code>
</h4> <p>Allows values to be transformed into <code data-language="javascript">Symbol</code>s, where:</p> <ul> <li> <code data-language="javascript">map</code> - mapping declaration that can be: <ul> <li>an object, where keys are strings, and values are <code data-language="javascript">Symbol</code>s</li> <li>an array of arrays of length 2, where for each sub-array, the 1st element must be anything but an object, a function or a <code data-language="javascript">Symbol</code>, and the 2nd element must be a Symbol</li> <li>a <code data-language="javascript">Map</code>, following the same principles as the array above</li> </ul> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">symbol</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">map</span><span class="pl-kos">(</span><span class="pl-kos">[</span>
    <span class="pl-kos">[</span><span class="pl-c1">1</span><span class="pl-kos">,</span> <span class="pl-v">Symbol</span><span class="pl-kos">(</span><span class="pl-s">'one'</span><span class="pl-kos">)</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
    <span class="pl-kos">[</span><span class="pl-s">'two'</span><span class="pl-kos">,</span> <span class="pl-v">Symbol</span><span class="pl-kos">(</span><span class="pl-s">'two'</span><span class="pl-kos">)</span><span class="pl-kos">]</span>
<span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <p>Possible validation errors: <a href="#symbolmap"><code data-language="javascript">symbol.map</code></a></p> <h2>
Extensions</h2> <p>Before writing your own extensions, it is useful to understand how input values are processed. When <code data-language="javascript">validate()</code> is called, Joi does the following:</p> <ul> <li>Generates a new schema if the current one contains dynamic construction rules such as <code data-language="javascript">when()</code> or <code data-language="javascript">link()</code>.</li> <li>Merges the validation options with the ones passed via <a href="#anyprefsoptions---aliases-preferences-options"><code data-language="javascript">any.prefs()</code></a>.</li> <li>Returns the result if caching is enabled and the input value is found in the cache.</li> <li>Runs the <code data-language="javascript">prepare</code> method defined below. If a validation error is returned, the process will be aborted regardless of <code data-language="javascript">abortEarly</code>.</li> <li>Coerces the input value using the <code data-language="javascript">coerce</code> method defined below if <code data-language="javascript">convert</code> is enabled. If a validation error is returned, the process will be aborted regardless of <code data-language="javascript">abortEarly</code>.</li> <li>If the input value matches the schema passed to <a href="#anyemptyschema"><code data-language="javascript">any.empty()</code></a>, it is converted to <code data-language="javascript">undefined</code>.</li> <li>Validates presences.</li> <li>Validates allowed/valid/invalid values.</li> <li>Runs base validation using the <code data-language="javascript">validate</code> method defined below. If a validation error is returned, the process will be aborted regardless of <code data-language="javascript">abortEarly</code>.</li> <li>Runs validation rules.</li> </ul> <p><strong>Note that extending schemas do not change the order in which Joi performs the above steps</strong></p> <p>The <a href="#extendextensions"><code data-language="javascript">extend()</code></a> method adds custom types to <strong>joi</strong>. Extensions can be:</p> <ul> <li>a single extension object.</li> <li>a factory function generating an extension object.</li> </ul> <p>Where:</p> <ul> <li> <p><code data-language="javascript">type</code>: The type of schema. Can be a string, or a regular expression that matches multiple types.</p> </li> <li> <p><code data-language="javascript">base</code>: The base schema to extend from. This key is forbidden when <code data-language="javascript">type</code> is a regular expression.</p> </li> <li> <p><code data-language="javascript">messages</code>: A hash of error codes and their messages. To interpolate dynamic values, use the <a href="#template-syntax">template syntax</a>.</p> </li> <li> <p><code data-language="javascript">flags</code>: A hash of flag names and their definitions where:</p> <ul> <li> <code data-language="javascript">default</code>: The default value of the flag. When <code data-language="javascript">describe()</code> is called and the current flag matches this default value, it will be omitted entirely from the description.</li> </ul> </li> <li> <p><code data-language="javascript">prepare</code>: A function with signature <code data-language="javascript">function (value, helpers) {}</code> that prepares the input value (for example, converts <code data-language="javascript">,</code> to <code data-language="javascript">.</code> to support multiple decimal representations) where:</p> <ul> <li> <code data-language="javascript">value</code>: The input value.</li> <li> <code data-language="javascript">helpers</code>: <a href="#validation-helpers">Validation helpers</a> </li> </ul> <p>Must return an object with one of the following keys:</p> <ul> <li> <code data-language="javascript">value</code>: The modified value.</li> <li> <code data-language="javascript">errors</code>: Validation error(s) generated by <code data-language="javascript">$_createError()</code> or <code data-language="javascript">helpers.error()</code>.</li> </ul> <p>If <code data-language="javascript">errors</code> is defined, validation will abort regardless of <code data-language="javascript">abortEarly</code>. Refer to the validation process above for further information.</p> </li> <li> <p><code data-language="javascript">coerce</code>: A function with signature <code data-language="javascript">function (value, helpers) {}</code> that coerces the input value where:</p> <ul> <li> <code data-language="javascript">value</code>: The input value.</li> <li> <code data-language="javascript">helpers</code>: <a href="#validation-helpers">Validation helpers</a> </li> </ul> <p>You can also pass an object where:</p> <ul> <li> <code data-language="javascript">from</code>: The type(s) to convert from. Can be a single string or an array of strings. Joi will only run <code data-language="javascript">method</code> if the value <code data-language="javascript">typeof</code> of the input value is equal to one of the provided values.</li> <li> <code data-language="javascript">method</code>: A function with signature <code data-language="javascript">function (value, helpers)</code> that coerces the input value where: <ul> <li> <code data-language="javascript">value</code>: The input value.</li> <li> <code data-language="javascript">helpers</code>: <a href="#validation-helpers">Validation helpers</a> </li> </ul> </li> </ul> <p>Must return an object with one of the following keys:</p> <ul> <li> <code data-language="javascript">value</code>: The modified value.</li> <li> <code data-language="javascript">errors</code>: Validation error(s) generated by <code data-language="javascript">$_createError()</code> or <code data-language="javascript">helpers.error()</code>.</li> </ul> <p>If <code data-language="javascript">errors</code> is defined, validation will abort regardless of <code data-language="javascript">abortEarly</code>. Refer to the validation process above for further information.</p> </li> <li> <p><code data-language="javascript">validate</code>: A function with signature <code data-language="javascript">function (value, helpers) {}</code> that performs base validation on the input value where:</p> <ul> <li> <code data-language="javascript">value</code>: The input value.</li> <li> <code data-language="javascript">helpers</code>: <a href="#validation-helpers">Validation helpers</a> </li> </ul> <p>Must return an object with one of the following keys:</p> <ul> <li> <code data-language="javascript">value</code>: The modified value.</li> <li> <code data-language="javascript">errors</code>: Validation error(s) generated by <code data-language="javascript">$_createError()</code> or <code data-language="javascript">helpers.error()</code>.</li> </ul> <p>If <code data-language="javascript">errors</code> is defined, validation will abort regardless of <code data-language="javascript">abortEarly</code>. Refer to the validation process above for further information.</p> </li> <li> <p><code data-language="javascript">rules</code>: A hash of validation rule names and their implementation where:</p> <ul> <li> <code data-language="javascript">alias</code>: Aliases of the rule. Can be a string or an array of strings.</li> <li> <code data-language="javascript">args</code>: An array of argument names or an object that define the parameters the rule will accept where: <ul> <li> <code data-language="javascript">name</code>: The argument name.</li> <li> <code data-language="javascript">ref</code>: Whether this argument allows references. Joi will resolve them before passing to <code data-language="javascript">validate</code>. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">assert</code>: A function of signature <code data-language="javascript">function (value) {}</code> that validates the argument by returning a boolean. Also accepts a Joi schema. This key is required if <code data-language="javascript">ref</code> is set to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">normalize</code>: A function of signature <code data-language="javascript">function (value) {}</code> that normalizes the argument before passing it to <code data-language="javascript">assert</code>.</li> <li> <code data-language="javascript">message</code>: A message to throw if <code data-language="javascript">assert</code> is a function. This key is forbidden if <code data-language="javascript">assert</code> is a schema.</li> </ul> </li> <li> <code data-language="javascript">convert</code>: Whether this is a dual rule that converts the input value and validates it at the same time. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">manifest</code>: Whether this rule should be outputted in the schema's description. Defaults to <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">method</code>: The method that will be attached onto the schema instance. Useful when you need to set flags. If set to <code data-language="javascript">undefined</code>, Joi will default to a function that when called will add the rule to the rules queue. If set to <code data-language="javascript">false</code>, the no method will be added to the instance.</li> <li> <code data-language="javascript">multi</code>: Whether this rule can be invoked multiple times. Defaults to <code data-language="javascript">false</code>.</li> <li> <code data-language="javascript">validate</code>: A function of signature <code data-language="javascript">function (value, helpers, args, rule)</code> that validates the input value where: <ul> <li> <code data-language="javascript">value</code>: The input value.</li> <li> <code data-language="javascript">helpers</code>: <a href="#validation-helpers">Validation helpers</a> </li> <li> <code data-language="javascript">args</code>: Resolved and validated arguments mapped by their names.</li> <li> <code data-language="javascript">rule</code>: The rule definitions passed to <code data-language="javascript">$_addRule</code> left untouched. Useful if you need access to the raw arguments before validation.</li> </ul> </li> </ul> </li> <li> <p><code data-language="javascript">overrides</code>: A hash of method names and their overridden implementation. To refer to the parent method, use <a href="#_parentmethod-args"><code data-language="javascript">$_parent()</code></a></p> </li> </ul> <div class="highlight highlight-source-js"><pre data-language="javascript"><span class="pl-k">const</span> <span class="pl-v">Joi</span> <span class="pl-c1">=</span> <span class="pl-en">require</span><span class="pl-kos">(</span><span class="pl-s">'joi'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">custom</span> <span class="pl-c1">=</span> <span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">extend</span><span class="pl-kos">(</span><span class="pl-kos">(</span><span class="pl-s1">joi</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-kos">{</span>

    <span class="pl-k">return</span> <span class="pl-kos">{</span>
        <span class="pl-c1">type</span>: <span class="pl-s">'million'</span><span class="pl-kos">,</span>
        <span class="pl-c1">base</span>: <span class="pl-s1">joi</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
        <span class="pl-c1">messages</span>: <span class="pl-kos">{</span>
            <span class="pl-s">'million.base'</span>: <span class="pl-s">'{{#label}} must be at least a million'</span><span class="pl-kos">,</span>
            <span class="pl-s">'million.big'</span>: <span class="pl-s">'{{#label}} must be at least five millions'</span><span class="pl-kos">,</span>
            <span class="pl-s">'million.round'</span>: <span class="pl-s">'{{#label}} must be a round number'</span><span class="pl-kos">,</span>
            <span class="pl-s">'million.dividable'</span>: <span class="pl-s">'{{#label}} must be dividable by {{#q}}'</span>
        <span class="pl-kos">}</span><span class="pl-kos">,</span>
        <span class="pl-en">coerce</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">,</span> <span class="pl-s1">helpers</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>

            <span class="pl-c">// Only called when prefs.convert is true</span>

            <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">helpers</span><span class="pl-kos">.</span><span class="pl-c1">schema</span><span class="pl-kos">.</span><span class="pl-en">$_getRule</span><span class="pl-kos">(</span><span class="pl-s">'round'</span><span class="pl-kos">)</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
                <span class="pl-k">return</span> <span class="pl-kos">{</span> <span class="pl-c1">value</span>: <span class="pl-v">Math</span><span class="pl-kos">.</span><span class="pl-en">round</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">;</span>
            <span class="pl-kos">}</span>
        <span class="pl-kos">}</span><span class="pl-kos">,</span>
        <span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">,</span> <span class="pl-s1">helpers</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>

            <span class="pl-c">// Base validation regardless of the rules applied</span>

            <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">value</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">1000000</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
                <span class="pl-k">return</span> <span class="pl-kos">{</span> value<span class="pl-kos">,</span> <span class="pl-c1">errors</span>: <span class="pl-s1">helpers</span><span class="pl-kos">.</span><span class="pl-en">error</span><span class="pl-kos">(</span><span class="pl-s">'million.base'</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">;</span>
            <span class="pl-kos">}</span>

            <span class="pl-c">// Check flags for global state</span>

            <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">helpers</span><span class="pl-kos">.</span><span class="pl-c1">schema</span><span class="pl-kos">.</span><span class="pl-en">$_getFlag</span><span class="pl-kos">(</span><span class="pl-s">'big'</span><span class="pl-kos">)</span> <span class="pl-c1">&amp;&amp;</span>
                <span class="pl-s1">value</span> <span class="pl-c1">&lt;</span> <span class="pl-c1">5000000</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>

                <span class="pl-k">return</span> <span class="pl-kos">{</span> value<span class="pl-kos">,</span> <span class="pl-c1">errors</span>: <span class="pl-s1">helpers</span><span class="pl-kos">.</span><span class="pl-en">error</span><span class="pl-kos">(</span><span class="pl-s">'million.big'</span><span class="pl-kos">)</span> <span class="pl-kos">}</span><span class="pl-kos">;</span>
            <span class="pl-kos">}</span>
        <span class="pl-kos">}</span><span class="pl-kos">,</span>
        <span class="pl-c1">rules</span>: <span class="pl-kos">{</span>
            <span class="pl-c1">big</span>: <span class="pl-kos">{</span>
                <span class="pl-c1">alias</span>: <span class="pl-s">'large'</span><span class="pl-kos">,</span>
                <span class="pl-en">method</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>

                    <span class="pl-k">return</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">$_setFlag</span><span class="pl-kos">(</span><span class="pl-s">'big'</span><span class="pl-kos">,</span> <span class="pl-c1">true</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
                <span class="pl-kos">}</span>
            <span class="pl-kos">}</span><span class="pl-kos">,</span>
            <span class="pl-c1">round</span>: <span class="pl-kos">{</span>
                <span class="pl-c1">convert</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>              <span class="pl-c">// Dual rule: converts or validates</span>
                <span class="pl-en">method</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>

                    <span class="pl-k">return</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">$_addRule</span><span class="pl-kos">(</span><span class="pl-s">'round'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
                <span class="pl-kos">}</span><span class="pl-kos">,</span>
                <span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">,</span> <span class="pl-s1">helpers</span><span class="pl-kos">,</span> <span class="pl-s1">args</span><span class="pl-kos">,</span> <span class="pl-s1">options</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>

                    <span class="pl-c">// Only called when prefs.convert is false (due to rule convert option)</span>

                    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">value</span> <span class="pl-c1">%</span> <span class="pl-c1">1</span> <span class="pl-c1">!==</span> <span class="pl-c1">0</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
                        <span class="pl-k">return</span> <span class="pl-s1">helpers</span><span class="pl-kos">.</span><span class="pl-en">error</span><span class="pl-kos">(</span><span class="pl-s">'million.round'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
                    <span class="pl-kos">}</span>
                <span class="pl-kos">}</span>
            <span class="pl-kos">}</span><span class="pl-kos">,</span>
            <span class="pl-c1">dividable</span>: <span class="pl-kos">{</span>
                <span class="pl-c1">multi</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>                <span class="pl-c">// Rule supports multiple invocations</span>
                <span class="pl-en">method</span><span class="pl-kos">(</span><span class="pl-s1">q</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>

                    <span class="pl-k">return</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">$_addRule</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">name</span>: <span class="pl-s">'dividable'</span><span class="pl-kos">,</span> <span class="pl-c1">args</span>: <span class="pl-kos">{</span> q <span class="pl-kos">}</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
                <span class="pl-kos">}</span><span class="pl-kos">,</span>
                <span class="pl-c1">args</span>: <span class="pl-kos">[</span>
                    <span class="pl-kos">{</span>
                        <span class="pl-c1">name</span>: <span class="pl-s">'q'</span><span class="pl-kos">,</span>
                        <span class="pl-c1">ref</span>: <span class="pl-c1">true</span><span class="pl-kos">,</span>
                        <span class="pl-en">assert</span>: <span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">)</span> <span class="pl-c1">=&gt;</span> <span class="pl-k">typeof</span> <span class="pl-s1">value</span> <span class="pl-c1">===</span> <span class="pl-s">'number'</span> <span class="pl-c1">&amp;&amp;</span> <span class="pl-c1">!</span><span class="pl-en">isNaN</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
                        <span class="pl-c1">message</span>: <span class="pl-s">'must be a number'</span>
                    <span class="pl-kos">}</span>
                <span class="pl-kos">]</span><span class="pl-kos">,</span>
                <span class="pl-en">validate</span><span class="pl-kos">(</span><span class="pl-s1">value</span><span class="pl-kos">,</span> <span class="pl-s1">helpers</span><span class="pl-kos">,</span> <span class="pl-s1">args</span><span class="pl-kos">,</span> <span class="pl-s1">options</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>

                    <span class="pl-k">if</span> <span class="pl-kos">(</span><span class="pl-s1">value</span> <span class="pl-c1">%</span> <span class="pl-s1">args</span><span class="pl-kos">.</span><span class="pl-c1">q</span> <span class="pl-c1">===</span> <span class="pl-c1">0</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
                        <span class="pl-k">return</span> <span class="pl-s1">value</span><span class="pl-kos">;</span>       <span class="pl-c">// Value is valid</span>
                    <span class="pl-kos">}</span>

                    <span class="pl-k">return</span> <span class="pl-s1">helpers</span><span class="pl-kos">.</span><span class="pl-en">error</span><span class="pl-kos">(</span><span class="pl-s">'million.dividable'</span><span class="pl-kos">,</span> <span class="pl-kos">{</span> <span class="pl-c1">q</span>: <span class="pl-s1">args</span><span class="pl-kos">.</span><span class="pl-c1">q</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
                <span class="pl-kos">}</span>
            <span class="pl-kos">}</span><span class="pl-kos">,</span>
            <span class="pl-c1">even</span>: <span class="pl-kos">{</span>
                <span class="pl-en">method</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>

                    <span class="pl-c">// Rule with only method used to alias another rule</span>

                    <span class="pl-k">return</span> <span class="pl-smi">this</span><span class="pl-kos">.</span><span class="pl-en">dividable</span><span class="pl-kos">(</span><span class="pl-c1">2</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
                <span class="pl-kos">}</span>
            <span class="pl-kos">}</span>
        <span class="pl-kos">}</span>
    <span class="pl-kos">}</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-k">const</span> <span class="pl-s1">schema</span> <span class="pl-c1">=</span> <span class="pl-s1">custom</span><span class="pl-kos">.</span><span class="pl-en">object</span><span class="pl-kos">(</span><span class="pl-kos">{</span>
    <span class="pl-c1">a</span>: <span class="pl-s1">custom</span><span class="pl-kos">.</span><span class="pl-en">million</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">round</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">dividable</span><span class="pl-kos">(</span><span class="pl-v">Joi</span><span class="pl-kos">.</span><span class="pl-en">ref</span><span class="pl-kos">(</span><span class="pl-s">'b'</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">b</span>: <span class="pl-s1">custom</span><span class="pl-kos">.</span><span class="pl-en">number</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">c</span>: <span class="pl-s1">custom</span><span class="pl-kos">.</span><span class="pl-en">million</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">even</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">dividable</span><span class="pl-kos">(</span><span class="pl-c1">7</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">d</span>: <span class="pl-s1">custom</span><span class="pl-kos">.</span><span class="pl-en">million</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">round</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">prefs</span><span class="pl-kos">(</span><span class="pl-kos">{</span> <span class="pl-c1">convert</span>: <span class="pl-c1">false</span> <span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">,</span>
    <span class="pl-c1">e</span>: <span class="pl-s1">custom</span><span class="pl-kos">.</span><span class="pl-en">million</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">large</span><span class="pl-kos">(</span><span class="pl-kos">)</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div> <h3 id="validation-helpers">
Validation helpers</h3> <ul> <li> <code data-language="javascript">original</code>: The original value passed untouched to <code data-language="javascript">validate()</code>.</li> <li> <code data-language="javascript">prefs</code>: The prepared validation options.</li> <li> <code data-language="javascript">schema</code>: The reference to the current schema. Useful if you need to use any of the <a href="#advanced-functions">Advanced functions</a>.</li> <li> <code data-language="javascript">state</code>: The current validation state. See <a href="#validation-state">Validation state</a>.</li> <li> <code data-language="javascript">error</code>: A function with signature <code data-language="javascript">function (code, local, localState = currentState) {}</code> similar to <a href="#_createerrorcode-value-local-state-prefs-options"><code data-language="javascript">$_createError()</code></a> but with the current value, validation options, current state passed where: <ul> <li> <code data-language="javascript">code</code>: The error code.</li> <li> <code data-language="javascript">local</code>: Local context used to interpolate the message.</li> <li> <code data-language="javascript">localState</code>: The localized state.</li> </ul> </li> <li> <code data-language="javascript">errorsArray</code>: A function that creates an array that can be recognised by Joi as a valid error array. <strong>Note that using a native JS array can cause Joi to output incorrect results.</strong> </li> <li> <code data-language="javascript">warn</code>: TODO</li> <li> <code data-language="javascript">message</code>: TODO</li> </ul> <h3 id="validation-state">
Validation state</h3> <p>The validation state is an object that contains information about the validation process such as the current key name of the value and its ancestors. The following methods are supported:</p> <ul> <li> <code data-language="javascript">localize()</code>: TODO</li> <li> <code data-language="javascript">nest()</code>: TODO</li> <li> <code data-language="javascript">shadow()</code>: TODO</li> <li> <code data-language="javascript">snapshot()</code>: TODO</li> <li> <code data-language="javascript">restore()</code>: TODO</li> </ul> <h3 id="advanced-functions">
Advanced functions</h3> <h4 id="_root">
$_root</h4> <p>A reference to the current Joi instance. Useful when you want access to the <strong>extended instance</strong>, not the default Joi module.</p> <h4 id="_parentmethod-args">
$_parent(method, ...args)</h4> <p>Calls the original method before overriding, similar to <code data-language="javascript">super.method()</code> when overriding class methods where:</p> <ul> <li> <code data-language="javascript">method</code>: The name of the parent method.</li> <li> <code data-language="javascript">...args</code>: The arguments passed directly to the parent method.</li> </ul> <h4 id="_temp">
$_temp</h4> <p>TODO</p> <h4 id="_terms">
$_terms</h4> <p>TODO</p> <h4 id="_addruleoptions">
$_addRule(options)</h4> <p>Adds a rule to the rules queue where:</p> <ul> <li> <p><code data-language="javascript">options</code>: A rule name string or rule options where:</p> <ul> <li> <code data-language="javascript">name</code>: The name of the rule.</li> <li> <code data-language="javascript">args</code>: The arguments to be processed.</li> <li> <code data-language="javascript">method</code>: The name of another rule to reuse.</li> </ul> <p>You can also pass extra properties and they will be accessible within the <code data-language="javascript">rule</code> argument of the <code data-language="javascript">validate</code> method.</p> </li> </ul> <h4 id="_compileschema-options">
$_compile(schema, options)</h4> <p>Compiles a literal schema definition to a Joi schema object where:</p> <ul> <li> <code data-language="javascript">schema</code>: The schema to compile.</li> <li> <code data-language="javascript">options</code>: TODO</li> </ul> <h4 id="_createerrorcode-value-local-state-prefs-options">
$_createError(code, value, local, state, prefs, options)</h4> <p>Creates a Joi validation error where:</p> <ul> <li> <code data-language="javascript">code</code>: The error code.</li> <li> <code data-language="javascript">value</code>: The current value being validated.</li> <li> <code data-language="javascript">local</code>: Local context used to interpolate the message.</li> <li> <code data-language="javascript">state</code>: <a href="#validation-state">Validation state</a>.</li> <li> <code data-language="javascript">prefs</code>: Prepared validation options.</li> <li> <code data-language="javascript">options</code>: Error options. TODO</li> </ul> <h4 id="_getflagname">
$_getFlag(name)</h4> <p>Gets a flag named <code data-language="javascript">name</code>.</p> <h4 id="_getrulename">
$_getRule(name)</h4> <p>Gets a single (<code data-language="javascript">multi</code> set to <code data-language="javascript">false</code>) rule named <code data-language="javascript">name</code>.</p> <h4 id="_maplabelspath">
$_mapLabels(path)</h4> <p>TODO</p> <h4 id="_matchvalue-state-prefs-overrides">
$_match(value, state, prefs, overrides)</h4> <p>TODO</p> <h4 id="_modifyoptions">
$_modify(options)</h4> <p>TODO</p> <h4 id="_mutaterebuild">
$_mutateRebuild()</h4> <p>TODO</p> <h4 id="_mutateregisterschema-options">
$_mutateRegister(schema, options)</h4> <p>TODO</p> <h4 id="_propertyname">
$_property(name)</h4> <p>TODO</p> <h4 id="_reachpath">
$_reach(path)</h4> <p>TODO</p> <h4 id="_rootreferences">
$_rootReferences()</h4> <p>TODO</p> <h4 id="_setflagname-value-options">
$_setFlag(name, value, options)</h4> <p>Sets a flag where:</p> <ul> <li> <code data-language="javascript">name</code>: The flag name to set.</li> <li> <code data-language="javascript">value</code>: The value to set the flag to.</li> <li> <code data-language="javascript">options</code>: Optional options where: <ul> <li> <code data-language="javascript">clone</code>: Whether to clone the schema. Defaults to <code data-language="javascript">true</code>. Only set to <code data-language="javascript">false</code> if the schema has already been cloned before.</li> </ul> </li> </ul> <h4 id="_validatevalue-state-prefs">
$_validate(value, state, prefs)</h4> <p>Performs validation against the current schema without the extra overhead of merging validation options to a default set of values where:</p> <ul> <li> <code data-language="javascript">value</code>: The input value to validate.</li> <li> <code data-language="javascript">state</code>: <a href="#validation-state">Validation state</a> </li> <li> <code data-language="javascript">prefs</code>: The prepared validation options.</li> </ul> <p><strong>Use this method to perform validation against nested schemas instead of <code data-language="javascript">validate()</code></strong></p> <h2>
Errors</h2> <h3 id="validationerror">
<code data-language="javascript">ValidationError</code>
</h3> <p><strong>joi</strong> throws or returns <code data-language="javascript">ValidationError</code> objects containing :</p> <ul> <li> <code data-language="javascript">name</code> - <code data-language="javascript">'ValidationError'</code>.</li> <li> <code data-language="javascript">isJoi</code> - <code data-language="javascript">true</code>.</li> <li> <code data-language="javascript">details</code> - an array of errors : <ul> <li> <code data-language="javascript">message</code> - string with a description of the error.</li> <li> <code data-language="javascript">path</code> - ordered array where each element is the accessor to the value where the error happened.</li> <li> <code data-language="javascript">type</code> - type of the error.</li> <li> <code data-language="javascript">context</code> - object providing context of the error containing: <ul> <li> <code data-language="javascript">key</code> - key of the value that erred, equivalent to the last element of <code data-language="javascript">details.path</code>.</li> <li> <code data-language="javascript">label</code> - label of the value that erred, or the <code data-language="javascript">key</code> if any, or the default <code data-language="javascript">messages.root</code>.</li> <li> <code data-language="javascript">value</code> - the value that failed validation.</li> <li>other error specific properties as described for each error code.</li> </ul> </li> </ul> </li> <li> <code data-language="javascript">annotate()</code> - function that returns a string with an annotated version of the object pointing at the places where errors occurred. Takes an optional parameter that, if truthy, will strip the colors out of the output.</li> </ul> <h3 id="list-of-errors">
List of errors</h3> <h4 id="alternativesall">
<code data-language="javascript">alternatives.all</code>
</h4> <p>The value did not match all of the alternative schemas.</p> <h4 id="alternativesany">
<code data-language="javascript">alternatives.any</code>
</h4> <p>No alternative was found to test against the input due to try criteria.</p> <h4 id="alternativesmatch">
<code data-language="javascript">alternatives.match</code>
</h4> <p>No alternative matched the input due to specific matching rules for at least one of the alternatives.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    details: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">object</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-c">// An array of details for each error found while trying to match to each of the alternatives</span>
    <span class="pl-s1">message</span>: <span class="pl-s1">string</span> <span class="pl-c">// The combined error messages</span>
<span class="pl-kos">}</span></pre></div> <h4 id="alternativesone">
<code data-language="javascript">alternatives.one</code>
</h4> <p>The value matched more than one alternative schema.</p> <h4 id="alternativestypes">
<code data-language="javascript">alternatives.types</code>
</h4> <p>The provided input did not match any of the allowed types.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-s1">types</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span> <span class="pl-c">// The list of expected types</span>
<span class="pl-kos">}</span></pre></div> <h4 id="anycustom">
<code data-language="javascript">any.custom</code>
</h4> <p>A custom validation method threw an exception.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">error</span>: <span class="pl-smi">Error</span> <span class="pl-c">// The error thrown</span>
<span class="pl-kos">}</span></pre></div> <h4 id="anydefault">
<code data-language="javascript">any.default</code>
</h4> <p>If your <a href="#anydefaultvalue-description"><code data-language="javascript">any.default()</code></a> generator function throws error, you will have it here.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">error</span>: <span class="pl-smi">Error</span> <span class="pl-c">// Error generated during the default value function call</span>
<span class="pl-kos">}</span></pre></div> <h4 id="anyfailover">
<code data-language="javascript">any.failover</code>
</h4> <p>If your <a href="#anyfailovervalue-description"><code data-language="javascript">any.failover()</code></a> generator function throws error, you will have it here.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">error</span>: <span class="pl-smi">Error</span> <span class="pl-c">// Error generated during the failover value function call</span>
<span class="pl-kos">}</span></pre></div> <h4 id="anyinvalid">
<code data-language="javascript">any.invalid</code>
</h4> <p>The value matched a value listed in the invalid values.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-s1">invalids</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">any</span><span class="pl-kos">&gt;</span> <span class="pl-c">// Contains the list of the invalid values that should be rejected</span>
<span class="pl-kos">}</span></pre></div> <h4 id="anyonly-1">
<code data-language="javascript">any.only</code>
</h4> <p>Only some values were allowed, the input didn't match any of them.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-s1">valids</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">any</span><span class="pl-kos">&gt;</span> <span class="pl-c">// Contains the list of the valid values that were expected</span>
<span class="pl-kos">}</span></pre></div> <h4 id="anyref">
<code data-language="javascript">any.ref</code>
</h4> <p>A reference was used in rule argument and the value pointed to by that reference in the input is not valid.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">arg</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// The argument name</span>
    <span class="pl-c1">reason</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// The reason the referenced value is invalid</span>
    <span class="pl-c1">ref</span>: <span class="pl-smi">Reference</span> <span class="pl-c">// Reference used</span>
<span class="pl-kos">}</span></pre></div> <h4 id="anyrequired">
<code data-language="javascript">any.required</code>
</h4> <p>A required value wasn't present.</p> <h4 id="anyunknown">
<code data-language="javascript">any.unknown</code>
</h4> <p>A value was present while it wasn't expected.</p> <h4 id="arraybase">
<code data-language="javascript">array.base</code>
</h4> <p>The value is not of Array type or could not be cast to an Array from a string.</p> <h4 id="arrayexcludes">
<code data-language="javascript">array.excludes</code>
</h4> <p>The array contains a value that is part of the exclusion list.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">pos</span>: <span class="pl-s1">number</span> <span class="pl-c">// Index where the value was found in the array</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arrayincludesrequiredboth">
<code data-language="javascript">array.includesRequiredBoth</code>
</h4> <p>Some values were expected to be present in the array and are missing. This error happens when we have a mix of labeled and unlabeled schemas.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    knownMisses: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-c">// Labels of all the missing values</span>
    <span class="pl-s1">unknownMisses</span>: number <span class="pl-c">// Count of missing values that didn't have a label</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arrayincludesrequiredknowns">
<code data-language="javascript">array.includesRequiredKnowns</code>
</h4> <p>Some values were expected to be present in the array and are missing. This error happens when we only have labeled schemas.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-s1">knownMisses</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span> <span class="pl-c">// Labels of all the missing values</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arrayincludesrequiredunknowns">
<code data-language="javascript">array.includesRequiredUnknowns</code>
</h4> <p>Some values were expected to be present in the array and are missing. This error happens when we only have unlabeled schemas.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">unknownMisses</span>: <span class="pl-s1">number</span> <span class="pl-c">// Count of missing values that didn't have a label</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arrayincludes">
<code data-language="javascript">array.includes</code>
</h4> <p>The value didn't match any of the allowed types for that array.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">pos</span>: <span class="pl-s1">number</span> <span class="pl-c">// Index where the value was found in the array</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arraylength">
<code data-language="javascript">array.length</code>
</h4> <p>The array is not of the expected length.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Length that was expected for this array</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arraymax">
<code data-language="javascript">array.max</code>
</h4> <p>The array has more elements than the maximum allowed.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Maximum length that was expected for this array</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arraymin">
<code data-language="javascript">array.min</code>
</h4> <p>The array has less elements than the minimum allowed.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Minimum length that was expected for this array</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arrayorderedlength">
<code data-language="javascript">array.orderedLength</code>
</h4> <p>Given an <a href="#arrayorderedtype"><code data-language="javascript">array.ordered()</code></a>, that array has more elements than it should.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">pos</span>: <span class="pl-s1">number</span><span class="pl-kos">,</span> <span class="pl-c">// Index where the value was found in the array</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Maximum length that was expected for this array</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arraysort">
<code data-language="javascript">array.sort</code>
</h4> <p>The array did not match the required sort order.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">order</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// 'ascending' or 'descending'</span>
    <span class="pl-c1">by</span>: <span class="pl-s1">string</span> <span class="pl-c">// The object key used for comparison</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arraysortmismatching">
<code data-language="javascript">array.sort.mismatching</code>
</h4> <p>Failed sorting the array due to mismatching item types.</p> <h4 id="arraysortunsupported">
<code data-language="javascript">array.sort.unsupported</code>
</h4> <p>Failed sorting the array due to unsupported item types.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">type</span>: <span class="pl-s1">string</span> <span class="pl-c">// The unsupported array item type</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arraysparse">
<code data-language="javascript">array.sparse</code>
</h4> <p>An <code data-language="javascript">undefined</code> value was found in an array that shouldn't be sparse.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">pos</span>: <span class="pl-s1">number</span> <span class="pl-c">// Index where an undefined value was found in the array</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arrayunique">
<code data-language="javascript">array.unique</code>
</h4> <p>A duplicate value was found in an array.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">pos</span>: <span class="pl-s1">number</span><span class="pl-kos">,</span> <span class="pl-c">// Index where the duplicate value was found in the array</span>
    <span class="pl-c1">dupePos</span>: <span class="pl-s1">number</span><span class="pl-kos">,</span> <span class="pl-c">// Index where the first appearance of the duplicate value was found in the array</span>
    <span class="pl-c1">dupeValue</span>: <span class="pl-s1">any</span> <span class="pl-c">// Value with which the duplicate was met</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arrayhasknown">
<code data-language="javascript">array.hasKnown</code>
</h4> <p>The schema on an <a href="#arrayhas"><code data-language="javascript">array.has()</code></a> was not found in the array. This error happens when the schema is labeled.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">patternLabel</span>: <span class="pl-s1">string</span> <span class="pl-c">// Label of assertion schema</span>
<span class="pl-kos">}</span></pre></div> <h4 id="arrayhasunknown">
<code data-language="javascript">array.hasUnknown</code>
</h4> <p>The schema on an <a href="#arrayhas"><code data-language="javascript">array.has()</code></a> was not found in the array. This error happens when the schema is unlabeled.</p> <h4 id="binarybase">
<code data-language="javascript">binary.base</code>
</h4> <p>The value is either not a Buffer or could not be cast to a Buffer from a string.</p> <h4 id="binarylength">
<code data-language="javascript">binary.length</code>
</h4> <p>The buffer was not of the specified length.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Length that was expected for this buffer</span>
<span class="pl-kos">}</span></pre></div> <h4 id="binarymax">
<code data-language="javascript">binary.max</code>
</h4> <p>The buffer contains more bytes than expected.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Maximum length that was expected for this buffer</span>
<span class="pl-kos">}</span></pre></div> <h4 id="binarymin">
<code data-language="javascript">binary.min</code>
</h4> <p>The buffer contains less bytes than expected.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Minimum length that was expected for this buffer</span>
<span class="pl-kos">}</span></pre></div> <h4 id="booleanbase">
<code data-language="javascript">boolean.base</code>
</h4> <p>The value is either not a boolean or could not be cast to a boolean from one of the truthy or falsy values.</p> <h4 id="datebase">
<code data-language="javascript">date.base</code>
</h4> <p>The value is either not a date or could not be cast to a date from a string or a number.</p> <h4 id="dateformat">
<code data-language="javascript">date.format</code>
</h4> <p>The date does not match the required format.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">format</span>: <span class="pl-s1">string</span> <span class="pl-c">// The required format</span>
<span class="pl-kos">}</span></pre></div> <h4 id="dategreater">
<code data-language="javascript">date.greater</code>
</h4> <p>The date is over the limit that you set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-smi">Date</span> <span class="pl-c">// Maximum date</span>
<span class="pl-kos">}</span></pre></div> <h4 id="dateless">
<code data-language="javascript">date.less</code>
</h4> <p>The date is under the limit that you set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-smi">Date</span> <span class="pl-c">// Minimum date</span>
<span class="pl-kos">}</span></pre></div> <h4 id="datemax">
<code data-language="javascript">date.max</code>
</h4> <p>The date is over or equal to the limit that you set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-smi">Date</span> <span class="pl-c">// Maximum date</span>
<span class="pl-kos">}</span></pre></div> <h4 id="datemin">
<code data-language="javascript">date.min</code>
</h4> <p>The date is under or equal to the limit that you set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-smi">Date</span> <span class="pl-c">// Minimum date</span>
<span class="pl-kos">}</span></pre></div> <h4 id="datestrict">
<code data-language="javascript">date.strict</code>
</h4> <p>Occurs when the input is not a Date type and <code data-language="javascript">convert</code> is disabled.</p> <h4 id="functionarity">
<code data-language="javascript">function.arity</code>
</h4> <p>The number of arguments for the function doesn't match the required number.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">n</span>: <span class="pl-s1">number</span> <span class="pl-c">// Expected arity</span>
<span class="pl-kos">}</span></pre></div> <h4 id="functionclass">
<code data-language="javascript">function.class</code>
</h4> <p>The input is not a JavaScript class.</p> <h4 id="functionmaxarity">
<code data-language="javascript">function.maxArity</code>
</h4> <p>The number of arguments for the function is over the required number.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">n</span>: <span class="pl-s1">number</span> <span class="pl-c">// Maximum expected arity</span>
<span class="pl-kos">}</span></pre></div> <h4 id="functionminarity">
<code data-language="javascript">function.minArity</code>
</h4> <p>The number of arguments for the function is under the required number.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">n</span>: <span class="pl-s1">number</span> <span class="pl-c">// Minimum expected arity</span>
<span class="pl-kos">}</span></pre></div> <h4 id="numberbase">
<code data-language="javascript">number.base</code>
</h4> <p>The value is not a number or could not be cast to a number.</p> <h4 id="numbergreater">
<code data-language="javascript">number.greater</code>
</h4> <p>The number is lower or equal to the limit that you set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Minimum value that was expected for this number</span>
<span class="pl-kos">}</span></pre></div> <h4 id="numberinfinity">
<code data-language="javascript">number.infinity</code>
</h4> <p>The number is <code data-language="javascript">Infinity</code> or <code data-language="javascript">-Infinity</code>.</p> <h4 id="numberinteger-1">
<code data-language="javascript">number.integer</code>
</h4> <p>The number is not a valid integer.</p> <h4 id="numberless">
<code data-language="javascript">number.less</code>
</h4> <p>The number is higher or equal to the limit that you set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Maximum value that was expected for this number</span>
<span class="pl-kos">}</span></pre></div> <h4 id="numbermax">
<code data-language="javascript">number.max</code>
</h4> <p>The number is higher than the limit that you set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Maximum value that was expected for this number</span>
<span class="pl-kos">}</span></pre></div> <h4 id="numbermin">
<code data-language="javascript">number.min</code>
</h4> <p>The number is lower than the limit that you set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Minimum value that was expected for this number</span>
<span class="pl-kos">}</span></pre></div> <h4 id="numbermultiple">
<code data-language="javascript">number.multiple</code>
</h4> <p>The number could not be divided by the multiple you provided.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">multiple</span>: <span class="pl-s1">number</span> <span class="pl-c">// The number of which the input is supposed to be a multiple of</span>
<span class="pl-kos">}</span></pre></div> <h4 id="numbernegative-1">
<code data-language="javascript">number.negative</code>
</h4> <p>The number was positive.</p> <h4 id="numberport-1">
<code data-language="javascript">number.port</code>
</h4> <p>The number didn't look like a port number.</p> <h4 id="numberpositive-1">
<code data-language="javascript">number.positive</code>
</h4> <p>The number was negative.</p> <h4 id="numberprecision">
<code data-language="javascript">number.precision</code>
</h4> <p>The number didn't have the required precision.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// The precision that it should have had</span>
<span class="pl-kos">}</span></pre></div> <h4 id="numberunsafe">
<code data-language="javascript">number.unsafe</code>
</h4> <p>The number is not within the safe range of JavaScript numbers.</p> <h4 id="objectunknown">
<code data-language="javascript">object.unknown</code>
</h4> <p>An unexpected property was found in the object.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">child</span>: <span class="pl-s1">string</span> <span class="pl-c">// Property that is unexpected</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectand">
<code data-language="javascript">object.and</code>
</h4> <p>The AND condition between the properties you specified was not satisfied in that object.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-s1">present</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-c">// List of properties that are set</span>
    <span class="pl-s1">presentWithLabels</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-c">// List of labels for the properties that are set</span>
    <span class="pl-s1">missing</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-c">// List of properties that are not set</span>
    <span class="pl-s1">missingWithLabels</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span> <span class="pl-c">// List of labels for the properties that are not set</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectassert">
<code data-language="javascript">object.assert</code>
</h4> <p>The schema on an <a href="#objectassertref-schema-message"><code data-language="javascript">object.assert()</code></a> failed to validate.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">subject</span>: <span class="pl-s1">object</span><span class="pl-kos">,</span> <span class="pl-c">// The assertion subject. When it is a reference, use subject.key for the display path.</span>
    <span class="pl-c1">message</span>: <span class="pl-s1">string</span> <span class="pl-c">// Custom message when provided</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectbase">
<code data-language="javascript">object.base</code>
</h4> <p>The value is not of the expected type.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">type</span>: <span class="pl-s1">string</span> <span class="pl-c">// The expected type</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectlength">
<code data-language="javascript">object.length</code>
</h4> <p>The number of keys for this object is not of the expected length.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Number of keys that was expected for this object</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectmax">
<code data-language="javascript">object.max</code>
</h4> <p>The number of keys for this object is over or equal to the limit that you set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Maximum number of keys</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectmin">
<code data-language="javascript">object.min</code>
</h4> <p>The number of keys for this object is under or equal to the limit that you set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span> <span class="pl-c">// Minimum number of keys</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectmissing">
<code data-language="javascript">object.missing</code>
</h4> <p>The OR or XOR condition between the properties you specified was not satisfied in that object, none of them were set.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-s1">peers</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-c">// List of properties where none of them were set</span>
    <span class="pl-s1">peersWithLabels</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span> <span class="pl-c">// List of labels for the properties where none of them were set</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectnand">
<code data-language="javascript">object.nand</code>
</h4> <p>The NAND condition between the properties you specified was not satisfied in that object.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">main</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// One of the properties that was present</span>
    <span class="pl-c1">mainWithLabel</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// The label of the `main` property</span>
    <span class="pl-c1">peers</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-c">// List of the other properties that were present</span>
    <span class="pl-c1">peersWithLabels</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span> <span class="pl-c">// List of the labels of the other properties that were present</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectpatternmatch">
<code data-language="javascript">object.pattern.match</code>
</h4> <p>The object keys failed to match a pattern's matches requirement.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">details</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">object</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-c">// An array of details for each error found while trying to match to each of the alternatives</span>
    <span class="pl-s1">message</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// The combined error messages</span>
    <span class="pl-c1">matches</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span>  <span class="pl-c">// The matching keys</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectreftype">
<code data-language="javascript">object.refType</code>
</h4> <p>The object is not a <a href="#refkey-options"><code data-language="javascript">Joi.ref()</code></a>.</p> <h4 id="objectregex-1">
<code data-language="javascript">object.regex</code>
</h4> <p>The object is not a <code data-language="javascript">RegExp</code> object.</p> <h4 id="objectrenamemultiple">
<code data-language="javascript">object.rename.multiple</code>
</h4> <p>Another rename was already done to the same target property.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">from</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Origin property name of the rename</span>
    <span class="pl-c1">to</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Target property of the rename</span>
    <span class="pl-c1">pattern</span>: <span class="pl-s1">boolean</span> <span class="pl-c">// Indicates if the rename source was a pattern (regular expression)</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectrenameoverride">
<code data-language="javascript">object.rename.override</code>
</h4> <p>The target property already exists and you disallowed overrides.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">from</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Origin property name of the rename</span>
    <span class="pl-c1">to</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Target property of the rename</span>
    <span class="pl-c1">pattern</span>: <span class="pl-s1">boolean</span> <span class="pl-c">// Indicates if the rename source was a pattern (regular expression)</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectschema">
<code data-language="javascript">object.schema</code>
</h4> <p>The object was not a <strong>joi</strong> schema.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">type</span>: <span class="pl-s1">string</span> <span class="pl-c">// The required schema</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectinstance">
<code data-language="javascript">object.instance</code>
</h4> <p>The object is not of the type you specified.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">type</span>: <span class="pl-s1">string</span> <span class="pl-c">// Type name the object should have been</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectwith">
<code data-language="javascript">object.with</code>
</h4> <p>Property that should have been present at the same time as another one was missing.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">main</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Property that triggered the check</span>
    <span class="pl-c1">mainWithLabel</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Label of the property that triggered the check</span>
    <span class="pl-c1">peer</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Property that was missing</span>
    <span class="pl-c1">peerWithLabels</span>: <span class="pl-s1">string</span> <span class="pl-c">// Label of the other property that was missing</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectwithout">
<code data-language="javascript">object.without</code>
</h4> <p>Property that should have been absent at the same time as another one was present.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">main</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Property that triggered the check</span>
    <span class="pl-c1">mainWithLabel</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Label of the property that triggered the check</span>
    <span class="pl-c1">peer</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Property that was present</span>
    <span class="pl-c1">peerWithLabels</span>: <span class="pl-s1">string</span> <span class="pl-c">// Label of the other property that was present</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectxor">
<code data-language="javascript">object.xor</code>
</h4> <p>The XOR condition between the properties you specified was not satisfied in that object.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-s1">peers</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-c">// List of properties where none of it or too many of it was set</span>
    <span class="pl-s1">peersWithLabels</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span> <span class="pl-c">// List of labels for the properties where none of it or too many of it was set</span>
<span class="pl-kos">}</span></pre></div> <h4 id="objectoxor">
<code data-language="javascript">object.oxor</code>
</h4> <p>The optional XOR condition between the properties you specified was not satisfied in that object.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-s1">peers</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span><span class="pl-kos">,</span> <span class="pl-c">// List of properties where too many of it was set</span>
    <span class="pl-s1">peersWithLabels</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span> <span class="pl-c">// List of labels for the properties where too many of it was set</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringalphanum-1">
<code data-language="javascript">string.alphanum</code>
</h4> <p>The string doesn't only contain alphanumeric characters.</p> <h4 id="stringbase64">
<code data-language="javascript">string.base64</code>
</h4> <p>The string isn't a valid base64 string.</p> <h4 id="stringbase">
<code data-language="javascript">string.base</code>
</h4> <p>The input is not a string.</p> <h4 id="stringcreditcard-1">
<code data-language="javascript">string.creditCard</code>
</h4> <p>The string is not a valid credit card number.</p> <h4 id="stringdatauri">
<code data-language="javascript">string.dataUri</code>
</h4> <p>The string is not a valid data URI.</p> <h4 id="stringdomain">
<code data-language="javascript">string.domain</code>
</h4> <p>The string is not a valid domain name.</p> <h4 id="stringemail">
<code data-language="javascript">string.email</code>
</h4> <p>The string is not a valid e-mail.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">invalids</span>: <span class="pl-kos">[</span><span class="pl-s1">string</span><span class="pl-kos">]</span> <span class="pl-c">// Array of invalid emails</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringempty">
<code data-language="javascript">string.empty</code>
</h4> <p>When an empty string is found and denied by invalid values.</p> <h4 id="stringguid">
<code data-language="javascript">string.guid</code>
</h4> <p>The string is not a valid GUID.</p> <h4 id="stringhexalign">
<code data-language="javascript">string.hexAlign</code>
</h4> <p>The string contains hexadecimal characters but they are not byte-aligned.</p> <h4 id="stringhex">
<code data-language="javascript">string.hex</code>
</h4> <p>The string is not a valid hexadecimal string.</p> <h4 id="stringhostname-1">
<code data-language="javascript">string.hostname</code>
</h4> <p>The string is not a valid hostname.</p> <h4 id="stringipversion">
<code data-language="javascript">string.ipVersion</code>
</h4> <p>The string is not a valid IP address considering the provided constraints.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">cidr</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// CIDR used for the validation</span>
    <span class="pl-c1">version</span>: <span class="pl-smi">Array</span><span class="pl-kos">&lt;</span><span class="pl-smi">string</span><span class="pl-kos">&gt;</span> <span class="pl-c">// List of IP version accepted</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringip">
<code data-language="javascript">string.ip</code>
</h4> <p>The string is not a valid IP address.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">cidr</span>: <span class="pl-s1">string</span> <span class="pl-c">// CIDR used for the validation</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringisodate-1">
<code data-language="javascript">string.isoDate</code>
</h4> <p>The string is not a valid ISO date string.</p> <h4 id="stringisoduration-1">
<code data-language="javascript">string.isoDuration</code>
</h4> <p>The string must be a valid ISO 8601 duration.</p> <h4 id="stringlength">
<code data-language="javascript">string.length</code>
</h4> <p>The string is not of the expected length.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span><span class="pl-kos">,</span> <span class="pl-c">// Length that was expected for this string</span>
    <span class="pl-c1">encoding</span>: <span class="pl-c1">undefined</span> <span class="pl-c1">|</span> <span class="pl-s1">string</span> <span class="pl-c">// Encoding specified for the check if any</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringlowercase-1">
<code data-language="javascript">string.lowercase</code>
</h4> <p>The string isn't all lower-cased.</p> <h4 id="stringmax">
<code data-language="javascript">string.max</code>
</h4> <p>The string is longer than expected.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span><span class="pl-kos">,</span> <span class="pl-c">// Maximum length that was expected for this string</span>
    <span class="pl-c1">encoding</span>: <span class="pl-c1">undefined</span> <span class="pl-c1">|</span> <span class="pl-s1">string</span> <span class="pl-c">// Encoding specified for the check if any</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringmin">
<code data-language="javascript">string.min</code>
</h4> <p>The string is shorter than expected.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">limit</span>: <span class="pl-s1">number</span><span class="pl-kos">,</span> <span class="pl-c">// Minimum length that was expected for this string</span>
    <span class="pl-c1">encoding</span>: <span class="pl-c1">undefined</span> <span class="pl-c1">|</span> <span class="pl-s1">string</span> <span class="pl-c">// Encoding specified for the check if any</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringnormalize">
<code data-language="javascript">string.normalize</code>
</h4> <p>The string isn't valid in regards of the normalization form expected.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">form</span>: <span class="pl-s1">string</span> <span class="pl-c">// Normalization form that is expected</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringpatternbase">
<code data-language="javascript">string.pattern.base</code>
</h4> <p>The string didn't match the regular expression.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">name</span>: <span class="pl-c1">undefined</span><span class="pl-kos">,</span> <span class="pl-c">// Undefined since the regular expression has no name</span>
    <span class="pl-c1">pattern</span>: <span class="pl-s1">string</span> <span class="pl-c">// Regular expression</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringpatternname">
<code data-language="javascript">string.pattern.name</code>
</h4> <p>The string didn't match the named regular expression.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">name</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Name of the regular expression</span>
    <span class="pl-c1">pattern</span>: <span class="pl-s1">string</span> <span class="pl-c">// Regular expression</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringpatterninvertbase">
<code data-language="javascript">string.pattern.invert.base</code>
</h4> <p>The string matched the regular expression while it shouldn't.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">name</span>: <span class="pl-c1">undefined</span><span class="pl-kos">,</span> <span class="pl-c">// Undefined since the regular expression has no name</span>
    <span class="pl-c1">pattern</span>: <span class="pl-s1">string</span> <span class="pl-c">// Regular expression</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringpatterninvertname">
<code data-language="javascript">string.pattern.invert.name</code>
</h4> <p>The string matched the named regular expression while it shouldn't.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">name</span>: <span class="pl-s1">string</span><span class="pl-kos">,</span> <span class="pl-c">// Name of the regular expression</span>
    <span class="pl-c1">pattern</span>: <span class="pl-s1">string</span> <span class="pl-c">// Regular expression</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringtoken-1">
<code data-language="javascript">string.token</code>
</h4> <p>The string isn't a token.</p> <h4 id="stringtrim">
<code data-language="javascript">string.trim</code>
</h4> <p>The string contains whitespace around it.</p> <h4 id="stringuppercase-1">
<code data-language="javascript">string.uppercase</code>
</h4> <p>The string isn't all upper-cased.</p> <h4 id="stringuri">
<code data-language="javascript">string.uri</code>
</h4> <p>The string isn't a valid URI.</p> <h4 id="stringuricustomscheme">
<code data-language="javascript">string.uriCustomScheme</code>
</h4> <p>The string isn't a valid URI considering the custom schemes.</p> <p>Additional local context properties:</p> <div class="highlight highlight-source-ts"><pre data-language="javascript"><span class="pl-kos">{</span>
    <span class="pl-c1">scheme</span>: <span class="pl-s1">string</span> <span class="pl-c">// Scheme prefix that is expected in the URI</span>
<span class="pl-kos">}</span></pre></div> <h4 id="stringurirelativeonly">
<code data-language="javascript">string.uriRelativeOnly</code>
</h4> <p>The string is a valid relative URI.</p> <h4 id="symbolbase">
<code data-language="javascript">symbol.base</code>
</h4> <p>The input is not a Symbol.</p> <h4 id="symbolmap">
<code data-language="javascript">symbol.map</code>
</h4> <p>The input is not a Symbol or could not be converted to one.</p>
<div class="_attribution">
  <p class="_attribution-p">
    Copyright © 2012-2022, Project contributors Copyright © 2012-2022, Sideway Inc Copyright © 2012-2014, Walmart<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://joi.dev/api/?v=17.11.0" class="_attribution-link">https://joi.dev/api/?v=17.11.0</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
