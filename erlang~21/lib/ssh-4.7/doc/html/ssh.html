
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Ssh - Erlang 21 - W3cubDocs</title>
  
  <meta name="description" content=" ssh ">
  <meta name="keywords" content="ssh, erlang, erlang~21">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/erlang~21/lib/ssh-4.7/doc/html/ssh.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/erlang~21.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/erlang~21/" class="_nav-link" title="" style="margin-left:0;">Erlang 21</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _erlang">
				
				
<h1>ssh</h1> <h2><span onmouseover="document.getElementById('ghlink-module-id74083').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-id74083').style.visibility = 'hidden';" id="module">Module</span></h2> <p class="REFBODY module-body">ssh</p> <h2><span onmouseover="document.getElementById('ghlink-module-summary-id74086').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-id74086').style.visibility = 'hidden';" id="module-summary">Module Summary</span></h2> <p class="REFBODY module-summary-body">Main API of the ssh application</p> <h2><span onmouseover="document.getElementById('ghlink-description-id74090').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-id74090').style.visibility = 'hidden';" id="description">Description</span></h2> 
<p>This is the interface module for the <code class="code">SSH</code> application. The Secure Shell (SSH) Protocol is a protocol for secure remote login and other secure network services over an insecure network. See <code>ssh(6)</code> for details of supported RFCs, versions, algorithms and unicode handling. </p> <p>With the SSH application it is possible to start <i>clients</i> and to start <i>daemons</i> (servers). </p> <p>Clients are started with <code><a href="#connect-2">connect/2</a></code>, <code><a href="#connect-3">connect/3</a></code> or <code><a href="#connect-4">connect/4</a></code>. They open an encrypted connection on top of TCP/IP. In that encrypted connection one or more channels could be opened with <code><a href="ssh_connection#session_channel-2">ssh_connection:session_channel/2,4</a></code>. </p> <p>Each channel is an isolated "pipe" between a client-side process and a server-side process. Thoose process pairs could handle for example file transfers (sftp) or remote command execution (shell, exec and/or cli). If a custom shell is implemented, the user of the client could execute the special commands remotely. Note that the user is not necessarily a human but probably a system interfacing the SSH app. </p> <p>A server-side subssystem (channel) server is requested by the client with <code><a href="ssh_connection#subsystem-4">ssh_connection:subsystem/4</a></code>. </p> <p>A server (daemon) is started with <code><a href="#daemon-2">daemon/1</a></code>, <code><a href="#daemon-2">daemon/2</a></code> or <code><a href="#daemon-2">daemon/3</a></code>. Possible channel handlers (subsystems) are declared with the <code><a href="#type-subsystem_daemon_option">subsystem</a></code> option when the daemon is started. </p> <p>To just run a shell on a remote machine, there are functions that bundles the needed three steps needed into one: <code><a href="#shell-1">shell/1,2,3</a></code>. Similarily, to just open an sftp (file transfer) connection to a remote machine, the simplest way is to use <code><a href="ssh_sftp#start_channel-1">ssh_sftp:start_channel/1,2,3</a></code>. </p> <p>To write your own client channel handler, use the behaviour <code><a href="ssh_client_channel">ssh_client_channel</a></code>. For server channel handlers use <code><a href="ssh_server_channel">ssh_server_channel</a></code> behaviour (replaces ssh_daemon_channel). </p> <p>Both clients and daemons accepts options that controls the exact behaviour. Some options are common to both. The three sets are called <code><a href="#type-client_options">Client Options</a></code>, <code><a href="#type-daemon_options">Daemon Options</a></code> and <code><a href="#type-common_options">Common Options</a></code>. </p> <p>The descriptions of the options uses the <code>Erlang Type Language</code> with explaining text. </p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>The <code><a href="users_guide">User's Guide</a></code> has examples and a <code><a href="using_ssh">Getting Started</a></code> section. </p> </div> </div>  <h2><span onmouseover="document.getElementById('ghlink-keys-and-files-id74283').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-keys-and-files-id74283').style.visibility = 'hidden';" id="keys-and-files">Keys and files</span></h2>  <p>A number of objects must be present for the SSH application to work. Thoose objects are per default stored in files. The default names, paths and file formats are the same as for <code><a href="http://www.openssh.com">OpenSSH</a></code>. Keys could be generated with the <code class="code">ssh-keygen</code> program from OpenSSH. See the <code><a href="using_ssh#running-an-erlang-ssh-daemon">User's Guide</a></code>. </p> <p>The paths could easily be changed by options: <code><a href="#type-user_dir_common_option"><span class="code">user_dir</span></a></code> and <code><a href="#type-system_dir_daemon_option"><span class="code">system_dir</span></a></code>. </p> <p>A completly different storage could be interfaced by writing call-back modules using the behaviours <code><a href="ssh_client_key_api">ssh_client_key_api</a></code> and/or <code><a href="ssh_server_key_api">ssh_server_key_api</a></code>. A callback module is installed with the option <code><a href="#type-key_cb_common_option"><span class="code">key_cb</span></a></code> to the client and/or the daemon. </p> <h4>Daemons</h4>  <p>The keys are by default stored in files:</p> <ul> <li>Mandatory: one or more <i>Host key(s)</i>, both private and public. Default is to store them in the directory <code class="code">/etc/ssh</code> in the files <ul> <li> <code class="code">ssh_host_dsa_key</code> and <code class="code">ssh_host_dsa_key.pub</code> </li> <li> <code class="code">ssh_host_rsa_key</code> and <code class="code">ssh_host_rsa_key.pub</code> </li> <li> <code class="code">ssh_host_ecdsa_key</code> and <code class="code">ssh_host_ecdsa_key.pub</code> </li> </ul> <p>The host keys directory could be changed with the option <code><a href="#type-system_dir_daemon_option"><span class="code">system_dir</span></a></code>.</p> </li> <li>Optional: one or more <i>User's public key</i> in case of <code class="code">publickey</code> authorization. Default is to store them concatenated in the file <code class="code">.ssh/authorized_keys</code> in the user's home directory. <p>The user keys directory could be changed with the option <code><a href="#type-user_dir_common_option"><span class="code">user_dir</span></a></code>.</p> </li> </ul>  <h4>Clients</h4>  <p>The keys and some other data are by default stored in files in the directory <code class="code">.ssh</code> in the user's home directory.</p> <p>The directory could be changed with the option <code><a href="#type-user_dir_common_option"><span class="code">user_dir</span></a></code>. </p> <ul> <li>Optional: a list of <i>Host public key(s)</i> for previously connected hosts. This list is handled by the SSH application without any need of user assistance. The default is to store them in the file <code class="code">known_hosts</code>. <p>The <code><a href="#type-host_accepting_client_options">host_accepting_client_options()</a></code> are associated with this list of keys. </p> </li> <li>Optional: one or more <i>User's private key(s)</i> in case of <code class="code">publickey</code> authorization. The default files are <ul> <li> <code class="code">id_dsa</code> and <code class="code">id_dsa.pub</code> </li> <li> <code class="code">id_rsa</code> and <code class="code">id_rsa.pub</code> </li> <li> <code class="code">id_ecdsa</code> and <code class="code">id_ecdsa.pub</code> </li> </ul> </li> </ul>   <h2><span onmouseover="document.getElementById('ghlink-data-types-id74563').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-data-types-id74563').style.visibility = 'hidden';" id="data-types">Data Types</span></h2> <h4><span onmouseover="document.getElementById('ghlink-Client Options-id74566').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-Client Options-id74566').style.visibility = 'hidden';" id="Client%20Options">Client Options</span></h4> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-client_options').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-client_options').style.visibility = 'hidden';">  <code>client_options() = [<span id="type-client_options"><a href="#type-client_option">client_option()</a></span>]</code><br> <code>client_option() = <br id="type-client_option">    <span><a href="#type-pref_public_key_algs_client_option">pref_public_key_algs_client_option()</a></span> |<br>    <span><a href="#type-pubkey_passphrase_client_options">pubkey_passphrase_client_options()</a></span> |<br>    <span><a href="#type-host_accepting_client_options">host_accepting_client_options()</a></span> |<br>    <span><a href="#type-authentication_client_options">authentication_client_options()</a></span> |<br>    <span><a href="#type-diffie_hellman_group_exchange_client_option">diffie_hellman_group_exchange_client_option()</a></span> |<br>    <span><a href="#type-connect_timeout_client_option">connect_timeout_client_option()</a></span> |<br>    <span><a href="#type-recv_ext_info_client_option">recv_ext_info_client_option()</a></span> |<br>    <span><a href="#type-opaque_client_options">opaque_client_options()</a></span> |<br>    <span>gen_tcp:connect_option()</span> |<br>    <span><a href="#type-common_option">common_option()</a></span></code><br> </div> <div class="data-type-desc">

<p>Options for <code><a href="#connect-3">clients</a></code>. The individual options are further explained below or by following the hyperlinks. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-pref_public_key_algs_client_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-pref_public_key_algs_client_option').style.visibility = 'hidden';">  <code>pref_public_key_algs_client_option() = <br id="type-pref_public_key_algs_client_option">    {pref_public_key_algs, [<span><a href="#type-pubkey_alg">pubkey_alg()</a></span>]}</code><br> </div> <div class="data-type-desc">

<p>List of user (client) public key algorithms to try to use.</p> <p>The default value is the <code class="code">public_key</code> entry in the list returned by <code><a href="#default_algorithms-0">ssh:default_algorithms/0</a></code>. </p> <p>If there is no public key of a specified type available, the corresponding entry is ignored. Note that the available set is dependent on the underlying cryptolib and current user's public keys. </p> <p>See also the option <code><a href="#type-user_dir_common_option"><span class="code">user_dir</span></a></code> for specifying the path to the user's keys. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-pubkey_passphrase_client_options').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-pubkey_passphrase_client_options').style.visibility = 'hidden';">  <code>pubkey_passphrase_client_options() = <br id="type-pubkey_passphrase_client_options">    {dsa_pass_phrase, string()} |<br>    {rsa_pass_phrase, string()} |<br>    {ecdsa_pass_phrase, string()}</code><br> </div> <div class="data-type-desc">

<p>If the user's DSA, RSA or ECDSA key is protected by a passphrase, it can be supplied with thoose options. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-host_accepting_client_options').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-host_accepting_client_options').style.visibility = 'hidden';">  <code>host_accepting_client_options() = <br id="type-host_accepting_client_options">    {silently_accept_hosts, <span><a href="#type-accept_hosts">accept_hosts()</a></span>} |<br>    {user_interaction, boolean()} |<br>    {save_accepted_host, boolean()} |<br>    {quiet_mode, boolean()}</code><br> <code>accept_hosts() = <br id="type-accept_hosts">    boolean() |<br>    <span><a href="#type-accept_callback">accept_callback()</a></span> |<br>    {HashAlgoSpec :: <span><a href="#type-fp_digest_alg">fp_digest_alg()</a></span>, <span><a href="#type-accept_callback">accept_callback()</a></span>}</code><br> <code id="type-fp_digest_alg">fp_digest_alg() = md5 | sha | sha224 | sha256 | sha384 | sha512</code><br> <code>accept_callback() = <br id="type-accept_callback">    fun((PeerName :: string(), <span><a href="#type-fingerprint">fingerprint()</a></span>) -&gt; boolean())</code><br> <code id="type-fingerprint">fingerprint() = string() | [string()]</code><br> </div> <div class="data-type-desc">

<dl> <dt><strong><code class="code">silently_accept_hosts</code></strong></dt> <dd> <p>This option guides the <code class="code">connect</code> function on how to act when the connected server presents a Host Key that the client has not seen before. The default is to ask the user with a question on stdio of whether to accept or reject the new Host Key. See the option <code><a href="#type-user_dir_common_option"><span class="code">user_dir</span></a></code> for specifying the path to the file <code class="code">known_hosts</code> where previously accepted Host Keys are recorded. See also the option <code><a href="#type-key_cb_common_option">key_cb</a></code> for the general way to handle keys. </p> <p>The option can be given in three different forms as seen above:</p> <ul> <li>The value is a <code class="code">boolean()</code>. The value <code class="code">true</code> will make the client accept any unknown Host Key without any user interaction. The value <code class="code">false</code> preserves the default behaviour of asking the user on stdio. </li> <li>An <code class="code">accept_callback()</code> will be called and the boolean return value <code class="code">true</code> will make the client accept the Host Key. A return value of <code class="code">false</code> will make the client to reject the Host Key and as a result the connection will be closed. The arguments to the fun are: <ul> <li> <code class="code">PeerName</code> - a string with the name or address of the remote host.</li> <li> <code class="code">FingerPrint</code> - the fingerprint of the Host Key as <code>public_key:ssh_hostkey_fingerprint/1</code> calculates it. </li> </ul> </li> <li>A tuple <code class="code">{HashAlgoSpec, accept_callback}</code>. The <code class="code">HashAlgoSpec</code> specifies which hash algorithm shall be used to calculate the fingerprint used in the call of the <code class="code">accept_callback()</code>. The <code class="code">HashALgoSpec</code> is either an atom or a list of atoms as the first argument in <code>public_key:ssh_hostkey_fingerprint/2</code>. If it is a list of hash algorithm names, the <code class="code">FingerPrint</code> argument in the <code class="code">accept_callback()</code> will be a list of fingerprints in the same order as the corresponding name in the <code class="code">HashAlgoSpec</code> list. </li> </ul> </dd> <dt><strong><code class="code">user_interaction</code></strong></dt> <dd> <p>If <code class="code">false</code>, disables the client to connect to the server if any user interaction is needed, such as accepting the server to be added to the <code class="code">known_hosts</code> file, or supplying a password.</p> <p>Even if user interaction is allowed it can be suppressed by other options, such as <code class="code">silently_accept_hosts</code> and <code class="code">password</code>. However, those options are not always desirable to use from a security point of view.</p> <p>Defaults to <code class="code">true</code>.</p> </dd> <dt><strong><code class="code">save_accepted_host</code></strong></dt> <dd> <p>If <code class="code">true</code>, the client saves an accepted host key to avoid the accept question the next time the same host is connected. If the option <code><a href="#type-key_cb_common_option"><span class="code">key_cb</span></a></code> is not present, the key is saved in the file "known_hosts". See option <code><a href="#type-user_dir_common_option"><span class="code">user_dir</span></a></code> for the location of that file. </p> <p>If <code class="code">false</code>, the key is not saved and the key will still be unknown at the next access of the same host. </p> <p>Defaults to <code class="code">true</code></p> </dd> <dt><strong><code class="code">quiet_mode</code></strong></dt> <dd> <p>If <code class="code">true</code>, the client does not print anything on authorization.</p> <p>Defaults to <code class="code">false</code></p> </dd> </dl> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-authentication_client_options').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-authentication_client_options').style.visibility = 'hidden';">  <code>authentication_client_options() = <br id="type-authentication_client_options">    {user, string()} | {password, string()}</code><br> </div> <div class="data-type-desc">

<dl> <dt><strong><code class="code">user</code></strong></dt> <dd> <p>Provides the username. If this option is not given, <code class="code">ssh</code> reads from the environment (<code class="code">LOGNAME</code> or <code class="code">USER</code> on UNIX, <code class="code">USERNAME</code> on Windows).</p> </dd> <dt><strong><code class="code">password</code></strong></dt> <dd> <p>Provides a password for password authentication. If this option is not given, the user is asked for a password, if the password authentication method is attempted.</p> </dd> </dl> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-diffie_hellman_group_exchange_client_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-diffie_hellman_group_exchange_client_option').style.visibility = 'hidden';">  <code>diffie_hellman_group_exchange_client_option() = <br id="type-diffie_hellman_group_exchange_client_option">    {dh_gex_limits,<br>     {Min :: integer() &gt;= 1,<br>      I :: integer() &gt;= 1,<br>      Max :: integer() &gt;= 1}}</code><br> </div> <div class="data-type-desc">

<p>Sets the three diffie-hellman-group-exchange parameters that guides the connected server in choosing a group. See <code><a href="https://tools.ietf.org/html/rfc4419">RFC 4419</a></code> for the details. The default value is <code class="code">{1024, 6144, 8192}</code>. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-connect_timeout_client_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-connect_timeout_client_option').style.visibility = 'hidden';">  <code id="type-connect_timeout_client_option">connect_timeout_client_option() = {connect_timeout, timeout()}</code><br> </div> <div class="data-type-desc">

<p>Sets a timeout on the transport layer connect time. For <code><span class="code">gen_tcp</span></code> the time is in milli-seconds and the default value is <code class="code">infinity</code>. </p> <p>See the parameter <code class="code">Timeout</code> in <code><a href="#connect-4">connect/4</a></code> for a timeout of the negotiation phase. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-recv_ext_info_client_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-recv_ext_info_client_option').style.visibility = 'hidden';">  <code id="type-recv_ext_info_client_option">recv_ext_info_client_option() = {recv_ext_info, boolean()}</code><br> </div> <div class="data-type-desc">

<p>Make the client tell the server that the client accepts extension negotiation, that is, include <code class="code">ext-info-c</code> in the kexinit message sent. See <code><a href="https://tools.ietf.org/html/rfc8308">RFC 8308</a></code> for details and <code><span>ssh(6)</span></code> for a list of currently implemented extensions. </p> <p> Default value is <code class="code">true</code> which is compatible with other implementations not supporting ext-info. </p> </div> </div> <h4><span onmouseover="document.getElementById('ghlink-Daemon Options (Server Options)-id75134').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-Daemon Options (Server Options)-id75134').style.visibility = 'hidden';" id="Daemon%20Options%20(Server%20Options)">Daemon Options (Server Options)</span></h4> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-daemon_options').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-daemon_options').style.visibility = 'hidden';">  <code>daemon_options() = [<span id="type-daemon_options"><a href="#type-daemon_option">daemon_option()</a></span>]</code><br> <code>daemon_option() = <br id="type-daemon_option">    <span><a href="#type-subsystem_daemon_option">subsystem_daemon_option()</a></span> |<br>    <span><a href="#type-shell_daemon_option">shell_daemon_option()</a></span> |<br>    <span><a href="#type-exec_daemon_option">exec_daemon_option()</a></span> |<br>    <span><a href="#type-ssh_cli_daemon_option">ssh_cli_daemon_option()</a></span> |<br>    <span><a href="#type-authentication_daemon_options">authentication_daemon_options()</a></span> |<br>    <span><a href="#type-diffie_hellman_group_exchange_daemon_option">diffie_hellman_group_exchange_daemon_option()</a></span> |<br>    <span><a href="#type-negotiation_timeout_daemon_option">negotiation_timeout_daemon_option()</a></span> |<br>    <span><a href="#type-hardening_daemon_options">hardening_daemon_options()</a></span> |<br>    <span><a href="#type-callbacks_daemon_options">callbacks_daemon_options()</a></span> |<br>    <span><a href="#type-send_ext_info_daemon_option">send_ext_info_daemon_option()</a></span> |<br>    <span><a href="#type-opaque_daemon_options">opaque_daemon_options()</a></span> |<br>    <span>gen_tcp:listen_option()</span> |<br>    <span><a href="#type-common_option">common_option()</a></span></code><br> </div> <div class="data-type-desc">

<p>Options for <code><a href="#daemon-1">daemons</a></code>. The individual options are further explained below or by following the hyperlinks. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-subsystem_daemon_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-subsystem_daemon_option').style.visibility = 'hidden';">  <code>subsystem_daemon_option() = {subsystems, <span id="type-subsystem_daemon_option"><a href="#type-subsystem_spec">subsystem_spec()</a></span>}</code><br> <code>subsystem_spec() = {Name :: string(), <span id="type-subsystem_spec"><a href="#type-mod_args">mod_args()</a></span>}</code><br> </div> <div class="data-type-desc">

<p>Defines a subsystem in the daemon.</p> <p>The <code class="code">subsystem_name</code> is the name that a client requests to start with for example <code><a href="ssh_connection#subsystem-4">ssh_connection:subsystem/4</a></code>. </p> <p>The <code class="code">channel_callback</code> is the module that implements the <code><a href="ssh_server_channel">ssh_server_channel</a></code> (replaces ssh_daemon_channel) behaviour in the daemon. See the section <code><a href="using_ssh#usersguide_creating_a_subsystem">Creating a Subsystem</a></code> in the User's Guide for more information and an example. </p> <p>If the subsystems option is not present, the value of <code class="code">ssh_sftpd:subsystem_spec([])</code> is used. This enables the sftp subsystem by default. The option can be set to the empty list if you do not want the daemon to run any subsystems.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-shell_daemon_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-shell_daemon_option').style.visibility = 'hidden';">  <code>shell_daemon_option() = <br id="type-shell_daemon_option">    {shell, <span><a href="#type-mod_fun_args">mod_fun_args()</a></span> | <span><a href="#type-shell_fun%2f1">'shell_fun/1'()</a></span> | <span><a href="#type-shell_fun%2f2">'shell_fun/2'()</a></span>}</code><br> <code id="type-shell_fun%2f1">'shell_fun/1'() = fun((User :: string()) -&gt; pid())</code><br> <code>'shell_fun/2'() = <br id="type-shell_fun%2f2">    fun((User :: string(), PeerAddr :: <span>inet:ip_address()</span>) -&gt; pid())</code><br> </div> <div class="data-type-desc">

<p>Defines the read-eval-print loop used in a daemon when a shell is requested by the client. The default is to use the Erlang shell: <code class="code">{shell, start, []}</code> </p> <p>See the option <code><a href="#type-exec_daemon_option"><span class="code">exec</span></a></code> for a description of how the daemon execute exec-requests depending on the shell- and exec-options.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-exec_daemon_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-exec_daemon_option').style.visibility = 'hidden';">  <code>exec_daemon_option() = <br id="type-exec_daemon_option">    {exec, <span><a href="#type-exec_fun%2f1">'exec_fun/1'()</a></span> | <span><a href="#type-exec_fun%2f2">'exec_fun/2'()</a></span> | <span><a href="#type-exec_fun%2f3">'exec_fun/3'()</a></span>}</code><br> <code>'exec_fun/1'() = fun((Cmd :: string()) -&gt; <span id="type-exec_fun%2f1"><a href="#type-exec_result">exec_result()</a></span>)</code><br> <code>'exec_fun/2'() = <br id="type-exec_fun%2f2">    fun((Cmd :: string(), User :: string()) -&gt; <span><a href="#type-exec_result">exec_result()</a></span>)</code><br> <code>'exec_fun/3'() = <br id="type-exec_fun%2f3">    fun((Cmd :: string(),<br>         User :: string(),<br>         ClientAddr :: <span><a href="#type-ip_port">ip_port()</a></span>) -&gt;<br>            <span><a href="#type-exec_result">exec_result()</a></span>)</code><br> <code>exec_result() = <br id="type-exec_result">    {ok, Result :: term()} | {error, Reason :: term()}</code><br> </div> <div class="data-type-desc">

<p>This option changes how the daemon execute exec-requests from clients. The term in the return value is formatted to a string if it is a non-string type. No trailing newline is added in the ok-case but in the error case.</p> <p>Error texts are returned on channel-type 1 which usually is piped to <code class="code">stderr</code> on e.g Linux systems. Texts from a successful execution will in similar manner be piped to <code class="code">stdout</code>. The exit-status code is set to 0 for success and -1 for errors. The exact results presented on the client side depends on the client and the client's operating system. </p> <p>The option cooperates with the daemon-option <code><a href="#type-shell_daemon_option"><span class="code">shell</span></a></code> in the following way:</p> <dl> <dt><strong>1. If the exec-option is present (the shell-option may or may not be present):</strong></dt> <dd> <p>The exec-option fun is called with the same number of parameters as the arity of the fun, and the result is returned to the client. </p> </dd> <dt><strong>2. If the exec-option is absent, but a shell-option is present with the default Erlang shell:</strong></dt> <dd> <p>The default Erlang evaluator is used and the result is returned to the client.</p> </dd> <dt><strong>3. If the exec-option is absent, but a shell-option is present that is not the default Erlang shell:</strong></dt> <dd> <p>The exec-request is not evaluated and an error message is returned to the client.</p> </dd> <dt><strong>4. If neither the exec-option nor the shell-option is present:</strong></dt> <dd> <p>The default Erlang evaluator is used and the result is returned to the client.</p> </dd> </dl> <p>If a custom CLI is installed (see the option <code><a href="#type-ssh_cli_daemon_option"><span class="code">ssh_cli</span></a></code>) the rules above are replaced by thoose implied by the custom CLI. </p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>The exec-option has existed for a long time but has not previously been documented. The old definition and behaviour are retained but obey the rules 1-4 above if conflicting. The old and undocumented style should not be used in new programs.</p> </div> </div> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-ssh_cli_daemon_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ssh_cli_daemon_option').style.visibility = 'hidden';">  <code>ssh_cli_daemon_option() = {ssh_cli, <span id="type-ssh_cli_daemon_option"><a href="#type-mod_args">mod_args()</a></span> | no_cli}</code><br> </div> <div class="data-type-desc">

<p>Provides your own CLI implementation in a daemon.</p> <p>It is a channel callback module that implements a shell and command execution. The shell's read-eval-print loop can be customized, using the option <code><a href="#type-shell_daemon_option"><span class="code">shell</span></a></code>. This means less work than implementing an own CLI channel. If <code class="code">ssh_cli</code> is set to <code class="code">no_cli</code>, the CLI channels like <code><a href="#type-shell_daemon_option"><span class="code">shell</span></a></code> and <code><a href="#type-exec_daemon_option"><span class="code">exec</span></a></code> are disabled and only subsystem channels are allowed.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-authentication_daemon_options').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-authentication_daemon_options').style.visibility = 'hidden';">  <code>authentication_daemon_options() = <br id="type-authentication_daemon_options">    {system_dir, string()} |<br>    {auth_method_kb_interactive_data, <span><a href="#type-prompt_texts">prompt_texts()</a></span>} |<br>    {user_passwords, [{UserName :: string(), Pwd :: string()}]} |<br>    {password, string()} |<br>    {pwdfun, <span><a href="#type-pwdfun_2">pwdfun_2()</a></span> | <span><a href="#type-pwdfun_4">pwdfun_4()</a></span>}</code><br> <code>prompt_texts() = <span id="type-prompt_texts"><a href="#type-kb_int_tuple">kb_int_tuple()</a></span> | <span><a href="#type-kb_int_fun_3">kb_int_fun_3()</a></span></code><br> <code>kb_int_tuple() = <br id="type-kb_int_tuple">    {Name :: string(),<br>     Instruction :: string(),<br>     Prompt :: string(),<br>     Echo :: boolean()}</code><br> <code>kb_int_fun_3() = <br id="type-kb_int_fun_3">    fun((Peer :: <span><a href="#type-ip_port">ip_port()</a></span>, User :: string(), Service :: string()) -&gt;<br>            <span><a href="#type-kb_int_tuple">kb_int_tuple()</a></span>)</code><br> <code>pwdfun_2() = <br id="type-pwdfun_2">    fun((User :: string(), Password :: string()) -&gt; boolean())</code><br> <code>pwdfun_4() = <br id="type-pwdfun_4">    fun((User :: string(),<br>         Password :: string(),<br>         PeerAddress :: <span><a href="#type-ip_port">ip_port()</a></span>,<br>         State :: any()) -&gt;<br>            boolean() |<br>            disconnect |<br>            {boolean(), NewState :: any()})</code><br> </div> <div class="data-type-desc">

<dl> <dt><strong><code class="code" id="type-system_dir_daemon_option">system_dir</code></strong></dt> <dd> <p>Sets the system directory, containing the host key files that identify the host keys for <code class="code">ssh</code>. Defaults to <code class="code">/etc/ssh</code>.</p> <p>For security reasons, this directory is normally accessible only to the root user.</p> <p>See also the option <code><a href="#type-key_cb_common_option">key_cb</a></code> for the general way to handle keys. </p> </dd> <dt><strong><code class="code">auth_method_kb_interactive_data</code></strong></dt> <dd> <p>Sets the text strings that the daemon sends to the client for presentation to the user when using <code class="code">keyboard-interactive</code> authentication.</p> <p>If the fun/3 is used, it is called when the actual authentication occurs and may therefore return dynamic data like time, remote ip etc.</p> <p>The parameter <code class="code">Echo</code> guides the client about need to hide the password.</p> <p>The default value is: <code class="code">{auth_method_kb_interactive_data, {"SSH server", "Enter password for \""++User++"\"", "password: ", false}&gt;</code> </p> </dd> <dt><strong><code class="code">user_passwords</code></strong></dt> <dd> <p>Provides passwords for password authentication. The passwords are used when someone tries to connect to the server and public key user-authentication fails. The option provides a list of valid usernames and the corresponding passwords. </p> </dd> <dt><strong><code class="code">password</code></strong></dt> <dd> <p>Provides a global password that authenticates any user.</p> <div class="warning"> <div class="label">Warning</div> <div class="content">

<p>Intended to facilitate testing.</p> <p>From a security perspective this option makes the server very vulnerable.</p> </div> </div> </dd> <dt><strong><code class="code">pwdfun</code> with <code class="code">pwdfun_4()</code></strong></dt> <dd> <p>Provides a function for password validation. This could used for calling an external system or handeling passwords stored as hash values. </p> <p>This fun can also be used to make delays in authentication tries for example by calling <code>timer:sleep/1</code>.</p> <p>To facilitate for instance counting of failed tries, the <code class="code">State</code> variable could be used. This state is per connection only. The first time the pwdfun is called for a connection, the <code class="code">State</code> variable has the value <code class="code">undefined</code>. </p> <p>The fun should return: </p> <ul> <li> <code class="code">true</code> if the user and password is valid</li> <li> <code class="code">false</code> if the user or password is invalid</li> <li> <code class="code">disconnect</code> if a SSH_MSG_DISCONNECT message should be sent immediately. It will be followed by a close of the underlying tcp connection.</li> <li> <code class="code">{true, NewState:any()}</code> if the user and password is valid</li> <li> <code class="code">{false, NewState:any()}</code> if the user or password is invalid</li> </ul> <p>A third usage is to block login attempts from a missbehaving peer. The <code class="code">State</code> described above can be used for this. The return value <code class="code">disconnect</code> is useful for this.</p> </dd> <dt><strong><code class="code">pwdfun</code> with <code class="code">pwdfun_2()</code></strong></dt> <dd> <p>Provides a function for password validation. This function is called with user and password as strings, and returns:</p> <ul> <li> <code class="code">true</code> if the user and password is valid</li> <li> <code class="code">false</code> if the user or password is invalid</li> </ul> <p>This variant is kept for compatibility.</p> </dd> </dl> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-diffie_hellman_group_exchange_daemon_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-diffie_hellman_group_exchange_daemon_option').style.visibility = 'hidden';">  <code>diffie_hellman_group_exchange_daemon_option() = <br id="type-diffie_hellman_group_exchange_daemon_option">    {dh_gex_groups,<br>     [<span><a href="#type-explicit_group">explicit_group()</a></span>] |<br>     <span><a href="#type-explicit_group_file">explicit_group_file()</a></span> |<br>     <span><a href="#type-ssh_moduli_file">ssh_moduli_file()</a></span>} |<br>    {dh_gex_limits, {Min :: integer() &gt;= 1, Max :: integer() &gt;= 1}}</code><br> <code>explicit_group() = <br id="type-explicit_group">    {Size :: integer() &gt;= 1,<br>     G :: integer() &gt;= 1,<br>     P :: integer() &gt;= 1}</code><br> <code id="type-explicit_group_file">explicit_group_file() = {file, string()}</code><br> <code id="type-ssh_moduli_file">ssh_moduli_file() = {ssh_moduli_file, string()}</code><br> </div> <div class="data-type-desc">

<dl> <dt><strong><code class="code">dh_gex_groups</code></strong></dt> <dd> <p>Defines the groups the server may choose among when diffie-hellman-group-exchange is negotiated. See <code><a href="https://tools.ietf.org/html/rfc4419">RFC 4419</a></code> for details. The three variants of this option are: </p> <dl> <dt><strong><code class="code">{Size=integer(),G=integer(),P=integer()}</code></strong></dt> <dd>The groups are given explicitly in this list. There may be several elements with the same <code class="code">Size</code>. In such a case, the server will choose one randomly in the negotiated Size. </dd> <dt><strong><code class="code">{file,filename()}</code></strong></dt> <dd>The file must have one or more three-tuples <code class="code">{Size=integer(),G=integer(),P=integer()}</code> terminated by a dot. The file is read when the daemon starts. </dd> <dt><strong><code class="code">{ssh_moduli_file,filename()}</code></strong></dt> <dd>The file must be in <code>ssh-keygen moduli file format</code>. The file is read when the daemon starts. </dd> </dl> <p>The default list is fetched from the <code>public_key</code> application. </p> </dd> <dt><strong><code class="code">dh_gex_limits</code></strong></dt> <dd> <p>Limits what a client can ask for in diffie-hellman-group-exchange. The limits will be <code class="code">{MaxUsed = min(MaxClient,Max), MinUsed = max(MinClient,Min)}</code> where <code class="code">MaxClient</code> and <code class="code">MinClient</code> are the values proposed by a connecting client. </p> <p>The default value is <code class="code">{0,infinity}</code>. </p> <p>If <code class="code">MaxUsed &lt; MinUsed</code> in a key exchange, it will fail with a disconnect. </p> <p>See <code><a href="https://tools.ietf.org/html/rfc4419">RFC 4419</a></code> for the function of the Max and Min values.</p> </dd> </dl> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-negotiation_timeout_daemon_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-negotiation_timeout_daemon_option').style.visibility = 'hidden';">  <code>negotiation_timeout_daemon_option() = <br id="type-negotiation_timeout_daemon_option">    {negotiation_timeout, timeout()}</code><br> </div> <div class="data-type-desc">

<p>Maximum time in milliseconds for the authentication negotiation. Defaults to 120000 ms (2 minutes). If the client fails to log in within this time, the connection is closed. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-hardening_daemon_options').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-hardening_daemon_options').style.visibility = 'hidden';">  <code>hardening_daemon_options() = <br id="type-hardening_daemon_options">    {max_sessions, integer() &gt;= 1} |<br>    {max_channels, integer() &gt;= 1} |<br>    {parallel_login, boolean()} |<br>    {minimal_remote_max_packet_size, integer() &gt;= 1}</code><br> </div> <div class="data-type-desc">

<dl> <dt><strong><code class="code">max_sessions</code></strong></dt> <dd> <p>The maximum number of simultaneous sessions that are accepted at any time for this daemon. This includes sessions that are being authorized. Thus, if set to <code class="code">N</code>, and <code class="code">N</code> clients have connected but not started the login process, connection attempt <code class="code">N+1</code> is aborted. If <code class="code">N</code> connections are authenticated and still logged in, no more logins are accepted until one of the existing ones log out. </p> <p>The counter is per listening port. Thus, if two daemons are started, one with <code class="code">{max_sessions,N}</code> and the other with <code class="code">{max_sessions,M}</code>, in total <code class="code">N+M</code> connections are accepted for the whole <code class="code">ssh</code> application. </p> <p>Notice that if <code class="code">parallel_login</code> is <code class="code">false</code>, only one client at a time can be in the authentication phase. </p> <p>By default, this option is not set. This means that the number is not limited. </p> </dd> <dt><strong><code class="code">max_channels</code></strong></dt> <dd> <p>The maximum number of channels with active remote subsystem that are accepted for each connection to this daemon</p> <p>By default, this option is not set. This means that the number is not limited. </p> </dd> <dt><strong><code class="code">parallel_login</code></strong></dt> <dd> <p>If set to false (the default value), only one login is handled at a time. If set to true, an unlimited number of login attempts are allowed simultaneously. </p> <p>If the <code class="code">max_sessions</code> option is set to <code class="code">N</code> and <code class="code">parallel_login</code> is set to <code class="code">true</code>, the maximum number of simultaneous login attempts at any time is limited to <code class="code">N-K</code>, where <code class="code">K</code> is the number of authenticated connections present at this daemon. </p> <div class="warning"> <div class="label">Warning</div> <div class="content">

<p>Do not enable <code class="code">parallel_logins</code> without protecting the server by other means, for example, by the <code class="code">max_sessions</code> option or a firewall configuration. If set to <code class="code">true</code>, there is no protection against DOS attacks.</p> </div> </div> </dd> <dt><strong><code class="code">minimal_remote_max_packet_size</code></strong></dt> <dd> <p>The least maximum packet size that the daemon will accept in channel open requests from the client. The default value is 0. </p> </dd> </dl> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-callbacks_daemon_options').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-callbacks_daemon_options').style.visibility = 'hidden';">  <code>callbacks_daemon_options() = <br id="type-callbacks_daemon_options">    {failfun,<br>     fun((User :: string(),<br>          PeerAddress :: <span>inet:ip_address()</span>,<br>          Reason :: term()) -&gt;<br>             term())} |<br>    {connectfun,<br>     fun((User :: string(),<br>          PeerAddress :: <span>inet:ip_address()</span>,<br>          Method :: string()) -&gt;<br>             term())}</code><br> </div> <div class="data-type-desc">

<dl> <dt><strong><code class="code">connectfun</code></strong></dt> <dd> <p>Provides a fun to implement your own logging when a user authenticates to the server.</p> </dd> <dt><strong><code class="code">failfun</code></strong></dt> <dd> <p>Provides a fun to implement your own logging when a user fails to authenticate.</p> </dd> </dl> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-send_ext_info_daemon_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-send_ext_info_daemon_option').style.visibility = 'hidden';">  <code id="type-send_ext_info_daemon_option">send_ext_info_daemon_option() = {send_ext_info, boolean()}</code><br> </div> <div class="data-type-desc">

<p>Make the server (daemon) tell the client that the server accepts extension negotiation, that is, include <code class="code">ext-info-s</code> in the kexinit message sent. See <code><a href="https://tools.ietf.org/html/rfc8308">RFC 8308</a></code> for details and <code><span>ssh(6)</span></code> for a list of currently implemented extensions. </p> <p>Default value is <code class="code">true</code> which is compatible with other implementations not supporting ext-info. </p> </div> </div> <h4><span onmouseover="document.getElementById('ghlink-Options common to clients and daemons-id77953').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-Options common to clients and daemons-id77953').style.visibility = 'hidden';" id="Options%20common%20to%20clients%20and%20daemons">Options common to clients and daemons</span></h4> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-common_options').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-common_options').style.visibility = 'hidden';">  <code>common_options() = [<span id="type-common_options"><a href="#type-common_option">common_option()</a></span>]</code><br> <code>common_option() = <br id="type-common_option">    <span><a href="#type-user_dir_common_option">user_dir_common_option()</a></span> |<br>    <span><a href="#type-profile_common_option">profile_common_option()</a></span> |<br>    <span><a href="#type-max_idle_time_common_option">max_idle_time_common_option()</a></span> |<br>    <span><a href="#type-key_cb_common_option">key_cb_common_option()</a></span> |<br>    <span><a href="#type-disconnectfun_common_option">disconnectfun_common_option()</a></span> |<br>    <span><a href="#type-unexpectedfun_common_option">unexpectedfun_common_option()</a></span> |<br>    <span><a href="#type-ssh_msg_debug_fun_common_option">ssh_msg_debug_fun_common_option()</a></span> |<br>    <span><a href="#type-rekey_limit_common_option">rekey_limit_common_option()</a></span> |<br>    <span><a href="#type-id_string_common_option">id_string_common_option()</a></span> |<br>    <span><a href="#type-preferred_algorithms_common_option">preferred_algorithms_common_option()</a></span> |<br>    <span><a href="#type-modify_algorithms_common_option">modify_algorithms_common_option()</a></span> |<br>    <span><a href="#type-auth_methods_common_option">auth_methods_common_option()</a></span> |<br>    <span><a href="#type-inet_common_option">inet_common_option()</a></span> |<br>    <span><a href="#type-fd_common_option">fd_common_option()</a></span></code><br> </div> <div class="data-type-desc">

<p>The options above can be used both in clients and in daemons (servers). They are further explained below.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-user_dir_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-user_dir_common_option').style.visibility = 'hidden';">  <code id="type-user_dir_common_option">user_dir_common_option() = {user_dir, false | string()}</code><br> </div> <div class="data-type-desc">

<p>Sets the user directory. That is, the directory containing <code class="code">ssh</code> configuration files for the user, such as <code class="code">known_hosts</code>, <code class="code">id_rsa</code>, <code class="code">id_dsa</code>&gt;, <code class="code">id_ecdsa</code> and <code class="code">authorized_key</code>. Defaults to the directory normally referred to as <code class="code">~/.ssh</code>. </p> <p>See also the option <code><a href="#type-key_cb_common_option">key_cb</a></code> for the general way to handle keys. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-profile_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-profile_common_option').style.visibility = 'hidden';">  <code id="type-profile_common_option">profile_common_option() = {profile, atom()}</code><br> </div> <div class="data-type-desc">

<p>Used together with <code class="code">ip-address</code> and <code class="code">port</code> to uniquely identify a ssh daemon. This can be useful in a virtualized environment, where there can be more that one server that has the same <code class="code">ip-address</code> and <code class="code">port</code>. If this property is not explicitly set, it is assumed that the the <code class="code">ip-address</code> and <code class="code">port</code> uniquely identifies the SSH daemon. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-max_idle_time_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-max_idle_time_common_option').style.visibility = 'hidden';">  <code id="type-max_idle_time_common_option">max_idle_time_common_option() = {idle_time, timeout()}</code><br> </div> <div class="data-type-desc">

<p>Sets a time-out on a connection when no channels are active. Defaults to <code class="code">infinity</code>.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-rekey_limit_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-rekey_limit_common_option').style.visibility = 'hidden';">  <code>rekey_limit_common_option() = <br id="type-rekey_limit_common_option">    {rekey_limit,<br>     Bytes ::<br>         <span><a href="#type-limit_bytes">limit_bytes()</a></span> |<br>         {Minutes :: <span><a href="#type-limit_time">limit_time()</a></span>, Bytes :: <span><a href="#type-limit_bytes">limit_bytes()</a></span>}}</code><br> <code id="type-limit_bytes">limit_bytes() = integer() &gt;= 0 | infinity</code><br> <code id="type-limit_time">limit_time() = integer() &gt;= 1 | infinity</code><br> </div> <div class="data-type-desc">

<p>Sets the limit when rekeying is to be initiated. Both the max time and max amount of data could be configured: </p> <ul> <li> <code class="code">{Minutes, Bytes}</code> initiate rekeying when any of the limits are reached.</li> <li> <code class="code">Bytes</code> initiate rekeying when <code class="code">Bytes</code> number of bytes are transferred, or at latest after one hour.</li> </ul> <p>When a rekeying is done, both the timer and the byte counter are restarted. Defaults to one hour and one GByte.</p> <p>If <code class="code">Minutes</code> is set to <code class="code">infinity</code>, no rekeying will ever occur due to that max time has passed. Setting <code class="code">Bytes</code> to <code class="code">infinity</code> will inhibit rekeying after a certain amount of data has been transferred. If the option value is set to <code class="code">{infinity, infinity}</code>, no rekeying will be initiated. Note that rekeying initiated by the peer will still be performed.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-key_cb_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-key_cb_common_option').style.visibility = 'hidden';">  <code>key_cb_common_option() = <br id="type-key_cb_common_option">    {key_cb,<br>     Module :: atom() | {Module :: atom(), Opts :: [term()]}}</code><br> </div> <div class="data-type-desc">

<p>Module implementing the behaviour <code><a href="ssh_client_key_api">ssh_client_key_api</a></code> and/or <code><a href="ssh_server_key_api">ssh_server_key_api</a></code>. Can be used to customize the handling of public keys. If callback options are provided along with the module name, they are made available to the callback module via the options passed to it under the key 'key_cb_private'. </p> <p>The <code class="code">Opts</code> defaults to <code class="code">[]</code> when only the <code class="code">Module</code> is specified. </p> <p>The default value of this option is <code class="code">{ssh_file, []}</code>. </p> <p>A call to the call-back function <code class="code">F</code> will be</p> <pre data-language="erlang">Module:F(..., [{key_cb_private,Opts}|UserOptions])</pre> <p>where <code class="code">...</code> are arguments to <code class="code">F</code> as in <code><a href="ssh_client_key_api">ssh_client_key_api</a></code> and/or <code><a href="ssh_server_key_api">ssh_server_key_api</a></code>. The <code class="code">UserOptions</code> are the options given to <code class="code">ssh:connect</code>, <code class="code">ssh:shell</code> or <code class="code">ssh:daemon</code>. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-disconnectfun_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-disconnectfun_common_option').style.visibility = 'hidden';">  <code>disconnectfun_common_option() = <br id="type-disconnectfun_common_option">    {disconnectfun, fun((Reason :: term()) -&gt; void | any())}</code><br> </div> <div class="data-type-desc">

<p>Provides a fun to implement your own logging when the peer disconnects.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-unexpectedfun_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-unexpectedfun_common_option').style.visibility = 'hidden';">  <code>unexpectedfun_common_option() = <br id="type-unexpectedfun_common_option">    {unexpectedfun,<br>     fun((Message :: term(), {Host :: term(), Port :: term()}) -&gt;<br>             report | skip)}</code><br> </div> <div class="data-type-desc">

<p>Provides a fun to implement your own logging or other action when an unexpected message arrives. If the fun returns <code class="code">report</code> the usual info report is issued but if <code class="code">skip</code> is returned no report is generated.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-ssh_msg_debug_fun_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ssh_msg_debug_fun_common_option').style.visibility = 'hidden';">  <code>ssh_msg_debug_fun_common_option() = <br id="type-ssh_msg_debug_fun_common_option">    {ssh_msg_debug_fun,<br>     fun((<span><a href="ssh#type-connection_ref">ssh:connection_ref()</a></span>,<br>          AlwaysDisplay :: boolean(),<br>          Msg :: binary(),<br>          LanguageTag :: binary()) -&gt;<br>             any())}</code><br> </div> <div class="data-type-desc">

<p>Provide a fun to implement your own logging of the SSH message SSH_MSG_DEBUG. The last three parameters are from the message, see <code><a href="https://tools.ietf.org/html/rfc4253#section-11.3">RFC 4253, section 11.3</a></code>. The <code><a href="#type-connection_ref"><span class="code">connection_ref()</span></a></code> is the reference to the connection on which the message arrived. The return value from the fun is not checked. </p> <p>The default behaviour is ignore the message. To get a printout for each message with <code class="code">AlwaysDisplay = true</code>, use for example <code class="code">{ssh_msg_debug_fun, fun(_,true,M,_)-&gt; io:format("DEBUG: ~p~n", [M]) end}</code></p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-id_string_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-id_string_common_option').style.visibility = 'hidden';">  <code>id_string_common_option() = <br id="type-id_string_common_option">    {id_string,<br>     string() |<br>     random |<br>     {random, Nmin :: integer() &gt;= 1, Nmax :: integer() &gt;= 1}}</code><br> </div> <div class="data-type-desc">

<p>The string the daemon will present to a connecting peer initially. The default value is "Erlang/VSN" where VSN is the ssh application version number. </p> <p>The value <code class="code">random</code> will cause a random string to be created at each connection attempt. This is to make it a bit more difficult for a malicious peer to find the ssh software brand and version. </p> <p>The value <code class="code">{random, Nmin, Nmax}</code> will make a random string with at least <code class="code">Nmin</code> characters and at most <code class="code">Nmax</code> characters. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-preferred_algorithms_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-preferred_algorithms_common_option').style.visibility = 'hidden';">  <code>preferred_algorithms_common_option() = <br id="type-preferred_algorithms_common_option">    {preferred_algorithms, <span><a href="#type-algs_list">algs_list()</a></span>}</code><br> <code>algs_list() = [<span id="type-algs_list"><a href="#type-alg_entry">alg_entry()</a></span>]</code><br> <code>alg_entry() = <br id="type-alg_entry">    {kex, [<span><a href="#type-kex_alg">kex_alg()</a></span>]} |<br>    {public_key, [<span><a href="#type-pubkey_alg">pubkey_alg()</a></span>]} |<br>    {cipher, <span><a href="#type-double_algs">double_algs</a></span>(<span><a href="#type-cipher_alg">cipher_alg()</a></span>)} |<br>    {mac, <span><a href="#type-double_algs">double_algs</a></span>(<span><a href="#type-mac_alg">mac_alg()</a></span>)} |<br>    {compression, <span><a href="#type-double_algs">double_algs</a></span>(<span><a href="#type-compression_alg">compression_alg()</a></span>)}</code><br> <code>kex_alg() = <br id="type-kex_alg">    'diffie-hellman-group-exchange-sha1' |<br>    'diffie-hellman-group-exchange-sha256' |<br>    'diffie-hellman-group1-sha1' |<br>    'diffie-hellman-group14-sha1' |<br>    'diffie-hellman-group14-sha256' |<br>    'diffie-hellman-group16-sha512' |<br>    'diffie-hellman-group18-sha512' |<br>    'ecdh-sha2-nistp256' |<br>    'ecdh-sha2-nistp384' |<br>    'ecdh-sha2-nistp521'</code><br> <code>pubkey_alg() = <br id="type-pubkey_alg">    'ecdsa-sha2-nistp256' |<br>    'ecdsa-sha2-nistp384' |<br>    'ecdsa-sha2-nistp521' |<br>    'rsa-sha2-256' |<br>    'rsa-sha2-512' |<br>    'ssh-dss' |<br>    'ssh-rsa'</code><br> <code>cipher_alg() = <br id="type-cipher_alg">    '3des-cbc' |<br>    'AEAD_AES_128_GCM' |<br>    'AEAD_AES_256_GCM' |<br>    'aes128-cbc' |<br>    'aes128-ctr' |<br>    'aes128-gcm@openssh.com' |<br>    'aes192-ctr' |<br>    'aes256-ctr' |<br>    'aes256-gcm@openssh.com'</code><br> <code>mac_alg() = <br id="type-mac_alg">    'AEAD_AES_128_GCM' |<br>    'AEAD_AES_256_GCM' |<br>    'hmac-sha1' |<br>    'hmac-sha2-256' |<br>    'hmac-sha2-512'</code><br> <code id="type-compression_alg">compression_alg() = none | zlib | 'zlib@openssh.com'</code><br> <code>double_algs(AlgType) = <br id="type-double_algs">    [{client2server, [AlgType]} | {server2client, [AlgType]}] |<br>    [AlgType]</code><br> </div> <div class="data-type-desc">

<p>List of algorithms to use in the algorithm negotiation. The default <code class="code">algs_list()</code> can be obtained from <code><a href="#default_algorithms-0">default_algorithms/0</a></code>. </p> <p>If an alg_entry() is missing in the algs_list(), the default value is used for that entry.</p> <p>Here is an example of this option:</p> <pre data-language="erlang">{preferred_algorithms, 
[{public_key,['ssh-rsa','ssh-dss']},
{cipher,[{client2server,['aes128-ctr']},
          {server2client,['aes128-cbc','3des-cbc']}]},
{mac,['hmac-sha2-256','hmac-sha1']},
{compression,[none,zlib]}
]
}</pre> <p>The example specifies different algorithms in the two directions (client2server and server2client), for cipher but specifies the same algorithms for mac and compression in both directions. The kex (key exchange) is implicit but public_key is set explicitly.</p> <p>For background and more examples see the <code><a href="configure_algos#introduction">User's Guide</a></code>.</p> <p>If an algorithm name occurs more than once in a list, the behaviour is undefined. The tags in the property lists are also assumed to occur at most one time. </p> <div class="warning"> <div class="label">Warning</div> <div class="content">

<p>Changing the values can make a connection less secure. Do not change unless you know exactly what you are doing. If you do not understand the values then you are not supposed to change them.</p> </div> </div> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-modify_algorithms_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-modify_algorithms_common_option').style.visibility = 'hidden';">  <code>modify_algorithms_common_option() = <br id="type-modify_algorithms_common_option">    {modify_algorithms, <span><a href="#type-modify_algs_list">modify_algs_list()</a></span>}</code><br> <code>modify_algs_list() = <br id="type-modify_algs_list">    [{append, <span><a href="#type-algs_list">algs_list()</a></span>} |<br>     {prepend, <span><a href="#type-algs_list">algs_list()</a></span>} |<br>     {rm, <span><a href="#type-algs_list">algs_list()</a></span>}]</code><br> </div> <div class="data-type-desc">

<p>Modifies the list of algorithms to use in the algorithm negotiation. The modifications are applied after the option <code class="code">preferred_algorithms</code> (if existing) is applied.</p> <p>The algoritm for modifications works like this:</p> <ul> <li> <p>Input is the <code class="code">modify_algs_list()</code> and a set of algorithms <code class="code">A</code> obtained from the <code class="code">preferred_algorithms</code> option if existing, or else from the <code><a href="ssh#default_algorithms-0">ssh:default_algorithms/0</a></code>. </p> </li> <li> <p>The head of the <code class="code">modify_algs_list()</code> modifies <code class="code">A</code> giving the result <code class="code">A'</code>.</p> <p>The possible modifications are:</p> <ul> <li> <p>Append or prepend supported but not enabled algorithm(s) to the list of algorithms. If the wanted algorithms already are in <code class="code">A</code> they will first be removed and then appended or prepended, </p> </li> <li> <p>Remove (rm) one or more algorithms from <code class="code">A</code>. </p> </li> </ul> </li> <li> <p>Repeat the modification step with the tail of <code class="code">modify_algs_list()</code> and the resulting <code class="code">A'</code>. </p> </li> </ul> <p>If an unsupported algorithm is in the <code class="code">modify_algs_list()</code>, it will be silently ignored</p> <p>If there are more than one modify_algorithms options, the result is undefined.</p> <p>Here is an example of this option:</p> <pre data-language="erlang">{modify_algorithms, 
[{prepend, [{kex, ['diffie-hellman-group1-sha1']}],
{rm,      [{compression, [none]}]}
]
}</pre> <p>The example specifies that:</p> <ul> <li> <p>the old key exchange algorithm 'diffie-hellman-group1-sha1' should be the main alternative. It will be the main alternative since it is prepened to the list</p> </li> <li> <p>The compression algorithm none (= no compression) is removed so compression is enforced</p> </li> </ul> <p>For background and more examples see the <code><a href="configure_algos#introduction">User's Guide</a></code>.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-inet_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-inet_common_option').style.visibility = 'hidden';">  <code id="type-inet_common_option">inet_common_option() = {inet, inet | inet6}</code><br> </div> <div class="data-type-desc">

<p>IP version to use when the host address is specified as <code class="code">any</code>.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-auth_methods_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-auth_methods_common_option').style.visibility = 'hidden';">  <code id="type-auth_methods_common_option">auth_methods_common_option() = {auth_methods, string()}</code><br> </div> <div class="data-type-desc">

<p>Comma-separated string that determines which authentication methods that the client shall support and in which order they are tried. Defaults to <code class="code">"publickey,keyboard-interactive,password"</code> </p> <p>Note that the client is free to use any order and to exclude methods. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-fd_common_option').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-fd_common_option').style.visibility = 'hidden';">  <code>fd_common_option() = {fd, <span id="type-fd_common_option">gen_tcp:socket()</span>}</code><br> </div> <div class="data-type-desc">

<p>Allows an existing file-descriptor to be used (passed on to the transport protocol).</p> </div> </div> <h4><span onmouseover="document.getElementById('ghlink-Other data types-id78792').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-Other data types-id78792').style.visibility = 'hidden';" id="Other%20data%20types">Other data types</span></h4> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-host').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-host').style.visibility = 'hidden';">  <code>host() = string() | <span id="type-host">inet:ip_address()</span> | loopback</code><br> </div>  </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-ip_port').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-ip_port').style.visibility = 'hidden';">  <code>ip_port() = {<span id="type-ip_port">inet:ip_address()</span>, <span>inet:port_number()</span>}</code><br> </div>  </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-mod_args').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-mod_args').style.visibility = 'hidden';">  <code id="type-mod_args">mod_args() = {Module :: atom(), Args :: list()}</code><br> </div>  </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-mod_fun_args').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-mod_fun_args').style.visibility = 'hidden';">  <code>mod_fun_args() = <br id="type-mod_fun_args">    {Module :: atom(), Function :: atom(), Args :: list()}</code><br> </div>  </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-open_socket').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-open_socket').style.visibility = 'hidden';">  <code>open_socket() = <span id="type-open_socket">gen_tcp:socket()</span></code><br> </div> <div class="data-type-desc">

<p>The socket is supposed to be result of a <code>gen_tcp:connect</code> or a <code>gen_tcp:accept</code>. The socket must be in passive mode (that is, opened with the option <code class="code">{active,false})</code>. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-daemon_ref').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-daemon_ref').style.visibility = 'hidden';">  <code id="type-daemon_ref">daemon_ref()</code><br> </div> <div class="data-type-desc">

<p>Opaque data type representing a daemon.</p> <p>Returned by the functions <code><a href="ssh#daemon-1"><span class="code">daemon/1,2,3</span></a></code>.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-').style.visibility = 'hidden';"> <div><span onmouseover="document.getElementById('ghlink-type-connection_ref-id78922').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-connection_ref-id78922').style.visibility = 'hidden';" id="type-connection_ref">connection_ref()</span></div> </div> <div class="data-type-desc">

<p>Opaque data type representing a connection between a client and a server (daemon).</p> <p>Returned by the functions <code><a href="ssh#connect-3"><span class="code">connect/2,3,4</span></a></code> and <code><a href="ssh_sftp#start_channel-2"><span class="code">ssh_sftp:start_channel/2,3</span></a></code>. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-channel_id').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-channel_id').style.visibility = 'hidden';">  <code id="type-channel_id">channel_id()</code><br> </div> <div class="data-type-desc">

<p>Opaque data type representing a channel inside a connection.</p> <p>Returned by the functions <code><a href="ssh_connection#session_channel-2">ssh_connection:session_channel/2,4</a></code>. </p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-').style.visibility = 'hidden';"> <div><span onmouseover="document.getElementById('ghlink-type--id78987').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type--id78987').style.visibility = 'hidden';" id="type-">opaque_client_options</span></div> <div><span onmouseover="document.getElementById('ghlink-type--id78991').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type--id78991').style.visibility = 'hidden';" id="type-">opaque_daemon_options</span></div> <div><span onmouseover="document.getElementById('ghlink-type--id78995').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type--id78995').style.visibility = 'hidden';" id="type-">opaque_common_options</span></div> </div> <div class="data-type-desc">

<p>Opaque types that define experimental options that are not to be used in products.</p> </div> </div> <h2><span onmouseover="document.getElementById('ghlink-exports-id79028').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-id79028').style.visibility = 'hidden';" id="exports">Exports</span></h2> <div class="exports-body"> 
<div onmouseover="document.getElementById('ghlink-close-1-id110700').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-close-1-id110700').style.visibility = 'hidden';"> close(ConnectionRef) -&gt; ok | {error, term()}</div> <h2 class="func-types-title">Types</h2>   
<p>Closes an SSH connection.</p> 
<div><span onmouseover="document.getElementById('ghlink-connect-3-id79062').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connect-3-id79062').style.visibility = 'hidden';" id="connect-3">connect(Host, Port, Options) -&gt; Result </span></div>
<div><span onmouseover="document.getElementById('ghlink-connect-4-id79066').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connect-4-id79066').style.visibility = 'hidden';" id="connect-4">connect(Host, Port, Options, NegotiationTimeout) -&gt; Result </span></div>
<div><span onmouseover="document.getElementById('ghlink-connect-2-id79070').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connect-2-id79070').style.visibility = 'hidden';" id="connect-2">connect(TcpSocket, Options) -&gt; Result</span></div>
<div><span onmouseover="document.getElementById('ghlink-connect-3-id79074').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connect-3-id79074').style.visibility = 'hidden';" id="connect-3">connect(TcpSocket, Options, NegotiationTimeout) -&gt; Result</span></div>  <h2 class="func-types-title">Types</h2>        
<p>Connects to an SSH server at the <code class="code">Host</code> on <code class="code">Port</code>. </p> <p>As an alternative, an already open TCP socket could be passed to the function in <code class="code">TcpSocket</code>. The SSH initiation and negotiation will be initiated on that one with the SSH that should be at the other end. </p> <p>No channel is started. This is done by calling <code><a href="ssh_connection#session_channel-2">ssh_connection:session_channel/[2, 4]</a></code>. </p> <p>The <code class="code">NegotiationTimeout</code> is in milli-seconds. The default value is <code class="code">infinity</code>. For connection timeout, use the option <code><a href="#type-connect_timeout_client_option"><span class="code">connect_timeout</span></a></code>. </p>  
<div onmouseover="document.getElementById('ghlink-connection_info-2-id111101').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-connection_info-2-id111101').style.visibility = 'hidden';"> connection_info(ConnectionRef, Keys) -&gt; ConnectionInfo</div> <h2 class="func-types-title">Types</h2>       
<p>Retrieves information about a connection. The list <code class="code">Keys</code> defines which information that is returned.</p>  
<div><span onmouseover="document.getElementById('ghlink-daemon-1-id79227').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-daemon-1-id79227').style.visibility = 'hidden';" id="daemon-1">daemon(Port | TcpSocket) -&gt; Result</span></div>
<div><span onmouseover="document.getElementById('ghlink-daemon-2-id79231').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-daemon-2-id79231').style.visibility = 'hidden';" id="daemon-2">daemon(Port | TcpSocket, Options) -&gt; Result</span></div>
<div><span onmouseover="document.getElementById('ghlink-daemon-3-id79235').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-daemon-3-id79235').style.visibility = 'hidden';" id="daemon-3">daemon(HostAddress, Port, Options) -&gt; Result</span></div>  <h2 class="func-types-title">Types</h2>       
<p>Starts a server listening for SSH connections on the given port. If the <code class="code">Port</code> is 0, a random free port is selected. See <code><a href="#daemon_info-1">daemon_info/1</a></code> about how to find the selected port number. </p> <p>As an alternative, an already open TCP socket could be passed to the function in <code class="code">TcpSocket</code>. The SSH initiation and negotiation will be initiated on that one when an SSH starts at the other end of the TCP socket. </p> <p>For a description of the options, see <code><a href="#type-daemon_options">Daemon Options</a></code>. </p> <p>Please note that by historical reasons both the <code class="code">HostAddress</code> argument and the <code>gen_tcp connect_option()<span class="code">{ip,Address}</span></code> set the listening address. This is a source of possible inconsistent settings. </p> <p>The rules for handling the two address passing options are:</p> <ul> <li>if <code class="code">HostAddress</code> is an IP-address, that IP-address is the listening address. An 'ip'-option will be discarded if present.</li> <li>if <code class="code">HostAddress</code> is the atom <code class="code">loopback</code>, the listening address is <code class="code">loopback</code> and an loopback address will be choosen by the underlying layers. An 'ip'-option will be discarded if present.</li> <li>if <code class="code">HostAddress</code> is the atom <code class="code">any</code> and no 'ip'-option is present, the listening address is <code class="code">any</code> and the socket will listen to all addresses</li> <li>if <code class="code">HostAddress</code> is <code class="code">any</code> and an 'ip'-option is present, the listening address is set to the value of the 'ip'-option</li> </ul>  
<div onmouseover="document.getElementById('ghlink-daemon_info-1-id111630').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-daemon_info-1-id111630').style.visibility = 'hidden';"> daemon_info(Daemon) -&gt; {ok, DaemonInfo} | {error, term()}</div> <h2 class="func-types-title">Types</h2>    
<p>Returns a key-value list with information about the daemon.</p>  
<div onmouseover="document.getElementById('ghlink-default_algorithms-0-id111682').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-default_algorithms-0-id111682').style.visibility = 'hidden';"> default_algorithms() -&gt; <code><a href="#type-algs_list">algs_list()</a></code> </div> 
<p>Returns a key-value list, where the keys are the different types of algorithms and the values are the algorithms themselves.</p> <p>See the <code><a href="configure_algos#example_default_algorithms">User's Guide</a></code> for an example.</p>  
<div><span onmouseover="document.getElementById('ghlink-shell-1-id79477').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-shell-1-id79477').style.visibility = 'hidden';" id="shell-1">shell(Host | TcpSocket) -&gt; Result </span></div>
<div><span onmouseover="document.getElementById('ghlink-shell-2-id79480').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-shell-2-id79480').style.visibility = 'hidden';" id="shell-2">shell(Host | TcpSocket, Options) -&gt; Result </span></div>
<div><span onmouseover="document.getElementById('ghlink-shell-3-id79484').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-shell-3-id79484').style.visibility = 'hidden';" id="shell-3">shell(Host, Port, Options) -&gt; Result </span></div>  <h2 class="func-types-title">Types</h2>       
<p>Connects to an SSH server at <code class="code">Host</code> and <code class="code">Port</code> (defaults to 22) and starts an interactive shell on that remote host. </p> <p>As an alternative, an already open TCP socket could be passed to the function in <code class="code">TcpSocket</code>. The SSH initiation and negotiation will be initiated on that one and finaly a shell will be started on the host at the other end of the TCP socket. </p> <p>For a description of the options, see <code><a href="#type-client_options">Client Options</a></code>.</p> <p>The function waits for user input, and does not return until the remote shell is ended (that is, exit from the shell). </p>  
<div onmouseover="document.getElementById('ghlink-start-0-id112051').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-start-0-id112051').style.visibility = 'hidden';"> start() -&gt; ok | {error, term()}</div>
<div onmouseover="document.getElementById('ghlink-start-1-id112051').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-start-1-id112051').style.visibility = 'hidden';" id="start-1"> start(Type) -&gt; ok | {error, term()}</div> <h2 class="func-types-title">Types</h2>   
<p>Utility function that starts the applications <code class="code">crypto</code>, <code class="code">public_key</code>, and <code class="code">ssh</code>. Default type is <code class="code">temporary</code>. For more information, see the <code>application(3)</code> manual page in Kernel.</p>  
<div onmouseover="document.getElementById('ghlink-stop-0-id112175').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop-0-id112175').style.visibility = 'hidden';"> stop() -&gt; ok | {error, term()}</div> 
<p>Stops the <code class="code">ssh</code> application. For more information, see the <code>application(3)</code> manual page in Kernel.</p>  
<div onmouseover="document.getElementById('ghlink-stop_daemon-1-id112232').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop_daemon-1-id112232').style.visibility = 'hidden';"> stop_daemon(DaemonRef :: <code><a href="#type-daemon_ref">daemon_ref()</a></code>) -&gt; ok</div>
<div onmouseover="document.getElementById('ghlink-stop_daemon-2-id112322').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop_daemon-2-id112322').style.visibility = 'hidden';" id="stop_daemon-2"> stop_daemon(Address :: <code>inet:ip_address()</code>,<br> Port :: <code>inet:port_number()</code>) -&gt;<br> ok</div>
<div onmouseover="document.getElementById('ghlink-stop_daemon-3-id112292').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop_daemon-3-id112292').style.visibility = 'hidden';" id="stop_daemon-3"> stop_daemon(Address :: any | <code>inet:ip_address()</code>,<br> Port :: <code>inet:port_number()</code>,<br> Profile :: atom()) -&gt;<br> ok</div> 
<p>Stops the listener and all connections started by the listener.</p>  
<div onmouseover="document.getElementById('ghlink-stop_listener-1-id112371').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop_listener-1-id112371').style.visibility = 'hidden';"> stop_listener(SysSup :: <code><a href="#type-daemon_ref">daemon_ref()</a></code>) -&gt; ok</div>
<div onmouseover="document.getElementById('ghlink-stop_listener-2-id112292').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop_listener-2-id112292').style.visibility = 'hidden';" id="stop_listener-2"> stop_listener(Address :: <code>inet:ip_address()</code>,<br> Port :: <code>inet:port_number()</code>) -&gt;<br> ok</div>
<div onmouseover="document.getElementById('ghlink-stop_listener-3-id112486').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-stop_listener-3-id112486').style.visibility = 'hidden';" id="stop_listener-3"> stop_listener(Address :: any | <code>inet:ip_address()</code>,<br> Port :: <code>inet:port_number()</code>,<br> Profile :: term()) -&gt;<br> ok</div> 
<p>Stops the listener, but leaves existing connections started by the listener operational.</p>  </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2017 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
