
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Ets - Erlang 21 - W3cubDocs</title>
  
  <meta name="description" content=" ets ">
  <meta name="keywords" content="ets, erlang, erlang~21">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/erlang~21/lib/stdlib-3.5/doc/html/ets.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/erlang~21.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/erlang~21/" class="_nav-link" title="" style="margin-left:0;">Erlang 21</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _erlang">
				
				
<h1>ets</h1> <h2><span onmouseover="document.getElementById('ghlink-module-id210104').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-id210104').style.visibility = 'hidden';" id="module">Module</span></h2> <p class="REFBODY module-body">ets</p> <h2><span onmouseover="document.getElementById('ghlink-module-summary-id210108').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-module-summary-id210108').style.visibility = 'hidden';" id="module-summary">Module Summary</span></h2> <p class="REFBODY module-summary-body">Built-in term storage.</p> <h2><span onmouseover="document.getElementById('ghlink-description-id210111').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-description-id210111').style.visibility = 'hidden';" id="description">Description</span></h2> 
<p>This module is an interface to the Erlang built-in term storage BIFs. These provide the ability to store very large quantities of data in an Erlang runtime system, and to have constant access time to the data. (In the case of <code class="code">ordered_set</code>, see below, access time is proportional to the logarithm of the number of stored objects.)</p> <p>Data is organized as a set of dynamic tables, which can store tuples. Each table is created by a process. When the process terminates, the table is automatically destroyed. Every table has access rights set at creation.</p> <p>Tables are divided into four different types, <code class="code">set</code>, <code class="code">ordered_set</code>, <code class="code">bag</code>, and <code class="code">duplicate_bag</code>. A <code class="code">set</code> or <code class="code">ordered_set</code> table can only have one object associated with each key. A <code class="code">bag</code> or <code class="code">duplicate_bag</code> table can have many objects associated with each key.</p>  <div class="note" id="max_ets_tables"> <div class="label">Note</div> <div class="content">

<p> The number of tables stored at one Erlang node <strong>used</strong> to be limited. This is no longer the case (except by memory usage). The previous default limit was about 1400 tables and could be increased by setting the environment variable <code class="code">ERL_MAX_ETS_TABLES</code> or the command line option <code><span class="code">+e</span></code> before starting the Erlang runtime system. This hard limit has been removed, but it is currently useful to set the <code class="code">ERL_MAX_ETS_TABLES</code> anyway. It should be set to an approximate of the maximum amount of tables used. This since an internal table for named tables is sized using this value. If large amounts of named tables are used and <code class="code">ERL_MAX_ETS_TABLES</code> hasn't been increased, the performance of named table lookup will degrade. </p> </div> </div> <p>Notice that there is no automatic garbage collection for tables. Even if there are no references to a table from any process, it is not automatically destroyed unless the owner process terminates. To destroy a table explicitly, use function <code><a href="#delete-1"><span class="code">delete/1</span></a></code>. The default owner is the process that created the table. To transfer table ownership at process termination, use option <code><a href="#heir"><span class="code">heir</span></a></code> or call <code><a href="#give_away-3"><span class="code">give_away/3</span></a></code>.</p> <p>Some implementation details:</p> <ul> <li><p>In the current implementation, every object insert and look-up operation results in a copy of the object.</p></li> <li><p><code class="code">'$end_of_table'</code> is not to be used as a key, as this atom is used to mark the end of the table when using functions <code><a href="#first-1"><span class="code">first/1</span></a></code> and <code><a href="#next-2"><span class="code">next/2</span></a></code>.</p></li> </ul> <p>Notice the subtle difference between <strong>matching</strong> and <strong>comparing equal</strong>, which is demonstrated by table types <code class="code">set</code> and <code class="code">ordered_set</code>:</p> <ul> <li> <p>Two Erlang terms <code class="code">match</code> if they are of the same type and have the same value, so that <code class="code">1</code> matches <code class="code">1</code>, but not <code class="code">1.0</code> (as <code class="code">1.0</code> is a <code class="code">float()</code> and not an <code class="code">integer()</code>).</p> </li> <li> <p>Two Erlang terms <strong>compare equal</strong> if they either are of the same type and value, or if both are numeric types and extend to the same value, so that <code class="code">1</code> compares equal to both <code class="code">1</code> and <code class="code">1.0</code>.</p> </li> <li> <p>The <code class="code">ordered_set</code> works on the <strong>Erlang term order</strong> and no defined order exists between an <code class="code">integer()</code> and a <code class="code">float()</code> that extends to the same value. Hence the key <code class="code">1</code> and the key <code class="code">1.0</code> are regarded as equal in an <code class="code">ordered_set</code> table.</p> </li> </ul>  <h2><span onmouseover="document.getElementById('ghlink-failure-id210390').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-failure-id210390').style.visibility = 'hidden';" id="failure">Failure</span></h2>  <p>The functions in this module exits with reason <code class="code">badarg</code> if any argument has the wrong format, if the table identifier is invalid, or if the operation is denied because of table access rights (<code><a href="#protected">protected</a></code> or <code><a href="#private">private</a></code>).</p>  <h2> <span onmouseover="document.getElementById('ghlink-concurrency-id210421').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-concurrency-id210421').style.visibility = 'hidden';" id="concurrency">Concurrency</span> </h2>  <p>This module provides some limited support for concurrent access. All updates to single objects are guaranteed to be both <strong>atomic</strong> and <strong>isolated</strong>. This means that an updating operation to a single object either succeeds or fails completely without any effect (atomicity) and that no intermediate results of the update can be seen by other processes (isolation). Some functions that update many objects state that they even guarantee atomicity and isolation for the entire operation. In database terms the isolation level can be seen as "serializable", as if all isolated operations are carried out serially, one after the other in a strict order.</p> <p>No other support is available within this module that would guarantee consistency between objects. However, function <code><a href="#safe_fixtable-2"><span class="code">safe_fixtable/2</span></a></code> can be used to guarantee that a sequence of <code><a href="#first-1"><span class="code">first/1</span></a></code> and <code><a href="#next-2"><span class="code">next/2</span></a></code> calls traverse the table without errors and that each existing object in the table is visited exactly once, even if another (or the same) process simultaneously deletes or inserts objects into the table. Nothing else is guaranteed; in particular objects that are inserted or deleted during such a traversal can be visited once or not at all. Functions that internally traverse over a table, like <code><a href="#select-1"><span class="code">select</span></a></code> and <code><a href="#match-1"><span class="code">match</span></a></code>, give the same guarantee as <code><a href="#safe_fixtable-2"><span class="code">safe_fixtable</span></a></code>.</p>  <h2> <span onmouseover="document.getElementById('ghlink-match-specifications-id210502').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match-specifications-id210502').style.visibility = 'hidden';" id="match_spec">Match Specifications</span> </h2>  <p>Some of the functions use a <strong>match specification</strong>, <code class="code">match_spec</code>. For a brief explanation, see <code><a href="#select-2"><span class="code">select/2</span></a></code>. For a detailed description, see section <code>Match Specifications in Erlang</code> in ERTS User's Guide.</p>  <h2><span onmouseover="document.getElementById('ghlink-data-types-id210542').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-data-types-id210542').style.visibility = 'hidden';" id="data-types">Data Types</span></h2> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-access').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-access').style.visibility = 'hidden';">  <code id="type-access">access() = public | protected | private</code><br> </div>  </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-').style.visibility = 'hidden';"> <div><span onmouseover="document.getElementById('ghlink-type-continuation-id210560').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-continuation-id210560').style.visibility = 'hidden';" id="type-continuation">continuation()</span></div> </div> <div class="data-type-desc">

<p>Opaque continuation used by <code><a href="#select-1"><span class="code">select/1,3</span></a></code>, <code><a href="#select_reverse-1"><span class="code">select_reverse/1,3</span></a></code>, <code><a href="#match-1"><span class="code">match/1,3</span></a></code>, and <code><a href="#match_object-1"><span class="code">match_object/1,3</span></a></code>.</p> </div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-match_spec').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-match_spec').style.visibility = 'hidden';">  <code>match_spec() = [{<span id="type-match_spec"><a href="#type-match_pattern">match_pattern()</a></span>, [term()], [term()]}]</code><br> </div> <div class="data-type-desc">

<p>A match specification, see above.</p>
</div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-comp_match_spec').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-comp_match_spec').style.visibility = 'hidden';">  <code id="type-comp_match_spec">comp_match_spec()</code><br> </div> <div class="data-type-desc">

<p>A compiled match specification.</p>
</div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-match_pattern').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-match_pattern').style.visibility = 'hidden';">  <code id="type-match_pattern">match_pattern() = atom() | tuple()</code><br> </div>  </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-tab').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-tab').style.visibility = 'hidden';">  <code>tab() = atom() | <span id="type-tab"><a href="#type-tid">tid()</a></span></code><br> </div>  </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-tid').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-tid').style.visibility = 'hidden';">  <code id="type-tid">tid()</code><br> </div> <div class="data-type-desc">

<p>A table identifier, as returned by <code><a href="#new-2"><span class="code">new/2</span></a></code>.</p>
</div> </div> <div class="data-types-body"> <div class="data-type-name" onmouseover="document.getElementById('ghlink-type-type').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-type-type').style.visibility = 'hidden';">  <code id="type-type">type() = set | ordered_set | bag | duplicate_bag</code><br> </div>  </div> <h2><span onmouseover="document.getElementById('ghlink-exports-id210694').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-exports-id210694').style.visibility = 'hidden';" id="exports">Exports</span></h2> <div class="exports-body"> 
<div onmouseover="document.getElementById('ghlink-all-0-id350735').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-all-0-id350735').style.visibility = 'hidden';"> all() -&gt; [Tab]</div> <h2 class="func-types-title">Types</h2>   
<p>Returns a list of all tables at the node. Named tables are specified by their names, unnamed tables are specified by their table identifiers.</p> <p>There is no guarantee of consistency in the returned list. Tables created or deleted by other processes "during" the <code class="code">ets:all()</code> call either are or are not included in the list. Only tables created/deleted <strong>before</strong> <code class="code">ets:all()</code> is called are guaranteed to be included/excluded.</p>  
<div onmouseover="document.getElementById('ghlink-delete-1-id350803').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-delete-1-id350803').style.visibility = 'hidden';"> delete(Tab) -&gt; true</div> <h2 class="func-types-title">Types</h2>   
<p>Deletes the entire table <code class="code">Tab</code>.</p>  
<div onmouseover="document.getElementById('ghlink-delete-2-id350838').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-delete-2-id350838').style.visibility = 'hidden';"> delete(Tab, Key) -&gt; true</div> <h2 class="func-types-title">Types</h2>    
<p>Deletes all objects with key <code class="code">Key</code> from table <code class="code">Tab</code>.</p>  
<div onmouseover="document.getElementById('ghlink-delete_all_objects-1-id350949').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-delete_all_objects-1-id350949').style.visibility = 'hidden';"> delete_all_objects(Tab) -&gt; true</div> <h2 class="func-types-title">Types</h2>   
<p>Delete all objects in the ETS table <code class="code">Tab</code>. The operation is guaranteed to be <code><a href="#concurrency">atomic and isolated</a></code>.</p>  
<div onmouseover="document.getElementById('ghlink-delete_object-2-id351053').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-delete_object-2-id351053').style.visibility = 'hidden';"> delete_object(Tab, Object) -&gt; true</div> <h2 class="func-types-title">Types</h2>    
<p>Delete the exact object <code class="code">Object</code> from the ETS table, leaving objects with the same key but other differences (useful for type <code class="code">bag</code>). In a <code class="code">duplicate_bag</code> table, all instances of the object are deleted.</p>  
<div onmouseover="document.getElementById('ghlink-file2tab-1-id351145').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-file2tab-1-id351145').style.visibility = 'hidden';"> file2tab(Filename) -&gt; {ok, Tab} | {error, Reason}</div> <h2 class="func-types-title">Types</h2>     
<p>Reads a file produced by <code><a href="#tab2file-2"><span class="code">tab2file/2</span></a></code> or <code><a href="#tab2file-3"><span class="code">tab2file/3</span></a></code> and creates the corresponding table <code class="code">Tab</code>.</p> <p>Equivalent to <code class="code">file2tab(Filename, [])</code>.</p>  
<div onmouseover="document.getElementById('ghlink-file2tab-2-id351207').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-file2tab-2-id351207').style.visibility = 'hidden';"> file2tab(Filename, Options) -&gt; {ok, Tab} | {error, Reason}</div> <h2 class="func-types-title">Types</h2>       
<p>Reads a file produced by <code><a href="#tab2file-2"><span class="code">tab2file/2</span></a></code> or <code><a href="#tab2file-3"><span class="code">tab2file/3</span></a></code> and creates the corresponding table <code class="code">Tab</code>.</p> <p>The only supported option is <code class="code">{verify,boolean()}</code>. If verification is turned on (by specifying <code class="code">{verify,true}</code>), the function uses whatever information is present in the file to assert that the information is not damaged. How this is done depends on which <code class="code">extended_info</code> was written using <code><a href="#tab2file-3"><span class="code">tab2file/3</span></a></code>.</p> <p>If no <code class="code">extended_info</code> is present in the file and <code class="code">{verify,true}</code> is specified, the number of objects written is compared to the size of the original table when the dump was started. This can make verification fail if the table was <code class="code">public</code> and objects were added or removed while the table was dumped to file. To avoid this problem, either do not verify files dumped while updated simultaneously or use option <code class="code">{extended_info, [object_count]}</code> to <code><a href="#tab2file-3"><span class="code">tab2file/3</span></a></code>, which extends the information in the file with the number of objects written.</p> <p>If verification is turned on and the file was written with option <code class="code">{extended_info, [md5sum]}</code>, reading the file is slower and consumes radically more CPU time than otherwise.</p> <p><code class="code">{verify,false}</code> is the default.</p>  
<div onmouseover="document.getElementById('ghlink-first-1-id351555').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-first-1-id351555').style.visibility = 'hidden';"> first(Tab) -&gt; Key | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>    
<p>Returns the first key <code class="code">Key</code> in table <code class="code">Tab</code>. For an <code class="code">ordered_set</code> table, the first key in Erlang term order is returned. For other table types, the first key according to the internal order of the table is returned. If the table is empty, <code class="code">'$end_of_table'</code> is returned.</p> <p>To find subsequent keys in the table, use <code><a href="#next-2"><span class="code">next/2</span></a></code>.</p>  
<div onmouseover="document.getElementById('ghlink-foldl-3-id351670').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-foldl-3-id351670').style.visibility = 'hidden';"> foldl(Function, Acc0, Tab) -&gt; Acc1</div> <h2 class="func-types-title">Types</h2>        
<p><code class="code">Acc0</code> is returned if the table is empty. This function is similar to <code><a href="lists#foldl-3"><span class="code">lists:foldl/3</span></a></code>. The table elements are traversed in an unspecified order, except for <code class="code">ordered_set</code> tables, where they are traversed first to last.</p> <p>If <code class="code">Function</code> inserts objects into the table, or another process inserts objects into the table, those objects <strong>can</strong> (depending on key ordering) be included in the traversal.</p>  
<div onmouseover="document.getElementById('ghlink-foldr-3-id351670').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-foldr-3-id351670').style.visibility = 'hidden';"> foldr(Function, Acc0, Tab) -&gt; Acc1</div> <h2 class="func-types-title">Types</h2>        
<p><code class="code">Acc0</code> is returned if the table is empty. This function is similar to <code><a href="lists#foldr-3"><span class="code">lists:foldr/3</span></a></code>. The table elements are traversed in an unspecified order, except for <code class="code">ordered_set</code> tables, where they are traversed last to first.</p> <p>If <code class="code">Function</code> inserts objects into the table, or another process inserts objects into the table, those objects <strong>can</strong> (depending on key ordering) be included in the traversal.</p>  
<div onmouseover="document.getElementById('ghlink-from_dets-2-id351858').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-from_dets-2-id351858').style.visibility = 'hidden';"> from_dets(Tab, DetsTab) -&gt; true</div> <h2 class="func-types-title">Types</h2>    
<p>Fills an already created ETS table with the objects in the already opened Dets table <code class="code">DetsTab</code>. Existing objects in the ETS table are kept unless overwritten.</p> <p>If any of the tables does not exist or the Dets table is not open, a <code class="code">badarg</code> exception is raised.</p>  
<div onmouseover="document.getElementById('ghlink-fun2ms-1-id352048').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-fun2ms-1-id352048').style.visibility = 'hidden';"> fun2ms(LiteralFun) -&gt; MatchSpec</div> <h2 class="func-types-title">Types</h2>    
<p>Pseudo function that by a <code class="code">parse_transform</code> translates <code class="code">LiteralFun</code> typed as parameter in the function call to a <code><a href="#match_spec">match specification</a></code>. With "literal" is meant that the fun must textually be written as the parameter of the function, it cannot be held in a variable that in turn is passed to the function.</p> <p>The parse transform is provided in the <code class="code">ms_transform</code> module and the source <strong>must</strong> include file <code class="code">ms_transform.hrl</code> in STDLIB for this pseudo function to work. Failing to include the hrl file in the source results in a runtime error, not a compile time error. The include file is easiest included by adding line <code class="code">-include_lib("stdlib/include/ms_transform.hrl").</code> to the source file.</p> <p>The fun is very restricted, it can take only a single parameter (the object to match): a sole variable or a tuple. It must use the <code class="code">is_</code> guard tests. Language constructs that have no representation in a match specification (<code class="code">if</code>, <code class="code">case</code>, <code class="code">receive</code>, and so on) are not allowed.</p> <p>The return value is the resulting match specification.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">
1&gt; ets:fun2ms(fun({M,N}) when N &gt; 3 -&gt; M end).
[{{'$1','$2'},[{'&gt;','$2',3}],['$1']}]</pre> <p>Variables from the environment can be imported, so that the following works:</p> <pre data-language="erlang">
2&gt; X=3.
3
3&gt; ets:fun2ms(fun({M,N}) when N &gt; X -&gt; M end).
[{{'$1','$2'},[{'&gt;','$2',{const,3}}],['$1']}]</pre> <p>The imported variables are replaced by match specification <code class="code">const</code> expressions, which is consistent with the static scoping for Erlang funs. However, local or global function calls cannot be in the guard or body of the fun. Calls to built-in match specification functions is of course allowed:</p> <pre data-language="erlang">
4&gt; ets:fun2ms(fun({M,N}) when N &gt; X, my_fun(M) -&gt; M end).
Error: fun containing local Erlang function calls
('my_fun' called in guard) cannot be translated into match_spec
{error,transform_error}
5&gt; ets:fun2ms(fun({M,N}) when N &gt; X, is_atom(M) -&gt; M end).
[{{'$1','$2'},[{'&gt;','$2',{const,3}},{is_atom,'$1'}],['$1']}]</pre> <p>As shown by the example, the function can be called from the shell also. The fun must be literally in the call when used from the shell as well.</p> <div class="warning"> <div class="label">Warning</div> <div class="content">

<p>If the <code class="code">parse_transform</code> is not applied to a module that calls this pseudo function, the call fails in runtime (with a <code class="code">badarg</code>). The <code class="code">ets</code> module exports a function with this name, but it is never to be called except when using the function in the shell. If the <code class="code">parse_transform</code> is properly applied by including header file <code class="code">ms_transform.hrl</code>, compiled code never calls the function, but the function call is replaced by a literal match specification.</p> </div> </div> <p>For more information, see <code><a href="ms_transform#top"><span class="code">ms_transform(3)</span></a></code>.</p>  
<div onmouseover="document.getElementById('ghlink-give_away-3-id352358').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-give_away-3-id352358').style.visibility = 'hidden';"> give_away(Tab, Pid, GiftData) -&gt; true</div> <h2 class="func-types-title">Types</h2>     
<p>Make process <code class="code">Pid</code> the new owner of table <code class="code">Tab</code>. If successful, message <code class="code">{'ETS-TRANSFER',Tab,FromPid,GiftData}</code> is sent to the new owner.</p> <p>The process <code class="code">Pid</code> must be alive, local, and not already the owner of the table. The calling process must be the table owner.</p> <p>Notice that this function does not affect option <code><a href="#heir"><span class="code">heir</span></a></code> of the table. A table owner can, for example, set <code class="code">heir</code> to itself, give the table away, and then get it back if the receiver terminates.</p>  
<div onmouseover="document.getElementById('ghlink-i-0-id352493').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-i-0-id352493').style.visibility = 'hidden';"> i() -&gt; ok</div> 
<p>Displays information about all ETS tables on a terminal.</p>  
<div onmouseover="document.getElementById('ghlink-i-1-id352531').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-i-1-id352531').style.visibility = 'hidden';"> i(Tab) -&gt; ok</div> <h2 class="func-types-title">Types</h2>   
<p>Browses table <code class="code">Tab</code> on a terminal.</p>  
<div onmouseover="document.getElementById('ghlink-info-1-id352543').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-info-1-id352543').style.visibility = 'hidden';"> info(Tab) -&gt; InfoList | undefined</div> <h2 class="func-types-title">Types</h2>     
<p>Returns information about table <code class="code">Tab</code> as a list of tuples. If <code class="code">Tab</code> has the correct type for a table identifier, but does not refer to an existing ETS table, <code class="code">undefined</code> is returned. If <code class="code">Tab</code> is not of the correct type, a <code class="code">badarg</code> exception is raised.</p> <dl> <dt><strong><code class="code">{compressed, boolean()}</code></strong></dt> <dd> <p>Indicates if the table is compressed.</p> </dd> <dt><strong><code class="code">{heir, pid() | none}</code></strong></dt> <dd> <p>The pid of the heir of the table, or <code class="code">none</code> if no heir is set.</p> </dd> <dt><strong><code class="code">{id,</code><code><a href="#type-tid"><span class="code">tid()</span></a></code><code class="code">}</code></strong></dt> <dd> <p>The table identifier.</p> </dd> <dt><strong><code class="code">{keypos, integer() &gt;= 1}</code></strong></dt> <dd> <p>The key position.</p> </dd> <dt><strong><code class="code">{memory, integer() &gt;= 0</code></strong></dt> <dd> <p>The number of words allocated to the table.</p> </dd> <dt><strong><code class="code">{name, atom()}</code></strong></dt> <dd> <p>The table name.</p> </dd> <dt><strong><code class="code">{named_table, boolean()}</code></strong></dt> <dd> <p>Indicates if the table is named.</p> </dd> <dt><strong><code class="code">{node, node()}</code></strong></dt> <dd> <p>The node where the table is stored. This field is no longer meaningful, as tables cannot be accessed from other nodes.</p> </dd> <dt><strong><code class="code">{owner, pid()}</code></strong></dt> <dd> <p>The pid of the owner of the table.</p> </dd> <dt><strong><code class="code">{protection,</code> <code><a href="#type-access"><span class="code">access()</span></a></code><code class="code">}</code></strong></dt> <dd> <p>The table access rights.</p> </dd> <dt><strong><code class="code">{size, integer() &gt;= 0</code></strong></dt> <dd> <p>The number of objects inserted in the table.</p> </dd> <dt><strong><code class="code">{type,</code> <code><a href="#type-type"><span class="code">type()</span></a></code><code class="code">}</code></strong></dt> <dd> <p>The table type.</p> </dd> <dt><strong><code class="code">{read_concurrency, boolean()}</code></strong></dt> <dd> <p>Indicates whether the table uses <code class="code">read_concurrency</code> or not.</p> </dd> <dt><strong><code class="code">{write_concurrency, boolean()}</code></strong></dt> <dd> <p>Indicates whether the table uses <code class="code">write_concurrency</code>.</p> </dd> </dl>  
<div onmouseover="document.getElementById('ghlink-info-2-id353103').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-info-2-id353103').style.visibility = 'hidden';"> info(Tab, Item) -&gt; Value | undefined</div> <h2 class="func-types-title">Types</h2>     
<p>Returns the information associated with <code class="code">Item</code> for table <code class="code">Tab</code>, or returns <code class="code">undefined</code> if <code class="code">Tab</code> does not refer an existing ETS table. If <code class="code">Tab</code> is not of the correct type, or if <code class="code">Item</code> is not one of the allowed values, a <code class="code">badarg</code> exception is raised.</p> <p>In addition to the <code class="code">{Item,Value}</code> pairs defined for <code><a href="#info-1"><span class="code">info/1</span></a></code>, the following items are allowed:</p> <ul> <li> <p><code class="code">Item=fixed, Value=boolean()</code></p> <p>Indicates if the table is fixed by any process.</p> </li> <li>  <p><code class="code">Item=safe_fixed|safe_fixed_monotonic_time, Value={FixationTime,Info}|false</code></p> <p>If the table has been fixed using <code><a href="#safe_fixtable-2"><span class="code">safe_fixtable/2</span></a></code>, the call returns a tuple where <code class="code">FixationTime</code> is the time when the table was first fixed by a process, which either is or is not one of the processes it is fixed by now.</p> <p>The format and value of <code class="code">FixationTime</code> depends on <code class="code">Item</code>:</p> <dl> <dt><strong><code class="code">safe_fixed</code></strong></dt> <dd> <p><code class="code">FixationTime</code> corresponds to the result returned by <code><span class="code">erlang:timestamp/0</span></code> at the time of fixation. Notice that when the system uses single or multi <code>time warp modes</code> this can produce strange results, as the use of <code class="code">safe_fixed</code> is not <code>time warp safe</code>. Time warp safe code must use <code class="code">safe_fixed_monotonic_time</code> instead.</p> </dd> <dt><strong><code class="code">safe_fixed_monotonic_time</code></strong></dt> <dd> <p><code class="code">FixationTime</code> corresponds to the result returned by <code><span class="code">erlang:monotonic_time/0</span></code> at the time of fixation. The use of <code class="code">safe_fixed_monotonic_time</code> is <code>time warp safe</code>.</p> </dd> </dl> <p><code class="code">Info</code> is a possibly empty lists of tuples <code class="code">{Pid,RefCount}</code>, one tuple for every process the table is fixed by now. <code class="code">RefCount</code> is the value of the reference counter and it keeps track of how many times the table has been fixed by the process.</p> <p>If the table never has been fixed, the call returns <code class="code">false</code>.</p> </li> <li> <p><code class="code">Item=stats, Value=tuple()</code></p> <p>Returns internal statistics about <code class="code">set</code>, <code class="code">bag</code>, and <code class="code">duplicate_bag</code> tables on an internal format used by OTP test suites. Not for production use.</p> </li> </ul>  
<div onmouseover="document.getElementById('ghlink-init_table-2-id353590').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-init_table-2-id353590').style.visibility = 'hidden';"> init_table(Tab, InitFun) -&gt; true</div> <h2 class="func-types-title">Types</h2>      
<p>Replaces the existing objects of table <code class="code">Tab</code> with objects created by calling the input function <code class="code">InitFun</code>, see below. This function is provided for compatibility with the <code class="code">dets</code> module, it is not more efficient than filling a table by using <code><a href="#insert-2"><span class="code">insert/2</span></a></code>.</p> <p>When called with argument <code class="code">read</code>, the function <code class="code">InitFun</code> is assumed to return <code class="code">end_of_input</code> when there is no more input, or <code class="code">{Objects, Fun}</code>, where <code class="code">Objects</code> is a list of objects and <code class="code">Fun</code> is a new input function. Any other value <code class="code">Value</code> is returned as an error <code class="code">{error, {init_fun, Value}}</code>. Each input function is called exactly once, and if an error occur, the last function is called with argument <code class="code">close</code>, the reply of which is ignored.</p> <p>If the table type is <code class="code">set</code> and more than one object exists with a given key, one of the objects is chosen. This is not necessarily the last object with the given key in the sequence of objects returned by the input functions. This holds also for duplicated objects stored in tables of type <code class="code">bag</code>.</p>  
<div onmouseover="document.getElementById('ghlink-insert-2-id353788').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-insert-2-id353788').style.visibility = 'hidden';"> insert(Tab, ObjectOrObjects) -&gt; true</div> <h2 class="func-types-title">Types</h2>    
<p>Inserts the object or all of the objects in list <code class="code">ObjectOrObjects</code> into table <code class="code">Tab</code>.</p> <ul> <li> <p>If the table type is <code class="code">set</code> and the key of the inserted objects <strong>matches</strong> the key of any object in the table, the old object is replaced.</p> </li> <li> <p>If the table type is <code class="code">ordered_set</code> and the key of the inserted object <strong>compares equal</strong> to the key of any object in the table, the old object is replaced.</p> </li> <li> <p>If the list contains more than one object with <strong>matching</strong> keys and the table type is <code class="code">set</code>, one is inserted, which one is not defined. The same holds for table type <code class="code">ordered_set</code> if the keys <strong>compare equal</strong>.</p> </li> </ul> <p>The entire operation is guaranteed to be <code><a href="#concurrency">atomic and isolated</a></code>, even when a list of objects is inserted.</p>  
<div onmouseover="document.getElementById('ghlink-insert_new-2-id353951').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-insert_new-2-id353951').style.visibility = 'hidden';"> insert_new(Tab, ObjectOrObjects) -&gt; boolean()</div> <h2 class="func-types-title">Types</h2>    
<p>Same as <code><a href="#insert-2"><span class="code">insert/2</span></a></code> except that instead of overwriting objects with the same key (for <code class="code">set</code> or <code class="code">ordered_set</code>) or adding more objects with keys already existing in the table (for <code class="code">bag</code> and <code class="code">duplicate_bag</code>), <code class="code">false</code> is returned.</p> <p>If <code class="code">ObjectOrObjects</code> is a list, the function checks <strong>every</strong> key before inserting anything. Nothing is inserted unless <strong>all</strong> keys present in the list are absent from the table. Like <code class="code">insert/2</code>, the entire operation is guaranteed to be <code><a href="#concurrency">atomic and isolated</a></code>.</p>  
<div onmouseover="document.getElementById('ghlink-is_compiled_ms-1-id354100').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-is_compiled_ms-1-id354100').style.visibility = 'hidden';"> is_compiled_ms(Term) -&gt; boolean()</div> <h2 class="func-types-title">Types</h2>   
<p>Checks if a term is a valid compiled <code><a href="#match_spec">match specification</a></code>. The compiled match specification is an opaque datatype that <strong>cannot</strong> be sent between Erlang nodes or be stored on disk. Any attempt to create an external representation of a compiled match specification results in an empty binary (<code class="code">&lt;&lt;&gt;&gt;</code>).</p> <p><strong>Examples:</strong></p> <p>The following expression yields <code class="code">true</code>::</p> <pre data-language="erlang">ets:is_compiled_ms(ets:match_spec_compile([{'_',[],[true]}])).</pre> <p>The following expressions yield <code class="code">false</code>, as variable <code class="code">Broken</code> contains a compiled match specification that has passed through external representation:</p> <pre data-language="erlang">MS = ets:match_spec_compile([{'_',[],[true]}]),
Broken = binary_to_term(term_to_binary(MS)),
ets:is_compiled_ms(Broken).</pre> <div class="note"> <div class="label">Note</div> <div class="content">

<p>The reason for not having an external representation of compiled match specifications is performance. It can be subject to change in future releases, while this interface remains for backward compatibility.</p> </div> </div>  
<div onmouseover="document.getElementById('ghlink-last-1-id354246').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-last-1-id354246').style.visibility = 'hidden';"> last(Tab) -&gt; Key | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>    
<p>Returns the last key <code class="code">Key</code> according to Erlang term order in table <code class="code">Tab</code> of type <code class="code">ordered_set</code>. For other table types, the function is synonymous to <code><a href="#first-1"><span class="code">first/1</span></a></code>. If the table is empty, <code class="code">'$end_of_table'</code> is returned.</p> <p>To find preceding keys in the table, use <code><a href="#prev-2"><span class="code">prev/2</span></a></code>.</p>  
<div onmouseover="document.getElementById('ghlink-lookup-2-id354378').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-lookup-2-id354378').style.visibility = 'hidden';"> lookup(Tab, Key) -&gt; [Object]</div> <h2 class="func-types-title">Types</h2>     
<p>Returns a list of all objects with key <code class="code">Key</code> in table <code class="code">Tab</code>.</p> <ul> <li> <p>For tables of type <code class="code">set</code>, <code class="code">bag</code>, or <code class="code">duplicate_bag</code>, an object is returned only if the specified key <strong>matches</strong> the key of the object in the table.</p> </li> <li> <p>For tables of type <code class="code">ordered_set</code>, an object is returned if the specified key <strong>compares equal</strong> to the key of an object in the table.</p> </li> </ul> <p>The difference is the same as between <code class="code">=:=</code> and <code class="code">==</code>.</p> <p>As an example, one can insert an object with <code class="code">integer()</code> <code class="code">1</code> as a key in an <code class="code">ordered_set</code> and get the object returned as a result of doing a <code class="code">lookup/2</code> with <code class="code">float()</code> <code class="code">1.0</code> as the key to search for.</p> <p>For tables of type <code class="code">set</code> or <code class="code">ordered_set</code>, the function returns either the empty list or a list with one element, as there cannot be more than one object with the same key. For tables of type <code class="code">bag</code> or <code class="code">duplicate_bag</code>, the function returns a list of arbitrary length.</p> <p>Notice that the time order of object insertions is preserved; the first object inserted with the specified key is the first in the resulting list, and so on.</p> <p>Insert and lookup times in tables of type <code class="code">set</code>, <code class="code">bag</code>, and <code class="code">duplicate_bag</code> are constant, regardless of the table size. For the <code class="code">ordered_set</code> datatype, time is proportional to the (binary) logarithm of the number of objects.</p>  
<div onmouseover="document.getElementById('ghlink-lookup_element-3-id354643').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-lookup_element-3-id354643').style.visibility = 'hidden';"> lookup_element(Tab, Key, Pos) -&gt; Elem</div> <h2 class="func-types-title">Types</h2>      
<p>For a table <code class="code">Tab</code> of type <code class="code">set</code> or <code class="code">ordered_set</code>, the function returns the <code class="code">Pos</code>:th element of the object with key <code class="code">Key</code>.</p> <p>For tables of type <code class="code">bag</code> or <code class="code">duplicate_bag</code>, the functions returns a list with the <code class="code">Pos</code>:th element of every object with key <code class="code">Key</code>.</p> <p>If no object with key <code class="code">Key</code> exists, the function exits with reason <code class="code">badarg</code>.</p> <p>The difference between <code class="code">set</code>, <code class="code">bag</code>, and <code class="code">duplicate_bag</code> on one hand, and <code class="code">ordered_set</code> on the other, regarding the fact that <code class="code">ordered_set</code> view keys as equal when they <strong>compare equal</strong> whereas the other table types regard them equal only when they <strong>match</strong>, holds for <code class="code">lookup_element/3</code>.</p>  
<div onmouseover="document.getElementById('ghlink-match-1-id354860').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match-1-id354860').style.visibility = 'hidden';"> match(Continuation) -&gt; {[Match], Continuation} | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>    
<p>Continues a match started with <code><a href="#match-3"><span class="code">match/3</span></a></code>. The next chunk of the size specified in the initial <code class="code">match/3</code> call is returned together with a new <code class="code">Continuation</code>, which can be used in subsequent calls to this function.</p> <p>When there are no more objects in the table, <code class="code">'$end_of_table'</code> is returned.</p>  
<div onmouseover="document.getElementById('ghlink-match-2-id354958').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match-2-id354958').style.visibility = 'hidden';"> match(Tab, Pattern) -&gt; [Match]</div> <h2 class="func-types-title">Types</h2>     
<p>Matches the objects in table <code class="code">Tab</code> against pattern <code class="code">Pattern</code>.</p> <p>A pattern is a term that can contain:</p> <ul> <li>Bound parts (Erlang terms)</li> <li> <code class="code">'_'</code> that matches any Erlang term</li> <li>Pattern variables <code class="code">'$N'</code>, where <code class="code">N</code>=0,1,...</li> </ul> <p>The function returns a list with one element for each matching object, where each element is an ordered list of pattern variable bindings, for example:</p> <pre data-language="erlang">
6&gt; ets:match(T, '$1'). % Matches every object in table
[[{rufsen,dog,7}],[{brunte,horse,5}],[{ludde,dog,5}]]
7&gt; ets:match(T, {'_',dog,'$1'}).
[[7],[5]]
8&gt; ets:match(T, {'_',cow,'$1'}).
[]</pre> <p>If the key is specified in the pattern, the match is very efficient. If the key is not specified, that is, if it is a variable or an underscore, the entire table must be searched. The search time can be substantial if the table is very large.</p> <p>For tables of type <code class="code">ordered_set</code>, the result is in the same order as in a <code class="code">first</code>/<code class="code">next</code> traversal.</p>  
<div onmouseover="document.getElementById('ghlink-match-3-id355170').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match-3-id355170').style.visibility = 'hidden';"> match(Tab, Pattern, Limit) -&gt;<br> {[Match], Continuation} | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>       
<p>Works like <code><a href="#match-2"><span class="code">match/2</span></a></code>, but returns only a limited (<code class="code">Limit</code>) number of matching objects. Term <code class="code">Continuation</code> can then be used in subsequent calls to <code><a href="#match-1"><span class="code">match/1</span></a></code> to get the next chunk of matching objects. This is a space-efficient way to work on objects in a table, which is faster than traversing the table object by object using <code><a href="#first-1"><span class="code">first/1</span></a></code> and <code><a href="#next-2"><span class="code">next/2</span></a></code>.</p> <p>If the table is empty, <code class="code">'$end_of_table'</code> is returned.</p>  
<div onmouseover="document.getElementById('ghlink-match_delete-2-id355207').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match_delete-2-id355207').style.visibility = 'hidden';"> match_delete(Tab, Pattern) -&gt; true</div> <h2 class="func-types-title">Types</h2>    
<p>Deletes all objects that match pattern <code class="code">Pattern</code> from table <code class="code">Tab</code>. For a description of patterns, see <code><a href="#match-2"><span class="code">match/2</span></a></code>.</p>  
<div onmouseover="document.getElementById('ghlink-match_object-1-id355199').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match_object-1-id355199').style.visibility = 'hidden';"> match_object(Continuation) -&gt;<br> {[Object], Continuation} | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>    
<p>Continues a match started with <code><a href="#match_object-3"><span class="code">match_object/3</span></a></code>. The next chunk of the size specified in the initial <code class="code">match_object/3</code> call is returned together with a new <code class="code">Continuation</code>, which can be used in subsequent calls to this function.</p> <p>When there are no more objects in the table, <code class="code">'$end_of_table'</code> is returned.</p>  
<div onmouseover="document.getElementById('ghlink-match_object-2-id355591').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match_object-2-id355591').style.visibility = 'hidden';"> match_object(Tab, Pattern) -&gt; [Object]</div> <h2 class="func-types-title">Types</h2>     
<p>Matches the objects in table <code class="code">Tab</code> against pattern <code class="code">Pattern</code>. For a description of patterns, see <code><a href="#match-2"><span class="code">match/2</span></a></code>. The function returns a list of all objects that match the pattern.</p> <p>If the key is specified in the pattern, the match is very efficient. If the key is not specified, that is, if it is a variable or an underscore, the entire table must be searched. The search time can be substantial if the table is very large.</p> <p>For tables of type <code class="code">ordered_set</code>, the result is in the same order as in a <code class="code">first</code>/<code class="code">next</code> traversal.</p>  
<div onmouseover="document.getElementById('ghlink-match_object-3-id355592').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match_object-3-id355592').style.visibility = 'hidden';"> match_object(Tab, Pattern, Limit) -&gt;<br> {[Object], Continuation} | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>       
<p>Works like <code><a href="#match_object-2"><span class="code">match_object/2</span></a></code>, but only returns a limited (<code class="code">Limit</code>) number of matching objects. Term <code class="code">Continuation</code> can then be used in subsequent calls to <code><a href="#match_object-1"><span class="code">match_object/1</span></a></code> to get the next chunk of matching objects. This is a space-efficient way to work on objects in a table, which is faster than traversing the table object by object using <code><a href="#first-1"><span class="code">first/1</span></a></code> and <code><a href="#next-2"><span class="code">next/2</span></a></code>.</p> <p>If the table is empty, <code class="code">'$end_of_table'</code> is returned.</p>  
<div onmouseover="document.getElementById('ghlink-match_spec_compile-1-id355769').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match_spec_compile-1-id355769').style.visibility = 'hidden';"> match_spec_compile(MatchSpec) -&gt; CompiledMatchSpec</div> <h2 class="func-types-title">Types</h2>    
<p>Transforms a <code><a href="#match_spec">match specification</a></code> into an internal representation that can be used in subsequent calls to <code><a href="#match_spec_run-2"><span class="code">match_spec_run/2</span></a></code>. The internal representation is opaque and cannot be converted to external term format and then back again without losing its properties (that is, it cannot be sent to a process on another node and still remain a valid compiled match specification, nor can it be stored on disk). To check the validity of a compiled match specification, use <code><a href="#is_compiled_ms-1"><span class="code">is_compiled_ms/1</span></a></code>. </p> <p>If term <code class="code">MatchSpec</code> cannot be compiled (does not represent a valid match specification), a <code class="code">badarg</code> exception is raised.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>This function has limited use in normal code. It is used by the <code><a href="dets"><span class="code">dets</span></a></code> module to perform the <code class="code">dets:select()</code> operations.</p> </div> </div>  
<div onmouseover="document.getElementById('ghlink-match_spec_run-2-id356115').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-match_spec_run-2-id356115').style.visibility = 'hidden';"> match_spec_run(List, CompiledMatchSpec) -&gt; list()</div> <h2 class="func-types-title">Types</h2>    
<p>Executes the matching specified in a compiled <code><a href="#match_spec">match specification</a></code> on a list of terms. Term <code class="code">CompiledMatchSpec</code> is to be the result of a call to <code><a href="#match_spec_compile-1"><span class="code">match_spec_compile/1</span></a></code> and is hence the internal representation of the match specification one wants to use.</p> <p>The matching is executed on each element in <code class="code">List</code> and the function returns a list containing all results. If an element in <code class="code">List</code> does not match, nothing is returned for that element. The length of the result list is therefore equal or less than the length of parameter <code class="code">List</code>. </p> <p><strong>Example:</strong></p> <p>The following two calls give the same result (but certainly not the same execution time):</p> <pre data-language="erlang">Table = ets:new...
MatchSpec = ...
% The following call...
ets:match_spec_run(ets:tab2list(Table),
                   ets:match_spec_compile(MatchSpec)),
% ...gives the same result as the more common (and more efficient)
ets:select(Table, MatchSpec),</pre> <div class="note"> <div class="label">Note</div> <div class="content">

<p>This function has limited use in normal code. It is used by the <code><a href="dets"><span class="code">dets</span></a></code> module to perform the <code class="code">dets:select()</code> operations and by Mnesia during transactions.</p> </div> </div>  
<div onmouseover="document.getElementById('ghlink-member-2-id356297').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-member-2-id356297').style.visibility = 'hidden';"> member(Tab, Key) -&gt; boolean()</div> <h2 class="func-types-title">Types</h2>    
<p>Works like <code><a href="#lookup-2"><span class="code">lookup/2</span></a></code>, but does not return the objects. Returns <code class="code">true</code> if one or more elements in the table has key <code class="code">Key</code>, otherwise <code class="code">false</code>.</p>  
<div onmouseover="document.getElementById('ghlink-new-2-id356291').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-new-2-id356291').style.visibility = 'hidden';"> new(Name, Options) -&gt; <code><a href="#type-tid">tid()</a></code> | atom()</div> <h2 class="func-types-title">Types</h2>          
<p>Creates a new table and returns a table identifier that can be used in subsequent operations. The table identifier can be sent to other processes so that a table can be shared between different processes within a node.</p> <p>Parameter <code class="code">Options</code> is a list of atoms that specifies table type, access rights, key position, and whether the table is named. Default values are used for omitted options. This means that not specifying any options (<code class="code">[]</code>) is the same as specifying <code class="code">[set, protected, {keypos,1}, {heir,none}, {write_concurrency,false}, {read_concurrency,false}]</code>.</p> <dl> <dt><strong><code class="code">set</code></strong></dt> <dd> <p>The table is a <code class="code">set</code> table: one key, one object, no order among objects. This is the default table type.</p> </dd> <dt><strong><code class="code">ordered_set</code></strong></dt> <dd> <p>The table is a <code class="code">ordered_set</code> table: one key, one object, ordered in Erlang term order, which is the order implied by the &lt; and &gt; operators. Tables of this type have a somewhat different behavior in some situations than tables of other types. Most notably, the <code class="code">ordered_set</code> tables regard keys as equal when they <strong>compare equal</strong>, not only when they match. This means that to an <code class="code">ordered_set</code> table, <code class="code">integer()</code> <code class="code">1</code> and <code class="code">float()</code> <code class="code">1.0</code> are regarded as equal. This also means that the key used to lookup an element not necessarily <strong>matches</strong> the key in the returned elements, if <code class="code">float()</code>'s and <code class="code">integer()</code>'s are mixed in keys of a table.</p> </dd> <dt><strong><code class="code">bag</code></strong></dt> <dd> <p>The table is a <code class="code">bag</code> table, which can have many objects, but only one instance of each object, per key.</p> </dd> <dt><strong><code class="code">duplicate_bag</code></strong></dt> <dd> <p>The table is a <code class="code">duplicate_bag</code> table, which can have many objects, including multiple copies of the same object, per key.</p> </dd> <dt><strong><code class="code">public</code></strong></dt> <dd id="protected"> <p>Any process can read or write to the table.</p>  </dd> <dt><strong><code class="code">protected</code></strong></dt> <dd id="private"> <p>The owner process can read and write to the table. Other processes can only read the table. This is the default setting for the access rights.</p>  </dd> <dt><strong><code class="code">private</code></strong></dt> <dd> <p>Only the owner process can read or write to the table.</p> </dd> <dt><strong><code class="code">named_table</code></strong></dt> <dd> <p>If this option is present, the table is registered under its <code class="code">Name</code> which can then be used instead of the table identifier in subsequent operations.</p> <p>The function will also return the <code class="code">Name</code> instead of the table identifier. To get the table identifier of a named table, use <code><a href="#whereis-1"><span class="code">whereis/1</span></a></code>.</p> </dd> <dt><strong><code class="code">{keypos,Pos}</code></strong></dt> <dd id="heir"> <p>Specifies which element in the stored tuples to use as key. By default, it is the first element, that is, <code class="code">Pos=1</code>. However, this is not always appropriate. In particular, we do not want the first element to be the key if we want to store Erlang records in a table.</p> <p>Notice that any tuple stored in the table must have at least <code class="code">Pos</code> number of elements.</p>  </dd> <dt><strong><code class="code">{heir,Pid,HeirData} | {heir,none}</code></strong></dt> <dd id="new_2_write_concurrency"> <p>Set a process as heir. The heir inherits the table if the owner terminates. Message <code class="code">{'ETS-TRANSFER',tid(),FromPid,HeirData}</code> is sent to the heir when that occurs. The heir must be a local process. Default heir is <code class="code">none</code>, which destroys the table when the owner terminates.</p>  </dd> <dt><strong><code class="code">{write_concurrency,boolean()}</code></strong></dt> <dd id="new_2_read_concurrency"> <p>Performance tuning. Defaults to <code class="code">false</code>, in which case an operation that mutates (writes to) the table obtains exclusive access, blocking any concurrent access of the same table until finished. If set to <code class="code">true</code>, the table is optimized to concurrent write access. Different objects of the same table can be mutated (and read) by concurrent processes. This is achieved to some degree at the expense of memory consumption and the performance of sequential access and concurrent reading.</p> <p>Option <code class="code">write_concurrency</code> can be combined with option <code><a href="#new_2_read_concurrency"><span class="code">read_concurrency</span></a></code>. You typically want to combine these when large concurrent read bursts and large concurrent write bursts are common; for more information, see option <code><a href="#new_2_read_concurrency"><span class="code">read_concurrency</span></a></code>.</p> <p>Notice that this option does not change any guarantees about <code><a href="#concurrency">atomicity and isolation</a></code>. Functions that makes such promises over many objects (like <code><a href="#insert-2"><span class="code">insert/2</span></a></code>) gain less (or nothing) from this option.</p> <p>Table type <code class="code">ordered_set</code> is not affected by this option. Also, the memory consumption inflicted by both <code class="code">write_concurrency</code> and <code class="code">read_concurrency</code> is a constant overhead per table. This overhead can be especially large when both options are combined.</p>  </dd> <dt><strong><code class="code">{read_concurrency,boolean()}</code></strong></dt> <dd id="new_2_compressed"> <p>Performance tuning. Defaults to <code class="code">false</code>. When set to <code class="code">true</code>, the table is optimized for concurrent read operations. When this option is enabled on a runtime system with SMP support, read operations become much cheaper; especially on systems with multiple physical processors. However, switching between read and write operations becomes more expensive.</p> <p>You typically want to enable this option when concurrent read operations are much more frequent than write operations, or when concurrent reads and writes comes in large read and write bursts (that is, many reads not interrupted by writes, and many writes not interrupted by reads).</p> <p>You typically do <strong>not</strong> want to enable this option when the common access pattern is a few read operations interleaved with a few write operations repeatedly. In this case, you would get a performance degradation by enabling this option.</p> <p>Option <code class="code">read_concurrency</code> can be combined with option <code><a href="#new_2_write_concurrency"><span class="code">write_concurrency</span></a></code>. You typically want to combine these when large concurrent read bursts and large concurrent write bursts are common.</p>  </dd> <dt><strong><code class="code">compressed</code></strong></dt> <dd> <p>If this option is present, the table data is stored in a more compact format to consume less memory. However, it will make table operations slower. Especially operations that need to inspect entire objects, such as <code class="code">match</code> and <code class="code">select</code>, get much slower. The key element is not compressed.</p> </dd> </dl>  
<div onmouseover="document.getElementById('ghlink-next-2-id357187').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-next-2-id357187').style.visibility = 'hidden';"> next(Tab, Key1) -&gt; Key2 | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>     
<p>Returns the next key <code class="code">Key2</code>, following key <code class="code">Key1</code> in table <code class="code">Tab</code>. For table type <code class="code">ordered_set</code>, the next key in Erlang term order is returned. For other table types, the next key according to the internal order of the table is returned. If no next key exists, <code class="code">'$end_of_table'</code> is returned.</p> <p>To find the first key in the table, use <code><a href="#first-1"><span class="code">first/1</span></a></code>.</p> <p>Unless a table of type <code class="code">set</code>, <code class="code">bag</code>, or <code class="code">duplicate_bag</code> is protected using <code><a href="#safe_fixtable-2"><span class="code">safe_fixtable/2</span></a></code>, a traversal can fail if concurrent updates are made to the table. For table type <code class="code">ordered_set</code>, the function returns the next key in order, even if the object does no longer exist.</p>  
<div onmouseover="document.getElementById('ghlink-prev-2-id357360').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-prev-2-id357360').style.visibility = 'hidden';"> prev(Tab, Key1) -&gt; Key2 | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>     
<p>Returns the previous key <code class="code">Key2</code>, preceding key <code class="code">Key1</code> according to Erlang term order in table <code class="code">Tab</code> of type <code class="code">ordered_set</code>. For other table types, the function is synonymous to <code><a href="#next-2"><span class="code">next/2</span></a></code>. If no previous key exists, <code class="code">'$end_of_table'</code> is returned.</p> <p>To find the last key in the table, use <code><a href="#last-1"><span class="code">last/1</span></a></code>.</p>  
<div onmouseover="document.getElementById('ghlink-rename-2-id357502').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-rename-2-id357502').style.visibility = 'hidden';"> rename(Tab, Name) -&gt; Name</div> <h2 class="func-types-title">Types</h2>    
<p>Renames the named table <code class="code">Tab</code> to the new name <code class="code">Name</code>. Afterwards, the old name cannot be used to access the table. Renaming an unnamed table has no effect.</p>  
<div onmouseover="document.getElementById('ghlink-repair_continuation-2-id357595').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-repair_continuation-2-id357595').style.visibility = 'hidden';"> repair_continuation(Continuation, MatchSpec) -&gt; Continuation</div> <h2 class="func-types-title">Types</h2>    
<p>Restores an opaque continuation returned by <code><a href="#select-3"><span class="code">select/3</span></a></code> or <code><a href="#select-1"><span class="code">select/1</span></a></code> if the continuation has passed through external term format (been sent between nodes or stored on disk).</p> <p>The reason for this function is that continuation terms contain compiled match specifications and therefore are invalidated if converted to external term format. Given that the original match specification is kept intact, the continuation can be restored, meaning it can once again be used in subsequent <code class="code">select/1</code> calls even though it has been stored on disk or on another node.</p> <p><strong>Examples:</strong></p> <p>The following sequence of calls fails:</p> <pre data-language="erlang">T=ets:new(x,[]),
...
{_,C} = ets:select(T,ets:fun2ms(fun({N,_}=A)
when (N rem 10) =:= 0 -&gt;
A
end),10),
Broken = binary_to_term(term_to_binary(C)),
ets:select(Broken).</pre> <p>The following sequence works, as the call to <code class="code">repair_continuation/2</code> reestablishes the (deliberately) invalidated continuation <code class="code">Broken</code>.</p> <pre data-language="erlang">T=ets:new(x,[]),
...
MS = ets:fun2ms(fun({N,_}=A)
when (N rem 10) =:= 0 -&gt;
A
end),
{_,C} = ets:select(T,MS,10),
Broken = binary_to_term(term_to_binary(C)),
ets:select(ets:repair_continuation(Broken,MS)).</pre> <div class="note"> <div class="label">Note</div> <div class="content">

<p>This function is rarely needed in application code. It is used by Mnesia to provide distributed <code class="code">select/3</code> and <code class="code">select/1</code> sequences. A normal application would either use Mnesia or keep the continuation from being converted to external format.</p> <p>The reason for not having an external representation of a compiled match specification is performance. It can be subject to change in future releases, while this interface remains for backward compatibility.</p> </div> </div>  
<div onmouseover="document.getElementById('ghlink-safe_fixtable-2-id357798').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-safe_fixtable-2-id357798').style.visibility = 'hidden';"> safe_fixtable(Tab, Fix) -&gt; true</div> <h2 class="func-types-title">Types</h2>    
<p>Fixes a table of type <code class="code">set</code>, <code class="code">bag</code>, or <code class="code">duplicate_bag</code> for safe traversal.</p> <p>A process fixes a table by calling <code class="code">safe_fixtable(Tab, true)</code>. The table remains fixed until the process releases it by calling <code class="code">safe_fixtable(Tab, false)</code>, or until the process terminates.</p> <p>If many processes fix a table, the table remains fixed until all processes have released it (or terminated). A reference counter is kept on a per process basis, and N consecutive fixes requires N releases to release the table.</p> <p>When a table is fixed, a sequence of <code><a href="#first-1"><span class="code">first/1</span></a></code> and <code><a href="#next-2"><span class="code">next/2</span></a></code> calls are guaranteed to succeed, and each object in the table is returned only once, even if objects are removed or inserted during the traversal. The keys for new objects inserted during the traversal <strong>can</strong> be returned by <code class="code">next/2</code> (it depends on the internal ordering of the keys).</p> <p><strong>Example:</strong></p> <pre data-language="erlang">clean_all_with_value(Tab,X) -&gt;
    safe_fixtable(Tab,true),
    clean_all_with_value(Tab,X,ets:first(Tab)),
    safe_fixtable(Tab,false).

clean_all_with_value(Tab,X,'$end_of_table') -&gt;
    true;
clean_all_with_value(Tab,X,Key) -&gt;
    case ets:lookup(Tab,Key) of
        [{Key,X}] -&gt;
            ets:delete(Tab,Key);
        _ -&gt;
            true
    end,
    clean_all_with_value(Tab,X,ets:next(Tab,Key)).</pre> <p>Notice that no deleted objects are removed from a fixed table until it has been released. If a process fixes a table but never releases it, the memory used by the deleted objects is never freed. The performance of operations on the table also degrades significantly.</p> <p>To retrieve information about which processes have fixed which tables, use <code><a href="#info_2_safe_fixed_monotonic_time"><span class="code">info(Tab, safe_fixed_monotonic_time)</span></a></code>. A system with many processes fixing tables can need a monitor that sends alarms when tables have been fixed for too long.</p> <p>Notice that for table type <code class="code">ordered_set</code>, <code class="code">safe_fixtable/2</code> is not necessary, as calls to <code class="code">first/1</code> and <code class="code">next/2</code> always succeed.</p>  
<div onmouseover="document.getElementById('ghlink-select-1-id358021').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-select-1-id358021').style.visibility = 'hidden';"> select(Continuation) -&gt; {[Match], Continuation} | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>    
<p>Continues a match started with <code><a href="#select-3"><span class="code">select/3</span></a></code>. The next chunk of the size specified in the initial <code class="code">select/3</code> call is returned together with a new <code class="code">Continuation</code>, which can be used in subsequent calls to this function.</p> <p>When there are no more objects in the table, <code class="code">'$end_of_table'</code> is returned.</p>  
<div onmouseover="document.getElementById('ghlink-select-2-id358115').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-select-2-id358115').style.visibility = 'hidden';"> select(Tab, MatchSpec) -&gt; [Match]</div> <h2 class="func-types-title">Types</h2>     
<p>Matches the objects in table <code class="code">Tab</code> using a <code><a href="#match_spec">match specification</a></code>. This is a more general call than <code><a href="#match-2"><span class="code">match/2</span></a></code> and <code><a href="#match_object-2"><span class="code">match_object/2</span></a></code> calls. In its simplest form, the match specification is as follows:</p> <pre data-language="erlang">MatchSpec = [MatchFunction]
MatchFunction = {MatchHead, [Guard], [Result]}
MatchHead = "Pattern as in ets:match"
Guard = {"Guardtest name", ...}
Result = "Term construct"</pre> <p>This means that the match specification is always a list of one or more tuples (of arity 3). The first element of the tuple is to be a pattern as described in <code><a href="#match-2"><span class="code">match/2</span></a></code>. The second element of the tuple is to be a list of 0 or more guard tests (described below). The third element of the tuple is to be a list containing a description of the value to return. In almost all normal cases, the list contains exactly one term that fully describes the value to return for each object.</p> <p>The return value is constructed using the "match variables" bound in <code class="code">MatchHead</code> or using the special match variables <code class="code">'$_'</code> (the whole matching object) and <code class="code">'$$'</code> (all match variables in a list), so that the following <code class="code">match/2</code> expression:</p> <pre data-language="erlang">ets:match(Tab,{'$1','$2','$3'})</pre> <p>is exactly equivalent to:</p> <pre data-language="erlang">ets:select(Tab,[{{'$1','$2','$3'},[],['$$']}])</pre> <p>And that the following <code class="code">match_object/2</code> call:</p> <pre data-language="erlang">ets:match_object(Tab,{'$1','$2','$1'})</pre> <p>is exactly equivalent to</p> <pre data-language="erlang">ets:select(Tab,[{{'$1','$2','$1'},[],['$_']}])</pre> <p>Composite terms can be constructed in the <code class="code">Result</code> part either by simply writing a list, so that the following code:</p> <pre data-language="erlang">ets:select(Tab,[{{'$1','$2','$3'},[],['$$']}])</pre> <p>gives the same output as:</p> <pre data-language="erlang">ets:select(Tab,[{{'$1','$2','$3'},[],[['$1','$2','$3']]}])</pre> <p>That is, all the bound variables in the match head as a list. If tuples are to be constructed, one has to write a tuple of arity 1 where the single element in the tuple is the tuple one wants to construct (as an ordinary tuple can be mistaken for a <code class="code">Guard</code>).</p> <p>Therefore the following call:</p> <pre data-language="erlang">ets:select(Tab,[{{'$1','$2','$1'},[],['$_']}])</pre> <p>gives the same output as:</p> <pre data-language="erlang">ets:select(Tab,[{{'$1','$2','$1'},[],[{{'$1','$2','$3'}}]}])</pre> <p>This syntax is equivalent to the syntax used in the trace patterns (see the <code><span class="code">dbg(3)</span></code>) module in Runtime_Tools.</p> <p>The <code class="code">Guard</code>s are constructed as tuples, where the first element is the test name and the remaining elements are the test parameters. To check for a specific type (say a list) of the element bound to the match variable <code class="code">'$1'</code>, one would write the test as <code class="code">{is_list, '$1'}</code>. If the test fails, the object in the table does not match and the next <code class="code">MatchFunction</code> (if any) is tried. Most guard tests present in Erlang can be used, but only the new versions prefixed <code class="code">is_</code> are allowed (<code class="code">is_float</code>, <code class="code">is_atom</code>, and so on).</p> <p>The <code class="code">Guard</code> section can also contain logic and arithmetic operations, which are written with the same syntax as the guard tests (prefix notation), so that the following guard test written in Erlang:</p> <pre data-language="erlang">is_integer(X), is_integer(Y), X + Y &lt; 4711</pre> <p>is expressed as follows (<code class="code">X</code> replaced with <code class="code">'$1'</code> and <code class="code">Y</code> with <code class="code">'$2'</code>):</p> <pre data-language="erlang">[{is_integer, '$1'}, {is_integer, '$2'}, {'&lt;', {'+', '$1', '$2'}, 4711}]</pre> <p>For tables of type <code class="code">ordered_set</code>, objects are visited in the same order as in a <code class="code">first</code>/<code class="code">next</code> traversal. This means that the match specification is executed against objects with keys in the <code class="code">first</code>/<code class="code">next</code> order and the corresponding result list is in the order of that execution.</p>  
<div onmouseover="document.getElementById('ghlink-select-3-id358505').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-select-3-id358505').style.visibility = 'hidden';"> select(Tab, MatchSpec, Limit) -&gt;<br> {[Match], Continuation} | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>       
<p>Works like <code><a href="#select-2"><span class="code">select/2</span></a></code>, but only returns a limited (<code class="code">Limit</code>) number of matching objects. Term <code class="code">Continuation</code> can then be used in subsequent calls to <code><a href="#select-1"><span class="code">select/1</span></a></code> to get the next chunk of matching objects. This is a space-efficient way to work on objects in a table, which is still faster than traversing the table object by object using <code><a href="#first-1"><span class="code">first/1</span></a></code> and <code><a href="#next-2"><span class="code">next/2</span></a></code>.</p> <p>If the table is empty, <code class="code">'$end_of_table'</code> is returned.</p>  
<div onmouseover="document.getElementById('ghlink-select_count-2-id358538').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-select_count-2-id358538').style.visibility = 'hidden';"> select_count(Tab, MatchSpec) -&gt; NumMatched</div> <h2 class="func-types-title">Types</h2>     
<p>Matches the objects in table <code class="code">Tab</code> using a <code><a href="#match_spec">match specification</a></code>. If the match specification returns <code class="code">true</code> for an object, that object considered a match and is counted. For any other result from the match specification the object is not considered a match and is therefore not counted.</p> <p>This function can be described as a <code><a href="#match_delete-2"><span class="code">match_delete/2</span></a></code> function that does not delete any elements, but only counts them.</p> <p>The function returns the number of objects matched.</p>  
<div onmouseover="document.getElementById('ghlink-select_delete-2-id358736').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-select_delete-2-id358736').style.visibility = 'hidden';"> select_delete(Tab, MatchSpec) -&gt; NumDeleted</div> <h2 class="func-types-title">Types</h2>     
<p>Matches the objects in table <code class="code">Tab</code> using a <code><a href="#match_spec">match specification</a></code>. If the match specification returns <code class="code">true</code> for an object, that object is removed from the table. For any other result from the match specification the object is retained. This is a more general call than the <code><a href="#match_delete-2"><span class="code">match_delete/2</span></a></code> call.</p> <p>The function returns the number of objects deleted from the table.</p> <div class="note"> <div class="label">Note</div> <div class="content">

<p>The match specification has to return the atom <code class="code">true</code> if the object is to be deleted. No other return value gets the object deleted. So one cannot use the same match specification for looking up elements as for deleting them.</p> </div> </div>  
<div onmouseover="document.getElementById('ghlink-select_replace-2-id359616').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-select_replace-2-id359616').style.visibility = 'hidden';"> select_replace(Tab, MatchSpec) -&gt; NumReplaced</div> <h2 class="func-types-title">Types</h2>     
<p>Matches the objects in the table <code class="code">Tab</code> using a <code><a href="#match_spec">match specification</a></code>. For each matched object, the existing object is replaced with the match specification result.</p> <p>The match-and-replace operation for each individual object is guaranteed to be <code><a href="#concurrency">atomic and isolated</a></code>. The <code class="code">select_replace</code> table iteration as a whole, like all other select functions, does not give such guarantees.</p> <p>The match specifiction must be guaranteed to <strong>retain the key</strong> of any matched object. If not, <code class="code">select_replace</code> will fail with <code class="code">badarg</code> without updating any objects.</p> <p>For the moment, due to performance and semantic constraints, tables of type <code class="code">bag</code> are not yet supported.</p> <p>The function returns the total number of replaced objects.</p> <p><strong>Example</strong></p> <p>For all 2-tuples with a list in second position, add atom <code class="code">'marker'</code> first in the list:</p> <pre data-language="erlang">
1&gt; T = ets:new(x,[]), ets:insert(T, {key, [1, 2, 3]}).
true
2&gt; MS = ets:fun2ms(fun({K, L}) when is_list(L) -&gt; {K, [marker | L]} end).
[{{'$1','$2'},[{is_list,'$2'}],[{{'$1',[marker|'$2']}}]}]
3&gt; ets:select_replace(T, MS).
1
4&gt; ets:tab2list(T).
[{key,[marker,1,2,3]}]
	</pre> <p>A generic single object compare-and-swap operation:</p> <pre data-language="erlang">
[Old] = ets:lookup(T, Key),
New = update_object(Old),
Success = (1 =:= ets:select_replace(T, [{Old, [], [{const, New}]}])),
	</pre>  
<div onmouseover="document.getElementById('ghlink-select_reverse-1-id359832').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-select_reverse-1-id359832').style.visibility = 'hidden';"> select_reverse(Continuation) -&gt;<br> {[Match], Continuation} | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>    
<p>Continues a match started with <code><a href="#select_reverse-3"><span class="code">select_reverse/3</span></a></code>. For tables of type <code class="code">ordered_set</code>, the traversal of the table continues to objects with keys earlier in the Erlang term order. The returned list also contains objects with keys in reverse order. For all other table types, the behavior is exactly that of <code><a href="#select-1"><span class="code">select/1</span></a></code>.</p> <p><strong>Example:</strong></p> <pre data-language="erlang">1&gt; T = ets:new(x,[ordered_set]).
2&gt; [ ets:insert(T,{N}) || N &lt;- lists:seq(1,10) ].
...
3&gt; {R0,C0} = ets:select_reverse(T,[{'_',[],['$_']}],4).
...
4&gt; R0.
[{10},{9},{8},{7}]
5&gt; {R1,C1} = ets:select_reverse(C0).
...
6&gt; R1.
[{6},{5},{4},{3}]
7&gt; {R2,C2} = ets:select_reverse(C1).
...
8&gt; R2.
[{2},{1}]
9&gt; '$end_of_table' = ets:select_reverse(C2).
...</pre>  
<div onmouseover="document.getElementById('ghlink-select_reverse-2-id359862').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-select_reverse-2-id359862').style.visibility = 'hidden';"> select_reverse(Tab, MatchSpec) -&gt; [Match]</div> <h2 class="func-types-title">Types</h2>     
<p>Works like <code><a href="#select-2"><span class="code">select/2</span></a></code>, but returns the list in reverse order for table type <code class="code">ordered_set</code>. For all other table types, the return value is identical to that of <code class="code">select/2</code>.</p>  
<div onmouseover="document.getElementById('ghlink-select_reverse-3-id359988').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-select_reverse-3-id359988').style.visibility = 'hidden';"> select_reverse(Tab, MatchSpec, Limit) -&gt;<br> {[Match], Continuation} | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>       
<p>Works like <code><a href="#select-3"><span class="code">select/3</span></a></code>, but for table type <code class="code">ordered_set</code> traversing is done starting at the last object in Erlang term order and moves to the first. For all other table types, the return value is identical to that of <code class="code">select/3</code>.</p> <p>Notice that this is <strong>not</strong> equivalent to reversing the result list of a <code class="code">select/3</code> call, as the result list is not only reversed, but also contains the last <code class="code">Limit</code> matching objects in the table, not the first.</p>  
<div onmouseover="document.getElementById('ghlink-setopts-2-id359833').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-setopts-2-id359833').style.visibility = 'hidden';"> setopts(Tab, Opts) -&gt; true</div> <h2 class="func-types-title">Types</h2>      
<p>Sets table options. The only allowed option to be set after the table has been created is <code><a href="#heir"><span class="code">heir</span></a></code>. The calling process must be the table owner.</p>  
<div onmouseover="document.getElementById('ghlink-slot-2-id359834').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-slot-2-id359834').style.visibility = 'hidden';"> slot(Tab, I) -&gt; [Object] | '$end_of_table'</div> <h2 class="func-types-title">Types</h2>     
<p>This function is mostly for debugging purposes, Normally <code class="code">first</code>/<code class="code">next</code> or <code class="code">last</code>/<code class="code">prev</code> are to be used instead.</p> <p>Returns all objects in slot <code class="code">I</code> of table <code class="code">Tab</code>. A table can be traversed by repeatedly calling the function, starting with the first slot <code class="code">I=0</code> and ending when <code class="code">'$end_of_table'</code> is returned. If argument <code class="code">I</code> is out of range, the function fails with reason <code class="code">badarg</code>.</p> <p>Unless a table of type <code class="code">set</code>, <code class="code">bag</code>, or <code class="code">duplicate_bag</code> is protected using <code><a href="#safe_fixtable-2"><span class="code">safe_fixtable/2</span></a></code>, a traversal can fail if concurrent updates are made to the table. For table type <code class="code">ordered_set</code>, the function returns a list containing object <code class="code">I</code> in Erlang term order.</p>  
<div onmouseover="document.getElementById('ghlink-tab2file-2-id360550').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-tab2file-2-id360550').style.visibility = 'hidden';"> tab2file(Tab, Filename) -&gt; ok | {error, Reason}</div> <h2 class="func-types-title">Types</h2>     
<p>Dumps table <code class="code">Tab</code> to file <code class="code">Filename</code>.</p> <p>Equivalent to <code class="code">tab2file(Tab, Filename,[])</code></p>  
<div onmouseover="document.getElementById('ghlink-tab2file-3-id360686').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-tab2file-3-id360686').style.visibility = 'hidden';"> tab2file(Tab, Filename, Options) -&gt; ok | {error, Reason}</div> <h2 class="func-types-title">Types</h2>        
<p>Dumps table <code class="code">Tab</code> to file <code class="code">Filename</code>.</p> <p>When dumping the table, some information about the table is dumped to a header at the beginning of the dump. This information contains data about the table type, name, protection, size, version, and if it is a named table. It also contains notes about what extended information is added to the file, which can be a count of the objects in the file or a MD5 sum of the header and records in the file.</p> <p>The size field in the header might not correspond to the number of records in the file if the table is public and records are added or removed from the table during dumping. Public tables updated during dump, and that one wants to verify when reading, needs at least one field of extended information for the read verification process to be reliable later.</p> <p>Option <code class="code">extended_info</code> specifies what extra information is written to the table dump:</p> <dl> <dt><strong><code class="code">object_count</code></strong></dt> <dd> <p>The number of objects written to the file is noted in the file footer, so file truncation can be verified even if the file was updated during dump.</p> </dd> <dt><strong><code class="code">md5sum</code></strong></dt> <dd> <p>The header and objects in the file are checksummed using the built-in MD5 functions. The MD5 sum of all objects is written in the file footer, so that verification while reading detects the slightest bitflip in the file data. Using this costs a fair amount of CPU time.</p> </dd> </dl> <p>Whenever option <code class="code">extended_info</code> is used, it results in a file not readable by versions of ETS before that in STDLIB 1.15.1</p> <p>If option <code class="code">sync</code> is set to <code class="code">true</code>, it ensures that the content of the file is written to the disk before <code class="code">tab2file</code> returns. Defaults to <code class="code">{sync, false}</code>.</p>  
<div onmouseover="document.getElementById('ghlink-tab2list-1-id360893').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-tab2list-1-id360893').style.visibility = 'hidden';"> tab2list(Tab) -&gt; [Object]</div> <h2 class="func-types-title">Types</h2>    
<p>Returns a list of all objects in table <code class="code">Tab</code>.</p>  
<div onmouseover="document.getElementById('ghlink-tabfile_info-1-id360882').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-tabfile_info-1-id360882').style.visibility = 'hidden';"> tabfile_info(Filename) -&gt; {ok, TableInfo} | {error, Reason}</div> <h2 class="func-types-title">Types</h2>         
<p>Returns information about the table dumped to file by <code><a href="#tab2file-2"><span class="code">tab2file/2</span></a></code> or <code><a href="#tab2file-3"><span class="code">tab2file/3</span></a></code>.</p> <p>The following items are returned:</p> <dl> <dt><strong><code class="code">name</code></strong></dt> <dd> <p>The name of the dumped table. If the table was a named table, a table with the same name cannot exist when the table is loaded from file with <code><a href="#file2tab-2"><span class="code">file2tab/2</span></a></code>. If the table is not saved as a named table, this field has no significance when loading the table from file.</p> </dd> <dt><strong><code class="code">type</code></strong></dt> <dd> <p>The ETS type of the dumped table (that is, <code class="code">set</code>, <code class="code">bag</code>, <code class="code">duplicate_bag</code>, or <code class="code">ordered_set</code>). This type is used when loading the table again.</p> </dd> <dt><strong><code class="code">protection</code></strong></dt> <dd> <p>The protection of the dumped table (that is, <code class="code">private</code>, <code class="code">protected</code>, or <code class="code">public</code>). A table loaded from the file gets the same protection.</p> </dd> <dt><strong><code class="code">named_table</code></strong></dt> <dd> <p><code class="code">true</code> if the table was a named table when dumped to file, otherwise <code class="code">false</code>. Notice that when a named table is loaded from a file, there cannot exist a table in the system with the same name.</p> </dd> <dt><strong><code class="code">keypos</code></strong></dt> <dd> <p>The <code class="code">keypos</code> of the table dumped to file, which is used when loading the table again.</p> </dd> <dt><strong><code class="code">size</code></strong></dt> <dd> <p>The number of objects in the table when the table dump to file started. For a <code class="code">public</code> table, this number does not need to correspond to the number of objects saved to the file, as objects can have been added or deleted by another process during table dump.</p> </dd> <dt><strong><code class="code">extended_info</code></strong></dt> <dd> <p>The extended information written in the file footer to allow stronger verification during table loading from file, as specified to <code><a href="#tab2file-3"><span class="code">tab2file/3</span></a></code>. Notice that this function only tells <strong>which</strong> information is present, not the values in the file footer. The value is a list containing one or more of the atoms <code class="code">object_count</code> and <code class="code">md5sum</code>.</p> </dd> <dt><strong><code class="code">version</code></strong></dt> <dd> <p>A tuple <code class="code">{Major,Minor}</code> containing the major and minor version of the file format for ETS table dumps. This version field was added beginning with STDLIB 1.5.1. Files dumped with older versions return <code class="code">{0,0}</code> in this field.</p> </dd> </dl> <p>An error is returned if the file is inaccessible, badly damaged, or not produced with <code><a href="#tab2file-2"><span class="code">tab2file/2</span></a></code> or <code><a href="#tab2file-3"><span class="code">tab2file/3</span></a></code>.</p>  
<div onmouseover="document.getElementById('ghlink-table-1-id361441').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-table-1-id361441').style.visibility = 'hidden';"> table(Tab) -&gt; QueryHandle</div>
<div onmouseover="document.getElementById('ghlink-table-2-id361440').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-table-2-id361440').style.visibility = 'hidden';" id="table-2"> table(Tab, Options) -&gt; QueryHandle</div> <h2 class="func-types-title">Types</h2>        
<p>Returns a Query List Comprehension (QLC) query handle. The <code><a href="qlc"><span class="code">qlc</span></a></code> module provides a query language aimed mainly at Mnesia, but ETS tables, Dets tables, and lists are also recognized by QLC as sources of data. Calling <code class="code">table/1,2</code> is the means to make the ETS table <code class="code">Tab</code> usable to QLC.</p> <p>When there are only simple restrictions on the key position, QLC uses <code><a href="#lookup-2"><span class="code">lookup/2</span></a></code> to look up the keys. When that is not possible, the whole table is traversed. Option <code class="code">traverse</code> determines how this is done:</p> <dl> <dt><strong><code class="code">first_next</code></strong></dt> <dd> <p>The table is traversed one key at a time by calling <code><a href="#first-1"><span class="code">first/1</span></a></code> and <code><a href="#next-2"><span class="code">next/2</span></a></code>.</p> </dd> <dt><strong><code class="code">last_prev</code></strong></dt> <dd> <p>The table is traversed one key at a time by calling <code><a href="#last-1"><span class="code">last/1</span></a></code> and <code><a href="#prev-2"><span class="code">prev/2</span></a></code>.</p> </dd> <dt><strong><code class="code">select</code></strong></dt> <dd> <p>The table is traversed by calling <code><a href="#select-3"><span class="code">select/3</span></a></code> and <code><a href="#select-1"><span class="code">select/1</span></a></code>. Option <code class="code">n_objects</code> determines the number of objects returned (the third argument of <code class="code">select/3</code>); the default is to return <code class="code">100</code> objects at a time. The <code><a href="#match_spec">match specification</a></code> (the second argument of <code class="code">select/3</code>) is assembled by QLC: simple filters are translated into equivalent match specifications while more complicated filters must be applied to all objects returned by <code class="code">select/3</code> given a match specification that matches all objects.</p> </dd> <dt><strong><code class="code">{select, MatchSpec}</code></strong></dt> <dd> <p>As for <code class="code">select</code>, the table is traversed by calling <code><a href="#select-3"><span class="code">select/3</span></a></code> and <code><a href="#select-1"><span class="code">select/1</span></a></code>. The difference is that the match specification is explicitly specified. This is how to state match specifications that cannot easily be expressed within the syntax provided by QLC.</p> </dd> </dl> <p><strong>Examples:</strong></p> <p>An explicit match specification is here used to traverse the table:</p> <pre data-language="erlang">
9&gt; true = ets:insert(Tab = ets:new(t, []), [{1,a},{2,b},{3,c},{4,d}]),
MS = ets:fun2ms(fun({X,Y}) when (X &gt; 1) or (X &lt; 5) -&gt; {Y} end),
QH1 = ets:table(Tab, [{traverse, {select, MS}}]).</pre> <p>An example with an implicit match specification:</p> <pre data-language="erlang">
10&gt; QH2 = qlc:q([{Y} || {X,Y} &lt;- ets:table(Tab), (X &gt; 1) or (X &lt; 5)]).</pre> <p>The latter example is equivalent to the former, which can be verified using function <code class="code">qlc:info/1</code>:</p> <pre data-language="erlang">
11&gt; qlc:info(QH1) =:= qlc:info(QH2).
true</pre> <p><code class="code">qlc:info/1</code> returns information about a query handle, and in this case identical information is returned for the two query handles.</p>  
<div onmouseover="document.getElementById('ghlink-take-2-id361949').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-take-2-id361949').style.visibility = 'hidden';"> take(Tab, Key) -&gt; [Object]</div> <h2 class="func-types-title">Types</h2>     
<p>Returns and removes a list of all objects with key <code class="code">Key</code> in table <code class="code">Tab</code>.</p> <p>The specified <code class="code">Key</code> is used to identify the object by either <strong>comparing equal</strong> the key of an object in an <code class="code">ordered_set</code> table, or <strong>matching</strong> in other types of tables (for details on the difference, see <code><a href="#lookup-2"><span class="code">lookup/2</span></a></code> and <code><a href="#new-2"><span class="code">new/2</span></a></code>).</p>  
<div onmouseover="document.getElementById('ghlink-test_ms-2-id359106').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-test_ms-2-id359106').style.visibility = 'hidden';"> test_ms(Tuple, MatchSpec) -&gt; {ok, Result} | {error, Errors}</div> <h2 class="func-types-title">Types</h2>      
<p>This function is a utility to test a <code><a href="#match_spec">match specification</a></code> used in calls to <code><a href="#select-2"><span class="code">select/2</span></a></code>. The function both tests <code class="code">MatchSpec</code> for "syntactic" correctness and runs the match specification against object <code class="code">Tuple</code>.</p> <p>If the match specification is syntactically correct, the function either returns <code class="code">{ok,Result}</code>, where <code class="code">Result</code> is what would have been the result in a real <code class="code">select/2</code> call, or <code class="code">false</code> if the match specification does not match object <code class="code">Tuple</code>.</p> <p>If the match specification contains errors, tuple <code class="code">{error, Errors}</code> is returned, where <code class="code">Errors</code> is a list of natural language descriptions of what was wrong with the match specification.</p> <p>This is a useful debugging and test tool, especially when writing complicated <code class="code">select/2</code> calls.</p> <p>See also: <code>erlang:match_spec_test/3</code>.</p>  
<div onmouseover="document.getElementById('ghlink-to_dets-2-id359311').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-to_dets-2-id359311').style.visibility = 'hidden';"> to_dets(Tab, DetsTab) -&gt; DetsTab</div> <h2 class="func-types-title">Types</h2>    
<p>Fills an already created/opened Dets table with the objects in the already opened ETS table named <code class="code">Tab</code>. The Dets table is emptied before the objects are inserted.</p>  
<div onmouseover="document.getElementById('ghlink-update_counter-3-id359413').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-update_counter-3-id359413').style.visibility = 'hidden';"> update_counter(Tab, Key, UpdateOp) -&gt; Result</div>
<div onmouseover="document.getElementById('ghlink-update_counter-4-id359288').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-update_counter-4-id359288').style.visibility = 'hidden';" id="update_counter-4"> update_counter(Tab, Key, UpdateOp, Default) -&gt; Result</div>
<div onmouseover="document.getElementById('ghlink-update_counter-3-id359471').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-update_counter-3-id359471').style.visibility = 'hidden';"> update_counter(Tab, Key, X3 :: [UpdateOp]) -&gt; [Result]</div>
<div onmouseover="document.getElementById('ghlink-update_counter-4-id359463').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-update_counter-4-id359463').style.visibility = 'hidden';"> update_counter(Tab, Key, X3 :: [UpdateOp], Default) -&gt; [Result]</div>
<div onmouseover="document.getElementById('ghlink-update_counter-3-id362513').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-update_counter-3-id362513').style.visibility = 'hidden';"> update_counter(Tab, Key, Incr) -&gt; Result</div>
<div onmouseover="document.getElementById('ghlink-update_counter-4-id359331').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-update_counter-4-id359331').style.visibility = 'hidden';"> update_counter(Tab, Key, Incr, Default) -&gt; Result</div> <h2 class="func-types-title">Types</h2>         
<p>This function provides an efficient way to update one or more counters, without the trouble of having to look up an object, update the object by incrementing an element, and insert the resulting object into the table again. (The update is done atomically, that is, no process can access the ETS table in the middle of the operation.)</p> <p>This function destructively update the object with key <code class="code">Key</code> in table <code class="code">Tab</code> by adding <code class="code">Incr</code> to the element at position <code class="code">Pos</code>. The new counter value is returned. If no position is specified, the element directly following key (<code class="code">&lt;keypos&gt;+1</code>) is updated.</p> <p>If a <code class="code">Threshold</code> is specified, the counter is reset to value <code class="code">SetValue</code> if the following conditions occur:</p> <ul> <li> <p><code class="code">Incr</code> is not negative (<code class="code">&gt;= 0</code>) and the result would be greater than (<code class="code">&gt;</code>) <code class="code">Threshold</code>.</p> </li> <li> <p><code class="code">Incr</code> is negative (<code class="code">&lt; 0</code>) and the result would be less than (<code class="code">&lt;</code>) <code class="code">Threshold</code>.</p> </li> </ul> <p>A list of <code class="code">UpdateOp</code> can be supplied to do many update operations within the object. The operations are carried out in the order specified in the list. If the same counter position occurs more than once in the list, the corresponding counter is thus updated many times, each time based on the previous result. The return value is a list of the new counter values from each update operation in the same order as in the operation list. If an empty list is specified, nothing is updated and an empty list is returned. If the function fails, no updates are done.</p> <p>The specified <code class="code">Key</code> is used to identify the object by either <strong>matching</strong> the key of an object in a <code class="code">set</code> table, or <strong>compare equal</strong> to the key of an object in an <code class="code">ordered_set</code> table (for details on the difference, see <code><a href="#lookup-2"><span class="code">lookup/2</span></a></code> and <code><a href="#new-2"><span class="code">new/2</span></a></code>).</p> <p>If a default object <code class="code">Default</code> is specified, it is used as the object to be updated if the key is missing from the table. The value in place of the key is ignored and replaced by the proper key value. The return value is as if the default object had not been used, that is, a single updated element or a list of them.</p> <p>The function fails with reason <code class="code">badarg</code> in the following situations:</p> <ul> <li>The table type is not <code class="code">set</code> or <code class="code">ordered_set</code>.</li> <li>No object with the correct key exists and no default object was supplied.</li> <li>The object has the wrong arity.</li> <li>The default object arity is smaller than <code class="code">&lt;keypos&gt;</code>.</li> <li>Any field from the default object that is updated is not an integer.</li> <li>The element to update is not an integer.</li> <li>The element to update is also the key.</li> <li>Any of <code class="code">Pos</code>, <code class="code">Incr</code>, <code class="code">Threshold</code>, or <code class="code">SetValue</code> is not an integer.</li> </ul>  
<div onmouseover="document.getElementById('ghlink-update_element-3-id362857').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-update_element-3-id362857').style.visibility = 'hidden';"> update_element(Tab, Key, ElementSpec :: {Pos, Value}) -&gt; boolean()</div>
<div onmouseover="document.getElementById('ghlink-update_element-3-id363337').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-update_element-3-id363337').style.visibility = 'hidden';"> update_element(Tab, Key, ElementSpec :: [{Pos, Value}]) -&gt;<br> boolean()</div> <h2 class="func-types-title">Types</h2>      
<p>This function provides an efficient way to update one or more elements within an object, without the trouble of having to look up, update, and write back the entire object.</p> <p>This function destructively updates the object with key <code class="code">Key</code> in table <code class="code">Tab</code>. The element at position <code class="code">Pos</code> is given the value <code class="code">Value</code>.</p> <p>A list of <code class="code">{Pos,Value}</code> can be supplied to update many elements within the same object. If the same position occurs more than once in the list, the last value in the list is written. If the list is empty or the function fails, no updates are done. The function is also atomic in the sense that other processes can never see any intermediate results.</p> <p>Returns <code class="code">true</code> if an object with key <code class="code">Key</code> is found, otherwise <code class="code">false</code>.</p> <p>The specified <code class="code">Key</code> is used to identify the object by either <strong>matching</strong> the key of an object in a <code class="code">set</code> table, or <strong>compare equal</strong> to the key of an object in an <code class="code">ordered_set</code> table (for details on the difference, see <code><a href="#lookup-2"><span class="code">lookup/2</span></a></code> and <code><a href="#new-2"><span class="code">new/2</span></a></code>).</p> <p>The function fails with reason <code class="code">badarg</code> in the following situations:</p> <ul> <li>The table type is not <code class="code">set</code> or <code class="code">ordered_set</code>.</li> <li> <code class="code">Pos</code> &lt; 1.</li> <li> <code class="code">Pos</code> &gt; object arity.</li> <li>The element to update is also the key.</li> </ul>  
<div onmouseover="document.getElementById('ghlink-whereis-1-id362759').style.visibility = 'visible';" onmouseout="document.getElementById('ghlink-whereis-1-id362759').style.visibility = 'hidden';"> whereis(TableName) -&gt; <code><a href="#type-tid">tid()</a></code> | undefined</div> <h2 class="func-types-title">Types</h2>   
<p>This function returns the <code><a href="#type-tid"><span class="code">tid()</span></a></code> of the named table identified by <code class="code">TableName</code>, or <code class="code">undefined</code> if no such table exists. The <code class="code">tid()</code> can be used in place of the table name in all operations, which is slightly faster since the name does not have to be resolved on each call.</p> <p>If the table is deleted, the <code class="code">tid()</code> will be invalid even if another named table is created with the same name.</p>  </div>
<div class="_attribution">
  <p class="_attribution-p">
     20102017 Ericsson AB<br>Licensed under the Apache License, Version 2.0.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
