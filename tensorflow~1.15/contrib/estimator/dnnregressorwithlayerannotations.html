
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>tf.contrib.estimator.DNNRegressorWithLayerAnnotations - TensorFlow 1.15 - W3cubDocs</title>
  
  <meta name="description" content=" A regressor for TensorFlow DNN models with layer annotations. ">
  <meta name="keywords" content="tf, contrib, estimator, dnnregressorwithlayerannotationsinstantiate, ordinary, usual, train, export, checkpoint, instantiate, with, annotations, same, configuration, theordinary, call, savedmodel, arguments, using, produced, for, dnnregressorwithlayerannotations, tensorflow, tensorflow~1.15">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/tensorflow~1.15/contrib/estimator/dnnregressorwithlayerannotations.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/tensorflow~1.15.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/tensorflow~1.15/" class="_nav-link" title="" style="margin-left:0;">TensorFlow 1.15</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _tensorflow">
				
				
<h1 class="devsite-page-title">tf.contrib.estimator.DNNRegressorWithLayerAnnotations</h1>       <p>A regressor for TensorFlow DNN models with layer annotations.</p> <pre class="devsite-click-to-copy prettyprint lang-py tfo-signature-link" translate="no" dir="ltr" data-language="cpp">
tf.contrib.estimator.DNNRegressorWithLayerAnnotations(
    hidden_units, feature_columns, model_dir=None, label_dimension=1,
    weight_column=None, optimizer='Adagrad', activation_fn=tf.nn.relu, dropout=None,
    input_layer_partitioner=None, config=None, warm_start_from=None,
    loss_reduction=losses.Reduction.SUM
)
</pre>  <p>This regressor is functionally identical to estimator.DNNRegressor as far as training and evaluating models is concerned. The key difference is that this classifier adds additional layer annotations, which can be used for computing Integrated Gradients.</p> <p>Integrated Gradients is a method for attributing a classifier's predictions to its input features (<a href="https://arxiv.org/pdf/1703.01365.pdf">https://arxiv.org/pdf/1703.01365.pdf</a>). Given an input instance, the method assigns attribution scores to individual features in proportion to the feature's importance to the classifier's prediction.</p> <p>See estimator.DNNRegressor for example code for training and evaluating models using this regressor.</p> <p>This regressor is checkpoint-compatible with estimator.DNNRegressor and therefore the following should work seamlessly:</p> <h1 id="instantiate_ordinary_estimator_as_usual" class="page-title" data-text="Instantiate ordinary estimator as usual." tabindex="0">Instantiate ordinary estimator as usual.</h1> <p>estimator = tf.estimator.DNNRegressor( config, feature_columns, hidden_units, ...)</p> <h1 id="train_estimator_export_checkpoint" class="page-title" data-text="Train estimator, export checkpoint." tabindex="0">Train estimator, export checkpoint.</h1> <p>tf.estimator.train_and_evaluate(estimator, ...)</p> <h1 id="instantiate_estimator_with_annotations_with_the_same_configuration_as_the" class="page-title" data-text="Instantiate estimator with annotations with the same configuration as the" tabindex="0">Instantiate estimator with annotations with the same configuration as the</h1> <h1 id="ordinary_estimator" class="page-title" data-text="ordinary estimator." tabindex="0">ordinary estimator.</h1> <p>estimator_with_annotations = ( tf.contrib.estimator.DNNRegressorWithLayerAnnotations( config, feature_columns, hidden_units, ...))</p> <h1 id="call_export_savedmodel_with_the_same_arguments_as_the_ordinary_estimator" class="page-title" data-text="Call export_savedmodel with the same arguments as the ordinary estimator," tabindex="0">Call export_savedmodel with the same arguments as the ordinary estimator,</h1> <h1 id="using_the_checkpoint_produced_for_the_ordinary_estimator" class="page-title" data-text="using the checkpoint produced for the ordinary estimator." tabindex="0">using the checkpoint produced for the ordinary estimator.</h1> <p>estimator_with_annotations.export_saved_model( export_dir_base, serving_input_receiver, ... checkpoint_path='/path/to/ordinary/estimator/checkpoint/model.ckpt-1234')</p>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Args</th></tr> 
<tr> <td> <code translate="no" dir="ltr">hidden_units</code> </td> <td> Iterable of number hidden units per layer. All layers are fully connected. Ex. <code translate="no" dir="ltr">[64, 32]</code> means first layer has 64 nodes and second one has 32. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">feature_columns</code> </td> <td> An iterable containing all the feature columns used by the model. All items in the set should be instances of classes derived from <code translate="no" dir="ltr">_FeatureColumn</code>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">model_dir</code> </td> <td> Directory to save model parameters, graph and etc. This can also be used to load checkpoints from the directory into a estimator to continue training a previously saved model. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">label_dimension</code> </td> <td> Number of regression targets per example. This is the size of the last dimension of the labels and logits <code translate="no" dir="ltr">Tensor</code> objects (typically, these have shape <code translate="no" dir="ltr">[batch_size, label_dimension]</code>). </td> </tr>
<tr> <td> <code translate="no" dir="ltr">weight_column</code> </td> <td> A string or a <code translate="no" dir="ltr">_NumericColumn</code> created by <a href="../../feature_column/numeric_column"><code translate="no" dir="ltr">tf.feature_column.numeric_column</code></a> defining feature column representing weights. It is used to down weight or boost examples during training. It will be multiplied by the loss of the example. If it is a string, it is used as a key to fetch weight tensor from the <code translate="no" dir="ltr">features</code>. If it is a <code translate="no" dir="ltr">_NumericColumn</code>, raw tensor is fetched by key <code translate="no" dir="ltr">weight_column.key</code>, then weight_column.normalizer_fn is applied on it to get weight tensor. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">optimizer</code> </td> <td> An instance of <code translate="no" dir="ltr">tf.Optimizer</code> used to train the model. Defaults to Adagrad optimizer. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">activation_fn</code> </td> <td> Activation function applied to each layer. If <code translate="no" dir="ltr">None</code>, will use <a href="../../nn/relu"><code translate="no" dir="ltr">tf.nn.relu</code></a>. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">dropout</code> </td> <td> When not <code translate="no" dir="ltr">None</code>, the probability we will drop out a given coordinate. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">input_layer_partitioner</code> </td> <td> Optional. Partitioner for input layer. Defaults to <code translate="no" dir="ltr">min_max_variable_partitioner</code> with <code translate="no" dir="ltr">min_slice_size</code> 64 &lt;&lt; 20. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">config</code> </td> <td> <code translate="no" dir="ltr">RunConfig</code> object to configure the runtime settings. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">warm_start_from</code> </td> <td> A string filepath to a checkpoint to warm-start from, or a <code translate="no" dir="ltr">WarmStartSettings</code> object to fully configure warm-starting. If the string filepath is provided instead of a <code translate="no" dir="ltr">WarmStartSettings</code>, then all weights are warm-started, and it is assumed that vocabularies and Tensor names are unchanged. </td> </tr>
<tr> <td> <code translate="no" dir="ltr">loss_reduction</code> </td> <td> One of <a href="../../losses/reduction"><code translate="no" dir="ltr">tf.losses.Reduction</code></a> except <code translate="no" dir="ltr">NONE</code>. Describes how to reduce training loss over batch. Defaults to <code translate="no" dir="ltr">SUM</code>. </td> </tr> </table>  
<table class="responsive fixed orange"> <colgroup>
<col width="214px">
<col>
</colgroup> <tr><th colspan="2">Returns</th></tr> <tr class="alt"> <td colspan="2"> DNNRegressor with layer annotations. </td> </tr> 
</table>  <devsite-page-rating position="footer" selected-rating="0" hover-rating-star="0"> </devsite-page-rating><div class="_attribution">
  <p class="_attribution-p">
    Â© 2020 The TensorFlow Authors. All rights reserved.<br>Licensed under the Creative Commons Attribution License 3.0.<br>Code samples licensed under the Apache 2.0 License.<br>
    <a href="https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/contrib/estimator/DNNRegressorWithLayerAnnotations" class="_attribution-link">https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/contrib/estimator/DNNRegressorWithLayerAnnotations</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
