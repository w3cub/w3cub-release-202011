
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Elb_target_group – Manage a Target Group for an Application or Network Load Balancer - Ansible 2.10 - W3cubDocs</title>
  
  <meta name="description" content=" Note ">
  <meta name="keywords" content="community, aws, elb, target, group, –, manage, for, application, or, network, load, balancer, ansible, ansible~2.10">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/ansible~2.10/collections/community/aws/elb_target_group_module.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e4ebd3a2a5652ff55173659804c4390a004917f3bdd17b5bb3ba78ea5c9c46fe181cadaac34517ccd815f5bdc982bbfe67179d6f4ac2f084ef2265e2a3dc8dc5.css" integrity="sha512-5OvToqVlL/VRc2WYBMQ5CgBJF/O90Xtbs7p46lycRv4YHK2qw0UXzNgV9b3Jgrv+Zxedb0rC8ITvImXio9yNxQ==" crossorigin="anonymous">
  <script type="text/javascript" integrity="sha512-EpkDeu98lN/jPKijllzVWdRg/dUSSMCaldYZNFz6bcNoBvpWRNz0HSTRQJ3ENmQc5Cuj1zDW1vHd7b0DzpOgyA==" crossorigin="anonymous" src="/assets/application-1299037aef7c94dfe33ca8a3965cd559d460fdd51248c09a95d619345cfa6dc36806fa5644dcf41d24d1409dc436641ce42ba3d730d6d6f1ddedbd03ce93a0c8.js"></script>
  <script src="/json/ansible~2.10.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body>
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible~2.10/" class="_nav-link" title="" style="margin-left:0;">Ansible 2.10</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="community-aws-elb-target-group-manage-a-target-group-for-an-application-or-network-load-balancer">community.aws.elb_target_group – Manage a target group for an Application or Network load balancer</h1> <div class="admonition note"> <p class="admonition-title">Note</p> <p>This plugin is part of the <a class="reference external" href="https://galaxy.ansible.com/community/aws">community.aws collection</a>.</p> <p>To install it use: <code>ansible-galaxy collection install community.aws</code>.</p> <p>To use it in a playbook, specify: <code>community.aws.elb_target_group</code>.</p> </div> <div class="versionadded"> <p><span class="versionmodified added">New in version 1.0.0: </span>of community.aws</p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements" id="id2">Requirements</a></li> <li><a class="reference internal" href="#parameters" id="id3">Parameters</a></li> <li><a class="reference internal" href="#notes" id="id4">Notes</a></li> <li><a class="reference internal" href="#examples" id="id5">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id6">Return Values</a></li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Manage an AWS Elastic Load Balancer target group. See <a class="reference external" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-target-groups.html">https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-target-groups.html</a> or <a class="reference external" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/network/load-balancer-target-groups.html">https://docs.aws.amazon.com/elasticloadbalancing/latest/network/load-balancer-target-groups.html</a> for details.</li> </ul>   <h2 id="requirements">Requirements</h2> <p>The below requirements are needed on the host that executes this module.</p> <ul class="simple"> <li>boto</li> <li>boto3</li> <li>python &gt;= 2.6</li> </ul>   <h2 id="parameters">Parameters</h2> <table class="documentation-table"> <tr> <th colspan="1">Parameter</th> <th>Choices/Defaults</th> <th width="100%">Comments</th> </tr> <tr> <td colspan="1">  <b>aws_access_key</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>AWS access key. If not set then the value of the AWS_ACCESS_KEY_ID, AWS_ACCESS_KEY or EC2_ACCESS_KEY environment variable is used.</div> <div>If <em>profile</em> is set this parameter is ignored.</div> <div>Passing the <em>aws_access_key</em> and <em>profile</em> options at the same time has been deprecated and the options will be made mutually exclusive after 2022-06-01.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: ec2_access_key, access_key</div> </td> </tr> <tr> <td colspan="1">  <b>aws_ca_bundle</b>  <div style="font-size: small"> <span style="color: purple">path</span> </div> </td> <td> </td> <td> <div>The location of a CA Bundle to use when validating SSL certificates.</div> <div>Only used for boto3 based modules.</div> <div>Note: The CA Bundle is read 'module' side and may need to be explicitly copied from the controller if not run locally.</div> </td> </tr> <tr> <td colspan="1">  <b>aws_config</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> </td> <td> </td> <td> <div>A dictionary to modify the botocore configuration.</div> <div>Parameters can be found at <a href="https://botocore.amazonaws.com/v1/documentation/api/latest/reference/config.html#botocore.config.Config">https://botocore.amazonaws.com/v1/documentation/api/latest/reference/config.html#botocore.config.Config</a>.</div> <div>Only the 'user_agent' key is used for boto modules. See <a href="http://boto.cloudhackers.com/en/latest/boto_config_tut.html#boto">http://boto.cloudhackers.com/en/latest/boto_config_tut.html#boto</a> for more boto configuration.</div> </td> </tr> <tr> <td colspan="1">  <b>aws_secret_key</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>AWS secret key. If not set then the value of the AWS_SECRET_ACCESS_KEY, AWS_SECRET_KEY, or EC2_SECRET_KEY environment variable is used.</div> <div>If <em>profile</em> is set this parameter is ignored.</div> <div>Passing the <em>aws_secret_key</em> and <em>profile</em> options at the same time has been deprecated and the options will be made mutually exclusive after 2022-06-01.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: ec2_secret_key, secret_key</div> </td> </tr> <tr> <td colspan="1">  <b>debug_botocore_endpoint_logs</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Use a botocore.endpoint logger to parse the unique (rather than total) "resource:action" API calls made during a task, outputing the set to the resource_actions key in the task results. Use the aws_resource_action callback to output to total list made during a playbook. The ANSIBLE_DEBUG_BOTOCORE_LOGS environment variable may also be used.</div> </td> </tr> <tr> <td colspan="1">  <b>deregistration_delay_timeout</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>The amount time for Elastic Load Balancing to wait before changing the state of a deregistering target from draining to unused. The range is 0-3600 seconds.</div> </td> </tr> <tr> <td colspan="1">  <b>ec2_url</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>Url to use to connect to EC2 or your Eucalyptus cloud (by default the module will use EC2 endpoints). Ignored for modules where region is required. Must be specified for all other modules if region is not used. If not set then the value of the EC2_URL environment variable, if any, is used.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: aws_endpoint_url, endpoint_url</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_interval</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>The approximate amount of time, in seconds, between health checks of an individual target.</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_path</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The ping path that is the destination on the targets for health checks. The path must be defined in order to set a health check.</div> <div>Requires the <em>health_check_protocol</em> parameter to be set.</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_port</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The port the load balancer uses when performing health checks on targets. Can be set to 'traffic-port' to match target port.</div> <div>When not defined will default to the port on which each target receives traffic from the load balancer.</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_protocol</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>http</li> <li>https</li> <li>tcp</li> <li>tls</li> <li>udp</li> <li>tcp_udp</li> <li>HTTP</li> <li>HTTPS</li> <li>TCP</li> <li>TLS</li> <li>UDP</li> <li>TCP_UDP</li> </ul> </td> <td> <div>The protocol the load balancer uses when performing health checks on targets.</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_timeout</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>The amount of time, in seconds, during which no response from a target means a failed health check.</div> </td> </tr> <tr> <td colspan="1">  <b>healthy_threshold_count</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>The number of consecutive health checks successes required before considering an unhealthy target healthy.</div> </td> </tr> <tr> <td colspan="1">  <b>modify_targets</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>Whether or not to alter existing targets in the group to match what is passed with the module</div> </td> </tr> <tr> <td colspan="1">  <b>name</b>  <div style="font-size: small"> <span style="color: purple">string</span> / <span style="color: red">required</span> </div> </td> <td> </td> <td> <div>The name of the target group.</div> </td> </tr> <tr> <td colspan="1">  <b>port</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>The port on which the targets receive traffic. This port is used unless you specify a port override when registering the target. Required if <em>state</em> is <code>present</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>profile</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>Uses a boto profile. Only works with boto &gt;= 2.24.0.</div> <div>Using <em>profile</em> will override <em>aws_access_key</em>, <em>aws_secret_key</em> and <em>security_token</em> and support for passing them at the same time as <em>profile</em> has been deprecated.</div> <div>
<em>aws_access_key</em>, <em>aws_secret_key</em> and <em>security_token</em> will be made mutually exclusive with <em>profile</em> after 2022-06-01.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: aws_profile</div> </td> </tr> <tr> <td colspan="1">  <b>protocol</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>http</li> <li>https</li> <li>tcp</li> <li>tls</li> <li>udp</li> <li>tcp_udp</li> <li>HTTP</li> <li>HTTPS</li> <li>TCP</li> <li>TLS</li> <li>UDP</li> <li>TCP_UDP</li> </ul> </td> <td> <div>The protocol to use for routing traffic to the targets. Required when <em>state</em> is <code>present</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>purge_tags</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>If yes, existing tags will be purged from the resource to match exactly what is defined by <em>tags</em> parameter. If the tag parameter is not set then tags will not be modified.</div> </td> </tr> <tr> <td colspan="1">  <b>region</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The AWS region to use. If not specified then the value of the AWS_REGION or EC2_REGION environment variable, if any, is used. See <a href="http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region">http://docs.aws.amazon.com/general/latest/gr/rande.html#ec2_region</a>
</div> <div style="font-size: small; color: darkgreen">
<br>aliases: aws_region, ec2_region</div> </td> </tr> <tr> <td colspan="1">  <b>security_token</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>AWS STS security token. If not set then the value of the AWS_SECURITY_TOKEN or EC2_SECURITY_TOKEN environment variable is used.</div> <div>If <em>profile</em> is set this parameter is ignored.</div> <div>Passing the <em>security_token</em> and <em>profile</em> options at the same time has been deprecated and the options will be made mutually exclusive after 2022-06-01.</div> <div style="font-size: small; color: darkgreen">
<br>aliases: aws_security_token, access_token</div> </td> </tr> <tr> <td colspan="1">  <b>state</b>  <div style="font-size: small"> <span style="color: purple">string</span> / <span style="color: red">required</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>present</li> <li>absent</li> </ul> </td> <td> <div>Create or destroy the target group.</div> </td> </tr> <tr> <td colspan="1">  <b>stickiness_enabled</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li>yes</li> </ul> </td> <td> <div>Indicates whether sticky sessions are enabled.</div> </td> </tr> <tr> <td colspan="1">  <b>stickiness_lb_cookie_duration</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>The time period, in seconds, during which requests from a client should be routed to the same target. After this time period expires, the load balancer-generated cookie is considered stale. The range is 1 second to 1 week (604800 seconds).</div> </td> </tr> <tr> <td colspan="1">  <b>stickiness_type</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The type of sticky sessions.</div> <div>If not set AWS will default to <code>lb_cookie</code> for Application Load Balancers or <code>source_ip</code> for Network Load Balancers.</div> </td> </tr> <tr> <td colspan="1">  <b>successful_response_codes</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The HTTP codes to use when checking for a successful response from a target.</div> <div>Accepts multiple values (for example, "200,202") or a range of values (for example, "200-299").</div> <div>Requires the <em>health_check_protocol</em> parameter to be set.</div> </td> </tr> <tr> <td colspan="1">  <b>tags</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> </td> <td> </td> <td> <div>A dictionary of one or more tags to assign to the target group.</div> </td> </tr> <tr> <td colspan="1">  <b>target_type</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>instance</li> <li>ip</li> <li>lambda</li> </ul> </td> <td> <div>The type of target that you must specify when registering targets with this target group. The possible values are <code>instance</code> (targets are specified by instance ID), <code>ip</code> (targets are specified by IP address) or <code>lambda</code> (target is specified by ARN). Note that you can't specify targets for a target group using more than one type. Target type lambda only accept one target. When more than one target is specified, only the first one is used. All additional targets are ignored. If the target type is ip, specify IP addresses from the subnets of the virtual private cloud (VPC) for the target group, the RFC 1918 range (10.0.0.0/8, 172.16.0.0/12, and 192.168.0.0/16), and the RFC 6598 range (100.64.0.0/10). You can't specify publicly routable IP addresses.</div> <div>The default behavior is <code>instance</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>targets</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=dictionary</span> </div> </td> <td> </td> <td> <div>A list of targets to assign to the target group. This parameter defaults to an empty list. Unless you set the 'modify_targets' parameter then all existing targets will be removed from the group. The list should be an Id and a Port parameter. See the Examples for detail.</div> </td> </tr> <tr> <td colspan="1">  <b>unhealthy_threshold_count</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> </td> <td> <div>The number of consecutive health check failures required before considering a target unhealthy.</div> </td> </tr> <tr> <td colspan="1">  <b>validate_certs</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li>no</li> <li><div style="color: blue">
<b>yes</b> ←</div></li> </ul> </td> <td> <div>When set to "no", SSL certificates will not be validated for boto versions &gt;= 2.6.0.</div> </td> </tr> <tr> <td colspan="1">  <b>vpc_id</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td> </td> <td> <div>The identifier of the virtual private cloud (VPC). Required when <em>state</em> is <code>present</code>.</div> </td> </tr> <tr> <td colspan="1">  <b>wait</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td> <ul style="margin: 0; padding: 0">
<b>Choices:</b> <li><div style="color: blue">
<b>no</b> ←</div></li> <li>yes</li> </ul> </td> <td> <div>Whether or not to wait for the target group.</div> </td> </tr> <tr> <td colspan="1">  <b>wait_timeout</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td> <b>Default:</b><br><div style="color: blue">200</div> </td> <td> <div>The time to wait for the target group.</div> </td> </tr> </table> <br>  <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="admonition-title">Note</p> <ul class="simple"> <li>Once a target group has been created, only its health check can then be modified using subsequent calls</li> <li>If parameters are not set within the module, the following environment variables can be used in decreasing order of precedence <code>AWS_URL</code> or <code>EC2_URL</code>, <code>AWS_PROFILE</code> or <code>AWS_DEFAULT_PROFILE</code>, <code>AWS_ACCESS_KEY_ID</code> or <code>AWS_ACCESS_KEY</code> or <code>EC2_ACCESS_KEY</code>, <code>AWS_SECRET_ACCESS_KEY</code> or <code>AWS_SECRET_KEY</code> or <code>EC2_SECRET_KEY</code>, <code>AWS_SECURITY_TOKEN</code> or <code>EC2_SECURITY_TOKEN</code>, <code>AWS_REGION</code> or <code>EC2_REGION</code>, <code>AWS_CA_BUNDLE</code>
</li> <li>Ansible uses the boto configuration file (typically ~/.boto) if no credentials are provided. See <a class="reference external" href="https://boto.readthedocs.io/en/latest/boto_config_tut.html">https://boto.readthedocs.io/en/latest/boto_config_tut.html</a>
</li> <li>
<code>AWS_REGION</code> or <code>EC2_REGION</code> can be typically be used to specify the AWS region, when required, but this can also be configured in the boto config file</li> </ul> </div>   <h2 id="examples">Examples</h2> <pre data-language="yaml"># Note: These examples do not set authentication details, see the AWS Guide for details.

- name: Create a target group with a default health check
  community.aws.elb_target_group:
    name: mytargetgroup
    protocol: http
    port: 80
    vpc_id: vpc-01234567
    state: present

- name: Modify the target group with a custom health check
  community.aws.elb_target_group:
    name: mytargetgroup
    protocol: http
    port: 80
    vpc_id: vpc-01234567
    health_check_protocol: http
    health_check_path: /health_check
    health_check_port: 80
    successful_response_codes: 200
    health_check_interval: 15
    health_check_timeout: 3
    healthy_threshold_count: 4
    unhealthy_threshold_count: 3
    state: present

- name: Delete a target group
  community.aws.elb_target_group:
    name: mytargetgroup
    state: absent

- name: Create a target group with instance targets
  community.aws.elb_target_group:
    name: mytargetgroup
    protocol: http
    port: 81
    vpc_id: vpc-01234567
    health_check_protocol: http
    health_check_path: /
    successful_response_codes: "200,250-260"
    targets:
      - Id: i-01234567
        Port: 80
      - Id: i-98765432
        Port: 80
    state: present
    wait_timeout: 200
    wait: True

- name: Create a target group with IP address targets
  community.aws.elb_target_group:
    name: mytargetgroup
    protocol: http
    port: 81
    vpc_id: vpc-01234567
    health_check_protocol: http
    health_check_path: /
    successful_response_codes: "200,250-260"
    target_type: ip
    targets:
      - Id: 10.0.0.10
        Port: 80
        AvailabilityZone: all
      - Id: 10.0.0.20
        Port: 80
    state: present
    wait_timeout: 200
    wait: True

# Using lambda as targets require that the target group
# itself is allow to invoke the lambda function.
# therefore you need first to create an empty target group
# to receive its arn, second, allow the target group
# to invoke the lambda function and third, add the target
# to the target group
- name: first, create empty target group
  community.aws.elb_target_group:
    name: my-lambda-targetgroup
    target_type: lambda
    state: present
    modify_targets: False
  register: out

- name: second, allow invoke of the lambda
  community.aws.lambda_policy:
    state: "{{ state | default('present') }}"
    function_name: my-lambda-function
    statement_id: someID
    action: lambda:InvokeFunction
    principal: elasticloadbalancing.amazonaws.com
    source_arn: "{{ out.target_group_arn }}"

- name: third, add target
  community.aws.elb_target_group:
    name: my-lambda-targetgroup
    target_type: lambda
    state: present
    targets:
        - Id: arn:aws:lambda:eu-central-1:123456789012:function:my-lambda-function
</pre>   <h2 id="return-values">Return Values</h2> <p>Common return values are documented <a class="reference internal" href="../../../reference_appendices/common_return_values#common-return-values"><span class="std std-ref">here</span></a>, the following are the fields unique to this module:</p> <table class="documentation-table"> <tr> <th colspan="1">Key</th> <th>Returned</th> <th width="100%">Description</th> </tr> <tr> <td colspan="1">  <b>deregistration_delay_timeout_seconds</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td>when state present</td> <td> <div>The amount time for Elastic Load Balancing to wait before changing the state of a deregistering target from draining to unused.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">300</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_interval_seconds</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td>when state present</td> <td> <div>The approximate amount of time, in seconds, between health checks of an individual target.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">30</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_path</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when state present</td> <td> <div>The destination for the health check request.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">/index.html</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_port</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when state present</td> <td> <div>The port to use to connect with the target.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">traffic-port</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_protocol</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when state present</td> <td> <div>The protocol to use to connect with the target.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">HTTP</div> </td> </tr> <tr> <td colspan="1">  <b>health_check_timeout_seconds</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td>when state present</td> <td> <div>The amount of time, in seconds, during which no response means a failed health check.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">5</div> </td> </tr> <tr> <td colspan="1">  <b>healthy_threshold_count</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td>when state present</td> <td> <div>The number of consecutive health checks successes required before considering an unhealthy target healthy.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">5</div> </td> </tr> <tr> <td colspan="1">  <b>load_balancer_arns</b>  <div style="font-size: small"> <span style="color: purple">list</span> / <span style="color: purple">elements=string</span> </div> </td> <td>when state present</td> <td> <div>The Amazon Resource Names (ARN) of the load balancers that route traffic to this target group.</div> <br> </td> </tr> <tr> <td colspan="1">  <b>matcher</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> </td> <td>when state present</td> <td> <div>The HTTP codes to use when checking for a successful response from a target.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">{'http_code': '200'}</div> </td> </tr> <tr> <td colspan="1">  <b>port</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td>when state present</td> <td> <div>The port on which the targets are listening.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">80</div> </td> </tr> <tr> <td colspan="1">  <b>protocol</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when state present</td> <td> <div>The protocol to use for routing traffic to the targets.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">HTTP</div> </td> </tr> <tr> <td colspan="1">  <b>stickiness_enabled</b>  <div style="font-size: small"> <span style="color: purple">boolean</span> </div> </td> <td>when state present</td> <td> <div>Indicates whether sticky sessions are enabled.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">True</div> </td> </tr> <tr> <td colspan="1">  <b>stickiness_lb_cookie_duration_seconds</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td>when state present</td> <td> <div>The time period, in seconds, during which requests from a client should be routed to the same target.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">86400</div> </td> </tr> <tr> <td colspan="1">  <b>stickiness_type</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when state present</td> <td> <div>The type of sticky sessions.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">lb_cookie</div> </td> </tr> <tr> <td colspan="1">  <b>tags</b>  <div style="font-size: small"> <span style="color: purple">dictionary</span> </div> </td> <td>when state present</td> <td> <div>The tags attached to the target group.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">{ 'Tag': 'Example' }</div> </td> </tr> <tr> <td colspan="1">  <b>target_group_arn</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when state present</td> <td> <div>The Amazon Resource Name (ARN) of the target group.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">arn:aws:elasticloadbalancing:ap-southeast-2:01234567890:targetgroup/mytargetgroup/aabbccddee0044332211</div> </td> </tr> <tr> <td colspan="1">  <b>target_group_name</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when state present</td> <td> <div>The name of the target group.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">mytargetgroup</div> </td> </tr> <tr> <td colspan="1">  <b>unhealthy_threshold_count</b>  <div style="font-size: small"> <span style="color: purple">integer</span> </div> </td> <td>when state present</td> <td> <div>The number of consecutive health check failures required before considering the target unhealthy.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">2</div> </td> </tr> <tr> <td colspan="1">  <b>vpc_id</b>  <div style="font-size: small"> <span style="color: purple">string</span> </div> </td> <td>when state present</td> <td> <div>The ID of the VPC for the targets.</div> <br> <div style="font-size: smaller"><b>Sample:</b></div> <div style="font-size: smaller; color: blue; word-wrap: break-word; word-break: break-all;">vpc-0123456</div> </td> </tr> </table> <br><br> <h3 id="authors">Authors</h3> <ul class="simple"> <li>Rob White (@wimnat)</li> </ul>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2018 Michael DeHaan<br>© 2018–2019 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/2.10/collections/community/aws/elb_target_group_module.html" class="_attribution-link">https://docs.ansible.com/ansible/2.10/collections/community/aws/elb_target_group_module.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
