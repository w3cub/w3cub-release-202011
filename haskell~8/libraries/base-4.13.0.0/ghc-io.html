
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>GHC.IO - Haskell 8 - W3cubDocs</title>
  
  <meta name="description" content=" Definitions for the IO monad and its friends. ">
  <meta name="keywords" content="ghc, io, haskell, haskell~8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/haskell~8/libraries/base-4.13.0.0/ghc-io.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/haskell~8.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/haskell~8/" class="_nav-link" title="" style="margin-left:0;">Haskell 8</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _haskell">
				
				
<h1 class="caption">GHC.IO</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th valign="top">Copyright</th>
<td>(c) The University of Glasgow 1994-2002</td>
</tr>
<tr>
<th>License</th>
<td>see libraries/base/LICENSE</td>
</tr>
<tr>
<th>Maintainer</th>
<td>cvs-ghc@haskell.org</td>
</tr>
<tr>
<th>Stability</th>
<td>internal</td>
</tr>
<tr>
<th>Portability</th>
<td>non-portable (GHC Extensions)</td>
</tr>
<tr>
<th>Safe Haskell</th>
<td>Unsafe</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell2010</td>
</tr>
</table>
<div id="description">
<h4 class="caption">Description</h4>
<p>Definitions for the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> monad and its friends.</p>
</div>
<p class="src">newtype <a id="t:IO" class="def">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/ghc-prim-0.5.3/src/GHC-Types.html#IO" class="link">Source</a> </p>
<p>A value of type <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a> a</code> is a computation which, when performed, does some I/O before returning a value of type <code>a</code>.</p>
<p>There is really only one way to "perform" an I/O action: bind it to <code>Main.main</code> in your program. When your program is run, the I/O will be performed. It isn't possible to perform I/O from an arbitrary function, unless that function is itself in the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> monad and called at some point, directly or indirectly, from <code>Main.main</code>.</p>
<p><code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> is a monad, so <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> actions can be combined using either the do-notation or the <code><a href="prelude#v:-62--62-" title="Prelude">&gt;&gt;</a></code> and <code><a href="prelude#v:-62--62--61-" title="Prelude">&gt;&gt;=</a></code> operations from the <code><a href="prelude#v:Monad" title="Prelude">Monad</a></code> class.</p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table><tr>
<td class="src">
<a id="v:IO" class="def">IO</a> (<a href="ghc-exts#t:State-35-" title="GHC.Exts">State#</a> <a href="control-monad-st-safe#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> -&gt; (# <a href="ghc-exts#t:State-35-" title="GHC.Exts">State#</a> <a href="control-monad-st-safe#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a>, a #))</td>
<td class="doc empty"> </td>
</tr></table>
</div>
<div class="subs instances">
<h5 class="instances details-toggle-control details-toggle" data-details-id="i:IO">Instances</h5>
<details id="i:IO" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table>
<tr>
<td class="src clearfix">
 <a href="control-monad#t:Monad" title="Control.Monad">Monad</a> <a href="ghc-io#t:IO" title="GHC.IO">IO</a> </td>
<td class="doc"><p><span class="version">Since: base-2.1</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:Monad:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-base">GHC.Base</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; (a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#%3E%3E%3D" class="link">Source</a> </p>
<p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#%3E%3E" class="link">Source</a> </p>
<p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#return" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="data-functor#t:Functor" title="Data.Functor">Functor</a> <a href="ghc-io#t:IO" title="GHC.IO">IO</a> </td>
<td class="doc"><p><span class="version">Since: base-2.1</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-base">GHC.Base</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#fmap" class="link">Source</a> </p>
<p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#%3C%24" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="control-monad-fix#t:MonadFix" title="Control.Monad.Fix">MonadFix</a> <a href="ghc-io#t:IO" title="GHC.IO">IO</a> </td>
<td class="doc"><p><span class="version">Since: base-2.1</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:MonadFix:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="control-monad-fix">Control.Monad.Fix</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:mfix">mfix</a> :: (a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Control-Monad-Fix.html#mfix" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="control-monad-fail#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> <a href="ghc-io#t:IO" title="GHC.IO">IO</a> </td>
<td class="doc"><p><span class="version">Since: base-4.9.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:MonadFail:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="control-monad-fail">Control.Monad.Fail</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:fail">fail</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Control-Monad-Fail.html#fail" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="control-applicative#t:Applicative" title="Control.Applicative">Applicative</a> <a href="ghc-io#t:IO" title="GHC.IO">IO</a> </td>
<td class="doc"><p><span class="version">Since: base-2.1</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:Applicative:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-base">GHC.Base</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#pure" class="link">Source</a> </p>
<p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> (a -&gt; b) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#%3C%2A%3E" class="link">Source</a> </p>
<p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> c <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#liftA2" class="link">Source</a> </p>
<p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#%2A%3E" class="link">Source</a> </p>
<p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#%3C%2A" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="ghc-ghci#t:GHCiSandboxIO" title="GHC.GHCi">GHCiSandboxIO</a> <a href="ghc-io#t:IO" title="GHC.IO">IO</a> </td>
<td class="doc"><p><span class="version">Since: base-4.4.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:GHCiSandboxIO:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-ghci">GHC.GHCi</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:ghciStepIO">ghciStepIO</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-GHCi.html#ghciStepIO" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="control-monad#t:MonadPlus" title="Control.Monad">MonadPlus</a> <a href="ghc-io#t:IO" title="GHC.IO">IO</a> </td>
<td class="doc"><p><span class="version">Since: base-4.9.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:MonadPlus:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-base">GHC.Base</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:mzero">mzero</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#mzero" class="link">Source</a> </p>
<p class="src"><a href="#v:mplus">mplus</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#mplus" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="control-applicative#t:Alternative" title="Control.Applicative">Alternative</a> <a href="ghc-io#t:IO" title="GHC.IO">IO</a> </td>
<td class="doc"><p><span class="version">Since: base-4.9.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:Alternative:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-base">GHC.Base</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:empty">empty</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#empty" class="link">Source</a> </p>
<p class="src"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#%3C%7C%3E" class="link">Source</a> </p>
<p class="src"><a href="#v:some">some</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> [a] <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#some" class="link">Source</a> </p>
<p class="src"><a href="#v:many">many</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> [a] <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#many" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="control-monad-io-class#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> <a href="ghc-io#t:IO" title="GHC.IO">IO</a> </td>
<td class="doc"><p><span class="version">Since: base-4.9.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:MonadIO:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="control-monad-io-class">Control.Monad.IO.Class</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:liftIO">liftIO</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Control-Monad-IO-Class.html#liftIO" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="prelude#t:Semigroup" title="Prelude">Semigroup</a> a =&gt; <a href="prelude#t:Semigroup" title="Prelude">Semigroup</a> (<a href="ghc-io#t:IO" title="GHC.IO">IO</a> a) </td>
<td class="doc"><p><span class="version">Since: base-4.10.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:Semigroup:10"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-base">GHC.Base</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#%3C%3E" class="link">Source</a> </p>
<p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="data-list-nonempty#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="ghc-io#t:IO" title="GHC.IO">IO</a> a) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#sconcat" class="link">Source</a> </p>
<p class="src"><a href="#v:stimes">stimes</a> :: <a href="prelude#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#stimes" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="data-monoid#t:Monoid" title="Data.Monoid">Monoid</a> a =&gt; <a href="data-monoid#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="ghc-io#t:IO" title="GHC.IO">IO</a> a) </td>
<td class="doc"><p><span class="version">Since: base-4.9.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:Monoid:11"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-base">GHC.Base</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:mempty">mempty</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#mempty" class="link">Source</a> </p>
<p class="src"><a href="#v:mappend">mappend</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#mappend" class="link">Source</a> </p>
<p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="ghc-io#t:IO" title="GHC.IO">IO</a> a] -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#mconcat" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 a ~ () =&gt; <a href="text-printf#t:HPrintfType" title="Text.Printf">HPrintfType</a> (<a href="ghc-io#t:IO" title="GHC.IO">IO</a> a) </td>
<td class="doc"><p><span class="version">Since: base-4.7.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:HPrintfType:12"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="text-printf">Text.Printf</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:hspr">hspr</a> :: <a href="ghc-io-handle#t:Handle" title="GHC.IO.Handle">Handle</a> -&gt; <a href="data-string#t:String" title="Data.String">String</a> -&gt; [UPrintf] -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a</p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 a ~ () =&gt; <a href="text-printf#t:PrintfType" title="Text.Printf">PrintfType</a> (<a href="ghc-io#t:IO" title="GHC.IO">IO</a> a) </td>
<td class="doc"><p><span class="version">Since: base-4.7.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:IO:PrintfType:13"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="text-printf">Text.Printf</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:spr">spr</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; [UPrintf] -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a</p>
</div></details></td></tr>
</table></details>
</div>
<p class="src"><a id="v:unIO" class="def">unIO</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-exts#t:State-35-" title="GHC.Exts">State#</a> <a href="control-monad-st-safe#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> -&gt; (# <a href="ghc-exts#t:State-35-" title="GHC.Exts">State#</a> <a href="control-monad-st-safe#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a>, a #) <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Base.html#unIO" class="link">Source</a> </p>
<p class="src"><a id="v:failIO" class="def">failIO</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#failIO" class="link">Source</a> </p>
<p class="src"><a id="v:liftIO" class="def">liftIO</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-exts#t:State-35-" title="GHC.Exts">State#</a> <a href="control-monad-st-safe#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> -&gt; <a href="ghc-st#t:STret" title="GHC.ST">STret</a> <a href="control-monad-st-safe#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#liftIO" class="link">Source</a> </p>
<p class="src"><a id="v:mplusIO" class="def">mplusIO</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#mplusIO" class="link">Source</a> </p>
<p class="src"><a id="v:unsafePerformIO" class="def">unsafePerformIO</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO-Unsafe.html#unsafePerformIO" class="link">Source</a> </p>
<p>This is the "back door" into the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> monad, allowing <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> computation to be performed at any time. For this to be safe, the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> computation should be free of side effects and independent of its environment.</p>
<p>If the I/O computation wrapped in <code><a href="ghc-io#v:unsafePerformIO" title="GHC.IO">unsafePerformIO</a></code> performs side effects, then the relative order in which those side effects take place (relative to the main I/O trunk, or other calls to <code><a href="ghc-io#v:unsafePerformIO" title="GHC.IO">unsafePerformIO</a></code>) is indeterminate. Furthermore, when using <code><a href="ghc-io#v:unsafePerformIO" title="GHC.IO">unsafePerformIO</a></code> to cause side-effects, you should take the following precautions to ensure the side effects are performed as many times as you expect them to be. Note that these precautions are necessary for GHC, but may not be sufficient, and other compilers may require different precautions:</p>
<ul>
<li>Use <code>{-# NOINLINE foo #-}</code> as a pragma on any function <code>foo</code> that calls <code><a href="ghc-io#v:unsafePerformIO" title="GHC.IO">unsafePerformIO</a></code>. If the call is inlined, the I/O may be performed more than once.</li>
<li>Use the compiler flag <code>-fno-cse</code> to prevent common sub-expression elimination being performed on the module, which might combine two side effects that were meant to be separate. A good example is using multiple global variables (like <code>test</code> in the example below).</li>
<li>Make sure that the either you switch off let-floating (<code>-fno-full-laziness</code>), or that the call to <code><a href="ghc-io#v:unsafePerformIO" title="GHC.IO">unsafePerformIO</a></code> cannot float outside a lambda. For example, if you say: <code>
           f x = unsafePerformIO (newIORef [])
        </code> you may get only one reference cell shared between all calls to <code>f</code>. Better would be <code>
           f x = unsafePerformIO (newIORef [x])
        </code> because now it can't float outside the lambda.</li>
</ul>
<p>It is less well known that <code><a href="ghc-io#v:unsafePerformIO" title="GHC.IO">unsafePerformIO</a></code> is not type safe. For example:</p>
<pre>    test :: IORef [a]
    test = unsafePerformIO $ newIORef []

    main = do
            writeIORef test [42]
            bang &lt;- readIORef test
            print (bang :: [Char])</pre>
<p>This program will core dump. This problem with polymorphic references is well known in the ML community, and does not arise with normal monadic use of references. There is no easy way to make it impossible once you use <code><a href="ghc-io#v:unsafePerformIO" title="GHC.IO">unsafePerformIO</a></code>. Indeed, it is possible to write <code>coerce :: a -&gt; b</code> with the help of <code><a href="ghc-io#v:unsafePerformIO" title="GHC.IO">unsafePerformIO</a></code>. So be careful!</p>
<p class="src"><a id="v:unsafeInterleaveIO" class="def">unsafeInterleaveIO</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO-Unsafe.html#unsafeInterleaveIO" class="link">Source</a> </p>
<p><code><a href="ghc-io#v:unsafeInterleaveIO" title="GHC.IO">unsafeInterleaveIO</a></code> allows an <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> computation to be deferred lazily. When passed a value of type <code>IO a</code>, the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> will only be performed when the value of the <code>a</code> is demanded. This is used to implement lazy file reading, see <code><a href="system-io#v:hGetContents" title="System.IO">hGetContents</a></code>.</p>
<p class="src"><a id="v:unsafeDupablePerformIO" class="def">unsafeDupablePerformIO</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO-Unsafe.html#unsafeDupablePerformIO" class="link">Source</a> </p>
<p>This version of <code><a href="ghc-io#v:unsafePerformIO" title="GHC.IO">unsafePerformIO</a></code> is more efficient because it omits the check that the IO is only being performed by a single thread. Hence, when you use <code><a href="ghc-io#v:unsafeDupablePerformIO" title="GHC.IO">unsafeDupablePerformIO</a></code>, there is a possibility that the IO action may be performed multiple times (on a multiprocessor), and you should therefore ensure that it gives the same results each time. It may even happen that one of the duplicated IO actions is only run partially, and then interrupted in the middle without an exception being raised. Therefore, functions like <code><a href="control-exception#v:bracket" title="Control.Exception">bracket</a></code> cannot be used safely within <code><a href="ghc-io#v:unsafeDupablePerformIO" title="GHC.IO">unsafeDupablePerformIO</a></code>.</p>
<p><span class="version">Since: base-4.4.0.0</span></p>
<p class="src"><a id="v:unsafeDupableInterleaveIO" class="def">unsafeDupableInterleaveIO</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO-Unsafe.html#unsafeDupableInterleaveIO" class="link">Source</a> </p>
<p><code><a href="ghc-io#v:unsafeDupableInterleaveIO" title="GHC.IO">unsafeDupableInterleaveIO</a></code> allows an <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> computation to be deferred lazily. When passed a value of type <code>IO a</code>, the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> will only be performed when the value of the <code>a</code> is demanded.</p>
<p>The computation may be performed multiple times by different threads, possibly at the same time. To ensure that the computation is performed only once, use <code><a href="ghc-io#v:unsafeInterleaveIO" title="GHC.IO">unsafeInterleaveIO</a></code> instead.</p>
<p class="src"><a id="v:noDuplicate" class="def">noDuplicate</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO-Unsafe.html#noDuplicate" class="link">Source</a> </p>
<p>Ensures that the suspensions under evaluation by the current thread are unique; that is, the current thread is not evaluating anything that is also under evaluation by another thread that has also executed <code><a href="ghc-io#v:noDuplicate" title="GHC.IO">noDuplicate</a></code>.</p>
<p>This operation is used in the definition of <code><a href="ghc-io#v:unsafePerformIO" title="GHC.IO">unsafePerformIO</a></code> to prevent the IO action from being executed multiple times, which is usually undesirable.</p>
<p class="src"><a id="v:stToIO" class="def">stToIO</a> :: <a href="control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a> <a href="control-monad-st-safe#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#stToIO" class="link">Source</a> </p>
<p>Embed a strict state thread in an <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> action. The <code><a href="control-monad-st-safe#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a></code> parameter indicates that the internal state used by the <code><a href="control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a></code> computation is a special one supplied by the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> monad, and thus distinct from those used by invocations of <code><a href="control-monad-st-safe#v:runST" title="Control.Monad.ST.Safe">runST</a></code>.</p>
<p class="src"><a id="v:ioToST" class="def">ioToST</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a> <a href="control-monad-st-safe#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#ioToST" class="link">Source</a> </p>
<p>Convert an <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> action into an <code><a href="control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a></code> action. The type of the result is constrained to use a <code><a href="control-monad-st-safe#t:RealWorld" title="Control.Monad.ST.Safe">RealWorld</a></code> state thread, and therefore the result cannot be passed to <code><a href="control-monad-st-safe#v:runST" title="Control.Monad.ST.Safe">runST</a></code>.</p>
<p class="src"><a id="v:unsafeIOToST" class="def">unsafeIOToST</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a> s a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#unsafeIOToST" class="link">Source</a> </p>
<p>Convert an <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> action to an <code><a href="control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a></code> action. This relies on <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> and <code><a href="control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a></code> having the same representation modulo the constraint on the state thread type parameter.</p>
<p class="src"><a id="v:unsafeSTToIO" class="def">unsafeSTToIO</a> :: <a href="control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a> s a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#unsafeSTToIO" class="link">Source</a> </p>
<p>Convert an <code><a href="control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a></code> action to an <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> action. This relies on <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> and <code><a href="control-monad-st-safe#t:ST" title="Control.Monad.ST.Safe">ST</a></code> having the same representation modulo the constraint on the state thread type parameter.</p>
<p>For an example demonstrating why this is unsafe, see <a href="https://mail.haskell.org/pipermail/haskell-cafe/2009-April/060719.html">https://mail.haskell.org/pipermail/haskell-cafe/2009-April/060719.html</a></p>
<p class="src">type <a id="t:FilePath" class="def">FilePath</a> = <a href="data-string#t:String" title="Data.String">String</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#FilePath" class="link">Source</a> </p>
<p>File and directory names are values of type <code><a href="data-string#t:String" title="Data.String">String</a></code>, whose precise meaning is operating system dependent. Files can be opened, yielding a handle which can then be used to operate on the contents of that file.</p>
<p class="src"><a id="v:catch" class="def">catch</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#catch" class="link">Source</a> </p>
<div class="subs arguments">
<h4 class="caption">Arguments</h4>
<table>
<tr>
<td class="src">:: <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src">=&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a</td>
<td class="doc"><p>The computation to run</p></td>
</tr>
<tr>
<td class="src">-&gt; (e -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a)</td>
<td class="doc"><p>Handler to invoke if an exception is raised</p></td>
</tr>
<tr>
<td class="src">-&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a</td>
<td class="doc empty"> </td>
</tr>
</table>
</div>
<p>This is the simplest of the exception-catching functions. It takes a single argument, runs it, and if an exception is raised the "handler" is executed, with the value of the exception passed as an argument. Otherwise, the result is returned as normal. For example:</p>
<pre>  catch (readFile f)
        (\e -&gt; do let err = show (e :: IOException)
                  hPutStr stderr ("Warning: Couldn't open " ++ f ++ ": " ++ err)
                  return "")</pre>
<p>Note that we have to give a type signature to <code>e</code>, or the program will not typecheck as the type is ambiguous. While it is possible to catch exceptions of any type, see the section "Catching all exceptions" (in <a href="control-exception">Control.Exception</a>) for an explanation of the problems with doing so.</p>
<p>For catching exceptions in pure (non-<code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code>) expressions, see the function <code><a href="ghc-io#v:evaluate" title="GHC.IO">evaluate</a></code>.</p>
<p>Note that due to Haskell's unspecified evaluation order, an expression may throw one of several possible exceptions: consider the expression <code>(error "urk") + (1 `div` 0)</code>. Does the expression throw <code>ErrorCall "urk"</code>, or <code>DivideByZero</code>?</p>
<p>The answer is "it might throw either"; the choice is non-deterministic. If you are catching any type of exception then you might catch either. If you are calling <code>catch</code> with type <code>IO Int -&gt; (ArithException -&gt; IO Int) -&gt; IO Int</code> then the handler may get run with <code>DivideByZero</code> as an argument, or an <code>ErrorCall "urk"</code> exception may be propogated further up. If you call it again, you might get a the opposite behaviour. This is ok, because <code><a href="ghc-io#v:catch" title="GHC.IO">catch</a></code> is an <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> computation.</p>
<p class="src"><a id="v:catchException" class="def">catchException</a> :: <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e =&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; (e -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#catchException" class="link">Source</a> </p>
<p>Catch an exception in the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> monad.</p>
<p>Note that this function is <em>strict</em> in the action. That is, <code>catchException undefined b == _|_</code>. See  for details.</p>
<p class="src"><a id="v:catchAny" class="def">catchAny</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; (forall e. <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e =&gt; e -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#catchAny" class="link">Source</a> </p>
<p>Catch any <code><a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a></code> type in the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> monad.</p>
<p>Note that this function is <em>strict</em> in the action. That is, <code>catchAny undefined b == _|_</code>. See  for details.</p>
<p class="src"><a id="v:throwIO" class="def">throwIO</a> :: <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e =&gt; e -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#throwIO" class="link">Source</a> </p>
<p>A variant of <code><a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Control-Exception-Base.html#v:throw" title="Control.Exception.Base">throw</a></code> that can only be used within the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> monad.</p>
<p>Although <code><a href="ghc-io#v:throwIO" title="GHC.IO">throwIO</a></code> has a type that is an instance of the type of <code><a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Control-Exception-Base.html#v:throw" title="Control.Exception.Base">throw</a></code>, the two functions are subtly different:</p>
<pre>throw e   `seq` x  ===&gt; throw e
throwIO e `seq` x  ===&gt; x</pre>
<p>The first example will cause the exception <code>e</code> to be raised, whereas the second one won't. In fact, <code><a href="ghc-io#v:throwIO" title="GHC.IO">throwIO</a></code> will only cause an exception to be raised when it is used within the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> monad. The <code><a href="ghc-io#v:throwIO" title="GHC.IO">throwIO</a></code> variant should be used in preference to <code><a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Control-Exception-Base.html#v:throw" title="Control.Exception.Base">throw</a></code> to raise an exception within the <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> monad because it guarantees ordering with respect to other <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> operations, whereas <code><a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Control-Exception-Base.html#v:throw" title="Control.Exception.Base">throw</a></code> does not.</p>
<p class="src"><a id="v:mask" class="def">mask</a> :: ((forall a. <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#mask" class="link">Source</a> </p>
<p>Executes an IO computation with asynchronous exceptions <em>masked</em>. That is, any thread which attempts to raise an exception in the current thread with <code><a href="control-exception#v:throwTo" title="Control.Exception">throwTo</a></code> will be blocked until asynchronous exceptions are unmasked again.</p>
<p>The argument passed to <code><a href="ghc-io#v:mask" title="GHC.IO">mask</a></code> is a function that takes as its argument another function, which can be used to restore the prevailing masking state within the context of the masked computation. For example, a common way to use <code><a href="ghc-io#v:mask" title="GHC.IO">mask</a></code> is to protect the acquisition of a resource:</p>
<pre>mask $ \restore -&gt; do
    x &lt;- acquire
    restore (do_something_with x) `onException` release
    release</pre>
<p>This code guarantees that <code>acquire</code> is paired with <code>release</code>, by masking asynchronous exceptions for the critical parts. (Rather than write this code yourself, it would be better to use <code><a href="control-exception#v:bracket" title="Control.Exception">bracket</a></code> which abstracts the general pattern).</p>
<p>Note that the <code>restore</code> action passed to the argument to <code><a href="ghc-io#v:mask" title="GHC.IO">mask</a></code> does not necessarily unmask asynchronous exceptions, it just restores the masking state to that of the enclosing context. Thus if asynchronous exceptions are already masked, <code><a href="ghc-io#v:mask" title="GHC.IO">mask</a></code> cannot be used to unmask exceptions again. This is so that if you call a library function with exceptions masked, you can be sure that the library call will not be able to unmask exceptions again. If you are writing library code and need to use asynchronous exceptions, the only way is to create a new thread; see <code><a href="control-concurrent#v:forkIOWithUnmask" title="Control.Concurrent">forkIOWithUnmask</a></code>.</p>
<p>Asynchronous exceptions may still be received while in the masked state if the masked thread <em>blocks</em> in certain ways; see <a href="control-exception#interruptible">Control.Exception</a>.</p>
<p>Threads created by <code><a href="control-concurrent#v:forkIO" title="Control.Concurrent">forkIO</a></code> inherit the <code><a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a></code> from the parent; that is, to start a thread in the <code><a href="ghc-io#v:MaskedInterruptible" title="GHC.IO">MaskedInterruptible</a></code> state, use <code>mask_ $ forkIO ...</code>. This is particularly useful if you need to establish an exception handler in the forked thread before any asynchronous exceptions are received. To create a new thread in an unmasked state use <code><a href="control-concurrent#v:forkIOWithUnmask" title="Control.Concurrent">forkIOWithUnmask</a></code>.</p>
<p class="src"><a id="v:mask_" class="def">mask_</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#mask_" class="link">Source</a> </p>
<p>Like <code><a href="ghc-io#v:mask" title="GHC.IO">mask</a></code>, but does not pass a <code>restore</code> action to the argument.</p>
<p class="src"><a id="v:uninterruptibleMask" class="def">uninterruptibleMask</a> :: ((forall a. <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b) -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#uninterruptibleMask" class="link">Source</a> </p>
<p>Like <code><a href="ghc-io#v:mask" title="GHC.IO">mask</a></code>, but the masked computation is not interruptible (see <a href="control-exception#interruptible">Control.Exception</a>). THIS SHOULD BE USED WITH GREAT CARE, because if a thread executing in <code><a href="ghc-io#v:uninterruptibleMask" title="GHC.IO">uninterruptibleMask</a></code> blocks for any reason, then the thread (and possibly the program, if this is the main thread) will be unresponsive and unkillable. This function should only be necessary if you need to mask exceptions around an interruptible operation, and you can guarantee that the interruptible operation will only block for a short period of time.</p>
<p class="src"><a id="v:uninterruptibleMask_" class="def">uninterruptibleMask_</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#uninterruptibleMask_" class="link">Source</a> </p>
<p>Like <code><a href="ghc-io#v:uninterruptibleMask" title="GHC.IO">uninterruptibleMask</a></code>, but does not pass a <code>restore</code> action to the argument.</p>
<p class="src">data <a id="t:MaskingState" class="def">MaskingState</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#MaskingState" class="link">Source</a> </p>
<p>Describes the behaviour of a thread when an asynchronous exception is received.</p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table>
<tr>
<td class="src"><a id="v:Unmasked" class="def">Unmasked</a></td>
<td class="doc"><p>asynchronous exceptions are unmasked (the normal state)</p></td>
</tr>
<tr>
<td class="src"><a id="v:MaskedInterruptible" class="def">MaskedInterruptible</a></td>
<td class="doc"><p>the state during <code><a href="ghc-io#v:mask" title="GHC.IO">mask</a></code>: asynchronous exceptions are masked, but blocking operations may still be interrupted</p></td>
</tr>
<tr>
<td class="src"><a id="v:MaskedUninterruptible" class="def">MaskedUninterruptible</a></td>
<td class="doc"><p>the state during <code><a href="ghc-io#v:uninterruptibleMask" title="GHC.IO">uninterruptibleMask</a></code>: asynchronous exceptions are masked, and blocking operations may not be interrupted</p></td>
</tr>
</table>
</div>
<div class="subs instances">
<h5 class="instances details-toggle-control details-toggle" data-details-id="i:MaskingState">Instances</h5>
<details id="i:MaskingState" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table>
<tr>
<td class="src clearfix">
 <a href="data-eq#t:Eq" title="Data.Eq">Eq</a> <a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a> </td>
<td class="doc"><p><span class="version">Since: base-4.3.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:MaskingState:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-io">GHC.IO</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a> -&gt; <a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a> -&gt; <a href="data-bool#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/ghc-prim-0.5.3/src/GHC-Classes.html#%3D%3D" class="link">Source</a> </p>
<p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a> -&gt; <a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a> -&gt; <a href="data-bool#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/ghc-prim-0.5.3/src/GHC-Classes.html#%2F%3D" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="text-show#t:Show" title="Text.Show">Show</a> <a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a> </td>
<td class="doc"><p><span class="version">Since: base-4.3.0.0</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:MaskingState:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-io">GHC.IO</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="data-int#t:Int" title="Data.Int">Int</a> -&gt; <a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a> -&gt; <a href="text-show#t:ShowS" title="Text.Show">ShowS</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Show.html#showsPrec" class="link">Source</a> </p>
<p class="src"><a href="#v:show">show</a> :: <a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a> -&gt; <a href="data-string#t:String" title="Data.String">String</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Show.html#show" class="link">Source</a> </p>
<p class="src"><a href="#v:showList">showList</a> :: [<a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a>] -&gt; <a href="text-show#t:ShowS" title="Text.Show">ShowS</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Show.html#showList" class="link">Source</a> </p>
</div></details></td></tr>
</table></details>
</div>
<p class="src"><a id="v:getMaskingState" class="def">getMaskingState</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> <a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#getMaskingState" class="link">Source</a> </p>
<p>Returns the <code><a href="ghc-io#t:MaskingState" title="GHC.IO">MaskingState</a></code> for the current thread.</p>
<p class="src"><a id="v:unsafeUnmask" class="def">unsafeUnmask</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#unsafeUnmask" class="link">Source</a> </p>
<p class="src"><a id="v:interruptible" class="def">interruptible</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#interruptible" class="link">Source</a> </p>
<p>Allow asynchronous exceptions to be raised even inside <code><a href="ghc-io#v:mask" title="GHC.IO">mask</a></code>, making the operation interruptible (see the discussion of "Interruptible operations" in <code><a href="control#v:Exception" title="Control">Exception</a></code>).</p>
<p>When called outside <code><a href="ghc-io#v:mask" title="GHC.IO">mask</a></code>, or inside <code><a href="ghc-io#v:uninterruptibleMask" title="GHC.IO">uninterruptibleMask</a></code>, this function has no effect.</p>
<p><span class="version">Since: base-4.9.0.0</span></p>
<p class="src"><a id="v:onException" class="def">onException</a> :: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#onException" class="link">Source</a> </p>
<p class="src"><a id="v:bracket" class="def">bracket</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#bracket" class="link">Source</a> </p>
<div class="subs arguments">
<h4 class="caption">Arguments</h4>
<table>
<tr>
<td class="src">:: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a</td>
<td class="doc"><p>computation to run first ("acquire resource")</p></td>
</tr>
<tr>
<td class="src">-&gt; (a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b)</td>
<td class="doc"><p>computation to run last ("release resource")</p></td>
</tr>
<tr>
<td class="src">-&gt; (a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> c)</td>
<td class="doc"><p>computation to run in-between</p></td>
</tr>
<tr>
<td class="src">-&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> c</td>
<td class="doc empty"> </td>
</tr>
</table>
</div>
<p class="src"><a id="v:finally" class="def">finally</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#finally" class="link">Source</a> </p>
<div class="subs arguments">
<h4 class="caption">Arguments</h4>
<table>
<tr>
<td class="src">:: <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a</td>
<td class="doc"><p>computation to run first</p></td>
</tr>
<tr>
<td class="src">-&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> b</td>
<td class="doc"><p>computation to run afterward (even if an exception was raised)</p></td>
</tr>
<tr>
<td class="src">-&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a</td>
<td class="doc empty"> </td>
</tr>
</table>
</div>
<p class="src"><a id="v:evaluate" class="def">evaluate</a> :: a -&gt; <a href="ghc-io#t:IO" title="GHC.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-IO.html#evaluate" class="link">Source</a> </p>
<p>Evaluate the argument to weak head normal form.</p>
<p><code><a href="ghc-io#v:evaluate" title="GHC.IO">evaluate</a></code> is typically used to uncover any exceptions that a lazy value may contain, and possibly handle them.</p>
<p><code><a href="ghc-io#v:evaluate" title="GHC.IO">evaluate</a></code> only evaluates to <em>weak head normal form</em>. If deeper evaluation is needed, the <code>force</code> function from <code>Control.DeepSeq</code> may be handy:</p>
<pre>evaluate $ force x</pre>
<p>There is a subtle difference between <code><a href="ghc-io#v:evaluate" title="GHC.IO">evaluate</a> x</code> and <code><a href="control-monad#v:return" title="Control.Monad">return</a> <a href="prelude#v:-36--33-" title="Prelude">$!</a> x</code>, analogous to the difference between <code><a href="ghc-io#v:throwIO" title="GHC.IO">throwIO</a></code> and <code><a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Control-Exception-Base.html#v:throw" title="Control.Exception.Base">throw</a></code>. If the lazy value <code>x</code> throws an exception, <code><a href="control-monad#v:return" title="Control.Monad">return</a> <a href="prelude#v:-36--33-" title="Prelude">$!</a> x</code> will fail to return an <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> action and will throw an exception instead. <code><a href="ghc-io#v:evaluate" title="GHC.IO">evaluate</a> x</code>, on the other hand, always produces an <code><a href="ghc-io#t:IO" title="GHC.IO">IO</a></code> action; that action will throw an exception upon <em>execution</em> iff <code>x</code> throws an exception upon <em>evaluation</em>.</p>
<p>The practical implication of this difference is that due to the <em>imprecise exceptions</em> semantics,</p>
<pre>(return $! error "foo") &gt;&gt; error "bar"</pre>
<p>may throw either <code>"foo"</code> or <code>"bar"</code>, depending on the optimizations performed by the compiler. On the other hand,</p>
<pre>evaluate (error "foo") &gt;&gt; error "bar"</pre>
<p>is guaranteed to throw <code>"foo"</code>.</p>
<p>The rule of thumb is to use <code><a href="ghc-io#v:evaluate" title="GHC.IO">evaluate</a></code> to force or handle exceptions in lazy values. If, on the other hand, you are forcing a lazy value for efficiency reasons only and do not care about exceptions, you may use <code><a href="control-monad#v:return" title="Control.Monad">return</a> <a href="prelude#v:-36--33-" title="Prelude">$!</a> x</code>.</p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
     The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/GHC-IO.html" class="_attribution-link">https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/GHC-IO.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
