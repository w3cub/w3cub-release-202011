
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>GHC.Stable - Haskell 8 - W3cubDocs</title>
  
  <meta name="description" content=" Stable pointers. ">
  <meta name="keywords" content="ghc, stable, haskell, haskell~8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/haskell~8/libraries/base-4.13.0.0/ghc-stable.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/haskell~8.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/haskell~8/" class="_nav-link" title="" style="margin-left:0;">Haskell 8</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _haskell">
				
				
<h1 class="caption">GHC.Stable</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th valign="top">Copyright</th>
<td>(c) The University of Glasgow 1992-2004</td>
</tr>
<tr>
<th>License</th>
<td>see libraries/base/LICENSE</td>
</tr>
<tr>
<th>Maintainer</th>
<td>ffi@haskell.org</td>
</tr>
<tr>
<th>Stability</th>
<td>internal</td>
</tr>
<tr>
<th>Portability</th>
<td>non-portable (GHC Extensions)</td>
</tr>
<tr>
<th>Safe Haskell</th>
<td>Unsafe</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell2010</td>
</tr>
</table>
<div id="description">
<h4 class="caption">Description</h4>
<p>Stable pointers.</p>
</div>
<p class="src">data <a id="t:StablePtr" class="def">StablePtr</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Stable.html#StablePtr" class="link">Source</a> </p>
<p>A <em>stable pointer</em> is a reference to a Haskell expression that is guaranteed not to be affected by garbage collection, i.e., it will neither be deallocated nor will the value of the stable pointer itself change during garbage collection (ordinary references may be relocated during garbage collection). Consequently, stable pointers can be passed to foreign code, which can treat it as an opaque reference to a Haskell value.</p>
<p>A value of type <code>StablePtr a</code> is a stable pointer to a Haskell expression of type <code>a</code>.</p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table><tr>
<td class="src">
<a id="v:StablePtr" class="def">StablePtr</a> (<a href="ghc-exts#t:StablePtr-35-" title="GHC.Exts">StablePtr#</a> a)</td>
<td class="doc empty"> </td>
</tr></table>
</div>
<div class="subs instances">
<h5 class="instances details-toggle-control details-toggle" data-details-id="i:StablePtr">Instances</h5>
<details id="i:StablePtr" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table>
<tr>
<td class="src clearfix">
 <a href="data-eq#t:Eq" title="Data.Eq">Eq</a> (<a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a) </td>
<td class="doc"><p><span class="version">Since: base-2.1</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:StablePtr:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="ghc-stable">GHC.Stable</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="data-bool#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/ghc-prim-0.5.3/src/GHC-Classes.html#%3D%3D" class="link">Source</a> </p>
<p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="data-bool#t:Bool" title="Data.Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/ghc-prim-0.5.3/src/GHC-Classes.html#%2F%3D" class="link">Source</a> </p>
</div></details></td></tr>
<tr>
<td class="src clearfix">
 <a href="foreign-storable#t:Storable" title="Foreign.Storable">Storable</a> (<a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a) </td>
<td class="doc"><p><span class="version">Since: base-2.1</span></p></td>
</tr>
<tr><td colspan="2"><details id="i:id:StablePtr:Storable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="foreign-storable">Foreign.Storable</a></p> <div class="subs methods">
<h4 class="caption">Methods</h4>
<p class="src"><a href="#v:sizeOf">sizeOf</a> :: <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="data-int#t:Int" title="Data.Int">Int</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Foreign-Storable.html#sizeOf" class="link">Source</a> </p>
<p class="src"><a href="#v:alignment">alignment</a> :: <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="data-int#t:Int" title="Data.Int">Int</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Foreign-Storable.html#alignment" class="link">Source</a> </p>
<p class="src"><a href="#v:peekElemOff">peekElemOff</a> :: <a href="foreign-ptr#t:Ptr" title="Foreign.Ptr">Ptr</a> (<a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a) -&gt; <a href="data-int#t:Int" title="Data.Int">Int</a> -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> (<a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a) <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Foreign-Storable.html#peekElemOff" class="link">Source</a> </p>
<p class="src"><a href="#v:pokeElemOff">pokeElemOff</a> :: <a href="foreign-ptr#t:Ptr" title="Foreign.Ptr">Ptr</a> (<a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a) -&gt; <a href="data-int#t:Int" title="Data.Int">Int</a> -&gt; <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Foreign-Storable.html#pokeElemOff" class="link">Source</a> </p>
<p class="src"><a href="#v:peekByteOff">peekByteOff</a> :: <a href="foreign-ptr#t:Ptr" title="Foreign.Ptr">Ptr</a> b -&gt; <a href="data-int#t:Int" title="Data.Int">Int</a> -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> (<a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a) <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Foreign-Storable.html#peekByteOff" class="link">Source</a> </p>
<p class="src"><a href="#v:pokeByteOff">pokeByteOff</a> :: <a href="foreign-ptr#t:Ptr" title="Foreign.Ptr">Ptr</a> b -&gt; <a href="data-int#t:Int" title="Data.Int">Int</a> -&gt; <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Foreign-Storable.html#pokeByteOff" class="link">Source</a> </p>
<p class="src"><a href="#v:peek">peek</a> :: <a href="foreign-ptr#t:Ptr" title="Foreign.Ptr">Ptr</a> (<a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a) -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> (<a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a) <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Foreign-Storable.html#peek" class="link">Source</a> </p>
<p class="src"><a href="#v:poke">poke</a> :: <a href="foreign-ptr#t:Ptr" title="Foreign.Ptr">Ptr</a> (<a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a) -&gt; <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Foreign-Storable.html#poke" class="link">Source</a> </p>
</div></details></td></tr>
</table></details>
</div>
<p class="src"><a id="v:newStablePtr" class="def">newStablePtr</a> :: a -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> (<a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a) <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Stable.html#newStablePtr" class="link">Source</a> </p>
<p>Create a stable pointer referring to the given Haskell value.</p>
<p class="src"><a id="v:deRefStablePtr" class="def">deRefStablePtr</a> :: <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Stable.html#deRefStablePtr" class="link">Source</a> </p>
<p>Obtain the Haskell value referenced by a stable pointer, i.e., the same value that was passed to the corresponding call to <code><a href="ghc-stable#v:newStablePtr" title="GHC.Stable">newStablePtr</a></code>. If the argument to <code><a href="ghc-stable#v:deRefStablePtr" title="GHC.Stable">deRefStablePtr</a></code> has already been freed using <code><a href="ghc-stable#v:freeStablePtr" title="GHC.Stable">freeStablePtr</a></code>, the behaviour of <code><a href="ghc-stable#v:deRefStablePtr" title="GHC.Stable">deRefStablePtr</a></code> is undefined.</p>
<p class="src"><a id="v:freeStablePtr" class="def">freeStablePtr</a> :: <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Stable.html#freeStablePtr" class="link">Source</a> </p>
<p>Dissolve the association between the stable pointer and the Haskell value. Afterwards, if the stable pointer is passed to <code><a href="ghc-stable#v:deRefStablePtr" title="GHC.Stable">deRefStablePtr</a></code> or <code><a href="ghc-stable#v:freeStablePtr" title="GHC.Stable">freeStablePtr</a></code>, the behaviour is undefined. However, the stable pointer may still be passed to <code><a href="ghc-stable#v:castStablePtrToPtr" title="GHC.Stable">castStablePtrToPtr</a></code>, but the <code><a href="foreign-ptr#v:Ptr" title="Foreign.Ptr">Ptr</a> ()</code> value returned by <code><a href="ghc-stable#v:castStablePtrToPtr" title="GHC.Stable">castStablePtrToPtr</a></code>, in this case, is undefined (in particular, it may be <code><a href="foreign-ptr#v:nullPtr" title="Foreign.Ptr">nullPtr</a></code>). Nevertheless, the call to <code><a href="ghc-stable#v:castStablePtrToPtr" title="GHC.Stable">castStablePtrToPtr</a></code> is guaranteed not to diverge.</p>
<p class="src"><a id="v:castStablePtrToPtr" class="def">castStablePtrToPtr</a> :: <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a -&gt; <a href="foreign-ptr#t:Ptr" title="Foreign.Ptr">Ptr</a> () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Stable.html#castStablePtrToPtr" class="link">Source</a> </p>
<p>Coerce a stable pointer to an address. No guarantees are made about the resulting value, except that the original stable pointer can be recovered by <code><a href="ghc-stable#v:castPtrToStablePtr" title="GHC.Stable">castPtrToStablePtr</a></code>. In particular, the address may not refer to an accessible memory location and any attempt to pass it to the member functions of the class <code><a href="foreign-storable#v:Storable" title="Foreign.Storable">Storable</a></code> leads to undefined behaviour.</p>
<p class="src"><a id="v:castPtrToStablePtr" class="def">castPtrToStablePtr</a> :: <a href="foreign-ptr#t:Ptr" title="Foreign.Ptr">Ptr</a> () -&gt; <a href="ghc-stable#t:StablePtr" title="GHC.Stable">StablePtr</a> a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/GHC-Stable.html#castPtrToStablePtr" class="link">Source</a> </p>
<p>The inverse of <code><a href="ghc-stable#v:castStablePtrToPtr" title="GHC.Stable">castStablePtrToPtr</a></code>, i.e., we have the identity</p>
<pre>sp == castPtrToStablePtr (castStablePtrToPtr sp)</pre>
<p>for any stable pointer <code>sp</code> on which <code><a href="ghc-stable#v:freeStablePtr" title="GHC.Stable">freeStablePtr</a></code> has not been executed yet. Moreover, <code><a href="ghc-stable#v:castPtrToStablePtr" title="GHC.Stable">castPtrToStablePtr</a></code> may only be applied to pointers that have been produced by <code><a href="ghc-stable#v:castStablePtrToPtr" title="GHC.Stable">castStablePtrToPtr</a></code>.</p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    Â© The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/GHC-Stable.html" class="_attribution-link">https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/GHC-Stable.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
