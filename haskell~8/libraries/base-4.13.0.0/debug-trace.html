
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Debug.Trace - Haskell 8 - W3cubDocs</title>
  
  <meta name="description" content=" Functions for tracing and monitoring execution. ">
  <meta name="keywords" content="debug, trace, haskell, haskell~8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/haskell~8/libraries/base-4.13.0.0/debug-trace.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/haskell~8.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/haskell~8/" class="_nav-link" title="" style="margin-left:0;">Haskell 8</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _haskell">
				
				
<h1 class="caption">Debug.Trace</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th valign="top">Copyright</th>
<td>(c) The University of Glasgow 2001</td>
</tr>
<tr>
<th>License</th>
<td>BSD-style (see the file libraries/base/LICENSE)</td>
</tr>
<tr>
<th>Maintainer</th>
<td>libraries@haskell.org</td>
</tr>
<tr>
<th>Stability</th>
<td>provisional</td>
</tr>
<tr>
<th>Portability</th>
<td>portable</td>
</tr>
<tr>
<th>Safe Haskell</th>
<td>Unsafe</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell2010</td>
</tr>
</table>
<div id="table-of-contents"><div id="contents-list">
<h4 class="caption" onclick="window.scrollTo(0,0)">Contents</h4>
<ul>
<li><a href="#g:1">Tracing</a></li>
<li><a href="#g:2">Eventlog tracing</a></li>
<li><a href="#g:3">Execution phase markers</a></li>
</ul>
</div></div>
<div id="description">
<h4 class="caption">Description</h4>
<p>Functions for tracing and monitoring execution.</p>
<p>These can be useful for investigating bugs or performance problems. They should <em>not</em> be used in production code.</p>
</div>
<a href="#g:1" id="g:1"><h2>Tracing</h2></a><p>The <code><a href="debug-trace#v:trace" title="Debug.Trace">trace</a></code>, <code><a href="debug-trace#v:traceShow" title="Debug.Trace">traceShow</a></code> and <code><a href="debug-trace#v:traceIO" title="Debug.Trace">traceIO</a></code> functions print messages to an output stream. They are intended for "printf debugging", that is: tracing the flow of execution and printing interesting values.</p>
<p>All these functions evaluate the message completely before printing it; so if the message is not fully defined, none of it will be printed.</p>
<p>The usual output stream is <code><a href="system-io#v:stderr" title="System.IO">stderr</a></code>. For Windows GUI applications (that have no stderr) the output is directed to the Windows debug console. Some implementations of these functions may decorate the string that's output to indicate that you're tracing.</p>
<p class="src"><a id="v:trace" class="def">trace</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; a -&gt; a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#trace" class="link">Source</a> </p>
<p>The <code><a href="debug-trace#v:trace" title="Debug.Trace">trace</a></code> function outputs the trace message given as its first argument, before returning the second argument as its result.</p>
<p>For example, this returns the value of <code>f x</code> but first outputs the message.</p>
<pre class="screen">&gt;&gt;&gt; <strong class="userinput">let x = 123; f = show
</strong>&gt;&gt;&gt; <strong class="userinput">trace ("calling f with x = " ++ show x) (f x)
</strong>"calling f with x = 123
123"
</pre>
<p>The <code><a href="debug-trace#v:trace" title="Debug.Trace">trace</a></code> function should <em>only</em> be used for debugging, or for monitoring execution. The function is not referentially transparent: its type indicates that it is a pure function but it has the side effect of outputting the trace message.</p>
<p class="src"><a id="v:traceId" class="def">traceId</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; <a href="data-string#t:String" title="Data.String">String</a> <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceId" class="link">Source</a> </p>
<p>Like <code><a href="debug-trace#v:trace" title="Debug.Trace">trace</a></code> but returns the message instead of a third value.</p>
<pre class="screen">&gt;&gt;&gt; <strong class="userinput">traceId "hello"
</strong>"hello
hello"
</pre>
<p><span class="version">Since: base-4.7.0.0</span></p>
<p class="src"><a id="v:traceShow" class="def">traceShow</a> :: <a href="text-show#t:Show" title="Text.Show">Show</a> a =&gt; a -&gt; b -&gt; b <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceShow" class="link">Source</a> </p>
<p>Like <code><a href="debug-trace#v:trace" title="Debug.Trace">trace</a></code>, but uses <code><a href="text-show#v:show" title="Text.Show">show</a></code> on the argument to convert it to a <code><a href="data-string#t:String" title="Data.String">String</a></code>.</p>
<p>This makes it convenient for printing the values of interesting variables or expressions inside a function. For example here we print the value of the variables <code>x</code> and <code>y</code>:</p>
<pre class="screen">&gt;&gt;&gt; <strong class="userinput">let f x y = traceShow (x,y) (x + y) in f (1+2) 5
</strong>(3,5)
8
</pre>
<p class="src"><a id="v:traceShowId" class="def">traceShowId</a> :: <a href="text-show#t:Show" title="Text.Show">Show</a> a =&gt; a -&gt; a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceShowId" class="link">Source</a> </p>
<p>Like <code><a href="debug-trace#v:traceShow" title="Debug.Trace">traceShow</a></code> but returns the shown value instead of a third value.</p>
<pre class="screen">&gt;&gt;&gt; <strong class="userinput">traceShowId (1+2+3, "hello" ++ "world")
</strong>(6,"helloworld")
(6,"helloworld")
</pre>
<p><span class="version">Since: base-4.7.0.0</span></p>
<p class="src"><a id="v:traceStack" class="def">traceStack</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; a -&gt; a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceStack" class="link">Source</a> </p>
<p>like <code><a href="debug-trace#v:trace" title="Debug.Trace">trace</a></code>, but additionally prints a call stack if one is available.</p>
<p>In the current GHC implementation, the call stack is only available if the program was compiled with <code>-prof</code>; otherwise <code><a href="debug-trace#v:traceStack" title="Debug.Trace">traceStack</a></code> behaves exactly like <code><a href="debug-trace#v:trace" title="Debug.Trace">trace</a></code>. Entries in the call stack correspond to <code>SCC</code> annotations, so it is a good idea to use <code>-fprof-auto</code> or <code>-fprof-auto-calls</code> to add SCC annotations automatically.</p>
<p><span class="version">Since: base-4.5.0.0</span></p>
<p class="src"><a id="v:traceIO" class="def">traceIO</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceIO" class="link">Source</a> </p>
<p>The <code><a href="debug-trace#v:traceIO" title="Debug.Trace">traceIO</a></code> function outputs the trace message from the IO monad. This sequences the output with respect to other IO actions.</p>
<p><span class="version">Since: base-4.5.0.0</span></p>
<p class="src"><a id="v:traceM" class="def">traceM</a> :: <a href="control-applicative#t:Applicative" title="Control.Applicative">Applicative</a> f =&gt; <a href="data-string#t:String" title="Data.String">String</a> -&gt; f () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceM" class="link">Source</a> </p>
<p>Like <code><a href="debug-trace#v:trace" title="Debug.Trace">trace</a></code> but returning unit in an arbitrary <code><a href="control-applicative#t:Applicative" title="Control.Applicative">Applicative</a></code> context. Allows for convenient use in do-notation.</p>
<p>Note that the application of <code><a href="debug-trace#v:traceM" title="Debug.Trace">traceM</a></code> is not an action in the <code><a href="control-applicative#t:Applicative" title="Control.Applicative">Applicative</a></code> context, as <code><a href="debug-trace#v:traceIO" title="Debug.Trace">traceIO</a></code> is in the <code><a href="system-io#t:IO" title="System.IO">IO</a></code> type. While the fresh bindings in the following example will force the <code><a href="debug-trace#v:traceM" title="Debug.Trace">traceM</a></code> expressions to be reduced every time the <code>do</code>-block is executed, <code>traceM "not crashed"</code> would only be reduced once, and the message would only be printed once. If your monad is in <code><a href="control-monad-io-class#v:MonadIO" title="Control.Monad.IO.Class">MonadIO</a></code>, <code><a href="control-monad-io-class#v:liftIO" title="Control.Monad.IO.Class">liftIO</a> . <a href="debug-trace#v:traceIO" title="Debug.Trace">traceIO</a></code> may be a better option.</p>
<pre class="screen">&gt;&gt;&gt; <strong class="userinput">:{
</strong>do
    x &lt;- Just 3
    traceM ("x: " ++ show x)
    y &lt;- pure 12
    traceM ("y: " ++ show y)
    pure (x*2 + y)
:}
x: 3
y: 12
Just 18
</pre>
<p><span class="version">Since: base-4.7.0.0</span></p>
<p class="src"><a id="v:traceShowM" class="def">traceShowM</a> :: (<a href="text-show#t:Show" title="Text.Show">Show</a> a, <a href="control-applicative#t:Applicative" title="Control.Applicative">Applicative</a> f) =&gt; a -&gt; f () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceShowM" class="link">Source</a> </p>
<p>Like <code><a href="debug-trace#v:traceM" title="Debug.Trace">traceM</a></code>, but uses <code><a href="text-show#v:show" title="Text.Show">show</a></code> on the argument to convert it to a <code><a href="data-string#t:String" title="Data.String">String</a></code>.</p>
<pre class="screen">&gt;&gt;&gt; <strong class="userinput">:{
</strong>do
    x &lt;- Just 3
    traceShowM x
    y &lt;- pure 12
    traceShowM y
    pure (x*2 + y)
:}
3
12
Just 18
</pre>
<p><span class="version">Since: base-4.7.0.0</span></p>
<p class="src"><a id="v:putTraceMsg" class="def">putTraceMsg</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#putTraceMsg" class="link">Source</a> </p>
<div class="warning"><p>Deprecated: Use <code><a href="debug-trace#v:traceIO" title="Debug.Trace">traceIO</a></code></p></div>
<a href="#g:2" id="g:2"><h2>Eventlog tracing</h2></a><p>Eventlog tracing is a performance profiling system. These functions emit extra events into the eventlog. In combination with eventlog profiling tools these functions can be used for monitoring execution and investigating performance problems.</p>
<p>Currently only GHC provides eventlog profiling, see the GHC user guide for details on how to use it. These function exists for other Haskell implementations but no events are emitted. Note that the string message is always evaluated, whether or not profiling is available or enabled.</p>
<p class="src"><a id="v:traceEvent" class="def">traceEvent</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; a -&gt; a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceEvent" class="link">Source</a> </p>
<p>The <code><a href="debug-trace#v:traceEvent" title="Debug.Trace">traceEvent</a></code> function behaves like <code><a href="debug-trace#v:trace" title="Debug.Trace">trace</a></code> with the difference that the message is emitted to the eventlog, if eventlog profiling is available and enabled at runtime.</p>
<p>It is suitable for use in pure code. In an IO context use <code><a href="debug-trace#v:traceEventIO" title="Debug.Trace">traceEventIO</a></code> instead.</p>
<p>Note that when using GHC's SMP runtime, it is possible (but rare) to get duplicate events emitted if two CPUs simultaneously evaluate the same thunk that uses <code><a href="debug-trace#v:traceEvent" title="Debug.Trace">traceEvent</a></code>.</p>
<p><span class="version">Since: base-4.5.0.0</span></p>
<p class="src"><a id="v:traceEventIO" class="def">traceEventIO</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceEventIO" class="link">Source</a> </p>
<p>The <code><a href="debug-trace#v:traceEventIO" title="Debug.Trace">traceEventIO</a></code> function emits a message to the eventlog, if eventlog profiling is available and enabled at runtime.</p>
<p>Compared to <code><a href="debug-trace#v:traceEvent" title="Debug.Trace">traceEvent</a></code>, <code><a href="debug-trace#v:traceEventIO" title="Debug.Trace">traceEventIO</a></code> sequences the event with respect to other IO actions.</p>
<p><span class="version">Since: base-4.5.0.0</span></p>
<a href="#g:3" id="g:3"><h2>Execution phase markers</h2></a><p>When looking at a profile for the execution of a program we often want to be able to mark certain points or phases in the execution and see that visually in the profile.</p>
<p class="src"><a id="v:traceMarker" class="def">traceMarker</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; a -&gt; a <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceMarker" class="link">Source</a> </p>
<p>The <code><a href="debug-trace#v:traceMarker" title="Debug.Trace">traceMarker</a></code> function emits a marker to the eventlog, if eventlog profiling is available and enabled at runtime. The <code>String</code> is the name of the marker. The name is just used in the profiling tools to help you keep clear which marker is which.</p>
<p>This function is suitable for use in pure code. In an IO context use <code><a href="debug-trace#v:traceMarkerIO" title="Debug.Trace">traceMarkerIO</a></code> instead.</p>
<p>Note that when using GHC's SMP runtime, it is possible (but rare) to get duplicate events emitted if two CPUs simultaneously evaluate the same thunk that uses <code><a href="debug-trace#v:traceMarker" title="Debug.Trace">traceMarker</a></code>.</p>
<p><span class="version">Since: base-4.7.0.0</span></p>
<p class="src"><a id="v:traceMarkerIO" class="def">traceMarkerIO</a> :: <a href="data-string#t:String" title="Data.String">String</a> -&gt; <a href="system-io#t:IO" title="System.IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/src/Debug-Trace.html#traceMarkerIO" class="link">Source</a> </p>
<p>The <code><a href="debug-trace#v:traceMarkerIO" title="Debug.Trace">traceMarkerIO</a></code> function emits a marker to the eventlog, if eventlog profiling is available and enabled at runtime.</p>
<p>Compared to <code><a href="debug-trace#v:traceMarker" title="Debug.Trace">traceMarker</a></code>, <code><a href="debug-trace#v:traceMarkerIO" title="Debug.Trace">traceMarkerIO</a></code> sequences the event with respect to other IO actions.</p>
<p><span class="version">Since: base-4.7.0.0</span></p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    Â© The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Debug-Trace.html" class="_attribution-link">https://downloads.haskell.org/~ghc/8.8.3/docs/html/libraries/base-4.13.0.0/Debug-Trace.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
