
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Using Forms in Admin Views - Wagtail - W3cubDocs</title>
  
  <meta name="description" content="Django’s forms framework can be used within Wagtail admin views just like in any other Django app. However, Wagtail also provides various admin- &hellip;">
  <meta name="keywords" content="using, forms, admin, views, wagtail">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/wagtail/extending/forms.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/wagtail.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/wagtail/" class="_nav-link" title="" style="margin-left:0;">Wagtail</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1>Using forms in admin views</h1> <p><a class="reference external" href="https://docs.djangoproject.com/en/stable/topics/forms/">Django’s forms framework</a> can be used within Wagtail admin views just like in any other Django app. However, Wagtail also provides various admin-specific form widgets, such as date/time pickers and choosers for pages, documents, images and snippets. By constructing forms using <code>wagtail.admin.forms.models.WagtailAdminModelForm</code> as the base class instead of <code>django.forms.models.ModelForm</code>, the most appropriate widget will be selected for each model field. For example, given the model and form definition:</p> <pre data-language="python">from django.db import models

from wagtail.admin.forms.models import WagtailAdminModelForm
from wagtail.images.models import Image


class FeaturedImage(models.Model):
    date = models.DateField()
    image = models.ForeignKey(Image, on_delete=models.CASCADE)


class FeaturedImageForm(WagtailAdminModelForm):
    class Meta:
        model = FeaturedImage
</pre> <p>the <code>date</code> and <code>image</code> fields on the form will use a date picker and image chooser widget respectively.</p> <section id="defining-admin-form-widgets"> <h2>Defining admin form widgets</h2> <p>If you have implemented a form widget of your own, you can configure <code>WagtailAdminModelForm</code> to select it for a given model field type. This is done by calling the <code>wagtail.admin.forms.models.register_form_field_override</code> function, typically in an <code>AppConfig.ready</code> method.</p>  <p>For example, if the app <code>wagtail.videos</code> implements a <code>Video</code> model and a <code>VideoChooser</code> form widget, the following AppConfig definition will ensure that <code>WagtailAdminModelForm</code> selects <code>VideoChooser</code> as the form widget for any foreign keys pointing to <code>Video</code>:</p> <pre data-language="python">from django.apps import AppConfig
from django.db.models import ForeignKey


class WagtailVideosAppConfig(AppConfig):
    name = 'wagtail.videos'
    label = 'wagtailvideos'

    def ready(self):
        from wagtail.admin.forms.models import register_form_field_override
        from .models import Video
        from .widgets import VideoChooser
        register_form_field_override(ForeignKey, to=Video, override={'widget': VideoChooser})
</pre> <p>Wagtail’s edit views for pages, snippets and ModelAdmin use <code>WagtailAdminModelForm</code> as standard, so this change will take effect across the Wagtail admin; a foreign key to <code>Video</code> on a page model will automatically use the <code>VideoChooser</code> widget, with no need to specify this explicitly.</p> </section> <section id="panels"> <h2>Panels</h2> <p>Panels (also known as edit handlers until Wagtail 3.0) are Wagtail’s mechanism for specifying the content and layout of a model form without having to write a template. They are used for the editing interface for pages and snippets, as well as the <a class="reference internal" href="../reference/contrib/modeladmin/index"><span class="doc std std-doc">ModelAdmin</span></a> and <a class="reference internal" href="../reference/contrib/settings"><span class="doc std std-doc">site settings</span></a> contrib modules.</p> <p>See <a class="reference internal" href="../reference/pages/panels"><span class="doc std std-doc">Panel types</span></a> for the set of panel types provided by Wagtail. All panels inherit from the base class <code>wagtail.admin.panels.Panel</code>. A single panel object (usually <code>ObjectList</code> or <code>TabbedInterface</code>) exists at the top level and is the only one directly accessed by the view code; panels containing child panels inherit from the base class <code>wagtail.admin.panels.PanelGroup</code> and take care of recursively calling methods on their child panels where appropriate.</p> <p>A view performs the following steps to render a model form through the panels mechanism:</p> <ul class="simple"> <li>The top-level panel object for the model is retrieved. Usually this is done by looking up the model’s <code>edit_handler</code> property and falling back on an <code>ObjectList</code> consisting of children given by the model’s <code>panels</code> property. However, it may come from elsewhere - for example, the ModelAdmin module allows defining it on the ModelAdmin configuration object.</li> <li>If the <code>PanelsGroup</code>s permissions do not allow a user to see this panel, then nothing more will be done.</li> <li>The view calls <code>bind_to_model</code> on the top-level panel, passing the model class, and this returns a clone of the panel with a <code>model</code> property. As part of this process the <code>on_model_bound</code> method is invoked on each child panel, to allow it to perform additional initialisation that requires access to the model (for example, this is where <code>FieldPanel</code> retrieves the model field definition).</li> <li>
<p>The view then calls <code>get_form_class</code> on the top-level panel to retrieve a ModelForm subclass that can be used to edit the model. This proceeds as follows:</p> <ul> <li>Retrieve a base form class from the model’s <code>base_form_class</code> property, falling back on <code>wagtail.admin.forms.WagtailAdminModelForm</code>
</li> <li>Call <code>get_form_options</code> on each child panel - which returns a dictionary of properties including <code>fields</code> and <code>widgets</code> - and merge the results into a single dictionary</li> <li>Construct a subclass of the base form class, with the options dict forming the attributes of the inner <code>Meta</code> class.</li> </ul> </li> <li>An instance of the form class is created as per a normal Django form view.</li> <li>The view then calls <code>get_bound_panel</code> on the top-level panel, passing <code>instance</code>, <code>form</code> and <code>request</code> as keyword arguments. This returns a <code>BoundPanel</code> object, which follows <a class="reference internal" href="template_components"><span class="doc std std-doc">the template component API</span></a>. Finally, the <code>BoundPanel</code> object (and its media definition) is rendered onto the template.</li> </ul> <p>New panel types can be defined by subclassing <code>wagtail.admin.panels.Panel</code> - see <a class="reference internal" href="../reference/panel_api"><span class="doc std std-doc">Panel API</span></a>.</p> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2014-present Torchbox Ltd and individual contributors.<br>All rights are reserved.<br>Licensed under the BSD License.<br>
    <a href="https://docs.wagtail.org/en/stable/extending/forms.html" class="_attribution-link">https://docs.wagtail.org/en/stable/extending/forms.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
