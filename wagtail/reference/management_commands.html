
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Management Commands - Wagtail - W3cubDocs</title>
  
  <meta name="description" content="Changed in version 4.1&#58; This command has been renamed from publish_scheduled_pages to publish_scheduled and it now also handles non-page objects &hellip;">
  <meta name="keywords" content="management, commands, wagtail">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/wagtail/reference/management_commands.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9b6ce6139b8492a0447e9396e58206baee4973e9a8a1d9126d4ab69e244811034e5265efcc9da8b9550a8e365367ee3ea1d2c5757f9a5fc1720dc94cd4df775b.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/wagtail.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/wagtail/" class="_nav-link" title="" style="margin-left:0;">Wagtail</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _sphinx">
				
				
<h1 id="id1">Management commands</h1> <section id="publish-scheduled"> <h2 id="id2">publish_scheduled</h2> <div class="versionchanged"> <p><span class="versionmodified changed">Changed in version 4.1: </span>This command has been renamed from <code>publish_scheduled_pages</code> to <code>publish_scheduled</code> and it now also handles non-page objects. The <code>publish_scheduled_pages</code> command is still available as an alias, but it is recommended to update your configuration to run the <code>publish_scheduled</code> command instead.</p> </div> <pre data-language="sh">./manage.py publish_scheduled
</pre> <p>This command publishes, updates or unpublishes objects that have had these actions scheduled by an editor. We recommend running this command once an hour.</p> </section> <section id="fixtree"> <h2 id="id3">fixtree</h2> <pre data-language="sh">./manage.py fixtree
</pre> <p>This command scans for errors in your database and attempts to fix any issues it finds.</p> </section> <section id="move-pages"> <h2 id="id4">move_pages</h2> <pre data-language="sh">manage.py move_pages from to
</pre> <p>This command moves a selection of pages from one section of the tree to another.</p> <p>Options:</p> <ul class="simple"> <li>
<strong>from</strong> This is the <strong>id</strong> of the page to move pages from. All descendants of this page will be moved to the destination. After the operation is complete, this page will have no children.</li> <li>
<strong>to</strong> This is the <strong>id</strong> of the page to move pages to.</li> </ul> </section> <section id="purge-revisions"> <h2 id="id5">purge_revisions</h2> <pre data-language="sh">manage.py purge_revisions [--days=&lt;number of days&gt;]
</pre> <p>This command deletes old page revisions which are not in moderation, live, approved to go live, or the latest revision for a page. If the <code>days</code> argument is supplied, only revisions older than the specified number of days will be deleted.</p> </section> <section id="update-index"> <h2 id="id6">update_index</h2> <pre data-language="sh">./manage.py update_index [--backend &lt;backend name&gt;]
</pre> <p>This command rebuilds the search index from scratch.</p> <p>It is recommended to run this command once a week and at the following times:</p> <ul class="simple"> <li>whenever any pages have been created through a script (after an import, for example)</li> <li>whenever any changes have been made to models or search configuration</li> </ul> <p>The search may not return any results while this command is running, so avoid running it at peak times.</p> <section id="specifying-which-backend-to-update"> <h3>Specifying which backend to update</h3> <p>By default, <code>update_index</code> will rebuild all the search indexes listed in <code>WAGTAILSEARCH_BACKENDS</code>.</p> <p>If you have multiple backends and would only like to update one of them, you can use the <code>--backend</code> option.</p> <p>For example, to update just the default backend:</p> <pre data-language="sh">python manage.py update_index --backend default
</pre> <p>The <code>--chunk_size</code> option can be used to set the size of chunks that are indexed at a time. This defaults to 1000 but may need to be reduced for larger document sizes.</p> </section> <section id="indexing-the-schema-only"> <h3>Indexing the schema only</h3> <p>You can prevent the <code>update_index</code> command from indexing any data by using the <code>--schema-only</code> option:</p> <pre data-language="sh">python manage.py update_index --schema-only
</pre> </section> <section id="silencing-the-command"> <h3>Silencing the command</h3> <p>You can prevent logs to the console by providing <code>--verbosity 0</code> as an argument:</p> <pre data-language="console">$ python manage.py update_index --verbosity 0
</pre> <p>If this is omitted or provided with any number above 0 it will produce the same logs.</p> </section> </section> <section id="wagtail-update-index"> <h2 id="id7">wagtail_update_index</h2> <p>An alias for the <code>update_index</code> command that can be used when another installed package (such as <a class="reference external" href="https://haystacksearch.org/">Haystack</a>) provides a command named <code>update_index</code>. In this case, the other package’s entry in <code>INSTALLED_APPS</code> should appear above <code>wagtail.search</code> so that its <code>update_index</code> command takes precedence over Wagtail’s.</p> </section> <section id="rebuild-references-index"> <h2 id="search-garbage-collect">rebuild_references_index</h2> <pre data-language="sh">./manage.py rebuild_references_index
</pre> <p>This command populates the table that tracks cross-references between objects, used for the usage reports on images, documents and snippets. This table is updated automatically saving objects, but it is recommended to run this command periodically to ensure that the data remains consistent.</p> </section> <section id="id8"> <h2>search_garbage_collect</h2> <pre data-language="sh">./manage.py search_garbage_collect
</pre> <p>Wagtail keeps a log of search queries that are popular on your website. On high traffic websites, this log may get big and you may want to clean out old search queries. This command cleans out all search query logs that are more than one week old (or a number of days configurable through the <a class="reference internal" href="settings#wagtailsearch-hits-max-age"><span class="std std-ref"><code>WAGTAILSEARCH_HITS_MAX_AGE</code></span></a> setting).</p> </section> <section id="wagtail-update-image-renditions"> <h2 id="id9">wagtail_update_image_renditions</h2> <pre data-language="sh">./manage.py wagtail_update_image_renditions
</pre> <p>This command provides the ability to regenerate image renditions. This is useful if you have deployed to a server where the image renditions have not yet been generated or you have changed the underlying image rendition behaviour and need to ensure all renditions are created again.</p> <p>This does not remove rendition images that are unused, this can be done by clearing the folder using <code>rm -rf</code> or similar, once this is done you can then use the management command to generate the renditions.</p> <p>Options:</p> <ul class="simple"> <li>
<strong>–purge-only</strong> : This argument will purge all image renditions without regenerating them. They will be regenerated when next requested.</li> </ul> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2014-present Torchbox Ltd and individual contributors.<br>All rights are reserved.<br>Licensed under the BSD License.<br>
    <a href="https://docs.wagtail.org/en/stable/reference/management_commands.html" class="_attribution-link">https://docs.wagtail.org/en/stable/reference/management_commands.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
