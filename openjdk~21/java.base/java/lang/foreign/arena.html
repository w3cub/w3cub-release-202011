
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Arena - OpenJDK 21 - W3cubDocs</title>
  
  <meta name="description" content="An arena has a scopePREVIEW - the arena scope. All the segments allocated by the arena are associated with the arena scope. As such, the arena &hellip;">
  <meta name="keywords" content="interface, arena, openjdk, openjdk~21">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/openjdk~21/java.base/java/lang/foreign/arena.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/openjdk~21.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/openjdk~21/" class="_nav-link" title="" style="margin-left:0;">OpenJDK 21</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _openjdk">
				
				
<h1 title="Interface Arena" class="title">Interface Arena</h1> <section class="class-description" id="class-description"> <dl class="notes"> <dt>All Superinterfaces:</dt> <dd>
<code><a href="../autocloseable" title="interface in java.lang">AutoCloseable</a></code>, <code><a href="segmentallocator" title="interface in java.lang.foreign">SegmentAllocator</a><sup><a href="segmentallocator#preview-java.lang.foreign.SegmentAllocator">PREVIEW</a></sup></code>
</dd> </dl>  <pre class="lang-java" data-language="java">public interface Arena extends SegmentAllocatorPREVIEW, AutoCloseable</pre> <div class="preview-block" id="preview-java.lang.foreign.Arena">
<span class="preview-label"><code>Arena</code> is a preview API of the Java platform.</span> <div class="preview-comment">Programs can only use <code>Arena</code> when preview features are enabled.</div> <div class="preview-comment">Preview features may be removed in a future release, or upgraded to permanent features of the Java platform.</div> </div> <div class="block">An arena controls the lifecycle of native memory segments, providing both flexible allocation and timely deallocation. <p> An arena has a <a href="memorysegment.scope" title="interface in java.lang.foreign">scope</a><sup><a href="memorysegment.scope#preview-java.lang.foreign.MemorySegment.Scope">PREVIEW</a></sup> - the <em>arena scope</em>. All the segments allocated by the arena are associated with the arena scope. As such, the arena determines the temporal bounds of all the memory segments allocated by it. </p>
<p> Moreover, an arena also determines whether access to memory segments allocated by it should be <a href="memorysegment#isAccessibleBy(java.lang.Thread)">restricted</a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup> to specific threads. An arena is a <a href="segmentallocator" title="interface in java.lang.foreign"><code>SegmentAllocator</code></a><sup><a href="segmentallocator#preview-java.lang.foreign.SegmentAllocator">PREVIEW</a></sup> and features several allocation methods that can be used by clients to obtain native segments. </p>
<p> The simplest arena is the <a href="#global()">global arena</a>. The global arena features an <em>unbounded lifetime</em>. As such, native segments allocated with the global arena are always accessible and their backing regions of memory are never deallocated. Moreover, memory segments allocated with the global arena can be <a href="memorysegment#isAccessibleBy(java.lang.Thread)">accessed</a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup> from any thread. </p>
<div class="snippet-container">
<button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KCjwhLS0KIENvcHlyaWdodCAoYykgMjAyMSwgT3JhY2xlIGFuZC9vciBpdHMgYWZmaWxpYXRlcy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KIERPIE5PVCBBTFRFUiBPUiBSRU1PVkUgQ09QWVJJR0hUIE5PVElDRVMgT1IgVEhJUyBGSUxFIEhFQURFUi4KCiBUaGlzIGNvZGUgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdAogdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgb25seSwgYXMKIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLiAgT3JhY2xlIGRlc2lnbmF0ZXMgdGhpcwogcGFydGljdWxhciBmaWxlIGFzIHN1YmplY3QgdG8gdGhlICJDbGFzc3BhdGgiIGV4Y2VwdGlvbiBhcyBwcm92aWRlZAogYnkgT3JhY2xlIGluIHRoZSBMSUNFTlNFIGZpbGUgdGhhdCBhY2NvbXBhbmllZCB0aGlzIGNvZGUuCgogVGhpcyBjb2RlIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUCiBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IKIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQogdmVyc2lvbiAyIGZvciBtb3JlIGRldGFpbHMgKGEgY29weSBpcyBpbmNsdWRlZCBpbiB0aGUgTElDRU5TRSBmaWxlIHRoYXQKIGFjY29tcGFuaWVkIHRoaXMgY29kZSkuCgogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbgogMiBhbG9uZyB3aXRoIHRoaXMgd29yazsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLAogSW5jLiwgNTEgRnJhbmtsaW4gU3QsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BIDAyMTEwLTEzMDEgVVNBLgoKIFBsZWFzZSBjb250YWN0IE9yYWNsZSwgNTAwIE9yYWNsZSBQYXJrd2F5LCBSZWR3b29kIFNob3JlcywgQ0EgOTQwNjUgVVNBCiBvciB2aXNpdCB3d3cub3JhY2xlLmNvbSBpZiB5b3UgbmVlZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9yIGhhdmUgYW55CiBxdWVzdGlvbnMuCi0tPgoKPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDM4MCA0NjAiIGZpbGw9IiM1MDUwNTAiPgogIDxwYXRoCiAgICAgZD0iTSAzNDYsOCBIIDEwOCBDIDkwLDggNzUsMjMgNzUsNDEgdiAzMTYgYyAwLDE4IDE1LDMzIDMzLDMzIGggMjM4IGMgMTgsMCAzMywtMTUgMzMsLTMzIFYgNDEgQyAzNzksMjMgMzY0LDggMzQ2LDggWiBtIC04LDM0NCBIIDExNiBjIC0yLDAgLTMsLTEgLTMsLTMgViA0OSBjIDAsLTIgMSwtMyAzLC0zIGggMjIyIGMgMiwwIDMsMSAzLDMgdiAzMDAgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgeiIvPgogIDxwYXRoCiAgICAgZD0ibSAyOTAsMzg5IHYgMjYgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgSCA0OSBjIC0yLDAgLTMsLTEgLTMsLTMgViA5OSBjIDAsLTIgMSwtMyAzLC0zIGggMjcgdiAwIGwgLTVlLTQsLTM4IEggNDEgQyAyMyw1OCA4LDczIDgsOTEgdiAzMzIgYyAxMGUtNCwxOCAxNSwzMyAzMywzMyBoIDI1NCBjIDE4LDAgMzMsLTE1IDMzLC0zMyB2IC0zNCIvPgo8L3N2Zz4K" alt="Copy snippet"></button> <pre class="lang-java" data-language="java"><code class="language-java"> MemorySegment segment = Arena.<span class="bold">global</span>().allocate(100, 1);
 ...
 // segment is never deallocated!
</code></pre> </div> <p> Alternatively, clients can obtain an <a href="#ofAuto()">automatic arena</a>, that is an arena which features a <em>bounded lifetime</em> that is managed, automatically, by the garbage collector. As such, the regions of memory backing memory segments allocated with the automatic arena are deallocated at some unspecified time <em>after</em> the automatic arena (and all the segments allocated by it) becomes <a href="../ref/package#reachability">unreachable</a>, as shown below: </p>
<div class="snippet-container">
<button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KCjwhLS0KIENvcHlyaWdodCAoYykgMjAyMSwgT3JhY2xlIGFuZC9vciBpdHMgYWZmaWxpYXRlcy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KIERPIE5PVCBBTFRFUiBPUiBSRU1PVkUgQ09QWVJJR0hUIE5PVElDRVMgT1IgVEhJUyBGSUxFIEhFQURFUi4KCiBUaGlzIGNvZGUgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdAogdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgb25seSwgYXMKIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLiAgT3JhY2xlIGRlc2lnbmF0ZXMgdGhpcwogcGFydGljdWxhciBmaWxlIGFzIHN1YmplY3QgdG8gdGhlICJDbGFzc3BhdGgiIGV4Y2VwdGlvbiBhcyBwcm92aWRlZAogYnkgT3JhY2xlIGluIHRoZSBMSUNFTlNFIGZpbGUgdGhhdCBhY2NvbXBhbmllZCB0aGlzIGNvZGUuCgogVGhpcyBjb2RlIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUCiBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IKIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQogdmVyc2lvbiAyIGZvciBtb3JlIGRldGFpbHMgKGEgY29weSBpcyBpbmNsdWRlZCBpbiB0aGUgTElDRU5TRSBmaWxlIHRoYXQKIGFjY29tcGFuaWVkIHRoaXMgY29kZSkuCgogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbgogMiBhbG9uZyB3aXRoIHRoaXMgd29yazsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLAogSW5jLiwgNTEgRnJhbmtsaW4gU3QsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BIDAyMTEwLTEzMDEgVVNBLgoKIFBsZWFzZSBjb250YWN0IE9yYWNsZSwgNTAwIE9yYWNsZSBQYXJrd2F5LCBSZWR3b29kIFNob3JlcywgQ0EgOTQwNjUgVVNBCiBvciB2aXNpdCB3d3cub3JhY2xlLmNvbSBpZiB5b3UgbmVlZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9yIGhhdmUgYW55CiBxdWVzdGlvbnMuCi0tPgoKPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDM4MCA0NjAiIGZpbGw9IiM1MDUwNTAiPgogIDxwYXRoCiAgICAgZD0iTSAzNDYsOCBIIDEwOCBDIDkwLDggNzUsMjMgNzUsNDEgdiAzMTYgYyAwLDE4IDE1LDMzIDMzLDMzIGggMjM4IGMgMTgsMCAzMywtMTUgMzMsLTMzIFYgNDEgQyAzNzksMjMgMzY0LDggMzQ2LDggWiBtIC04LDM0NCBIIDExNiBjIC0yLDAgLTMsLTEgLTMsLTMgViA0OSBjIDAsLTIgMSwtMyAzLC0zIGggMjIyIGMgMiwwIDMsMSAzLDMgdiAzMDAgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgeiIvPgogIDxwYXRoCiAgICAgZD0ibSAyOTAsMzg5IHYgMjYgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgSCA0OSBjIC0yLDAgLTMsLTEgLTMsLTMgViA5OSBjIDAsLTIgMSwtMyAzLC0zIGggMjcgdiAwIGwgLTVlLTQsLTM4IEggNDEgQyAyMyw1OCA4LDczIDgsOTEgdiAzMzIgYyAxMGUtNCwxOCAxNSwzMyAzMywzMyBoIDI1NCBjIDE4LDAgMzMsLTE1IDMzLC0zMyB2IC0zNCIvPgo8L3N2Zz4K" alt="Copy snippet"></button> <pre class="lang-java" data-language="java"><code class="language-java"> MemorySegment segment = Arena.<span class="bold">ofAuto</span>().allocate(100, 1);
 ...
 segment = null; // the segment region becomes available for deallocation after this point
</code></pre> </div> Memory segments allocated with an automatic arena can also be <a href="memorysegment#isAccessibleBy(java.lang.Thread)">accessed</a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup> from any thread. <p> Rather than leaving deallocation in the hands of the Java runtime, clients will often wish to exercise control over the timing of deallocation for regions of memory that back memory segments. Two kinds of arenas support this, namely <a href="#ofConfined()">confined</a> and <a href="#ofShared()">shared</a> arenas. They both feature bounded lifetimes that are managed manually. For instance, the lifetime of a confined arena starts when the confined arena is created, and ends when the confined arena is <a href="#close()">closed</a>. As a result, the regions of memory backing memory segments allocated with a confined arena are deallocated when the confined arena is closed. When this happens, all the segments allocated with the confined arena are invalidated, and subsequent access operations on these segments will fail <a href="../illegalstateexception" title="class in java.lang"><code>IllegalStateException</code></a>: </p>
<div class="snippet-container">
<button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KCjwhLS0KIENvcHlyaWdodCAoYykgMjAyMSwgT3JhY2xlIGFuZC9vciBpdHMgYWZmaWxpYXRlcy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KIERPIE5PVCBBTFRFUiBPUiBSRU1PVkUgQ09QWVJJR0hUIE5PVElDRVMgT1IgVEhJUyBGSUxFIEhFQURFUi4KCiBUaGlzIGNvZGUgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdAogdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgb25seSwgYXMKIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLiAgT3JhY2xlIGRlc2lnbmF0ZXMgdGhpcwogcGFydGljdWxhciBmaWxlIGFzIHN1YmplY3QgdG8gdGhlICJDbGFzc3BhdGgiIGV4Y2VwdGlvbiBhcyBwcm92aWRlZAogYnkgT3JhY2xlIGluIHRoZSBMSUNFTlNFIGZpbGUgdGhhdCBhY2NvbXBhbmllZCB0aGlzIGNvZGUuCgogVGhpcyBjb2RlIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUCiBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IKIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQogdmVyc2lvbiAyIGZvciBtb3JlIGRldGFpbHMgKGEgY29weSBpcyBpbmNsdWRlZCBpbiB0aGUgTElDRU5TRSBmaWxlIHRoYXQKIGFjY29tcGFuaWVkIHRoaXMgY29kZSkuCgogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbgogMiBhbG9uZyB3aXRoIHRoaXMgd29yazsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLAogSW5jLiwgNTEgRnJhbmtsaW4gU3QsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BIDAyMTEwLTEzMDEgVVNBLgoKIFBsZWFzZSBjb250YWN0IE9yYWNsZSwgNTAwIE9yYWNsZSBQYXJrd2F5LCBSZWR3b29kIFNob3JlcywgQ0EgOTQwNjUgVVNBCiBvciB2aXNpdCB3d3cub3JhY2xlLmNvbSBpZiB5b3UgbmVlZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9yIGhhdmUgYW55CiBxdWVzdGlvbnMuCi0tPgoKPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDM4MCA0NjAiIGZpbGw9IiM1MDUwNTAiPgogIDxwYXRoCiAgICAgZD0iTSAzNDYsOCBIIDEwOCBDIDkwLDggNzUsMjMgNzUsNDEgdiAzMTYgYyAwLDE4IDE1LDMzIDMzLDMzIGggMjM4IGMgMTgsMCAzMywtMTUgMzMsLTMzIFYgNDEgQyAzNzksMjMgMzY0LDggMzQ2LDggWiBtIC04LDM0NCBIIDExNiBjIC0yLDAgLTMsLTEgLTMsLTMgViA0OSBjIDAsLTIgMSwtMyAzLC0zIGggMjIyIGMgMiwwIDMsMSAzLDMgdiAzMDAgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgeiIvPgogIDxwYXRoCiAgICAgZD0ibSAyOTAsMzg5IHYgMjYgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgSCA0OSBjIC0yLDAgLTMsLTEgLTMsLTMgViA5OSBjIDAsLTIgMSwtMyAzLC0zIGggMjcgdiAwIGwgLTVlLTQsLTM4IEggNDEgQyAyMyw1OCA4LDczIDgsOTEgdiAzMzIgYyAxMGUtNCwxOCAxNSwzMyAzMywzMyBoIDI1NCBjIDE4LDAgMzMsLTE1IDMzLC0zMyB2IC0zNCIvPgo8L3N2Zz4K" alt="Copy snippet"></button> <pre class="lang-java" data-language="java"><code class="language-java"> MemorySegment segment = null;
 try (Arena arena = Arena.<span class="bold">ofConfined</span>()) {
     segment = arena.allocate(100);
     ...
 } // segment region deallocated here
 segment.get(ValueLayout.JAVA_BYTE, 0); // throws IllegalStateException
</code></pre> </div> Memory segments allocated with a <a href="#ofConfined()">confined arena</a> can only be accessed (and closed) by the thread that created the arena. If access to a memory segment from multiple threads is required, clients can allocate segments in a <a href="#ofShared()">shared arena</a> instead. <p> The characteristics of the various arenas are summarized in the following table: </p>
<blockquote><table class="plain"> <caption style="display:none">Arenas characteristics</caption> <thead> <tr> <th scope="col">Kind</th> <th scope="col">Bounded lifetime</th> <th scope="col">Explicitly closeable</th> <th scope="col">Accessible from multiple threads</th> </tr> </thead> <tbody> <tr>
<th scope="row" style="font-weight:normal">Global</th> <td style="text-align:center;">No</td> <td style="text-align:center;">No</td> <td style="text-align:center;">Yes</td>
</tr> <tr>
<th scope="row" style="font-weight:normal">Automatic</th> <td style="text-align:center;">Yes</td> <td style="text-align:center;">No</td> <td style="text-align:center;">Yes</td>
</tr> <tr>
<th scope="row" style="font-weight:normal">Confined</th> <td style="text-align:center;">Yes</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">No</td>
</tr> <tr>
<th scope="row" style="font-weight:normal">Shared</th> <td style="text-align:center;">Yes</td> <td style="text-align:center;">Yes</td> <td style="text-align:center;">Yes</td>
</tr> </tbody> </table></blockquote> <h2 id="thread-confinement">Safety and thread-confinement</h2> Arenas provide strong temporal safety guarantees: a memory segment allocated by an arena cannot be accessed <em>after</em> the arena has been closed. The cost of providing this guarantee varies based on the number of threads that have access to the memory segments allocated by the arena. For instance, if an arena is always created and closed by one thread, and the memory segments allocated by the arena are always accessed by that same thread, then ensuring correctness is trivial. <p> Conversely, if an arena allocates segments that can be accessed by multiple threads, or if the arena can be closed by a thread other than the accessing thread, then ensuring correctness is much more complex. For example, a segment allocated with the arena might be accessed <em>while</em> another thread attempts, concurrently, to close the arena. To provide the strong temporal safety guarantee without forcing every client, even simple ones, to incur a performance impact, arenas are divided into <em>thread-confined</em> arenas, and <em>shared</em> arenas. </p>
<p> Confined arenas, support strong thread-confinement guarantees. Upon creation, they are assigned an <em>owner thread</em>, typically the thread which initiated the creation operation. The segments created by a confined arena can only be <a href="memorysegment#isAccessibleBy(java.lang.Thread)">accessed</a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup> by the owner thread. Moreover, any attempt to close the confined arena from a thread other than the owner thread will fail with <a href="../wrongthreadexception" title="class in java.lang"><code>WrongThreadException</code></a>. </p>
<p> Shared arenas, on the other hand, have no owner thread. The segments created by a shared arena can be <a href="memorysegment#isAccessibleBy(java.lang.Thread)">accessed</a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup> by any thread. This might be useful when multiple threads need to access the same memory segment concurrently (e.g. in the case of parallel processing). Moreover, a shared arena can be closed by any thread. </p>
<h2 id="custom-arenas">Custom arenas</h2> Clients can define custom arenas to implement more efficient allocation strategies, or to have better control over when (and by whom) an arena can be closed. As an example, the following code defines a <em>slicing arena</em> that behaves like a confined arena (i.e., single-threaded access), but internally uses a <a href="segmentallocator#slicingAllocator(java.lang.foreign.MemorySegment)">slicing allocator</a><sup><a href="segmentallocator#preview-java.lang.foreign.SegmentAllocator">PREVIEW</a></sup> to respond to allocation requests. When the slicing arena is closed, the underlying confined arena is also closed; this will invalidate all segments allocated with the slicing arena (since the scope of the slicing arena is the same as that of the underlying confined arena): <div class="snippet-container">
<button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KCjwhLS0KIENvcHlyaWdodCAoYykgMjAyMSwgT3JhY2xlIGFuZC9vciBpdHMgYWZmaWxpYXRlcy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KIERPIE5PVCBBTFRFUiBPUiBSRU1PVkUgQ09QWVJJR0hUIE5PVElDRVMgT1IgVEhJUyBGSUxFIEhFQURFUi4KCiBUaGlzIGNvZGUgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdAogdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgb25seSwgYXMKIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLiAgT3JhY2xlIGRlc2lnbmF0ZXMgdGhpcwogcGFydGljdWxhciBmaWxlIGFzIHN1YmplY3QgdG8gdGhlICJDbGFzc3BhdGgiIGV4Y2VwdGlvbiBhcyBwcm92aWRlZAogYnkgT3JhY2xlIGluIHRoZSBMSUNFTlNFIGZpbGUgdGhhdCBhY2NvbXBhbmllZCB0aGlzIGNvZGUuCgogVGhpcyBjb2RlIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUCiBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IKIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQogdmVyc2lvbiAyIGZvciBtb3JlIGRldGFpbHMgKGEgY29weSBpcyBpbmNsdWRlZCBpbiB0aGUgTElDRU5TRSBmaWxlIHRoYXQKIGFjY29tcGFuaWVkIHRoaXMgY29kZSkuCgogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbgogMiBhbG9uZyB3aXRoIHRoaXMgd29yazsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLAogSW5jLiwgNTEgRnJhbmtsaW4gU3QsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BIDAyMTEwLTEzMDEgVVNBLgoKIFBsZWFzZSBjb250YWN0IE9yYWNsZSwgNTAwIE9yYWNsZSBQYXJrd2F5LCBSZWR3b29kIFNob3JlcywgQ0EgOTQwNjUgVVNBCiBvciB2aXNpdCB3d3cub3JhY2xlLmNvbSBpZiB5b3UgbmVlZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9yIGhhdmUgYW55CiBxdWVzdGlvbnMuCi0tPgoKPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDM4MCA0NjAiIGZpbGw9IiM1MDUwNTAiPgogIDxwYXRoCiAgICAgZD0iTSAzNDYsOCBIIDEwOCBDIDkwLDggNzUsMjMgNzUsNDEgdiAzMTYgYyAwLDE4IDE1LDMzIDMzLDMzIGggMjM4IGMgMTgsMCAzMywtMTUgMzMsLTMzIFYgNDEgQyAzNzksMjMgMzY0LDggMzQ2LDggWiBtIC04LDM0NCBIIDExNiBjIC0yLDAgLTMsLTEgLTMsLTMgViA0OSBjIDAsLTIgMSwtMyAzLC0zIGggMjIyIGMgMiwwIDMsMSAzLDMgdiAzMDAgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgeiIvPgogIDxwYXRoCiAgICAgZD0ibSAyOTAsMzg5IHYgMjYgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgSCA0OSBjIC0yLDAgLTMsLTEgLTMsLTMgViA5OSBjIDAsLTIgMSwtMyAzLC0zIGggMjcgdiAwIGwgLTVlLTQsLTM4IEggNDEgQyAyMyw1OCA4LDczIDgsOTEgdiAzMzIgYyAxMGUtNCwxOCAxNSwzMyAzMywzMyBoIDI1NCBjIDE4LDAgMzMsLTE1IDMzLC0zMyB2IC0zNCIvPgo8L3N2Zz4K" alt="Copy snippet"></button> <pre class="lang-java" data-language="java"><code class="language-java">class SlicingArena implements Arena {
    final Arena arena = Arena.ofConfined();
    final SegmentAllocator slicingAllocator;

    SlicingArena(long size) {
        slicingAllocator = SegmentAllocator.slicingAllocator(arena.allocate(size));
    }

    public MemorySegment allocate(long byteSize, long byteAlignment) {
        return slicingAllocator.allocate(byteSize, byteAlignment);
    }

    public MemorySegment.Scope scope() {
        return arena.scope();
    }

    public void close() {
        arena.close();
    }

}
</code></pre> </div> In other words, a slicing arena provides a vastly more efficient and scalable allocation strategy, while still retaining the timely deallocation guarantee provided by the underlying confined arena: <div class="snippet-container">
<button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KCjwhLS0KIENvcHlyaWdodCAoYykgMjAyMSwgT3JhY2xlIGFuZC9vciBpdHMgYWZmaWxpYXRlcy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KIERPIE5PVCBBTFRFUiBPUiBSRU1PVkUgQ09QWVJJR0hUIE5PVElDRVMgT1IgVEhJUyBGSUxFIEhFQURFUi4KCiBUaGlzIGNvZGUgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdAogdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgb25seSwgYXMKIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLiAgT3JhY2xlIGRlc2lnbmF0ZXMgdGhpcwogcGFydGljdWxhciBmaWxlIGFzIHN1YmplY3QgdG8gdGhlICJDbGFzc3BhdGgiIGV4Y2VwdGlvbiBhcyBwcm92aWRlZAogYnkgT3JhY2xlIGluIHRoZSBMSUNFTlNFIGZpbGUgdGhhdCBhY2NvbXBhbmllZCB0aGlzIGNvZGUuCgogVGhpcyBjb2RlIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUCiBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IKIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQogdmVyc2lvbiAyIGZvciBtb3JlIGRldGFpbHMgKGEgY29weSBpcyBpbmNsdWRlZCBpbiB0aGUgTElDRU5TRSBmaWxlIHRoYXQKIGFjY29tcGFuaWVkIHRoaXMgY29kZSkuCgogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbgogMiBhbG9uZyB3aXRoIHRoaXMgd29yazsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLAogSW5jLiwgNTEgRnJhbmtsaW4gU3QsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BIDAyMTEwLTEzMDEgVVNBLgoKIFBsZWFzZSBjb250YWN0IE9yYWNsZSwgNTAwIE9yYWNsZSBQYXJrd2F5LCBSZWR3b29kIFNob3JlcywgQ0EgOTQwNjUgVVNBCiBvciB2aXNpdCB3d3cub3JhY2xlLmNvbSBpZiB5b3UgbmVlZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9yIGhhdmUgYW55CiBxdWVzdGlvbnMuCi0tPgoKPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDM4MCA0NjAiIGZpbGw9IiM1MDUwNTAiPgogIDxwYXRoCiAgICAgZD0iTSAzNDYsOCBIIDEwOCBDIDkwLDggNzUsMjMgNzUsNDEgdiAzMTYgYyAwLDE4IDE1LDMzIDMzLDMzIGggMjM4IGMgMTgsMCAzMywtMTUgMzMsLTMzIFYgNDEgQyAzNzksMjMgMzY0LDggMzQ2LDggWiBtIC04LDM0NCBIIDExNiBjIC0yLDAgLTMsLTEgLTMsLTMgViA0OSBjIDAsLTIgMSwtMyAzLC0zIGggMjIyIGMgMiwwIDMsMSAzLDMgdiAzMDAgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgeiIvPgogIDxwYXRoCiAgICAgZD0ibSAyOTAsMzg5IHYgMjYgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgSCA0OSBjIC0yLDAgLTMsLTEgLTMsLTMgViA5OSBjIDAsLTIgMSwtMyAzLC0zIGggMjcgdiAwIGwgLTVlLTQsLTM4IEggNDEgQyAyMyw1OCA4LDczIDgsOTEgdiAzMzIgYyAxMGUtNCwxOCAxNSwzMyAzMywzMyBoIDI1NCBjIDE4LDAgMzMsLTE1IDMzLC0zMyB2IC0zNCIvPgo8L3N2Zz4K" alt="Copy snippet"></button> <pre class="lang-java" data-language="java"><code class="language-java">try (Arena slicingArena = new SlicingArena(1000)) {
    for (int i = 0; i &lt; 10; i++) {
        MemorySegment s = slicingArena.allocateArray(JAVA_INT, 1, 2, 3, 4, 5);
        ...
    }
} // all memory allocated is released here
</code></pre> </div> </div> <dl class="notes"> <dt>Implementation Requirements:</dt> <dd>Implementations of this interface are thread-safe.</dd> <dt>Since:</dt> <dd>20</dd> <dt>See Also:</dt> <dd> <ul class="tag-list"> <li>
<a href="memorysegment" title="interface in java.lang.foreign"><code>MemorySegment</code></a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup>
</li> </ul> </dd> </dl> </section> <section class="summary"> <section class="method-summary" id="method-summary"> <h2>Method Summary</h2> <div id="method-summary-table">  <div id="method-summary-table.tabpanel" role="tabpanel"> <table class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">                         <tr>
<th>Modifier and Type</th>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><code>default <a href="memorysegment" title="interface in java.lang.foreign">MemorySegment</a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup></code></td>
<td><code><a href="#allocate(long,long)" class="member-name-link">allocate</a><wbr>(long byteSize,
 long byteAlignment)</wbr></code></td>
<td> <div class="block">Returns a native memory segment with the given size (in bytes) and alignment constraint (in bytes).</div> </td>
</tr>
<tr>
<td><code>void</code></td>
<td><code><a href="#close()" class="member-name-link">close</a>()</code></td>
<td> <div class="block">Closes this arena.</div> </td>
</tr>
<tr>
<td><code>static <a href="arena" title="interface in java.lang.foreign">Arena</a><sup><a href="#preview-java.lang.foreign.Arena">PREVIEW</a></sup></code></td>
<td><code><a href="#global()" class="member-name-link">global</a>()</code></td>
<td> <div class="block">Obtains the global arena.</div> </td>
</tr>
<tr>
<td><code>static <a href="arena" title="interface in java.lang.foreign">Arena</a><sup><a href="#preview-java.lang.foreign.Arena">PREVIEW</a></sup></code></td>
<td><code><a href="#ofAuto()" class="member-name-link">ofAuto</a>()</code></td>
<td> <div class="block">Creates a new arena that is managed, automatically, by the garbage collector.</div> </td>
</tr>
<tr>
<td><code>static <a href="arena" title="interface in java.lang.foreign">Arena</a><sup><a href="#preview-java.lang.foreign.Arena">PREVIEW</a></sup></code></td>
<td><code><a href="#ofConfined()" class="member-name-link">ofConfined</a>()</code></td>
<td> <div class="block">Returns a new confined arena.</div> </td>
</tr>
<tr>
<td><code>static <a href="arena" title="interface in java.lang.foreign">Arena</a><sup><a href="#preview-java.lang.foreign.Arena">PREVIEW</a></sup></code></td>
<td><code><a href="#ofShared()" class="member-name-link">ofShared</a>()</code></td>
<td> <div class="block">Returns a new shared arena.</div> </td>
</tr>
<tr>
<td><code><a href="memorysegment.scope" title="interface in java.lang.foreign">MemorySegment.Scope</a><sup><a href="memorysegment.scope#preview-java.lang.foreign.MemorySegment.Scope">PREVIEW</a></sup></code></td>
<td><code><a href="#scope()" class="member-name-link">scope</a>()</code></td>
<td> <div class="block">Returns the arena scope.</div> </td>
</tr>
</table> </div> </div> <div class="inherited-list"> <h3 id="methods-inherited-from-class-java.lang.foreign.SegmentAllocator">Methods declared in interface java.lang.foreign.<a href="segmentallocator" title="interface in java.lang.foreign">SegmentAllocator</a><sup><a href="segmentallocator#preview-java.lang.foreign.SegmentAllocator">PREVIEW</a></sup>
</h3> <code><a href="segmentallocator#allocate(long)">allocate</a>, <a href="segmentallocator#allocate(java.lang.foreign.AddressLayout,java.lang.foreign.MemorySegment)">allocate</a>, <a href="segmentallocator#allocate(java.lang.foreign.MemoryLayout)">allocate</a>, <a href="segmentallocator#allocate(java.lang.foreign.ValueLayout.OfByte,byte)">allocate</a>, <a href="segmentallocator#allocate(java.lang.foreign.ValueLayout.OfChar,char)">allocate</a>, <a href="segmentallocator#allocate(java.lang.foreign.ValueLayout.OfDouble,double)">allocate</a>, <a href="segmentallocator#allocate(java.lang.foreign.ValueLayout.OfFloat,float)">allocate</a>, <a href="segmentallocator#allocate(java.lang.foreign.ValueLayout.OfInt,int)">allocate</a>, <a href="segmentallocator#allocate(java.lang.foreign.ValueLayout.OfLong,long)">allocate</a>, <a href="segmentallocator#allocate(java.lang.foreign.ValueLayout.OfShort,short)">allocate</a>, <a href="segmentallocator#allocateArray(java.lang.foreign.MemoryLayout,long)">allocateArray</a>, <a href="segmentallocator#allocateArray(java.lang.foreign.ValueLayout.OfByte,byte...)">allocateArray</a>, <a href="segmentallocator#allocateArray(java.lang.foreign.ValueLayout.OfChar,char...)">allocateArray</a>, <a href="segmentallocator#allocateArray(java.lang.foreign.ValueLayout.OfDouble,double...)">allocateArray</a>, <a href="segmentallocator#allocateArray(java.lang.foreign.ValueLayout.OfFloat,float...)">allocateArray</a>, <a href="segmentallocator#allocateArray(java.lang.foreign.ValueLayout.OfInt,int...)">allocateArray</a>, <a href="segmentallocator#allocateArray(java.lang.foreign.ValueLayout.OfLong,long...)">allocateArray</a>, <a href="segmentallocator#allocateArray(java.lang.foreign.ValueLayout.OfShort,short...)">allocateArray</a>, <a href="segmentallocator#allocateUtf8String(java.lang.String)">allocateUtf8String</a></code>
</div> </section> </section> <section class="details"> <section class="method-details" id="method-detail"> <h2>Method Details</h2>  </section><section class="detail" id="ofAuto()"> <h3>ofAuto</h3> <pre class="lang-java" data-language="java">static ArenaPREVIEW ofAuto()</pre> <div class="block">Creates a new arena that is managed, automatically, by the garbage collector. Segments allocated with the returned arena can be <a href="memorysegment#isAccessibleBy(java.lang.Thread)">accessed</a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup> by any thread. Calling <a href="#close()"><code>close()</code></a> on the returned arena will result in an <a href="../unsupportedoperationexception" title="class in java.lang"><code>UnsupportedOperationException</code></a>.</div> <dl class="notes"> <dt>Returns:</dt> <dd>a new arena that is managed, automatically, by the garbage collector.</dd> </dl> </section><section class="detail" id="global()"> <h3>global</h3> <pre class="lang-java" data-language="java">static ArenaPREVIEW global()</pre> <div class="block">Obtains the global arena. Segments allocated with the global arena can be <a href="memorysegment#isAccessibleBy(java.lang.Thread)">accessed</a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup> by any thread. Calling <a href="#close()"><code>close()</code></a> on the returned arena will result in an <a href="../unsupportedoperationexception" title="class in java.lang"><code>UnsupportedOperationException</code></a>.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the global arena.</dd> </dl> </section><section class="detail" id="ofConfined()"> <h3>ofConfined</h3> <pre class="lang-java" data-language="java">static ArenaPREVIEW ofConfined()</pre> <div class="block">Returns a new confined arena. Segments allocated with the confined arena can be <a href="memorysegment#isAccessibleBy(java.lang.Thread)">accessed</a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup> by the thread that created the arena, the arena's <em>owner thread</em>.</div> <dl class="notes"> <dt>Returns:</dt> <dd>a new confined arena</dd> </dl> </section><section class="detail" id="ofShared()"> <h3>ofShared</h3> <pre class="lang-java" data-language="java">static ArenaPREVIEW ofShared()</pre> <div class="block">Returns a new shared arena. Segments allocated with the global arena can be <a href="memorysegment#isAccessibleBy(java.lang.Thread)">accessed</a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup> by any thread.</div> <dl class="notes"> <dt>Returns:</dt> <dd>a new shared arena</dd> </dl> </section><section class="detail" id="allocate(long,long)"> <h3>allocate</h3> <pre class="lang-java" data-language="java">default MemorySegmentPREVIEW allocate(long byteSize, long byteAlignment)</pre> <div class="block">Returns a native memory segment with the given size (in bytes) and alignment constraint (in bytes). The returned segment is associated with this <a href="#scope()">arena scope</a>. The segment's <a href="memorysegment#address()"><code>address</code></a><sup><a href="memorysegment#preview-java.lang.foreign.MemorySegment">PREVIEW</a></sup> is the starting address of the allocated off-heap region of memory backing the segment, and the address is aligned according the provided alignment constraint.</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="segmentallocator#allocate(long,long)">allocate</a></code> in interface <code><a href="segmentallocator" title="interface in java.lang.foreign">SegmentAllocator</a><sup><a href="segmentallocator#preview-java.lang.foreign.SegmentAllocator">PREVIEW</a></sup></code>
</dd> <dt>Implementation Requirements:</dt> <dd>Implementations of this method must return a native segment featuring the requested size, and that is compatible with the provided alignment constraint. Furthermore, for any two segments <code>S1, S2</code> returned by this method, the following invariant must hold: <div class="snippet-container">
<button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KCjwhLS0KIENvcHlyaWdodCAoYykgMjAyMSwgT3JhY2xlIGFuZC9vciBpdHMgYWZmaWxpYXRlcy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KIERPIE5PVCBBTFRFUiBPUiBSRU1PVkUgQ09QWVJJR0hUIE5PVElDRVMgT1IgVEhJUyBGSUxFIEhFQURFUi4KCiBUaGlzIGNvZGUgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdAogdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgb25seSwgYXMKIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLiAgT3JhY2xlIGRlc2lnbmF0ZXMgdGhpcwogcGFydGljdWxhciBmaWxlIGFzIHN1YmplY3QgdG8gdGhlICJDbGFzc3BhdGgiIGV4Y2VwdGlvbiBhcyBwcm92aWRlZAogYnkgT3JhY2xlIGluIHRoZSBMSUNFTlNFIGZpbGUgdGhhdCBhY2NvbXBhbmllZCB0aGlzIGNvZGUuCgogVGhpcyBjb2RlIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUCiBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IKIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQogdmVyc2lvbiAyIGZvciBtb3JlIGRldGFpbHMgKGEgY29weSBpcyBpbmNsdWRlZCBpbiB0aGUgTElDRU5TRSBmaWxlIHRoYXQKIGFjY29tcGFuaWVkIHRoaXMgY29kZSkuCgogWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgdmVyc2lvbgogMiBhbG9uZyB3aXRoIHRoaXMgd29yazsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLAogSW5jLiwgNTEgRnJhbmtsaW4gU3QsIEZpZnRoIEZsb29yLCBCb3N0b24sIE1BIDAyMTEwLTEzMDEgVVNBLgoKIFBsZWFzZSBjb250YWN0IE9yYWNsZSwgNTAwIE9yYWNsZSBQYXJrd2F5LCBSZWR3b29kIFNob3JlcywgQ0EgOTQwNjUgVVNBCiBvciB2aXNpdCB3d3cub3JhY2xlLmNvbSBpZiB5b3UgbmVlZCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9yIGhhdmUgYW55CiBxdWVzdGlvbnMuCi0tPgoKPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDM4MCA0NjAiIGZpbGw9IiM1MDUwNTAiPgogIDxwYXRoCiAgICAgZD0iTSAzNDYsOCBIIDEwOCBDIDkwLDggNzUsMjMgNzUsNDEgdiAzMTYgYyAwLDE4IDE1LDMzIDMzLDMzIGggMjM4IGMgMTgsMCAzMywtMTUgMzMsLTMzIFYgNDEgQyAzNzksMjMgMzY0LDggMzQ2LDggWiBtIC04LDM0NCBIIDExNiBjIC0yLDAgLTMsLTEgLTMsLTMgViA0OSBjIDAsLTIgMSwtMyAzLC0zIGggMjIyIGMgMiwwIDMsMSAzLDMgdiAzMDAgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgeiIvPgogIDxwYXRoCiAgICAgZD0ibSAyOTAsMzg5IHYgMjYgaCAxMGUtNCBjIDAsMiAtMSwzIC0zLDMgSCA0OSBjIC0yLDAgLTMsLTEgLTMsLTMgViA5OSBjIDAsLTIgMSwtMyAzLC0zIGggMjcgdiAwIGwgLTVlLTQsLTM4IEggNDEgQyAyMyw1OCA4LDczIDgsOTEgdiAzMzIgYyAxMGUtNCwxOCAxNSwzMyAzMywzMyBoIDI1NCBjIDE4LDAgMzMsLTE1IDMzLC0zMyB2IC0zNCIvPgo8L3N2Zz4K" alt="Copy snippet"></button> <pre class="lang-java" data-language="java"><code class="language-java">    S1.asOverlappingSlice(S2).isEmpty() == true
</code></pre> </div> </dd> <dt>Parameters:</dt> <dd>
<code>byteSize</code> - the size (in bytes) of the off-heap region of memory backing the native memory segment.</dd> <dd>
<code>byteAlignment</code> - the alignment constraint (in bytes) of the off-heap region of memory backing the native memory segment.</dd> <dt>Returns:</dt> <dd>a new native memory segment.</dd> <dt>Throws:</dt> <dd>
<code><a href="../illegalargumentexception" title="class in java.lang">IllegalArgumentException</a></code> - if <code>bytesSize &lt; 0</code>, <code>byteAlignment &lt;= 0</code>, or if <code>byteAlignment</code> is not a power of 2.</dd> <dd>
<code><a href="../illegalstateexception" title="class in java.lang">IllegalStateException</a></code> - if this arena has already been <a href="#close()">closed</a>.</dd> <dd>
<code><a href="../wrongthreadexception" title="class in java.lang">WrongThreadException</a></code> - if this arena is confined, and this method is called from a thread other than the arena's owner thread.</dd> </dl> </section><section class="detail" id="scope()"> <h3>scope</h3> <pre class="lang-java" data-language="java">MemorySegment.ScopePREVIEW scope()</pre> <div class="block">Returns the arena scope.</div> <dl class="notes"> <dt>Returns:</dt> <dd>the arena scope</dd> </dl> </section><section class="detail" id="close()"> <h3>close</h3> <pre class="lang-java" data-language="java">void close()</pre> <div class="block">Closes this arena. If this method completes normally, the arena scope is no longer <a href="memorysegment.scope#isAlive()">alive</a><sup><a href="memorysegment.scope#preview-java.lang.foreign.MemorySegment.Scope">PREVIEW</a></sup>, and all the memory segments associated with it can no longer be accessed. Furthermore, any off-heap region of memory backing the segments obtained from this arena are also released.</div> <dl class="notes"> <dt>Specified by:</dt> <dd>
<code><a href="../autocloseable#close()">close</a></code> in interface <code><a href="../autocloseable" title="interface in java.lang">AutoCloseable</a></code>
</dd> <dt>API Note:</dt> <dd>This operation is not idempotent; that is, closing an already closed arena <em>always</em> results in an exception being thrown. This reflects a deliberate design choice: failure to close an arena might reveal a bug in the underlying application logic.</dd> <dt>Implementation Requirements:</dt> <dd>If this method completes normally, then <code>this.scope().isAlive() == false</code>. Implementations are allowed to throw <a href="../unsupportedoperationexception" title="class in java.lang"><code>UnsupportedOperationException</code></a> if an explicit close operation is not supported.</dd> <dt>Throws:</dt> <dd>
<code><a href="../illegalstateexception" title="class in java.lang">IllegalStateException</a></code> - if the arena has already been closed.</dd> <dd>
<code><a href="../illegalstateexception" title="class in java.lang">IllegalStateException</a></code> - if a segment associated with this arena is being accessed concurrently, e.g. by a <a href="linker#downcallHandle(java.lang.foreign.FunctionDescriptor,java.lang.foreign.Linker.Option...)">downcall method handle</a><sup><a href="linker#preview-java.lang.foreign.Linker">PREVIEW</a></sup>.</dd> <dd>
<code><a href="../wrongthreadexception" title="class in java.lang">WrongThreadException</a></code> - if this arena is confined, and this method is called from a thread other than the arena's owner thread.</dd> <dd>
<code><a href="../unsupportedoperationexception" title="class in java.lang">UnsupportedOperationException</a></code> - if this arena cannot be closed explicitly.</dd> <dt>See Also:</dt> <dd> <ul class="tag-list-long"> <li>
<a href="memorysegment.scope#isAlive()"><code>MemorySegment.Scope.isAlive()</code></a><sup><a href="memorysegment.scope#preview-java.lang.foreign.MemorySegment.Scope">PREVIEW</a></sup>
</li> </ul> </dd> </dl> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    © 1993, 2023, Oracle and/or its affiliates. All rights reserved.<br>Documentation extracted from Debian's OpenJDK Development Kit package.<br>Licensed under the GNU General Public License, version 2, with the Classpath Exception.<br>Various third party code in OpenJDK is licensed under different licenses (see Debian package).<br>Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.<br>
    <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/foreign/Arena.html" class="_attribution-link">https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/foreign/Arena.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
