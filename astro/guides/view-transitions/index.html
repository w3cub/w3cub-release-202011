
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>View Transitions (Experimental) - Astro - W3cubDocs</title>
  
  <meta name="description" content="Support for opt-in, per-page, view transitions in Astro projects can be enabled behind an experimental flag. View transitions update your page &hellip;">
  <meta name="keywords" content="view, transitions, experimental, astro">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/astro/guides/view-transitions/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/astro.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/astro/" class="_nav-link" title="" style="margin-left:0;">Astro</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 class="content-title astro-J75B3YUS" id="overview">View Transitions (Experimental)</h1> <p>Support for <strong>opt-in, per-page, view transitions</strong> in Astro projects can be enabled behind an experimental flag. View transitions update your page content without the browser’s normal, full-page navigation refresh and provide seamless animations between pages.</p> <p>Astro provides a <code>&lt;ViewTransitions /&gt;</code> routing component that can be added to a single page’s <code>&lt;head&gt;</code> to control page transitions as you navigate away to another page, an effect traditionally only possible with client-side routing. Add this component to a reusable <code>.astro</code> component, such as a common head or layout, for animated page transitions across your entire site (SPA mode).</p> <p>Astro’s view transitions support is powered by the new <a href="https://developer.chrome.com/docs/web-platform/view-transitions/">View Transitions</a> browser API and also includes:</p> <ul> <li>A few <a href="#built-in-animation-directives">built-in animations</a>, such as <code>slide</code> and <code>fade</code>.</li> <li>Support for both forwards and backwards navigation animations.</li> <li>The ability to fully <a href="#customizing-animations">customize all aspects of transition animation</a>, and build your own animations.</li> <li>
<a href="#fallback-control">Control over fallback behavior</a> for browsers that do not yet support the View Transition APIs.</li> </ul> <aside class="content caution astro-DUQFCLOB" aria-label="Caution"> <p class="title astro-DUQFCLOB" aria-hidden="true">  Caution </p> <section class="astro-DUQFCLOB"> <p>View transitions is an experimental feature enabled in Astro 2.9. The API is subject to change before it is marked as stable.</p> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="enabling-view-transitions-in-your-project">Enabling View Transitions in your Project</h2></div> <p>You can enable support for animated page transitions through the experimental <code>viewTransitions</code> flag in your Astro config:</p> <div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">astro.config.mjs</span></div>


</div> <aside class="content note astro-DUQFCLOB" aria-label="Note"> <p class="title astro-DUQFCLOB" aria-hidden="true">  Note </p> <section class="astro-DUQFCLOB"> <p>Enabling view transitions support does not automatically convert your entire site into a SPA (Single-page App). By default, every page will still use regular, full-page, browser navigation.</p>
<p>Add page transitions in Astro with the <code>&lt;ViewTransitions /&gt;</code> routing component on a per-page basis, or site-wide.</p> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="full-site-view-transitions-spa-mode">Full site view transitions (SPA mode)</h2></div> <p>Import and add the <code>&lt;ViewTransitions /&gt;</code> component to your common <code>&lt;head&gt;</code> or shared layout component. Astro will create default page animations based on the similiarities between the old and new page, and will also provide fallback behavior for unsupported browsers.</p> <p>The example below shows adding view transitions site-wide by importing and adding this component to a <code>&lt;CommonHead /&gt;</code> Astro component:</p> <div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">components/CommonHead.astro</span></div>


</div> <p>You can also add view transitions on a per-page basis. Import the <code>&lt;ViewTransitions /&gt;</code> component and place it directly inside of a page’s <code>&lt;head&gt;</code>.</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="transition-directives">Transition Directives</h2></div> <p>Use optional <code>transition:*</code> directives on page elements in your <code>.astro</code> components for finer control over the page transition animation during navigation.</p> <ul> <li>
<code>transition:name</code>: Allows you to override Astro’s default element matching for old/new content animation and <a href="#naming-a-transition">specify a transition name</a> to associate a pair of DOM elements.</li> <li>
<code>transition:animate</code>: Allows you to override Astro’s default animation by specifying an animation type. Use Astro’s <a href="#built-in-animation-directives">built-in animation directives</a> or <a href="#customizing-animations">create custom transition animations</a>.</li> </ul> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="naming-a-transition">Naming a transition</h3></div> <p>Astro will automatically assign elements found in both the old page and the new page a shared, unique <code>view-transition-name</code>. This pair of matching elements is inferred by both the type of element and its location in the DOM.</p> <p>In some cases, you may want or need to identify these elements yourself. You can specify a name for a pair of elements using the <code>transition:name</code> directive.</p>  <p>Note that the <code>transition:name</code> must be distinct per element. Set this manually when Astro can’t infer a proper name itself, or for more fine control over matching elements.</p> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="built-in-animation-directives">Built-in Animation Directives</h3></div> <p>Astro comes with a few built-in animations to override the default <code>morph</code> transition. Add the <code>transition:animate</code> directive to try Astro’s <code>slide</code> or <code>fade</code> transitions.</p> <ul> <li>
<code>morph</code> (default): The browser determines the best way to animate the element depending on how similar the pages are. For example, if the element is positionally different between pages, it will appear to float to its new position. If the element is in the exact same position, it will appear to not move at all.</li> <li>
<code>slide</code>: An animation where the old content slides out to the left and new content slides in from the right. On backwards navigation, the animations are the opposite.</li> <li>
<code>fade</code>: A cross-fade where the old content fades out and the new content fades in.</li> </ul> <p>The example below produces a slide animation for the body content while keeping a positionally-identical header in place:</p>  <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="customizing-animations">Customizing Animations</h2></div> <p>You can customize all aspects of a transition with any CSS animation properties.</p> <p>To customize a built-in animation, first import the animation from <code>astro:transitions</code>, and then pass in customization options.</p> <p>The example below customizes the duration of the built-in <code>fade</code> animation:</p>  <p>You can also define your own animations for use with <code>transition:animate</code> by defining both the forwards and backwards behavior, as well as new and old pages, according to the following types:</p>  <p>The following example shows all the necessary properties to define a custom <code>fade</code> animation:</p>  <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="fallback-control">Fallback control</h2></div> <p>The <code>&lt;ViewTransitions /&gt;</code> router works best in browsers that support View Transitions (i.e. Chromium browsers), but also includes default fallback support for other browsers. Even if the browser does not support the View Transitions API, Astro will still provide in-browser navigation using one of the fallback options for a comparable experience.</p> <p>You can override Astro’s default fallback support by adding a <code>fallback</code> property on the <code>&lt;ViewTransitions /&gt;</code> component and setting it to <code>swap</code> or <code>none</code>:</p> <ul> <li>
<code>animate</code> (default, recommended) - Astro will simulate view transitions using custom attributes before updating page content.</li> <li>
<code>swap</code> - Astro will not attempt to animate the page. Instead, the old page will be immediately replaced by the new one.</li> <li>
<code>none</code> - Astro will not do any animated page transitions at all. Instead, you will get full page navigation in non-supporting browsers.</li> </ul>  <aside class="content note astro-DUQFCLOB" aria-label="known limitations"> <p class="title astro-DUQFCLOB" aria-hidden="true">  known limitations </p> <section class="astro-DUQFCLOB"> <p>The <code>morph</code> animation cannot be simulated in traditional CSS. So any element using this animation will not be animated.</p> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="script-behavior-during-page-navigation">Script behavior during page navigation</h2></div> <p>When navigating between pages with the <code>&lt;ViewTransitions /&gt;</code> component, scripts are run in sequential order to match browser behavior.</p> <p>If you have code that sets up global state, this state will need to take into account that the script might execute more than once. Check for the global state in your <code>&lt;script&gt;</code> tag, and conditionally execute your code where possible:</p>  <p>Module scripts are only ever executed once because the browser keeps track of which modules are already loaded. For these scripts, you do not need to worry about re-execution.</p> <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="astroload"><code>astro:load</code></h4></div> <p>An event that fires at the end of page navigation, after the new page is visible to the user and blocking styles and scripts are loaded. You can listen to this event on the <code>document</code>.</p> <p>The <code>&lt;ViewTransitions /&gt;</code> component fires this event both on initial page navigation (MPA) and any subsequent navigation, either forwards or backwards.</p> <p>You can use this event to run code on every page navigation, or only once ever:</p>  <div tabindex="-1" class="heading-wrapper level-h4"><h4 id="astrobeforeload"><code>astro:beforeload</code></h4></div> <p>An event that fires immediately after the new page replaces the old page. You can listen to this event on the <code>document</code>.</p> <p>This event is useful to restore any state on the DOM that needs to transfer over to the new page.</p> <p>For example, if you are implementing dark mode support, this event can be used to restore state across page loads:</p>  <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="prefers-reduced-motion"><code>prefers-reduced-motion</code></h2></div> <p>Astro’s <code>&lt;ViewTransitions /&gt;</code> component includes a CSS media query that disables <em>all</em> view transition animations, including fallback animation, whenever the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion"><code>prefer-reduced-motion</code></a> setting is detected. Instead, the browser will simply swap the DOM elements without an animation.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2021 Fred K. Schott<br>Licensed under the MIT License.<br>
    <a href="https://docs.astro.build/en/guides/view-transitions/" class="_attribution-link">https://docs.astro.build/en/guides/view-transitions/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
