
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Share State Between Islands - Astro - W3cubDocs</title>
  
  <meta name="description" content="When building an Astro website with islands architecture &#47; partial hydration, you may have run into this problem&#58; I want to share state &hellip;">
  <meta name="keywords" content="share, state, between, islands, astro">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/astro/core-concepts/sharing-state/">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-9c7b0d969c0ce639a6c01c2badcdd81667c7c66206aa3d0fccc5cb0585fb1b912dab72ea882101d18010680927514b4b77b107282db8f756fbf63301fe9c88b0.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/astro.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/astro/" class="_nav-link" title="" style="margin-left:0;">Astro</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 class="content-title astro-J75B3YUS" id="overview">Share State Between Islands</h1> <p>When building an Astro website with <a href="../../concepts/islands/index">islands architecture / partial hydration</a>, you may have run into this problem: <strong>I want to share state between my components.</strong></p> <p>UI frameworks like React or Vue may encourage <a href="https://react.dev/learn/passing-data-deeply-with-context">‚Äúcontext‚Äù providers</a> for other components to consume. But when <a href="../framework-components/index#hydrating-interactive-components">partially hydrating components</a> within Astro or Markdown, you can‚Äôt use these context wrappers.</p> <p>Astro recommends a different solution for shared client-side storage: <a href="https://github.com/nanostores/nanostores"><strong>Nano Stores</strong></a>.</p> <div class="root astro-U7553M4S"> <div class="flex astro-U7553M4S"> <img src="data:image/webp;base64,UklGRuQEAABXRUJQVlA4WAoAAAAYAAAAMwAANQAAQUxQSGsCAAABoEZrmyFJeiMix7Zt27a9tm3btm3btm3bthVffO8iMyo7avZ/REwAVoo2y6zNnEnJOBS6dBzQdavzbr3ppFUaw5g0nEO94/9g7qebAZlzzpmaMQbo8SQpXsQLeRbyXU0YYNFdP9Mrc4PwkKG7HLD9FAdXA8CxJAOLVZn78hLY0hz2onhltKqIBHJnuJIsuv7KwFI9OQuuHIc16Vmy520wZW1DKUv5WV2YkubQl/dlWQZ13uRfJQkfhEG5DtOVXoJWpn9xI7iS4DDrXVYexJMXolzjsiyrg0abXPPoT9QYJcmjjKmVOVuRRewNlAjlCxfs2BX5rgILTN7/hOOOP/7E088++11q1K1HH374SSccf/xxW3WDMTEWHe5krDJWGfnb7og1aPw6JVIZH6TQk/vCFWU4in8wwUAOgi1Aw08ZUqDn/nBFXQPTFF4V0ztQE7klpldgmsKbq+KWqri5Aq2KNFcOWhVpVqJVEaj/D72VaQpviekZkrkZtU3BSCZzBwCbtwslDfKPB9cBXM7F9KmQfKA73H/upyQjnl8MgQMavM2QDPkX320Dg+bfUhPin7wQFi1/SksZBsO2+DEteu6HWo0/YUhK+DCAK6gimg4Dr2mITtf8SVLFS9Ak+CePtECP7W7/krHBF2qOBC3SIF7JNWAtgJbTdrngofd/FTIII+U//9UQJChzn10AADaz+G/Drq/Tk6+fdOYZZ5xx+tGHfkmv/PX6N/5g4V/v3nnoOMAg17gsc9iD5Fvb1kfhoOeo5Bh0HD5nlfU2WHX+6M4NAcAh0qK//+G69RoBtXKz2siOU+ENiDa1nAEAAFZQOCA8AgAAUA0AnQEqNAA2AD7lYqZPKSUjIiwVXZkgHIlkAMdkbc6KwKFXtoJpaNoyqLQ/FGN00F6wVZIfnXiVi1ZJjkcZ0nNZIsE90QHkgj4yGAjIg8GNR3g1bfXluGis9CqpEDIaIKQSEfuf2Uk/tJygs2T/CpkLOAD++90v7wUm4rf+3+Af0bFf9FDxRxPx/uyNmmuUn84N1S8oeCamnnI71i6f4UiRm8f9Hp1bg3B4DsRB5+mUgzo/4bnweeaxZgh0SL/aJJmVmzy9c8202SrAoix1gA9Mu6pJtpQzIzp5YuIDPxOw+qfShBsZNu7bs2FbLYm9QXO6KOogBnG8yukH0OwiE+DnM/TVmtkTBW16oDUc1kwDuwb2koEyJK3+nIi9vTEJbmgjzNy0hv2qQpmT8IGeGOmWASc8HdwGSXXiapinC4l4um2zabGEmrQWa8rLxGRQ/ZFsnmAvLdTLDk89DnLcpQ78xNMPbbKut8V2OvI0rPE6x/rStU9bxZRN+0T+Wa/kZPFrAtpeEMeI31JeMUUw7ki5RB5R3I4uviJ32A/q+PzE5/JGDVkn7vjHQboTyXOWWQI8qKDwRfPeR4/MHhDprmFlw7Qf/Y4VNXdX4X9DXrU1Dk02qM1tPVpcTLNneaESBYpH9S35JjhN7dD4DlrRVZjvdfI3Xa90VJCaBoCsRLS3lj97HXa2WoLFvBUR1hrmHn7KW+bQCefXaR8JfLC4VFMIDMFfZf8Lf7+0sF+p2hrsjrlHvC/Z1Mf4AABFWElGDgAAAE1NACoAAAAIAAAAAAAA" width="26" alt="" class="astro-U7553M4S"> <strong class="astro-U7553M4S">Related recipe:</strong> <a href="../../recipes/sharing-state/index" class="astro-U7553M4S"> Share State Between Astro Components </a> </div> </div> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="why-nano-stores">Why Nano Stores?</h2></div> <p>The <a href="https://github.com/nanostores/nanostores">Nano Stores</a> library allows you to author stores that any component can interact with. We recommend Nano Stores because:</p> <ul> <li>
<strong>They‚Äôre lightweight.</strong> Nano Stores ship the bare minimum JS you‚Äôll need (less than 1 KB) with zero dependencies.</li> <li>
<strong>They‚Äôre framework-agnostic.</strong> This means sharing state between frameworks will be seamless! Astro is built on flexibility, so we love solutions that offer a similar developer experience no matter your preference.</li> </ul> <p>Still, there are a number of alternatives you can explore. These include:</p> <ul> <li><a href="https://svelte.dev/tutorial/writable-stores">Svelte‚Äôs built-in stores</a></li> <li>
<a href="https://www.solidjs.com/docs/latest">Solid signals</a> outside of a component context</li> <li><a href="https://vuejs.org/guide/scaling-up/state-management.html#simple-state-management-with-reactivity-api">Vue‚Äôs reactivity API</a></li> <li>
<a href="https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events">Sending custom browser events</a> between components</li> </ul> <aside class="content note astro-DUQFCLOB" aria-label="FAQ"> <p class="title astro-DUQFCLOB" aria-hidden="true">  FAQ </p> <section class="astro-DUQFCLOB"> <details><summary><strong>üôã Can I use Nano Stores in <code>.astro</code> files or other server-side components?</strong></summary><p>Nano Stores <em>can</em> be imported, written to, and read from in server-side components, <strong>but we don‚Äôt recommend it!</strong> This is due to a few restrictions:</p>
<ul> <li>Writing to a store from a <code>.astro</code> file or <a href="../framework-components/index#hydrating-interactive-components">non-hydrated component</a> will <em>not</em> affect the value received by <a href="../../reference/directives-reference/index#client-directives">client-side components</a>.</li> <li>You cannot pass a Nano Store as a ‚Äúprop‚Äù to client-side components.</li> <li>You cannot subscribe to store changes from a <code>.astro</code> file, since Astro components do not re-render.</li> </ul>
<p>If you understand these restrictions and still find a use case, you can give Nano Stores a try! Just remember that Nano Stores are built for reactivity to changes on the <strong>client</strong> specifically.</p></details><details><summary><strong>üôã How do Svelte stores compare to Nano Stores?</strong></summary><p><strong>Nano Stores and <a href="https://svelte.dev/tutorial/writable-stores">Svelte stores</a> are very similar!</strong> In fact, <a href="https://github.com/nanostores/nanostores#svelte">nanostores allow you to use the same <code>$</code> shortcut</a> for subscriptions that you might use with Svelte stores.</p>
<p>If you want to avoid third-party libraries, <a href="https://svelte.dev/tutorial/writable-stores">Svelte stores</a> are a great cross-island communication tool on their own. Still, you might prefer Nano Stores if a) you like their add-ons for <a href="https://github.com/nanostores/nanostores#maps">‚Äúobjects‚Äù</a> and <a href="https://github.com/nanostores/nanostores#lazy-stores">async state</a>, or b) you want to communicate between Svelte and other UI frameworks like Preact or Vue.</p></details><details><summary><strong>üôã How do Solid signals compare to Nano Stores?</strong></summary><p>If you‚Äôve used Solid for a while, you may have tried moving <a href="https://www.solidjs.com/docs/latest#createsignal">signals</a> or <a href="https://www.solidjs.com/docs/latest#createstore">stores</a> outside of your components. This is a great way to share state between Solid islands! Try exporting signals from a shared file:</p>
<div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">sharedStore.js</span></div>


</div>
<p>‚Ä¶and all components importing <code>sharedCount</code> will share the same state. Though this works well, you might prefer Nano Stores if a) you like their add-ons for <a href="https://github.com/nanostores/nanostores#maps">‚Äúobjects‚Äù</a> and <a href="https://github.com/nanostores/nanostores#lazy-stores">async state</a>, or b) you want to communicate between Solid and other UI frameworks like Preact or Vue.</p></details> </section> </aside> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="installing-nano-stores">Installing Nano Stores</h2></div> <p>To get started, install Nano Stores alongside their helper package for your favorite UI framework:</p> <astro-island uid="hbGqk" component-url="/_astro/Tabs.33c23373.js" component-export="default" renderer-url="/_astro/client.5c11df2d.js" props='{"sharedStore":[0,"ui-frameworks"]}' ssr="" client="visible" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="26-tab.preact"><astro-slot name="tab.preact">Preact</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="26-tab.react"><astro-slot name="tab.react">React</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="26-tab.solid"><astro-slot name="tab.solid">Solid</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="26-tab.svelte"><astro-slot name="tab.svelte">Svelte</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="26-tab.vue"><astro-slot name="tab.vue">Vue</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="26-tab.preact" class="_tabpanel_1kkny_26"><astro-slot name="panel.preact"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="26-tab.react" class="_tabpanel_1kkny_26"><astro-slot name="panel.react"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="26-tab.solid" class="_tabpanel_1kkny_26"><astro-slot name="panel.solid"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="26-tab.vue" class="_tabpanel_1kkny_26"><astro-slot name="panel.vue"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="26-tab.svelte" class="_tabpanel_1kkny_26"><astro-slot name="panel.svelte"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading">
<span class="sr-only">Terminal window</span>
</div>


</div>
<aside class="content note astro-DUQFCLOB" aria-label="Note"> <p class="title astro-DUQFCLOB" aria-hidden="true">  Note </p> <section class="astro-DUQFCLOB"> <p>No helper package here! Nano Stores can be used like standard Svelte stores.</p> </section> </aside></astro-slot></div>
</div></astro-island> <p>You can jump into the <a href="https://github.com/nanostores/nanostores#guide">Nano Stores usage guide</a> from here, or follow along with our example below!</p> <div tabindex="-1" class="heading-wrapper level-h2"><h2 id="usage-example---ecommerce-cart-flyout">Usage example - ecommerce cart flyout</h2></div> <p>Let‚Äôs say we‚Äôre building a simple ecommerce interface with three interactive elements:</p> <ul> <li>An ‚Äúadd to cart‚Äù submission form</li> <li>A cart flyout to display those added items</li> <li>A cart flyout toggle</li> </ul>  <p><em><a href="https://github.com/withastro/astro/tree/main/examples/with-nanostores"><strong>Try the completed example</strong></a> on your machine or online via Stackblitz.</em></p> <p>Your base Astro file may look like this:</p> <div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/pages/index.astro</span></div>


</div> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="using-atoms">Using ‚Äúatoms‚Äù</h3></div> <p>Let‚Äôs start by opening our <code>CartFlyout</code> whenever <code>CartFlyoutToggle</code> is clicked.</p> <p>First, create a new JS or TS file to contain our store. We‚Äôll use an <a href="https://github.com/nanostores/nanostores#atoms">‚Äúatom‚Äù</a> for this:</p> <div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/cartStore.js</span></div>


</div> <p>Now, we can import this store into any file that needs to read or write. We‚Äôll start by wiring up our <code>CartFlyoutToggle</code>:</p> <astro-island uid="h6jBw" component-url="/_astro/Tabs.33c23373.js" component-export="default" renderer-url="/_astro/client.5c11df2d.js" props='{"sharedStore":[0,"ui-frameworks"]}' ssr="" client="visible" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="20-tab.preact"><astro-slot name="tab.preact">Preact</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="20-tab.react"><astro-slot name="tab.react">React</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="20-tab.solid"><astro-slot name="tab.solid">Solid</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="20-tab.svelte"><astro-slot name="tab.svelte">Svelte</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="20-tab.vue"><astro-slot name="tab.vue">Vue</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="20-tab.preact" class="_tabpanel_1kkny_26"><astro-slot name="panel.preact"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="20-tab.react" class="_tabpanel_1kkny_26"><astro-slot name="panel.react"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="20-tab.solid" class="_tabpanel_1kkny_26"><astro-slot name="panel.solid"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="20-tab.svelte" class="_tabpanel_1kkny_26"><astro-slot name="panel.svelte"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.svelte</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="20-tab.vue" class="_tabpanel_1kkny_26"><astro-slot name="panel.vue"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyoutToggle.vue</span></div>


</div></astro-slot></div>
</div></astro-island> <p>Then, we can read <code>isCartOpen</code> from our <code>CartFlyout</code> component:</p> <astro-island uid="ZQJbyk" component-url="/_astro/Tabs.33c23373.js" component-export="default" renderer-url="/_astro/client.5c11df2d.js" props='{"sharedStore":[0,"ui-frameworks"]}' ssr="" client="visible" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="21-tab.preact"><astro-slot name="tab.preact">Preact</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="21-tab.react"><astro-slot name="tab.react">React</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="21-tab.solid"><astro-slot name="tab.solid">Solid</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="21-tab.svelte"><astro-slot name="tab.svelte">Svelte</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="21-tab.vue"><astro-slot name="tab.vue">Vue</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="21-tab.preact" class="_tabpanel_1kkny_26"><astro-slot name="panel.preact"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="21-tab.react" class="_tabpanel_1kkny_26"><astro-slot name="panel.react"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="21-tab.solid" class="_tabpanel_1kkny_26"><astro-slot name="panel.solid"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="21-tab.svelte" class="_tabpanel_1kkny_26"><astro-slot name="panel.svelte"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.svelte</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="21-tab.vue" class="_tabpanel_1kkny_26"><astro-slot name="panel.vue"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.vue</span></div>


</div></astro-slot></div>
</div></astro-island> <div tabindex="-1" class="heading-wrapper level-h3"><h3 id="using-maps">Using ‚Äúmaps‚Äù</h3></div> <aside class="content tip astro-DUQFCLOB" aria-label="Tip"> <p class="title astro-DUQFCLOB" aria-hidden="true">  Tip </p> <section class="astro-DUQFCLOB"> <p><strong><a href="https://github.com/nanostores/nanostores#maps">Maps</a> are a great choice for objects you write to regularly!</strong> Alongside the standard <code>get()</code> and <code>set()</code> helpers an <code>atom</code> provides, you‚Äôll also have a <code>.setKey()</code> function to efficiently update individual object keys.</p> </section> </aside> <p>Now, let‚Äôs keep track of the items inside your cart. To avoid duplicates and keep track of ‚Äúquantity,‚Äù we can store your cart as an object with the item‚Äôs ID as a key. We‚Äôll use a <a href="https://github.com/nanostores/nanostores#maps">Map</a> for this.</p> <p>Let‚Äôs add a <code>cartItem</code> store to our <code>cartStore.js</code> from earlier. You can also switch to a TypeScript file to define the shape if you‚Äôre so inclined.</p> <astro-island uid="Z2uPlIz" component-url="/_astro/Tabs.33c23373.js" component-export="default" renderer-url="/_astro/client.5c11df2d.js" props='{"sharedStore":[0,"javascript-flavors"]}' ssr="" client="visible" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="22-tab.js"><astro-slot name="tab.js">JavaScript</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="22-tab.ts"><astro-slot name="tab.ts">TypeScript</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="22-tab.js" class="_tabpanel_1kkny_26"><astro-slot name="panel.js"> <div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/cartStore.js</span></div>


</div> </astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="22-tab.ts" class="_tabpanel_1kkny_26"><astro-slot name="panel.ts"> <div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/cartStore.ts</span></div>


</div> </astro-slot></div>
</div></astro-island> <p>Now, let‚Äôs export an <code>addCartItem</code> helper for our components to use.</p> <ul> <li>
<strong>If that item doesn‚Äôt exist in your cart</strong>, add the item with a starting quantity of 1.</li> <li>
<strong>If that item <em>does</em> already exist</strong>, bump the quantity by 1.</li> </ul> <astro-island uid="ZsuG7p" component-url="/_astro/Tabs.33c23373.js" component-export="default" renderer-url="/_astro/client.5c11df2d.js" props='{"sharedStore":[0,"javascript-flavors"]}' ssr="" client="visible" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="23-tab.js"><astro-slot name="tab.js">JavaScript</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="23-tab.ts"><astro-slot name="tab.ts">TypeScript</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="23-tab.js" class="_tabpanel_1kkny_26"><astro-slot name="panel.js"> <div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/cartStore.js</span></div>


</div> </astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="23-tab.ts" class="_tabpanel_1kkny_26"><astro-slot name="panel.ts"> <div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/cartStore.ts</span></div>


</div> </astro-slot></div>
</div></astro-island> <aside class="content note astro-DUQFCLOB" aria-label="Note"> <p class="title astro-DUQFCLOB" aria-hidden="true">  Note </p> <section class="astro-DUQFCLOB"> <details><summary><strong>üôã Why use <code>.get()</code> here instead of a <code>useStore</code> helper?</strong></summary><p>You may have noticed we‚Äôre calling <code>cartItems.get()</code> here, instead of grabbing that <code>useStore</code> helper from our React / Preact / Solid / Vue examples. This is because <strong>useStore is meant to trigger component re-renders.</strong> In other words, <code>useStore</code> should be used whenever the store value is being rendered to the UI. Since we‚Äôre reading the value when an <strong>event</strong> is triggered (<code>addToCart</code> in this case), and we aren‚Äôt trying to render that value, we don‚Äôt need <code>useStore</code> here.</p></details> </section> </aside> <p>With our store in place, we can call this function inside our <code>AddToCartForm</code> whenever that form is submitted. We‚Äôll also open the cart flyout so you can see a full cart summary.</p> <astro-island uid="1sKrtW" component-url="/_astro/Tabs.33c23373.js" component-export="default" renderer-url="/_astro/client.5c11df2d.js" props='{"sharedStore":[0,"ui-frameworks"]}' ssr="" client="visible" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="24-tab.preact"><astro-slot name="tab.preact">Preact</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="24-tab.react"><astro-slot name="tab.react">React</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="24-tab.solid"><astro-slot name="tab.solid">Solid</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="24-tab.svelte"><astro-slot name="tab.svelte">Svelte</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="24-tab.vue"><astro-slot name="tab.vue">Vue</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="24-tab.preact" class="_tabpanel_1kkny_26"><astro-slot name="panel.preact"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="24-tab.react" class="_tabpanel_1kkny_26"><astro-slot name="panel.react"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="24-tab.solid" class="_tabpanel_1kkny_26"><astro-slot name="panel.solid"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="24-tab.svelte" class="_tabpanel_1kkny_26"><astro-slot name="panel.svelte"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.svelte</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="24-tab.vue" class="_tabpanel_1kkny_26"><astro-slot name="panel.vue"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/AddToCartForm.vue</span></div>


</div></astro-slot></div>
</div></astro-island> <p>Finally, we‚Äôll render those cart items inside our <code>CartFlyout</code>:</p> <astro-island uid="Z1TuyWL" component-url="/_astro/Tabs.33c23373.js" component-export="default" renderer-url="/_astro/client.5c11df2d.js" props='{"sharedStore":[0,"ui-frameworks"]}' ssr="" client="visible" opts='{"name":"Tabs","value":true}' await-children=""><div class="_container_1kkny_1">
<div class="_tab-scroll-overflow_1kkny_6"><div class="_tablist_1kkny_30 TabGroup no-flex" role="tablist">
<button aria-selected="true" tabindex="0" role="tab" type="button" class="_tab_1kkny_6" id="25-tab.preact"><astro-slot name="tab.preact">Preact</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="25-tab.react"><astro-slot name="tab.react">React</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="25-tab.solid"><astro-slot name="tab.solid">Solid</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="25-tab.svelte"><astro-slot name="tab.svelte">Svelte</astro-slot></button><button aria-selected="false" tabindex="-1" role="tab" type="button" class="_tab_1kkny_6" id="25-tab.vue"><astro-slot name="tab.vue">Vue</astro-slot></button>
</div></div>
<div role="tabpanel" aria-labelledby="25-tab.preact" class="_tabpanel_1kkny_26"><astro-slot name="panel.preact"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="25-tab.react" class="_tabpanel_1kkny_26"><astro-slot name="panel.react"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="25-tab.solid" class="_tabpanel_1kkny_26"><astro-slot name="panel.solid"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.jsx</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="25-tab.svelte" class="_tabpanel_1kkny_26"><astro-slot name="panel.svelte"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.svelte</span></div>


</div></astro-slot></div>
<div hidden role="tabpanel" aria-labelledby="25-tab.vue" class="_tabpanel_1kkny_26"><astro-slot name="panel.vue"><div class="expressive-code ec ec-miaxv">
<div class="_pre-heading"><span class="title">src/components/CartFlyout.vue</span></div>


</div></astro-slot></div>
</div></astro-island> <p>Now, you should have a fully interactive ecommerce example with the smallest JS bundle in the galaxy üöÄ</p> <p><a href="https://github.com/withastro/astro/tree/main/examples/with-nanostores"><strong>Try the completed example</strong></a> on your machine or online via Stackblitz!</p> <hr class="astro-763JALMV"> <h2 class="astro-763JALMV">More recipes</h2> <div class="astro-T6XFTCHQ"> <section class="cards-nav astro-T6XFTCHQ astro-KQ5JY4FU"> <ul class="fluid-grid astro-OXK5CGH7"> <li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="index" aria-current="page" class="astro-HAR75NUP"> Share State Between Islands </a> </h3> <p class="description astro-KQ5JY4FU">Learn how to share state across framework components with Nano Stores.</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../guides/rss/index" aria-current="false" class="astro-HAR75NUP"> Add an RSS feed </a> </h3> <p class="description astro-KQ5JY4FU">Add an RSS feed to your Astro site to let users subscribe to your content.</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/add-yaml-support/index" aria-current="false" class="astro-HAR75NUP"> Installing a Vite or Rollup plugin </a> </h3> <p class="description astro-KQ5JY4FU">Learn how you can import YAML data by adding a Rollup plugin to your project.</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/build-forms-api/index" aria-current="false" class="astro-HAR75NUP"> Build Forms With API Routes </a> </h3> <p class="description astro-KQ5JY4FU">Learn how to use JavaScript to send form submissions to an API Route</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/build-forms/index" aria-current="false" class="astro-HAR75NUP"> Build HTML Forms in Astro Pages </a> </h3> <p class="description astro-KQ5JY4FU">Learn how to build HTML forms and handle submissions in your frontmatter</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/bun/index" aria-current="false" class="astro-HAR75NUP"> Use Bun with Astro </a> </h3> <p class="description astro-KQ5JY4FU">Learn how to use Bun with your Astro site.</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/call-endpoints/index" aria-current="false" class="astro-HAR75NUP"> Call endpoints from the server </a> </h3> <p class="description astro-KQ5JY4FU">Learn how to call endpoints from the server in Astro.</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/captcha/index" aria-current="false" class="astro-HAR75NUP"> Verify a Captcha </a> </h3> <p class="description astro-KQ5JY4FU">Learn how to create an API route and fetch it from the client.</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/docker/index" aria-current="false" class="astro-HAR75NUP"> Build your Astro Site with Docker </a> </h3> <p class="description astro-KQ5JY4FU">Learn how to build your Astro site using Docker.</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/external-links/index" aria-current="false" class="astro-HAR75NUP"> Add icons to external links </a> </h3> <p class="description astro-KQ5JY4FU">Learn how to install a rehype plugin to add icons to external links in your Markdown files</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/i18n/index" aria-current="false" class="astro-HAR75NUP"> Add i18n features </a> </h3> <p class="description astro-KQ5JY4FU">Use dynamic routing and content collections to add internationalization support to your Astro site.</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/reading-time/index" aria-current="false" class="astro-HAR75NUP"> Add Reading Time </a> </h3> <p class="description astro-KQ5JY4FU">Build a remark plugin to add reading time to your Markdown or MDX files.</p> </div> </li>
<li class="card card--maximal astro-KQ5JY4FU astro-HAR75NUP"> <div class="stack astro-HAR75NUP"> <h3 class="astro-HAR75NUP"> <a href="../../recipes/sharing-state/index" aria-current="false" class="astro-HAR75NUP"> Share State Between Astro Components </a> </h3> <p class="description astro-KQ5JY4FU">Learn how to share state across Astro components with Nano Stores.</p> </div> </li> </ul> </section> </div>
<div class="_attribution">
  <p class="_attribution-p">
    ¬© 2021 Fred K. Schott<br>Licensed under the MIT License.<br>
    <a href="https://docs.astro.build/en/core-concepts/sharing-state/" class="_attribution-link">https://docs.astro.build/en/core-concepts/sharing-state/</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
