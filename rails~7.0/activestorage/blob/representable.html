
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>ActiveStorage&#58;&#58;Blob&#58;&#58;Representable - Ruby on Rails 7.0 - W3cubDocs</title>
  
  <meta name="description" content="Returns an ActiveStorage&#58;&#58;Preview instance with the set of transformations provided. A preview is an image generated from a non-image blob. &hellip;">
  <meta name="keywords" content="module, activestorage, blob, representable, ruby, on, rails, rails~7.0">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/rails~7.0/activestorage/blob/representable.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/rails~7.0.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/rails~7.0/" class="_nav-link" title="" style="margin-left:0;">Ruby on Rails 7.0</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _rdoc">
				
				
<h1 id="module-ActiveStorage::Blob::Representable" class="module"> module ActiveStorage::Blob::Representable </h1>  <section id="5Buntitled-5D" class="documentation-section"> <section id="public-instance-5Buntitled-5D-method-details" class="method-section"> <header> <h3>Public Instance Methods</h3> </header> <div class="method-detail "> <div class="method-heading" id="method-i-preview"> <span class="method-name">preview</span><span class="method-args">(transformations)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="preview-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 63
def preview(transformations)
  if previewable?
    ActiveStorage::Preview.new(self, transformations)
  else
    raise ActiveStorage::UnpreviewableError
  end
end</pre> </div> <p>Returns an <a href="../preview"><code>ActiveStorage::Preview</code></a> instance with the set of <code>transformations</code> provided. A preview is an image generated from a non-image blob. Active Storage comes with built-in previewers for videos and PDF documents. The video previewer extracts the first frame from a video and the PDF previewer extracts the first page from a PDF document.</p> <pre class="ruby" data-language="ruby">blob.preview(resize_to_limit: [100, 100]).processed.url
</pre> <p>Avoid processing previews synchronously in views. Instead, link to a controller action that processes them on demand. Active Storage provides one, but you may want to create your own (for example, if you need authentication). Here’s how to use the built-in version:</p> <pre>&lt;%= image_tag video.preview(resize_to_limit: [100, 100]) %&gt;</pre> <p>This method raises <a href="../unpreviewableerror"><code>ActiveStorage::UnpreviewableError</code></a> if no previewer accepts the receiving blob. To determine whether a blob is accepted by any previewer, call <a href="representable#method-i-previewable-3F"><code>ActiveStorage::Blob#previewable?</code></a>.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-previewable-3F"> <span class="method-name">previewable?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="previewable-3F-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 72
def previewable?
  ActiveStorage.previewers.any? { |klass| klass.accept?(self) }
end</pre> </div> <p>Returns true if any registered previewer accepts the blob. By default, this will return true for videos and PDF documents.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-representable-3F"> <span class="method-name">representable?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="representable-3F-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 97
def representable?
  variable? || previewable?
end</pre> </div> <p>Returns true if the blob is variable or previewable.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-representation"> <span class="method-name">representation</span><span class="method-args">(transformations)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="representation-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 85
def representation(transformations)
  case
  when previewable?
    preview transformations
  when variable?
    variant transformations
  else
    raise ActiveStorage::UnrepresentableError
  end
end</pre> </div> <p>Returns an <a href="../preview"><code>ActiveStorage::Preview</code></a> for a previewable blob or an <a href="../variant"><code>ActiveStorage::Variant</code></a> for a variable image blob.</p> <pre class="ruby" data-language="ruby">blob.representation(resize_to_limit: [100, 100]).processed.url
</pre> <p>Raises <a href="../unrepresentableerror"><code>ActiveStorage::UnrepresentableError</code></a> if the receiving blob is neither variable nor previewable. Call <a href="representable#method-i-representable-3F"><code>ActiveStorage::Blob#representable?</code></a> to determine whether a blob is representable.</p> <p>See <a href="representable#method-i-preview"><code>ActiveStorage::Blob#preview</code></a> and <a href="representable#method-i-variant"><code>ActiveStorage::Blob#variant</code></a> for more information.</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-variable-3F"> <span class="method-name">variable?</span><span class="method-args">()</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="variable-3F-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 44
def variable?
  ActiveStorage.variable_content_types.include?(content_type)
end</pre> </div> <p>Returns true if the variant processor can transform the blob (its content type is in <code>ActiveStorage.variable_content_types</code>).</p>  </div> </div> <div class="method-detail "> <div class="method-heading" id="method-i-variant"> <span class="method-name">variant</span><span class="method-args">(transformations)</span> <a class="method-click-advice">Show source</a> </div> <div class="method-description">
<div class="method-source-code" id="variant-source"> <pre class="ruby" data-language="ruby"># File activestorage/app/models/active_storage/blob/representable.rb, line 34
def variant(transformations)
  if variable?
    variant_class.new(self, ActiveStorage::Variation.wrap(transformations).default_to(default_variant_transformations))
  else
    raise ActiveStorage::InvariableError
  end
end</pre> </div> <p>Returns an <a href="../variant"><code>ActiveStorage::Variant</code></a> or <a href="../variantwithrecord"><code>ActiveStorage::VariantWithRecord</code></a> instance with the set of <code>transformations</code> provided. This is only relevant for image files, and it allows any image to be transformed for size, colors, and the like. Example:</p> <pre class="ruby" data-language="ruby">avatar.variant(resize_to_limit: [100, 100]).processed.url
</pre> <p>This will create and process a variant of the avatar blob that's constrained to a height and width of 100px. Then it'll upload said variant to the service according to a derivative key of the blob and the transformations.</p> <p>Frequently, though, you don't actually want to transform the variant right away. But rather simply refer to a specific variant that can be created by a controller on-demand. Like so:</p> <pre>&lt;%= image_tag Current.user.avatar.variant(resize_to_limit: [100, 100]) %&gt;</pre> <p>This will create a URL for that specific blob with that specific variant, which the ActiveStorage::RepresentationsController can then produce on-demand.</p> <p>Raises <a href="../invariableerror"><code>ActiveStorage::InvariableError</code></a> if the variant processor cannot transform the blob. To determine whether a blob is variable, call <a href="representable#method-i-variable-3F"><code>ActiveStorage::Blob#variable?</code></a>.</p>  </div> </div> </section> </section><div class="_attribution">
  <p class="_attribution-p">
    © 2004–2021 David Heinemeier Hansson<br>Licensed under the MIT License.<br>
    
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
