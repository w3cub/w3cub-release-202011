
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Relay Store - Relay 9 - W3cubDocs</title>
  
  <meta name="description" content="The Relay Store can be used to programmatically update client-side data inside updater functions. The following is a reference of the Relay Store &hellip;">
  <meta name="keywords" content="relay, store, relay~9">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/relay~9/relay-store.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/relay~9.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/relay~9/" class="_nav-link" title="" style="margin-left:0;">Relay 9</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 id="__docusaurus" class="postHeaderTitle">Relay Store</h1>
<article><div><span><p>The Relay Store can be used to programmatically update client-side data inside <a href="mutations#using-updater-and-optimisticupdater"><code>updater</code> functions</a>. The following is a reference of the Relay Store interface.</p> <p>Table of Contents:</p> <ul> <li><a href="#recordsourceselectorproxy">RecordSourceSelectorProxy</a></li> <li><a href="#recordproxy">RecordProxy</a></li> <li><a href="#connectionhandler">ConnectionHandler</a></li> </ul> <h2 id="recordsourceselectorproxy">
RecordSourceSelectorProxy</h2> <p>The <code>RecordSourceSelectorProxy</code> is the type of the <code>store</code> that <a href="mutations#using-updater-and-optimisticupdater"><code>updater</code> functions</a> receive as an argument. The following is the <code>RecordSourceSelectorProxy</code> interface:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript">interface RecordSourceSelectorProxy {
  create(dataID: string, <span class="hljs-attr">typeName</span>: string): RecordProxy;
  <span class="hljs-keyword">delete</span>(dataID: string): <span class="hljs-keyword">void</span>;
  <span class="hljs-keyword">get</span>(dataID: string): ?RecordProxy;
  getRoot(): RecordProxy;
  getRootField(fieldName: string): ?RecordProxy;
  getPluralRootField(fieldName: string): ?Array&lt;?RecordProxy&gt;;
  invalidateStore(): void;
}
</code></pre> <h3 id="createdataid-string-typename-string-recordproxy">
<code>create(dataID: string, typeName: string): RecordProxy</code>
</h3> <p>Creates a new record in the store given a <code>dataID</code> and the <code>typeName</code> as defined by the GraphQL schema. Returns a <a href="#recordproxy"><code>RecordProxy</code></a> which serves as an interface to mutate the newly created record.</p> <h4>
Example</h4> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> record = store.create(dataID, <span class="hljs-string">'Todo'</span>);
</code></pre> <h3 id="deletedataid-string-void">
<code>delete(dataID: string): void</code>
</h3> <p>Deletes a record from the store given its <code>dataID</code>.</p> <h4>
Example</h4> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript">store.delete(dataID);
</code></pre> <h3 id="getdataid-string-recordproxy">
<code>get(dataID: string): ?RecordProxy</code>
</h3> <p>Retrieves a record from the store given its <code>dataID</code>. Returns a <a href="#recordproxy"><code>RecordProxy</code></a> which serves as an interface to mutate the record.</p> <h4>
Example</h4> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> record = store.get(dataID);
</code></pre> <h3 id="getroot-recordproxy">
<code>getRoot(): RecordProxy</code>
</h3> <p>Returns the <a href="#recordproxy"><code>RecordProxy</code></a> representing the root of the GraphQL document.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql"><span class="hljs-section">viewer</span> {
  <span class="hljs-attribute">id</span>
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-comment">// Represents root query</span>
<span class="hljs-keyword">const</span> root = store.getRoot();
</code></pre> <h3 id="getrootfieldfieldname-string-recordproxy">
<code>getRootField(fieldName: string): ?RecordProxy</code>
</h3> <p>Retrieves a root field from the store given the <code>fieldName</code>, as defined by the GraphQL document. Returns a <a href="#recordproxy"><code>RecordProxy</code></a> which serves as an interface to mutate the record.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql"><span class="hljs-section">viewer</span> {
  <span class="hljs-attribute">id</span>
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> viewer = store.getRootField(<span class="hljs-string">'viewer'</span>);
</code></pre> <h3 id="getpluralrootfieldfieldname-string-arrayrecordproxy">
<code>getPluralRootField(fieldName: string): ?Array&lt;?RecordProxy&gt;</code>
</h3> <p>Retrieves a root field that represents a collection from the store given the <code>fieldName</code>, as defined by the GraphQL document. Returns an array of <a href="#recordproxy"><code>RecordProxies</code></a>.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql">nodes(<span class="hljs-keyword">first</span>: <span class="hljs-number">10</span>) {
  <span class="hljs-comment"># ...</span>
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> nodes = store.getPluralRootField(<span class="hljs-string">'nodes'</span>);
</code></pre> <h3 id="invalidatestore-void">
<code>invalidateStore(): void</code>
</h3> <p>Globally invalidates the Relay store. This will cause any data that was written to the store before invalidation occurred to be considered stale, and will be considered to require refetch the next time a query is checked with <code>environment.check()</code>.</p> <h4>
Example</h4> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript">store.invalidateStore();
</code></pre> <p>After global invalidation, any query that is checked before refetching it will be considered stale:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript">environment.check(query) === <span class="hljs-string">'stale'</span>
</code></pre> <h2 id="recordproxy">
RecordProxy</h2> <p>The <code>RecordProxy</code> serves as an interface to mutate records:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript">interface RecordProxy {
  copyFieldsFrom(sourceRecord: RecordProxy): <span class="hljs-keyword">void</span>;
  getDataID(): string;
  getLinkedRecord(name: string, <span class="hljs-built_in">arguments</span>?: ?<span class="hljs-built_in">Object</span>): ?RecordProxy;
  getLinkedRecords(name: string, <span class="hljs-built_in">arguments</span>?: ?<span class="hljs-built_in">Object</span>): ?<span class="hljs-built_in">Array</span>&lt;?RecordProxy&gt;;
  getOrCreateLinkedRecord(
    name: string,
    <span class="hljs-attr">typeName</span>: string,
    <span class="hljs-built_in">arguments</span>?: ?<span class="hljs-built_in">Object</span>,
  ): RecordProxy;
  getType(): string;
  getValue(name: string, <span class="hljs-built_in">arguments</span>?: ?<span class="hljs-built_in">Object</span>): mixed;
  setLinkedRecord(
    record: RecordProxy,
    <span class="hljs-attr">name</span>: string,
    <span class="hljs-built_in">arguments</span>?: ?<span class="hljs-built_in">Object</span>,
  ): RecordProxy;
  setLinkedRecords(
    records: <span class="hljs-built_in">Array</span>&lt;?RecordProxy&gt;,
    <span class="hljs-attr">name</span>: string,
    <span class="hljs-built_in">arguments</span>?: ?<span class="hljs-built_in">Object</span>,
  ): RecordProxy;
  setValue(value: mixed, <span class="hljs-attr">name</span>: string, <span class="hljs-built_in">arguments</span>?: ?<span class="hljs-built_in">Object</span>): RecordProxy;
  invalidateRecord(): <span class="hljs-keyword">void</span>;
}
</code></pre> <h3 id="getdataid-string">
<code>getDataID(): string</code>
</h3> <p>Returns the dataID of the current record.</p> <h4>
Example</h4> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> id = record.getDataID();
</code></pre> <h3 id="gettype-string">
<code>getType(): string</code>
</h3> <p>Gets the type of the current record, as defined by the GraphQL schema.</p> <h4>
Example</h4> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> type = user.getType();  <span class="hljs-comment">// User</span>
</code></pre> <h3 id="getvaluename-string-arguments-object-mixed">
<code>getValue(name: string, arguments?: ?Object): mixed</code>
</h3> <p>Gets the value of a field in the current record given the field name.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql">viewer {
  <span class="hljs-built_in">id</span>
  <span class="hljs-built_in">name</span>
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> name = viewer.getValue(<span class="hljs-string">'name'</span>);
</code></pre> <p>Optionally, if the field takes arguments, you can pass a bag of <code>variables</code>.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql"><span class="hljs-section">viewer</span> {
  <span class="hljs-attribute">id</span>
  name(arg: <span class="hljs-variable">$arg</span>)
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> name = viewer.getValue(<span class="hljs-string">'name'</span>, {<span class="hljs-attr">arg</span>: <span class="hljs-string">'value'</span>});
</code></pre> <h3 id="getlinkedrecordname-string-arguments-object-recordproxy">
<code>getLinkedRecord(name: string, arguments?: ?Object): ?RecordProxy</code>
</h3> <p>Retrieves a record associated with the current record given the field name, as defined by the GraphQL document. Returns a <code>RecordProxy</code>.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql"><span class="hljs-section">rootField</span> {
  <span class="hljs-section">viewer</span> {
    <span class="hljs-attribute">id</span>
    name
  }
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> rootField = store.getRootField(<span class="hljs-string">'rootField'</span>);
<span class="hljs-keyword">const</span> viewer = rootField.getLinkedRecord(<span class="hljs-string">'viewer'</span>);
</code></pre> <p>Optionally, if the linked record takes arguments, you can pass a bag of <code>variables</code> as well.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql">rootField {
  viewer(<span class="hljs-keyword">arg</span>: $<span class="hljs-keyword">arg</span>) {
    id
  }
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> rootField = store.getRootField(<span class="hljs-string">'rootField'</span>);
<span class="hljs-keyword">const</span> viewer = rootField.getLinkedRecord(<span class="hljs-string">'viewer'</span>, {<span class="hljs-attr">arg</span>: <span class="hljs-string">'value'</span>});
</code></pre> <h3 id="getlinkedrecordsname-string-arguments-object-arrayrecordproxy">
<code>getLinkedRecords(name: string, arguments?: ?Object): ?Array&lt;?RecordProxy&gt;</code>
</h3> <p>Retrieves the set of records associated with the current record given the field name, as defined by the GraphQL document. Returns an array of <code>RecordProxies</code>.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql"><span class="hljs-class">rootField </span>{
  <span class="hljs-class">nodes </span>{
    <span class="hljs-meta"># ...</span>
  }
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> rootField = store.getRootField(<span class="hljs-string">'rootField'</span>);
<span class="hljs-keyword">const</span> nodes = rootField.getLinkedRecords(<span class="hljs-string">'nodes'</span>);
</code></pre> <p>Optionally, if the linked record takes arguments, you can pass a bag of <code>variables</code> as well.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql">rootField {
  nodes(<span class="hljs-keyword">first</span>: $<span class="hljs-built_in">count</span>) {
    <span class="hljs-comment"># ...</span>
  }
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> rootField = store.getRootField(<span class="hljs-string">'rootField'</span>);
<span class="hljs-keyword">const</span> viewer = rootField.getLinkedRecord(<span class="hljs-string">'viewer'</span>, {<span class="hljs-attr">count</span>: <span class="hljs-number">10</span>});
</code></pre> <h3 id="getorcreatelinkedrecordname-string-typename-string-arguments-object">
<code>getOrCreateLinkedRecord(name: string, typeName: string, arguments?: ?Object)</code>
</h3> <p>Retrieves the a record associated with the current record given the field name, as defined by the GraphQL document. If the linked record does not exist, it will be created given the type name. Returns a <code>RecordProxy</code>.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql"><span class="hljs-section">rootField</span> {
  <span class="hljs-section">viewer</span> {
    <span class="hljs-attribute">id</span>
  }
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> rootField = store.getRootField(<span class="hljs-string">'rootField'</span>);
<span class="hljs-keyword">const</span> newViewer = rootField.getOrCreateLinkedRecord(<span class="hljs-string">'viewer'</span>, <span class="hljs-string">'User'</span>); <span class="hljs-comment">// Will create if it doesn't exist</span>
</code></pre> <p>Optionally, if the linked record takes arguments, you can pass a bag of <code>variables</code> as well.</p> <h3 id="setvaluevalue-mixed-name-string-arguments-object-recordproxy">
<code>setValue(value: mixed, name: string, arguments?: ?Object): RecordProxy</code>
</h3> <p>Mutates the current record by setting a new value on the specified field. Returns the mutated record.</p> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql">viewer {
  <span class="hljs-built_in">id</span>
  <span class="hljs-built_in">name</span>
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript">viewer.setValue(<span class="hljs-string">'New Name'</span>, <span class="hljs-string">'name'</span>);
</code></pre> <p>Optionally, if the field takes arguments, you can pass a bag of <code>variables</code>.</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript">viewer.setValue(<span class="hljs-string">'New Name'</span>, <span class="hljs-string">'name'</span>, {<span class="hljs-attr">arg</span>: <span class="hljs-string">'value'</span>});
</code></pre> <h3 id="copyfieldsfromsourcerecord-recordproxy-void">
<code>copyFieldsFrom(sourceRecord: RecordProxy): void</code>
</h3> <p>Mutates the current record by copying the fields over from the passed in record <code>sourceRecord</code>.</p> <h4>
Example</h4> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> record = store.get(id1);
<span class="hljs-keyword">const</span> otherRecord = store.get(id2);
record.copyFieldsFrom(otherRecord); <span class="hljs-comment">// Mutates `record`</span>
</code></pre> <h3 id="setlinkedrecordrecord-recordproxy-name-string-arguments-object">
<code>setLinkedRecord(record: RecordProxy, name: string, arguments?: ?Object)</code>
</h3> <p>Mutates the current record by setting a new linked record on the given the field name.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql"><span class="hljs-section">rootField</span> {
  <span class="hljs-section">viewer</span> {
    <span class="hljs-attribute">id</span>
  }
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> rootField = store.getRootField(<span class="hljs-string">'rootField'</span>);
<span class="hljs-keyword">const</span> newViewer = store.create(<span class="hljs-comment">/* ... */</span>)<span class="hljs-string">''</span>
rootField.setLinkedRecord(newViewer, <span class="hljs-string">'viewer'</span>); <span class="hljs-comment">//</span>
</code></pre> <p>Optionally, if the linked record takes arguments, you can pass a bag of <code>variables</code> as well.</p> <h3 id="setlinkedrecordsrecords-arrayrecordproxy-name-string-variables-object">
<code>setLinkedRecords(records: Array&lt;RecordProxy&gt;, name: string, variables?: ?Object)</code>
</h3> <p>Mutates the current record by setting a new set of linked records on the given the field name.</p> <h4>
Example</h4> <p>Given the GraphQL document:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql"><span class="hljs-class">rootField </span>{
  <span class="hljs-class">nodes </span>{
    <span class="hljs-meta"># ...</span>
  }
}
</code></pre> <p>Usage:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> rootField = store.getRootField(<span class="hljs-string">'rootField'</span>);
<span class="hljs-keyword">const</span> newNode = store.create(<span class="hljs-comment">/* ... */</span>);
<span class="hljs-keyword">const</span> newNodes = [...rootField.getLinkedRecords(<span class="hljs-string">'nodes'</span>), newNode];
rootField.setLinkedRecords(newNodes, <span class="hljs-string">'nodes'</span>); <span class="hljs-comment">//</span>
</code></pre> <p>Optionally, if the linked record takes arguments, you can pass a bag of <code>variables</code> as well.</p> <h3 id="invalidaterecord-void">
<code>invalidateRecord(): void</code>
</h3> <p>Invalidates the record. This will cause any query that references this record to be considered stale until the next time it is refetched, and will be considered to require a refetch the next time such a query is checked with <code>environment.check()</code>.</p> <h4>
Example</h4> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> record = store.get(<span class="hljs-string">'4'</span>);
record.invalidateRecord();
</code></pre> <p>After invalidating a record, any query that references the invalidated record and that is checked before refetching it will be considered stale:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript">environment.check(query) === <span class="hljs-string">'stale'</span>
</code></pre> <h2 id="connectionhandler">
ConnectionHandler</h2> <p><code>ConnectionHandler</code> is a utility module exposed by <code>relay-runtime</code> that aids in the manipulation of connections. <code>ConnectionHandler</code> exposes the following interface:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript">interface ConnectionHandler {
  getConnection(
    record: RecordProxy,
    <span class="hljs-attr">key</span>: string,
    filters?: ?<span class="hljs-built_in">Object</span>,
  ): ?RecordProxy,
  createEdge(
    store: RecordSourceProxy,
    <span class="hljs-attr">connection</span>: RecordProxy,
    <span class="hljs-attr">node</span>: RecordProxy,
    <span class="hljs-attr">edgeType</span>: string,
  ): RecordProxy,
  insertEdgeBefore(
    connection: RecordProxy,
    <span class="hljs-attr">newEdge</span>: RecordProxy,
    cursor?: ?string,
  ): <span class="hljs-keyword">void</span>,
  insertEdgeAfter(
    connection: RecordProxy,
    <span class="hljs-attr">newEdge</span>: RecordProxy,
    cursor?: ?string,
  ): <span class="hljs-keyword">void</span>,
  deleteNode(connection: RecordProxy, <span class="hljs-attr">nodeID</span>: string): <span class="hljs-keyword">void</span>
}
</code></pre> <h3 id="getconnectionrecord-recordproxy-key-string-filters-object">
<code>getConnection(record: RecordProxy, key: string, filters?: ?Object)</code>
</h3> <p>Given a record and a connection key, and optionally a set of filters, <code>getConnection</code> retrieves a <a href="#recordproxy"><code>RecordProxy</code></a> that represents a connection that was annotated with a <code>@connection</code> directive.</p> <p>First, let's take a look at a plain connection:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql">fragment FriendsFragment on<span class="hljs-built_in"> User </span>{
  friends(first: 10) {
    edges {
      node {
        id
      }
    }
  }
}
</code></pre> <p>Accessing a plain connection field like this is the same as other regular field:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-javascript"><span class="hljs-comment">// The `friends` connection record can be accessed with:</span>
<span class="hljs-keyword">const</span> user = store.get(userID);
<span class="hljs-keyword">const</span> friends = user &amp;&amp; user.getLinkedRecord(user, <span class="hljs-string">'friends'</span>);

<span class="hljs-comment">// Access fields on the connection:</span>
<span class="hljs-keyword">const</span> edges = friends.getLinkedRecords(<span class="hljs-string">'edges'</span>);
</code></pre> <p>In a <a href="pagination-container">pagination container</a>, we usually annotate the actual connection field with <code>@connection</code> to tell Relay which part needs to be paginated:</p> <pre data-language="javascript" class="highlight"><code class="hljs css language-graphql">fragment FriendsFragment on<span class="hljs-built_in"> User </span>{
  friends(first: 10, orderby: <span class="hljs-string">"firstname"</span>) @connection(
    key: <span class="hljs-string">"FriendsFragment_friends"</span>,
  ) {
    edges {
      node {
        id
      }
    }
  }
}
</code></pre> <p>For connections like the above, <code>ConnectionHandler</code> helps us find the record:</p> <pre data-language="javascript" class="highlight"><code class="hljs">import {ConnectionHandler} <span class="hljs-keyword">from</span> <span class="hljs-string">'relay-runtime'</span>;

<span class="hljs-comment">// The `friends` connection record can be accessed with:</span>
<span class="hljs-keyword">const</span> user = store.<span class="hljs-keyword">get</span>(userID);
<span class="hljs-keyword">const</span> friends = ConnectionHandler.getConnection(
 user,                        <span class="hljs-comment">// parent record</span>
 <span class="hljs-string">'FriendsFragment_friends'</span>    <span class="hljs-comment">// connection key</span>
 {<span class="hljs-keyword">orderby</span>: <span class="hljs-string">'firstname'</span>}       <span class="hljs-comment">// 'filters' that is used to identify the connection</span>
);
<span class="hljs-comment">// Access fields on the connection:</span>
<span class="hljs-keyword">const</span> edges = friends.getLinkedRecords(<span class="hljs-string">'edges'</span>);
</code></pre> <h3 id="edge-creation-and-insertion">
Edge creation and insertion</h3> <h4>
<code>createEdge(store: RecordSourceProxy, connection: RecordProxy, node: RecordProxy, edgeType: string)</code>
</h4> <p>Creates an edge given a <a href="#recordsourceselectorproxy"><code>store</code></a>, a connection, the edge type, and a record that holds that connection.</p> <h4>
<code>insertEdgeBefore(connection: RecordProxy, newEdge: RecordProxy, cursor?: ?string)</code>
</h4> <p>Given a connection, inserts the edge at the beginning of the connection, or before the specified <code>cursor</code>.</p> <h4>
<code>insertEdgeAfter(connection: RecordProxy, newEdge: RecordProxy, cursor?: ?string)</code>
</h4> <p>Given a connection, inserts the edge at the end of the connection, or after the specified <code>cursor</code>.</p> <h4>
Example</h4> <pre data-language="javascript" class="highlight"><code class="hljs">const user = store.get(userID);
const friends = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConnectionHandler</span>.</span></span>get<span class="hljs-constructor">Connection(<span class="hljs-params">user</span>, '<span class="hljs-params">friends</span>')</span>;
const edge = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConnectionHandler</span>.</span></span>create<span class="hljs-constructor">Edge(<span class="hljs-params">store</span>, <span class="hljs-params">friends</span>, <span class="hljs-params">user</span>, 'UserEdge')</span>;

<span class="hljs-comment">// No cursor provided, append the edge at the end.</span>
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConnectionHandler</span>.</span></span>insert<span class="hljs-constructor">EdgeAfter(<span class="hljs-params">friends</span>, <span class="hljs-params">edge</span>)</span>;

<span class="hljs-comment">// No cursor provided, Insert the edge at the front:</span>
<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">ConnectionHandler</span>.</span></span>insert<span class="hljs-constructor">EdgeBefore(<span class="hljs-params">friends</span>, <span class="hljs-params">edge</span>)</span>;
</code></pre> <h3 id="deletenodeconnection-recordproxy-nodeid-string-void">
<code>deleteNode(connection: RecordProxy, nodeID: string): void</code>
</h3> <p>Given a connection, deletes any edges whose id matches the given id.</p> <h4>
Example</h4> <pre data-language="javascript" class="highlight"><code class="hljs">const<span class="hljs-built_in"> user </span>= store.<span class="hljs-builtin-name">get</span>(userID);
const friends = ConnectionHandler.getConnection(user, <span class="hljs-string">'friends'</span>);
ConnectionHandler.deleteNode(friends, idToDelete);
</code></pre> </span></div></article><div class="_attribution">
  <p class="_attribution-p">
    © 2020–present Facebook Inc.<br>Licensed under the BSD License.<br>
    <a href="https://relay.dev/docs/en/v9.1.0/relay-store.html" class="_attribution-link">https://relay.dev/docs/en/v9.1.0/relay-store.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
