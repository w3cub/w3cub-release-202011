
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>System.IO - Haskell 7 - W3cubDocs</title>
  
  <meta name="description" content=" The standard IO library. ">
  <meta name="keywords" content="system, io, haskell, haskell~7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/haskell~7/libraries/base-4.8.2.0/system-io.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/haskell~7.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/haskell~7/" class="_nav-link" title="" style="margin-left:0;">Haskell 7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _haskell">
				
				
<h1 class="caption">System.IO</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th>Copyright</th>
<td>(c) The University of Glasgow 2001</td>
</tr>
<tr>
<th>License</th>
<td>BSD-style (see the file libraries/base/LICENSE)</td>
</tr>
<tr>
<th>Maintainer</th>
<td>libraries@haskell.org</td>
</tr>
<tr>
<th>Stability</th>
<td>stable</td>
</tr>
<tr>
<th>Portability</th>
<td>portable</td>
</tr>
<tr>
<th>Safe Haskell</th>
<td>Trustworthy</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell2010</td>
</tr>
</table>
<div id="table-of-contents">
<h4 class="caption">Contents</h4>
<ul>
<li><a href="#g:1">The IO monad</a></li>
<li>
<a href="#g:2">Files and handles</a><ul><li><a href="#g:3">Standard handles</a></li></ul>
</li>
<li>
<a href="#g:4">Opening and closing files</a><ul>
<li><a href="#g:5">Opening files</a></li>
<li><a href="#g:6">Closing files</a></li>
<li><a href="#g:7">Special cases</a></li>
<li><a href="#g:8">File locking</a></li>
</ul>
</li>
<li>
<a href="#g:9">Operations on handles</a><ul>
<li><a href="#g:10">Determining and changing the size of a file</a></li>
<li><a href="#g:11">Detecting the end of input</a></li>
<li><a href="#g:12">Buffering operations</a></li>
<li><a href="#g:13">Repositioning handles</a></li>
<li><a href="#g:14">Handle properties</a></li>
<li><a href="#g:15">Terminal operations (not portable: GHC only)</a></li>
<li><a href="#g:16">Showing handle state (not portable: GHC only)</a></li>
</ul>
</li>
<li>
<a href="#g:17">Text input and output</a><ul>
<li><a href="#g:18">Text input</a></li>
<li><a href="#g:19">Text output</a></li>
<li><a href="#g:20">Special cases for standard input and output</a></li>
</ul>
</li>
<li><a href="#g:21">Binary input and output</a></li>
<li><a href="#g:22">Temporary files</a></li>
<li>
<a href="#g:23">Unicode encoding/decoding</a><ul><li><a href="#g:24">Unicode encodings</a></li></ul>
</li>
<li><a href="#g:25">Newline conversion</a></li>
</ul>
</div>
<div id="description">
<h4 class="caption">Description</h4>
<p>The standard IO library.</p>
</div>
<h2 id="g:1">The IO monad</h2>
<p class="src">data <a class="def" id="t:IO">IO</a> a :: * -&gt; * <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/ghc-prim-0.4.0.0/src/GHC-Types.html#IO" class="link">Source</a></p>
<p>A value of type <code><a href="system-io#t:IO">IO</a> a</code> is a computation which, when performed, does some I/O before returning a value of type <code>a</code>.</p>
<p>There is really only one way to "perform" an I/O action: bind it to <code>Main.main</code> in your program. When your program is run, the I/O will be performed. It isn't possible to perform I/O from an arbitrary function, unless that function is itself in the <code><a href="system-io#t:IO">IO</a></code> monad and called at some point, directly or indirectly, from <code>Main.main</code>.</p>
<p><code><a href="system-io#t:IO">IO</a></code> is a monad, so <code><a href="system-io#t:IO">IO</a></code> actions can be combined using either the do-notation or the <code>&gt;&gt;</code> and <code>&gt;&gt;=</code> operations from the <code>Monad</code> class.</p>
<div class="subs instances">
<h4 id="control.i:IO" class="caption collapser" onclick="toggleSection('i:IO')">Instances</h4>
<div id="section.i:IO" class="show"><table>
<tr>
<td class="src clearfix">
<a href="control-monad#t:Monad">Monad</a> <a href="system-io#t:IO">IO</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="data-functor#t:Functor">Functor</a> <a href="system-io#t:IO">IO</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="control-monad-fix#t:MonadFix">MonadFix</a> <a href="system-io#t:IO">IO</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="control-applicative#t:Applicative">Applicative</a> <a href="system-io#t:IO">IO</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">(~) * a () =&gt; <a href="text-printf#t:HPrintfType">HPrintfType</a> (<a href="system-io#t:IO">IO</a> a)</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">(~) * a () =&gt; <a href="text-printf#t:PrintfType">PrintfType</a> (<a href="system-io#t:IO">IO</a> a)</td>
<td class="doc empty"> </td>
</tr>
</table></div>
</div>
<p class="src"><a class="def" id="v:fixIO">fixIO</a> :: (a -&gt; <a href="system-io#t:IO">IO</a> a) -&gt; <a href="system-io#t:IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#fixIO" class="link">Source</a></p>
<h2 id="g:2">Files and handles</h2>
<p class="src">type <a class="def" id="t:FilePath">FilePath</a> = <a href="data-string#t:String">String</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO.html#FilePath" class="link">Source</a></p>
<p>File and directory names are values of type <code><a href="data-string#t:String">String</a></code>, whose precise meaning is operating system dependent. Files can be opened, yielding a handle which can then be used to operate on the contents of that file.</p>
<p class="src">data <a class="def" id="t:Handle">Handle</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Types.html#Handle" class="link">Source</a></p>
<p>Haskell defines operations to read and write characters from and to files, represented by values of type <code>Handle</code>. Each value of this type is a <em>handle</em>: a record used by the Haskell run-time system to <em>manage</em> I/O with file system objects. A handle has at least the following properties:</p>
<ul>
<li>whether it manages input or output or both;</li>
<li>whether it is <em>open</em>, <em>closed</em> or <em>semi-closed</em>;</li>
<li>whether the object is seekable;</li>
<li>whether buffering is disabled, or enabled on a line or block basis;</li>
<li>a buffer (whose length may be zero).</li>
</ul>
<p>Most handles will also have a current I/O position indicating where the next input or output operation will occur. A handle is <em>readable</em> if it manages only input or both input and output; likewise, it is <em>writable</em> if it manages only output or both input and output. A handle is <em>open</em> when first allocated. Once it is closed it can no longer be used for either input or output, though an implementation cannot re-use its storage while references remain to it. Handles are in the <code><a href="text-show#t:Show">Show</a></code> and <code><a href="data-eq#t:Eq">Eq</a></code> classes. The string produced by showing a handle is system dependent; it should include enough information to identify the handle for debugging. A handle is equal according to <code><a href="data-eq#v:-61--61-">==</a></code> only to itself; no attempt is made to compare the internal state of different handles for equality.</p>
<div class="subs instances">
<h4 id="control.i:Handle" class="caption collapser" onclick="toggleSection('i:Handle')">Instances</h4>
<div id="section.i:Handle" class="show"><table>
<tr>
<td class="src clearfix">
<a href="data-eq#t:Eq">Eq</a> <a href="system-io#t:Handle">Handle</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-show#t:Show">Show</a> <a href="system-io#t:Handle">Handle</a>
</td>
<td class="doc empty"> </td>
</tr>
</table></div>
</div>
<p>GHC note: a <code><a href="system-io#t:Handle">Handle</a></code> will be automatically closed when the garbage collector detects that it has become unreferenced by the program. However, relying on this behaviour is not generally recommended: the garbage collector is unpredictable. If possible, use an explicit <code><a href="system-io#v:hClose">hClose</a></code> to close <code><a href="system-io#t:Handle">Handle</a></code>s when they are no longer required. GHC does not currently attempt to free up file descriptors when they have run out, it is your responsibility to ensure that this doesn't happen.</p>
<h3 id="g:3">Standard handles</h3>
<p>Three handles are allocated during program initialisation, and are initially open.</p>
<p class="src"><a class="def" id="v:stdin">stdin</a> :: <a href="system-io#t:Handle">Handle</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-FD.html#stdin" class="link">Source</a></p>
<p>A handle managing input from the Haskell program's standard input channel.</p>
<p class="src"><a class="def" id="v:stdout">stdout</a> :: <a href="system-io#t:Handle">Handle</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-FD.html#stdout" class="link">Source</a></p>
<p>A handle managing output to the Haskell program's standard output channel.</p>
<p class="src"><a class="def" id="v:stderr">stderr</a> :: <a href="system-io#t:Handle">Handle</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-FD.html#stderr" class="link">Source</a></p>
<p>A handle managing output to the Haskell program's standard error channel.</p>
<h2 id="g:4">Opening and closing files</h2>
<h3 id="g:5">Opening files</h3>
<p class="src"><a class="def" id="v:withFile">withFile</a> :: <a href="system-io#t:FilePath">FilePath</a> -&gt; <a href="system-io#t:IOMode">IOMode</a> -&gt; (<a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> r) -&gt; <a href="system-io#t:IO">IO</a> r <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#withFile" class="link">Source</a></p>
<p><code><a href="system-io#v:withFile">withFile</a> name mode act</code> opens a file using <code><a href="system-io#v:openFile">openFile</a></code> and passes the resulting handle to the computation <code>act</code>. The handle will be closed on exit from <code><a href="system-io#v:withFile">withFile</a></code>, whether by normal termination or by raising an exception. If closing the handle raises an exception, then this exception will be raised by <code><a href="system-io#v:withFile">withFile</a></code> rather than any exception raised by <code>act</code>.</p>
<p class="src"><a class="def" id="v:openFile">openFile</a> :: <a href="system-io#t:FilePath">FilePath</a> -&gt; <a href="system-io#t:IOMode">IOMode</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="system-io#t:Handle">Handle</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-FD.html#openFile" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:openFile">openFile</a></code> <code>file mode</code> allocates and returns a new, open handle to manage the file <code>file</code>. It manages input if <code>mode</code> is <code><a href="system-io#v:ReadMode">ReadMode</a></code>, output if <code>mode</code> is <code><a href="system-io#v:WriteMode">WriteMode</a></code> or <code><a href="system-io#v:AppendMode">AppendMode</a></code>, and both input and output if mode is <code><a href="system-io#v:ReadWriteMode">ReadWriteMode</a></code>.</p>
<p>If the file does not exist and it is opened for output, it should be created as a new file. If <code>mode</code> is <code><a href="system-io#v:WriteMode">WriteMode</a></code> and the file already exists, then it should be truncated to zero length. Some operating systems delete empty files, so there is no guarantee that the file will exist following an <code><a href="system-io#v:openFile">openFile</a></code> with <code>mode</code> <code><a href="system-io#v:WriteMode">WriteMode</a></code> unless it is subsequently written to successfully. The handle is positioned at the end of the file if <code>mode</code> is <code><a href="system-io#v:AppendMode">AppendMode</a></code>, and otherwise at the beginning (in which case its internal position is 0). The initial buffer mode is implementation-dependent.</p>
<p>This operation may fail with:</p>
<ul>
<li>
<code>isAlreadyInUseError</code> if the file is already open and cannot be reopened;</li>
<li>
<code>isDoesNotExistError</code> if the file does not exist; or</li>
<li>
<code>isPermissionError</code> if the user does not have permission to open the file.</li>
</ul>
<p>Note: if you will be working with files containing binary data, you'll want to be using <code><a href="system-io#v:openBinaryFile">openBinaryFile</a></code>.</p>
<p class="src">data <a class="def" id="t:IOMode">IOMode</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-IOMode.html#IOMode" class="link">Source</a></p>
<p>See <code><a href="system-io#v:openFile">openFile</a></code></p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table>
<tr>
<td class="src"><a class="def" id="v:ReadMode">ReadMode</a></td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src"><a class="def" id="v:WriteMode">WriteMode</a></td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src"><a class="def" id="v:AppendMode">AppendMode</a></td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src"><a class="def" id="v:ReadWriteMode">ReadWriteMode</a></td>
<td class="doc empty"> </td>
</tr>
</table>
</div>
<div class="subs instances">
<h4 id="control.i:IOMode" class="caption collapser" onclick="toggleSection('i:IOMode')">Instances</h4>
<div id="section.i:IOMode" class="show"><table>
<tr>
<td class="src clearfix">
<a href="prelude#t:Enum">Enum</a> <a href="system-io#t:IOMode">IOMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="data-eq#t:Eq">Eq</a> <a href="system-io#t:IOMode">IOMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="data-ord#t:Ord">Ord</a> <a href="system-io#t:IOMode">IOMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-read#t:Read">Read</a> <a href="system-io#t:IOMode">IOMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-show#t:Show">Show</a> <a href="system-io#t:IOMode">IOMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="data-ix#t:Ix">Ix</a> <a href="system-io#t:IOMode">IOMode</a>
</td>
<td class="doc empty"> </td>
</tr>
</table></div>
</div>
<h3 id="g:6">Closing files</h3>
<p class="src"><a class="def" id="v:hClose">hClose</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hClose" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hClose">hClose</a></code> <code>hdl</code> makes handle <code>hdl</code> closed. Before the computation finishes, if <code>hdl</code> is writable its buffer is flushed as for <code><a href="system-io#v:hFlush">hFlush</a></code>. Performing <code><a href="system-io#v:hClose">hClose</a></code> on a handle that has already been closed has no effect; doing so is not an error. All other operations on a closed handle will fail. If <code><a href="system-io#v:hClose">hClose</a></code> fails for any reason, any further operations (apart from <code><a href="system-io#v:hClose">hClose</a></code>) on the handle will still fail as if <code>hdl</code> had been successfully closed.</p>
<h3 id="g:7">Special cases</h3>
<p>These functions are also exported by the <a href="prelude">Prelude</a>.</p>
<p class="src"><a class="def" id="v:readFile">readFile</a> :: <a href="system-io#t:FilePath">FilePath</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-string#t:String">String</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#readFile" class="link">Source</a></p>
<p>The <code><a href="system-io#v:readFile">readFile</a></code> function reads a file and returns the contents of the file as a string. The file is read lazily, on demand, as with <code><a href="system-io#v:getContents">getContents</a></code>.</p>
<p class="src"><a class="def" id="v:writeFile">writeFile</a> :: <a href="system-io#t:FilePath">FilePath</a> -&gt; <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#writeFile" class="link">Source</a></p>
<p>The computation <code><a href="system-io#v:writeFile">writeFile</a></code> <code>file str</code> function writes the string <code>str</code>, to the file <code>file</code>.</p>
<p class="src"><a class="def" id="v:appendFile">appendFile</a> :: <a href="system-io#t:FilePath">FilePath</a> -&gt; <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#appendFile" class="link">Source</a></p>
<p>The computation <code><a href="system-io#v:appendFile">appendFile</a></code> <code>file str</code> function appends the string <code>str</code>, to the file <code>file</code>.</p>
<p>Note that <code><a href="system-io#v:writeFile">writeFile</a></code> and <code><a href="system-io#v:appendFile">appendFile</a></code> write a literal string to a file. To write a value of any printable type, as with <code><a href="system-io#v:print">print</a></code>, use the <code><a href="text-show#v:show">show</a></code> function to convert the value to a string first.</p>
<pre>main = appendFile "squares" (show [(x,x*x) | x &lt;- [0,0.1..2]])</pre>
<h3 id="g:8">File locking</h3>
<p>Implementations should enforce as far as possible, at least locally to the Haskell process, multiple-reader single-writer locking on files. That is, <em>there may either be many handles on the same file which manage input, or just one handle on the file which manages output</em>. If any open or semi-closed handle is managing a file for output, no new handle can be allocated for that file. If any open or semi-closed handle is managing a file for input, new handles can only be allocated if they do not manage output. Whether two files are the same is implementation-dependent, but they should normally be the same if they have the same absolute path name and neither has been renamed, for example.</p>
<p><em>Warning</em>: the <code><a href="system-io#v:readFile">readFile</a></code> operation holds a semi-closed handle on the file until the entire contents of the file have been consumed. It follows that an attempt to write to a file (using <code><a href="system-io#v:writeFile">writeFile</a></code>, for example) that was earlier opened by <code><a href="system-io#v:readFile">readFile</a></code> will usually result in failure with <code><a href="system-io-error#v:isAlreadyInUseError">isAlreadyInUseError</a></code>.</p>
<h2 id="g:9">Operations on handles</h2>
<h3 id="g:10">Determining and changing the size of a file</h3>
<p class="src"><a class="def" id="v:hFileSize">hFileSize</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="prelude#t:Integer">Integer</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hFileSize" class="link">Source</a></p>
<p>For a handle <code>hdl</code> which attached to a physical file, <code><a href="system-io#v:hFileSize">hFileSize</a></code> <code>hdl</code> returns the size of that file in 8-bit bytes.</p>
<p class="src"><a class="def" id="v:hSetFileSize">hSetFileSize</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="prelude#t:Integer">Integer</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hSetFileSize" class="link">Source</a></p>
<p><code><a href="system-io#v:hSetFileSize">hSetFileSize</a></code> <code>hdl</code> <code>size</code> truncates the physical file with handle <code>hdl</code> to <code>size</code> bytes.</p>
<h3 id="g:11">Detecting the end of input</h3>
<p class="src"><a class="def" id="v:hIsEOF">hIsEOF</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hIsEOF" class="link">Source</a></p>
<p>For a readable handle <code>hdl</code>, <code><a href="system-io#v:hIsEOF">hIsEOF</a></code> <code>hdl</code> returns <code><a href="data-bool#v:True">True</a></code> if no further input can be taken from <code>hdl</code> or for a physical file, if the current I/O position is equal to the length of the file. Otherwise, it returns <code><a href="data-bool#v:False">False</a></code>.</p>
<p>NOTE: <code><a href="system-io#v:hIsEOF">hIsEOF</a></code> may block, because it has to attempt to read from the stream to determine whether there is any more data to be read.</p>
<p class="src"><a class="def" id="v:isEOF">isEOF</a> :: <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-FD.html#isEOF" class="link">Source</a></p>
<p>The computation <code><a href="system-io#v:isEOF">isEOF</a></code> is identical to <code><a href="system-io#v:hIsEOF">hIsEOF</a></code>, except that it works only on <code><a href="system-io#v:stdin">stdin</a></code>.</p>
<h3 id="g:12">Buffering operations</h3>
<p class="src">data <a class="def" id="t:BufferMode">BufferMode</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Types.html#BufferMode" class="link">Source</a></p>
<p>Three kinds of buffering are supported: line-buffering, block-buffering or no-buffering. These modes have the following effects. For output, items are written out, or <em>flushed</em>, from the internal buffer according to the buffer mode:</p>
<ul>
<li>
<em>line-buffering</em>: the entire output buffer is flushed whenever a newline is output, the buffer overflows, a <code><a href="system-io#v:hFlush">hFlush</a></code> is issued, or the handle is closed.</li>
<li>
<em>block-buffering</em>: the entire buffer is written out whenever it overflows, a <code><a href="system-io#v:hFlush">hFlush</a></code> is issued, or the handle is closed.</li>
<li>
<em>no-buffering</em>: output is written immediately, and never stored in the buffer.</li>
</ul>
<p>An implementation is free to flush the buffer more frequently, but not less frequently, than specified above. The output buffer is emptied as soon as it has been written out.</p>
<p>Similarly, input occurs according to the buffer mode for the handle:</p>
<ul>
<li>
<em>line-buffering</em>: when the buffer for the handle is not empty, the next item is obtained from the buffer; otherwise, when the buffer is empty, characters up to and including the next newline character are read into the buffer. No characters are available until the newline character is available or the buffer is full.</li>
<li>
<em>block-buffering</em>: when the buffer for the handle becomes empty, the next block of data is read into the buffer.</li>
<li>
<em>no-buffering</em>: the next input item is read and returned. The <code><a href="system-io#v:hLookAhead">hLookAhead</a></code> operation implies that even a no-buffered handle may require a one-character buffer.</li>
</ul>
<p>The default buffering mode when a handle is opened is implementation-dependent and may depend on the file system object which is attached to that handle. For most implementations, physical files will normally be block-buffered and terminals will normally be line-buffered.</p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table>
<tr>
<td class="src"><a class="def" id="v:NoBuffering">NoBuffering</a></td>
<td class="doc"><p>buffering is disabled if possible.</p></td>
</tr>
<tr>
<td class="src"><a class="def" id="v:LineBuffering">LineBuffering</a></td>
<td class="doc"><p>line-buffering should be enabled if possible.</p></td>
</tr>
<tr>
<td class="src">
<a class="def" id="v:BlockBuffering">BlockBuffering</a> (<a href="data-maybe#t:Maybe">Maybe</a> <a href="data-int#t:Int">Int</a>)</td>
<td class="doc"><p>block-buffering should be enabled if possible. The size of the buffer is <code>n</code> items if the argument is <code><a href="data-maybe#v:Just">Just</a></code> <code>n</code> and is otherwise implementation-dependent.</p></td>
</tr>
</table>
</div>
<div class="subs instances">
<h4 id="control.i:BufferMode" class="caption collapser" onclick="toggleSection('i:BufferMode')">Instances</h4>
<div id="section.i:BufferMode" class="show"><table>
<tr>
<td class="src clearfix">
<a href="data-eq#t:Eq">Eq</a> <a href="system-io#t:BufferMode">BufferMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="data-ord#t:Ord">Ord</a> <a href="system-io#t:BufferMode">BufferMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-read#t:Read">Read</a> <a href="system-io#t:BufferMode">BufferMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-show#t:Show">Show</a> <a href="system-io#t:BufferMode">BufferMode</a>
</td>
<td class="doc empty"> </td>
</tr>
</table></div>
</div>
<p class="src"><a class="def" id="v:hSetBuffering">hSetBuffering</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:BufferMode">BufferMode</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hSetBuffering" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hSetBuffering">hSetBuffering</a></code> <code>hdl mode</code> sets the mode of buffering for handle <code>hdl</code> on subsequent reads and writes.</p>
<p>If the buffer mode is changed from <code><a href="system-io#v:BlockBuffering">BlockBuffering</a></code> or <code><a href="system-io#v:LineBuffering">LineBuffering</a></code> to <code><a href="system-io#v:NoBuffering">NoBuffering</a></code>, then</p>
<ul>
<li>if <code>hdl</code> is writable, the buffer is flushed as for <code><a href="system-io#v:hFlush">hFlush</a></code>;</li>
<li>if <code>hdl</code> is not writable, the contents of the buffer is discarded.</li>
</ul>
<p>This operation may fail with:</p>
<ul><li>
<code>isPermissionError</code> if the handle has already been used for reading or writing and the implementation does not allow the buffering mode to be changed.</li></ul>
<p class="src"><a class="def" id="v:hGetBuffering">hGetBuffering</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="system-io#t:BufferMode">BufferMode</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hGetBuffering" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hGetBuffering">hGetBuffering</a></code> <code>hdl</code> returns the current buffering mode for <code>hdl</code>.</p>
<p class="src"><a class="def" id="v:hFlush">hFlush</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hFlush" class="link">Source</a></p>
<p>The action <code><a href="system-io#v:hFlush">hFlush</a></code> <code>hdl</code> causes any items buffered for output in handle <code>hdl</code> to be sent immediately to the operating system.</p>
<p>This operation may fail with:</p>
<ul>
<li>
<code>isFullError</code> if the device is full;</li>
<li>
<code>isPermissionError</code> if a system resource limit would be exceeded. It is unspecified whether the characters in the buffer are discarded or retained under these circumstances.</li>
</ul>
<h3 id="g:13">Repositioning handles</h3>
<p class="src"><a class="def" id="v:hGetPosn">hGetPosn</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="system-io#t:HandlePosn">HandlePosn</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hGetPosn" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hGetPosn">hGetPosn</a></code> <code>hdl</code> returns the current I/O position of <code>hdl</code> as a value of the abstract type <code><a href="system-io#t:HandlePosn">HandlePosn</a></code>.</p>
<p class="src"><a class="def" id="v:hSetPosn">hSetPosn</a> :: <a href="system-io#t:HandlePosn">HandlePosn</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hSetPosn" class="link">Source</a></p>
<p>If a call to <code><a href="system-io#v:hGetPosn">hGetPosn</a></code> <code>hdl</code> returns a position <code>p</code>, then computation <code><a href="system-io#v:hSetPosn">hSetPosn</a></code> <code>p</code> sets the position of <code>hdl</code> to the position it held at the time of the call to <code><a href="system-io#v:hGetPosn">hGetPosn</a></code>.</p>
<p>This operation may fail with:</p>
<ul><li>
<code>isPermissionError</code> if a system resource limit would be exceeded.</li></ul>
<p class="src">data <a class="def" id="t:HandlePosn">HandlePosn</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#HandlePosn" class="link">Source</a></p>
<div class="subs instances">
<h4 id="control.i:HandlePosn" class="caption collapser" onclick="toggleSection('i:HandlePosn')">Instances</h4>
<div id="section.i:HandlePosn" class="show"><table>
<tr>
<td class="src clearfix">
<a href="data-eq#t:Eq">Eq</a> <a href="system-io#t:HandlePosn">HandlePosn</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-show#t:Show">Show</a> <a href="system-io#t:HandlePosn">HandlePosn</a>
</td>
<td class="doc empty"> </td>
</tr>
</table></div>
</div>
<p class="src"><a class="def" id="v:hSeek">hSeek</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:SeekMode">SeekMode</a> -&gt; <a href="prelude#t:Integer">Integer</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hSeek" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hSeek">hSeek</a></code> <code>hdl mode i</code> sets the position of handle <code>hdl</code> depending on <code>mode</code>. The offset <code>i</code> is given in terms of 8-bit bytes.</p>
<p>If <code>hdl</code> is block- or line-buffered, then seeking to a position which is not in the current buffer will first cause any items in the output buffer to be written to the device, and then cause the input buffer to be discarded. Some handles may not be seekable (see <code><a href="system-io#v:hIsSeekable">hIsSeekable</a></code>), or only support a subset of the possible positioning operations (for instance, it may only be possible to seek to the end of a tape, or to a positive offset from the beginning or current position). It is not possible to set a negative I/O position, or for a physical file, an I/O position beyond the current end-of-file.</p>
<p>This operation may fail with:</p>
<ul>
<li>
<code>isIllegalOperationError</code> if the Handle is not seekable, or does not support the requested seek mode.</li>
<li>
<code>isPermissionError</code> if a system resource limit would be exceeded.</li>
</ul>
<p class="src">data <a class="def" id="t:SeekMode">SeekMode</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Device.html#SeekMode" class="link">Source</a></p>
<p>A mode that determines the effect of <code>hSeek</code> <code>hdl mode i</code>.</p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table>
<tr>
<td class="src"><a class="def" id="v:AbsoluteSeek">AbsoluteSeek</a></td>
<td class="doc"><p>the position of <code>hdl</code> is set to <code>i</code>.</p></td>
</tr>
<tr>
<td class="src"><a class="def" id="v:RelativeSeek">RelativeSeek</a></td>
<td class="doc"><p>the position of <code>hdl</code> is set to offset <code>i</code> from the current position.</p></td>
</tr>
<tr>
<td class="src"><a class="def" id="v:SeekFromEnd">SeekFromEnd</a></td>
<td class="doc"><p>the position of <code>hdl</code> is set to offset <code>i</code> from the end of the file.</p></td>
</tr>
</table>
</div>
<div class="subs instances">
<h4 id="control.i:SeekMode" class="caption collapser" onclick="toggleSection('i:SeekMode')">Instances</h4>
<div id="section.i:SeekMode" class="show"><table>
<tr>
<td class="src clearfix">
<a href="prelude#t:Enum">Enum</a> <a href="system-io#t:SeekMode">SeekMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="data-eq#t:Eq">Eq</a> <a href="system-io#t:SeekMode">SeekMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="data-ord#t:Ord">Ord</a> <a href="system-io#t:SeekMode">SeekMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-read#t:Read">Read</a> <a href="system-io#t:SeekMode">SeekMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-show#t:Show">Show</a> <a href="system-io#t:SeekMode">SeekMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="data-ix#t:Ix">Ix</a> <a href="system-io#t:SeekMode">SeekMode</a>
</td>
<td class="doc empty"> </td>
</tr>
</table></div>
</div>
<p class="src"><a class="def" id="v:hTell">hTell</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="prelude#t:Integer">Integer</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hTell" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hTell">hTell</a></code> <code>hdl</code> returns the current position of the handle <code>hdl</code>, as the number of bytes from the beginning of the file. The value returned may be subsequently passed to <code><a href="system-io#v:hSeek">hSeek</a></code> to reposition the handle to the current position.</p>
<p>This operation may fail with:</p>
<ul><li>
<code>isIllegalOperationError</code> if the Handle is not seekable.</li></ul>
<h3 id="g:14">Handle properties</h3>
<p class="src"><a class="def" id="v:hIsOpen">hIsOpen</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hIsOpen" class="link">Source</a></p>
<p class="src"><a class="def" id="v:hIsClosed">hIsClosed</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hIsClosed" class="link">Source</a></p>
<p class="src"><a class="def" id="v:hIsReadable">hIsReadable</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hIsReadable" class="link">Source</a></p>
<p class="src"><a class="def" id="v:hIsWritable">hIsWritable</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hIsWritable" class="link">Source</a></p>
<p class="src"><a class="def" id="v:hIsSeekable">hIsSeekable</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hIsSeekable" class="link">Source</a></p>
<h3 id="g:15">Terminal operations (not portable: GHC only)</h3>
<p class="src"><a class="def" id="v:hIsTerminalDevice">hIsTerminalDevice</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hIsTerminalDevice" class="link">Source</a></p>
<p>Is the handle connected to a terminal?</p>
<p class="src"><a class="def" id="v:hSetEcho">hSetEcho</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="data-bool#t:Bool">Bool</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hSetEcho" class="link">Source</a></p>
<p>Set the echoing status of a handle connected to a terminal.</p>
<p class="src"><a class="def" id="v:hGetEcho">hGetEcho</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hGetEcho" class="link">Source</a></p>
<p>Get the echoing status of a handle connected to a terminal.</p>
<h3 id="g:16">Showing handle state (not portable: GHC only)</h3>
<p class="src"><a class="def" id="v:hShow">hShow</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-string#t:String">String</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hShow" class="link">Source</a></p>
<p><code><a href="system-io#v:hShow">hShow</a></code> is in the <code><a href="system-io#t:IO">IO</a></code> monad, and gives more comprehensive output than the (pure) instance of <code><a href="text-show#t:Show">Show</a></code> for <code><a href="system-io#t:Handle">Handle</a></code>.</p>
<h2 id="g:17">Text input and output</h2>
<h3 id="g:18">Text input</h3>
<p class="src"><a class="def" id="v:hWaitForInput">hWaitForInput</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="data-int#t:Int">Int</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hWaitForInput" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hWaitForInput">hWaitForInput</a></code> <code>hdl t</code> waits until input is available on handle <code>hdl</code>. It returns <code><a href="data-bool#v:True">True</a></code> as soon as input is available on <code>hdl</code>, or <code><a href="data-bool#v:False">False</a></code> if no input is available within <code>t</code> milliseconds. Note that <code><a href="system-io#v:hWaitForInput">hWaitForInput</a></code> waits until one or more full <em>characters</em> are available, which means that it needs to do decoding, and hence may fail with a decoding error.</p>
<p>If <code>t</code> is less than zero, then <code>hWaitForInput</code> waits indefinitely.</p>
<p>This operation may fail with:</p>
<ul>
<li>
<code><a href="system-io-error#v:isEOFError">isEOFError</a></code> if the end of file has been reached.</li>
<li>a decoding error, if the input begins with an invalid byte sequence in this Handle's encoding.</li>
</ul>
<p>NOTE for GHC users: unless you use the <code>-threaded</code> flag, <code>hWaitForInput hdl t</code> where <code>t &gt;= 0</code> will block all other Haskell threads for the duration of the call. It behaves like a <code>safe</code> foreign call in this respect.</p>
<p class="src"><a class="def" id="v:hReady">hReady</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#hReady" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hReady">hReady</a></code> <code>hdl</code> indicates whether at least one item is available for input from handle <code>hdl</code>.</p>
<p>This operation may fail with:</p>
<ul><li>
<code><a href="system-io-error#v:isEOFError">isEOFError</a></code> if the end of file has been reached.</li></ul>
<p class="src"><a class="def" id="v:hGetChar">hGetChar</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-char#t:Char">Char</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hGetChar" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hGetChar">hGetChar</a></code> <code>hdl</code> reads a character from the file or channel managed by <code>hdl</code>, blocking until a character is available.</p>
<p>This operation may fail with:</p>
<ul><li>
<code><a href="system-io-error#v:isEOFError">isEOFError</a></code> if the end of file has been reached.</li></ul>
<p class="src"><a class="def" id="v:hGetLine">hGetLine</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-string#t:String">String</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hGetLine" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hGetLine">hGetLine</a></code> <code>hdl</code> reads a line from the file or channel managed by <code>hdl</code>.</p>
<p>This operation may fail with:</p>
<ul><li>
<code><a href="system-io-error#v:isEOFError">isEOFError</a></code> if the end of file is encountered when reading the <em>first</em> character of the line.</li></ul>
<p>If <code><a href="system-io#v:hGetLine">hGetLine</a></code> encounters end-of-file at any other point while reading in a line, it is treated as a line terminator and the (partial) line is returned.</p>
<p class="src"><a class="def" id="v:hLookAhead">hLookAhead</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-char#t:Char">Char</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hLookAhead" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hLookAhead">hLookAhead</a></code> returns the next character from the handle without removing it from the input buffer, blocking until a character is available.</p>
<p>This operation may fail with:</p>
<ul><li>
<code>isEOFError</code> if the end of file has been reached.</li></ul>
<p class="src"><a class="def" id="v:hGetContents">hGetContents</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-string#t:String">String</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hGetContents" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hGetContents">hGetContents</a></code> <code>hdl</code> returns the list of characters corresponding to the unread portion of the channel or file managed by <code>hdl</code>, which is put into an intermediate state, <em>semi-closed</em>. In this state, <code>hdl</code> is effectively closed, but items are read from <code>hdl</code> on demand and accumulated in a special list returned by <code><a href="system-io#v:hGetContents">hGetContents</a></code> <code>hdl</code>.</p>
<p>Any operation that fails because a handle is closed, also fails if a handle is semi-closed. The only exception is <code>hClose</code>. A semi-closed handle becomes closed:</p>
<ul>
<li>if <code>hClose</code> is applied to it;</li>
<li>if an I/O error occurs when reading an item from the handle;</li>
<li>or once the entire contents of the handle has been read.</li>
</ul>
<p>Once a semi-closed handle becomes closed, the contents of the associated list becomes fixed. The contents of this final list is only partially specified: it will contain at least all the items of the stream that were evaluated prior to the handle becoming closed.</p>
<p>Any I/O errors encountered while a handle is semi-closed are simply discarded.</p>
<p>This operation may fail with:</p>
<ul><li>
<code><a href="system-io-error#v:isEOFError">isEOFError</a></code> if the end of file has been reached.</li></ul>
<h3 id="g:19">Text output</h3>
<p class="src"><a class="def" id="v:hPutChar">hPutChar</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="data-char#t:Char">Char</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hPutChar" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hPutChar">hPutChar</a></code> <code>hdl ch</code> writes the character <code>ch</code> to the file or channel managed by <code>hdl</code>. Characters may be buffered if buffering is enabled for <code>hdl</code>.</p>
<p>This operation may fail with:</p>
<ul>
<li>
<code><a href="system-io-error#v:isFullError">isFullError</a></code> if the device is full; or</li>
<li>
<code><a href="system-io-error#v:isPermissionError">isPermissionError</a></code> if another system resource limit would be exceeded.</li>
</ul>
<p class="src"><a class="def" id="v:hPutStr">hPutStr</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hPutStr" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hPutStr">hPutStr</a></code> <code>hdl s</code> writes the string <code>s</code> to the file or channel managed by <code>hdl</code>.</p>
<p>This operation may fail with:</p>
<ul>
<li>
<code><a href="system-io-error#v:isFullError">isFullError</a></code> if the device is full; or</li>
<li>
<code><a href="system-io-error#v:isPermissionError">isPermissionError</a></code> if another system resource limit would be exceeded.</li>
</ul>
<p class="src"><a class="def" id="v:hPutStrLn">hPutStrLn</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hPutStrLn" class="link">Source</a></p>
<p>The same as <code><a href="system-io#v:hPutStr">hPutStr</a></code>, but adds a newline character.</p>
<p class="src"><a class="def" id="v:hPrint">hPrint</a> :: <a href="text-show#t:Show">Show</a> a =&gt; <a href="system-io#t:Handle">Handle</a> -&gt; a -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#hPrint" class="link">Source</a></p>
<p>Computation <code><a href="system-io#v:hPrint">hPrint</a></code> <code>hdl t</code> writes the string representation of <code>t</code> given by the <code><a href="text-show#v:shows">shows</a></code> function to the file or channel managed by <code>hdl</code> and appends a newline.</p>
<p>This operation may fail with:</p>
<ul>
<li>
<code><a href="system-io-error#v:isFullError">isFullError</a></code> if the device is full; or</li>
<li>
<code><a href="system-io-error#v:isPermissionError">isPermissionError</a></code> if another system resource limit would be exceeded.</li>
</ul>
<h3 id="g:20">Special cases for standard input and output</h3>
<p>These functions are also exported by the <a href="prelude">Prelude</a>.</p>
<p class="src"><a class="def" id="v:interact">interact</a> :: (<a href="data-string#t:String">String</a> -&gt; <a href="data-string#t:String">String</a>) -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#interact" class="link">Source</a></p>
<p>The <code><a href="system-io#v:interact">interact</a></code> function takes a function of type <code>String-&gt;String</code> as its argument. The entire input from the standard input device is passed to this function as its argument, and the resulting string is output on the standard output device.</p>
<p class="src"><a class="def" id="v:putChar">putChar</a> :: <a href="data-char#t:Char">Char</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#putChar" class="link">Source</a></p>
<p>Write a character to the standard output device (same as <code><a href="system-io#v:hPutChar">hPutChar</a></code> <code><a href="system-io#v:stdout">stdout</a></code>).</p>
<p class="src"><a class="def" id="v:putStr">putStr</a> :: <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#putStr" class="link">Source</a></p>
<p>Write a string to the standard output device (same as <code><a href="system-io#v:hPutStr">hPutStr</a></code> <code><a href="system-io#v:stdout">stdout</a></code>).</p>
<p class="src"><a class="def" id="v:putStrLn">putStrLn</a> :: <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#putStrLn" class="link">Source</a></p>
<p>The same as <code><a href="system-io#v:putStr">putStr</a></code>, but adds a newline character.</p>
<p class="src"><a class="def" id="v:print">print</a> :: <a href="text-show#t:Show">Show</a> a =&gt; a -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#print" class="link">Source</a></p>
<p>The <code><a href="system-io#v:print">print</a></code> function outputs a value of any printable type to the standard output device. Printable types are those that are instances of class <code><a href="text-show#t:Show">Show</a></code>; <code><a href="system-io#v:print">print</a></code> converts values to strings for output using the <code><a href="text-show#v:show">show</a></code> operation and adds a newline.</p>
<p>For example, a program to print the first 20 integers and their powers of 2 could be written as:</p>
<pre>main = print ([(n, 2^n) | n &lt;- [0..19]])</pre>
<p class="src"><a class="def" id="v:getChar">getChar</a> :: <a href="system-io#t:IO">IO</a> <a href="data-char#t:Char">Char</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#getChar" class="link">Source</a></p>
<p>Read a character from the standard input device (same as <code><a href="system-io#v:hGetChar">hGetChar</a></code> <code><a href="system-io#v:stdin">stdin</a></code>).</p>
<p class="src"><a class="def" id="v:getLine">getLine</a> :: <a href="system-io#t:IO">IO</a> <a href="data-string#t:String">String</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#getLine" class="link">Source</a></p>
<p>Read a line from the standard input device (same as <code><a href="system-io#v:hGetLine">hGetLine</a></code> <code><a href="system-io#v:stdin">stdin</a></code>).</p>
<p class="src"><a class="def" id="v:getContents">getContents</a> :: <a href="system-io#t:IO">IO</a> <a href="data-string#t:String">String</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#getContents" class="link">Source</a></p>
<p>The <code><a href="system-io#v:getContents">getContents</a></code> operation returns all user input as a single string, which is read lazily as it is needed (same as <code><a href="system-io#v:hGetContents">hGetContents</a></code> <code><a href="system-io#v:stdin">stdin</a></code>).</p>
<p class="src"><a class="def" id="v:readIO">readIO</a> :: <a href="text-read#t:Read">Read</a> a =&gt; <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#readIO" class="link">Source</a></p>
<p>The <code><a href="system-io#v:readIO">readIO</a></code> function is similar to <code><a href="text-read#v:read">read</a></code> except that it signals parse failure to the <code><a href="system-io#t:IO">IO</a></code> monad instead of terminating the program.</p>
<p class="src"><a class="def" id="v:readLn">readLn</a> :: <a href="text-read#t:Read">Read</a> a =&gt; <a href="system-io#t:IO">IO</a> a <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#readLn" class="link">Source</a></p>
<p>The <code><a href="system-io#v:readLn">readLn</a></code> function combines <code><a href="system-io#v:getLine">getLine</a></code> and <code><a href="system-io#v:readIO">readIO</a></code>.</p>
<h2 id="g:21">Binary input and output</h2>
<p class="src"><a class="def" id="v:withBinaryFile">withBinaryFile</a> :: <a href="system-io#t:FilePath">FilePath</a> -&gt; <a href="system-io#t:IOMode">IOMode</a> -&gt; (<a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> r) -&gt; <a href="system-io#t:IO">IO</a> r <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#withBinaryFile" class="link">Source</a></p>
<p><code><a href="system-io#v:withBinaryFile">withBinaryFile</a> name mode act</code> opens a file using <code><a href="system-io#v:openBinaryFile">openBinaryFile</a></code> and passes the resulting handle to the computation <code>act</code>. The handle will be closed on exit from <code><a href="system-io#v:withBinaryFile">withBinaryFile</a></code>, whether by normal termination or by raising an exception.</p>
<p class="src"><a class="def" id="v:openBinaryFile">openBinaryFile</a> :: <a href="system-io#t:FilePath">FilePath</a> -&gt; <a href="system-io#t:IOMode">IOMode</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="system-io#t:Handle">Handle</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-FD.html#openBinaryFile" class="link">Source</a></p>
<p>Like <code><a href="system-io#v:openFile">openFile</a></code>, but open the file in binary mode. On Windows, reading a file in text mode (which is the default) will translate CRLF to LF, and writing will translate LF to CRLF. This is usually what you want with text files. With binary files this is undesirable; also, as usual under Microsoft operating systems, text mode treats control-Z as EOF. Binary mode turns off all special treatment of end-of-line and end-of-file characters. (See also <code><a href="system-io#v:hSetBinaryMode">hSetBinaryMode</a></code>.)</p>
<p class="src"><a class="def" id="v:hSetBinaryMode">hSetBinaryMode</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="data-bool#t:Bool">Bool</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hSetBinaryMode" class="link">Source</a></p>
<p>Select binary mode (<code><a href="data-bool#v:True">True</a></code>) or text mode (<code><a href="data-bool#v:False">False</a></code>) on a open handle. (See also <code>openBinaryFile</code>.)</p>
<p>This has the same effect as calling <code><a href="system-io#v:hSetEncoding">hSetEncoding</a></code> with <code><a href="system-io#v:char8">char8</a></code>, together with <code><a href="system-io#v:hSetNewlineMode">hSetNewlineMode</a></code> with <code><a href="system-io#v:noNewlineTranslation">noNewlineTranslation</a></code>.</p>
<p class="src"><a class="def" id="v:hPutBuf">hPutBuf</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="foreign-ptr#t:Ptr">Ptr</a> a -&gt; <a href="data-int#t:Int">Int</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hPutBuf" class="link">Source</a></p>
<p><code><a href="system-io#v:hPutBuf">hPutBuf</a></code> <code>hdl buf count</code> writes <code>count</code> 8-bit bytes from the buffer <code>buf</code> to the handle <code>hdl</code>. It returns ().</p>
<p><code><a href="system-io#v:hPutBuf">hPutBuf</a></code> ignores any text encoding that applies to the <code><a href="system-io#t:Handle">Handle</a></code>, writing the bytes directly to the underlying file or device.</p>
<p><code><a href="system-io#v:hPutBuf">hPutBuf</a></code> ignores the prevailing <code>TextEncoding</code> and <code><a href="system-io#t:NewlineMode">NewlineMode</a></code> on the <code><a href="system-io#t:Handle">Handle</a></code>, and writes bytes directly.</p>
<p>This operation may fail with:</p>
<ul><li>
<code>ResourceVanished</code> if the handle is a pipe or socket, and the reading end is closed. (If this is a POSIX system, and the program has not asked to ignore SIGPIPE, then a SIGPIPE may be delivered instead, whose default action is to terminate the program).</li></ul>
<p class="src"><a class="def" id="v:hGetBuf">hGetBuf</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="foreign-ptr#t:Ptr">Ptr</a> a -&gt; <a href="data-int#t:Int">Int</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-int#t:Int">Int</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hGetBuf" class="link">Source</a></p>
<p><code><a href="system-io#v:hGetBuf">hGetBuf</a></code> <code>hdl buf count</code> reads data from the handle <code>hdl</code> into the buffer <code>buf</code> until either EOF is reached or <code>count</code> 8-bit bytes have been read. It returns the number of bytes actually read. This may be zero if EOF was reached before any data was read (or if <code>count</code> is zero).</p>
<p><code><a href="system-io#v:hGetBuf">hGetBuf</a></code> never raises an EOF exception, instead it returns a value smaller than <code>count</code>.</p>
<p>If the handle is a pipe or socket, and the writing end is closed, <code><a href="system-io#v:hGetBuf">hGetBuf</a></code> will behave as if EOF was reached.</p>
<p><code><a href="system-io#v:hGetBuf">hGetBuf</a></code> ignores the prevailing <code>TextEncoding</code> and <code><a href="system-io#t:NewlineMode">NewlineMode</a></code> on the <code><a href="system-io#t:Handle">Handle</a></code>, and reads bytes directly.</p>
<p class="src"><a class="def" id="v:hGetBufSome">hGetBufSome</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="foreign-ptr#t:Ptr">Ptr</a> a -&gt; <a href="data-int#t:Int">Int</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-int#t:Int">Int</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hGetBufSome" class="link">Source</a></p>
<p><code><a href="system-io#v:hGetBufSome">hGetBufSome</a></code> <code>hdl buf count</code> reads data from the handle <code>hdl</code> into the buffer <code>buf</code>. If there is any data available to read, then <code><a href="system-io#v:hGetBufSome">hGetBufSome</a></code> returns it immediately; it only blocks if there is no data to be read.</p>
<p>It returns the number of bytes actually read. This may be zero if EOF was reached before any data was read (or if <code>count</code> is zero).</p>
<p><code><a href="system-io#v:hGetBufSome">hGetBufSome</a></code> never raises an EOF exception, instead it returns a value smaller than <code>count</code>.</p>
<p>If the handle is a pipe or socket, and the writing end is closed, <code><a href="system-io#v:hGetBufSome">hGetBufSome</a></code> will behave as if EOF was reached.</p>
<p><code><a href="system-io#v:hGetBufSome">hGetBufSome</a></code> ignores the prevailing <code>TextEncoding</code> and <code><a href="system-io#t:NewlineMode">NewlineMode</a></code> on the <code><a href="system-io#t:Handle">Handle</a></code>, and reads bytes directly.</p>
<p class="src"><a class="def" id="v:hPutBufNonBlocking">hPutBufNonBlocking</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="foreign-ptr#t:Ptr">Ptr</a> a -&gt; <a href="data-int#t:Int">Int</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-int#t:Int">Int</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hPutBufNonBlocking" class="link">Source</a></p>
<p class="src"><a class="def" id="v:hGetBufNonBlocking">hGetBufNonBlocking</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="foreign-ptr#t:Ptr">Ptr</a> a -&gt; <a href="data-int#t:Int">Int</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="data-int#t:Int">Int</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Text.html#hGetBufNonBlocking" class="link">Source</a></p>
<p><code><a href="system-io#v:hGetBufNonBlocking">hGetBufNonBlocking</a></code> <code>hdl buf count</code> reads data from the handle <code>hdl</code> into the buffer <code>buf</code> until either EOF is reached, or <code>count</code> 8-bit bytes have been read, or there is no more data available to read immediately.</p>
<p><code><a href="system-io#v:hGetBufNonBlocking">hGetBufNonBlocking</a></code> is identical to <code><a href="system-io#v:hGetBuf">hGetBuf</a></code>, except that it will never block waiting for data to become available, instead it returns only whatever data is available. To wait for data to arrive before calling <code><a href="system-io#v:hGetBufNonBlocking">hGetBufNonBlocking</a></code>, use <code><a href="system-io#v:hWaitForInput">hWaitForInput</a></code>.</p>
<p>If the handle is a pipe or socket, and the writing end is closed, <code><a href="system-io#v:hGetBufNonBlocking">hGetBufNonBlocking</a></code> will behave as if EOF was reached.</p>
<p><code><a href="system-io#v:hGetBufNonBlocking">hGetBufNonBlocking</a></code> ignores the prevailing <code>TextEncoding</code> and <code><a href="system-io#t:NewlineMode">NewlineMode</a></code> on the <code><a href="system-io#t:Handle">Handle</a></code>, and reads bytes directly.</p>
<p>NOTE: on Windows, this function does not work correctly; it behaves identically to <code><a href="system-io#v:hGetBuf">hGetBuf</a></code>.</p>
<h2 id="g:22">Temporary files</h2>
<p class="src"><a class="def" id="v:openTempFile">openTempFile</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#openTempFile" class="link">Source</a></p>
<div class="subs arguments">
<h4 class="caption">Arguments</h4>
<table>
<tr>
<td class="src">:: <a href="system-io#t:FilePath">FilePath</a>
</td>
<td class="doc"><p>Directory in which to create the file</p></td>
</tr>
<tr>
<td class="src">-&gt; <a href="data-string#t:String">String</a>
</td>
<td class="doc"><p>File name template. If the template is "foo.ext" then the created file will be "fooXXX.ext" where XXX is some random number.</p></td>
</tr>
<tr>
<td class="src">-&gt; <a href="system-io#t:IO">IO</a> (<a href="system-io#t:FilePath">FilePath</a>, <a href="system-io#t:Handle">Handle</a>)</td>
<td class="doc empty"> </td>
</tr>
</table>
</div>
<p>The function creates a temporary file in ReadWrite mode. The created file isn't deleted automatically, so you need to delete it manually.</p>
<p>The file is creates with permissions such that only the current user can read/write it.</p>
<p>With some exceptions (see below), the file will be created securely in the sense that an attacker should not be able to cause openTempFile to overwrite another file on the filesystem using your credentials, by putting symbolic links (on Unix) in the place where the temporary file is to be created. On Unix the <code>O_CREAT</code> and <code>O_EXCL</code> flags are used to prevent this attack, but note that <code>O_EXCL</code> is sometimes not supported on NFS filesystems, so if you rely on this behaviour it is best to use local filesystems only.</p>
<p class="src"><a class="def" id="v:openBinaryTempFile">openBinaryTempFile</a> :: <a href="system-io#t:FilePath">FilePath</a> -&gt; <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> (<a href="system-io#t:FilePath">FilePath</a>, <a href="system-io#t:Handle">Handle</a>) <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#openBinaryTempFile" class="link">Source</a></p>
<p>Like <code><a href="system-io#v:openTempFile">openTempFile</a></code>, but opens the file in binary mode. See <code><a href="system-io#v:openBinaryFile">openBinaryFile</a></code> for more comments.</p>
<p class="src"><a class="def" id="v:openTempFileWithDefaultPermissions">openTempFileWithDefaultPermissions</a> :: <a href="system-io#t:FilePath">FilePath</a> -&gt; <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> (<a href="system-io#t:FilePath">FilePath</a>, <a href="system-io#t:Handle">Handle</a>) <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#openTempFileWithDefaultPermissions" class="link">Source</a></p>
<p>Like <code><a href="system-io#v:openTempFile">openTempFile</a></code>, but uses the default file permissions</p>
<p class="src"><a class="def" id="v:openBinaryTempFileWithDefaultPermissions">openBinaryTempFileWithDefaultPermissions</a> :: <a href="system-io#t:FilePath">FilePath</a> -&gt; <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> (<a href="system-io#t:FilePath">FilePath</a>, <a href="system-io#t:Handle">Handle</a>) <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#openBinaryTempFileWithDefaultPermissions" class="link">Source</a></p>
<p>Like <code><a href="system-io#v:openBinaryTempFile">openBinaryTempFile</a></code>, but uses the default file permissions</p>
<h2 id="g:23">Unicode encoding/decoding</h2>
<p>A text-mode <code><a href="system-io#t:Handle">Handle</a></code> has an associated <code><a href="system-io#t:TextEncoding">TextEncoding</a></code>, which is used to decode bytes into Unicode characters when reading, and encode Unicode characters into bytes when writing.</p>
<p>The default <code><a href="system-io#t:TextEncoding">TextEncoding</a></code> is the same as the default encoding on your system, which is also available as <code><a href="system-io#v:localeEncoding">localeEncoding</a></code>. (GHC note: on Windows, we currently do not support double-byte encodings; if the console's code page is unsupported, then <code><a href="system-io#v:localeEncoding">localeEncoding</a></code> will be <code><a href="system-io#v:latin1">latin1</a></code>.)</p>
<p>Encoding and decoding errors are always detected and reported, except during lazy I/O (<code><a href="system-io#v:hGetContents">hGetContents</a></code>, <code><a href="system-io#v:getContents">getContents</a></code>, and <code><a href="system-io#v:readFile">readFile</a></code>), where a decoding error merely results in termination of the character stream, as with other I/O errors.</p>
<p class="src"><a class="def" id="v:hSetEncoding">hSetEncoding</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:TextEncoding">TextEncoding</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hSetEncoding" class="link">Source</a></p>
<p>The action <code><a href="system-io#v:hSetEncoding">hSetEncoding</a></code> <code>hdl</code> <code>encoding</code> changes the text encoding for the handle <code>hdl</code> to <code>encoding</code>. The default encoding when a <code><a href="system-io#t:Handle">Handle</a></code> is created is <code>localeEncoding</code>, namely the default encoding for the current locale.</p>
<p>To create a <code><a href="system-io#t:Handle">Handle</a></code> with no encoding at all, use <code>openBinaryFile</code>. To stop further encoding or decoding on an existing <code><a href="system-io#t:Handle">Handle</a></code>, use <code><a href="system-io#v:hSetBinaryMode">hSetBinaryMode</a></code>.</p>
<p><code><a href="system-io#v:hSetEncoding">hSetEncoding</a></code> may need to flush buffered data in order to change the encoding.</p>
<p class="src"><a class="def" id="v:hGetEncoding">hGetEncoding</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:IO">IO</a> (<a href="data-maybe#t:Maybe">Maybe</a> <a href="system-io#t:TextEncoding">TextEncoding</a>) <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hGetEncoding" class="link">Source</a></p>
<p>Return the current <code><a href="system-io#t:TextEncoding">TextEncoding</a></code> for the specified <code><a href="system-io#t:Handle">Handle</a></code>, or <code><a href="data-maybe#v:Nothing">Nothing</a></code> if the <code><a href="system-io#t:Handle">Handle</a></code> is in binary mode.</p>
<p>Note that the <code><a href="system-io#t:TextEncoding">TextEncoding</a></code> remembers nothing about the state of the encoder/decoder in use on this <code><a href="system-io#t:Handle">Handle</a></code>. For example, if the encoding in use is UTF-16, then using <code><a href="system-io#v:hGetEncoding">hGetEncoding</a></code> and <code><a href="system-io#v:hSetEncoding">hSetEncoding</a></code> to save and restore the encoding may result in an extra byte-order-mark being written to the file.</p>
<h3 id="g:24">Unicode encodings</h3>
<p class="src">data <a class="def" id="t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding-Types.html#TextEncoding" class="link">Source</a></p>
<p>A <code><a href="system-io#t:TextEncoding">TextEncoding</a></code> is a specification of a conversion scheme between sequences of bytes and sequences of Unicode characters.</p>
<p>For example, UTF-8 is an encoding of Unicode characters into a sequence of bytes. The <code><a href="system-io#t:TextEncoding">TextEncoding</a></code> for UTF-8 is <code>utf8</code>.</p>
<div class="subs instances">
<h4 id="control.i:TextEncoding" class="caption collapser" onclick="toggleSection('i:TextEncoding')">Instances</h4>
<div id="section.i:TextEncoding" class="show"><table><tr>
<td class="src clearfix">
<a href="text-show#t:Show">Show</a> <a href="system-io#t:TextEncoding">TextEncoding</a>
</td>
<td class="doc empty"> </td>
</tr></table></div>
</div>
<p class="src"><a class="def" id="v:latin1">latin1</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#latin1" class="link">Source</a></p>
<p>The Latin1 (ISO8859-1) encoding. This encoding maps bytes directly to the first 256 Unicode code points, and is thus not a complete Unicode encoding. An attempt to write a character greater than '\255' to a <code>Handle</code> using the <code><a href="system-io#v:latin1">latin1</a></code> encoding will result in an error.</p>
<p class="src"><a class="def" id="v:utf8">utf8</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#utf8" class="link">Source</a></p>
<p>The UTF-8 Unicode encoding</p>
<p class="src"><a class="def" id="v:utf8_bom">utf8_bom</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#utf8_bom" class="link">Source</a></p>
<p>The UTF-8 Unicode encoding, with a byte-order-mark (BOM; the byte sequence 0xEF 0xBB 0xBF). This encoding behaves like <code><a href="system-io#v:utf8">utf8</a></code>, except that on input, the BOM sequence is ignored at the beginning of the stream, and on output, the BOM sequence is prepended.</p>
<p>The byte-order-mark is strictly unnecessary in UTF-8, but is sometimes used to identify the encoding of a file.</p>
<p class="src"><a class="def" id="v:utf16">utf16</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#utf16" class="link">Source</a></p>
<p>The UTF-16 Unicode encoding (a byte-order-mark should be used to indicate endianness).</p>
<p class="src"><a class="def" id="v:utf16le">utf16le</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#utf16le" class="link">Source</a></p>
<p>The UTF-16 Unicode encoding (litte-endian)</p>
<p class="src"><a class="def" id="v:utf16be">utf16be</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#utf16be" class="link">Source</a></p>
<p>The UTF-16 Unicode encoding (big-endian)</p>
<p class="src"><a class="def" id="v:utf32">utf32</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#utf32" class="link">Source</a></p>
<p>The UTF-32 Unicode encoding (a byte-order-mark should be used to indicate endianness).</p>
<p class="src"><a class="def" id="v:utf32le">utf32le</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#utf32le" class="link">Source</a></p>
<p>The UTF-32 Unicode encoding (litte-endian)</p>
<p class="src"><a class="def" id="v:utf32be">utf32be</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#utf32be" class="link">Source</a></p>
<p>The UTF-32 Unicode encoding (big-endian)</p>
<p class="src"><a class="def" id="v:localeEncoding">localeEncoding</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/System-IO.html#localeEncoding" class="link">Source</a></p>
<p>The Unicode encoding of the current locale</p>
<p>This is the initial locale encoding: if it has been subsequently changed by <code><a href="ghc-io-encoding#v:setLocaleEncoding">setLocaleEncoding</a></code> this value will not reflect that change.</p>
<p class="src"><a class="def" id="v:char8">char8</a> :: <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#char8" class="link">Source</a></p>
<p>An encoding in which Unicode code points are translated to bytes by taking the code point modulo 256. When decoding, bytes are translated directly into the equivalent code point.</p>
<p>This encoding never fails in either direction. However, encoding discards information, so encode followed by decode is not the identity.</p>
<p><span class="version">Since: 4.4.0.0</span></p>
<p class="src"><a class="def" id="v:mkTextEncoding">mkTextEncoding</a> :: <a href="data-string#t:String">String</a> -&gt; <a href="system-io#t:IO">IO</a> <a href="system-io#t:TextEncoding">TextEncoding</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Encoding.html#mkTextEncoding" class="link">Source</a></p>
<p>Look up the named Unicode encoding. May fail with</p>
<ul><li>
<code>isDoesNotExistError</code> if the encoding is unknown</li></ul>
<p>The set of known encodings is system-dependent, but includes at least:</p>
<ul>
<li><pre>UTF-8</pre></li>
<li>
<code>UTF-16</code>, <code>UTF-16BE</code>, <code>UTF-16LE</code>
</li>
<li>
<code>UTF-32</code>, <code>UTF-32BE</code>, <code>UTF-32LE</code>
</li>
</ul>
<p>There is additional notation (borrowed from GNU iconv) for specifying how illegal characters are handled:</p>
<ul>
<li>a suffix of <code>//IGNORE</code>, e.g. <code>UTF-8//IGNORE</code>, will cause all illegal sequences on input to be ignored, and on output will drop all code points that have no representation in the target encoding.</li>
<li>a suffix of <code>//TRANSLIT</code> will choose a replacement character for illegal sequences or code points.</li>
<li>a suffix of <code>//ROUNDTRIP</code> will use a PEP383-style escape mechanism to represent any invalid bytes in the input as Unicode codepoints (specifically, as lone surrogates, which are normally invalid in UTF-32). Upon output, these special codepoints are detected and turned back into the corresponding original byte.</li>
</ul>
<p>In theory, this mechanism allows arbitrary data to be roundtripped via a <code><a href="data-string#t:String">String</a></code> with no loss of data. In practice, there are two limitations to be aware of:</p>
<ol>
<li>This only stands a chance of working for an encoding which is an ASCII superset, as for security reasons we refuse to escape any bytes smaller than 128. Many encodings of interest are ASCII supersets (in particular, you can assume that the locale encoding is an ASCII superset) but many (such as UTF-16) are not.</li>
<li>If the underlying encoding is not itself roundtrippable, this mechanism can fail. Roundtrippable encodings are those which have an injective mapping into Unicode. Almost all encodings meet this criteria, but some do not. Notably, Shift-JIS (CP932) and Big5 contain several different encodings of the same Unicode codepoint.</li>
</ol>
<p>On Windows, you can access supported code pages with the prefix <code>CP</code>; for example, <code>"CP1250"</code>.</p>
<h2 id="g:25">Newline conversion</h2>
<p>In Haskell, a newline is always represented by the character '\n'. However, in files and external character streams, a newline may be represented by another character sequence, such as '\r\n'.</p>
<p>A text-mode <code><a href="system-io#t:Handle">Handle</a></code> has an associated <code><a href="system-io#t:NewlineMode">NewlineMode</a></code> that specifies how to transate newline characters. The <code><a href="system-io#t:NewlineMode">NewlineMode</a></code> specifies the input and output translation separately, so that for instance you can translate '\r\n' to '\n' on input, but leave newlines as '\n' on output.</p>
<p>The default <code><a href="system-io#t:NewlineMode">NewlineMode</a></code> for a <code><a href="system-io#t:Handle">Handle</a></code> is <code><a href="system-io#v:nativeNewlineMode">nativeNewlineMode</a></code>, which does no translation on Unix systems, but translates '\r\n' to '\n' and back on Windows.</p>
<p>Binary-mode <code><a href="system-io#t:Handle">Handle</a></code>s do no newline translation at all.</p>
<p class="src"><a class="def" id="v:hSetNewlineMode">hSetNewlineMode</a> :: <a href="system-io#t:Handle">Handle</a> -&gt; <a href="system-io#t:NewlineMode">NewlineMode</a> -&gt; <a href="system-io#t:IO">IO</a> () <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle.html#hSetNewlineMode" class="link">Source</a></p>
<p>Set the <code><a href="system-io#t:NewlineMode">NewlineMode</a></code> on the specified <code><a href="system-io#t:Handle">Handle</a></code>. All buffered data is flushed first.</p>
<p class="src">data <a class="def" id="t:Newline">Newline</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Types.html#Newline" class="link">Source</a></p>
<p>The representation of a newline in the external file or stream.</p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table>
<tr>
<td class="src"><a class="def" id="v:LF">LF</a></td>
<td class="doc"><p>'\n'</p></td>
</tr>
<tr>
<td class="src"><a class="def" id="v:CRLF">CRLF</a></td>
<td class="doc"><p>'\r\n'</p></td>
</tr>
</table>
</div>
<div class="subs instances">
<h4 id="control.i:Newline" class="caption collapser" onclick="toggleSection('i:Newline')">Instances</h4>
<div id="section.i:Newline" class="show"><table>
<tr>
<td class="src clearfix">
<a href="data-eq#t:Eq">Eq</a> <a href="system-io#t:Newline">Newline</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="data-ord#t:Ord">Ord</a> <a href="system-io#t:Newline">Newline</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-read#t:Read">Read</a> <a href="system-io#t:Newline">Newline</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-show#t:Show">Show</a> <a href="system-io#t:Newline">Newline</a>
</td>
<td class="doc empty"> </td>
</tr>
</table></div>
</div>
<p class="src"><a class="def" id="v:nativeNewline">nativeNewline</a> :: <a href="system-io#t:Newline">Newline</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Types.html#nativeNewline" class="link">Source</a></p>
<p>The native newline representation for the current platform: <code><a href="system-io#v:LF">LF</a></code> on Unix systems, <code><a href="system-io#v:CRLF">CRLF</a></code> on Windows.</p>
<p class="src">data <a class="def" id="t:NewlineMode">NewlineMode</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Types.html#NewlineMode" class="link">Source</a></p>
<p>Specifies the translation, if any, of newline characters between internal Strings and the external file or stream. Haskell Strings are assumed to represent newlines with the '\n' character; the newline mode specifies how to translate '\n' on output, and what to translate into '\n' on input.</p>
<div class="subs constructors">
<h4 class="caption">Constructors</h4>
<table>
<tr>
<td class="src"><a class="def" id="v:NewlineMode">NewlineMode</a></td>
<td class="doc empty"> </td>
</tr>
<tr><td colspan="2"><div class="subs fields">
<h4 class="caption">Fields</h4>
<dl>
<dt class="src">
<a class="def" id="v:inputNL">inputNL</a> :: <a href="system-io#t:Newline">Newline</a>
</dt>
<dd class="doc"><p>the representation of newlines on input</p></dd>
<dt class="src">
<a class="def" id="v:outputNL">outputNL</a> :: <a href="system-io#t:Newline">Newline</a>
</dt>
<dd class="doc"><p>the representation of newlines on output</p></dd>
</dl>

</div></td></tr>
</table>
</div>
<div class="subs instances">
<h4 id="control.i:NewlineMode" class="caption collapser" onclick="toggleSection('i:NewlineMode')">Instances</h4>
<div id="section.i:NewlineMode" class="show"><table>
<tr>
<td class="src clearfix">
<a href="data-eq#t:Eq">Eq</a> <a href="system-io#t:NewlineMode">NewlineMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="data-ord#t:Ord">Ord</a> <a href="system-io#t:NewlineMode">NewlineMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-read#t:Read">Read</a> <a href="system-io#t:NewlineMode">NewlineMode</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="text-show#t:Show">Show</a> <a href="system-io#t:NewlineMode">NewlineMode</a>
</td>
<td class="doc empty"> </td>
</tr>
</table></div>
</div>
<p class="src"><a class="def" id="v:noNewlineTranslation">noNewlineTranslation</a> :: <a href="system-io#t:NewlineMode">NewlineMode</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Types.html#noNewlineTranslation" class="link">Source</a></p>
<p>Do no newline translation at all.</p>
<pre>noNewlineTranslation  = NewlineMode { inputNL  = LF, outputNL = LF }</pre>
<p class="src"><a class="def" id="v:universalNewlineMode">universalNewlineMode</a> :: <a href="system-io#t:NewlineMode">NewlineMode</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Types.html#universalNewlineMode" class="link">Source</a></p>
<p>Map '\r\n' into '\n' on input, and '\n' to the native newline represetnation on output. This mode can be used on any platform, and works with text files using any newline convention. The downside is that <code>readFile &gt;&gt;= writeFile</code> might yield a different file.</p>
<pre>universalNewlineMode  = NewlineMode { inputNL  = CRLF,
                                      outputNL = nativeNewline }</pre>
<p class="src"><a class="def" id="v:nativeNewlineMode">nativeNewlineMode</a> :: <a href="system-io#t:NewlineMode">NewlineMode</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/src/GHC-IO-Handle-Types.html#nativeNewlineMode" class="link">Source</a></p>
<p>Use the native newline representation on both input and output</p>
<pre>nativeNewlineMode  = NewlineMode { inputNL  = nativeNewline
                                   outputNL = nativeNewline }</pre>
</div>
<div class="_attribution">
  <p class="_attribution-p">
     The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/System-IO.html" class="_attribution-link">https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/base-4.8.2.0/System-IO.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
