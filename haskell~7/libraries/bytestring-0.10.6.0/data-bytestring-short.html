
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>Data.ByteString.Short - Haskell 7 - W3cubDocs</title>
  
  <meta name="description" content=" A compact representation suitable for storing short byte strings in memory. ">
  <meta name="keywords" content="data, bytestring, short, haskell, haskell~7">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/haskell~7/libraries/bytestring-0.10.6.0/data-bytestring-short.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-01fda2ddb8339756caccf7add5ad4cf849ab52d069bd799015c7f04f93164f64753bff0d15a49d8060b1e66e41002bb301ccadc2350937df079cea3cd52d3cca.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/haskell~7.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/haskell~7/" class="_nav-link" title="" style="margin-left:0;">Haskell 7</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _haskell">
				
				
<h1 class="caption">Data.ByteString.Short</h1>
<div class="_haskell-api">
<table class="info">
<tr>
<th>Copyright</th>
<td>(c) Duncan Coutts 2012-2013</td>
</tr>
<tr>
<th>License</th>
<td>BSD-style</td>
</tr>
<tr>
<th>Maintainer</th>
<td>duncan@community.haskell.org</td>
</tr>
<tr>
<th>Stability</th>
<td>stable</td>
</tr>
<tr>
<th>Portability</th>
<td>ghc only</td>
</tr>
<tr>
<th>Safe Haskell</th>
<td>Trustworthy</td>
</tr>
<tr>
<th>Language</th>
<td>Haskell98</td>
</tr>
</table>
<div id="table-of-contents">
<h4 class="caption">Contents</h4>
<ul>
<li>
<a href="#g:1">The <code>ShortByteString</code> type</a><ul>
<li><a href="#g:2">Memory overhead</a></li>
<li><a href="#g:3">Heap fragmentation</a></li>
</ul>
</li>
<li><a href="#g:4">Conversions</a></li>
<li><a href="#g:5">Other operations</a></li>
</ul>
</div>
<div id="description">
<h4 class="caption">Description</h4>
<p>A compact representation suitable for storing short byte strings in memory.</p>
<p>In typical use cases it can be imported alongside <a href="data-bytestring">Data.ByteString</a>, e.g.</p>
<pre>import qualified Data.ByteString       as B
import qualified Data.ByteString.Short as B
         (ShortByteString, toShort, fromShort)</pre>
<p>Other <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code> operations clash with <a href="data-bytestring">Data.ByteString</a> or <a href="../base-4.8.2.0/prelude">Prelude</a> functions however, so they should be imported <code>qualified</code> with a different alias e.g.</p>
<pre>import qualified Data.ByteString.Short as B.Short</pre>
</div>
<h2 id="g:1">The ShortByteString type</h2>
<p class="src">data <a class="def" id="t:ShortByteString">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/src/Data-ByteString-Short-Internal.html#ShortByteString" class="link">Source</a></p>
<p>A compact representation of a <code><a href="../base-4.8.2.0/data-word#t:Word8">Word8</a></code> vector.</p>
<p>It has a lower memory overhead than a <code><a href="data-bytestring#t:ByteString">ByteString</a></code> and and does not contribute to heap fragmentation. It can be converted to or from a <code><a href="data-bytestring#t:ByteString">ByteString</a></code> (at the cost of copying the string data). It supports very few other operations.</p>
<p>It is suitable for use as an internal representation for code that needs to keep many short strings in memory, but it <em>should not</em> be used as an interchange type. That is, it should not generally be used in public APIs. The <code><a href="data-bytestring#t:ByteString">ByteString</a></code> type is usually more suitable for use in interfaces; it is more flexible and it supports a wide range of operations.</p>
<div class="subs instances">
<h4 id="control.i:ShortByteString" class="caption collapser" onclick="toggleSection('i:ShortByteString')">Instances</h4>
<div id="section.i:ShortByteString" class="show"><table>
<tr>
<td class="src clearfix">
<a href="../base-4.8.2.0/data-eq#t:Eq">Eq</a> <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="../base-4.8.2.0/data-data#t:Data">Data</a> <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="../base-4.8.2.0/data-ord#t:Ord">Ord</a> <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="../base-4.8.2.0/text-read#t:Read">Read</a> <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="../base-4.8.2.0/text-show#t:Show">Show</a> <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="../base-4.8.2.0/data-string#t:IsString">IsString</a> <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="../base-4.8.2.0/data-monoid#t:Monoid">Monoid</a> <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a>
</td>
<td class="doc empty"> </td>
</tr>
<tr>
<td class="src clearfix">
<a href="../deepseq-1.4.1.1/control-deepseq#t:NFData">NFData</a> <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a>
</td>
<td class="doc empty"> </td>
</tr>
</table></div>
</div>
<h3 id="g:2">Memory overhead</h3>
<p>With GHC, the memory overheads are as follows, expressed in words and in bytes (words are 4 and 8 bytes on 32 or 64bit machines respectively).</p>
<ul>
<li>
<code>ByteString</code> unshared: 9 words; 36 or 72 bytes.</li>
<li>
<code>ByteString</code> shared substring: 5 words; 20 or 40 bytes.</li>
<li>
<code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code>: 4 words; 16 or 32 bytes.</li>
</ul>
<p>For the string data itself, both <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code> and <code>ByteString</code> use one byte per element, rounded up to the nearest word. For example, including the overheads, a length 10 <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code> would take <code>16 + 12 = 28</code> bytes on a 32bit platform and <code>32 + 16 = 48</code> bytes on a 64bit platform.</p>
<p>These overheads can all be reduced by 1 word (4 or 8 bytes) when the <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code> or <code>ByteString</code> is unpacked into another constructor.</p>
<p>For example:</p>
<pre>data ThingId = ThingId {-# UNPACK #-} !Int
                       {-# UNPACK #-} !ShortByteString</pre>
<p>This will take <code>1 + 1 + 3</code> words (the <code>ThingId</code> constructor + unpacked <code>Int</code> + unpacked <code>ShortByteString</code>), plus the words for the string data.</p>
<h3 id="g:3">Heap fragmentation</h3>
<p>With GHC, the <code>ByteString</code> representation uses <em>pinned</em> memory, meaning it cannot be moved by the GC. This is usually the right thing to do for larger strings, but for small strings using pinned memory can lead to heap fragmentation which wastes space. The <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code> type (and the <code>Text</code> type from the <code>text</code> package) use <em>unpinned</em> memory so they do not contribute to heap fragmentation. In addition, with GHC, small unpinned strings are allocated in the same way as normal heap allocations, rather than in a separate pinned area.</p>
<h2 id="g:4">Conversions</h2>
<p class="src"><a class="def" id="v:toShort">toShort</a> :: <a href="data-bytestring#t:ByteString">ByteString</a> -&gt; <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/src/Data-ByteString-Short-Internal.html#toShort" class="link">Source</a></p>
<p><span class="complexity">O(n)</span>. Convert a <code><a href="data-bytestring#t:ByteString">ByteString</a></code> into a <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code>.</p>
<p>This makes a copy, so does not retain the input string.</p>
<p class="src"><a class="def" id="v:fromShort">fromShort</a> :: <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a> -&gt; <a href="data-bytestring#t:ByteString">ByteString</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/src/Data-ByteString-Short-Internal.html#fromShort" class="link">Source</a></p>
<p><span class="complexity">O(n)</span>. Convert a <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code> into a <code><a href="data-bytestring#t:ByteString">ByteString</a></code>.</p>
<p class="src"><a class="def" id="v:pack">pack</a> :: [<a href="../base-4.8.2.0/data-word#t:Word8">Word8</a>] -&gt; <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/src/Data-ByteString-Short-Internal.html#pack" class="link">Source</a></p>
<p><span class="complexity">O(n)</span>. Convert a list into a <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code></p>
<p class="src"><a class="def" id="v:unpack">unpack</a> :: <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a> -&gt; [<a href="../base-4.8.2.0/data-word#t:Word8">Word8</a>] <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/src/Data-ByteString-Short-Internal.html#unpack" class="link">Source</a></p>
<p><span class="complexity">O(n)</span>. Convert a <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code> into a list.</p>
<h2 id="g:5">Other operations</h2>
<p class="src"><a class="def" id="v:empty">empty</a> :: <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/src/Data-ByteString-Short-Internal.html#empty" class="link">Source</a></p>
<p><span class="complexity">O(1)</span>. The empty <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code>.</p>
<p class="src"><a class="def" id="v:null">null</a> :: <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a> -&gt; <a href="../base-4.8.2.0/data-bool#t:Bool">Bool</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/src/Data-ByteString-Short-Internal.html#null" class="link">Source</a></p>
<p><span class="complexity">O(1)</span> Test whether a <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code> is empty.</p>
<p class="src"><a class="def" id="v:length">length</a> :: <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a> -&gt; <a href="../base-4.8.2.0/data-int#t:Int">Int</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/src/Data-ByteString-Short-Internal.html#length" class="link">Source</a></p>
<p><span class="complexity">O(1)</span> The length of a <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code>.</p>
<p class="src"><a class="def" id="v:index">index</a> :: <a href="data-bytestring-short#t:ShortByteString">ShortByteString</a> -&gt; <a href="../base-4.8.2.0/data-int#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/data-word#t:Word8">Word8</a> <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/src/Data-ByteString-Short-Internal.html#index" class="link">Source</a></p>
<p><span class="complexity">O(1)</span> <code><a href="data-bytestring-short#t:ShortByteString">ShortByteString</a></code> index (subscript) operator, starting from 0. </p>
</div>
<div class="_attribution">
  <p class="_attribution-p">
    Â© The University of Glasgow and others<br>Licensed under a BSD-style license (see top of the page).<br>
    <a href="https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/Data-ByteString-Short.html" class="_attribution-link">https://downloads.haskell.org/~ghc/7.10.3/docs/html/libraries/bytestring-0.10.6.0/Data-ByteString-Short.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
