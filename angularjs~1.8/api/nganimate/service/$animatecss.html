
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>ngAnimate.&#36;animateCss - Angular.js 1.8 - W3cubDocs</title>
  
  <meta name="description" content="The &#36;animateCss service is a useful utility to trigger customized CSS-based transitions&#47;keyframes from a JavaScript-based animation or &hellip;">
  <meta name="keywords" content="&#36;animatecss, nganimate, angular, js, angularjs~1.8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/angularjs~1.8/api/nganimate/service/$animatecss.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c2f2e7d1236e299f399a2d9bf4342fa70a8839fbe6eb79130546d6bf383b99636ffdf29c557090085d7c4ac34eeb5426851b42d2f4ec63cf218916cbd19aa876.css">
  <script src="/assets/application-d9be6f56a823612443fc15b2e027a630e02c4ad2685bb750d13fa4fae28d46c3e7f7ebb69bd4bafddf116f218f9372e9be44021d4247dc20424e2fd1ff8cef81.js" type="text/javascript"></script>
  <script src="/json/angularjs~1.8.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script data-ad-client="ca-pub-2572770204602497" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/angularjs~1.8/" class="_nav-link" title="" style="margin-left:0;">Angular.js 1.8</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="link"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _angularjs">
				
				
<h1 class="api-profile-header-heading">
<a href="https://github.com/angular/angular.js/edit/v1.8.x/src/ngAnimate/animateCss.js?message=docs(%24animateCss)%3A%20describe%20your%20change...#L7" class="improve-docs btn btn-primary">Improve this Doc</a><a href="https://github.com/angular/angular.js/tree/v1.8.2/src/ngAnimate/animateCss.js#L7" class="view-source pull-right btn btn-primary"> View Source </a>$animateCss</h1> <ol class="api-profile-header-structure naked-list step-list"> <li> service in module <a href="../../nganimate">ngAnimate</a> </li> </ol>  <div class="api-profile-description"> <h2 id="overview">Overview</h2> <p>The <code>$animateCss</code> service is a useful utility to trigger customized CSS-based transitions/keyframes from a JavaScript-based animation or directly from a directive. The purpose of <code>$animateCss</code> is NOT to side-step how <code>$animate</code> and ngAnimate work, but the goal is to allow pre-existing animations or directives to create more complex animations that can be purely driven using CSS code.</p> <p>Note that only browsers that support CSS transitions and/or keyframe animations are capable of rendering animations triggered via <code>$animateCss</code> (bad news for IE9 and lower).</p> <h2 id="general-use">General Use</h2> <p>Once again, <code>$animateCss</code> is designed to be used inside of a registered JavaScript animation that is powered by ngAnimate. It is possible to use <code>$animateCss</code> directly inside of a directive, however, any automatic control over cancelling animations and/or preventing animations from being run on child elements will not be handled by AngularJS. For this to work as expected, please use <code>$animate</code> to trigger the animation and then setup a JavaScript animation that injects <code>$animateCss</code> to trigger the CSS animation.</p> <p>The example below shows how we can create a folding animation on an element using <code>ng-if</code>:</p> <pre data-language="html">&lt;!-- notice the `fold-animation` CSS class --&gt;
&lt;div ng-if="onOff" class="fold-animation"&gt;
  This element will go BOOM
&lt;/div&gt;
&lt;button ng-click="onOff=true"&gt;Fold In&lt;/button&gt;
</pre> <p>Now we create the <strong>JavaScript animation</strong> that will trigger the CSS transition:</p> <pre data-language="javascript">ngModule.animation('.fold-animation', ['$animateCss', function($animateCss) {
  return {
    enter: function(element, doneFn) {
      var height = element[0].offsetHeight;
      return $animateCss(element, {
        from: { height:'0px' },
        to: { height:height + 'px' },
        duration: 1 // one second
      });
    }
  }
}]);
</pre> <h2 id="more-advanced-uses">More Advanced Uses</h2> <p><code>$animateCss</code> is the underlying code that ngAnimate uses to power <strong>CSS-based animations</strong> behind the scenes. Therefore CSS hooks like <code>.ng-EVENT</code>, <code>.ng-EVENT-active</code>, <code>.ng-EVENT-stagger</code> are all features that can be triggered using <code>$animateCss</code> via JavaScript code.</p> <p>This also means that just about any combination of adding classes, removing classes, setting styles, dynamically setting a keyframe animation, applying a hardcoded duration or delay value, changing the animation easing or applying a stagger animation are all options that work with <code>$animateCss</code>. The service itself is smart enough to figure out the combination of options and examine the element styling properties in order to provide a working animation that will run in CSS.</p> <p>The example below showcases a more advanced version of the <code>.fold-animation</code> from the example above:</p> <pre data-language="javascript">ngModule.animation('.fold-animation', ['$animateCss', function($animateCss) {
  return {
    enter: function(element, doneFn) {
      var height = element[0].offsetHeight;
      return $animateCss(element, {
        addClass: 'red large-text pulse-twice',
        easing: 'ease-out',
        from: { height:'0px' },
        to: { height:height + 'px' },
        duration: 1 // one second
      });
    }
  }
}]);
</pre> <p>Since we're adding/removing CSS classes then the CSS transition will also pick those up:</p> <pre data-language="css">/* since a hardcoded duration value of 1 was provided in the JavaScript animation code,
the CSS classes below will be transitioned despite them being defined as regular CSS classes */
.red { background:red; }
.large-text { font-size:20px; }

/* we can also use a keyframe animation and $animateCss will make it work alongside the transition */
.pulse-twice {
  animation: 0.5s pulse linear 2;
  -webkit-animation: 0.5s pulse linear 2;
}

@keyframes pulse {
  from { transform: scale(0.5); }
  to { transform: scale(1.5); }
}

@-webkit-keyframes pulse {
  from { -webkit-transform: scale(0.5); }
  to { -webkit-transform: scale(1.5); }
}
</pre> <p>Given this complex combination of CSS classes, styles and options, <code>$animateCss</code> will figure everything out and make the animation happen.</p> <h2 id="how-the-options-are-handled">How the Options are handled</h2> <p><code>$animateCss</code> is very versatile and intelligent when it comes to figuring out what configurations to apply to the element to ensure the animation works with the options provided. Say for example we were adding a class that contained a keyframe value and we wanted to also animate some inline styles using the <code>from</code> and <code>to</code> properties.</p> <pre data-language="javascript">var animator = $animateCss(element, {
  from: { background:'red' },
  to: { background:'blue' }
});
animator.start();
</pre> <pre data-language="css">.rotating-animation {
  animation:0.5s rotate linear;
  -webkit-animation:0.5s rotate linear;
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@-webkit-keyframes rotate {
  from { -webkit-transform: rotate(0deg); }
  to { -webkit-transform: rotate(360deg); }
}
</pre> <p>The missing pieces here are that we do not have a transition set (within the CSS code nor within the <code>$animateCss</code> options) and the duration of the animation is going to be detected from what the keyframe styles on the CSS class are. In this event, <code>$animateCss</code> will automatically create an inline transition style matching the duration detected from the keyframe style (which is present in the CSS class that is being added) and then prepare both the transition and keyframe animations to run in parallel on the element. Then when the animation is underway the provided <code>from</code> and <code>to</code> CSS styles will be applied and spread across the transition and keyframe animation.</p> <h2 id="what-is-returned">What is returned</h2> <p><code>$animateCss</code> works in two stages: a preparation phase and an animation phase. Therefore when <code>$animateCss</code> is first called it will NOT actually start the animation. All that is going on here is that the element is being prepared for the animation (which means that the generated CSS classes are added and removed on the element). Once <code>$animateCss</code> is called it will return an object with the following properties:</p> <pre data-language="javascript">var animator = $animateCss(element, { ... });
</pre> <p>Now what do the contents of our <code>animator</code> variable look like:</p> <pre data-language="javascript">{
  // starts the animation
  start: Function,

  // ends (aborts) the animation
  end: Function
}
</pre> <p>To actually start the animation we need to run <code>animation.start()</code> which will then return a promise that we can hook into to detect when the animation ends. If we choose not to run the animation then we MUST run <code>animation.end()</code> to perform a cleanup on the element (since some CSS classes and styles may have been applied to the element during the preparation phase). Note that all other properties such as duration, delay, transitions and keyframes are just properties and that changing them will not reconfigure the parameters of the animation.</p> <h3 id="runner-done-vs-runner-then-">runner.done() vs runner.then()</h3> <p>It is documented that <code>animation.start()</code> will return a promise object and this is true, however, there is also an additional method available on the runner called <code>.done(callbackFn)</code>. The done method works the same as <code>.finally(callbackFn)</code>, however, it does <strong>not trigger a digest to occur</strong>. Therefore, for performance reasons, it's always best to use <code>runner.done(callback)</code> instead of <code>runner.then()</code>, <code>runner.catch()</code> or <code>runner.finally()</code> unless you really need a digest to kick off afterwards.</p> <p>Keep in mind that, to make this easier, ngAnimate has tweaked the JS animations API to recognize when a runner instance is returned from $animateCss (so there is no need to call <code>runner.done(doneFn)</code> inside of your JavaScript animation code). Check the <a href="%24animatecss#usage.html">animation code above</a> to see how this works.</p> </div> <div> <h2 id="usage">Usage</h2> <p><code>$animateCss(element, options);</code></p> <section class="api-section"> <h3 id="$animateCss-arguments">Arguments</h3> <table class="variables-matrix input-arguments"> <thead> <tr> <th>Param</th> <th>Type</th> <th>Details</th> </tr> </thead> <tbody> <tr> <td> element </td> <td> <code class="label type-hint type-hint-domelement">DOMElement</code> </td> <td> <p>the element that will be animated</p> </td> </tr> <tr> <td> options </td> <td> <code class="label type-hint type-hint-object">object</code> </td> <td> <p>the animation-related options that will be applied during the animation</p> <ul> <li>
<code>event</code> - The DOM event (e.g. enter, leave, move). When used, a generated CSS class of <code>ng-EVENT</code> and <code>ng-EVENT-active</code> will be applied to the element during the animation. Multiple events can be provided when spaces are used as a separator. (Note that this will not perform any DOM operation.)</li> <li>
<code>structural</code> - Indicates that the <code>ng-</code> prefix will be added to the event class. Setting to <code>false</code> or omitting will turn <code>ng-EVENT</code> and <code>ng-EVENT-active</code> in <code>EVENT</code> and <code>EVENT-active</code>. Unused if <code>event</code> is omitted.</li> <li>
<code>easing</code> - The CSS easing value that will be applied to the transition or keyframe animation (or both).</li> <li>
<code>transitionStyle</code> - The raw CSS transition style that will be used (e.g. <code>1s linear all</code>).</li> <li>
<code>keyframeStyle</code> - The raw CSS keyframe animation style that will be used (e.g. <code>1s my_animation linear</code>).</li> <li>
<code>from</code> - The starting CSS styles (a key/value object) that will be applied at the start of the animation.</li> <li>
<code>to</code> - The ending CSS styles (a key/value object) that will be applied across the animation via a CSS transition.</li> <li>
<code>addClass</code> - A space separated list of CSS classes that will be added to the element and spread across the animation.</li> <li>
<code>removeClass</code> - A space separated list of CSS classes that will be removed from the element and spread across the animation.</li> <li>
<code>duration</code> - A number value representing the total duration of the transition and/or keyframe (note that a value of 1 is 1000ms). If a value of <code>0</code> is provided then the animation will be skipped entirely.</li> <li>
<code>delay</code> - A number value representing the total delay of the transition and/or keyframe (note that a value of 1 is 1000ms). If a value of <code>true</code> is used then whatever delay value is detected from the CSS classes will be mirrored on the elements styles (e.g. by setting delay true then the style value of the element will be <code>transition-delay: DETECTED_VALUE</code>). Using <code>true</code> is useful when you want the CSS classes and inline styles to all share the same CSS delay value.</li> <li>
<code>stagger</code> - A numeric time value representing the delay between successively animated elements (<a href="../../nganimate#css-staggering-animations.html">Click here to learn how CSS-based staggering works in ngAnimate.</a>)</li> <li>
<code>staggerIndex</code> - The numeric index representing the stagger item (e.g. a value of 5 is equal to the sixth item in the stagger; therefore when a <code>stagger</code> option value of <code>0.1</code> is used then there will be a stagger delay of <code>600ms</code>)</li> <li>
<code>applyClassesEarly</code> - Whether or not the classes being added or removed will be used when detecting the animation. This is set by <code>$animate</code> when enter/leave/move animations are fired to ensure that the CSS classes are resolved in time. (Note that this will prevent any transitions from occurring on the classes being added and removed.)</li> <li>
<code>cleanupStyles</code> - Whether or not the provided <code>from</code> and <code>to</code> styles will be removed once the animation is closed. This is useful for when the styles are used purely for the sake of the animation and do not have a lasting visual effect on the element (e.g. a collapse and open animation). By default this value is set to <code>false</code>.</li> </ul> </td> </tr> </tbody> </table> </section> <h3 id="$animateCss-returns">Returns</h3> <table class="variables-matrix return-arguments"> <tr> <td><code class="label type-hint type-hint-object">object</code></td> <td>
<p>an object with start and end methods and details about the animation.</p> <ul> <li>
<code>start</code> - The method to start the animation. This will return a <code>Promise</code> when called.</li> <li>
<code>end</code> - This method will cancel the animation and remove all applied CSS classes and styles.</li> </ul> </td> </tr> </table> </div>
<div class="_attribution">
  <p class="_attribution-p">
    © 2010–2020 Google, Inc.<br>Licensed under the Creative Commons Attribution License 3.0.<br>
    <a href="https://code.angularjs.org/1.8.2/docs/api/ngAnimate/service/%24animateCss" class="_attribution-link">https://code.angularjs.org/1.8.2/docs/api/ngAnimate/service/$animateCss</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
