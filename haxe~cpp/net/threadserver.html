
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>ThreadServer - Haxe C++ - W3cubDocs</title>
  
  <meta name="description" content=" package cpp.net ">
  <meta name="keywords" content="threadserver, haxe, c++, haxe~cpp">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/haxe~cpp/net/threadserver.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-e498cd0ebe8746846fec95b1a53ab3bb0fb7f47f794f0a38f44c98a1f0d03b21d777ae2c583732e44a5a890f6eacb79a5333545db9d5f3616091ba21ca17d916.css">
  <script src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js" type="text/javascript"></script>
  <script src="/json/haxe~cpp.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/haxe~cpp/" class="_nav-link" title="" style="margin-left:0;">Haxe C++</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1> ThreadServer&lt;<span class="type">Client</span>, <span class="type">Message</span>&gt;</h1>
<p>package <a href="index">cpp.net</a></p> <p class="availability"><em>Available on cpp</em></p>
<p>The ThreadServer can be used to easily create a multithreaded server where each thread polls multiple connections. To use it, at a minimum you must override or rebind clientConnected, readClientMessage, and clientMessage and you must define your Client and Message.</p>
<h2 class="section">Constructor</h2>
<h3 class="anchor" id="new"><code><a href="#new">new</a>()</code></h3>
<p>Creates a ThreadServer.</p>
<h2 class="section">Variables</h2>
<h3 class="anchor" id="connectLag"><code><a href="#connectLag">connectLag</a>:<a class="type" title="Float - The standard Float type, this is a double-precision IEEE 64bit float." href="https://api.haxe.org/Float.html">Float</a></code></h3>
<p>Polling timeout.</p>
<h3 class="anchor" id="errorOutput"><code><a href="#errorOutput">errorOutput</a>:<a class="type" title="haxe.io.Output - An Output is an abstract write." href="https://api.haxe.org/haxe/io/Output.html">Output</a></code></h3>
<p>Stream to send error messages.</p>
<h3 class="anchor" id="initialBufferSize"><code><a href="#initialBufferSize">initialBufferSize</a>:<a class="type" title="Int - The standard Int type." href="https://api.haxe.org/Int.html">Int</a></code></h3>
<p>Space allocated to buffers when they are created.</p>
<h3 class="anchor" id="listen"><code><a href="#listen">listen</a>:<a class="type" title="Int - The standard Int type." href="https://api.haxe.org/Int.html">Int</a></code></h3>
<p>Number of total connections the server will accept.</p>
<h3 class="anchor" id="maxBufferSize"><code><a href="#maxBufferSize">maxBufferSize</a>:<a class="type" title="Int - The standard Int type." href="https://api.haxe.org/Int.html">Int</a></code></h3>
<p>Maximum size of buffered data read from a socket. An exception is thrown if the buffer exceeds this value.</p>
<h3 class="anchor" id="maxSockPerThread"><code><a href="#maxSockPerThread">maxSockPerThread</a>:<a class="type" title="Int - The standard Int type." href="https://api.haxe.org/Int.html">Int</a></code></h3>
<p>The most sockets a thread will handle.</p>
<h3 class="anchor" id="messageHeaderSize"><code><a href="#messageHeaderSize">messageHeaderSize</a>:<a class="type" title="Int - The standard Int type." href="https://api.haxe.org/Int.html">Int</a></code></h3>
<p>Minimum message size.</p>
<h3 class="anchor" id="nthreads"><code><a href="#nthreads">nthreads</a>:<a class="type" title="Int - The standard Int type." href="https://api.haxe.org/Int.html">Int</a></code></h3>
<p>Number of server threads.</p>
<h3 class="anchor" id="updateTime"><code><a href="#updateTime">updateTime</a>:<a class="type" title="Float - The standard Float type, this is a double-precision IEEE 64bit float." href="https://api.haxe.org/Float.html">Float</a></code></h3>
<p>Time between calls to update.</p>
<h2 class="section">Methods</h2>
<h3 class="anchor" id="addSocket"><code><a href="#addSocket">addSocket</a>(<span style="white-space:nowrap">s:<a class="type" title="sys.net.Socket - A TCP socket class : allow you to both connect to a given server and exchange messages or start your own server and wait for connections." href="https://api.haxe.org/sys/net/Socket.html">Socket</a></span>):<a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></code></h3>
<p>Called when the server gets a new connection.</p>
<h3 class="anchor" id="afterEvent"><code><span class="label label-dynamic">dynamic</span><a href="#afterEvent">afterEvent</a>():<a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></code></h3>
<p>Called after a client connects, disconnects, a message is received, or an update is performed.</p>
<h3 class="anchor" id="clientConnected"><code><span class="label label-dynamic">dynamic</span><a href="#clientConnected">clientConnected</a>(<span style="white-space:nowrap">s:<a class="type" title="sys.net.Socket - A TCP socket class : allow you to both connect to a given server and exchange messages or start your own server and wait for connections." href="https://api.haxe.org/sys/net/Socket.html">Socket</a></span>):<span class="type">Client</span></code></h3>
<p>Called when a client connects. Returns a client object.</p>
<h3 class="anchor" id="clientDisconnected"><code><span class="label label-dynamic">dynamic</span><a href="#clientDisconnected">clientDisconnected</a>(<span style="white-space:nowrap">c:<span class="type">Client</span></span>):<a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></code></h3>
<p>Called when a client disconnects or an error forces the connection to close.</p>
<h3 class="anchor" id="clientMessage"><code><span class="label label-dynamic">dynamic</span><a href="#clientMessage">clientMessage</a>(<span style="white-space:nowrap">c:<span class="type">Client</span>,</span> <span style="white-space:nowrap">msg:<span class="type">Message</span></span>):<a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></code></h3>
<p>Called when a message has been recieved. Message handling code should go here.</p>
<h3 class="anchor" id="onError"><code><span class="label label-dynamic">dynamic</span><a href="#onError">onError</a>(<span style="white-space:nowrap">e:<a class="type" title="Dynamic - Dynamic is a special type which is compatible with all other types." href="https://api.haxe.org/Dynamic.html">Dynamic</a>,</span> <span style="white-space:nowrap">stack:<a class="type" title="haxe.CallStack - Get information about the call stack." href="https://api.haxe.org/haxe/CallStack.html">CallStack</a></span>):<a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></code></h3>
<p>Called when an error has ocurred.</p>
<h3 class="anchor" id="readClientMessage"><code><span class="label label-dynamic">dynamic</span><a href="#readClientMessage">readClientMessage</a>(<span style="white-space:nowrap">c:<span class="type">Client</span>,</span> <span style="white-space:nowrap">buf:<a class="type" title="haxe.io.Bytes" href="https://api.haxe.org/haxe/io/Bytes.html">Bytes</a>,</span> <span style="white-space:nowrap">pos:<a class="type" title="Int - The standard Int type." href="https://api.haxe.org/Int.html">Int</a>,</span> <span style="white-space:nowrap">len:<a class="type" title="Int - The standard Int type." href="https://api.haxe.org/Int.html">Int</a></span>):{msg:<span class="type">Message</span>, bytes:<a class="type" title="Int - The standard Int type." href="https://api.haxe.org/Int.html">Int</a>}</code></h3>
<p>Called when data has been read from a socket. This method should try to extract a message from the buffer. The available data resides in buf, starts at pos, and is len bytes wide. Return the new message and the number of bytes read from the buffer. If no message could be read, return null.</p>
<h3 class="anchor" id="run"><code><a href="#run">run</a>(<span style="white-space:nowrap">host:<a class="type" title="String - The basic String class." href="https://api.haxe.org/String.html">String</a>,</span> <span style="white-space:nowrap">port:<a class="type" title="Int - The standard Int type." href="https://api.haxe.org/Int.html">Int</a></span>):<a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></code></h3>
<p>Start the server at the specified host and port.</p>
<h3 class="anchor" id="sendData"><code><a href="#sendData">sendData</a>(<span style="white-space:nowrap">s:<a class="type" title="sys.net.Socket - A TCP socket class : allow you to both connect to a given server and exchange messages or start your own server and wait for connections." href="https://api.haxe.org/sys/net/Socket.html">Socket</a>,</span> <span style="white-space:nowrap">data:<a class="type" title="String - The basic String class." href="https://api.haxe.org/String.html">String</a></span>):<a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></code></h3>
<p>Send data to a client.</p>
<h3 class="anchor" id="stopClient"><code><a href="#stopClient">stopClient</a>(<span style="white-space:nowrap">s:<a class="type" title="sys.net.Socket - A TCP socket class : allow you to both connect to a given server and exchange messages or start your own server and wait for connections." href="https://api.haxe.org/sys/net/Socket.html">Socket</a></span>):<a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></code></h3>
<p>Shutdown a client's connection and remove them from the server.</p>
<h3 class="anchor" id="update"><code><span class="label label-dynamic">dynamic</span><a href="#update">update</a>():<a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></code></h3>
<p>This method is called periodically. It can be used to do server maintenance.</p>
<h3 class="anchor" id="work"><code><a href="#work">work</a>(<span style="white-space:nowrap">f:() ‑&gt; <a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></span>):<a class="type" title="Void - The standard Void type." href="https://api.haxe.org/Void.html">Void</a></code></h3>
<p>Internally used to delegate something to the worker thread.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2005–2020 Haxe Foundation<br>Licensed under a MIT license.<br>
    <a href="https://api.haxe.org/cpp/net/ThreadServer.html" class="_attribution-link">https://api.haxe.org/cpp/net/ThreadServer.html</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
