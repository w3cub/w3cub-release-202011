
<!DOCTYPE HTML>

<html lang="en" class="_theme-default">

<head>
  <meta charset="utf-8">
  <title>JavaScript API - Vite - W3cubDocs</title>
  
  <meta name="description" content="Vite&#39;s JavaScript APIs are fully typed, and it&#39;s recommended to use TypeScript or enable JS type checking in VS Code to leverage the &hellip;">
  <meta name="keywords" content="javascript, api, vite">
  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="https://docs.w3cub.com/vite/guide/api-javascript.html">
  <link href="/favicon.png" rel="icon">
  <link rel="stylesheet" type="text/css" href="/assets/application-c8f743fc70bb84079c3cf4b71f5f99835529659c30689b2fd6193651a680f383ef1d96896f8966c7ca8a0160ffd557685bb8ad12820ec6002d60143812238086.css">
  <script type="text/javascript" src="/assets/application-79c555f6b25481fffac2cac30a7f3e54e608ca09e9e8e42bb1790095ba6d0fcace47d6bc624ddce952c70370892f2d46864f89e6943d4f7f7ff16c8a3231a91a.js"></script>
  <script src="/json/vite.js"></script>
  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3WC07G3GB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-R3WC07G3GB');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2572770204602497"
     crossorigin="anonymous"></script>
<script async custom-element="amp-auto-ads"
  src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>


</head>

<body class="docs">
	<amp-auto-ads type="adsense"
              data-ad-client="ca-pub-2572770204602497">
	</amp-auto-ads>
	<div class="_app">
	<header class="_header">

  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/vite/" class="_nav-link" title="" style="margin-left:0;">Vite</a></span>
  
  <nav class="_nav">
    <a href="https://tools.w3cub.com/?_sp=docs" target="_blank" class="_nav-link ">W3cubTools</a>
    <a href="/cheatsheets/" class="_nav-link ">Cheatsheets</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		
		<form class="_search">
		  <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
		  <a class="_search-clear"></a>
		  <div class="_search-tag"></div>
		</form>
		
		<div class="_list-wrap">
			<div class="_list">
			
			</div>
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="6861657091"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			<div class="_page _simple">
				
				
<h1 id="javascript-api" tabindex="-1">JavaScript API </h1>
<p>Vite's JavaScript APIs are fully typed, and it's recommended to use TypeScript or enable JS type checking in VS Code to leverage the intellisense and validation.</p>
<h2 id="createserver" tabindex="-1">
<code>createServer</code> </h2>
<p><strong>Type Signature:</strong></p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">async function createServer(inlineConfig?: InlineConfig): Promise&lt;ViteDevServer&gt;</pre>
</div>
<p><strong>Example Usage:</strong></p>
<div class="language-js vp-adaptive-theme">
<span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">import { fileURLToPath } from 'url'
import { createServer } from 'vite'

const __dirname = fileURLToPath(new URL('.', import.meta.url))

;(async () =&gt; {
  const server = await createServer({
    // any valid user config options, plus `mode` and `configFile`
    configFile: false,
    root: __dirname,
    server: {
      port: 1337,
    },
  })
  await server.listen()

  server.printUrls()
  server.bindCLIShortcuts({ print: true })
})()</pre>
</div>
<div class="tip custom-block">
<strong class="custom-block-title">NOTE</strong><p>When using <code>createServer</code> and <code>build</code> in the same Node.js process, both functions rely on <code>process.env.NODE_ENV</code> to work properly, which also depends on the <code>mode</code> config option. To prevent conflicting behavior, set <code>process.env.NODE_ENV</code> or the <code>mode</code> of the two APIs to <code>development</code>. Otherwise, you can spawn a child process to run the APIs separately.</p>
</div>
<div class="tip custom-block">
<strong class="custom-block-title">NOTE</strong><p>When using <a href="../config/server-options#server-middlewaremode">middleware mode</a> combined with <a href="../config/server-options#server-proxy">proxy config for WebSocket</a>, the parent http server should be provided in <code>middlewareMode</code> to bind the proxy correctly.</p>
<div>
<summary>Example</summary><div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">import http from 'http'
import { createServer } from 'vite'

const parentServer = http.createServer() // or express, koa, etc.

const vite = await createServer({
  server: {
    // Enable middleware mode
    middlewareMode: {
      // Provide the parent http server for proxy WebSocket
      server: parentServer,
    },
  },
  proxy: {
    '/ws': {
      target: 'ws://localhost:3000',
      // Proxying WebSocket
      ws: true,
    },
  },
})

parentServer.use(vite.middlewares)</pre>
</div>
</div>
</div>
<h2 id="inlineconfig" tabindex="-1">
<code>InlineConfig</code> </h2>
<p>The <code>InlineConfig</code> interface extends <code>UserConfig</code> with additional properties:</p>
<ul>
<li>
<code>configFile</code>: specify config file to use. If not set, Vite will try to automatically resolve one from project root. Set to <code>false</code> to disable auto resolving.</li>
<li>
<code>envFile</code>: Set to <code>false</code> to disable <code>.env</code> files.</li>
</ul>
<h2 id="resolvedconfig" tabindex="-1">
<code>ResolvedConfig</code> </h2>
<p>The <code>ResolvedConfig</code> interface has all the same properties of a <code>UserConfig</code>, except most properties are resolved and non-undefined. It also contains utilities like:</p>
<ul>
<li>
<code>config.assetsInclude</code>: A function to check if an <code>id</code> is considered an asset.</li>
<li>
<code>config.logger</code>: Vite's internal logger object.</li>
</ul>
<h2 id="vitedevserver" tabindex="-1">
<code>ViteDevServer</code> </h2>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">interface ViteDevServer {
  /**
   * The resolved Vite config object.
   */
  config: ResolvedConfig
  /**
   * A connect app instance
   * - Can be used to attach custom middlewares to the dev server.
   * - Can also be used as the handler function of a custom http server
   *   or as a middleware in any connect-style Node.js frameworks.
   *
   * https://github.com/senchalabs/connect#use-middleware
   */
  middlewares: Connect.Server
  /**
   * Native Node http server instance.
   * Will be null in middleware mode.
   */
  httpServer: http.Server | null
  /**
   * Chokidar watcher instance. If `config.server.watch` is set to `null`,
   * returns a noop event emitter.
   * https://github.com/paulmillr/chokidar#api
   */
  watcher: FSWatcher
  /**
   * Web socket server with `send(payload)` method.
   */
  ws: WebSocketServer
  /**
   * Rollup plugin container that can run plugin hooks on a given file.
   */
  pluginContainer: PluginContainer
  /**
   * Module graph that tracks the import relationships, url to file mapping
   * and hmr state.
   */
  moduleGraph: ModuleGraph
  /**
   * The resolved urls Vite prints on the CLI. null in middleware mode or
   * before `server.listen` is called.
   */
  resolvedUrls: ResolvedServerUrls | null
  /**
   * Programmatically resolve, load and transform a URL and get the result
   * without going through the http request pipeline.
   */
  transformRequest(
    url: string,
    options?: TransformOptions,
  ): Promise&lt;TransformResult | null&gt;
  /**
   * Apply Vite built-in HTML transforms and any plugin HTML transforms.
   */
  transformIndexHtml(url: string, html: string): Promise&lt;string&gt;
  /**
   * Load a given URL as an instantiated module for SSR.
   */
  ssrLoadModule(
    url: string,
    options?: { fixStacktrace?: boolean },
  ): Promise&lt;Record&lt;string, any&gt;&gt;
  /**
   * Fix ssr error stacktrace.
   */
  ssrFixStacktrace(e: Error): void
  /**
   * Triggers HMR for a module in the module graph. You can use the `server.moduleGraph`
   * API to retrieve the module to be reloaded. If `hmr` is false, this is a no-op.
   */
  reloadModule(module: ModuleNode): Promise&lt;void&gt;
  /**
   * Start the server.
   */
  listen(port?: number, isRestart?: boolean): Promise&lt;ViteDevServer&gt;
  /**
   * Restart the server.
   *
   * @param forceOptimize - force the optimizer to re-bundle, same as --force cli flag
   */
  restart(forceOptimize?: boolean): Promise&lt;void&gt;
  /**
   * Stop the server.
   */
  close(): Promise&lt;void&gt;
  /**
   * Bind CLI shortcuts
   */
  bindCLIShortcuts(options?: BindCLIShortcutsOptions&lt;ViteDevServer&gt;): void
}</pre>
</div>
<h2 id="build" tabindex="-1">
<code>build</code> </h2>
<p><strong>Type Signature:</strong></p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">async function build(
  inlineConfig?: InlineConfig,
): Promise&lt;RollupOutput | RollupOutput[]&gt;</pre>
</div>
<p><strong>Example Usage:</strong></p>
<div class="language-js vp-adaptive-theme">
<span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">import path from 'path'
import { fileURLToPath } from 'url'
import { build } from 'vite'

const __dirname = fileURLToPath(new URL('.', import.meta.url))

;(async () =&gt; {
  await build({
    root: path.resolve(__dirname, './project'),
    base: '/foo/',
    build: {
      rollupOptions: {
        // ...
      },
    },
  })
})()</pre>
</div>
<h2 id="preview" tabindex="-1">
<code>preview</code> </h2>
<p><strong>Type Signature:</strong></p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">async function preview(inlineConfig?: InlineConfig): Promise&lt;PreviewServer&gt;</pre>
</div>
<p><strong>Example Usage:</strong></p>
<div class="language-js vp-adaptive-theme">
<span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">import { preview } from 'vite'
;(async () =&gt; {
  const previewServer = await preview({
    // any valid user config options, plus `mode` and `configFile`
    preview: {
      port: 8080,
      open: true,
    },
  })

  previewServer.printUrls()
  previewServer.bindCLIShortcuts({ print: true })
})()</pre>
</div>
<h2 id="previewserver" tabindex="-1">
<code>PreviewServer</code> </h2>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">interface PreviewServer {
  /**
   * The resolved vite config object
   */
  config: ResolvedConfig
  /**
   * A connect app instance.
   * - Can be used to attach custom middlewares to the preview server.
   * - Can also be used as the handler function of a custom http server
   *   or as a middleware in any connect-style Node.js frameworks
   *
   * https://github.com/senchalabs/connect#use-middleware
   */
  middlewares: Connect.Server
  /**
   * native Node http server instance
   */
  httpServer: http.Server
  /**
   * The resolved urls Vite prints on the CLI.
   * null before server is listening.
   */
  resolvedUrls: ResolvedServerUrls | null
  /**
   * Print server urls
   */
  printUrls(): void
  /**
   * Bind CLI shortcuts
   */
  bindCLIShortcuts(options?: BindCLIShortcutsOptions&lt;PreviewServer&gt;): void
}</pre>
</div>
<h2 id="resolveconfig" tabindex="-1">
<code>resolveConfig</code> </h2>
<p><strong>Type Signature:</strong></p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">async function resolveConfig(
  inlineConfig: InlineConfig,
  command: 'build' | 'serve',
  defaultMode = 'development',
  defaultNodeEnv = 'development',
  isPreview = false,
): Promise&lt;ResolvedConfig&gt;</pre>
</div>
<p>The <code>command</code> value is <code>serve</code> in dev and preview, and <code>build</code> in build.</p>
<h2 id="mergeconfig" tabindex="-1">
<code>mergeConfig</code> </h2>
<p><strong>Type Signature:</strong></p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">function mergeConfig(
  defaults: Record&lt;string, any&gt;,
  overrides: Record&lt;string, any&gt;,
  isRoot = true,
): Record&lt;string, any&gt;</pre>
</div>
<p>Deeply merge two Vite configs. <code>isRoot</code> represents the level within the Vite config which is being merged. For example, set <code>false</code> if you're merging two <code>build</code> options.</p>
<div class="tip custom-block">
<strong class="custom-block-title">NOTE</strong><p><code>mergeConfig</code> accepts only config in object form. If you have a config in callback form, you should call it before passing into <code>mergeConfig</code>.</p>
<p>You can use the <code>defineConfig</code> helper to merge a config in callback form with another config:</p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">export default defineConfig((configEnv) =&gt;
  mergeConfig(configAsCallback(configEnv), configAsObject),
)</pre>
</div>
</div>
<h2 id="searchforworkspaceroot" tabindex="-1">
<code>searchForWorkspaceRoot</code> </h2>
<p><strong>Type Signature:</strong></p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">function searchForWorkspaceRoot(
  current: string,
  root = searchForPackageRoot(current),
): string</pre>
</div>
<p><strong>Related:</strong> <a href="../config/server-options#server-fs-allow">server.fs.allow</a></p>
<p>Search for the root of the potential workspace if it meets the following conditions, otherwise it would fallback to <code>root</code>:</p>
<ul>
<li>contains <code>workspaces</code> field in <code>package.json</code>
</li>
<li>contains one of the following file <ul>
<li><code>lerna.json</code></li>
<li><code>pnpm-workspace.yaml</code></li>
</ul>
</li>
</ul>
<h2 id="loadenv" tabindex="-1">
<code>loadEnv</code> </h2>
<p><strong>Type Signature:</strong></p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">function loadEnv(
  mode: string,
  envDir: string,
  prefixes: string | string[] = 'VITE_',
): Record&lt;string, string&gt;</pre>
</div>
<p><strong>Related:</strong> <a href="env-and-mode#env-files"><code>.env</code> Files</a></p>
<p>Load <code>.env</code> files within the <code>envDir</code>. By default, only env variables prefixed with <code>VITE_</code> are loaded, unless <code>prefixes</code> is changed.</p>
<h2 id="normalizepath" tabindex="-1">
<code>normalizePath</code> </h2>
<p><strong>Type Signature:</strong></p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">function normalizePath(id: string): string</pre>
</div>
<p><strong>Related:</strong> <a href="api-plugin#path-normalization">Path Normalization</a></p>
<p>Normalizes a path to interoperate between Vite plugins.</p>
<h2 id="transformwithesbuild" tabindex="-1">
<code>transformWithEsbuild</code> </h2>
<p><strong>Type Signature:</strong></p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">async function transformWithEsbuild(
  code: string,
  filename: string,
  options?: EsbuildTransformOptions,
  inMap?: object,
): Promise&lt;ESBuildTransformResult&gt;</pre>
</div>
<p>Transform JavaScript or TypeScript with esbuild. Useful for plugins that prefer matching Vite's internal esbuild transform.</p>
<h2 id="loadconfigfromfile" tabindex="-1">
<code>loadConfigFromFile</code> </h2>
<p><strong>Type Signature:</strong></p>
<div class="language-ts vp-adaptive-theme">
<span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" data-language="javascript">async function loadConfigFromFile(
  configEnv: ConfigEnv,
  configFile?: string,
  configRoot: string = process.cwd(),
  logLevel?: LogLevel,
): Promise&lt;{
  path: string
  config: UserConfig
  dependencies: string[]
} | null&gt;</pre>
</div>
<p>Load a Vite config file manually with esbuild.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2019–present, Yuxi (Evan) You and Vite contributors<br>Licensed under the MIT License.<br>
    <a href="https://vitejs.dev/guide/api-javascript" class="_attribution-link">https://vitejs.dev/guide/api-javascript</a>
  </p>
</div>

				
			</div>
			<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-2572770204602497"
     data-ad-slot="1992473792"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
